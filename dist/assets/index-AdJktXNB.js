var MC=n=>{throw TypeError(n)};var O1=(n,e,t)=>e.has(n)||MC("Cannot "+t);var Ds=(n,e,t)=>(O1(n,e,"read from private field"),t?t.call(n):e.get(n)),yc=(n,e,t)=>e.has(n)?MC("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),vr=(n,e,t,s)=>(O1(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),vc=(n,e,t)=>(O1(n,e,"access private method"),t);var PC=(n,e,t,s)=>({set _(i){vr(n,e,i,t)},get _(){return Ds(n,e,s)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function ng(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var L1={exports:{}},Sp={};var OC;function T4(){if(OC)return Sp;OC=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,i,r){var o=null;if(r!==void 0&&(o=""+r),i.key!==void 0&&(o=""+i.key),"key"in i){r={};for(var c in i)c!=="key"&&(r[c]=i[c])}else r=i;return i=r.ref,{$$typeof:n,type:s,key:o,ref:i!==void 0?i:null,props:r}}return Sp.Fragment=e,Sp.jsx=t,Sp.jsxs=t,Sp}var LC;function k4(){return LC||(LC=1,L1.exports=T4()),L1.exports}var a=k4(),F1={exports:{}},Qt={};var FC;function D4(){if(FC)return Qt;FC=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),x=Symbol.iterator;function y(V){return V===null||typeof V!="object"?null:(V=x&&V[x]||V["@@iterator"],typeof V=="function"?V:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,E={};function A(V,re,ge){this.props=V,this.context=re,this.refs=E,this.updater=ge||N}A.prototype.isReactComponent={},A.prototype.setState=function(V,re){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,re,"setState")},A.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function R(){}R.prototype=A.prototype;function M(V,re,ge){this.props=V,this.context=re,this.refs=E,this.updater=ge||N}var L=M.prototype=new R;L.constructor=M,j(L,A.prototype),L.isPureReactComponent=!0;var z=Array.isArray;function W(){}var I={H:null,A:null,T:null,S:null},Y=Object.prototype.hasOwnProperty;function U(V,re,ge){var Ne=ge.ref;return{$$typeof:n,type:V,key:re,ref:Ne!==void 0?Ne:null,props:ge}}function Z(V,re){return U(V.type,re,V.props)}function $(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function ae(V){var re={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ge){return re[ge]})}var xe=/\/+/g;function fe(V,re){return typeof V=="object"&&V!==null&&V.key!=null?ae(""+V.key):re.toString(36)}function ke(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(W,W):(V.status="pending",V.then(function(re){V.status==="pending"&&(V.status="fulfilled",V.value=re)},function(re){V.status==="pending"&&(V.status="rejected",V.reason=re)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function G(V,re,ge,Ne,Ce){var We=typeof V;(We==="undefined"||We==="boolean")&&(V=null);var Ge=!1;if(V===null)Ge=!0;else switch(We){case"bigint":case"string":case"number":Ge=!0;break;case"object":switch(V.$$typeof){case n:case e:Ge=!0;break;case f:return Ge=V._init,G(Ge(V._payload),re,ge,Ne,Ce)}}if(Ge)return Ce=Ce(V),Ge=Ne===""?"."+fe(V,0):Ne,z(Ce)?(ge="",Ge!=null&&(ge=Ge.replace(xe,"$&/")+"/"),G(Ce,re,ge,"",function(Le){return Le})):Ce!=null&&($(Ce)&&(Ce=Z(Ce,ge+(Ce.key==null||V&&V.key===Ce.key?"":(""+Ce.key).replace(xe,"$&/")+"/")+Ge)),re.push(Ce)),1;Ge=0;var Oe=Ne===""?".":Ne+":";if(z(V))for(var $e=0;$e<V.length;$e++)Ne=V[$e],We=Oe+fe(Ne,$e),Ge+=G(Ne,re,ge,We,Ce);else if($e=y(V),typeof $e=="function")for(V=$e.call(V),$e=0;!(Ne=V.next()).done;)Ne=Ne.value,We=Oe+fe(Ne,$e++),Ge+=G(Ne,re,ge,We,Ce);else if(We==="object"){if(typeof V.then=="function")return G(ke(V),re,ge,Ne,Ce);throw re=String(V),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Ge}function X(V,re,ge){if(V==null)return V;var Ne=[],Ce=0;return G(V,Ne,"","",function(We){return re.call(ge,We,Ce++)}),Ne}function se(V){if(V._status===-1){var re=V._result;re=re(),re.then(function(ge){(V._status===0||V._status===-1)&&(V._status=1,V._result=ge)},function(ge){(V._status===0||V._status===-1)&&(V._status=2,V._result=ge)}),V._status===-1&&(V._status=0,V._result=re)}if(V._status===1)return V._result.default;throw V._result}var ee=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},ne={map:X,forEach:function(V,re,ge){X(V,function(){re.apply(this,arguments)},ge)},count:function(V){var re=0;return X(V,function(){re++}),re},toArray:function(V){return X(V,function(re){return re})||[]},only:function(V){if(!$(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Qt.Activity=g,Qt.Children=ne,Qt.Component=A,Qt.Fragment=t,Qt.Profiler=i,Qt.PureComponent=M,Qt.StrictMode=s,Qt.Suspense=u,Qt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Qt.__COMPILER_RUNTIME={__proto__:null,c:function(V){return I.H.useMemoCache(V)}},Qt.cache=function(V){return function(){return V.apply(null,arguments)}},Qt.cacheSignal=function(){return null},Qt.cloneElement=function(V,re,ge){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var Ne=j({},V.props),Ce=V.key;if(re!=null)for(We in re.key!==void 0&&(Ce=""+re.key),re)!Y.call(re,We)||We==="key"||We==="__self"||We==="__source"||We==="ref"&&re.ref===void 0||(Ne[We]=re[We]);var We=arguments.length-2;if(We===1)Ne.children=ge;else if(1<We){for(var Ge=Array(We),Oe=0;Oe<We;Oe++)Ge[Oe]=arguments[Oe+2];Ne.children=Ge}return U(V.type,Ce,Ne)},Qt.createContext=function(V){return V={$$typeof:o,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:r,_context:V},V},Qt.createElement=function(V,re,ge){var Ne,Ce={},We=null;if(re!=null)for(Ne in re.key!==void 0&&(We=""+re.key),re)Y.call(re,Ne)&&Ne!=="key"&&Ne!=="__self"&&Ne!=="__source"&&(Ce[Ne]=re[Ne]);var Ge=arguments.length-2;if(Ge===1)Ce.children=ge;else if(1<Ge){for(var Oe=Array(Ge),$e=0;$e<Ge;$e++)Oe[$e]=arguments[$e+2];Ce.children=Oe}if(V&&V.defaultProps)for(Ne in Ge=V.defaultProps,Ge)Ce[Ne]===void 0&&(Ce[Ne]=Ge[Ne]);return U(V,We,Ce)},Qt.createRef=function(){return{current:null}},Qt.forwardRef=function(V){return{$$typeof:c,render:V}},Qt.isValidElement=$,Qt.lazy=function(V){return{$$typeof:f,_payload:{_status:-1,_result:V},_init:se}},Qt.memo=function(V,re){return{$$typeof:h,type:V,compare:re===void 0?null:re}},Qt.startTransition=function(V){var re=I.T,ge={};I.T=ge;try{var Ne=V(),Ce=I.S;Ce!==null&&Ce(ge,Ne),typeof Ne=="object"&&Ne!==null&&typeof Ne.then=="function"&&Ne.then(W,ee)}catch(We){ee(We)}finally{re!==null&&ge.types!==null&&(re.types=ge.types),I.T=re}},Qt.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Qt.use=function(V){return I.H.use(V)},Qt.useActionState=function(V,re,ge){return I.H.useActionState(V,re,ge)},Qt.useCallback=function(V,re){return I.H.useCallback(V,re)},Qt.useContext=function(V){return I.H.useContext(V)},Qt.useDebugValue=function(){},Qt.useDeferredValue=function(V,re){return I.H.useDeferredValue(V,re)},Qt.useEffect=function(V,re){return I.H.useEffect(V,re)},Qt.useEffectEvent=function(V){return I.H.useEffectEvent(V)},Qt.useId=function(){return I.H.useId()},Qt.useImperativeHandle=function(V,re,ge){return I.H.useImperativeHandle(V,re,ge)},Qt.useInsertionEffect=function(V,re){return I.H.useInsertionEffect(V,re)},Qt.useLayoutEffect=function(V,re){return I.H.useLayoutEffect(V,re)},Qt.useMemo=function(V,re){return I.H.useMemo(V,re)},Qt.useOptimistic=function(V,re){return I.H.useOptimistic(V,re)},Qt.useReducer=function(V,re,ge){return I.H.useReducer(V,re,ge)},Qt.useRef=function(V){return I.H.useRef(V)},Qt.useState=function(V){return I.H.useState(V)},Qt.useSyncExternalStore=function(V,re,ge){return I.H.useSyncExternalStore(V,re,ge)},Qt.useTransition=function(){return I.H.useTransition()},Qt.version="19.2.3",Qt}var zC;function B0(){return zC||(zC=1,F1.exports=D4()),F1.exports}var _=B0();const ht=ng(_);var z1={exports:{}},Np={},I1={exports:{}},B1={};var IC;function R4(){return IC||(IC=1,(function(n){function e(G,X){var se=G.length;G.push(X);e:for(;0<se;){var ee=se-1>>>1,ne=G[ee];if(0<i(ne,X))G[ee]=X,G[se]=ne,se=ee;else break e}}function t(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var X=G[0],se=G.pop();if(se!==X){G[0]=se;e:for(var ee=0,ne=G.length,V=ne>>>1;ee<V;){var re=2*(ee+1)-1,ge=G[re],Ne=re+1,Ce=G[Ne];if(0>i(ge,se))Ne<ne&&0>i(Ce,ge)?(G[ee]=Ce,G[Ne]=se,ee=Ne):(G[ee]=ge,G[re]=se,ee=re);else if(Ne<ne&&0>i(Ce,se))G[ee]=Ce,G[Ne]=se,ee=Ne;else break e}}return X}function i(G,X){var se=G.sortIndex-X.sortIndex;return se!==0?se:G.id-X.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var u=[],h=[],f=1,g=null,x=3,y=!1,N=!1,j=!1,E=!1,A=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function L(G){for(var X=t(h);X!==null;){if(X.callback===null)s(h);else if(X.startTime<=G)s(h),X.sortIndex=X.expirationTime,e(u,X);else break;X=t(h)}}function z(G){if(j=!1,L(G),!N)if(t(u)!==null)N=!0,W||(W=!0,ae());else{var X=t(h);X!==null&&ke(z,X.startTime-G)}}var W=!1,I=-1,Y=5,U=-1;function Z(){return E?!0:!(n.unstable_now()-U<Y)}function $(){if(E=!1,W){var G=n.unstable_now();U=G;var X=!0;try{e:{N=!1,j&&(j=!1,R(I),I=-1),y=!0;var se=x;try{t:{for(L(G),g=t(u);g!==null&&!(g.expirationTime>G&&Z());){var ee=g.callback;if(typeof ee=="function"){g.callback=null,x=g.priorityLevel;var ne=ee(g.expirationTime<=G);if(G=n.unstable_now(),typeof ne=="function"){g.callback=ne,L(G),X=!0;break t}g===t(u)&&s(u),L(G)}else s(u);g=t(u)}if(g!==null)X=!0;else{var V=t(h);V!==null&&ke(z,V.startTime-G),X=!1}}break e}finally{g=null,x=se,y=!1}X=void 0}}finally{X?ae():W=!1}}}var ae;if(typeof M=="function")ae=function(){M($)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,fe=xe.port2;xe.port1.onmessage=$,ae=function(){fe.postMessage(null)}}else ae=function(){A($,0)};function ke(G,X){I=A(function(){G(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(G){switch(x){case 1:case 2:case 3:var X=3;break;default:X=x}var se=x;x=X;try{return G()}finally{x=se}},n.unstable_requestPaint=function(){E=!0},n.unstable_runWithPriority=function(G,X){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var se=x;x=G;try{return X()}finally{x=se}},n.unstable_scheduleCallback=function(G,X,se){var ee=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?ee+se:ee):se=ee,G){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=se+ne,G={id:f++,callback:X,priorityLevel:G,startTime:se,expirationTime:ne,sortIndex:-1},se>ee?(G.sortIndex=se,e(h,G),t(u)===null&&G===t(h)&&(j?(R(I),I=-1):j=!0,ke(z,se-ee))):(G.sortIndex=ne,e(u,G),N||y||(N=!0,W||(W=!0,ae()))),G},n.unstable_shouldYield=Z,n.unstable_wrapCallback=function(G){var X=x;return function(){var se=x;x=X;try{return G.apply(this,arguments)}finally{x=se}}}})(B1)),B1}var BC;function M4(){return BC||(BC=1,I1.exports=R4()),I1.exports}var H1={exports:{}},Da={};var HC;function P4(){if(HC)return Da;HC=1;var n=B0();function e(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)h+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function r(u,h,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:u,containerInfo:h,implementation:f}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Da.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Da.createPortal=function(u,h){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return r(u,h,null,f)},Da.flushSync=function(u){var h=o.T,f=s.p;try{if(o.T=null,s.p=2,u)return u()}finally{o.T=h,s.p=f,s.d.f()}},Da.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(u,h))},Da.prefetchDNS=function(u){typeof u=="string"&&s.d.D(u)},Da.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var f=h.as,g=c(f,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,y=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;f==="style"?s.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:x,fetchPriority:y}):f==="script"&&s.d.X(u,{crossOrigin:g,integrity:x,fetchPriority:y,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Da.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var f=c(h.as,h.crossOrigin);s.d.M(u,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(u)},Da.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var f=h.as,g=c(f,h.crossOrigin);s.d.L(u,f,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Da.preloadModule=function(u,h){if(typeof u=="string")if(h){var f=c(h.as,h.crossOrigin);s.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(u)},Da.requestFormReset=function(u){s.d.r(u)},Da.unstable_batchedUpdates=function(u,h){return u(h)},Da.useFormState=function(u,h,f){return o.H.useFormState(u,h,f)},Da.useFormStatus=function(){return o.H.useHostTransitionStatus()},Da.version="19.2.3",Da}var UC;function Zy(){if(UC)return H1.exports;UC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),H1.exports=P4(),H1.exports}var VC;function O4(){if(VC)return Np;VC=1;var n=M4(),e=B0(),t=Zy();function s(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function r(l){var d=l,m=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(m=d.return),l=d.return;while(l)}return d.tag===3?m:null}function o(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function c(l){if(l.tag===31){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function u(l){if(r(l)!==l)throw Error(s(188))}function h(l){var d=l.alternate;if(!d){if(d=r(l),d===null)throw Error(s(188));return d!==l?null:l}for(var m=l,p=d;;){var C=m.return;if(C===null)break;var T=C.alternate;if(T===null){if(p=C.return,p!==null){m=p;continue}break}if(C.child===T.child){for(T=C.child;T;){if(T===m)return u(C),l;if(T===p)return u(C),d;T=T.sibling}throw Error(s(188))}if(m.return!==p.return)m=C,p=T;else{for(var B=!1,Q=C.child;Q;){if(Q===m){B=!0,m=C,p=T;break}if(Q===p){B=!0,p=C,m=T;break}Q=Q.sibling}if(!B){for(Q=T.child;Q;){if(Q===m){B=!0,m=T,p=C;break}if(Q===p){B=!0,p=T,m=C;break}Q=Q.sibling}if(!B)throw Error(s(189))}}if(m.alternate!==p)throw Error(s(190))}if(m.tag!==3)throw Error(s(188));return m.stateNode.current===m?l:d}function f(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=f(l),d!==null)return d;l=l.sibling}return null}var g=Object.assign,x=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),M=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function ae(l){return l===null||typeof l!="object"?null:(l=$&&l[$]||l["@@iterator"],typeof l=="function"?l:null)}var xe=Symbol.for("react.client.reference");function fe(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===xe?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case j:return"Fragment";case A:return"Profiler";case E:return"StrictMode";case z:return"Suspense";case W:return"SuspenseList";case U:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case N:return"Portal";case M:return l.displayName||"Context";case R:return(l._context.displayName||"Context")+".Consumer";case L:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case I:return d=l.displayName||null,d!==null?d:fe(l.type)||"Memo";case Y:d=l._payload,l=l._init;try{return fe(l(d))}catch{}}return null}var ke=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},ee=[],ne=-1;function V(l){return{current:l}}function re(l){0>ne||(l.current=ee[ne],ee[ne]=null,ne--)}function ge(l,d){ne++,ee[ne]=l.current,l.current=d}var Ne=V(null),Ce=V(null),We=V(null),Ge=V(null);function Oe(l,d){switch(ge(We,d),ge(Ce,l),ge(Ne,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?nC(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=nC(d),l=sC(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}re(Ne),ge(Ne,l)}function $e(){re(Ne),re(Ce),re(We)}function Le(l){l.memoizedState!==null&&ge(Ge,l);var d=Ne.current,m=sC(d,l.type);d!==m&&(ge(Ce,l),ge(Ne,m))}function pe(l){Ce.current===l&&(re(Ne),re(Ce)),Ge.current===l&&(re(Ge),bp._currentValue=se)}var je,Se;function Je(l){if(je===void 0)try{throw Error()}catch(m){var d=m.stack.trim().match(/\n( *(at )?)/);je=d&&d[1]||"",Se=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+je+l+Se}var lt=!1;function ct(l,d){if(!l||lt)return"";lt=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(d){var Ue=function(){throw Error()};if(Object.defineProperty(Ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ue,[])}catch(Me){var Ae=Me}Reflect.construct(l,[],Ue)}else{try{Ue.call()}catch(Me){Ae=Me}l.call(Ue.prototype)}}else{try{throw Error()}catch(Me){Ae=Me}(Ue=l())&&typeof Ue.catch=="function"&&Ue.catch(function(){})}}catch(Me){if(Me&&Ae&&typeof Me.stack=="string")return[Me.stack,Ae.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=p.DetermineComponentFrameRoot(),B=T[0],Q=T[1];if(B&&Q){var oe=B.split(`
`),ve=Q.split(`
`);for(C=p=0;p<oe.length&&!oe[p].includes("DetermineComponentFrameRoot");)p++;for(;C<ve.length&&!ve[C].includes("DetermineComponentFrameRoot");)C++;if(p===oe.length||C===ve.length)for(p=oe.length-1,C=ve.length-1;1<=p&&0<=C&&oe[p]!==ve[C];)C--;for(;1<=p&&0<=C;p--,C--)if(oe[p]!==ve[C]){if(p!==1||C!==1)do if(p--,C--,0>C||oe[p]!==ve[C]){var ze=`
`+oe[p].replace(" at new "," at ");return l.displayName&&ze.includes("<anonymous>")&&(ze=ze.replace("<anonymous>",l.displayName)),ze}while(1<=p&&0<=C);break}}}finally{lt=!1,Error.prepareStackTrace=m}return(m=l?l.displayName||l.name:"")?Je(m):""}function Fe(l,d){switch(l.tag){case 26:case 27:case 5:return Je(l.type);case 16:return Je("Lazy");case 13:return l.child!==d&&d!==null?Je("Suspense Fallback"):Je("Suspense");case 19:return Je("SuspenseList");case 0:case 15:return ct(l.type,!1);case 11:return ct(l.type.render,!1);case 1:return ct(l.type,!0);case 31:return Je("Activity");default:return""}}function nt(l){try{var d="",m=null;do d+=Fe(l,m),m=l,l=l.return;while(l);return d}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var Ye=Object.prototype.hasOwnProperty,ot=n.unstable_scheduleCallback,St=n.unstable_cancelCallback,Pt=n.unstable_shouldYield,qe=n.unstable_requestPaint,Ze=n.unstable_now,Xe=n.unstable_getCurrentPriorityLevel,yt=n.unstable_ImmediatePriority,Et=n.unstable_UserBlockingPriority,Ot=n.unstable_NormalPriority,Kt=n.unstable_LowPriority,Fn=n.unstable_IdlePriority,un=n.log,qs=n.unstable_setDisableYieldValue,Os=null,An=null;function ye(l){if(typeof un=="function"&&qs(l),An&&typeof An.setStrictMode=="function")try{An.setStrictMode(Os,l)}catch{}}var Qe=Math.clz32?Math.clz32:mt,rt=Math.log,Nt=Math.LN2;function mt(l){return l>>>=0,l===0?32:31-(rt(l)/Nt|0)|0}var It=256,et=262144,le=4194304;function Ke(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function at(l,d,m){var p=l.pendingLanes;if(p===0)return 0;var C=0,T=l.suspendedLanes,B=l.pingedLanes;l=l.warmLanes;var Q=p&134217727;return Q!==0?(p=Q&~T,p!==0?C=Ke(p):(B&=Q,B!==0?C=Ke(B):m||(m=Q&~l,m!==0&&(C=Ke(m))))):(Q=p&~T,Q!==0?C=Ke(Q):B!==0?C=Ke(B):m||(m=p&~l,m!==0&&(C=Ke(m)))),C===0?0:d!==0&&d!==C&&(d&T)===0&&(T=C&-C,m=d&-d,T>=m||T===32&&(m&4194048)!==0)?d:C}function ut(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function gt(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dt(){var l=le;return le<<=1,(le&62914560)===0&&(le=4194304),l}function hn(l){for(var d=[],m=0;31>m;m++)d.push(l);return d}function en(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Rt(l,d,m,p,C,T){var B=l.pendingLanes;l.pendingLanes=m,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=m,l.entangledLanes&=m,l.errorRecoveryDisabledLanes&=m,l.shellSuspendCounter=0;var Q=l.entanglements,oe=l.expirationTimes,ve=l.hiddenUpdates;for(m=B&~m;0<m;){var ze=31-Qe(m),Ue=1<<ze;Q[ze]=0,oe[ze]=-1;var Ae=ve[ze];if(Ae!==null)for(ve[ze]=null,ze=0;ze<Ae.length;ze++){var Me=Ae[ze];Me!==null&&(Me.lane&=-536870913)}m&=~Ue}p!==0&&Ei(l,p,0),T!==0&&C===0&&l.tag!==0&&(l.suspendedLanes|=T&~(B&~d))}function Ei(l,d,m){l.pendingLanes|=d,l.suspendedLanes&=~d;var p=31-Qe(d);l.entangledLanes|=d,l.entanglements[p]=l.entanglements[p]|1073741824|m&261930}function $s(l,d){var m=l.entangledLanes|=d;for(l=l.entanglements;m;){var p=31-Qe(m),C=1<<p;C&d|l[p]&d&&(l[p]|=d),m&=~C}}function Dn(l,d){var m=d&-d;return m=(m&42)!==0?1:Cs(m),(m&(l.suspendedLanes|d))!==0?0:m}function Cs(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function jn(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Zi(){var l=X.p;return l!==0?l:(l=window.event,l===void 0?32:AC(l.type))}function As(l,d){var m=X.p;try{return X.p=l,d()}finally{X.p=m}}var fn=Math.random().toString(36).slice(2),Vs="__reactFiber$"+fn,_i="__reactProps$"+fn,xo="__reactContainer$"+fn,Hd="__reactEvents$"+fn,Fc="__reactListeners$"+fn,Lf="__reactHandles$"+fn,En="__reactResources$"+fn,kn="__reactMarker$"+fn;function Xo(l){delete l[Vs],delete l[_i],delete l[Hd],delete l[Fc],delete l[Lf]}function Ws(l){var d=l[Vs];if(d)return d;for(var m=l.parentNode;m;){if(d=m[xo]||m[Vs]){if(m=d.alternate,d.child!==null||m!==null&&m.child!==null)for(l=dC(l);l!==null;){if(m=l[Vs])return m;l=dC(l)}return d}l=m,m=l.parentNode}return null}function Bl(l){if(l=l[Vs]||l[xo]){var d=l.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return l}return null}function Ko(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(s(33))}function Zo(l){var d=l[En];return d||(d=l[En]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function Ls(l){l[kn]=!0}var Ff=new Set,Hl={};function Kn(l,d){Mr(l,d),Mr(l+"Capture",d)}function Mr(l,d){for(Hl[l]=d,l=0;l<d.length;l++)Ff.add(d[l])}var Ud=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pr={},zc={};function _g(l){return Ye.call(zc,l)?!0:Ye.call(Pr,l)?!1:Ud.test(l)?zc[l]=!0:(Pr[l]=!0,!1)}function Vd(l,d,m){if(_g(d))if(m===null)l.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var p=d.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+m)}}function Or(l,d,m){if(m===null)l.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+m)}}function Sa(l,d,m,p){if(p===null)l.removeAttribute(m);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(m);return}l.setAttributeNS(d,m,""+p)}}function Ti(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Lr(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function dh(l,d,m){var p=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if(!l.hasOwnProperty(d)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var C=p.get,T=p.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return C.call(this)},set:function(B){m=""+B,T.call(this,B)}}),Object.defineProperty(l,d,{enumerable:p.enumerable}),{getValue:function(){return m},setValue:function(B){m=""+B},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function uh(l){if(!l._valueTracker){var d=Lr(l)?"checked":"value";l._valueTracker=dh(l,d,""+l[d])}}function Ul(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var m=d.getValue(),p="";return l&&(p=Lr(l)?l.checked?"true":"false":l.value),l=p,l!==m?(d.setValue(l),!0):!1}function os(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Qo=/[\n"\\]/g;function ki(l){return l.replace(Qo,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function Ic(l,d,m,p,C,T,B,Q){l.name="",B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?l.type=B:l.removeAttribute("type"),d!=null?B==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+Ti(d)):l.value!==""+Ti(d)&&(l.value=""+Ti(d)):B!=="submit"&&B!=="reset"||l.removeAttribute("value"),d!=null?Bc(l,B,Ti(d)):m!=null?Bc(l,B,Ti(m)):p!=null&&l.removeAttribute("value"),C==null&&T!=null&&(l.defaultChecked=!!T),C!=null&&(l.checked=C&&typeof C!="function"&&typeof C!="symbol"),Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?l.name=""+Ti(Q):l.removeAttribute("name")}function Fr(l,d,m,p,C,T,B,Q){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(l.type=T),d!=null||m!=null){if(!(T!=="submit"&&T!=="reset"||d!=null)){uh(l);return}m=m!=null?""+Ti(m):"",d=d!=null?""+Ti(d):m,Q||d===l.value||(l.value=d),l.defaultValue=d}p=p??C,p=typeof p!="function"&&typeof p!="symbol"&&!!p,l.checked=Q?l.checked:!!p,l.defaultChecked=!!p,B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(l.name=B),uh(l)}function Bc(l,d,m){d==="number"&&os(l.ownerDocument)===l||l.defaultValue===""+m||(l.defaultValue=""+m)}function bo(l,d,m,p){if(l=l.options,d){d={};for(var C=0;C<m.length;C++)d["$"+m[C]]=!0;for(m=0;m<l.length;m++)C=d.hasOwnProperty("$"+l[m].value),l[m].selected!==C&&(l[m].selected=C),C&&p&&(l[m].defaultSelected=!0)}else{for(m=""+Ti(m),d=null,C=0;C<l.length;C++){if(l[C].value===m){l[C].selected=!0,p&&(l[C].defaultSelected=!0);return}d!==null||l[C].disabled||(d=l[C])}d!==null&&(d.selected=!0)}}function zr(l,d,m){if(d!=null&&(d=""+Ti(d),d!==l.value&&(l.value=d),m==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=m!=null?""+Ti(m):""}function hh(l,d,m,p){if(d==null){if(p!=null){if(m!=null)throw Error(s(92));if(ke(p)){if(1<p.length)throw Error(s(93));p=p[0]}m=p}m==null&&(m=""),d=m}m=Ti(d),l.defaultValue=m,p=l.textContent,p===m&&p!==""&&p!==null&&(l.value=p),uh(l)}function Vl(l,d){if(d){var m=l.firstChild;if(m&&m===l.lastChild&&m.nodeType===3){m.nodeValue=d;return}}l.textContent=d}var Jo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hc(l,d,m){var p=d.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?p?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":p?l.setProperty(d,m):typeof m!="number"||m===0||Jo.has(d)?d==="float"?l.cssFloat=m:l[d]=(""+m).trim():l[d]=m+"px"}function zf(l,d,m){if(d!=null&&typeof d!="object")throw Error(s(62));if(l=l.style,m!=null){for(var p in m)!m.hasOwnProperty(p)||d!=null&&d.hasOwnProperty(p)||(p.indexOf("--")===0?l.setProperty(p,""):p==="float"?l.cssFloat="":l[p]="");for(var C in d)p=d[C],d.hasOwnProperty(C)&&m[C]!==p&&Hc(l,C,p)}else for(var T in d)d.hasOwnProperty(T)&&Hc(l,T,d[T])}function fh(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Di=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mi(l){return Di.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function Ir(){}var Wl=null;function Gl(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Yl=null,qo=null;function or(l){var d=Bl(l);if(d&&(l=d.stateNode)){var m=l[_i]||null;e:switch(l=d.stateNode,d.type){case"input":if(Ic(l,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),d=m.name,m.type==="radio"&&d!=null){for(m=l;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+ki(""+d)+'"][type="radio"]'),d=0;d<m.length;d++){var p=m[d];if(p!==l&&p.form===l.form){var C=p[_i]||null;if(!C)throw Error(s(90));Ic(p,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(d=0;d<m.length;d++)p=m[d],p.form===l.form&&Ul(p)}break e;case"textarea":zr(l,m.value,m.defaultValue);break e;case"select":d=m.value,d!=null&&bo(l,!!m.multiple,d,!1)}}}var Uc=!1;function Wd(l,d,m){if(Uc)return l(d,m);Uc=!0;try{var p=l(d);return p}finally{if(Uc=!1,(Yl!==null||qo!==null)&&(Ux(),Yl&&(d=Yl,l=qo,qo=Yl=null,or(d),l)))for(d=0;d<l.length;d++)or(l[d])}}function $o(l,d){var m=l.stateNode;if(m===null)return null;var p=m[_i]||null;if(p===null)return null;m=p[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(l=l.type,p=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!p;break e;default:l=!1}if(l)return null;if(m&&typeof m!="function")throw Error(s(231,d,typeof m));return m}var Na=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rn=!1;if(Na)try{var Br={};Object.defineProperty(Br,"passive",{get:function(){Rn=!0}}),window.addEventListener("test",Br,Br),window.removeEventListener("test",Br,Br)}catch{Rn=!1}var Ua=null,el=null,yo=null;function Xl(){if(yo)return yo;var l,d=el,m=d.length,p,C="value"in Ua?Ua.value:Ua.textContent,T=C.length;for(l=0;l<m&&d[l]===C[l];l++);var B=m-l;for(p=1;p<=B&&d[m-p]===C[T-p];p++);return yo=C.slice(l,1<p?1-p:void 0)}function tl(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function Hr(){return!0}function Ur(){return!1}function ei(l){function d(m,p,C,T,B){this._reactName=m,this._targetInst=C,this.type=p,this.nativeEvent=T,this.target=B,this.currentTarget=null;for(var Q in l)l.hasOwnProperty(Q)&&(m=l[Q],this[Q]=m?m(T):T[Q]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Hr:Ur,this.isPropagationStopped=Ur,this}return g(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Hr)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Hr)},persist:function(){},isPersistent:Hr}),d}var Ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vc=ei(Ri),nl=g({},Ri,{view:0,detail:0}),Kl=ei(nl),sl,Gd,Zl,Wc=g({},nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zd,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Zl&&(Zl&&l.type==="mousemove"?(sl=l.screenX-Zl.screenX,Gd=l.screenY-Zl.screenY):Gd=sl=0,Zl=l),sl)},movementY:function(l){return"movementY"in l?l.movementY:Gd}}),If=ei(Wc),kg=g({},Wc,{dataTransfer:0}),Dg=ei(kg),Rg=g({},nl,{relatedTarget:0}),Gc=ei(Rg),Bf=g({},Ri,{animationName:0,elapsedTime:0,pseudoElement:0}),Mg=ei(Bf),Hf=g({},Ri,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Yd=ei(Hf),Pg=g({},Ri,{data:0}),Xd=ei(Pg),Uf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ql={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kd(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=mh[l])?!!d[l]:!1}function Zd(){return Kd}var Jl=g({},nl,{key:function(l){if(l.key){var d=Uf[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=tl(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Ql[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zd,charCode:function(l){return l.type==="keypress"?tl(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?tl(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Og=ei(Jl),Lg=g({},Wc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vf=ei(Lg),ti=g({},nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zd}),ql=ei(ti),gh=g({},Ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qd=ei(gh),Wf=g({},Wc,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),il=ei(Wf),vo=g({},Ri,{newState:0,oldState:0}),Yc=ei(vo),wo=[9,13,27,32],Gs=Na&&"CompositionEvent"in window,lr=null;Na&&"documentMode"in document&&(lr=document.documentMode);var Vn=Na&&"TextEvent"in window&&!lr,Va=Na&&(!Gs||lr&&8<lr&&11>=lr),Jd=" ",$l=!1;function ph(l,d){switch(l){case"keyup":return wo.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qd(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var al=!1;function $d(l,d){switch(l){case"compositionend":return qd(d);case"keypress":return d.which!==32?null:($l=!0,Jd);case"textInput":return l=d.data,l===Jd&&$l?null:l;default:return null}}function eu(l,d){if(al)return l==="compositionend"||!Gs&&ph(l,d)?(l=Xl(),yo=el=Ua=null,al=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Va&&d.locale!=="ko"?null:d.data;default:return null}}var ja={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tu(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!ja[l.type]:d==="textarea"}function Xc(l,d,m,p){Yl?qo?qo.push(p):qo=[p]:Yl=p,d=Zx(d,"onChange"),0<d.length&&(m=new Vc("onChange","change",null,m,p),l.push({event:m,listeners:d}))}var Vr=null,So=null;function nu(l){Qj(l,0)}function rl(l){var d=Ko(l);if(Ul(d))return l}function Kc(l,d){if(l==="change")return d}var Fs=!1;if(Na){var xh;if(Na){var Wr="oninput"in document;if(!Wr){var su=document.createElement("div");su.setAttribute("oninput","return;"),Wr=typeof su.oninput=="function"}xh=Wr}else xh=!1;Fs=xh&&(!document.documentMode||9<document.documentMode)}function iu(){Vr&&(Vr.detachEvent("onpropertychange",au),So=Vr=null)}function au(l){if(l.propertyName==="value"&&rl(So)){var d=[];Xc(d,So,l,Gl(l)),Wd(nu,d)}}function ru(l,d,m){l==="focusin"?(iu(),Vr=d,So=m,Vr.attachEvent("onpropertychange",au)):l==="focusout"&&iu()}function Zc(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return rl(So)}function No(l,d){if(l==="click")return rl(d)}function Gf(l,d){if(l==="input"||l==="change")return rl(d)}function ol(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var ni=typeof Object.is=="function"?Object.is:ol;function Wa(l,d){if(ni(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var m=Object.keys(l),p=Object.keys(d);if(m.length!==p.length)return!1;for(p=0;p<m.length;p++){var C=m[p];if(!Ye.call(d,C)||!ni(l[C],d[C]))return!1}return!0}function ll(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function jo(l,d){var m=ll(l);l=0;for(var p;m;){if(m.nodeType===3){if(p=l+m.textContent.length,l<=d&&p>=d)return{node:m,offset:d-l};l=p}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=ll(m)}}function Co(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?Co(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function ou(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=os(l.document);d instanceof l.HTMLIFrameElement;){try{var m=typeof d.contentWindow.location.href=="string"}catch{m=!1}if(m)l=d.contentWindow;else break;d=os(l.document)}return d}function lu(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var cl=Na&&"documentMode"in document&&11>=document.documentMode,cr=null,ec=null,Ga=null,tc=!1;function bh(l,d,m){var p=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;tc||cr==null||cr!==os(p)||(p=cr,"selectionStart"in p&&lu(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Ga&&Wa(Ga,p)||(Ga=p,p=Zx(ec,"onSelect"),0<p.length&&(d=new Vc("onSelect","select",null,d,m),l.push({event:d,listeners:p}),d.target=cr)))}function gi(l,d){var m={};return m[l.toLowerCase()]=d.toLowerCase(),m["Webkit"+l]="webkit"+d,m["Moz"+l]="moz"+d,m}var Gr={animationend:gi("Animation","AnimationEnd"),animationiteration:gi("Animation","AnimationIteration"),animationstart:gi("Animation","AnimationStart"),transitionrun:gi("Transition","TransitionRun"),transitionstart:gi("Transition","TransitionStart"),transitioncancel:gi("Transition","TransitionCancel"),transitionend:gi("Transition","TransitionEnd")},Qc={},v={};Na&&(v=document.createElement("div").style,"AnimationEvent"in window||(delete Gr.animationend.animation,delete Gr.animationiteration.animation,delete Gr.animationstart.animation),"TransitionEvent"in window||delete Gr.transitionend.transition);function S(l){if(Qc[l])return Qc[l];if(!Gr[l])return l;var d=Gr[l],m;for(m in d)if(d.hasOwnProperty(m)&&m in v)return Qc[l]=d[m];return l}var D=S("animationend"),O=S("animationiteration"),H=S("animationstart"),J=S("transitionrun"),te=S("transitionstart"),Ee=S("transitioncancel"),ce=S("transitionend"),_e=new Map,He="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");He.push("scrollEnd");function Pe(l,d){_e.set(l,d),Kn(d,[l])}var it=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},pt=[],Zt=0,Ut=0;function Bt(){for(var l=Zt,d=Ut=Zt=0;d<l;){var m=pt[d];pt[d++]=null;var p=pt[d];pt[d++]=null;var C=pt[d];pt[d++]=null;var T=pt[d];if(pt[d++]=null,p!==null&&C!==null){var B=p.pending;B===null?C.next=C:(C.next=B.next,B.next=C),p.pending=C}T!==0&&ns(m,C,T)}}function zt(l,d,m,p){pt[Zt++]=l,pt[Zt++]=d,pt[Zt++]=m,pt[Zt++]=p,Ut|=p,l.lanes|=p,l=l.alternate,l!==null&&(l.lanes|=p)}function Wt(l,d,m,p){return zt(l,d,m,p),rn(l)}function _n(l,d){return zt(l,null,null,d),rn(l)}function ns(l,d,m){l.lanes|=m;var p=l.alternate;p!==null&&(p.lanes|=m);for(var C=!1,T=l.return;T!==null;)T.childLanes|=m,p=T.alternate,p!==null&&(p.childLanes|=m),T.tag===22&&(l=T.stateNode,l===null||l._visibility&1||(C=!0)),l=T,T=T.return;return l.tag===3?(T=l.stateNode,C&&d!==null&&(C=31-Qe(m),l=T.hiddenUpdates,p=l[C],p===null?l[C]=[d]:p.push(d),d.lane=m|536870912),T):null}function rn(l){if(50<up)throw up=0,a1=null,Error(s(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var on={};function mn(l,d,m,p){this.tag=l,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(l,d,m,p){return new mn(l,d,m,p)}function cn(l){return l=l.prototype,!(!l||!l.isReactComponent)}function ys(l,d){var m=l.alternate;return m===null?(m=Wn(l.tag,d,l.key,l.mode),m.elementType=l.elementType,m.type=l.type,m.stateNode=l.stateNode,m.alternate=l,l.alternate=m):(m.pendingProps=d,m.type=l.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=l.flags&65011712,m.childLanes=l.childLanes,m.lanes=l.lanes,m.child=l.child,m.memoizedProps=l.memoizedProps,m.memoizedState=l.memoizedState,m.updateQueue=l.updateQueue,d=l.dependencies,m.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},m.sibling=l.sibling,m.index=l.index,m.ref=l.ref,m.refCleanup=l.refCleanup,m}function Tn(l,d){l.flags&=65011714;var m=l.alternate;return m===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=m.childLanes,l.lanes=m.lanes,l.child=m.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=m.memoizedProps,l.memoizedState=m.memoizedState,l.updateQueue=m.updateQueue,l.type=m.type,d=m.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function ls(l,d,m,p,C,T){var B=0;if(p=l,typeof l=="function")cn(l)&&(B=1);else if(typeof l=="string")B=x4(l,m,Ne.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case U:return l=Wn(31,m,d,C),l.elementType=U,l.lanes=T,l;case j:return Zn(m.children,C,T,d);case E:B=8,C|=24;break;case A:return l=Wn(12,m,d,C|2),l.elementType=A,l.lanes=T,l;case z:return l=Wn(13,m,d,C),l.elementType=z,l.lanes=T,l;case W:return l=Wn(19,m,d,C),l.elementType=W,l.lanes=T,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case M:B=10;break e;case R:B=9;break e;case L:B=11;break e;case I:B=14;break e;case Y:B=16,p=null;break e}B=29,m=Error(s(130,l===null?"null":typeof l,"")),p=null}return d=Wn(B,m,d,C),d.elementType=l,d.type=p,d.lanes=T,d}function Zn(l,d,m,p){return l=Wn(7,l,p,d),l.lanes=m,l}function Gn(l,d,m){return l=Wn(6,l,null,d),l.lanes=m,l}function pi(l){var d=Wn(18,null,null,0);return d.stateNode=l,d}function Yr(l,d,m){return d=Wn(4,l.children!==null?l.children:[],l.key,d),d.lanes=m,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var Qi=new WeakMap;function xi(l,d){if(typeof l=="object"&&l!==null){var m=Qi.get(l);return m!==void 0?m:(d={value:l,source:d,stack:nt(d)},Qi.set(l,d),d)}return{value:l,source:d,stack:nt(d)}}var Ya=[],vs=0,Mi=null,Pi=0,fs=[],Es=0,Oi=null,zn=1,bi="";function da(l,d){Ya[vs++]=Pi,Ya[vs++]=Mi,Mi=l,Pi=d}function cu(l,d,m){fs[Es++]=zn,fs[Es++]=bi,fs[Es++]=Oi,Oi=l;var p=zn;l=bi;var C=32-Qe(p)-1;p&=~(1<<C),m+=1;var T=32-Qe(d)+C;if(30<T){var B=C-C%5;T=(p&(1<<B)-1).toString(32),p>>=B,C-=B,zn=1<<32-Qe(d)+C|m<<C|p,bi=T+l}else zn=1<<T|m<<C|p,bi=l}function Jc(l){l.return!==null&&(da(l,1),cu(l,1,0))}function du(l){for(;l===Mi;)Mi=Ya[--vs],Ya[vs]=null,Pi=Ya[--vs],Ya[vs]=null;for(;l===Oi;)Oi=fs[--Es],fs[Es]=null,bi=fs[--Es],fs[Es]=null,zn=fs[--Es],fs[Es]=null}function uu(l,d){fs[Es++]=zn,fs[Es++]=bi,fs[Es++]=Oi,zn=d.id,bi=d.overflow,Oi=l}var ws=null,Yn=null,Xt=!1,si=null,Ys=!1,nc=Error(s(519));function Li(l){var d=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xr(xi(d,l)),nc}function hu(l){var d=l.stateNode,m=l.type,p=l.memoizedProps;switch(d[Vs]=l,d[_i]=p,m){case"dialog":pn("cancel",d),pn("close",d);break;case"iframe":case"object":case"embed":pn("load",d);break;case"video":case"audio":for(m=0;m<fp.length;m++)pn(fp[m],d);break;case"source":pn("error",d);break;case"img":case"image":case"link":pn("error",d),pn("load",d);break;case"details":pn("toggle",d);break;case"input":pn("invalid",d),Fr(d,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":pn("invalid",d);break;case"textarea":pn("invalid",d),hh(d,p.value,p.defaultValue,p.children)}m=p.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||d.textContent===""+m||p.suppressHydrationWarning===!0||eC(d.textContent,m)?(p.popover!=null&&(pn("beforetoggle",d),pn("toggle",d)),p.onScroll!=null&&pn("scroll",d),p.onScrollEnd!=null&&pn("scrollend",d),p.onClick!=null&&(d.onclick=Ir),d=!0):d=!1,d||Li(l,!0)}function ua(l){for(ws=l.return;ws;)switch(ws.tag){case 5:case 31:case 13:Ys=!1;return;case 27:case 3:Ys=!0;return;default:ws=ws.return}}function dr(l){if(l!==ws)return!1;if(!Xt)return ua(l),Xt=!0,!1;var d=l.tag,m;if((m=d!==3&&d!==27)&&((m=d===5)&&(m=l.type,m=!(m!=="form"&&m!=="button")||v1(l.type,l.memoizedProps)),m=!m),m&&Yn&&Li(l),ua(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(317));Yn=cC(l)}else if(d===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(317));Yn=cC(l)}else d===27?(d=Yn,Bu(l.type)?(l=C1,C1=null,Yn=l):Yn=d):Yn=ws?ko(l.stateNode.nextSibling):null;return!0}function Ca(){Yn=ws=null,Xt=!1}function Ao(){var l=si;return l!==null&&(br===null?br=l:br.push.apply(br,l),si=null),l}function Xr(l){si===null?si=[l]:si.push(l)}var Xa=V(null),Kr=null,In=null;function Fi(l,d,m){ge(Xa,d._currentValue),d._currentValue=m}function Ji(l){l._currentValue=Xa.current,re(Xa)}function ur(l,d,m){for(;l!==null;){var p=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,p!==null&&(p.childLanes|=d)):p!==null&&(p.childLanes&d)!==d&&(p.childLanes|=d),l===m)break;l=l.return}}function sc(l,d,m,p){var C=l.child;for(C!==null&&(C.return=l);C!==null;){var T=C.dependencies;if(T!==null){var B=C.child;T=T.firstContext;e:for(;T!==null;){var Q=T;T=C;for(var oe=0;oe<d.length;oe++)if(Q.context===d[oe]){T.lanes|=m,Q=T.alternate,Q!==null&&(Q.lanes|=m),ur(T.return,m,l),p||(B=null);break e}T=Q.next}}else if(C.tag===18){if(B=C.return,B===null)throw Error(s(341));B.lanes|=m,T=B.alternate,T!==null&&(T.lanes|=m),ur(B,m,l),B=null}else B=C.child;if(B!==null)B.return=C;else for(B=C;B!==null;){if(B===l){B=null;break}if(C=B.sibling,C!==null){C.return=B.return,B=C;break}B=B.return}C=B}}function ii(l,d,m,p){l=null;for(var C=d,T=!1;C!==null;){if(!T){if((C.flags&524288)!==0)T=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var B=C.alternate;if(B===null)throw Error(s(387));if(B=B.memoizedProps,B!==null){var Q=C.type;ni(C.pendingProps.value,B.value)||(l!==null?l.push(Q):l=[Q])}}else if(C===Ge.current){if(B=C.alternate,B===null)throw Error(s(387));B.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(l!==null?l.push(bp):l=[bp])}C=C.return}l!==null&&sc(d,l,m,p),d.flags|=262144}function Ka(l){for(l=l.firstContext;l!==null;){if(!ni(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function ha(l){Kr=l,In=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Mn(l){return dl(Kr,l)}function _s(l,d){return Kr===null&&ha(l),dl(l,d)}function dl(l,d){var m=d._currentValue;if(d={context:d,memoizedValue:m,next:null},In===null){if(l===null)throw Error(s(308));In=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else In=In.next=d;return m}var yi=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(m,p){l.push(p)}};this.abort=function(){d.aborted=!0,l.forEach(function(m){return m()})}},yh=n.unstable_scheduleCallback,qc=n.unstable_NormalPriority,ss={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fu(){return{controller:new yi,data:new Map,refCount:0}}function ic(l){l.refCount--,l.refCount===0&&yh(qc,function(){l.controller.abort()})}var fa=null,Zr=0,ma=0,ms=null;function ac(l,d){if(fa===null){var m=fa=[];Zr=0,ma=u1(),ms={status:"pending",value:void 0,then:function(p){m.push(p)}}}return Zr++,d.then(ul,ul),d}function ul(){if(--Zr===0&&fa!==null){ms!==null&&(ms.status="fulfilled");var l=fa;fa=null,ma=0,ms=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function mu(l,d){var m=[],p={status:"pending",value:null,reason:null,then:function(C){m.push(C)}};return l.then(function(){p.status="fulfilled",p.value=d;for(var C=0;C<m.length;C++)(0,m[C])(d)},function(C){for(p.status="rejected",p.reason=C,C=0;C<m.length;C++)(0,m[C])(void 0)}),p}var $c=G.S;G.S=function(l,d){jj=Ze(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&ac(l,d),$c!==null&&$c(l,d)};var Qr=V(null);function rc(){var l=Qr.current;return l!==null?l:cs.pooledCache}function oc(l,d){d===null?ge(Qr,Qr.current):ge(Qr,d.pool)}function gs(){var l=rc();return l===null?null:{parent:ss._currentValue,pool:l}}var Jr=Error(s(460)),Eo=Error(s(474)),qr=Error(s(542)),_o={then:function(){}};function ed(l){return l=l.status,l==="fulfilled"||l==="rejected"}function lc(l,d,m){switch(m=l[m],m===void 0?l.push(d):m!==d&&(d.then(Ir,Ir),d=m),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,gu(l),l;default:if(typeof d.status=="string")d.then(Ir,Ir);else{if(l=cs,l!==null&&100<l.shellSuspendCounter)throw Error(s(482));l=d,l.status="pending",l.then(function(p){if(d.status==="pending"){var C=d;C.status="fulfilled",C.value=p}},function(p){if(d.status==="pending"){var C=d;C.status="rejected",C.reason=p}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,gu(l),l}throw zi=d,Jr}}function Za(l){try{var d=l._init;return d(l._payload)}catch(m){throw m!==null&&typeof m=="object"&&typeof m.then=="function"?(zi=m,Jr):m}}var zi=null;function qi(){if(zi===null)throw Error(s(459));var l=zi;return zi=null,l}function gu(l){if(l===Jr||l===qr)throw Error(s(483))}var ga=null,hl=0;function Aa(l){var d=hl;return hl+=1,ga===null&&(ga=[]),lc(ga,l,d)}function Qa(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function Ea(l,d){throw d.$$typeof===x?Error(s(525)):(l=Object.prototype.toString.call(d),Error(s(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function fl(l){function d(me,de){if(l){var be=me.deletions;be===null?(me.deletions=[de],me.flags|=16):be.push(de)}}function m(me,de){if(!l)return null;for(;de!==null;)d(me,de),de=de.sibling;return null}function p(me){for(var de=new Map;me!==null;)me.key!==null?de.set(me.key,me):de.set(me.index,me),me=me.sibling;return de}function C(me,de){return me=ys(me,de),me.index=0,me.sibling=null,me}function T(me,de,be){return me.index=be,l?(be=me.alternate,be!==null?(be=be.index,be<de?(me.flags|=67108866,de):be):(me.flags|=67108866,de)):(me.flags|=1048576,de)}function B(me){return l&&me.alternate===null&&(me.flags|=67108866),me}function Q(me,de,be,Be){return de===null||de.tag!==6?(de=Gn(be,me.mode,Be),de.return=me,de):(de=C(de,be),de.return=me,de)}function oe(me,de,be,Be){var Tt=be.type;return Tt===j?ze(me,de,be.props.children,Be,be.key):de!==null&&(de.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===Y&&Za(Tt)===de.type)?(de=C(de,be.props),Qa(de,be),de.return=me,de):(de=ls(be.type,be.key,be.props,null,me.mode,Be),Qa(de,be),de.return=me,de)}function ve(me,de,be,Be){return de===null||de.tag!==4||de.stateNode.containerInfo!==be.containerInfo||de.stateNode.implementation!==be.implementation?(de=Yr(be,me.mode,Be),de.return=me,de):(de=C(de,be.children||[]),de.return=me,de)}function ze(me,de,be,Be,Tt){return de===null||de.tag!==7?(de=Zn(be,me.mode,Be,Tt),de.return=me,de):(de=C(de,be),de.return=me,de)}function Ue(me,de,be){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return de=Gn(""+de,me.mode,be),de.return=me,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case y:return be=ls(de.type,de.key,de.props,null,me.mode,be),Qa(be,de),be.return=me,be;case N:return de=Yr(de,me.mode,be),de.return=me,de;case Y:return de=Za(de),Ue(me,de,be)}if(ke(de)||ae(de))return de=Zn(de,me.mode,be,null),de.return=me,de;if(typeof de.then=="function")return Ue(me,Aa(de),be);if(de.$$typeof===M)return Ue(me,_s(me,de),be);Ea(me,de)}return null}function Ae(me,de,be,Be){var Tt=de!==null?de.key:null;if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return Tt!==null?null:Q(me,de,""+be,Be);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case y:return be.key===Tt?oe(me,de,be,Be):null;case N:return be.key===Tt?ve(me,de,be,Be):null;case Y:return be=Za(be),Ae(me,de,be,Be)}if(ke(be)||ae(be))return Tt!==null?null:ze(me,de,be,Be,null);if(typeof be.then=="function")return Ae(me,de,Aa(be),Be);if(be.$$typeof===M)return Ae(me,de,_s(me,be),Be);Ea(me,be)}return null}function Me(me,de,be,Be,Tt){if(typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint")return me=me.get(be)||null,Q(de,me,""+Be,Tt);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case y:return me=me.get(Be.key===null?be:Be.key)||null,oe(de,me,Be,Tt);case N:return me=me.get(Be.key===null?be:Be.key)||null,ve(de,me,Be,Tt);case Y:return Be=Za(Be),Me(me,de,be,Be,Tt)}if(ke(Be)||ae(Be))return me=me.get(be)||null,ze(de,me,Be,Tt,null);if(typeof Be.then=="function")return Me(me,de,be,Aa(Be),Tt);if(Be.$$typeof===M)return Me(me,de,be,_s(de,Be),Tt);Ea(de,Be)}return null}function vt(me,de,be,Be){for(var Tt=null,On=null,jt=de,sn=de=0,yn=null;jt!==null&&sn<be.length;sn++){jt.index>sn?(yn=jt,jt=null):yn=jt.sibling;var Ln=Ae(me,jt,be[sn],Be);if(Ln===null){jt===null&&(jt=yn);break}l&&jt&&Ln.alternate===null&&d(me,jt),de=T(Ln,de,sn),On===null?Tt=Ln:On.sibling=Ln,On=Ln,jt=yn}if(sn===be.length)return m(me,jt),Xt&&da(me,sn),Tt;if(jt===null){for(;sn<be.length;sn++)jt=Ue(me,be[sn],Be),jt!==null&&(de=T(jt,de,sn),On===null?Tt=jt:On.sibling=jt,On=jt);return Xt&&da(me,sn),Tt}for(jt=p(jt);sn<be.length;sn++)yn=Me(jt,me,sn,be[sn],Be),yn!==null&&(l&&yn.alternate!==null&&jt.delete(yn.key===null?sn:yn.key),de=T(yn,de,sn),On===null?Tt=yn:On.sibling=yn,On=yn);return l&&jt.forEach(function(Gu){return d(me,Gu)}),Xt&&da(me,sn),Tt}function Lt(me,de,be,Be){if(be==null)throw Error(s(151));for(var Tt=null,On=null,jt=de,sn=de=0,yn=null,Ln=be.next();jt!==null&&!Ln.done;sn++,Ln=be.next()){jt.index>sn?(yn=jt,jt=null):yn=jt.sibling;var Gu=Ae(me,jt,Ln.value,Be);if(Gu===null){jt===null&&(jt=yn);break}l&&jt&&Gu.alternate===null&&d(me,jt),de=T(Gu,de,sn),On===null?Tt=Gu:On.sibling=Gu,On=Gu,jt=yn}if(Ln.done)return m(me,jt),Xt&&da(me,sn),Tt;if(jt===null){for(;!Ln.done;sn++,Ln=be.next())Ln=Ue(me,Ln.value,Be),Ln!==null&&(de=T(Ln,de,sn),On===null?Tt=Ln:On.sibling=Ln,On=Ln);return Xt&&da(me,sn),Tt}for(jt=p(jt);!Ln.done;sn++,Ln=be.next())Ln=Me(jt,me,sn,Ln.value,Be),Ln!==null&&(l&&Ln.alternate!==null&&jt.delete(Ln.key===null?sn:Ln.key),de=T(Ln,de,sn),On===null?Tt=Ln:On.sibling=Ln,On=Ln);return l&&jt.forEach(function(_4){return d(me,_4)}),Xt&&da(me,sn),Tt}function as(me,de,be,Be){if(typeof be=="object"&&be!==null&&be.type===j&&be.key===null&&(be=be.props.children),typeof be=="object"&&be!==null){switch(be.$$typeof){case y:e:{for(var Tt=be.key;de!==null;){if(de.key===Tt){if(Tt=be.type,Tt===j){if(de.tag===7){m(me,de.sibling),Be=C(de,be.props.children),Be.return=me,me=Be;break e}}else if(de.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===Y&&Za(Tt)===de.type){m(me,de.sibling),Be=C(de,be.props),Qa(Be,be),Be.return=me,me=Be;break e}m(me,de);break}else d(me,de);de=de.sibling}be.type===j?(Be=Zn(be.props.children,me.mode,Be,be.key),Be.return=me,me=Be):(Be=ls(be.type,be.key,be.props,null,me.mode,Be),Qa(Be,be),Be.return=me,me=Be)}return B(me);case N:e:{for(Tt=be.key;de!==null;){if(de.key===Tt)if(de.tag===4&&de.stateNode.containerInfo===be.containerInfo&&de.stateNode.implementation===be.implementation){m(me,de.sibling),Be=C(de,be.children||[]),Be.return=me,me=Be;break e}else{m(me,de);break}else d(me,de);de=de.sibling}Be=Yr(be,me.mode,Be),Be.return=me,me=Be}return B(me);case Y:return be=Za(be),as(me,de,be,Be)}if(ke(be))return vt(me,de,be,Be);if(ae(be)){if(Tt=ae(be),typeof Tt!="function")throw Error(s(150));return be=Tt.call(be),Lt(me,de,be,Be)}if(typeof be.then=="function")return as(me,de,Aa(be),Be);if(be.$$typeof===M)return as(me,de,_s(me,be),Be);Ea(me,be)}return typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint"?(be=""+be,de!==null&&de.tag===6?(m(me,de.sibling),Be=C(de,be),Be.return=me,me=Be):(m(me,de),Be=Gn(be,me.mode,Be),Be.return=me,me=Be),B(me)):m(me,de)}return function(me,de,be,Be){try{hl=0;var Tt=as(me,de,be,Be);return ga=null,Tt}catch(jt){if(jt===Jr||jt===qr)throw jt;var On=Wn(29,jt,null,me.mode);return On.lanes=Be,On.return=me,On}}}var Ii=fl(!0),pu=fl(!1),hr=!1;function Ja(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ml(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function $i(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function vi(l,d,m){var p=l.updateQueue;if(p===null)return null;if(p=p.shared,(Bn&2)!==0){var C=p.pending;return C===null?d.next=d:(d.next=C.next,C.next=d),p.pending=d,d=rn(l),ns(l,null,m),d}return zt(l,p,d,m),rn(l)}function _a(l,d,m){if(d=d.updateQueue,d!==null&&(d=d.shared,(m&4194048)!==0)){var p=d.lanes;p&=l.pendingLanes,m|=p,d.lanes=m,$s(l,m)}}function ea(l,d){var m=l.updateQueue,p=l.alternate;if(p!==null&&(p=p.updateQueue,m===p)){var C=null,T=null;if(m=m.firstBaseUpdate,m!==null){do{var B={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};T===null?C=T=B:T=T.next=B,m=m.next}while(m!==null);T===null?C=T=d:T=T.next=d}else C=T=d;m={baseState:p.baseState,firstBaseUpdate:C,lastBaseUpdate:T,shared:p.shared,callbacks:p.callbacks},l.updateQueue=m;return}l=m.lastBaseUpdate,l===null?m.firstBaseUpdate=d:l.next=d,m.lastBaseUpdate=d}var cc=!1;function gl(){if(cc){var l=ms;if(l!==null)throw l}}function fr(l,d,m,p){cc=!1;var C=l.updateQueue;hr=!1;var T=C.firstBaseUpdate,B=C.lastBaseUpdate,Q=C.shared.pending;if(Q!==null){C.shared.pending=null;var oe=Q,ve=oe.next;oe.next=null,B===null?T=ve:B.next=ve,B=oe;var ze=l.alternate;ze!==null&&(ze=ze.updateQueue,Q=ze.lastBaseUpdate,Q!==B&&(Q===null?ze.firstBaseUpdate=ve:Q.next=ve,ze.lastBaseUpdate=oe))}if(T!==null){var Ue=C.baseState;B=0,ze=ve=oe=null,Q=T;do{var Ae=Q.lane&-536870913,Me=Ae!==Q.lane;if(Me?(bn&Ae)===Ae:(p&Ae)===Ae){Ae!==0&&Ae===ma&&(cc=!0),ze!==null&&(ze=ze.next={lane:0,tag:Q.tag,payload:Q.payload,callback:null,next:null});e:{var vt=l,Lt=Q;Ae=d;var as=m;switch(Lt.tag){case 1:if(vt=Lt.payload,typeof vt=="function"){Ue=vt.call(as,Ue,Ae);break e}Ue=vt;break e;case 3:vt.flags=vt.flags&-65537|128;case 0:if(vt=Lt.payload,Ae=typeof vt=="function"?vt.call(as,Ue,Ae):vt,Ae==null)break e;Ue=g({},Ue,Ae);break e;case 2:hr=!0}}Ae=Q.callback,Ae!==null&&(l.flags|=64,Me&&(l.flags|=8192),Me=C.callbacks,Me===null?C.callbacks=[Ae]:Me.push(Ae))}else Me={lane:Ae,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},ze===null?(ve=ze=Me,oe=Ue):ze=ze.next=Me,B|=Ae;if(Q=Q.next,Q===null){if(Q=C.shared.pending,Q===null)break;Me=Q,Q=Me.next,Me.next=null,C.lastBaseUpdate=Me,C.shared.pending=null}}while(!0);ze===null&&(oe=Ue),C.baseState=oe,C.firstBaseUpdate=ve,C.lastBaseUpdate=ze,T===null&&(C.shared.lanes=0),Ou|=B,l.lanes=B,l.memoizedState=Ue}}function b(l,d){if(typeof l!="function")throw Error(s(191,l));l.call(d)}function w(l,d){var m=l.callbacks;if(m!==null)for(l.callbacks=null,l=0;l<m.length;l++)b(m[l],d)}var k=V(null),P=V(0);function F(l,d){l=md,ge(P,l),ge(k,d),md=l|d.baseLanes}function K(){ge(P,md),ge(k,k.current)}function q(){md=P.current,re(k),re(P)}var ue=V(null),ie=null;function he(l){var d=l.alternate;ge(Ct,Ct.current&1),ge(ue,l),ie===null&&(d===null||k.current!==null||d.memoizedState!==null)&&(ie=l)}function we(l){ge(Ct,Ct.current),ge(ue,l),ie===null&&(ie=l)}function De(l){l.tag===22?(ge(Ct,Ct.current),ge(ue,l),ie===null&&(ie=l)):tt()}function tt(){ge(Ct,Ct.current),ge(ue,ue.current)}function st(l){re(ue),ie===l&&(ie=null),re(Ct)}var Ct=V(0);function Gt(l){for(var d=l;d!==null;){if(d.tag===13){var m=d.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||N1(m)||j1(m)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Ht=0,dt=null,At=null,ln=null,ai=!1,ri=!1,_t=!1,zs=0,Xn=0,Ts=null,$r=0;function Vt(){throw Error(s(321))}function mr(l,d){if(d===null)return!1;for(var m=0;m<d.length&&m<l.length;m++)if(!ni(l[m],d[m]))return!1;return!0}function Ta(l,d,m,p,C,T){return Ht=T,dt=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,G.H=l===null||l.memoizedState===null?_h:fc,_t=!1,T=m(p,C),_t=!1,ri&&(T=pa(d,m,p,C)),Xs(l),T}function Xs(l){G.H=Eh;var d=At!==null&&At.next!==null;if(Ht=0,ln=At=dt=null,ai=!1,Xn=0,Ts=null,d)throw Error(s(300));l===null||Ks||(l=l.dependencies,l!==null&&Ka(l)&&(Ks=!0))}function pa(l,d,m,p){dt=l;var C=0;do{if(ri&&(Ts=null),Xn=0,ri=!1,25<=C)throw Error(s(301));if(C+=1,ln=At=null,l.updateQueue!=null){var T=l.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}G.H=Dx,T=d(m,p)}while(ri);return T}function td(){var l=G.H,d=l.useState()[0];return d=typeof d.then=="function"?nd(d):d,l=l.useState()[0],(At!==null?At.memoizedState:null)!==l&&(dt.flags|=1024),d}function pl(){var l=zs!==0;return zs=0,l}function eo(l,d,m){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~m}function xl(l){if(ai){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}ai=!1}Ht=0,ln=At=dt=null,ri=!1,Xn=zs=0,Ts=null}function oi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?dt.memoizedState=ln=l:ln=ln.next=l,ln}function Pn(){if(At===null){var l=dt.alternate;l=l!==null?l.memoizedState:null}else l=At.next;var d=ln===null?dt.memoizedState:ln.next;if(d!==null)ln=d,At=l;else{if(l===null)throw dt.alternate===null?Error(s(467)):Error(s(310));At=l,l={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},ln===null?dt.memoizedState=ln=l:ln=ln.next=l}return ln}function to(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nd(l){var d=Xn;return Xn+=1,Ts===null&&(Ts=[]),l=lc(Ts,l,d),d=dt,(ln===null?d.memoizedState:ln.next)===null&&(d=d.alternate,G.H=d===null||d.memoizedState===null?_h:fc),l}function xu(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return nd(l);if(l.$$typeof===M)return Mn(l)}throw Error(s(438,String(l)))}function sd(l){var d=null,m=dt.updateQueue;if(m!==null&&(d=m.memoCache),d==null){var p=dt.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(d={data:p.data.map(function(C){return C.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),m===null&&(m=to(),dt.updateQueue=m),m.memoCache=d,m=d.data[d.index],m===void 0)for(m=d.data[d.index]=Array(l),p=0;p<l;p++)m[p]=Z;return d.index++,m}function li(l,d){return typeof d=="function"?d(l):d}function vh(l){var d=Pn();return id(d,At,l)}function id(l,d,m){var p=l.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=m;var C=l.baseQueue,T=p.pending;if(T!==null){if(C!==null){var B=C.next;C.next=T.next,T.next=B}d.baseQueue=C=T,p.pending=null}if(T=l.baseState,C===null)l.memoizedState=T;else{d=C.next;var Q=B=null,oe=null,ve=d,ze=!1;do{var Ue=ve.lane&-536870913;if(Ue!==ve.lane?(bn&Ue)===Ue:(Ht&Ue)===Ue){var Ae=ve.revertLane;if(Ae===0)oe!==null&&(oe=oe.next={lane:0,revertLane:0,gesture:null,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null}),Ue===ma&&(ze=!0);else if((Ht&Ae)===Ae){ve=ve.next,Ae===ma&&(ze=!0);continue}else Ue={lane:0,revertLane:ve.revertLane,gesture:null,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null},oe===null?(Q=oe=Ue,B=T):oe=oe.next=Ue,dt.lanes|=Ae,Ou|=Ae;Ue=ve.action,_t&&m(T,Ue),T=ve.hasEagerState?ve.eagerState:m(T,Ue)}else Ae={lane:Ue,revertLane:ve.revertLane,gesture:ve.gesture,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null},oe===null?(Q=oe=Ae,B=T):oe=oe.next=Ae,dt.lanes|=Ue,Ou|=Ue;ve=ve.next}while(ve!==null&&ve!==d);if(oe===null?B=T:oe.next=Q,!ni(T,l.memoizedState)&&(Ks=!0,ze&&(m=ms,m!==null)))throw m;l.memoizedState=T,l.baseState=B,l.baseQueue=oe,p.lastRenderedState=T}return C===null&&(p.lanes=0),[l.memoizedState,p.dispatch]}function Yf(l){var d=Pn(),m=d.queue;if(m===null)throw Error(s(311));m.lastRenderedReducer=l;var p=m.dispatch,C=m.pending,T=d.memoizedState;if(C!==null){m.pending=null;var B=C=C.next;do T=l(T,B.action),B=B.next;while(B!==C);ni(T,d.memoizedState)||(Ks=!0),d.memoizedState=T,d.baseQueue===null&&(d.baseState=T),m.lastRenderedState=T}return[T,p]}function Fg(l,d,m){var p=dt,C=Pn(),T=Xt;if(T){if(m===void 0)throw Error(s(407));m=m()}else m=d();var B=!ni((At||C).memoizedState,m);if(B&&(C.memoizedState=m,Ks=!0),C=C.queue,od(Bg.bind(null,p,C,l),[l]),C.getSnapshot!==d||B||ln!==null&&ln.memoizedState.tag&1){if(p.flags|=2048,rd(9,{destroy:void 0},Ig.bind(null,p,C,m,d),null),cs===null)throw Error(s(349));T||(Ht&127)!==0||zg(p,d,m)}return m}function zg(l,d,m){l.flags|=16384,l={getSnapshot:d,value:m},d=dt.updateQueue,d===null?(d=to(),dt.updateQueue=d,d.stores=[l]):(m=d.stores,m===null?d.stores=[l]:m.push(l))}function Ig(l,d,m,p){d.value=m,d.getSnapshot=p,Hg(d)&&bu(l)}function Bg(l,d,m){return m(function(){Hg(d)&&bu(l)})}function Hg(l){var d=l.getSnapshot;l=l.value;try{var m=d();return!ni(l,m)}catch{return!0}}function bu(l){var d=_n(l,2);d!==null&&yr(d,l,2)}function no(l){var d=oi();if(typeof l=="function"){var m=l;if(l=m(),_t){ye(!0);try{m()}finally{ye(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:l},d}function Ug(l,d,m,p){return l.baseState=m,id(l,At,typeof p=="function"?p:li)}function jx(l,d,m,p,C){if(_u(l))throw Error(s(485));if(l=d.action,l!==null){var T={payload:C,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){T.listeners.push(B)}};G.T!==null?m(!0):T.isTransition=!1,p(T),m=d.pending,m===null?(T.next=d.pending=T,yu(d,T)):(T.next=m.next,d.pending=m.next=T)}}function yu(l,d){var m=d.action,p=d.payload,C=l.state;if(d.isTransition){var T=G.T,B={};G.T=B;try{var Q=m(C,p),oe=G.S;oe!==null&&oe(B,Q),Vg(l,d,Q)}catch(ve){ad(l,d,ve)}finally{T!==null&&B.types!==null&&(T.types=B.types),G.T=T}}else try{T=m(C,p),Vg(l,d,T)}catch(ve){ad(l,d,ve)}}function Vg(l,d,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(p){dc(l,d,p)},function(p){return ad(l,d,p)}):dc(l,d,m)}function dc(l,d,m){d.status="fulfilled",d.value=m,vu(d),l.state=m,d=l.pending,d!==null&&(m=d.next,m===d?l.pending=null:(m=m.next,d.next=m,yu(l,m)))}function ad(l,d,m){var p=l.pending;if(l.pending=null,p!==null){p=p.next;do d.status="rejected",d.reason=m,vu(d),d=d.next;while(d!==p)}l.action=null}function vu(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function wu(l,d){return d}function Su(l,d){if(Xt){var m=cs.formState;if(m!==null){e:{var p=dt;if(Xt){if(Yn){t:{for(var C=Yn,T=Ys;C.nodeType!==8;){if(!T){C=null;break t}if(C=ko(C.nextSibling),C===null){C=null;break t}}T=C.data,C=T==="F!"||T==="F"?C:null}if(C){Yn=ko(C.nextSibling),p=C.data==="F!";break e}}Li(p)}p=!1}p&&(d=m[0])}}return m=oi(),m.memoizedState=m.baseState=d,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wu,lastRenderedState:d},m.queue=p,m=Ah.bind(null,dt,p),p.dispatch=m,p=no(!1),T=Eu.bind(null,dt,!1,p.queue),p=oi(),C={state:d,dispatch:null,action:l,pending:null},p.queue=C,m=jx.bind(null,dt,C,T,m),C.dispatch=m,p.memoizedState=l,[d,m,!1]}function bl(l){var d=Pn();return Xf(d,At,l)}function Xf(l,d,m){if(d=id(l,d,wu)[0],l=vh(li)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var p=nd(d)}catch(B){throw B===Jr?qr:B}else p=d;d=Pn();var C=d.queue,T=C.dispatch;return m!==d.memoizedState&&(dt.flags|=2048,rd(9,{destroy:void 0},Wg.bind(null,C,m),null)),[p,T,l]}function Wg(l,d){l.action=d}function uc(l){var d=Pn(),m=At;if(m!==null)return Xf(d,m,l);Pn(),d=d.memoizedState,m=Pn();var p=m.queue.dispatch;return m.memoizedState=l,[d,p,!1]}function rd(l,d,m,p){return l={tag:l,create:m,deps:p,inst:d,next:null},d=dt.updateQueue,d===null&&(d=to(),dt.updateQueue=d),m=d.lastEffect,m===null?d.lastEffect=l.next=l:(p=m.next,m.next=l,l.next=p,d.lastEffect=l),l}function wh(){return Pn().memoizedState}function Sh(l,d,m,p){var C=oi();dt.flags|=l,C.memoizedState=rd(1|d,{destroy:void 0},m,p===void 0?null:p)}function hc(l,d,m,p){var C=Pn();p=p===void 0?null:p;var T=C.memoizedState.inst;At!==null&&p!==null&&mr(p,At.memoizedState.deps)?C.memoizedState=rd(d,T,m,p):(dt.flags|=l,C.memoizedState=rd(1|d,T,m,p))}function Gg(l,d){Sh(8390656,8,l,d)}function od(l,d){hc(2048,8,l,d)}function Nh(l){dt.flags|=4;var d=dt.updateQueue;if(d===null)d=to(),dt.updateQueue=d,d.events=[l];else{var m=d.events;m===null?d.events=[l]:m.push(l)}}function Yg(l){var d=Pn().memoizedState;return Nh({ref:d,nextImpl:l}),function(){if((Bn&2)!==0)throw Error(s(440));return d.impl.apply(void 0,arguments)}}function Xg(l,d){return hc(4,2,l,d)}function Cx(l,d){return hc(4,4,l,d)}function Ax(l,d){if(typeof d=="function"){l=l();var m=d(l);return function(){typeof m=="function"?m():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function Kf(l,d,m){m=m!=null?m.concat([l]):null,hc(4,4,Ax.bind(null,d,l),m)}function Kg(){}function Ex(l,d){var m=Pn();d=d===void 0?null:d;var p=m.memoizedState;return d!==null&&mr(d,p[1])?p[0]:(m.memoizedState=[l,d],l)}function _x(l,d){var m=Pn();d=d===void 0?null:d;var p=m.memoizedState;if(d!==null&&mr(d,p[1]))return p[0];if(p=l(),_t){ye(!0);try{l()}finally{ye(!1)}}return m.memoizedState=[p,d],p}function To(l,d,m){return m===void 0||(Ht&1073741824)!==0&&(bn&261930)===0?l.memoizedState=d:(l.memoizedState=m,l=Aj(),dt.lanes|=l,Ou|=l,m)}function jh(l,d,m,p){return ni(m,d)?m:k.current!==null?(l=To(l,m,p),ni(l,d)||(Ks=!0),l):(Ht&42)===0||(Ht&1073741824)!==0&&(bn&261930)===0?(Ks=!0,l.memoizedState=m):(l=Aj(),dt.lanes|=l,Ou|=l,d)}function Nu(l,d,m,p,C){var T=X.p;X.p=T!==0&&8>T?T:8;var B=G.T,Q={};G.T=Q,Eu(l,!1,d,m);try{var oe=C(),ve=G.S;if(ve!==null&&ve(Q,oe),oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var ze=mu(oe,p);Au(l,d,ze,oo(l))}else Au(l,d,p,oo(l))}catch(Ue){Au(l,d,{then:function(){},status:"rejected",reason:Ue},oo())}finally{X.p=T,B!==null&&Q.types!==null&&(B.types=Q.types),G.T=B}}function ju(){}function Cu(l,d,m,p){if(l.tag!==5)throw Error(s(476));var C=Ch(l).queue;Nu(l,C,d,se,m===null?ju:function(){return Zf(l),m(p)})}function Ch(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:se},next:null};var m={};return d.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:m},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function Zf(l){var d=Ch(l);d.next===null&&(d=l.alternate.memoizedState),Au(l,d.next.queue,{},oo())}function Qf(){return Mn(bp)}function Tx(){return Pn().memoizedState}function Jf(){return Pn().memoizedState}function kx(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var m=oo();l=$i(m);var p=vi(d,l,m);p!==null&&(yr(p,d,m),_a(p,d,m)),d={cache:fu()},l.payload=d;return}d=d.return}}function qf(l,d,m){var p=oo();m={lane:p,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},_u(l)?Zg(d,m):(m=Wt(l,d,m,p),m!==null&&(yr(m,l,p),Qg(m,d,p)))}function Ah(l,d,m){var p=oo();Au(l,d,m,p)}function Au(l,d,m,p){var C={lane:p,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null};if(_u(l))Zg(d,C);else{var T=l.alternate;if(l.lanes===0&&(T===null||T.lanes===0)&&(T=d.lastRenderedReducer,T!==null))try{var B=d.lastRenderedState,Q=T(B,m);if(C.hasEagerState=!0,C.eagerState=Q,ni(Q,B))return zt(l,d,C,0),cs===null&&Bt(),!1}catch{}if(m=Wt(l,d,C,p),m!==null)return yr(m,l,p),Qg(m,d,p),!0}return!1}function Eu(l,d,m,p){if(p={lane:2,revertLane:u1(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},_u(l)){if(d)throw Error(s(479))}else d=Wt(l,m,p,2),d!==null&&yr(d,l,2)}function _u(l){var d=l.alternate;return l===dt||d!==null&&d===dt}function Zg(l,d){ri=ai=!0;var m=l.pending;m===null?d.next=d:(d.next=m.next,m.next=d),l.pending=d}function Qg(l,d,m){if((m&4194048)!==0){var p=d.lanes;p&=l.pendingLanes,m|=p,d.lanes=m,$s(l,m)}}var Eh={readContext:Mn,use:xu,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useLayoutEffect:Vt,useInsertionEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useSyncExternalStore:Vt,useId:Vt,useHostTransitionStatus:Vt,useFormState:Vt,useActionState:Vt,useOptimistic:Vt,useMemoCache:Vt,useCacheRefresh:Vt};Eh.useEffectEvent=Vt;var _h={readContext:Mn,use:xu,useCallback:function(l,d){return oi().memoizedState=[l,d===void 0?null:d],l},useContext:Mn,useEffect:Gg,useImperativeHandle:function(l,d,m){m=m!=null?m.concat([l]):null,Sh(4194308,4,Ax.bind(null,d,l),m)},useLayoutEffect:function(l,d){return Sh(4194308,4,l,d)},useInsertionEffect:function(l,d){Sh(4,2,l,d)},useMemo:function(l,d){var m=oi();d=d===void 0?null:d;var p=l();if(_t){ye(!0);try{l()}finally{ye(!1)}}return m.memoizedState=[p,d],p},useReducer:function(l,d,m){var p=oi();if(m!==void 0){var C=m(d);if(_t){ye(!0);try{m(d)}finally{ye(!1)}}}else C=d;return p.memoizedState=p.baseState=C,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:C},p.queue=l,l=l.dispatch=qf.bind(null,dt,l),[p.memoizedState,l]},useRef:function(l){var d=oi();return l={current:l},d.memoizedState=l},useState:function(l){l=no(l);var d=l.queue,m=Ah.bind(null,dt,d);return d.dispatch=m,[l.memoizedState,m]},useDebugValue:Kg,useDeferredValue:function(l,d){var m=oi();return To(m,l,d)},useTransition:function(){var l=no(!1);return l=Nu.bind(null,dt,l.queue,!0,!1),oi().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,m){var p=dt,C=oi();if(Xt){if(m===void 0)throw Error(s(407));m=m()}else{if(m=d(),cs===null)throw Error(s(349));(bn&127)!==0||zg(p,d,m)}C.memoizedState=m;var T={value:m,getSnapshot:d};return C.queue=T,Gg(Bg.bind(null,p,T,l),[l]),p.flags|=2048,rd(9,{destroy:void 0},Ig.bind(null,p,T,m,d),null),m},useId:function(){var l=oi(),d=cs.identifierPrefix;if(Xt){var m=bi,p=zn;m=(p&~(1<<32-Qe(p)-1)).toString(32)+m,d="_"+d+"R_"+m,m=zs++,0<m&&(d+="H"+m.toString(32)),d+="_"}else m=$r++,d="_"+d+"r_"+m.toString(32)+"_";return l.memoizedState=d},useHostTransitionStatus:Qf,useFormState:Su,useActionState:Su,useOptimistic:function(l){var d=oi();d.memoizedState=d.baseState=l;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=m,d=Eu.bind(null,dt,!0,m),m.dispatch=d,[l,d]},useMemoCache:sd,useCacheRefresh:function(){return oi().memoizedState=kx.bind(null,dt)},useEffectEvent:function(l){var d=oi(),m={impl:l};return d.memoizedState=m,function(){if((Bn&2)!==0)throw Error(s(440));return m.impl.apply(void 0,arguments)}}},fc={readContext:Mn,use:xu,useCallback:Ex,useContext:Mn,useEffect:od,useImperativeHandle:Kf,useInsertionEffect:Xg,useLayoutEffect:Cx,useMemo:_x,useReducer:vh,useRef:wh,useState:function(){return vh(li)},useDebugValue:Kg,useDeferredValue:function(l,d){var m=Pn();return jh(m,At.memoizedState,l,d)},useTransition:function(){var l=vh(li)[0],d=Pn().memoizedState;return[typeof l=="boolean"?l:nd(l),d]},useSyncExternalStore:Fg,useId:Tx,useHostTransitionStatus:Qf,useFormState:bl,useActionState:bl,useOptimistic:function(l,d){var m=Pn();return Ug(m,At,l,d)},useMemoCache:sd,useCacheRefresh:Jf};fc.useEffectEvent=Yg;var Dx={readContext:Mn,use:xu,useCallback:Ex,useContext:Mn,useEffect:od,useImperativeHandle:Kf,useInsertionEffect:Xg,useLayoutEffect:Cx,useMemo:_x,useReducer:Yf,useRef:wh,useState:function(){return Yf(li)},useDebugValue:Kg,useDeferredValue:function(l,d){var m=Pn();return At===null?To(m,l,d):jh(m,At.memoizedState,l,d)},useTransition:function(){var l=Yf(li)[0],d=Pn().memoizedState;return[typeof l=="boolean"?l:nd(l),d]},useSyncExternalStore:Fg,useId:Tx,useHostTransitionStatus:Qf,useFormState:uc,useActionState:uc,useOptimistic:function(l,d){var m=Pn();return At!==null?Ug(m,At,l,d):(m.baseState=l,[l,m.queue.dispatch])},useMemoCache:sd,useCacheRefresh:Jf};Dx.useEffectEvent=Yg;function mc(l,d,m,p){d=l.memoizedState,m=m(p,d),m=m==null?d:g({},d,m),l.memoizedState=m,l.lanes===0&&(l.updateQueue.baseState=m)}var $f={enqueueSetState:function(l,d,m){l=l._reactInternals;var p=oo(),C=$i(p);C.payload=d,m!=null&&(C.callback=m),d=vi(l,C,p),d!==null&&(yr(d,l,p),_a(d,l,p))},enqueueReplaceState:function(l,d,m){l=l._reactInternals;var p=oo(),C=$i(p);C.tag=1,C.payload=d,m!=null&&(C.callback=m),d=vi(l,C,p),d!==null&&(yr(d,l,p),_a(d,l,p))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var m=oo(),p=$i(m);p.tag=2,d!=null&&(p.callback=d),d=vi(l,p,m),d!==null&&(yr(d,l,m),_a(d,l,m))}};function Tu(l,d,m,p,C,T,B){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(p,T,B):d.prototype&&d.prototype.isPureReactComponent?!Wa(m,p)||!Wa(C,T):!0}function Th(l,d,m,p){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(m,p),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(m,p),d.state!==l&&$f.enqueueReplaceState(d,d.state,null)}function so(l,d){var m=d;if("ref"in d){m={};for(var p in d)p!=="ref"&&(m[p]=d[p])}if(l=l.defaultProps){m===d&&(m=g({},m));for(var C in l)m[C]===void 0&&(m[C]=l[C])}return m}function Jg(l){it(l)}function gc(l){console.error(l)}function qg(l){it(l)}function kh(l,d){try{var m=l.onUncaughtError;m(d.value,{componentStack:d.stack})}catch(p){setTimeout(function(){throw p})}}function ld(l,d,m){try{var p=l.onCaughtError;p(m.value,{componentStack:m.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function em(l,d,m){return m=$i(m),m.tag=3,m.payload={element:null},m.callback=function(){kh(l,d)},m}function Dh(l){return l=$i(l),l.tag=3,l}function tm(l,d,m,p){var C=m.type.getDerivedStateFromError;if(typeof C=="function"){var T=p.value;l.payload=function(){return C(T)},l.callback=function(){ld(d,m,p)}}var B=m.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(l.callback=function(){ld(d,m,p),typeof C!="function"&&(Lu===null?Lu=new Set([this]):Lu.add(this));var Q=p.stack;this.componentDidCatch(p.value,{componentStack:Q!==null?Q:""})})}function Rh(l,d,m,p,C){if(m.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(d=m.alternate,d!==null&&ii(d,m,C,!0),m=ue.current,m!==null){switch(m.tag){case 31:case 13:return ie===null?Vx():m.alternate===null&&Zs===0&&(Zs=3),m.flags&=-257,m.flags|=65536,m.lanes=C,p===_o?m.flags|=16384:(d=m.updateQueue,d===null?m.updateQueue=new Set([p]):d.add(p),l1(l,p,C)),!1;case 22:return m.flags|=65536,p===_o?m.flags|=16384:(d=m.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([p])},m.updateQueue=d):(m=d.retryQueue,m===null?d.retryQueue=new Set([p]):m.add(p)),l1(l,p,C)),!1}throw Error(s(435,m.tag))}return l1(l,p,C),Vx(),!1}if(Xt)return d=ue.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=C,p!==nc&&(l=Error(s(422),{cause:p}),Xr(xi(l,m)))):(p!==nc&&(d=Error(s(423),{cause:p}),Xr(xi(d,m))),l=l.current.alternate,l.flags|=65536,C&=-C,l.lanes|=C,p=xi(p,m),C=em(l.stateNode,p,C),ea(l,C),Zs!==4&&(Zs=2)),!1;var T=Error(s(520),{cause:p});if(T=xi(T,m),dp===null?dp=[T]:dp.push(T),Zs!==4&&(Zs=2),d===null)return!0;p=xi(p,m),m=d;do{switch(m.tag){case 3:return m.flags|=65536,l=C&-C,m.lanes|=l,l=em(m.stateNode,p,l),ea(m,l),!1;case 1:if(d=m.type,T=m.stateNode,(m.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Lu===null||!Lu.has(T))))return m.flags|=65536,C&=-C,m.lanes|=C,C=Dh(C),tm(C,l,m,p),ea(m,C),!1}m=m.return}while(m!==null);return!1}var $g=Error(s(461)),Ks=!1;function wi(l,d,m,p){d.child=l===null?pu(d,null,m,p):Ii(d,l.child,m,p)}function ku(l,d,m,p,C){m=m.render;var T=d.ref;if("ref"in p){var B={};for(var Q in p)Q!=="ref"&&(B[Q]=p[Q])}else B=p;return ha(d),p=Ta(l,d,m,B,T,C),Q=pl(),l!==null&&!Ks?(eo(l,d,C),ka(l,d,C)):(Xt&&Q&&Jc(d),d.flags|=1,wi(l,d,p,C),d.child)}function Du(l,d,m,p,C){if(l===null){var T=m.type;return typeof T=="function"&&!cn(T)&&T.defaultProps===void 0&&m.compare===null?(d.tag=15,d.type=T,Ru(l,d,T,p,C)):(l=ls(m.type,null,p,d,d.mode,C),l.ref=d.ref,l.return=d,d.child=l)}if(T=l.child,!qa(l,C)){var B=T.memoizedProps;if(m=m.compare,m=m!==null?m:Wa,m(B,p)&&l.ref===d.ref)return ka(l,d,C)}return d.flags|=1,l=ys(T,p),l.ref=d.ref,l.return=d,d.child=l}function Ru(l,d,m,p,C){if(l!==null){var T=l.memoizedProps;if(Wa(T,p)&&l.ref===d.ref)if(Ks=!1,d.pendingProps=p=T,qa(l,C))(l.flags&131072)!==0&&(Ks=!0);else return d.lanes=l.lanes,ka(l,d,C)}return Ph(l,d,m,p,C)}function Mh(l,d,m,p){var C=p.children,T=l!==null?l.memoizedState:null;if(l===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((d.flags&128)!==0){if(T=T!==null?T.baseLanes|m:m,l!==null){for(p=d.child=l.child,C=0;p!==null;)C=C|p.lanes|p.childLanes,p=p.sibling;p=C&~T}else p=0,d.child=null;return Rx(l,d,T,m,p)}if((m&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&oc(d,T!==null?T.cachePool:null),T!==null?F(d,T):K(),De(d);else return p=d.lanes=536870912,Rx(l,d,T!==null?T.baseLanes|m:m,m,p)}else T!==null?(oc(d,T.cachePool),F(d,T),tt(),d.memoizedState=null):(l!==null&&oc(d,null),K(),tt());return wi(l,d,C,m),d.child}function io(l,d){return l!==null&&l.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function Rx(l,d,m,p,C){var T=rc();return T=T===null?null:{parent:ss._currentValue,pool:T},d.memoizedState={baseLanes:m,cachePool:T},l!==null&&oc(d,null),K(),De(d),l!==null&&ii(l,d,p,!0),d.childLanes=C,null}function ci(l,d){return d=zh({mode:d.mode,children:d.children},l.mode),d.ref=l.ref,l.child=d,d.return=l,d}function Si(l,d,m){return Ii(d,l.child,null,m),l=ci(d,d.pendingProps),l.flags|=2,st(d),d.memoizedState=null,l}function Mx(l,d,m){var p=d.pendingProps,C=(d.flags&128)!==0;if(d.flags&=-129,l===null){if(Xt){if(p.mode==="hidden")return l=ci(d,p),d.lanes=536870912,io(null,l);if(we(d),(l=Yn)?(l=lC(l,Ys),l=l!==null&&l.data==="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:Oi!==null?{id:zn,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},m=pi(l),m.return=d,d.child=m,ws=d,Yn=null)):l=null,l===null)throw Li(d);return d.lanes=536870912,null}return ci(d,p)}var T=l.memoizedState;if(T!==null){var B=T.dehydrated;if(we(d),C)if(d.flags&256)d.flags&=-257,d=Si(l,d,m);else if(d.memoizedState!==null)d.child=l.child,d.flags|=128,d=null;else throw Error(s(558));else if(Ks||ii(l,d,m,!1),C=(m&l.childLanes)!==0,Ks||C){if(p=cs,p!==null&&(B=Dn(p,m),B!==0&&B!==T.retryLane))throw T.retryLane=B,_n(l,B),yr(p,l,B),$g;Vx(),d=Si(l,d,m)}else l=T.treeContext,Yn=ko(B.nextSibling),ws=d,Xt=!0,si=null,Ys=!1,l!==null&&uu(d,l),d=ci(d,p),d.flags|=4096;return d}return l=ys(l.child,{mode:p.mode,children:p.children}),l.ref=d.ref,d.child=l,l.return=d,l}function yl(l,d){var m=d.ref;if(m===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(s(284));(l===null||l.ref!==m)&&(d.flags|=4194816)}}function Ph(l,d,m,p,C){return ha(d),m=Ta(l,d,m,p,void 0,C),p=pl(),l!==null&&!Ks?(eo(l,d,C),ka(l,d,C)):(Xt&&p&&Jc(d),d.flags|=1,wi(l,d,m,C),d.child)}function pc(l,d,m,p,C,T){return ha(d),d.updateQueue=null,m=pa(d,p,m,C),Xs(l),p=pl(),l!==null&&!Ks?(eo(l,d,T),ka(l,d,T)):(Xt&&p&&Jc(d),d.flags|=1,wi(l,d,m,T),d.child)}function nm(l,d,m,p,C){if(ha(d),d.stateNode===null){var T=on,B=m.contextType;typeof B=="object"&&B!==null&&(T=Mn(B)),T=new m(p,T),d.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=$f,d.stateNode=T,T._reactInternals=d,T=d.stateNode,T.props=p,T.state=d.memoizedState,T.refs={},Ja(d),B=m.contextType,T.context=typeof B=="object"&&B!==null?Mn(B):on,T.state=d.memoizedState,B=m.getDerivedStateFromProps,typeof B=="function"&&(mc(d,m,B,p),T.state=d.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(B=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),B!==T.state&&$f.enqueueReplaceState(T,T.state,null),fr(d,p,T,C),gl(),T.state=d.memoizedState),typeof T.componentDidMount=="function"&&(d.flags|=4194308),p=!0}else if(l===null){T=d.stateNode;var Q=d.memoizedProps,oe=so(m,Q);T.props=oe;var ve=T.context,ze=m.contextType;B=on,typeof ze=="object"&&ze!==null&&(B=Mn(ze));var Ue=m.getDerivedStateFromProps;ze=typeof Ue=="function"||typeof T.getSnapshotBeforeUpdate=="function",Q=d.pendingProps!==Q,ze||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(Q||ve!==B)&&Th(d,T,p,B),hr=!1;var Ae=d.memoizedState;T.state=Ae,fr(d,p,T,C),gl(),ve=d.memoizedState,Q||Ae!==ve||hr?(typeof Ue=="function"&&(mc(d,m,Ue,p),ve=d.memoizedState),(oe=hr||Tu(d,m,oe,p,Ae,ve,B))?(ze||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(d.flags|=4194308)):(typeof T.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=p,d.memoizedState=ve),T.props=p,T.state=ve,T.context=B,p=oe):(typeof T.componentDidMount=="function"&&(d.flags|=4194308),p=!1)}else{T=d.stateNode,ml(l,d),B=d.memoizedProps,ze=so(m,B),T.props=ze,Ue=d.pendingProps,Ae=T.context,ve=m.contextType,oe=on,typeof ve=="object"&&ve!==null&&(oe=Mn(ve)),Q=m.getDerivedStateFromProps,(ve=typeof Q=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(B!==Ue||Ae!==oe)&&Th(d,T,p,oe),hr=!1,Ae=d.memoizedState,T.state=Ae,fr(d,p,T,C),gl();var Me=d.memoizedState;B!==Ue||Ae!==Me||hr||l!==null&&l.dependencies!==null&&Ka(l.dependencies)?(typeof Q=="function"&&(mc(d,m,Q,p),Me=d.memoizedState),(ze=hr||Tu(d,m,ze,p,Ae,Me,oe)||l!==null&&l.dependencies!==null&&Ka(l.dependencies))?(ve||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(p,Me,oe),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(p,Me,oe)),typeof T.componentDidUpdate=="function"&&(d.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof T.componentDidUpdate!="function"||B===l.memoizedProps&&Ae===l.memoizedState||(d.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||B===l.memoizedProps&&Ae===l.memoizedState||(d.flags|=1024),d.memoizedProps=p,d.memoizedState=Me),T.props=p,T.state=Me,T.context=oe,p=ze):(typeof T.componentDidUpdate!="function"||B===l.memoizedProps&&Ae===l.memoizedState||(d.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||B===l.memoizedProps&&Ae===l.memoizedState||(d.flags|=1024),p=!1)}return T=p,yl(l,d),p=(d.flags&128)!==0,T||p?(T=d.stateNode,m=p&&typeof m.getDerivedStateFromError!="function"?null:T.render(),d.flags|=1,l!==null&&p?(d.child=Ii(d,l.child,null,C),d.child=Ii(d,null,m,C)):wi(l,d,m,C),d.memoizedState=T.state,l=d.child):l=ka(l,d,C),l}function ep(l,d,m,p){return Ca(),d.flags|=256,wi(l,d,m,p),d.child}var vl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Oh(l){return{baseLanes:l,cachePool:gs()}}function Lh(l,d,m){return l=l!==null?l.childLanes&~m:0,d&&(l|=ro),l}function tp(l,d,m){var p=d.pendingProps,C=!1,T=(d.flags&128)!==0,B;if((B=T)||(B=l!==null&&l.memoizedState===null?!1:(Ct.current&2)!==0),B&&(C=!0,d.flags&=-129),B=(d.flags&32)!==0,d.flags&=-33,l===null){if(Xt){if(C?he(d):tt(),(l=Yn)?(l=lC(l,Ys),l=l!==null&&l.data!=="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:Oi!==null?{id:zn,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},m=pi(l),m.return=d,d.child=m,ws=d,Yn=null)):l=null,l===null)throw Li(d);return j1(l)?d.lanes=32:d.lanes=536870912,null}var Q=p.children;return p=p.fallback,C?(tt(),C=d.mode,Q=zh({mode:"hidden",children:Q},C),p=Zn(p,C,m,null),Q.return=d,p.return=d,Q.sibling=p,d.child=Q,p=d.child,p.memoizedState=Oh(m),p.childLanes=Lh(l,B,m),d.memoizedState=vl,io(null,p)):(he(d),Fh(d,Q))}var oe=l.memoizedState;if(oe!==null&&(Q=oe.dehydrated,Q!==null)){if(T)d.flags&256?(he(d),d.flags&=-257,d=Ih(l,d,m)):d.memoizedState!==null?(tt(),d.child=l.child,d.flags|=128,d=null):(tt(),Q=p.fallback,C=d.mode,p=zh({mode:"visible",children:p.children},C),Q=Zn(Q,C,m,null),Q.flags|=2,p.return=d,Q.return=d,p.sibling=Q,d.child=p,Ii(d,l.child,null,m),p=d.child,p.memoizedState=Oh(m),p.childLanes=Lh(l,B,m),d.memoizedState=vl,d=io(null,p));else if(he(d),j1(Q)){if(B=Q.nextSibling&&Q.nextSibling.dataset,B)var ve=B.dgst;B=ve,p=Error(s(419)),p.stack="",p.digest=B,Xr({value:p,source:null,stack:null}),d=Ih(l,d,m)}else if(Ks||ii(l,d,m,!1),B=(m&l.childLanes)!==0,Ks||B){if(B=cs,B!==null&&(p=Dn(B,m),p!==0&&p!==oe.retryLane))throw oe.retryLane=p,_n(l,p),yr(B,l,p),$g;N1(Q)||Vx(),d=Ih(l,d,m)}else N1(Q)?(d.flags|=192,d.child=l.child,d=null):(l=oe.treeContext,Yn=ko(Q.nextSibling),ws=d,Xt=!0,si=null,Ys=!1,l!==null&&uu(d,l),d=Fh(d,p.children),d.flags|=4096);return d}return C?(tt(),Q=p.fallback,C=d.mode,oe=l.child,ve=oe.sibling,p=ys(oe,{mode:"hidden",children:p.children}),p.subtreeFlags=oe.subtreeFlags&65011712,ve!==null?Q=ys(ve,Q):(Q=Zn(Q,C,m,null),Q.flags|=2),Q.return=d,p.return=d,p.sibling=Q,d.child=p,io(null,p),p=d.child,Q=l.child.memoizedState,Q===null?Q=Oh(m):(C=Q.cachePool,C!==null?(oe=ss._currentValue,C=C.parent!==oe?{parent:oe,pool:oe}:C):C=gs(),Q={baseLanes:Q.baseLanes|m,cachePool:C}),p.memoizedState=Q,p.childLanes=Lh(l,B,m),d.memoizedState=vl,io(l.child,p)):(he(d),m=l.child,l=m.sibling,m=ys(m,{mode:"visible",children:p.children}),m.return=d,m.sibling=null,l!==null&&(B=d.deletions,B===null?(d.deletions=[l],d.flags|=16):B.push(l)),d.child=m,d.memoizedState=null,m)}function Fh(l,d){return d=zh({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function zh(l,d){return l=Wn(22,l,null,d),l.lanes=0,l}function Ih(l,d,m){return Ii(d,l.child,null,m),l=Fh(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function np(l,d,m){l.lanes|=d;var p=l.alternate;p!==null&&(p.lanes|=d),ur(l.return,d,m)}function Bh(l,d,m,p,C,T){var B=l.memoizedState;B===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:p,tail:m,tailMode:C,treeForkCount:T}:(B.isBackwards=d,B.rendering=null,B.renderingStartTime=0,B.last=p,B.tail=m,B.tailMode=C,B.treeForkCount=T)}function sp(l,d,m){var p=d.pendingProps,C=p.revealOrder,T=p.tail;p=p.children;var B=Ct.current,Q=(B&2)!==0;if(Q?(B=B&1|2,d.flags|=128):B&=1,ge(Ct,B),wi(l,d,p,m),p=Xt?Pi:0,!Q&&l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&np(l,m,d);else if(l.tag===19)np(l,m,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(C){case"forwards":for(m=d.child,C=null;m!==null;)l=m.alternate,l!==null&&Gt(l)===null&&(C=m),m=m.sibling;m=C,m===null?(C=d.child,d.child=null):(C=m.sibling,m.sibling=null),Bh(d,!1,C,m,T,p);break;case"backwards":case"unstable_legacy-backwards":for(m=null,C=d.child,d.child=null;C!==null;){if(l=C.alternate,l!==null&&Gt(l)===null){d.child=C;break}l=C.sibling,C.sibling=m,m=C,C=l}Bh(d,!0,m,null,T,p);break;case"together":Bh(d,!1,null,null,void 0,p);break;default:d.memoizedState=null}return d.child}function ka(l,d,m){if(l!==null&&(d.dependencies=l.dependencies),Ou|=d.lanes,(m&d.childLanes)===0)if(l!==null){if(ii(l,d,m,!1),(m&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(s(153));if(d.child!==null){for(l=d.child,m=ys(l,l.pendingProps),d.child=m,m.return=d;l.sibling!==null;)l=l.sibling,m=m.sibling=ys(l,l.pendingProps),m.return=d;m.sibling=null}return d.child}function qa(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&Ka(l)))}function Px(l,d,m){switch(d.tag){case 3:Oe(d,d.stateNode.containerInfo),Fi(d,ss,l.memoizedState.cache),Ca();break;case 27:case 5:Le(d);break;case 4:Oe(d,d.stateNode.containerInfo);break;case 10:Fi(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,we(d),null;break;case 13:var p=d.memoizedState;if(p!==null)return p.dehydrated!==null?(he(d),d.flags|=128,null):(m&d.child.childLanes)!==0?tp(l,d,m):(he(d),l=ka(l,d,m),l!==null?l.sibling:null);he(d);break;case 19:var C=(l.flags&128)!==0;if(p=(m&d.childLanes)!==0,p||(ii(l,d,m,!1),p=(m&d.childLanes)!==0),C){if(p)return sp(l,d,m);d.flags|=128}if(C=d.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),ge(Ct,Ct.current),p)break;return null;case 22:return d.lanes=0,Mh(l,d,m,d.pendingProps);case 24:Fi(d,ss,l.memoizedState.cache)}return ka(l,d,m)}function sj(l,d,m){if(l!==null)if(l.memoizedProps!==d.pendingProps)Ks=!0;else{if(!qa(l,m)&&(d.flags&128)===0)return Ks=!1,Px(l,d,m);Ks=(l.flags&131072)!==0}else Ks=!1,Xt&&(d.flags&1048576)!==0&&cu(d,Pi,d.index);switch(d.lanes=0,d.tag){case 16:e:{var p=d.pendingProps;if(l=Za(d.elementType),d.type=l,typeof l=="function")cn(l)?(p=so(l,p),d.tag=1,d=nm(null,d,l,p,m)):(d.tag=0,d=Ph(null,d,l,p,m));else{if(l!=null){var C=l.$$typeof;if(C===L){d.tag=11,d=ku(null,d,l,p,m);break e}else if(C===I){d.tag=14,d=Du(null,d,l,p,m);break e}}throw d=fe(l)||l,Error(s(306,d,""))}}return d;case 0:return Ph(l,d,d.type,d.pendingProps,m);case 1:return p=d.type,C=so(p,d.pendingProps),nm(l,d,p,C,m);case 3:e:{if(Oe(d,d.stateNode.containerInfo),l===null)throw Error(s(387));p=d.pendingProps;var T=d.memoizedState;C=T.element,ml(l,d),fr(d,p,null,m);var B=d.memoizedState;if(p=B.cache,Fi(d,ss,p),p!==T.cache&&sc(d,[ss],m,!0),gl(),p=B.element,T.isDehydrated)if(T={element:p,isDehydrated:!1,cache:B.cache},d.updateQueue.baseState=T,d.memoizedState=T,d.flags&256){d=ep(l,d,p,m);break e}else if(p!==C){C=xi(Error(s(424)),d),Xr(C),d=ep(l,d,p,m);break e}else for(l=d.stateNode.containerInfo,l.nodeType===9?l=l.body:l=l.nodeName==="HTML"?l.ownerDocument.body:l,Yn=ko(l.firstChild),ws=d,Xt=!0,si=null,Ys=!0,m=pu(d,null,p,m),d.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Ca(),p===C){d=ka(l,d,m);break e}wi(l,d,p,m)}d=d.child}return d;case 26:return yl(l,d),l===null?(m=mC(d.type,null,d.pendingProps,null))?d.memoizedState=m:Xt||(m=d.type,l=d.pendingProps,p=Qx(We.current).createElement(m),p[Vs]=d,p[_i]=l,xa(p,m,l),Ls(p),d.stateNode=p):d.memoizedState=mC(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return Le(d),l===null&&Xt&&(p=d.stateNode=uC(d.type,d.pendingProps,We.current),ws=d,Ys=!0,C=Yn,Bu(d.type)?(C1=C,Yn=ko(p.firstChild)):Yn=C),wi(l,d,d.pendingProps.children,m),yl(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&Xt&&((C=p=Yn)&&(p=i4(p,d.type,d.pendingProps,Ys),p!==null?(d.stateNode=p,ws=d,Yn=ko(p.firstChild),Ys=!1,C=!0):C=!1),C||Li(d)),Le(d),C=d.type,T=d.pendingProps,B=l!==null?l.memoizedProps:null,p=T.children,v1(C,T)?p=null:B!==null&&v1(C,B)&&(d.flags|=32),d.memoizedState!==null&&(C=Ta(l,d,td,null,null,m),bp._currentValue=C),yl(l,d),wi(l,d,p,m),d.child;case 6:return l===null&&Xt&&((l=m=Yn)&&(m=a4(m,d.pendingProps,Ys),m!==null?(d.stateNode=m,ws=d,Yn=null,l=!0):l=!1),l||Li(d)),null;case 13:return tp(l,d,m);case 4:return Oe(d,d.stateNode.containerInfo),p=d.pendingProps,l===null?d.child=Ii(d,null,p,m):wi(l,d,p,m),d.child;case 11:return ku(l,d,d.type,d.pendingProps,m);case 7:return wi(l,d,d.pendingProps,m),d.child;case 8:return wi(l,d,d.pendingProps.children,m),d.child;case 12:return wi(l,d,d.pendingProps.children,m),d.child;case 10:return p=d.pendingProps,Fi(d,d.type,p.value),wi(l,d,p.children,m),d.child;case 9:return C=d.type._context,p=d.pendingProps.children,ha(d),C=Mn(C),p=p(C),d.flags|=1,wi(l,d,p,m),d.child;case 14:return Du(l,d,d.type,d.pendingProps,m);case 15:return Ru(l,d,d.type,d.pendingProps,m);case 19:return sp(l,d,m);case 31:return Mx(l,d,m);case 22:return Mh(l,d,m,d.pendingProps);case 24:return ha(d),p=Mn(ss),l===null?(C=rc(),C===null&&(C=cs,T=fu(),C.pooledCache=T,T.refCount++,T!==null&&(C.pooledCacheLanes|=m),C=T),d.memoizedState={parent:p,cache:C},Ja(d),Fi(d,ss,C)):((l.lanes&m)!==0&&(ml(l,d),fr(d,null,null,m),gl()),C=l.memoizedState,T=d.memoizedState,C.parent!==p?(C={parent:p,cache:p},d.memoizedState=C,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=C),Fi(d,ss,p)):(p=T.cache,Fi(d,ss,p),p!==C.cache&&sc(d,[ss],m,!0))),wi(l,d,d.pendingProps.children,m),d.child;case 29:throw d.pendingProps}throw Error(s(156,d.tag))}function cd(l){l.flags|=4}function Xv(l,d,m,p,C){if((d=(l.mode&32)!==0)&&(d=!1),d){if(l.flags|=16777216,(C&335544128)===C)if(l.stateNode.complete)l.flags|=8192;else if(kj())l.flags|=8192;else throw zi=_o,Eo}else l.flags&=-16777217}function ij(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!yC(d))if(kj())l.flags|=8192;else throw zi=_o,Eo}function Ox(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?Dt():536870912,l.lanes|=d,rm|=d)}function ip(l,d){if(!Xt)switch(l.tailMode){case"hidden":d=l.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l.tail=null:m.sibling=null;break;case"collapsed":m=l.tail;for(var p=null;m!==null;)m.alternate!==null&&(p=m),m=m.sibling;p===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:p.sibling=null}}function Ss(l){var d=l.alternate!==null&&l.alternate.child===l.child,m=0,p=0;if(d)for(var C=l.child;C!==null;)m|=C.lanes|C.childLanes,p|=C.subtreeFlags&65011712,p|=C.flags&65011712,C.return=l,C=C.sibling;else for(C=l.child;C!==null;)m|=C.lanes|C.childLanes,p|=C.subtreeFlags,p|=C.flags,C.return=l,C=C.sibling;return l.subtreeFlags|=p,l.childLanes=m,d}function T3(l,d,m){var p=d.pendingProps;switch(du(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ss(d),null;case 1:return Ss(d),null;case 3:return m=d.stateNode,p=null,l!==null&&(p=l.memoizedState.cache),d.memoizedState.cache!==p&&(d.flags|=2048),Ji(ss),$e(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(l===null||l.child===null)&&(dr(d)?cd(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Ao())),Ss(d),null;case 26:var C=d.type,T=d.memoizedState;return l===null?(cd(d),T!==null?(Ss(d),ij(d,T)):(Ss(d),Xv(d,C,null,p,m))):T?T!==l.memoizedState?(cd(d),Ss(d),ij(d,T)):(Ss(d),d.flags&=-16777217):(l=l.memoizedProps,l!==p&&cd(d),Ss(d),Xv(d,C,l,p,m)),null;case 27:if(pe(d),m=We.current,C=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==p&&cd(d);else{if(!p){if(d.stateNode===null)throw Error(s(166));return Ss(d),null}l=Ne.current,dr(d)?hu(d):(l=uC(C,p,m),d.stateNode=l,cd(d))}return Ss(d),null;case 5:if(pe(d),C=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==p&&cd(d);else{if(!p){if(d.stateNode===null)throw Error(s(166));return Ss(d),null}if(T=Ne.current,dr(d))hu(d);else{var B=Qx(We.current);switch(T){case 1:T=B.createElementNS("http://www.w3.org/2000/svg",C);break;case 2:T=B.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;default:switch(C){case"svg":T=B.createElementNS("http://www.w3.org/2000/svg",C);break;case"math":T=B.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;case"script":T=B.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof p.is=="string"?B.createElement("select",{is:p.is}):B.createElement("select"),p.multiple?T.multiple=!0:p.size&&(T.size=p.size);break;default:T=typeof p.is=="string"?B.createElement(C,{is:p.is}):B.createElement(C)}}T[Vs]=d,T[_i]=p;e:for(B=d.child;B!==null;){if(B.tag===5||B.tag===6)T.appendChild(B.stateNode);else if(B.tag!==4&&B.tag!==27&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===d)break e;for(;B.sibling===null;){if(B.return===null||B.return===d)break e;B=B.return}B.sibling.return=B.return,B=B.sibling}d.stateNode=T;e:switch(xa(T,C,p),C){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&cd(d)}}return Ss(d),Xv(d,d.type,l===null?null:l.memoizedProps,d.pendingProps,m),null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==p&&cd(d);else{if(typeof p!="string"&&d.stateNode===null)throw Error(s(166));if(l=We.current,dr(d)){if(l=d.stateNode,m=d.memoizedProps,p=null,C=ws,C!==null)switch(C.tag){case 27:case 5:p=C.memoizedProps}l[Vs]=d,l=!!(l.nodeValue===m||p!==null&&p.suppressHydrationWarning===!0||eC(l.nodeValue,m)),l||Li(d,!0)}else l=Qx(l).createTextNode(p),l[Vs]=d,d.stateNode=l}return Ss(d),null;case 31:if(m=d.memoizedState,l===null||l.memoizedState!==null){if(p=dr(d),m!==null){if(l===null){if(!p)throw Error(s(318));if(l=d.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(557));l[Vs]=d}else Ca(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Ss(d),l=!1}else m=Ao(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=m),l=!0;if(!l)return d.flags&256?(st(d),d):(st(d),null);if((d.flags&128)!==0)throw Error(s(558))}return Ss(d),null;case 13:if(p=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(C=dr(d),p!==null&&p.dehydrated!==null){if(l===null){if(!C)throw Error(s(318));if(C=d.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(s(317));C[Vs]=d}else Ca(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Ss(d),C=!1}else C=Ao(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=C),C=!0;if(!C)return d.flags&256?(st(d),d):(st(d),null)}return st(d),(d.flags&128)!==0?(d.lanes=m,d):(m=p!==null,l=l!==null&&l.memoizedState!==null,m&&(p=d.child,C=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(C=p.alternate.memoizedState.cachePool.pool),T=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(T=p.memoizedState.cachePool.pool),T!==C&&(p.flags|=2048)),m!==l&&m&&(d.child.flags|=8192),Ox(d,d.updateQueue),Ss(d),null);case 4:return $e(),l===null&&g1(d.stateNode.containerInfo),Ss(d),null;case 10:return Ji(d.type),Ss(d),null;case 19:if(re(Ct),p=d.memoizedState,p===null)return Ss(d),null;if(C=(d.flags&128)!==0,T=p.rendering,T===null)if(C)ip(p,!1);else{if(Zs!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(T=Gt(l),T!==null){for(d.flags|=128,ip(p,!1),l=T.updateQueue,d.updateQueue=l,Ox(d,l),d.subtreeFlags=0,l=m,m=d.child;m!==null;)Tn(m,l),m=m.sibling;return ge(Ct,Ct.current&1|2),Xt&&da(d,p.treeForkCount),d.child}l=l.sibling}p.tail!==null&&Ze()>Bx&&(d.flags|=128,C=!0,ip(p,!1),d.lanes=4194304)}else{if(!C)if(l=Gt(T),l!==null){if(d.flags|=128,C=!0,l=l.updateQueue,d.updateQueue=l,Ox(d,l),ip(p,!0),p.tail===null&&p.tailMode==="hidden"&&!T.alternate&&!Xt)return Ss(d),null}else 2*Ze()-p.renderingStartTime>Bx&&m!==536870912&&(d.flags|=128,C=!0,ip(p,!1),d.lanes=4194304);p.isBackwards?(T.sibling=d.child,d.child=T):(l=p.last,l!==null?l.sibling=T:d.child=T,p.last=T)}return p.tail!==null?(l=p.tail,p.rendering=l,p.tail=l.sibling,p.renderingStartTime=Ze(),l.sibling=null,m=Ct.current,ge(Ct,C?m&1|2:m&1),Xt&&da(d,p.treeForkCount),l):(Ss(d),null);case 22:case 23:return st(d),q(),p=d.memoizedState!==null,l!==null?l.memoizedState!==null!==p&&(d.flags|=8192):p&&(d.flags|=8192),p?(m&536870912)!==0&&(d.flags&128)===0&&(Ss(d),d.subtreeFlags&6&&(d.flags|=8192)):Ss(d),m=d.updateQueue,m!==null&&Ox(d,m.retryQueue),m=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),p=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(p=d.memoizedState.cachePool.pool),p!==m&&(d.flags|=2048),l!==null&&re(Qr),null;case 24:return m=null,l!==null&&(m=l.memoizedState.cache),d.memoizedState.cache!==m&&(d.flags|=2048),Ji(ss),Ss(d),null;case 25:return null;case 30:return null}throw Error(s(156,d.tag))}function k3(l,d){switch(du(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return Ji(ss),$e(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return pe(d),null;case 31:if(d.memoizedState!==null){if(st(d),d.alternate===null)throw Error(s(340));Ca()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 13:if(st(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(s(340));Ca()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return re(Ct),null;case 4:return $e(),null;case 10:return Ji(d.type),null;case 22:case 23:return st(d),q(),l!==null&&re(Qr),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return Ji(ss),null;case 25:return null;default:return null}}function aj(l,d){switch(du(d),d.tag){case 3:Ji(ss),$e();break;case 26:case 27:case 5:pe(d);break;case 4:$e();break;case 31:d.memoizedState!==null&&st(d);break;case 13:st(d);break;case 19:re(Ct);break;case 10:Ji(d.type);break;case 22:case 23:st(d),q(),l!==null&&re(Qr);break;case 24:Ji(ss)}}function ap(l,d){try{var m=d.updateQueue,p=m!==null?m.lastEffect:null;if(p!==null){var C=p.next;m=C;do{if((m.tag&l)===l){p=void 0;var T=m.create,B=m.inst;p=T(),B.destroy=p}m=m.next}while(m!==C)}}catch(Q){Jn(d,d.return,Q)}}function Mu(l,d,m){try{var p=d.updateQueue,C=p!==null?p.lastEffect:null;if(C!==null){var T=C.next;p=T;do{if((p.tag&l)===l){var B=p.inst,Q=B.destroy;if(Q!==void 0){B.destroy=void 0,C=d;var oe=m,ve=Q;try{ve()}catch(ze){Jn(C,oe,ze)}}}p=p.next}while(p!==T)}}catch(ze){Jn(d,d.return,ze)}}function rj(l){var d=l.updateQueue;if(d!==null){var m=l.stateNode;try{w(d,m)}catch(p){Jn(l,l.return,p)}}}function oj(l,d,m){m.props=so(l.type,l.memoizedProps),m.state=l.memoizedState;try{m.componentWillUnmount()}catch(p){Jn(l,d,p)}}function rp(l,d){try{var m=l.ref;if(m!==null){switch(l.tag){case 26:case 27:case 5:var p=l.stateNode;break;case 30:p=l.stateNode;break;default:p=l.stateNode}typeof m=="function"?l.refCleanup=m(p):m.current=p}}catch(C){Jn(l,d,C)}}function xc(l,d){var m=l.ref,p=l.refCleanup;if(m!==null)if(typeof p=="function")try{p()}catch(C){Jn(l,d,C)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(C){Jn(l,d,C)}else m.current=null}function lj(l){var d=l.type,m=l.memoizedProps,p=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":m.autoFocus&&p.focus();break e;case"img":m.src?p.src=m.src:m.srcSet&&(p.srcset=m.srcSet)}}catch(C){Jn(l,l.return,C)}}function Kv(l,d,m){try{var p=l.stateNode;q3(p,l.type,m,d),p[_i]=d}catch(C){Jn(l,l.return,C)}}function cj(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Bu(l.type)||l.tag===4}function Zv(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||cj(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Bu(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Qv(l,d,m){var p=l.tag;if(p===5||p===6)l=l.stateNode,d?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(l,d):(d=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,d.appendChild(l),m=m._reactRootContainer,m!=null||d.onclick!==null||(d.onclick=Ir));else if(p!==4&&(p===27&&Bu(l.type)&&(m=l.stateNode,d=null),l=l.child,l!==null))for(Qv(l,d,m),l=l.sibling;l!==null;)Qv(l,d,m),l=l.sibling}function Lx(l,d,m){var p=l.tag;if(p===5||p===6)l=l.stateNode,d?m.insertBefore(l,d):m.appendChild(l);else if(p!==4&&(p===27&&Bu(l.type)&&(m=l.stateNode),l=l.child,l!==null))for(Lx(l,d,m),l=l.sibling;l!==null;)Lx(l,d,m),l=l.sibling}function dj(l){var d=l.stateNode,m=l.memoizedProps;try{for(var p=l.type,C=d.attributes;C.length;)d.removeAttributeNode(C[0]);xa(d,p,m),d[Vs]=l,d[_i]=m}catch(T){Jn(l,l.return,T)}}var dd=!1,Ni=!1,Jv=!1,uj=typeof WeakSet=="function"?WeakSet:Set,ta=null;function D3(l,d){if(l=l.containerInfo,b1=sb,l=ou(l),lu(l)){if("selectionStart"in l)var m={start:l.selectionStart,end:l.selectionEnd};else e:{m=(m=l.ownerDocument)&&m.defaultView||window;var p=m.getSelection&&m.getSelection();if(p&&p.rangeCount!==0){m=p.anchorNode;var C=p.anchorOffset,T=p.focusNode;p=p.focusOffset;try{m.nodeType,T.nodeType}catch{m=null;break e}var B=0,Q=-1,oe=-1,ve=0,ze=0,Ue=l,Ae=null;t:for(;;){for(var Me;Ue!==m||C!==0&&Ue.nodeType!==3||(Q=B+C),Ue!==T||p!==0&&Ue.nodeType!==3||(oe=B+p),Ue.nodeType===3&&(B+=Ue.nodeValue.length),(Me=Ue.firstChild)!==null;)Ae=Ue,Ue=Me;for(;;){if(Ue===l)break t;if(Ae===m&&++ve===C&&(Q=B),Ae===T&&++ze===p&&(oe=B),(Me=Ue.nextSibling)!==null)break;Ue=Ae,Ae=Ue.parentNode}Ue=Me}m=Q===-1||oe===-1?null:{start:Q,end:oe}}else m=null}m=m||{start:0,end:0}}else m=null;for(y1={focusedElem:l,selectionRange:m},sb=!1,ta=d;ta!==null;)if(d=ta,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,ta=l;else for(;ta!==null;){switch(d=ta,T=d.alternate,l=d.flags,d.tag){case 0:if((l&4)!==0&&(l=d.updateQueue,l=l!==null?l.events:null,l!==null))for(m=0;m<l.length;m++)C=l[m],C.ref.impl=C.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&T!==null){l=void 0,m=d,C=T.memoizedProps,T=T.memoizedState,p=m.stateNode;try{var vt=so(m.type,C);l=p.getSnapshotBeforeUpdate(vt,T),p.__reactInternalSnapshotBeforeUpdate=l}catch(Lt){Jn(m,m.return,Lt)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,m=l.nodeType,m===9)S1(l);else if(m===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":S1(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(s(163))}if(l=d.sibling,l!==null){l.return=d.return,ta=l;break}ta=d.return}}function hj(l,d,m){var p=m.flags;switch(m.tag){case 0:case 11:case 15:hd(l,m),p&4&&ap(5,m);break;case 1:if(hd(l,m),p&4)if(l=m.stateNode,d===null)try{l.componentDidMount()}catch(B){Jn(m,m.return,B)}else{var C=so(m.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(C,d,l.__reactInternalSnapshotBeforeUpdate)}catch(B){Jn(m,m.return,B)}}p&64&&rj(m),p&512&&rp(m,m.return);break;case 3:if(hd(l,m),p&64&&(l=m.updateQueue,l!==null)){if(d=null,m.child!==null)switch(m.child.tag){case 27:case 5:d=m.child.stateNode;break;case 1:d=m.child.stateNode}try{w(l,d)}catch(B){Jn(m,m.return,B)}}break;case 27:d===null&&p&4&&dj(m);case 26:case 5:hd(l,m),d===null&&p&4&&lj(m),p&512&&rp(m,m.return);break;case 12:hd(l,m);break;case 31:hd(l,m),p&4&&gj(l,m);break;case 13:hd(l,m),p&4&&pj(l,m),p&64&&(l=m.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(m=B3.bind(null,m),r4(l,m))));break;case 22:if(p=m.memoizedState!==null||dd,!p){d=d!==null&&d.memoizedState!==null||Ni,C=dd;var T=Ni;dd=p,(Ni=d)&&!T?fd(l,m,(m.subtreeFlags&8772)!==0):hd(l,m),dd=C,Ni=T}break;case 30:break;default:hd(l,m)}}function fj(l){var d=l.alternate;d!==null&&(l.alternate=null,fj(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&Xo(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var ks=null,gr=!1;function ud(l,d,m){for(m=m.child;m!==null;)mj(l,d,m),m=m.sibling}function mj(l,d,m){if(An&&typeof An.onCommitFiberUnmount=="function")try{An.onCommitFiberUnmount(Os,m)}catch{}switch(m.tag){case 26:Ni||xc(m,d),ud(l,d,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Ni||xc(m,d);var p=ks,C=gr;Bu(m.type)&&(ks=m.stateNode,gr=!1),ud(l,d,m),gp(m.stateNode),ks=p,gr=C;break;case 5:Ni||xc(m,d);case 6:if(p=ks,C=gr,ks=null,ud(l,d,m),ks=p,gr=C,ks!==null)if(gr)try{(ks.nodeType===9?ks.body:ks.nodeName==="HTML"?ks.ownerDocument.body:ks).removeChild(m.stateNode)}catch(T){Jn(m,d,T)}else try{ks.removeChild(m.stateNode)}catch(T){Jn(m,d,T)}break;case 18:ks!==null&&(gr?(l=ks,rC(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,m.stateNode),mm(l)):rC(ks,m.stateNode));break;case 4:p=ks,C=gr,ks=m.stateNode.containerInfo,gr=!0,ud(l,d,m),ks=p,gr=C;break;case 0:case 11:case 14:case 15:Mu(2,m,d),Ni||Mu(4,m,d),ud(l,d,m);break;case 1:Ni||(xc(m,d),p=m.stateNode,typeof p.componentWillUnmount=="function"&&oj(m,d,p)),ud(l,d,m);break;case 21:ud(l,d,m);break;case 22:Ni=(p=Ni)||m.memoizedState!==null,ud(l,d,m),Ni=p;break;default:ud(l,d,m)}}function gj(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{mm(l)}catch(m){Jn(d,d.return,m)}}}function pj(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{mm(l)}catch(m){Jn(d,d.return,m)}}function R3(l){switch(l.tag){case 31:case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new uj),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new uj),d;default:throw Error(s(435,l.tag))}}function Fx(l,d){var m=R3(l);d.forEach(function(p){if(!m.has(p)){m.add(p);var C=H3.bind(null,l,p);p.then(C,C)}})}function pr(l,d){var m=d.deletions;if(m!==null)for(var p=0;p<m.length;p++){var C=m[p],T=l,B=d,Q=B;e:for(;Q!==null;){switch(Q.tag){case 27:if(Bu(Q.type)){ks=Q.stateNode,gr=!1;break e}break;case 5:ks=Q.stateNode,gr=!1;break e;case 3:case 4:ks=Q.stateNode.containerInfo,gr=!0;break e}Q=Q.return}if(ks===null)throw Error(s(160));mj(T,B,C),ks=null,gr=!1,T=C.alternate,T!==null&&(T.return=null),C.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)xj(d,l),d=d.sibling}var wl=null;function xj(l,d){var m=l.alternate,p=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:pr(d,l),xr(l),p&4&&(Mu(3,l,l.return),ap(3,l),Mu(5,l,l.return));break;case 1:pr(d,l),xr(l),p&512&&(Ni||m===null||xc(m,m.return)),p&64&&dd&&(l=l.updateQueue,l!==null&&(p=l.callbacks,p!==null&&(m=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=m===null?p:m.concat(p))));break;case 26:var C=wl;if(pr(d,l),xr(l),p&512&&(Ni||m===null||xc(m,m.return)),p&4){var T=m!==null?m.memoizedState:null;if(p=l.memoizedState,m===null)if(p===null)if(l.stateNode===null){e:{p=l.type,m=l.memoizedProps,C=C.ownerDocument||C;t:switch(p){case"title":T=C.getElementsByTagName("title")[0],(!T||T[kn]||T[Vs]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=C.createElement(p),C.head.insertBefore(T,C.querySelector("head > title"))),xa(T,p,m),T[Vs]=l,Ls(T),p=T;break e;case"link":var B=xC("link","href",C).get(p+(m.href||""));if(B){for(var Q=0;Q<B.length;Q++)if(T=B[Q],T.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&T.getAttribute("rel")===(m.rel==null?null:m.rel)&&T.getAttribute("title")===(m.title==null?null:m.title)&&T.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){B.splice(Q,1);break t}}T=C.createElement(p),xa(T,p,m),C.head.appendChild(T);break;case"meta":if(B=xC("meta","content",C).get(p+(m.content||""))){for(Q=0;Q<B.length;Q++)if(T=B[Q],T.getAttribute("content")===(m.content==null?null:""+m.content)&&T.getAttribute("name")===(m.name==null?null:m.name)&&T.getAttribute("property")===(m.property==null?null:m.property)&&T.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&T.getAttribute("charset")===(m.charSet==null?null:m.charSet)){B.splice(Q,1);break t}}T=C.createElement(p),xa(T,p,m),C.head.appendChild(T);break;default:throw Error(s(468,p))}T[Vs]=l,Ls(T),p=T}l.stateNode=p}else bC(C,l.type,l.stateNode);else l.stateNode=pC(C,p,l.memoizedProps);else T!==p?(T===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):T.count--,p===null?bC(C,l.type,l.stateNode):pC(C,p,l.memoizedProps)):p===null&&l.stateNode!==null&&Kv(l,l.memoizedProps,m.memoizedProps)}break;case 27:pr(d,l),xr(l),p&512&&(Ni||m===null||xc(m,m.return)),m!==null&&p&4&&Kv(l,l.memoizedProps,m.memoizedProps);break;case 5:if(pr(d,l),xr(l),p&512&&(Ni||m===null||xc(m,m.return)),l.flags&32){C=l.stateNode;try{Vl(C,"")}catch(vt){Jn(l,l.return,vt)}}p&4&&l.stateNode!=null&&(C=l.memoizedProps,Kv(l,C,m!==null?m.memoizedProps:C)),p&1024&&(Jv=!0);break;case 6:if(pr(d,l),xr(l),p&4){if(l.stateNode===null)throw Error(s(162));p=l.memoizedProps,m=l.stateNode;try{m.nodeValue=p}catch(vt){Jn(l,l.return,vt)}}break;case 3:if($x=null,C=wl,wl=Jx(d.containerInfo),pr(d,l),wl=C,xr(l),p&4&&m!==null&&m.memoizedState.isDehydrated)try{mm(d.containerInfo)}catch(vt){Jn(l,l.return,vt)}Jv&&(Jv=!1,bj(l));break;case 4:p=wl,wl=Jx(l.stateNode.containerInfo),pr(d,l),xr(l),wl=p;break;case 12:pr(d,l),xr(l);break;case 31:pr(d,l),xr(l),p&4&&(p=l.updateQueue,p!==null&&(l.updateQueue=null,Fx(l,p)));break;case 13:pr(d,l),xr(l),l.child.flags&8192&&l.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(Ix=Ze()),p&4&&(p=l.updateQueue,p!==null&&(l.updateQueue=null,Fx(l,p)));break;case 22:C=l.memoizedState!==null;var oe=m!==null&&m.memoizedState!==null,ve=dd,ze=Ni;if(dd=ve||C,Ni=ze||oe,pr(d,l),Ni=ze,dd=ve,xr(l),p&8192)e:for(d=l.stateNode,d._visibility=C?d._visibility&-2:d._visibility|1,C&&(m===null||oe||dd||Ni||Hh(l)),m=null,d=l;;){if(d.tag===5||d.tag===26){if(m===null){oe=m=d;try{if(T=oe.stateNode,C)B=T.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none";else{Q=oe.stateNode;var Ue=oe.memoizedProps.style,Ae=Ue!=null&&Ue.hasOwnProperty("display")?Ue.display:null;Q.style.display=Ae==null||typeof Ae=="boolean"?"":(""+Ae).trim()}}catch(vt){Jn(oe,oe.return,vt)}}}else if(d.tag===6){if(m===null){oe=d;try{oe.stateNode.nodeValue=C?"":oe.memoizedProps}catch(vt){Jn(oe,oe.return,vt)}}}else if(d.tag===18){if(m===null){oe=d;try{var Me=oe.stateNode;C?oC(Me,!0):oC(oe.stateNode,!1)}catch(vt){Jn(oe,oe.return,vt)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;m===d&&(m=null),d=d.return}m===d&&(m=null),d.sibling.return=d.return,d=d.sibling}p&4&&(p=l.updateQueue,p!==null&&(m=p.retryQueue,m!==null&&(p.retryQueue=null,Fx(l,m))));break;case 19:pr(d,l),xr(l),p&4&&(p=l.updateQueue,p!==null&&(l.updateQueue=null,Fx(l,p)));break;case 30:break;case 21:break;default:pr(d,l),xr(l)}}function xr(l){var d=l.flags;if(d&2){try{for(var m,p=l.return;p!==null;){if(cj(p)){m=p;break}p=p.return}if(m==null)throw Error(s(160));switch(m.tag){case 27:var C=m.stateNode,T=Zv(l);Lx(l,T,C);break;case 5:var B=m.stateNode;m.flags&32&&(Vl(B,""),m.flags&=-33);var Q=Zv(l);Lx(l,Q,B);break;case 3:case 4:var oe=m.stateNode.containerInfo,ve=Zv(l);Qv(l,ve,oe);break;default:throw Error(s(161))}}catch(ze){Jn(l,l.return,ze)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function bj(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;bj(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function hd(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)hj(l,d.alternate,d),d=d.sibling}function Hh(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:Mu(4,d,d.return),Hh(d);break;case 1:xc(d,d.return);var m=d.stateNode;typeof m.componentWillUnmount=="function"&&oj(d,d.return,m),Hh(d);break;case 27:gp(d.stateNode);case 26:case 5:xc(d,d.return),Hh(d);break;case 22:d.memoizedState===null&&Hh(d);break;case 30:Hh(d);break;default:Hh(d)}l=l.sibling}}function fd(l,d,m){for(m=m&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var p=d.alternate,C=l,T=d,B=T.flags;switch(T.tag){case 0:case 11:case 15:fd(C,T,m),ap(4,T);break;case 1:if(fd(C,T,m),p=T,C=p.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(ve){Jn(p,p.return,ve)}if(p=T,C=p.updateQueue,C!==null){var Q=p.stateNode;try{var oe=C.shared.hiddenCallbacks;if(oe!==null)for(C.shared.hiddenCallbacks=null,C=0;C<oe.length;C++)b(oe[C],Q)}catch(ve){Jn(p,p.return,ve)}}m&&B&64&&rj(T),rp(T,T.return);break;case 27:dj(T);case 26:case 5:fd(C,T,m),m&&p===null&&B&4&&lj(T),rp(T,T.return);break;case 12:fd(C,T,m);break;case 31:fd(C,T,m),m&&B&4&&gj(C,T);break;case 13:fd(C,T,m),m&&B&4&&pj(C,T);break;case 22:T.memoizedState===null&&fd(C,T,m),rp(T,T.return);break;case 30:break;default:fd(C,T,m)}d=d.sibling}}function qv(l,d){var m=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==m&&(l!=null&&l.refCount++,m!=null&&ic(m))}function $v(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&ic(l))}function Sl(l,d,m,p){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)yj(l,d,m,p),d=d.sibling}function yj(l,d,m,p){var C=d.flags;switch(d.tag){case 0:case 11:case 15:Sl(l,d,m,p),C&2048&&ap(9,d);break;case 1:Sl(l,d,m,p);break;case 3:Sl(l,d,m,p),C&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&ic(l)));break;case 12:if(C&2048){Sl(l,d,m,p),l=d.stateNode;try{var T=d.memoizedProps,B=T.id,Q=T.onPostCommit;typeof Q=="function"&&Q(B,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(oe){Jn(d,d.return,oe)}}else Sl(l,d,m,p);break;case 31:Sl(l,d,m,p);break;case 13:Sl(l,d,m,p);break;case 23:break;case 22:T=d.stateNode,B=d.alternate,d.memoizedState!==null?T._visibility&2?Sl(l,d,m,p):op(l,d):T._visibility&2?Sl(l,d,m,p):(T._visibility|=2,sm(l,d,m,p,(d.subtreeFlags&10256)!==0||!1)),C&2048&&qv(B,d);break;case 24:Sl(l,d,m,p),C&2048&&$v(d.alternate,d);break;default:Sl(l,d,m,p)}}function sm(l,d,m,p,C){for(C=C&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var T=l,B=d,Q=m,oe=p,ve=B.flags;switch(B.tag){case 0:case 11:case 15:sm(T,B,Q,oe,C),ap(8,B);break;case 23:break;case 22:var ze=B.stateNode;B.memoizedState!==null?ze._visibility&2?sm(T,B,Q,oe,C):op(T,B):(ze._visibility|=2,sm(T,B,Q,oe,C)),C&&ve&2048&&qv(B.alternate,B);break;case 24:sm(T,B,Q,oe,C),C&&ve&2048&&$v(B.alternate,B);break;default:sm(T,B,Q,oe,C)}d=d.sibling}}function op(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var m=l,p=d,C=p.flags;switch(p.tag){case 22:op(m,p),C&2048&&qv(p.alternate,p);break;case 24:op(m,p),C&2048&&$v(p.alternate,p);break;default:op(m,p)}d=d.sibling}}var lp=8192;function im(l,d,m){if(l.subtreeFlags&lp)for(l=l.child;l!==null;)vj(l,d,m),l=l.sibling}function vj(l,d,m){switch(l.tag){case 26:im(l,d,m),l.flags&lp&&l.memoizedState!==null&&b4(m,wl,l.memoizedState,l.memoizedProps);break;case 5:im(l,d,m);break;case 3:case 4:var p=wl;wl=Jx(l.stateNode.containerInfo),im(l,d,m),wl=p;break;case 22:l.memoizedState===null&&(p=l.alternate,p!==null&&p.memoizedState!==null?(p=lp,lp=16777216,im(l,d,m),lp=p):im(l,d,m));break;default:im(l,d,m)}}function wj(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function cp(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var m=0;m<d.length;m++){var p=d[m];ta=p,Nj(p,l)}wj(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Sj(l),l=l.sibling}function Sj(l){switch(l.tag){case 0:case 11:case 15:cp(l),l.flags&2048&&Mu(9,l,l.return);break;case 3:cp(l);break;case 12:cp(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,zx(l)):cp(l);break;default:cp(l)}}function zx(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var m=0;m<d.length;m++){var p=d[m];ta=p,Nj(p,l)}wj(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:Mu(8,d,d.return),zx(d);break;case 22:m=d.stateNode,m._visibility&2&&(m._visibility&=-3,zx(d));break;default:zx(d)}l=l.sibling}}function Nj(l,d){for(;ta!==null;){var m=ta;switch(m.tag){case 0:case 11:case 15:Mu(8,m,d);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var p=m.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:ic(m.memoizedState.cache)}if(p=m.child,p!==null)p.return=m,ta=p;else e:for(m=l;ta!==null;){p=ta;var C=p.sibling,T=p.return;if(fj(p),p===m){ta=null;break e}if(C!==null){C.return=T,ta=C;break e}ta=T}}}var M3={getCacheForType:function(l){var d=Mn(ss),m=d.data.get(l);return m===void 0&&(m=l(),d.data.set(l,m)),m},cacheSignal:function(){return Mn(ss).controller.signal}},P3=typeof WeakMap=="function"?WeakMap:Map,Bn=0,cs=null,gn=null,bn=0,Qn=0,ao=null,Pu=!1,am=!1,e1=!1,md=0,Zs=0,Ou=0,Uh=0,t1=0,ro=0,rm=0,dp=null,br=null,n1=!1,Ix=0,jj=0,Bx=1/0,Hx=null,Lu=null,Bi=0,Fu=null,om=null,gd=0,s1=0,i1=null,Cj=null,up=0,a1=null;function oo(){return(Bn&2)!==0&&bn!==0?bn&-bn:G.T!==null?u1():Zi()}function Aj(){if(ro===0)if((bn&536870912)===0||Xt){var l=et;et<<=1,(et&3932160)===0&&(et=262144),ro=l}else ro=536870912;return l=ue.current,l!==null&&(l.flags|=32),ro}function yr(l,d,m){(l===cs&&(Qn===2||Qn===9)||l.cancelPendingCommit!==null)&&(lm(l,0),zu(l,bn,ro,!1)),en(l,m),((Bn&2)===0||l!==cs)&&(l===cs&&((Bn&2)===0&&(Uh|=m),Zs===4&&zu(l,bn,ro,!1)),bc(l))}function Ej(l,d,m){if((Bn&6)!==0)throw Error(s(327));var p=!m&&(d&127)===0&&(d&l.expiredLanes)===0||ut(l,d),C=p?F3(l,d):o1(l,d,!0),T=p;do{if(C===0){am&&!p&&zu(l,d,0,!1);break}else{if(m=l.current.alternate,T&&!O3(m)){C=o1(l,d,!1),T=!1;continue}if(C===2){if(T=d,l.errorRecoveryDisabledLanes&T)var B=0;else B=l.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){d=B;e:{var Q=l;C=dp;var oe=Q.current.memoizedState.isDehydrated;if(oe&&(lm(Q,B).flags|=256),B=o1(Q,B,!1),B!==2){if(e1&&!oe){Q.errorRecoveryDisabledLanes|=T,Uh|=T,C=4;break e}T=br,br=C,T!==null&&(br===null?br=T:br.push.apply(br,T))}C=B}if(T=!1,C!==2)continue}}if(C===1){lm(l,0),zu(l,d,0,!0);break}e:{switch(p=l,T=C,T){case 0:case 1:throw Error(s(345));case 4:if((d&4194048)!==d)break;case 6:zu(p,d,ro,!Pu);break e;case 2:br=null;break;case 3:case 5:break;default:throw Error(s(329))}if((d&62914560)===d&&(C=Ix+300-Ze(),10<C)){if(zu(p,d,ro,!Pu),at(p,0,!0)!==0)break e;gd=d,p.timeoutHandle=iC(_j.bind(null,p,m,br,Hx,n1,d,ro,Uh,rm,Pu,T,"Throttled",-0,0),C);break e}_j(p,m,br,Hx,n1,d,ro,Uh,rm,Pu,T,null,-0,0)}}break}while(!0);bc(l)}function _j(l,d,m,p,C,T,B,Q,oe,ve,ze,Ue,Ae,Me){if(l.timeoutHandle=-1,Ue=d.subtreeFlags,Ue&8192||(Ue&16785408)===16785408){Ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ir},vj(d,T,Ue);var vt=(T&62914560)===T?Ix-Ze():(T&4194048)===T?jj-Ze():0;if(vt=y4(Ue,vt),vt!==null){gd=T,l.cancelPendingCommit=vt(Lj.bind(null,l,d,T,m,p,C,B,Q,oe,ze,Ue,null,Ae,Me)),zu(l,T,B,!ve);return}}Lj(l,d,T,m,p,C,B,Q,oe)}function O3(l){for(var d=l;;){var m=d.tag;if((m===0||m===11||m===15)&&d.flags&16384&&(m=d.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var p=0;p<m.length;p++){var C=m[p],T=C.getSnapshot;C=C.value;try{if(!ni(T(),C))return!1}catch{return!1}}if(m=d.child,d.subtreeFlags&16384&&m!==null)m.return=d,d=m;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function zu(l,d,m,p){d&=~t1,d&=~Uh,l.suspendedLanes|=d,l.pingedLanes&=~d,p&&(l.warmLanes|=d),p=l.expirationTimes;for(var C=d;0<C;){var T=31-Qe(C),B=1<<T;p[T]=-1,C&=~B}m!==0&&Ei(l,m,d)}function Ux(){return(Bn&6)===0?(hp(0),!1):!0}function r1(){if(gn!==null){if(Qn===0)var l=gn.return;else l=gn,In=Kr=null,xl(l),ga=null,hl=0,l=gn;for(;l!==null;)aj(l.alternate,l),l=l.return;gn=null}}function lm(l,d){var m=l.timeoutHandle;m!==-1&&(l.timeoutHandle=-1,t4(m)),m=l.cancelPendingCommit,m!==null&&(l.cancelPendingCommit=null,m()),gd=0,r1(),cs=l,gn=m=ys(l.current,null),bn=d,Qn=0,ao=null,Pu=!1,am=ut(l,d),e1=!1,rm=ro=t1=Uh=Ou=Zs=0,br=dp=null,n1=!1,(d&8)!==0&&(d|=d&32);var p=l.entangledLanes;if(p!==0)for(l=l.entanglements,p&=d;0<p;){var C=31-Qe(p),T=1<<C;d|=l[C],p&=~T}return md=d,Bt(),m}function Tj(l,d){dt=null,G.H=Eh,d===Jr||d===qr?(d=qi(),Qn=3):d===Eo?(d=qi(),Qn=4):Qn=d===$g?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,ao=d,gn===null&&(Zs=1,kh(l,xi(d,l.current)))}function kj(){var l=ue.current;return l===null?!0:(bn&4194048)===bn?ie===null:(bn&62914560)===bn||(bn&536870912)!==0?l===ie:!1}function Dj(){var l=G.H;return G.H=Eh,l===null?Eh:l}function Rj(){var l=G.A;return G.A=M3,l}function Vx(){Zs=4,Pu||(bn&4194048)!==bn&&ue.current!==null||(am=!0),(Ou&134217727)===0&&(Uh&134217727)===0||cs===null||zu(cs,bn,ro,!1)}function o1(l,d,m){var p=Bn;Bn|=2;var C=Dj(),T=Rj();(cs!==l||bn!==d)&&(Hx=null,lm(l,d)),d=!1;var B=Zs;e:do try{if(Qn!==0&&gn!==null){var Q=gn,oe=ao;switch(Qn){case 8:r1(),B=6;break e;case 3:case 2:case 9:case 6:ue.current===null&&(d=!0);var ve=Qn;if(Qn=0,ao=null,cm(l,Q,oe,ve),m&&am){B=0;break e}break;default:ve=Qn,Qn=0,ao=null,cm(l,Q,oe,ve)}}L3(),B=Zs;break}catch(ze){Tj(l,ze)}while(!0);return d&&l.shellSuspendCounter++,In=Kr=null,Bn=p,G.H=C,G.A=T,gn===null&&(cs=null,bn=0,Bt()),B}function L3(){for(;gn!==null;)Mj(gn)}function F3(l,d){var m=Bn;Bn|=2;var p=Dj(),C=Rj();cs!==l||bn!==d?(Hx=null,Bx=Ze()+500,lm(l,d)):am=ut(l,d);e:do try{if(Qn!==0&&gn!==null){d=gn;var T=ao;t:switch(Qn){case 1:Qn=0,ao=null,cm(l,d,T,1);break;case 2:case 9:if(ed(T)){Qn=0,ao=null,Pj(d);break}d=function(){Qn!==2&&Qn!==9||cs!==l||(Qn=7),bc(l)},T.then(d,d);break e;case 3:Qn=7;break e;case 4:Qn=5;break e;case 7:ed(T)?(Qn=0,ao=null,Pj(d)):(Qn=0,ao=null,cm(l,d,T,7));break;case 5:var B=null;switch(gn.tag){case 26:B=gn.memoizedState;case 5:case 27:var Q=gn;if(B?yC(B):Q.stateNode.complete){Qn=0,ao=null;var oe=Q.sibling;if(oe!==null)gn=oe;else{var ve=Q.return;ve!==null?(gn=ve,Wx(ve)):gn=null}break t}}Qn=0,ao=null,cm(l,d,T,5);break;case 6:Qn=0,ao=null,cm(l,d,T,6);break;case 8:r1(),Zs=6;break e;default:throw Error(s(462))}}z3();break}catch(ze){Tj(l,ze)}while(!0);return In=Kr=null,G.H=p,G.A=C,Bn=m,gn!==null?0:(cs=null,bn=0,Bt(),Zs)}function z3(){for(;gn!==null&&!Pt();)Mj(gn)}function Mj(l){var d=sj(l.alternate,l,md);l.memoizedProps=l.pendingProps,d===null?Wx(l):gn=d}function Pj(l){var d=l,m=d.alternate;switch(d.tag){case 15:case 0:d=pc(m,d,d.pendingProps,d.type,void 0,bn);break;case 11:d=pc(m,d,d.pendingProps,d.type.render,d.ref,bn);break;case 5:xl(d);default:aj(m,d),d=gn=Tn(d,md),d=sj(m,d,md)}l.memoizedProps=l.pendingProps,d===null?Wx(l):gn=d}function cm(l,d,m,p){In=Kr=null,xl(d),ga=null,hl=0;var C=d.return;try{if(Rh(l,C,d,m,bn)){Zs=1,kh(l,xi(m,l.current)),gn=null;return}}catch(T){if(C!==null)throw gn=C,T;Zs=1,kh(l,xi(m,l.current)),gn=null;return}d.flags&32768?(Xt||p===1?l=!0:am||(bn&536870912)!==0?l=!1:(Pu=l=!0,(p===2||p===9||p===3||p===6)&&(p=ue.current,p!==null&&p.tag===13&&(p.flags|=16384))),Oj(d,l)):Wx(d)}function Wx(l){var d=l;do{if((d.flags&32768)!==0){Oj(d,Pu);return}l=d.return;var m=T3(d.alternate,d,md);if(m!==null){gn=m;return}if(d=d.sibling,d!==null){gn=d;return}gn=d=l}while(d!==null);Zs===0&&(Zs=5)}function Oj(l,d){do{var m=k3(l.alternate,l);if(m!==null){m.flags&=32767,gn=m;return}if(m=l.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!d&&(l=l.sibling,l!==null)){gn=l;return}gn=l=m}while(l!==null);Zs=6,gn=null}function Lj(l,d,m,p,C,T,B,Q,oe){l.cancelPendingCommit=null;do Gx();while(Bi!==0);if((Bn&6)!==0)throw Error(s(327));if(d!==null){if(d===l.current)throw Error(s(177));if(T=d.lanes|d.childLanes,T|=Ut,Rt(l,m,T,B,Q,oe),l===cs&&(gn=cs=null,bn=0),om=d,Fu=l,gd=m,s1=T,i1=C,Cj=p,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,U3(Ot,function(){return Hj(),null})):(l.callbackNode=null,l.callbackPriority=0),p=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||p){p=G.T,G.T=null,C=X.p,X.p=2,B=Bn,Bn|=4;try{D3(l,d,m)}finally{Bn=B,X.p=C,G.T=p}}Bi=1,Fj(),zj(),Ij()}}function Fj(){if(Bi===1){Bi=0;var l=Fu,d=om,m=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||m){m=G.T,G.T=null;var p=X.p;X.p=2;var C=Bn;Bn|=4;try{xj(d,l);var T=y1,B=ou(l.containerInfo),Q=T.focusedElem,oe=T.selectionRange;if(B!==Q&&Q&&Q.ownerDocument&&Co(Q.ownerDocument.documentElement,Q)){if(oe!==null&&lu(Q)){var ve=oe.start,ze=oe.end;if(ze===void 0&&(ze=ve),"selectionStart"in Q)Q.selectionStart=ve,Q.selectionEnd=Math.min(ze,Q.value.length);else{var Ue=Q.ownerDocument||document,Ae=Ue&&Ue.defaultView||window;if(Ae.getSelection){var Me=Ae.getSelection(),vt=Q.textContent.length,Lt=Math.min(oe.start,vt),as=oe.end===void 0?Lt:Math.min(oe.end,vt);!Me.extend&&Lt>as&&(B=as,as=Lt,Lt=B);var me=jo(Q,Lt),de=jo(Q,as);if(me&&de&&(Me.rangeCount!==1||Me.anchorNode!==me.node||Me.anchorOffset!==me.offset||Me.focusNode!==de.node||Me.focusOffset!==de.offset)){var be=Ue.createRange();be.setStart(me.node,me.offset),Me.removeAllRanges(),Lt>as?(Me.addRange(be),Me.extend(de.node,de.offset)):(be.setEnd(de.node,de.offset),Me.addRange(be))}}}}for(Ue=[],Me=Q;Me=Me.parentNode;)Me.nodeType===1&&Ue.push({element:Me,left:Me.scrollLeft,top:Me.scrollTop});for(typeof Q.focus=="function"&&Q.focus(),Q=0;Q<Ue.length;Q++){var Be=Ue[Q];Be.element.scrollLeft=Be.left,Be.element.scrollTop=Be.top}}sb=!!b1,y1=b1=null}finally{Bn=C,X.p=p,G.T=m}}l.current=d,Bi=2}}function zj(){if(Bi===2){Bi=0;var l=Fu,d=om,m=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||m){m=G.T,G.T=null;var p=X.p;X.p=2;var C=Bn;Bn|=4;try{hj(l,d.alternate,d)}finally{Bn=C,X.p=p,G.T=m}}Bi=3}}function Ij(){if(Bi===4||Bi===3){Bi=0,qe();var l=Fu,d=om,m=gd,p=Cj;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?Bi=5:(Bi=0,om=Fu=null,Bj(l,l.pendingLanes));var C=l.pendingLanes;if(C===0&&(Lu=null),jn(m),d=d.stateNode,An&&typeof An.onCommitFiberRoot=="function")try{An.onCommitFiberRoot(Os,d,void 0,(d.current.flags&128)===128)}catch{}if(p!==null){d=G.T,C=X.p,X.p=2,G.T=null;try{for(var T=l.onRecoverableError,B=0;B<p.length;B++){var Q=p[B];T(Q.value,{componentStack:Q.stack})}}finally{G.T=d,X.p=C}}(gd&3)!==0&&Gx(),bc(l),C=l.pendingLanes,(m&261930)!==0&&(C&42)!==0?l===a1?up++:(up=0,a1=l):up=0,hp(0)}}function Bj(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,ic(d)))}function Gx(){return Fj(),zj(),Ij(),Hj()}function Hj(){if(Bi!==5)return!1;var l=Fu,d=s1;s1=0;var m=jn(gd),p=G.T,C=X.p;try{X.p=32>m?32:m,G.T=null,m=i1,i1=null;var T=Fu,B=gd;if(Bi=0,om=Fu=null,gd=0,(Bn&6)!==0)throw Error(s(331));var Q=Bn;if(Bn|=4,Sj(T.current),yj(T,T.current,B,m),Bn=Q,hp(0,!1),An&&typeof An.onPostCommitFiberRoot=="function")try{An.onPostCommitFiberRoot(Os,T)}catch{}return!0}finally{X.p=C,G.T=p,Bj(l,d)}}function Uj(l,d,m){d=xi(m,d),d=em(l.stateNode,d,2),l=vi(l,d,2),l!==null&&(en(l,2),bc(l))}function Jn(l,d,m){if(l.tag===3)Uj(l,l,m);else for(;d!==null;){if(d.tag===3){Uj(d,l,m);break}else if(d.tag===1){var p=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Lu===null||!Lu.has(p))){l=xi(m,l),m=Dh(2),p=vi(d,m,2),p!==null&&(tm(m,p,d,l),en(p,2),bc(p));break}}d=d.return}}function l1(l,d,m){var p=l.pingCache;if(p===null){p=l.pingCache=new P3;var C=new Set;p.set(d,C)}else C=p.get(d),C===void 0&&(C=new Set,p.set(d,C));C.has(m)||(e1=!0,C.add(m),l=I3.bind(null,l,d,m),d.then(l,l))}function I3(l,d,m){var p=l.pingCache;p!==null&&p.delete(d),l.pingedLanes|=l.suspendedLanes&m,l.warmLanes&=~m,cs===l&&(bn&m)===m&&(Zs===4||Zs===3&&(bn&62914560)===bn&&300>Ze()-Ix?(Bn&2)===0&&lm(l,0):t1|=m,rm===bn&&(rm=0)),bc(l)}function Vj(l,d){d===0&&(d=Dt()),l=_n(l,d),l!==null&&(en(l,d),bc(l))}function B3(l){var d=l.memoizedState,m=0;d!==null&&(m=d.retryLane),Vj(l,m)}function H3(l,d){var m=0;switch(l.tag){case 31:case 13:var p=l.stateNode,C=l.memoizedState;C!==null&&(m=C.retryLane);break;case 19:p=l.stateNode;break;case 22:p=l.stateNode._retryCache;break;default:throw Error(s(314))}p!==null&&p.delete(d),Vj(l,m)}function U3(l,d){return ot(l,d)}var Yx=null,dm=null,c1=!1,Xx=!1,d1=!1,Iu=0;function bc(l){l!==dm&&l.next===null&&(dm===null?Yx=dm=l:dm=dm.next=l),Xx=!0,c1||(c1=!0,W3())}function hp(l,d){if(!d1&&Xx){d1=!0;do for(var m=!1,p=Yx;p!==null;){if(l!==0){var C=p.pendingLanes;if(C===0)var T=0;else{var B=p.suspendedLanes,Q=p.pingedLanes;T=(1<<31-Qe(42|l)+1)-1,T&=C&~(B&~Q),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(m=!0,Xj(p,T))}else T=bn,T=at(p,p===cs?T:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(T&3)===0||ut(p,T)||(m=!0,Xj(p,T));p=p.next}while(m);d1=!1}}function V3(){Wj()}function Wj(){Xx=c1=!1;var l=0;Iu!==0&&e4()&&(l=Iu);for(var d=Ze(),m=null,p=Yx;p!==null;){var C=p.next,T=Gj(p,d);T===0?(p.next=null,m===null?Yx=C:m.next=C,C===null&&(dm=m)):(m=p,(l!==0||(T&3)!==0)&&(Xx=!0)),p=C}Bi!==0&&Bi!==5||hp(l),Iu!==0&&(Iu=0)}function Gj(l,d){for(var m=l.suspendedLanes,p=l.pingedLanes,C=l.expirationTimes,T=l.pendingLanes&-62914561;0<T;){var B=31-Qe(T),Q=1<<B,oe=C[B];oe===-1?((Q&m)===0||(Q&p)!==0)&&(C[B]=gt(Q,d)):oe<=d&&(l.expiredLanes|=Q),T&=~Q}if(d=cs,m=bn,m=at(l,l===d?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),p=l.callbackNode,m===0||l===d&&(Qn===2||Qn===9)||l.cancelPendingCommit!==null)return p!==null&&p!==null&&St(p),l.callbackNode=null,l.callbackPriority=0;if((m&3)===0||ut(l,m)){if(d=m&-m,d===l.callbackPriority)return d;switch(p!==null&&St(p),jn(m)){case 2:case 8:m=Et;break;case 32:m=Ot;break;case 268435456:m=Fn;break;default:m=Ot}return p=Yj.bind(null,l),m=ot(m,p),l.callbackPriority=d,l.callbackNode=m,d}return p!==null&&p!==null&&St(p),l.callbackPriority=2,l.callbackNode=null,2}function Yj(l,d){if(Bi!==0&&Bi!==5)return l.callbackNode=null,l.callbackPriority=0,null;var m=l.callbackNode;if(Gx()&&l.callbackNode!==m)return null;var p=bn;return p=at(l,l===cs?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),p===0?null:(Ej(l,p,d),Gj(l,Ze()),l.callbackNode!=null&&l.callbackNode===m?Yj.bind(null,l):null)}function Xj(l,d){if(Gx())return null;Ej(l,d,!0)}function W3(){n4(function(){(Bn&6)!==0?ot(yt,V3):Wj()})}function u1(){if(Iu===0){var l=ma;l===0&&(l=It,It<<=1,(It&261888)===0&&(It=256)),Iu=l}return Iu}function Kj(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:mi(""+l)}function Zj(l,d){var m=d.ownerDocument.createElement("input");return m.name=d.name,m.value=d.value,l.id&&m.setAttribute("form",l.id),d.parentNode.insertBefore(m,d),l=new FormData(l),m.parentNode.removeChild(m),l}function G3(l,d,m,p,C){if(d==="submit"&&m&&m.stateNode===C){var T=Kj((C[_i]||null).action),B=p.submitter;B&&(d=(d=B[_i]||null)?Kj(d.formAction):B.getAttribute("formAction"),d!==null&&(T=d,B=null));var Q=new Vc("action","action",null,p,C);l.push({event:Q,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Iu!==0){var oe=B?Zj(C,B):new FormData(C);Cu(m,{pending:!0,data:oe,method:C.method,action:T},null,oe)}}else typeof T=="function"&&(Q.preventDefault(),oe=B?Zj(C,B):new FormData(C),Cu(m,{pending:!0,data:oe,method:C.method,action:T},T,oe))},currentTarget:C}]})}}for(var h1=0;h1<He.length;h1++){var f1=He[h1],Y3=f1.toLowerCase(),X3=f1[0].toUpperCase()+f1.slice(1);Pe(Y3,"on"+X3)}Pe(D,"onAnimationEnd"),Pe(O,"onAnimationIteration"),Pe(H,"onAnimationStart"),Pe("dblclick","onDoubleClick"),Pe("focusin","onFocus"),Pe("focusout","onBlur"),Pe(J,"onTransitionRun"),Pe(te,"onTransitionStart"),Pe(Ee,"onTransitionCancel"),Pe(ce,"onTransitionEnd"),Mr("onMouseEnter",["mouseout","mouseover"]),Mr("onMouseLeave",["mouseout","mouseover"]),Mr("onPointerEnter",["pointerout","pointerover"]),Mr("onPointerLeave",["pointerout","pointerover"]),Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),K3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fp));function Qj(l,d){d=(d&4)!==0;for(var m=0;m<l.length;m++){var p=l[m],C=p.event;p=p.listeners;e:{var T=void 0;if(d)for(var B=p.length-1;0<=B;B--){var Q=p[B],oe=Q.instance,ve=Q.currentTarget;if(Q=Q.listener,oe!==T&&C.isPropagationStopped())break e;T=Q,C.currentTarget=ve;try{T(C)}catch(ze){it(ze)}C.currentTarget=null,T=oe}else for(B=0;B<p.length;B++){if(Q=p[B],oe=Q.instance,ve=Q.currentTarget,Q=Q.listener,oe!==T&&C.isPropagationStopped())break e;T=Q,C.currentTarget=ve;try{T(C)}catch(ze){it(ze)}C.currentTarget=null,T=oe}}}}function pn(l,d){var m=d[Hd];m===void 0&&(m=d[Hd]=new Set);var p=l+"__bubble";m.has(p)||(Jj(d,l,2,!1),m.add(p))}function m1(l,d,m){var p=0;d&&(p|=4),Jj(m,l,p,d)}var Kx="_reactListening"+Math.random().toString(36).slice(2);function g1(l){if(!l[Kx]){l[Kx]=!0,Ff.forEach(function(m){m!=="selectionchange"&&(K3.has(m)||m1(m,!1,l),m1(m,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[Kx]||(d[Kx]=!0,m1("selectionchange",!1,d))}}function Jj(l,d,m,p){switch(AC(d)){case 2:var C=S4;break;case 8:C=N4;break;default:C=k1}m=C.bind(null,d,m,l),C=void 0,!Rn||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(C=!0),p?C!==void 0?l.addEventListener(d,m,{capture:!0,passive:C}):l.addEventListener(d,m,!0):C!==void 0?l.addEventListener(d,m,{passive:C}):l.addEventListener(d,m,!1)}function p1(l,d,m,p,C){var T=p;if((d&1)===0&&(d&2)===0&&p!==null)e:for(;;){if(p===null)return;var B=p.tag;if(B===3||B===4){var Q=p.stateNode.containerInfo;if(Q===C)break;if(B===4)for(B=p.return;B!==null;){var oe=B.tag;if((oe===3||oe===4)&&B.stateNode.containerInfo===C)return;B=B.return}for(;Q!==null;){if(B=Ws(Q),B===null)return;if(oe=B.tag,oe===5||oe===6||oe===26||oe===27){p=T=B;continue e}Q=Q.parentNode}}p=p.return}Wd(function(){var ve=T,ze=Gl(m),Ue=[];e:{var Ae=_e.get(l);if(Ae!==void 0){var Me=Vc,vt=l;switch(l){case"keypress":if(tl(m)===0)break e;case"keydown":case"keyup":Me=Og;break;case"focusin":vt="focus",Me=Gc;break;case"focusout":vt="blur",Me=Gc;break;case"beforeblur":case"afterblur":Me=Gc;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Me=If;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Me=Dg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Me=ql;break;case D:case O:case H:Me=Mg;break;case ce:Me=Qd;break;case"scroll":case"scrollend":Me=Kl;break;case"wheel":Me=il;break;case"copy":case"cut":case"paste":Me=Yd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Me=Vf;break;case"toggle":case"beforetoggle":Me=Yc}var Lt=(d&4)!==0,as=!Lt&&(l==="scroll"||l==="scrollend"),me=Lt?Ae!==null?Ae+"Capture":null:Ae;Lt=[];for(var de=ve,be;de!==null;){var Be=de;if(be=Be.stateNode,Be=Be.tag,Be!==5&&Be!==26&&Be!==27||be===null||me===null||(Be=$o(de,me),Be!=null&&Lt.push(mp(de,Be,be))),as)break;de=de.return}0<Lt.length&&(Ae=new Me(Ae,vt,null,m,ze),Ue.push({event:Ae,listeners:Lt}))}}if((d&7)===0){e:{if(Ae=l==="mouseover"||l==="pointerover",Me=l==="mouseout"||l==="pointerout",Ae&&m!==Wl&&(vt=m.relatedTarget||m.fromElement)&&(Ws(vt)||vt[xo]))break e;if((Me||Ae)&&(Ae=ze.window===ze?ze:(Ae=ze.ownerDocument)?Ae.defaultView||Ae.parentWindow:window,Me?(vt=m.relatedTarget||m.toElement,Me=ve,vt=vt?Ws(vt):null,vt!==null&&(as=r(vt),Lt=vt.tag,vt!==as||Lt!==5&&Lt!==27&&Lt!==6)&&(vt=null)):(Me=null,vt=ve),Me!==vt)){if(Lt=If,Be="onMouseLeave",me="onMouseEnter",de="mouse",(l==="pointerout"||l==="pointerover")&&(Lt=Vf,Be="onPointerLeave",me="onPointerEnter",de="pointer"),as=Me==null?Ae:Ko(Me),be=vt==null?Ae:Ko(vt),Ae=new Lt(Be,de+"leave",Me,m,ze),Ae.target=as,Ae.relatedTarget=be,Be=null,Ws(ze)===ve&&(Lt=new Lt(me,de+"enter",vt,m,ze),Lt.target=be,Lt.relatedTarget=as,Be=Lt),as=Be,Me&&vt)t:{for(Lt=Z3,me=Me,de=vt,be=0,Be=me;Be;Be=Lt(Be))be++;Be=0;for(var Tt=de;Tt;Tt=Lt(Tt))Be++;for(;0<be-Be;)me=Lt(me),be--;for(;0<Be-be;)de=Lt(de),Be--;for(;be--;){if(me===de||de!==null&&me===de.alternate){Lt=me;break t}me=Lt(me),de=Lt(de)}Lt=null}else Lt=null;Me!==null&&qj(Ue,Ae,Me,Lt,!1),vt!==null&&as!==null&&qj(Ue,as,vt,Lt,!0)}}e:{if(Ae=ve?Ko(ve):window,Me=Ae.nodeName&&Ae.nodeName.toLowerCase(),Me==="select"||Me==="input"&&Ae.type==="file")var On=Kc;else if(tu(Ae))if(Fs)On=Gf;else{On=Zc;var jt=ru}else Me=Ae.nodeName,!Me||Me.toLowerCase()!=="input"||Ae.type!=="checkbox"&&Ae.type!=="radio"?ve&&fh(ve.elementType)&&(On=Kc):On=No;if(On&&(On=On(l,ve))){Xc(Ue,On,m,ze);break e}jt&&jt(l,Ae,ve),l==="focusout"&&ve&&Ae.type==="number"&&ve.memoizedProps.value!=null&&Bc(Ae,"number",Ae.value)}switch(jt=ve?Ko(ve):window,l){case"focusin":(tu(jt)||jt.contentEditable==="true")&&(cr=jt,ec=ve,Ga=null);break;case"focusout":Ga=ec=cr=null;break;case"mousedown":tc=!0;break;case"contextmenu":case"mouseup":case"dragend":tc=!1,bh(Ue,m,ze);break;case"selectionchange":if(cl)break;case"keydown":case"keyup":bh(Ue,m,ze)}var sn;if(Gs)e:{switch(l){case"compositionstart":var yn="onCompositionStart";break e;case"compositionend":yn="onCompositionEnd";break e;case"compositionupdate":yn="onCompositionUpdate";break e}yn=void 0}else al?ph(l,m)&&(yn="onCompositionEnd"):l==="keydown"&&m.keyCode===229&&(yn="onCompositionStart");yn&&(Va&&m.locale!=="ko"&&(al||yn!=="onCompositionStart"?yn==="onCompositionEnd"&&al&&(sn=Xl()):(Ua=ze,el="value"in Ua?Ua.value:Ua.textContent,al=!0)),jt=Zx(ve,yn),0<jt.length&&(yn=new Xd(yn,l,null,m,ze),Ue.push({event:yn,listeners:jt}),sn?yn.data=sn:(sn=qd(m),sn!==null&&(yn.data=sn)))),(sn=Vn?$d(l,m):eu(l,m))&&(yn=Zx(ve,"onBeforeInput"),0<yn.length&&(jt=new Xd("onBeforeInput","beforeinput",null,m,ze),Ue.push({event:jt,listeners:yn}),jt.data=sn)),G3(Ue,l,ve,m,ze)}Qj(Ue,d)})}function mp(l,d,m){return{instance:l,listener:d,currentTarget:m}}function Zx(l,d){for(var m=d+"Capture",p=[];l!==null;){var C=l,T=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||T===null||(C=$o(l,m),C!=null&&p.unshift(mp(l,C,T)),C=$o(l,d),C!=null&&p.push(mp(l,C,T))),l.tag===3)return p;l=l.return}return[]}function Z3(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function qj(l,d,m,p,C){for(var T=d._reactName,B=[];m!==null&&m!==p;){var Q=m,oe=Q.alternate,ve=Q.stateNode;if(Q=Q.tag,oe!==null&&oe===p)break;Q!==5&&Q!==26&&Q!==27||ve===null||(oe=ve,C?(ve=$o(m,T),ve!=null&&B.unshift(mp(m,ve,oe))):C||(ve=$o(m,T),ve!=null&&B.push(mp(m,ve,oe)))),m=m.return}B.length!==0&&l.push({event:d,listeners:B})}var Q3=/\r\n?/g,J3=/\u0000|\uFFFD/g;function $j(l){return(typeof l=="string"?l:""+l).replace(Q3,`
`).replace(J3,"")}function eC(l,d){return d=$j(d),$j(l)===d}function is(l,d,m,p,C,T){switch(m){case"children":typeof p=="string"?d==="body"||d==="textarea"&&p===""||Vl(l,p):(typeof p=="number"||typeof p=="bigint")&&d!=="body"&&Vl(l,""+p);break;case"className":Or(l,"class",p);break;case"tabIndex":Or(l,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Or(l,m,p);break;case"style":zf(l,p,T);break;case"data":if(d!=="object"){Or(l,"data",p);break}case"src":case"href":if(p===""&&(d!=="a"||m!=="href")){l.removeAttribute(m);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){l.removeAttribute(m);break}p=mi(""+p),l.setAttribute(m,p);break;case"action":case"formAction":if(typeof p=="function"){l.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(m==="formAction"?(d!=="input"&&is(l,d,"name",C.name,C,null),is(l,d,"formEncType",C.formEncType,C,null),is(l,d,"formMethod",C.formMethod,C,null),is(l,d,"formTarget",C.formTarget,C,null)):(is(l,d,"encType",C.encType,C,null),is(l,d,"method",C.method,C,null),is(l,d,"target",C.target,C,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){l.removeAttribute(m);break}p=mi(""+p),l.setAttribute(m,p);break;case"onClick":p!=null&&(l.onclick=Ir);break;case"onScroll":p!=null&&pn("scroll",l);break;case"onScrollEnd":p!=null&&pn("scrollend",l);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(s(61));if(m=p.__html,m!=null){if(C.children!=null)throw Error(s(60));l.innerHTML=m}}break;case"multiple":l.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":l.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){l.removeAttribute("xlink:href");break}m=mi(""+p),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?l.setAttribute(m,""+p):l.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?l.setAttribute(m,""):l.removeAttribute(m);break;case"capture":case"download":p===!0?l.setAttribute(m,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?l.setAttribute(m,p):l.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?l.setAttribute(m,p):l.removeAttribute(m);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?l.removeAttribute(m):l.setAttribute(m,p);break;case"popover":pn("beforetoggle",l),pn("toggle",l),Vd(l,"popover",p);break;case"xlinkActuate":Sa(l,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Sa(l,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Sa(l,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Sa(l,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Sa(l,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Sa(l,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Sa(l,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Sa(l,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Sa(l,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Vd(l,"is",p);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=Tg.get(m)||m,Vd(l,m,p))}}function x1(l,d,m,p,C,T){switch(m){case"style":zf(l,p,T);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(s(61));if(m=p.__html,m!=null){if(C.children!=null)throw Error(s(60));l.innerHTML=m}}break;case"children":typeof p=="string"?Vl(l,p):(typeof p=="number"||typeof p=="bigint")&&Vl(l,""+p);break;case"onScroll":p!=null&&pn("scroll",l);break;case"onScrollEnd":p!=null&&pn("scrollend",l);break;case"onClick":p!=null&&(l.onclick=Ir);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hl.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(C=m.endsWith("Capture"),d=m.slice(2,C?m.length-7:void 0),T=l[_i]||null,T=T!=null?T[m]:null,typeof T=="function"&&l.removeEventListener(d,T,C),typeof p=="function")){typeof T!="function"&&T!==null&&(m in l?l[m]=null:l.hasAttribute(m)&&l.removeAttribute(m)),l.addEventListener(d,p,C);break e}m in l?l[m]=p:p===!0?l.setAttribute(m,""):Vd(l,m,p)}}}function xa(l,d,m){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pn("error",l),pn("load",l);var p=!1,C=!1,T;for(T in m)if(m.hasOwnProperty(T)){var B=m[T];if(B!=null)switch(T){case"src":p=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,d));default:is(l,d,T,B,m,null)}}C&&is(l,d,"srcSet",m.srcSet,m,null),p&&is(l,d,"src",m.src,m,null);return;case"input":pn("invalid",l);var Q=T=B=C=null,oe=null,ve=null;for(p in m)if(m.hasOwnProperty(p)){var ze=m[p];if(ze!=null)switch(p){case"name":C=ze;break;case"type":B=ze;break;case"checked":oe=ze;break;case"defaultChecked":ve=ze;break;case"value":T=ze;break;case"defaultValue":Q=ze;break;case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(s(137,d));break;default:is(l,d,p,ze,m,null)}}Fr(l,T,Q,oe,ve,B,C,!1);return;case"select":pn("invalid",l),p=B=T=null;for(C in m)if(m.hasOwnProperty(C)&&(Q=m[C],Q!=null))switch(C){case"value":T=Q;break;case"defaultValue":B=Q;break;case"multiple":p=Q;default:is(l,d,C,Q,m,null)}d=T,m=B,l.multiple=!!p,d!=null?bo(l,!!p,d,!1):m!=null&&bo(l,!!p,m,!0);return;case"textarea":pn("invalid",l),T=C=p=null;for(B in m)if(m.hasOwnProperty(B)&&(Q=m[B],Q!=null))switch(B){case"value":p=Q;break;case"defaultValue":C=Q;break;case"children":T=Q;break;case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(91));break;default:is(l,d,B,Q,m,null)}hh(l,p,C,T);return;case"option":for(oe in m)m.hasOwnProperty(oe)&&(p=m[oe],p!=null)&&(oe==="selected"?l.selected=p&&typeof p!="function"&&typeof p!="symbol":is(l,d,oe,p,m,null));return;case"dialog":pn("beforetoggle",l),pn("toggle",l),pn("cancel",l),pn("close",l);break;case"iframe":case"object":pn("load",l);break;case"video":case"audio":for(p=0;p<fp.length;p++)pn(fp[p],l);break;case"image":pn("error",l),pn("load",l);break;case"details":pn("toggle",l);break;case"embed":case"source":case"link":pn("error",l),pn("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ve in m)if(m.hasOwnProperty(ve)&&(p=m[ve],p!=null))switch(ve){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,d));default:is(l,d,ve,p,m,null)}return;default:if(fh(d)){for(ze in m)m.hasOwnProperty(ze)&&(p=m[ze],p!==void 0&&x1(l,d,ze,p,m,void 0));return}}for(Q in m)m.hasOwnProperty(Q)&&(p=m[Q],p!=null&&is(l,d,Q,p,m,null))}function q3(l,d,m,p){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,T=null,B=null,Q=null,oe=null,ve=null,ze=null;for(Me in m){var Ue=m[Me];if(m.hasOwnProperty(Me)&&Ue!=null)switch(Me){case"checked":break;case"value":break;case"defaultValue":oe=Ue;default:p.hasOwnProperty(Me)||is(l,d,Me,null,p,Ue)}}for(var Ae in p){var Me=p[Ae];if(Ue=m[Ae],p.hasOwnProperty(Ae)&&(Me!=null||Ue!=null))switch(Ae){case"type":T=Me;break;case"name":C=Me;break;case"checked":ve=Me;break;case"defaultChecked":ze=Me;break;case"value":B=Me;break;case"defaultValue":Q=Me;break;case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(s(137,d));break;default:Me!==Ue&&is(l,d,Ae,Me,p,Ue)}}Ic(l,B,Q,oe,ve,ze,T,C);return;case"select":Me=B=Q=Ae=null;for(T in m)if(oe=m[T],m.hasOwnProperty(T)&&oe!=null)switch(T){case"value":break;case"multiple":Me=oe;default:p.hasOwnProperty(T)||is(l,d,T,null,p,oe)}for(C in p)if(T=p[C],oe=m[C],p.hasOwnProperty(C)&&(T!=null||oe!=null))switch(C){case"value":Ae=T;break;case"defaultValue":Q=T;break;case"multiple":B=T;default:T!==oe&&is(l,d,C,T,p,oe)}d=Q,m=B,p=Me,Ae!=null?bo(l,!!m,Ae,!1):!!p!=!!m&&(d!=null?bo(l,!!m,d,!0):bo(l,!!m,m?[]:"",!1));return;case"textarea":Me=Ae=null;for(Q in m)if(C=m[Q],m.hasOwnProperty(Q)&&C!=null&&!p.hasOwnProperty(Q))switch(Q){case"value":break;case"children":break;default:is(l,d,Q,null,p,C)}for(B in p)if(C=p[B],T=m[B],p.hasOwnProperty(B)&&(C!=null||T!=null))switch(B){case"value":Ae=C;break;case"defaultValue":Me=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:C!==T&&is(l,d,B,C,p,T)}zr(l,Ae,Me);return;case"option":for(var vt in m)Ae=m[vt],m.hasOwnProperty(vt)&&Ae!=null&&!p.hasOwnProperty(vt)&&(vt==="selected"?l.selected=!1:is(l,d,vt,null,p,Ae));for(oe in p)Ae=p[oe],Me=m[oe],p.hasOwnProperty(oe)&&Ae!==Me&&(Ae!=null||Me!=null)&&(oe==="selected"?l.selected=Ae&&typeof Ae!="function"&&typeof Ae!="symbol":is(l,d,oe,Ae,p,Me));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Lt in m)Ae=m[Lt],m.hasOwnProperty(Lt)&&Ae!=null&&!p.hasOwnProperty(Lt)&&is(l,d,Lt,null,p,Ae);for(ve in p)if(Ae=p[ve],Me=m[ve],p.hasOwnProperty(ve)&&Ae!==Me&&(Ae!=null||Me!=null))switch(ve){case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(s(137,d));break;default:is(l,d,ve,Ae,p,Me)}return;default:if(fh(d)){for(var as in m)Ae=m[as],m.hasOwnProperty(as)&&Ae!==void 0&&!p.hasOwnProperty(as)&&x1(l,d,as,void 0,p,Ae);for(ze in p)Ae=p[ze],Me=m[ze],!p.hasOwnProperty(ze)||Ae===Me||Ae===void 0&&Me===void 0||x1(l,d,ze,Ae,p,Me);return}}for(var me in m)Ae=m[me],m.hasOwnProperty(me)&&Ae!=null&&!p.hasOwnProperty(me)&&is(l,d,me,null,p,Ae);for(Ue in p)Ae=p[Ue],Me=m[Ue],!p.hasOwnProperty(Ue)||Ae===Me||Ae==null&&Me==null||is(l,d,Ue,Ae,p,Me)}function tC(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function $3(){if(typeof performance.getEntriesByType=="function"){for(var l=0,d=0,m=performance.getEntriesByType("resource"),p=0;p<m.length;p++){var C=m[p],T=C.transferSize,B=C.initiatorType,Q=C.duration;if(T&&Q&&tC(B)){for(B=0,Q=C.responseEnd,p+=1;p<m.length;p++){var oe=m[p],ve=oe.startTime;if(ve>Q)break;var ze=oe.transferSize,Ue=oe.initiatorType;ze&&tC(Ue)&&(oe=oe.responseEnd,B+=ze*(oe<Q?1:(Q-ve)/(oe-ve)))}if(--p,d+=8*(T+B)/(C.duration/1e3),l++,10<l)break}}if(0<l)return d/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var b1=null,y1=null;function Qx(l){return l.nodeType===9?l:l.ownerDocument}function nC(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sC(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function v1(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var w1=null;function e4(){var l=window.event;return l&&l.type==="popstate"?l===w1?!1:(w1=l,!0):(w1=null,!1)}var iC=typeof setTimeout=="function"?setTimeout:void 0,t4=typeof clearTimeout=="function"?clearTimeout:void 0,aC=typeof Promise=="function"?Promise:void 0,n4=typeof queueMicrotask=="function"?queueMicrotask:typeof aC<"u"?function(l){return aC.resolve(null).then(l).catch(s4)}:iC;function s4(l){setTimeout(function(){throw l})}function Bu(l){return l==="head"}function rC(l,d){var m=d,p=0;do{var C=m.nextSibling;if(l.removeChild(m),C&&C.nodeType===8)if(m=C.data,m==="/$"||m==="/&"){if(p===0){l.removeChild(C),mm(d);return}p--}else if(m==="$"||m==="$?"||m==="$~"||m==="$!"||m==="&")p++;else if(m==="html")gp(l.ownerDocument.documentElement);else if(m==="head"){m=l.ownerDocument.head,gp(m);for(var T=m.firstChild;T;){var B=T.nextSibling,Q=T.nodeName;T[kn]||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&T.rel.toLowerCase()==="stylesheet"||m.removeChild(T),T=B}}else m==="body"&&gp(l.ownerDocument.body);m=C}while(m);mm(d)}function oC(l,d){var m=l;l=0;do{var p=m.nextSibling;if(m.nodeType===1?d?(m._stashedDisplay=m.style.display,m.style.display="none"):(m.style.display=m._stashedDisplay||"",m.getAttribute("style")===""&&m.removeAttribute("style")):m.nodeType===3&&(d?(m._stashedText=m.nodeValue,m.nodeValue=""):m.nodeValue=m._stashedText||""),p&&p.nodeType===8)if(m=p.data,m==="/$"){if(l===0)break;l--}else m!=="$"&&m!=="$?"&&m!=="$~"&&m!=="$!"||l++;m=p}while(m)}function S1(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var m=d;switch(d=d.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":S1(m),Xo(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}l.removeChild(m)}}function i4(l,d,m,p){for(;l.nodeType===1;){var C=m;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!p&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(p){if(!l[kn])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(T=l.getAttribute("rel"),T==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(T!==C.rel||l.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||l.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||l.getAttribute("title")!==(C.title==null?null:C.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(T=l.getAttribute("src"),(T!==(C.src==null?null:C.src)||l.getAttribute("type")!==(C.type==null?null:C.type)||l.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&T&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var T=C.name==null?null:""+C.name;if(C.type==="hidden"&&l.getAttribute("name")===T)return l}else return l;if(l=ko(l.nextSibling),l===null)break}return null}function a4(l,d,m){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!m||(l=ko(l.nextSibling),l===null))return null;return l}function lC(l,d){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!d||(l=ko(l.nextSibling),l===null))return null;return l}function N1(l){return l.data==="$?"||l.data==="$~"}function j1(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function r4(l,d){var m=l.ownerDocument;if(l.data==="$~")l._reactRetry=d;else if(l.data!=="$?"||m.readyState!=="loading")d();else{var p=function(){d(),m.removeEventListener("DOMContentLoaded",p)};m.addEventListener("DOMContentLoaded",p),l._reactRetry=p}}function ko(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return l}var C1=null;function cC(l){l=l.nextSibling;for(var d=0;l;){if(l.nodeType===8){var m=l.data;if(m==="/$"||m==="/&"){if(d===0)return ko(l.nextSibling);d--}else m!=="$"&&m!=="$!"&&m!=="$?"&&m!=="$~"&&m!=="&"||d++}l=l.nextSibling}return null}function dC(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var m=l.data;if(m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"){if(d===0)return l;d--}else m!=="/$"&&m!=="/&"||d++}l=l.previousSibling}return null}function uC(l,d,m){switch(d=Qx(m),l){case"html":if(l=d.documentElement,!l)throw Error(s(452));return l;case"head":if(l=d.head,!l)throw Error(s(453));return l;case"body":if(l=d.body,!l)throw Error(s(454));return l;default:throw Error(s(451))}}function gp(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);Xo(l)}var Do=new Map,hC=new Set;function Jx(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var pd=X.d;X.d={f:o4,r:l4,D:c4,C:d4,L:u4,m:h4,X:m4,S:f4,M:g4};function o4(){var l=pd.f(),d=Ux();return l||d}function l4(l){var d=Bl(l);d!==null&&d.tag===5&&d.type==="form"?Zf(d):pd.r(l)}var um=typeof document>"u"?null:document;function fC(l,d,m){var p=um;if(p&&typeof d=="string"&&d){var C=ki(d);C='link[rel="'+l+'"][href="'+C+'"]',typeof m=="string"&&(C+='[crossorigin="'+m+'"]'),hC.has(C)||(hC.add(C),l={rel:l,crossOrigin:m,href:d},p.querySelector(C)===null&&(d=p.createElement("link"),xa(d,"link",l),Ls(d),p.head.appendChild(d)))}}function c4(l){pd.D(l),fC("dns-prefetch",l,null)}function d4(l,d){pd.C(l,d),fC("preconnect",l,d)}function u4(l,d,m){pd.L(l,d,m);var p=um;if(p&&l&&d){var C='link[rel="preload"][as="'+ki(d)+'"]';d==="image"&&m&&m.imageSrcSet?(C+='[imagesrcset="'+ki(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(C+='[imagesizes="'+ki(m.imageSizes)+'"]')):C+='[href="'+ki(l)+'"]';var T=C;switch(d){case"style":T=hm(l);break;case"script":T=fm(l)}Do.has(T)||(l=g({rel:"preload",href:d==="image"&&m&&m.imageSrcSet?void 0:l,as:d},m),Do.set(T,l),p.querySelector(C)!==null||d==="style"&&p.querySelector(pp(T))||d==="script"&&p.querySelector(xp(T))||(d=p.createElement("link"),xa(d,"link",l),Ls(d),p.head.appendChild(d)))}}function h4(l,d){pd.m(l,d);var m=um;if(m&&l){var p=d&&typeof d.as=="string"?d.as:"script",C='link[rel="modulepreload"][as="'+ki(p)+'"][href="'+ki(l)+'"]',T=C;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=fm(l)}if(!Do.has(T)&&(l=g({rel:"modulepreload",href:l},d),Do.set(T,l),m.querySelector(C)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(xp(T)))return}p=m.createElement("link"),xa(p,"link",l),Ls(p),m.head.appendChild(p)}}}function f4(l,d,m){pd.S(l,d,m);var p=um;if(p&&l){var C=Zo(p).hoistableStyles,T=hm(l);d=d||"default";var B=C.get(T);if(!B){var Q={loading:0,preload:null};if(B=p.querySelector(pp(T)))Q.loading=5;else{l=g({rel:"stylesheet",href:l,"data-precedence":d},m),(m=Do.get(T))&&A1(l,m);var oe=B=p.createElement("link");Ls(oe),xa(oe,"link",l),oe._p=new Promise(function(ve,ze){oe.onload=ve,oe.onerror=ze}),oe.addEventListener("load",function(){Q.loading|=1}),oe.addEventListener("error",function(){Q.loading|=2}),Q.loading|=4,qx(B,d,p)}B={type:"stylesheet",instance:B,count:1,state:Q},C.set(T,B)}}}function m4(l,d){pd.X(l,d);var m=um;if(m&&l){var p=Zo(m).hoistableScripts,C=fm(l),T=p.get(C);T||(T=m.querySelector(xp(C)),T||(l=g({src:l,async:!0},d),(d=Do.get(C))&&E1(l,d),T=m.createElement("script"),Ls(T),xa(T,"link",l),m.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},p.set(C,T))}}function g4(l,d){pd.M(l,d);var m=um;if(m&&l){var p=Zo(m).hoistableScripts,C=fm(l),T=p.get(C);T||(T=m.querySelector(xp(C)),T||(l=g({src:l,async:!0,type:"module"},d),(d=Do.get(C))&&E1(l,d),T=m.createElement("script"),Ls(T),xa(T,"link",l),m.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},p.set(C,T))}}function mC(l,d,m,p){var C=(C=We.current)?Jx(C):null;if(!C)throw Error(s(446));switch(l){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(d=hm(m.href),m=Zo(C).hoistableStyles,p=m.get(d),p||(p={type:"style",instance:null,count:0,state:null},m.set(d,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){l=hm(m.href);var T=Zo(C).hoistableStyles,B=T.get(l);if(B||(C=C.ownerDocument||C,B={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(l,B),(T=C.querySelector(pp(l)))&&!T._p&&(B.instance=T,B.state.loading=5),Do.has(l)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Do.set(l,m),T||p4(C,l,m,B.state))),d&&p===null)throw Error(s(528,""));return B}if(d&&p!==null)throw Error(s(529,""));return null;case"script":return d=m.async,m=m.src,typeof m=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=fm(m),m=Zo(C).hoistableScripts,p=m.get(d),p||(p={type:"script",instance:null,count:0,state:null},m.set(d,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,l))}}function hm(l){return'href="'+ki(l)+'"'}function pp(l){return'link[rel="stylesheet"]['+l+"]"}function gC(l){return g({},l,{"data-precedence":l.precedence,precedence:null})}function p4(l,d,m,p){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?p.loading=1:(d=l.createElement("link"),p.preload=d,d.addEventListener("load",function(){return p.loading|=1}),d.addEventListener("error",function(){return p.loading|=2}),xa(d,"link",m),Ls(d),l.head.appendChild(d))}function fm(l){return'[src="'+ki(l)+'"]'}function xp(l){return"script[async]"+l}function pC(l,d,m){if(d.count++,d.instance===null)switch(d.type){case"style":var p=l.querySelector('style[data-href~="'+ki(m.href)+'"]');if(p)return d.instance=p,Ls(p),p;var C=g({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return p=(l.ownerDocument||l).createElement("style"),Ls(p),xa(p,"style",C),qx(p,m.precedence,l),d.instance=p;case"stylesheet":C=hm(m.href);var T=l.querySelector(pp(C));if(T)return d.state.loading|=4,d.instance=T,Ls(T),T;p=gC(m),(C=Do.get(C))&&A1(p,C),T=(l.ownerDocument||l).createElement("link"),Ls(T);var B=T;return B._p=new Promise(function(Q,oe){B.onload=Q,B.onerror=oe}),xa(T,"link",p),d.state.loading|=4,qx(T,m.precedence,l),d.instance=T;case"script":return T=fm(m.src),(C=l.querySelector(xp(T)))?(d.instance=C,Ls(C),C):(p=m,(C=Do.get(T))&&(p=g({},m),E1(p,C)),l=l.ownerDocument||l,C=l.createElement("script"),Ls(C),xa(C,"link",p),l.head.appendChild(C),d.instance=C);case"void":return null;default:throw Error(s(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(p=d.instance,d.state.loading|=4,qx(p,m.precedence,l));return d.instance}function qx(l,d,m){for(var p=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=p.length?p[p.length-1]:null,T=C,B=0;B<p.length;B++){var Q=p[B];if(Q.dataset.precedence===d)T=Q;else if(T!==C)break}T?T.parentNode.insertBefore(l,T.nextSibling):(d=m.nodeType===9?m.head:m,d.insertBefore(l,d.firstChild))}function A1(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function E1(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var $x=null;function xC(l,d,m){if($x===null){var p=new Map,C=$x=new Map;C.set(m,p)}else C=$x,p=C.get(m),p||(p=new Map,C.set(m,p));if(p.has(l))return p;for(p.set(l,null),m=m.getElementsByTagName(l),C=0;C<m.length;C++){var T=m[C];if(!(T[kn]||T[Vs]||l==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var B=T.getAttribute(d)||"";B=l+B;var Q=p.get(B);Q?Q.push(T):p.set(B,[T])}}return p}function bC(l,d,m){l=l.ownerDocument||l,l.head.insertBefore(m,d==="title"?l.querySelector("head > title"):null)}function x4(l,d,m){if(m===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;return d.rel==="stylesheet"?(l=d.disabled,typeof d.precedence=="string"&&l==null):!0;case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function yC(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function b4(l,d,m,p){if(m.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var C=hm(p.href),T=d.querySelector(pp(C));if(T){d=T._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(l.count++,l=eb.bind(l),d.then(l,l)),m.state.loading|=4,m.instance=T,Ls(T);return}T=d.ownerDocument||d,p=gC(p),(C=Do.get(C))&&A1(p,C),T=T.createElement("link"),Ls(T);var B=T;B._p=new Promise(function(Q,oe){B.onload=Q,B.onerror=oe}),xa(T,"link",p),m.instance=T}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(m,d),(d=m.state.preload)&&(m.state.loading&3)===0&&(l.count++,m=eb.bind(l),d.addEventListener("load",m),d.addEventListener("error",m))}}var _1=0;function y4(l,d){return l.stylesheets&&l.count===0&&nb(l,l.stylesheets),0<l.count||0<l.imgCount?function(m){var p=setTimeout(function(){if(l.stylesheets&&nb(l,l.stylesheets),l.unsuspend){var T=l.unsuspend;l.unsuspend=null,T()}},6e4+d);0<l.imgBytes&&_1===0&&(_1=62500*$3());var C=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&nb(l,l.stylesheets),l.unsuspend)){var T=l.unsuspend;l.unsuspend=null,T()}},(l.imgBytes>_1?50:800)+d);return l.unsuspend=m,function(){l.unsuspend=null,clearTimeout(p),clearTimeout(C)}}:null}function eb(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)nb(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var tb=null;function nb(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,tb=new Map,d.forEach(v4,l),tb=null,eb.call(l))}function v4(l,d){if(!(d.state.loading&4)){var m=tb.get(l);if(m)var p=m.get(null);else{m=new Map,tb.set(l,m);for(var C=l.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<C.length;T++){var B=C[T];(B.nodeName==="LINK"||B.getAttribute("media")!=="not all")&&(m.set(B.dataset.precedence,B),p=B)}p&&m.set(null,p)}C=d.instance,B=C.getAttribute("data-precedence"),T=m.get(B)||p,T===p&&m.set(null,C),m.set(B,C),this.count++,p=eb.bind(this),C.addEventListener("load",p),C.addEventListener("error",p),T?T.parentNode.insertBefore(C,T.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(C,l.firstChild)),d.state.loading|=4}}var bp={$$typeof:M,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function w4(l,d,m,p,C,T,B,Q,oe){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hn(0),this.hiddenUpdates=hn(null),this.identifierPrefix=p,this.onUncaughtError=C,this.onCaughtError=T,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=oe,this.incompleteTransitions=new Map}function vC(l,d,m,p,C,T,B,Q,oe,ve,ze,Ue){return l=new w4(l,d,m,B,oe,ve,ze,Ue,Q),d=1,T===!0&&(d|=24),T=Wn(3,null,null,d),l.current=T,T.stateNode=l,d=fu(),d.refCount++,l.pooledCache=d,d.refCount++,T.memoizedState={element:p,isDehydrated:m,cache:d},Ja(T),l}function wC(l){return l?(l=on,l):on}function SC(l,d,m,p,C,T){C=wC(C),p.context===null?p.context=C:p.pendingContext=C,p=$i(d),p.payload={element:m},T=T===void 0?null:T,T!==null&&(p.callback=T),m=vi(l,p,d),m!==null&&(yr(m,l,d),_a(m,l,d))}function NC(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var m=l.retryLane;l.retryLane=m!==0&&m<d?m:d}}function T1(l,d){NC(l,d),(l=l.alternate)&&NC(l,d)}function jC(l){if(l.tag===13||l.tag===31){var d=_n(l,67108864);d!==null&&yr(d,l,67108864),T1(l,67108864)}}function CC(l){if(l.tag===13||l.tag===31){var d=oo();d=Cs(d);var m=_n(l,d);m!==null&&yr(m,l,d),T1(l,d)}}var sb=!0;function S4(l,d,m,p){var C=G.T;G.T=null;var T=X.p;try{X.p=2,k1(l,d,m,p)}finally{X.p=T,G.T=C}}function N4(l,d,m,p){var C=G.T;G.T=null;var T=X.p;try{X.p=8,k1(l,d,m,p)}finally{X.p=T,G.T=C}}function k1(l,d,m,p){if(sb){var C=D1(p);if(C===null)p1(l,d,p,ib,m),EC(l,p);else if(C4(C,l,d,m,p))p.stopPropagation();else if(EC(l,p),d&4&&-1<j4.indexOf(l)){for(;C!==null;){var T=Bl(C);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var B=Ke(T.pendingLanes);if(B!==0){var Q=T;for(Q.pendingLanes|=2,Q.entangledLanes|=2;B;){var oe=1<<31-Qe(B);Q.entanglements[1]|=oe,B&=~oe}bc(T),(Bn&6)===0&&(Bx=Ze()+500,hp(0))}}break;case 31:case 13:Q=_n(T,2),Q!==null&&yr(Q,T,2),Ux(),T1(T,2)}if(T=D1(p),T===null&&p1(l,d,p,ib,m),T===C)break;C=T}C!==null&&p.stopPropagation()}else p1(l,d,p,null,m)}}function D1(l){return l=Gl(l),R1(l)}var ib=null;function R1(l){if(ib=null,l=Ws(l),l!==null){var d=r(l);if(d===null)l=null;else{var m=d.tag;if(m===13){if(l=o(d),l!==null)return l;l=null}else if(m===31){if(l=c(d),l!==null)return l;l=null}else if(m===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return ib=l,null}function AC(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xe()){case yt:return 2;case Et:return 8;case Ot:case Kt:return 32;case Fn:return 268435456;default:return 32}default:return 32}}var M1=!1,Hu=null,Uu=null,Vu=null,yp=new Map,vp=new Map,Wu=[],j4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function EC(l,d){switch(l){case"focusin":case"focusout":Hu=null;break;case"dragenter":case"dragleave":Uu=null;break;case"mouseover":case"mouseout":Vu=null;break;case"pointerover":case"pointerout":yp.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":vp.delete(d.pointerId)}}function wp(l,d,m,p,C,T){return l===null||l.nativeEvent!==T?(l={blockedOn:d,domEventName:m,eventSystemFlags:p,nativeEvent:T,targetContainers:[C]},d!==null&&(d=Bl(d),d!==null&&jC(d)),l):(l.eventSystemFlags|=p,d=l.targetContainers,C!==null&&d.indexOf(C)===-1&&d.push(C),l)}function C4(l,d,m,p,C){switch(d){case"focusin":return Hu=wp(Hu,l,d,m,p,C),!0;case"dragenter":return Uu=wp(Uu,l,d,m,p,C),!0;case"mouseover":return Vu=wp(Vu,l,d,m,p,C),!0;case"pointerover":var T=C.pointerId;return yp.set(T,wp(yp.get(T)||null,l,d,m,p,C)),!0;case"gotpointercapture":return T=C.pointerId,vp.set(T,wp(vp.get(T)||null,l,d,m,p,C)),!0}return!1}function _C(l){var d=Ws(l.target);if(d!==null){var m=r(d);if(m!==null){if(d=m.tag,d===13){if(d=o(m),d!==null){l.blockedOn=d,As(l.priority,function(){CC(m)});return}}else if(d===31){if(d=c(m),d!==null){l.blockedOn=d,As(l.priority,function(){CC(m)});return}}else if(d===3&&m.stateNode.current.memoizedState.isDehydrated){l.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}l.blockedOn=null}function ab(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var m=D1(l.nativeEvent);if(m===null){m=l.nativeEvent;var p=new m.constructor(m.type,m);Wl=p,m.target.dispatchEvent(p),Wl=null}else return d=Bl(m),d!==null&&jC(d),l.blockedOn=m,!1;d.shift()}return!0}function TC(l,d,m){ab(l)&&m.delete(d)}function A4(){M1=!1,Hu!==null&&ab(Hu)&&(Hu=null),Uu!==null&&ab(Uu)&&(Uu=null),Vu!==null&&ab(Vu)&&(Vu=null),yp.forEach(TC),vp.forEach(TC)}function rb(l,d){l.blockedOn===d&&(l.blockedOn=null,M1||(M1=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,A4)))}var ob=null;function kC(l){ob!==l&&(ob=l,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ob===l&&(ob=null);for(var d=0;d<l.length;d+=3){var m=l[d],p=l[d+1],C=l[d+2];if(typeof p!="function"){if(R1(p||m)===null)continue;break}var T=Bl(m);T!==null&&(l.splice(d,3),d-=3,Cu(T,{pending:!0,data:C,method:m.method,action:p},p,C))}}))}function mm(l){function d(oe){return rb(oe,l)}Hu!==null&&rb(Hu,l),Uu!==null&&rb(Uu,l),Vu!==null&&rb(Vu,l),yp.forEach(d),vp.forEach(d);for(var m=0;m<Wu.length;m++){var p=Wu[m];p.blockedOn===l&&(p.blockedOn=null)}for(;0<Wu.length&&(m=Wu[0],m.blockedOn===null);)_C(m),m.blockedOn===null&&Wu.shift();if(m=(l.ownerDocument||l).$$reactFormReplay,m!=null)for(p=0;p<m.length;p+=3){var C=m[p],T=m[p+1],B=C[_i]||null;if(typeof T=="function")B||kC(m);else if(B){var Q=null;if(T&&T.hasAttribute("formAction")){if(C=T,B=T[_i]||null)Q=B.formAction;else if(R1(C)!==null)continue}else Q=B.action;typeof Q=="function"?m[p+1]=Q:(m.splice(p,3),p-=3),kC(m)}}}function DC(){function l(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(B){return C=B})},focusReset:"manual",scroll:"manual"})}function d(){C!==null&&(C(),C=null),p||setTimeout(m,20)}function m(){if(!p&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,C=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(m,100),function(){p=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),C!==null&&(C(),C=null)}}}function P1(l){this._internalRoot=l}lb.prototype.render=P1.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(s(409));var m=d.current,p=oo();SC(m,p,l,d,null,null)},lb.prototype.unmount=P1.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;SC(l.current,2,null,l,null,null),Ux(),d[xo]=null}};function lb(l){this._internalRoot=l}lb.prototype.unstable_scheduleHydration=function(l){if(l){var d=Zi();l={blockedOn:null,target:l,priority:d};for(var m=0;m<Wu.length&&d!==0&&d<Wu[m].priority;m++);Wu.splice(m,0,l),m===0&&_C(l)}};var RC=e.version;if(RC!=="19.2.3")throw Error(s(527,RC,"19.2.3"));X.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(s(188)):(l=Object.keys(l).join(","),Error(s(268,l)));return l=h(d),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var E4={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cb.isDisabled&&cb.supportsFiber)try{Os=cb.inject(E4),An=cb}catch{}}return Np.createRoot=function(l,d){if(!i(l))throw Error(s(299));var m=!1,p="",C=Jg,T=gc,B=qg;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(p=d.identifierPrefix),d.onUncaughtError!==void 0&&(C=d.onUncaughtError),d.onCaughtError!==void 0&&(T=d.onCaughtError),d.onRecoverableError!==void 0&&(B=d.onRecoverableError)),d=vC(l,1,!1,null,null,m,p,null,C,T,B,DC),l[xo]=d.current,g1(l),new P1(d)},Np.hydrateRoot=function(l,d,m){if(!i(l))throw Error(s(299));var p=!1,C="",T=Jg,B=gc,Q=qg,oe=null;return m!=null&&(m.unstable_strictMode===!0&&(p=!0),m.identifierPrefix!==void 0&&(C=m.identifierPrefix),m.onUncaughtError!==void 0&&(T=m.onUncaughtError),m.onCaughtError!==void 0&&(B=m.onCaughtError),m.onRecoverableError!==void 0&&(Q=m.onRecoverableError),m.formState!==void 0&&(oe=m.formState)),d=vC(l,1,!0,d,m??null,p,C,oe,T,B,Q,DC),d.context=wC(null),m=d.current,p=oo(),p=Cs(p),C=$i(p),C.callback=null,vi(m,C,p),m=p,d.current.lanes=m,en(d,m),bc(d),l[xo]=d.current,g1(l),new lb(d)},Np.version="19.2.3",Np}var WC;function L4(){if(WC)return z1.exports;WC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),z1.exports=O4(),z1.exports}var F4=L4();var GC="popstate";function z4(n={}){function e(s,i){let{pathname:r,search:o,hash:c}=s.location;return Jw("",{pathname:r,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(s,i){return typeof i=="string"?i:g0(i)}return B4(e,t,null,n)}function Ps(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function mo(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function I4(){return Math.random().toString(36).substring(2,10)}function YC(n,e){return{usr:n.state,key:n.key,idx:e}}function Jw(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?sg(e):e,state:t,key:e&&e.key||s||I4()}}function g0({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function sg(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function B4(n,e,t,s={}){let{window:i=document.defaultView,v5Compat:r=!1}=s,o=i.history,c="POP",u=null,h=f();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function f(){return(o.state||{idx:null}).idx}function g(){c="POP";let E=f(),A=E==null?null:E-h;h=E,u&&u({action:c,location:j.location,delta:A})}function x(E,A){c="PUSH";let R=Jw(j.location,E,A);h=f()+1;let M=YC(R,h),L=j.createHref(R);try{o.pushState(M,"",L)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(L)}r&&u&&u({action:c,location:j.location,delta:1})}function y(E,A){c="REPLACE";let R=Jw(j.location,E,A);h=f();let M=YC(R,h),L=j.createHref(R);o.replaceState(M,"",L),r&&u&&u({action:c,location:j.location,delta:0})}function N(E){return H4(E)}let j={get action(){return c},get location(){return n(i,o)},listen(E){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(GC,g),u=E,()=>{i.removeEventListener(GC,g),u=null}},createHref(E){return e(i,E)},createURL:N,encodeLocation(E){let A=N(E);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:x,replace:y,go(E){return o.go(E)}};return j}function H4(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ps(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:g0(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function Mk(n,e,t="/"){return U4(n,e,t,!1)}function U4(n,e,t,s){let i=typeof e=="string"?sg(e):e,r=_d(i.pathname||"/",t);if(r==null)return null;let o=Pk(n);V4(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let h=eO(r);c=q4(o[u],h,s)}return c}function Pk(n,e=[],t=[],s="",i=!1){let r=(o,c,u=i,h)=>{let f={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(s)&&u)return;Ps(f.relativePath.startsWith(s),`Absolute route path "${f.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(s.length)}let g=Ad([s,f.relativePath]),x=t.concat(f);o.children&&o.children.length>0&&(Ps(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),Pk(o.children,e,x,g,u)),!(o.path==null&&!o.index)&&e.push({path:g,score:Q4(g,o.index),routesMeta:x})};return n.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))r(o,c);else for(let u of Ok(o.path))r(o,c,!0,u)}),e}function Ok(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,i=t.endsWith("?"),r=t.replace(/\?$/,"");if(s.length===0)return i?[r,""]:[r];let o=Ok(s.join("/")),c=[];return c.push(...o.map(u=>u===""?r:[r,u].join("/"))),i&&c.push(...o),c.map(u=>n.startsWith("/")&&u===""?"/":u)}function V4(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:J4(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var W4=/^:[\w-]+$/,G4=3,Y4=2,X4=1,K4=10,Z4=-2,XC=n=>n==="*";function Q4(n,e){let t=n.split("/"),s=t.length;return t.some(XC)&&(s+=Z4),e&&(s+=Y4),t.filter(i=>!XC(i)).reduce((i,r)=>i+(W4.test(r)?G4:r===""?X4:K4),s)}function J4(n,e){return n.length===e.length&&n.slice(0,-1).every((s,i)=>s===e[i])?n[n.length-1]-e[e.length-1]:0}function q4(n,e,t=!1){let{routesMeta:s}=n,i={},r="/",o=[];for(let c=0;c<s.length;++c){let u=s[c],h=c===s.length-1,f=r==="/"?e:e.slice(r.length)||"/",g=gy({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},f),x=u.route;if(!g&&h&&t&&!s[s.length-1].route.index&&(g=gy({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:Ad([r,g.pathname]),pathnameBase:iO(Ad([r,g.pathnameBase])),route:x}),g.pathnameBase!=="/"&&(r=Ad([r,g.pathnameBase]))}return o}function gy(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=$4(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let r=i[0],o=r.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:s.reduce((h,{paramName:f,isOptional:g},x)=>{if(f==="*"){let N=c[x]||"";o=r.slice(0,r.length-N.length).replace(/(.)\/+$/,"$1")}const y=c[x];return g&&!y?h[f]=void 0:h[f]=(y||"").replace(/%2F/g,"/"),h},{}),pathname:r,pathnameBase:o,pattern:n}}function $4(n,e=!1,t=!0){mo(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(s.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function eO(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mo(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function _d(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}var Lk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tO=n=>Lk.test(n);function nO(n,e="/"){let{pathname:t,search:s="",hash:i=""}=typeof n=="string"?sg(n):n,r;if(t)if(tO(t))r=t;else{if(t.includes("//")){let o=t;t=t.replace(/\/\/+/g,"/"),mo(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${t}`)}t.startsWith("/")?r=KC(t.substring(1),"/"):r=KC(t,e)}else r=e;return{pathname:r,search:aO(s),hash:rO(i)}}function KC(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function U1(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function sO(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cS(n){let e=sO(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function dS(n,e,t,s=!1){let i;typeof n=="string"?i=sg(n):(i={...n},Ps(!i.pathname||!i.pathname.includes("?"),U1("?","pathname","search",i)),Ps(!i.pathname||!i.pathname.includes("#"),U1("#","pathname","hash",i)),Ps(!i.search||!i.search.includes("#"),U1("#","search","hash",i)));let r=n===""||i.pathname==="",o=r?"/":i.pathname,c;if(o==null)c=t;else{let g=e.length-1;if(!s&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),g-=1;i.pathname=x.join("/")}c=g>=0?e[g]:"/"}let u=nO(i,c),h=o&&o!=="/"&&o.endsWith("/"),f=(r||o===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(h||f)&&(u.pathname+="/"),u}var Ad=n=>n.join("/").replace(/\/\/+/g,"/"),iO=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),aO=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,rO=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,oO=class{constructor(n,e,t,s=!1){this.status=n,this.statusText=e||"",this.internal=s,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function lO(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function cO(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Fk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function zk(n,e){let t=n;if(typeof t!="string"||!Lk.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let s=t,i=!1;if(Fk)try{let r=new URL(window.location.href),o=t.startsWith("//")?new URL(r.protocol+t):new URL(t),c=_d(o.pathname,e);o.origin===r.origin&&c!=null?t=c+o.search+o.hash:i=!0}catch{mo(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:i,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ik=["POST","PUT","PATCH","DELETE"];new Set(Ik);var dO=["GET",...Ik];new Set(dO);var ig=_.createContext(null);ig.displayName="DataRouter";var Qy=_.createContext(null);Qy.displayName="DataRouterState";var uO=_.createContext(!1),Bk=_.createContext({isTransitioning:!1});Bk.displayName="ViewTransition";var hO=_.createContext(new Map);hO.displayName="Fetchers";var fO=_.createContext(null);fO.displayName="Await";var po=_.createContext(null);po.displayName="Navigation";var H0=_.createContext(null);H0.displayName="Location";var Vo=_.createContext({outlet:null,matches:[],isDataRoute:!1});Vo.displayName="Route";var uS=_.createContext(null);uS.displayName="RouteError";var Hk="REACT_ROUTER_ERROR",mO="REDIRECT",gO="ROUTE_ERROR_RESPONSE";function pO(n){if(n.startsWith(`${Hk}:${mO}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function xO(n){if(n.startsWith(`${Hk}:${gO}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new oO(e.status,e.statusText,e.data)}catch{}}function bO(n,{relative:e}={}){Ps(ag(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=_.useContext(po),{hash:i,pathname:r,search:o}=U0(n,{relative:e}),c=r;return t!=="/"&&(c=r==="/"?t:Ad([t,r])),s.createHref({pathname:c,search:o,hash:i})}function ag(){return _.useContext(H0)!=null}function kr(){return Ps(ag(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(H0).location}var Uk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Vk(n){_.useContext(po).static||_.useLayoutEffect(n)}function ts(){let{isDataRoute:n}=_.useContext(Vo);return n?MO():yO()}function yO(){Ps(ag(),"useNavigate() may be used only in the context of a <Router> component.");let n=_.useContext(ig),{basename:e,navigator:t}=_.useContext(po),{matches:s}=_.useContext(Vo),{pathname:i}=kr(),r=JSON.stringify(cS(s)),o=_.useRef(!1);return Vk(()=>{o.current=!0}),_.useCallback((u,h={})=>{if(mo(o.current,Uk),!o.current)return;if(typeof u=="number"){t.go(u);return}let f=dS(u,JSON.parse(r),i,h.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ad([e,f.pathname])),(h.replace?t.replace:t.push)(f,h.state,h)},[e,t,r,i,n])}var vO=_.createContext(null);function wO(n){let e=_.useContext(Vo).outlet;return _.useMemo(()=>e&&_.createElement(vO.Provider,{value:n},e),[e,n])}function Wo(){let{matches:n}=_.useContext(Vo),e=n[n.length-1];return e?e.params:{}}function U0(n,{relative:e}={}){let{matches:t}=_.useContext(Vo),{pathname:s}=kr(),i=JSON.stringify(cS(t));return _.useMemo(()=>dS(n,JSON.parse(i),s,e==="path"),[n,i,s,e])}function SO(n,e){return Wk(n,e)}function Wk(n,e,t,s,i){Ps(ag(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=_.useContext(po),{matches:o}=_.useContext(Vo),c=o[o.length-1],u=c?c.params:{},h=c?c.pathname:"/",f=c?c.pathnameBase:"/",g=c&&c.route;{let R=g&&g.path||"";Yk(h,!g||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let x=kr(),y;if(e){let R=typeof e=="string"?sg(e):e;Ps(f==="/"||R.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${R.pathname}" was given in the \`location\` prop.`),y=R}else y=x;let N=y.pathname||"/",j=N;if(f!=="/"){let R=f.replace(/^\//,"").split("/");j="/"+N.replace(/^\//,"").split("/").slice(R.length).join("/")}let E=Mk(n,{pathname:j});mo(g||E!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),mo(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=EO(E&&E.map(R=>Object.assign({},R,{params:Object.assign({},u,R.params),pathname:Ad([f,r.encodeLocation?r.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?f:Ad([f,r.encodeLocation?r.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),o,t,s,i);return e&&A?_.createElement(H0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},A):A}function NO(){let n=RO(),e=lO(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},r={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=_.createElement(_.Fragment,null,_.createElement("p",null," Hey developer "),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:r},"ErrorBoundary")," or"," ",_.createElement("code",{style:r},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),t?_.createElement("pre",{style:i},t):null,o)}var jO=_.createElement(NO,null),Gk=class extends _.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=xO(n.digest);t&&(n=t)}let e=n!==void 0?_.createElement(Vo.Provider,{value:this.props.routeContext},_.createElement(uS.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?_.createElement(CO,{error:n},e):e}};Gk.contextType=uO;var V1=new WeakMap;function CO({children:n,error:e}){let{basename:t}=_.useContext(po);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=pO(e.digest);if(s){let i=V1.get(e);if(i)throw i;let r=zk(s.location,t);if(Fk&&!V1.get(e))if(r.isExternal||s.reloadDocument)window.location.href=r.absoluteURL||r.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(r.to,{replace:s.replace}));throw V1.set(e,o),o}return _.createElement("meta",{httpEquiv:"refresh",content:`0;url=${r.absoluteURL||r.to}`})}}return n}function AO({routeContext:n,match:e,children:t}){let s=_.useContext(ig);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),_.createElement(Vo.Provider,{value:n},t)}function EO(n,e=[],t=null,s=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let r=n,o=t?.errors;if(o!=null){let f=r.findIndex(g=>g.route.id&&o?.[g.route.id]!==void 0);Ps(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),r=r.slice(0,Math.min(r.length,f+1))}let c=!1,u=-1;if(t)for(let f=0;f<r.length;f++){let g=r[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=f),g.route.id){let{loaderData:x,errors:y}=t,N=g.route.loader&&!x.hasOwnProperty(g.route.id)&&(!y||y[g.route.id]===void 0);if(g.route.lazy||N){c=!0,u>=0?r=r.slice(0,u+1):r=[r[0]];break}}}let h=t&&s?(f,g)=>{s(f,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:cO(t.matches),errorInfo:g})}:void 0;return r.reduceRight((f,g,x)=>{let y,N=!1,j=null,E=null;t&&(y=o&&g.route.id?o[g.route.id]:void 0,j=g.route.errorElement||jO,c&&(u<0&&x===0?(Yk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,E=null):u===x&&(N=!0,E=g.route.hydrateFallbackElement||null)));let A=e.concat(r.slice(0,x+1)),R=()=>{let M;return y?M=j:N?M=E:g.route.Component?M=_.createElement(g.route.Component,null):g.route.element?M=g.route.element:M=f,_.createElement(AO,{match:g,routeContext:{outlet:f,matches:A,isDataRoute:t!=null},children:M})};return t&&(g.route.ErrorBoundary||g.route.errorElement||x===0)?_.createElement(Gk,{location:t.location,revalidation:t.revalidation,component:j,error:y,children:R(),routeContext:{outlet:null,matches:A,isDataRoute:!0},onError:h}):R()},null)}function hS(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _O(n){let e=_.useContext(ig);return Ps(e,hS(n)),e}function TO(n){let e=_.useContext(Qy);return Ps(e,hS(n)),e}function kO(n){let e=_.useContext(Vo);return Ps(e,hS(n)),e}function fS(n){let e=kO(n),t=e.matches[e.matches.length-1];return Ps(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function DO(){return fS("useRouteId")}function RO(){let n=_.useContext(uS),e=TO("useRouteError"),t=fS("useRouteError");return n!==void 0?n:e.errors?.[t]}function MO(){let{router:n}=_O("useNavigate"),e=fS("useNavigate"),t=_.useRef(!1);return Vk(()=>{t.current=!0}),_.useCallback(async(i,r={})=>{mo(t.current,Uk),t.current&&(typeof i=="number"?await n.navigate(i):await n.navigate(i,{fromRouteId:e,...r}))},[n,e])}var ZC={};function Yk(n,e,t){!e&&!ZC[n]&&(ZC[n]=!0,mo(!1,t))}_.memo(PO);function PO({routes:n,future:e,state:t,onError:s}){return Wk(n,void 0,t,s,e)}function Vp({to:n,replace:e,state:t,relative:s}){Ps(ag(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=_.useContext(po);mo(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:r}=_.useContext(Vo),{pathname:o}=kr(),c=ts(),u=dS(n,cS(r),o,s==="path"),h=JSON.stringify(u);return _.useEffect(()=>{c(JSON.parse(h),{replace:e,state:t,relative:s})},[c,h,s,e,t]),null}function V0(n){return wO(n.context)}function Mt(n){Ps(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function OO({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:i,static:r=!1,unstable_useTransitions:o}){Ps(!ag(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:c,navigator:i,static:r,unstable_useTransitions:o,future:{}}),[c,i,r,o]);typeof t=="string"&&(t=sg(t));let{pathname:h="/",search:f="",hash:g="",state:x=null,key:y="default"}=t,N=_.useMemo(()=>{let j=_d(h,c);return j==null?null:{location:{pathname:j,search:f,hash:g,state:x,key:y},navigationType:s}},[c,h,f,g,x,y,s]);return mo(N!=null,`<Router basename="${c}"> is not able to match the URL "${h}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:_.createElement(po.Provider,{value:u},_.createElement(H0.Provider,{children:e,value:N}))}function LO({children:n,location:e}){return SO(qw(n),e)}function qw(n,e=[]){let t=[];return _.Children.forEach(n,(s,i)=>{if(!_.isValidElement(s))return;let r=[...e,i];if(s.type===_.Fragment){t.push.apply(t,qw(s.props.children,r));return}Ps(s.type===Mt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ps(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||r.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=qw(s.props.children,r)),t.push(o)}),t}var Zb="get",Qb="application/x-www-form-urlencoded";function Jy(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function FO(n){return Jy(n)&&n.tagName.toLowerCase()==="button"}function zO(n){return Jy(n)&&n.tagName.toLowerCase()==="form"}function IO(n){return Jy(n)&&n.tagName.toLowerCase()==="input"}function BO(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function HO(n,e){return n.button===0&&(!e||e==="_self")&&!BO(n)}function $w(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let s=n[t];return e.concat(Array.isArray(s)?s.map(i=>[t,i]):[[t,s]])},[]))}function UO(n,e){let t=$w(n);return e&&e.forEach((s,i)=>{t.has(i)||e.getAll(i).forEach(r=>{t.append(i,r)})}),t}var db=null;function VO(){if(db===null)try{new FormData(document.createElement("form"),0),db=!1}catch{db=!0}return db}var WO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function W1(n){return n!=null&&!WO.has(n)?(mo(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Qb}"`),null):n}function GO(n,e){let t,s,i,r,o;if(zO(n)){let c=n.getAttribute("action");s=c?_d(c,e):null,t=n.getAttribute("method")||Zb,i=W1(n.getAttribute("enctype"))||Qb,r=new FormData(n)}else if(FO(n)||IO(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=n.getAttribute("formaction")||c.getAttribute("action");if(s=u?_d(u,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||Zb,i=W1(n.getAttribute("formenctype"))||W1(c.getAttribute("enctype"))||Qb,r=new FormData(c,n),!VO()){let{name:h,type:f,value:g}=n;if(f==="image"){let x=h?`${h}.`:"";r.append(`${x}x`,"0"),r.append(`${x}y`,"0")}else h&&r.append(h,g)}}else{if(Jy(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Zb,s=null,i=Qb,o=n}return r&&i==="text/plain"&&(o=r,r=void 0),{action:s,method:t.toLowerCase(),encType:i,formData:r,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function mS(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function YO(n,e,t,s){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${s}`:i.pathname=`${i.pathname}.${s}`:i.pathname==="/"?i.pathname=`_root.${s}`:e&&_d(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${s}`,i}async function XO(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function KO(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function ZO(n,e,t){let s=await Promise.all(n.map(async i=>{let r=e.routes[i.route.id];if(r){let o=await XO(r,t);return o.links?o.links():[]}return[]}));return $O(s.flat(1).filter(KO).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function QC(n,e,t,s,i,r){let o=(u,h)=>t[h]?u.route.id!==t[h].route.id:!0,c=(u,h)=>t[h].pathname!==u.pathname||t[h].route.path?.endsWith("*")&&t[h].params["*"]!==u.params["*"];return r==="assets"?e.filter((u,h)=>o(u,h)||c(u,h)):r==="data"?e.filter((u,h)=>{let f=s.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(o(u,h)||c(u,h))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function QO(n,e,{includeHydrateFallback:t}={}){return JO(n.map(s=>{let i=e.routes[s.route.id];if(!i)return[];let r=[i.module];return i.clientActionModule&&(r=r.concat(i.clientActionModule)),i.clientLoaderModule&&(r=r.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(r=r.concat(i.hydrateFallbackModule)),i.imports&&(r=r.concat(i.imports)),r}).flat(1))}function JO(n){return[...new Set(n)]}function qO(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function $O(n,e){let t=new Set;return new Set(e),n.reduce((s,i)=>{let r=JSON.stringify(qO(i));return t.has(r)||(t.add(r),s.push({key:r,link:i})),s},[])}function Xk(){let n=_.useContext(ig);return mS(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function e6(){let n=_.useContext(Qy);return mS(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var gS=_.createContext(void 0);gS.displayName="FrameworkContext";function Kk(){let n=_.useContext(gS);return mS(n,"You must render this element inside a <HydratedRouter> element"),n}function t6(n,e){let t=_.useContext(gS),[s,i]=_.useState(!1),[r,o]=_.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:h,onMouseLeave:f,onTouchStart:g}=e,x=_.useRef(null);_.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let j=A=>{A.forEach(R=>{o(R.isIntersecting)})},E=new IntersectionObserver(j,{threshold:.5});return x.current&&E.observe(x.current),()=>{E.disconnect()}}},[n]),_.useEffect(()=>{if(s){let j=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(j)}}},[s]);let y=()=>{i(!0)},N=()=>{i(!1),o(!1)};return t?n!=="intent"?[r,x,{}]:[r,x,{onFocus:jp(c,y),onBlur:jp(u,N),onMouseEnter:jp(h,y),onMouseLeave:jp(f,N),onTouchStart:jp(g,y)}]:[!1,x,{}]}function jp(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function n6({page:n,...e}){let{router:t}=Xk(),s=_.useMemo(()=>Mk(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?_.createElement(i6,{page:n,matches:s,...e}):null}function s6(n){let{manifest:e,routeModules:t}=Kk(),[s,i]=_.useState([]);return _.useEffect(()=>{let r=!1;return ZO(n,e,t).then(o=>{r||i(o)}),()=>{r=!0}},[n,e,t]),s}function i6({page:n,matches:e,...t}){let s=kr(),{future:i,manifest:r,routeModules:o}=Kk(),{basename:c}=Xk(),{loaderData:u,matches:h}=e6(),f=_.useMemo(()=>QC(n,e,h,r,s,"data"),[n,e,h,r,s]),g=_.useMemo(()=>QC(n,e,h,r,s,"assets"),[n,e,h,r,s]),x=_.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let j=new Set,E=!1;if(e.forEach(R=>{let M=r.routes[R.route.id];!M||!M.hasLoader||(!f.some(L=>L.route.id===R.route.id)&&R.route.id in u&&o[R.route.id]?.shouldRevalidate||M.hasClientLoader?E=!0:j.add(R.route.id))}),j.size===0)return[];let A=YO(n,c,i.unstable_trailingSlashAwareDataRequests,"data");return E&&j.size>0&&A.searchParams.set("_routes",e.filter(R=>j.has(R.route.id)).map(R=>R.route.id).join(",")),[A.pathname+A.search]},[c,i.unstable_trailingSlashAwareDataRequests,u,s,r,f,e,n,o]),y=_.useMemo(()=>QO(g,r),[g,r]),N=s6(g);return _.createElement(_.Fragment,null,x.map(j=>_.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...t})),y.map(j=>_.createElement("link",{key:j,rel:"modulepreload",href:j,...t})),N.map(({key:j,link:E})=>_.createElement("link",{key:j,nonce:t.nonce,...E})))}function a6(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var r6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{r6&&(window.__reactRouterVersion="7.12.0")}catch{}function o6({basename:n,children:e,unstable_useTransitions:t,window:s}){let i=_.useRef();i.current==null&&(i.current=z4({window:s,v5Compat:!0}));let r=i.current,[o,c]=_.useState({action:r.action,location:r.location}),u=_.useCallback(h=>{t===!1?c(h):_.startTransition(()=>c(h))},[t]);return _.useLayoutEffect(()=>r.listen(u),[r,u]),_.createElement(OO,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:r,unstable_useTransitions:t})}var Zk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tn=_.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:i,reloadDocument:r,replace:o,state:c,target:u,to:h,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:x,...y},N){let{basename:j,unstable_useTransitions:E}=_.useContext(po),A=typeof h=="string"&&Zk.test(h),R=zk(h,j);h=R.to;let M=bO(h,{relative:i}),[L,z,W]=t6(s,y),I=d6(h,{replace:o,state:c,target:u,preventScrollReset:f,relative:i,viewTransition:g,unstable_defaultShouldRevalidate:x,unstable_useTransitions:E});function Y(Z){e&&e(Z),Z.defaultPrevented||I(Z)}let U=_.createElement("a",{...y,...W,href:R.absoluteURL||M,onClick:R.isExternal||r?e:Y,ref:a6(N,z),target:u,"data-discover":!A&&t==="render"?"true":void 0});return L&&!A?_.createElement(_.Fragment,null,U,_.createElement(n6,{page:M})):U});tn.displayName="Link";var Qk=_.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:i=!1,style:r,to:o,viewTransition:c,children:u,...h},f){let g=U0(o,{relative:h.relative}),x=kr(),y=_.useContext(Qy),{navigator:N,basename:j}=_.useContext(po),E=y!=null&&g6(g)&&c===!0,A=N.encodeLocation?N.encodeLocation(g).pathname:g.pathname,R=x.pathname,M=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;t||(R=R.toLowerCase(),M=M?M.toLowerCase():null,A=A.toLowerCase()),M&&j&&(M=_d(M,j)||M);const L=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let z=R===A||!i&&R.startsWith(A)&&R.charAt(L)==="/",W=M!=null&&(M===A||!i&&M.startsWith(A)&&M.charAt(A.length)==="/"),I={isActive:z,isPending:W,isTransitioning:E},Y=z?e:void 0,U;typeof s=="function"?U=s(I):U=[s,z?"active":null,W?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let Z=typeof r=="function"?r(I):r;return _.createElement(tn,{...h,"aria-current":Y,className:U,ref:f,style:Z,to:o,viewTransition:c},typeof u=="function"?u(I):u)});Qk.displayName="NavLink";var l6=_.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:i,state:r,method:o=Zb,action:c,onSubmit:u,relative:h,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:x,...y},N)=>{let{unstable_useTransitions:j}=_.useContext(po),E=f6(),A=m6(c,{relative:h}),R=o.toLowerCase()==="get"?"get":"post",M=typeof c=="string"&&Zk.test(c),L=z=>{if(u&&u(z),z.defaultPrevented)return;z.preventDefault();let W=z.nativeEvent.submitter,I=W?.getAttribute("formmethod")||o,Y=()=>E(W||z.currentTarget,{fetcherKey:e,method:I,navigate:t,replace:i,state:r,relative:h,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:x});j&&t!==!1?_.startTransition(()=>Y()):Y()};return _.createElement("form",{ref:N,method:R,action:A,onSubmit:s?u:L,...y,"data-discover":!M&&n==="render"?"true":void 0})});l6.displayName="Form";function c6(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jk(n){let e=_.useContext(ig);return Ps(e,c6(n)),e}function d6(n,{target:e,replace:t,state:s,preventScrollReset:i,relative:r,viewTransition:o,unstable_defaultShouldRevalidate:c,unstable_useTransitions:u}={}){let h=ts(),f=kr(),g=U0(n,{relative:r});return _.useCallback(x=>{if(HO(x,e)){x.preventDefault();let y=t!==void 0?t:g0(f)===g0(g),N=()=>h(n,{replace:y,state:s,preventScrollReset:i,relative:r,viewTransition:o,unstable_defaultShouldRevalidate:c});u?_.startTransition(()=>N()):N()}},[f,h,g,t,s,e,n,i,r,o,c,u])}function qy(n){mo(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=_.useRef($w(n)),t=_.useRef(!1),s=kr(),i=_.useMemo(()=>UO(s.search,t.current?null:e.current),[s.search]),r=ts(),o=_.useCallback((c,u)=>{const h=$w(typeof c=="function"?c(new URLSearchParams(i)):c);t.current=!0,r("?"+h,u)},[r,i]);return[i,o]}var u6=0,h6=()=>`__${String(++u6)}__`;function f6(){let{router:n}=Jk("useSubmit"),{basename:e}=_.useContext(po),t=DO(),s=n.fetch,i=n.navigate;return _.useCallback(async(r,o={})=>{let{action:c,method:u,encType:h,formData:f,body:g}=GO(r,e);if(o.navigate===!1){let x=o.fetcherKey||h6();await s(x,t,o.action||c,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:f,body:g,formMethod:o.method||u,formEncType:o.encType||h,flushSync:o.flushSync})}else await i(o.action||c,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:f,body:g,formMethod:o.method||u,formEncType:o.encType||h,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,i,e,t])}function m6(n,{relative:e}={}){let{basename:t}=_.useContext(po),s=_.useContext(Vo);Ps(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),r={...U0(n||".",{relative:e})},o=kr();if(n==null){r.search=o.search;let c=new URLSearchParams(r.search),u=c.getAll("index");if(u.some(f=>f==="")){c.delete("index"),u.filter(g=>g).forEach(g=>c.append("index",g));let f=c.toString();r.search=f?`?${f}`:""}}return(!n||n===".")&&i.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(r.pathname=r.pathname==="/"?t:Ad([t,r.pathname])),g0(r)}function g6(n,{relative:e}={}){let t=_.useContext(Bk);Ps(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Jk("useViewTransitionState"),i=U0(n,{relative:e});if(!t.isTransitioning)return!1;let r=_d(t.currentLocation.pathname,s)||t.currentLocation.pathname,o=_d(t.nextLocation.pathname,s)||t.nextLocation.pathname;return gy(i.pathname,o)!=null||gy(i.pathname,r)!=null}var sf=Zy();const p6=ng(sf);var G1,JC;function x6(){if(JC)return G1;JC=1;var n=typeof Element<"u",e=typeof Map=="function",t=typeof Set=="function",s=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function i(r,o){if(r===o)return!0;if(r&&o&&typeof r=="object"&&typeof o=="object"){if(r.constructor!==o.constructor)return!1;var c,u,h;if(Array.isArray(r)){if(c=r.length,c!=o.length)return!1;for(u=c;u--!==0;)if(!i(r[u],o[u]))return!1;return!0}var f;if(e&&r instanceof Map&&o instanceof Map){if(r.size!==o.size)return!1;for(f=r.entries();!(u=f.next()).done;)if(!o.has(u.value[0]))return!1;for(f=r.entries();!(u=f.next()).done;)if(!i(u.value[1],o.get(u.value[0])))return!1;return!0}if(t&&r instanceof Set&&o instanceof Set){if(r.size!==o.size)return!1;for(f=r.entries();!(u=f.next()).done;)if(!o.has(u.value[0]))return!1;return!0}if(s&&ArrayBuffer.isView(r)&&ArrayBuffer.isView(o)){if(c=r.length,c!=o.length)return!1;for(u=c;u--!==0;)if(r[u]!==o[u])return!1;return!0}if(r.constructor===RegExp)return r.source===o.source&&r.flags===o.flags;if(r.valueOf!==Object.prototype.valueOf&&typeof r.valueOf=="function"&&typeof o.valueOf=="function")return r.valueOf()===o.valueOf();if(r.toString!==Object.prototype.toString&&typeof r.toString=="function"&&typeof o.toString=="function")return r.toString()===o.toString();if(h=Object.keys(r),c=h.length,c!==Object.keys(o).length)return!1;for(u=c;u--!==0;)if(!Object.prototype.hasOwnProperty.call(o,h[u]))return!1;if(n&&r instanceof Element)return!1;for(u=c;u--!==0;)if(!((h[u]==="_owner"||h[u]==="__v"||h[u]==="__o")&&r.$$typeof)&&!i(r[h[u]],o[h[u]]))return!1;return!0}return r!==r&&o!==o}return G1=function(o,c){try{return i(o,c)}catch(u){if((u.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw u}},G1}var b6=x6();const y6=ng(b6);var Y1,qC;function v6(){if(qC)return Y1;qC=1;var n=function(e,t,s,i,r,o,c,u){if(!e){var h;if(t===void 0)h=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[s,i,r,o,c,u],g=0;h=new Error(t.replace(/%s/g,function(){return f[g++]})),h.name="Invariant Violation"}throw h.framesToPop=1,h}};return Y1=n,Y1}var w6=v6();const $C=ng(w6);var X1,eA;function S6(){return eA||(eA=1,X1=function(e,t,s,i){var r=s?s.call(i,e,t):void 0;if(r!==void 0)return!!r;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var o=Object.keys(e),c=Object.keys(t);if(o.length!==c.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(t),h=0;h<o.length;h++){var f=o[h];if(!u(f))return!1;var g=e[f],x=t[f];if(r=s?s.call(i,g,x,f):void 0,r===!1||r===void 0&&g!==x)return!1}return!0}),X1}var N6=S6();const j6=ng(N6);var qk=(n=>(n.BASE="base",n.BODY="body",n.HEAD="head",n.HTML="html",n.LINK="link",n.META="meta",n.NOSCRIPT="noscript",n.SCRIPT="script",n.STYLE="style",n.TITLE="title",n.FRAGMENT="Symbol(react.fragment)",n))(qk||{}),K1={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},tA=Object.values(qk),pS={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},C6=Object.entries(pS).reduce((n,[e,t])=>(n[t]=e,n),{}),Al="data-rh",Dm={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Rm=(n,e)=>{for(let t=n.length-1;t>=0;t-=1){const s=n[t];if(Object.prototype.hasOwnProperty.call(s,e))return s[e]}return null},A6=n=>{let e=Rm(n,"title");const t=Rm(n,Dm.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),t&&e)return t.replace(/%s/g,()=>e);const s=Rm(n,Dm.DEFAULT_TITLE);return e||s||void 0},E6=n=>Rm(n,Dm.ON_CHANGE_CLIENT_STATE)||(()=>{}),Z1=(n,e)=>e.filter(t=>typeof t[n]<"u").map(t=>t[n]).reduce((t,s)=>({...t,...s}),{}),_6=(n,e)=>e.filter(t=>typeof t.base<"u").map(t=>t.base).reverse().reduce((t,s)=>{if(!t.length){const i=Object.keys(s);for(let r=0;r<i.length;r+=1){const c=i[r].toLowerCase();if(n.indexOf(c)!==-1&&s[c])return t.concat(s)}}return t},[]),T6=n=>console&&typeof console.warn=="function"&&console.warn(n),Cp=(n,e,t)=>{const s={};return t.filter(i=>Array.isArray(i[n])?!0:(typeof i[n]<"u"&&T6(`Helmet: ${n} should be of type "Array". Instead found type "${typeof i[n]}"`),!1)).map(i=>i[n]).reverse().reduce((i,r)=>{const o={};r.filter(u=>{let h;const f=Object.keys(u);for(let x=0;x<f.length;x+=1){const y=f[x],N=y.toLowerCase();e.indexOf(N)!==-1&&!(h==="rel"&&u[h].toLowerCase()==="canonical")&&!(N==="rel"&&u[N].toLowerCase()==="stylesheet")&&(h=N),e.indexOf(y)!==-1&&(y==="innerHTML"||y==="cssText"||y==="itemprop")&&(h=y)}if(!h||!u[h])return!1;const g=u[h].toLowerCase();return s[h]||(s[h]={}),o[h]||(o[h]={}),s[h][g]?!1:(o[h][g]=!0,!0)}).reverse().forEach(u=>i.push(u));const c=Object.keys(o);for(let u=0;u<c.length;u+=1){const h=c[u],f={...s[h],...o[h]};s[h]=f}return i},[]).reverse()},k6=(n,e)=>{if(Array.isArray(n)&&n.length){for(let t=0;t<n.length;t+=1)if(n[t][e])return!0}return!1},D6=n=>({baseTag:_6(["href"],n),bodyAttributes:Z1("bodyAttributes",n),defer:Rm(n,Dm.DEFER),encode:Rm(n,Dm.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Z1("htmlAttributes",n),linkTags:Cp("link",["rel","href"],n),metaTags:Cp("meta",["name","charset","http-equiv","property","itemprop"],n),noscriptTags:Cp("noscript",["innerHTML"],n),onChangeClientState:E6(n),scriptTags:Cp("script",["src","innerHTML"],n),styleTags:Cp("style",["cssText"],n),title:A6(n),titleAttributes:Z1("titleAttributes",n),prioritizeSeoTags:k6(n,Dm.PRIORITIZE_SEO_TAGS)}),$k=n=>Array.isArray(n)?n.join(""):n,R6=(n,e)=>{const t=Object.keys(n);for(let s=0;s<t.length;s+=1)if(e[t[s]]&&e[t[s]].includes(n[t[s]]))return!0;return!1},Q1=(n,e)=>Array.isArray(n)?n.reduce((t,s)=>(R6(s,e)?t.priority.push(s):t.default.push(s),t),{priority:[],default:[]}):{default:n,priority:[]},nA=(n,e)=>({...n,[e]:void 0}),M6=["noscript","script","style"],e2=(n,e=!0)=>e===!1?String(n):String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),eD=n=>Object.keys(n).reduce((e,t)=>{const s=typeof n[t]<"u"?`${t}="${n[t]}"`:`${t}`;return e?`${e} ${s}`:s},""),P6=(n,e,t,s)=>{const i=eD(t),r=$k(e);return i?`<${n} ${Al}="true" ${i}>${e2(r,s)}</${n}>`:`<${n} ${Al}="true">${e2(r,s)}</${n}>`},O6=(n,e,t=!0)=>e.reduce((s,i)=>{const r=i,o=Object.keys(r).filter(h=>!(h==="innerHTML"||h==="cssText")).reduce((h,f)=>{const g=typeof r[f]>"u"?f:`${f}="${e2(r[f],t)}"`;return h?`${h} ${g}`:g},""),c=r.innerHTML||r.cssText||"",u=M6.indexOf(n)===-1;return`${s}<${n} ${Al}="true" ${o}${u?"/>":`>${c}</${n}>`}`},""),tD=(n,e={})=>Object.keys(n).reduce((t,s)=>{const i=pS[s];return t[i||s]=n[s],t},e),L6=(n,e,t)=>{const s={key:e,[Al]:!0},i=tD(t,s);return[ht.createElement("title",i,e)]},Jb=(n,e)=>e.map((t,s)=>{const i={key:s,[Al]:!0};return Object.keys(t).forEach(r=>{const c=pS[r]||r;if(c==="innerHTML"||c==="cssText"){const u=t.innerHTML||t.cssText;i.dangerouslySetInnerHTML={__html:u}}else i[c]=t[r]}),ht.createElement(n,i)}),Fo=(n,e,t=!0)=>{switch(n){case"title":return{toComponent:()=>L6(n,e.title,e.titleAttributes),toString:()=>P6(n,e.title,e.titleAttributes,t)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>tD(e),toString:()=>eD(e)};default:return{toComponent:()=>Jb(n,e),toString:()=>O6(n,e,t)}}},F6=({metaTags:n,linkTags:e,scriptTags:t,encode:s})=>{const i=Q1(n,K1.meta),r=Q1(e,K1.link),o=Q1(t,K1.script);return{priorityMethods:{toComponent:()=>[...Jb("meta",i.priority),...Jb("link",r.priority),...Jb("script",o.priority)],toString:()=>`${Fo("meta",i.priority,s)} ${Fo("link",r.priority,s)} ${Fo("script",o.priority,s)}`},metaTags:i.default,linkTags:r.default,scriptTags:o.default}},z6=n=>{const{baseTag:e,bodyAttributes:t,encode:s=!0,htmlAttributes:i,noscriptTags:r,styleTags:o,title:c="",titleAttributes:u,prioritizeSeoTags:h}=n;let{linkTags:f,metaTags:g,scriptTags:x}=n,y={toComponent:()=>{},toString:()=>""};return h&&({priorityMethods:y,linkTags:f,metaTags:g,scriptTags:x}=F6(n)),{priority:y,base:Fo("base",e,s),bodyAttributes:Fo("bodyAttributes",t,s),htmlAttributes:Fo("htmlAttributes",i,s),link:Fo("link",f,s),meta:Fo("meta",g,s),noscript:Fo("noscript",r,s),script:Fo("script",x,s),style:Fo("style",o,s),title:Fo("title",{title:c,titleAttributes:u},s)}},t2=z6,ub=[],nD=!!(typeof window<"u"&&window.document&&window.document.createElement),n2=class{instances=[];canUseDOM=nD;context;value={setHelmet:n=>{this.context.helmet=n},helmetInstances:{get:()=>this.canUseDOM?ub:this.instances,add:n=>{(this.canUseDOM?ub:this.instances).push(n)},remove:n=>{const e=(this.canUseDOM?ub:this.instances).indexOf(n);(this.canUseDOM?ub:this.instances).splice(e,1)}}};constructor(n,e){this.context=n,this.canUseDOM=e||!1,e||(n.helmet=t2({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},I6={},sD=ht.createContext(I6),iD=class aD extends _.Component{static canUseDOM=nD;helmetData;constructor(e){super(e),this.helmetData=new n2(this.props.context||{},aD.canUseDOM)}render(){return ht.createElement(sD.Provider,{value:this.helmetData.value},this.props.children)}},gm=(n,e)=>{const t=document.head||document.querySelector("head"),s=t.querySelectorAll(`${n}[${Al}]`),i=[].slice.call(s),r=[];let o;return e&&e.length&&e.forEach(c=>{const u=document.createElement(n);for(const h in c)if(Object.prototype.hasOwnProperty.call(c,h))if(h==="innerHTML")u.innerHTML=c.innerHTML;else if(h==="cssText")u.styleSheet?u.styleSheet.cssText=c.cssText:u.appendChild(document.createTextNode(c.cssText));else{const f=h,g=typeof c[f]>"u"?"":c[f];u.setAttribute(h,g)}u.setAttribute(Al,"true"),i.some((h,f)=>(o=f,u.isEqualNode(h)))?i.splice(o,1):r.push(u)}),i.forEach(c=>c.parentNode?.removeChild(c)),r.forEach(c=>t.appendChild(c)),{oldTags:i,newTags:r}},s2=(n,e)=>{const t=document.getElementsByTagName(n)[0];if(!t)return;const s=t.getAttribute(Al),i=s?s.split(","):[],r=[...i],o=Object.keys(e);for(const c of o){const u=e[c]||"";t.getAttribute(c)!==u&&t.setAttribute(c,u),i.indexOf(c)===-1&&i.push(c);const h=r.indexOf(c);h!==-1&&r.splice(h,1)}for(let c=r.length-1;c>=0;c-=1)t.removeAttribute(r[c]);i.length===r.length?t.removeAttribute(Al):t.getAttribute(Al)!==o.join(",")&&t.setAttribute(Al,o.join(","))},B6=(n,e)=>{typeof n<"u"&&document.title!==n&&(document.title=$k(n)),s2("title",e)},sA=(n,e)=>{const{baseTag:t,bodyAttributes:s,htmlAttributes:i,linkTags:r,metaTags:o,noscriptTags:c,onChangeClientState:u,scriptTags:h,styleTags:f,title:g,titleAttributes:x}=n;s2("body",s),s2("html",i),B6(g,x);const y={baseTag:gm("base",t),linkTags:gm("link",r),metaTags:gm("meta",o),noscriptTags:gm("noscript",c),scriptTags:gm("script",h),styleTags:gm("style",f)},N={},j={};Object.keys(y).forEach(E=>{const{newTags:A,oldTags:R}=y[E];A.length&&(N[E]=A),R.length&&(j[E]=y[E].oldTags)}),e&&e(),u(n,N,j)},Ap=null,H6=n=>{Ap&&cancelAnimationFrame(Ap),n.defer?Ap=requestAnimationFrame(()=>{sA(n,()=>{Ap=null})}):(sA(n),Ap=null)},U6=H6,iA=class extends _.Component{rendered=!1;shouldComponentUpdate(n){return!j6(n,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:n}=this.props.context;n.remove(this),this.emitChange()}emitChange(){const{helmetInstances:n,setHelmet:e}=this.props.context;let t=null;const s=D6(n.get().map(i=>{const r={...i.props};return delete r.context,r}));iD.canUseDOM?U6(s):t2&&(t=t2(s)),e(t)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:n}=this.props.context;n.add(this),this.emitChange()}render(){return this.init(),null}},V6=class extends _.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(n){return!y6(nA(this.props,"helmetData"),nA(n,"helmetData"))}mapNestedChildrenToProps(n,e){if(!e)return null;switch(n.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${n.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(n,e,t,s){return{...e,[n.type]:[...e[n.type]||[],{...t,...this.mapNestedChildrenToProps(n,s)}]}}mapObjectTypeChildren(n,e,t,s){switch(n.type){case"title":return{...e,[n.type]:s,titleAttributes:{...t}};case"body":return{...e,bodyAttributes:{...t}};case"html":return{...e,htmlAttributes:{...t}};default:return{...e,[n.type]:{...t}}}}mapArrayTypeChildrenToProps(n,e){let t={...e};return Object.keys(n).forEach(s=>{t={...t,[s]:n[s]}}),t}warnOnInvalidChildren(n,e){return $C(tA.some(t=>n.type===t),typeof n.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${tA.join(", ")} are allowed. Helmet does not support rendering <${n.type}> elements. Refer to our API for more information.`),$C(!e||typeof e=="string"||Array.isArray(e)&&!e.some(t=>typeof t!="string"),`Helmet expects a string as a child of <${n.type}>. Did you forget to wrap your children in braces? ( <${n.type}>{\`\`}</${n.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(n,e){let t={};return ht.Children.forEach(n,s=>{if(!s||!s.props)return;const{children:i,...r}=s.props,o=Object.keys(r).reduce((u,h)=>(u[C6[h]||h]=r[h],u),{});let{type:c}=s;switch(typeof c=="symbol"?c=c.toString():this.warnOnInvalidChildren(s,i),c){case"Symbol(react.fragment)":e=this.mapChildrenToProps(i,e);break;case"link":case"meta":case"noscript":case"script":case"style":t=this.flattenArrayTypeChildren(s,t,o,i);break;default:e=this.mapObjectTypeChildren(s,e,o,i);break}}),this.mapArrayTypeChildrenToProps(t,e)}render(){const{children:n,...e}=this.props;let t={...e},{helmetData:s}=e;if(n&&(t=this.mapChildrenToProps(n,t)),s&&!(s instanceof n2)){const i=s;s=new n2(i.context,!0),delete t.helmetData}return s?ht.createElement(iA,{...t,context:s.value}):ht.createElement(sD.Consumer,null,i=>ht.createElement(iA,{...t,context:i}))}};function rD(n,e){return function(){return n.apply(e,arguments)}}const{toString:W6}=Object.prototype,{getPrototypeOf:xS}=Object,{iterator:$y,toStringTag:oD}=Symbol,ev=(n=>e=>{const t=W6.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Il=n=>(n=n.toLowerCase(),e=>ev(e)===n),tv=n=>e=>typeof e===n,{isArray:rg}=Array,Wm=tv("undefined");function W0(n){return n!==null&&!Wm(n)&&n.constructor!==null&&!Wm(n.constructor)&&Cr(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const lD=Il("ArrayBuffer");function G6(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&lD(n.buffer),e}const Y6=tv("string"),Cr=tv("function"),cD=tv("number"),G0=n=>n!==null&&typeof n=="object",X6=n=>n===!0||n===!1,qb=n=>{if(ev(n)!=="object")return!1;const e=xS(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(oD in n)&&!($y in n)},K6=n=>{if(!G0(n)||W0(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},Z6=Il("Date"),Q6=Il("File"),J6=Il("Blob"),q6=Il("FileList"),$6=n=>G0(n)&&Cr(n.pipe),eL=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Cr(n.append)&&((e=ev(n))==="formdata"||e==="object"&&Cr(n.toString)&&n.toString()==="[object FormData]"))},tL=Il("URLSearchParams"),[nL,sL,iL,aL]=["ReadableStream","Request","Response","Headers"].map(Il),rL=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Y0(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let s,i;if(typeof n!="object"&&(n=[n]),rg(n))for(s=0,i=n.length;s<i;s++)e.call(null,n[s],s,n);else{if(W0(n))return;const r=t?Object.getOwnPropertyNames(n):Object.keys(n),o=r.length;let c;for(s=0;s<o;s++)c=r[s],e.call(null,n[c],c,n)}}function dD(n,e){if(W0(n))return null;e=e.toLowerCase();const t=Object.keys(n);let s=t.length,i;for(;s-- >0;)if(i=t[s],e===i.toLowerCase())return i;return null}const af=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,uD=n=>!Wm(n)&&n!==af;function i2(){const{caseless:n,skipUndefined:e}=uD(this)&&this||{},t={},s=(i,r)=>{const o=n&&dD(t,r)||r;qb(t[o])&&qb(i)?t[o]=i2(t[o],i):qb(i)?t[o]=i2({},i):rg(i)?t[o]=i.slice():(!e||!Wm(i))&&(t[o]=i)};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&Y0(arguments[i],s);return t}const oL=(n,e,t,{allOwnKeys:s}={})=>(Y0(e,(i,r)=>{t&&Cr(i)?n[r]=rD(i,t):n[r]=i},{allOwnKeys:s}),n),lL=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),cL=(n,e,t,s)=>{n.prototype=Object.create(e.prototype,s),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},dL=(n,e,t,s)=>{let i,r,o;const c={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),r=i.length;r-- >0;)o=i[r],(!s||s(o,n,e))&&!c[o]&&(e[o]=n[o],c[o]=!0);n=t!==!1&&xS(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},uL=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const s=n.indexOf(e,t);return s!==-1&&s===t},hL=n=>{if(!n)return null;if(rg(n))return n;let e=n.length;if(!cD(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},fL=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&xS(Uint8Array)),mL=(n,e)=>{const s=(n&&n[$y]).call(n);let i;for(;(i=s.next())&&!i.done;){const r=i.value;e.call(n,r[0],r[1])}},gL=(n,e)=>{let t;const s=[];for(;(t=n.exec(e))!==null;)s.push(t);return s},pL=Il("HTMLFormElement"),xL=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,s,i){return s.toUpperCase()+i}),aA=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),bL=Il("RegExp"),hD=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),s={};Y0(t,(i,r)=>{let o;(o=e(i,r,n))!==!1&&(s[r]=o||i)}),Object.defineProperties(n,s)},yL=n=>{hD(n,(e,t)=>{if(Cr(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const s=n[t];if(Cr(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},vL=(n,e)=>{const t={},s=i=>{i.forEach(r=>{t[r]=!0})};return rg(n)?s(n):s(String(n).split(e)),t},wL=()=>{},SL=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function NL(n){return!!(n&&Cr(n.append)&&n[oD]==="FormData"&&n[$y])}const jL=n=>{const e=new Array(10),t=(s,i)=>{if(G0(s)){if(e.indexOf(s)>=0)return;if(W0(s))return s;if(!("toJSON"in s)){e[i]=s;const r=rg(s)?[]:{};return Y0(s,(o,c)=>{const u=t(o,i+1);!Wm(u)&&(r[c]=u)}),e[i]=void 0,r}}return s};return t(n,0)},CL=Il("AsyncFunction"),AL=n=>n&&(G0(n)||Cr(n))&&Cr(n.then)&&Cr(n.catch),fD=((n,e)=>n?setImmediate:e?((t,s)=>(af.addEventListener("message",({source:i,data:r})=>{i===af&&r===t&&s.length&&s.shift()()},!1),i=>{s.push(i),af.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Cr(af.postMessage)),EL=typeof queueMicrotask<"u"?queueMicrotask.bind(af):typeof process<"u"&&process.nextTick||fD,_L=n=>n!=null&&Cr(n[$y]),Re={isArray:rg,isArrayBuffer:lD,isBuffer:W0,isFormData:eL,isArrayBufferView:G6,isString:Y6,isNumber:cD,isBoolean:X6,isObject:G0,isPlainObject:qb,isEmptyObject:K6,isReadableStream:nL,isRequest:sL,isResponse:iL,isHeaders:aL,isUndefined:Wm,isDate:Z6,isFile:Q6,isBlob:J6,isRegExp:bL,isFunction:Cr,isStream:$6,isURLSearchParams:tL,isTypedArray:fL,isFileList:q6,forEach:Y0,merge:i2,extend:oL,trim:rL,stripBOM:lL,inherits:cL,toFlatObject:dL,kindOf:ev,kindOfTest:Il,endsWith:uL,toArray:hL,forEachEntry:mL,matchAll:gL,isHTMLForm:pL,hasOwnProperty:aA,hasOwnProp:aA,reduceDescriptors:hD,freezeMethods:yL,toObjectSet:vL,toCamelCase:xL,noop:wL,toFiniteNumber:SL,findKey:dD,global:af,isContextDefined:uD,isSpecCompliantForm:NL,toJSONObject:jL,isAsyncFn:CL,isThenable:AL,setImmediate:fD,asap:EL,isIterable:_L};function nn(n,e,t,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}Re.inherits(nn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Re.toJSONObject(this.config),code:this.code,status:this.status}}});const mD=nn.prototype,gD={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{gD[n]={value:n}});Object.defineProperties(nn,gD);Object.defineProperty(mD,"isAxiosError",{value:!0});nn.from=(n,e,t,s,i,r)=>{const o=Object.create(mD);Re.toFlatObject(n,o,function(f){return f!==Error.prototype},h=>h!=="isAxiosError");const c=n&&n.message?n.message:"Error",u=e==null&&n?n.code:e;return nn.call(o,c,u,t,s,i),n&&o.cause==null&&Object.defineProperty(o,"cause",{value:n,configurable:!0}),o.name=n&&n.name||"Error",r&&Object.assign(o,r),o};const TL=null;function a2(n){return Re.isPlainObject(n)||Re.isArray(n)}function pD(n){return Re.endsWith(n,"[]")?n.slice(0,-2):n}function rA(n,e,t){return n?n.concat(e).map(function(i,r){return i=pD(i),!t&&r?"["+i+"]":i}).join(t?".":""):e}function kL(n){return Re.isArray(n)&&!n.some(a2)}const DL=Re.toFlatObject(Re,{},null,function(e){return/^is[A-Z]/.test(e)});function nv(n,e,t){if(!Re.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=Re.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,E){return!Re.isUndefined(E[j])});const s=t.metaTokens,i=t.visitor||f,r=t.dots,o=t.indexes,u=(t.Blob||typeof Blob<"u"&&Blob)&&Re.isSpecCompliantForm(e);if(!Re.isFunction(i))throw new TypeError("visitor must be a function");function h(N){if(N===null)return"";if(Re.isDate(N))return N.toISOString();if(Re.isBoolean(N))return N.toString();if(!u&&Re.isBlob(N))throw new nn("Blob is not supported. Use a Buffer instead.");return Re.isArrayBuffer(N)||Re.isTypedArray(N)?u&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function f(N,j,E){let A=N;if(N&&!E&&typeof N=="object"){if(Re.endsWith(j,"{}"))j=s?j:j.slice(0,-2),N=JSON.stringify(N);else if(Re.isArray(N)&&kL(N)||(Re.isFileList(N)||Re.endsWith(j,"[]"))&&(A=Re.toArray(N)))return j=pD(j),A.forEach(function(M,L){!(Re.isUndefined(M)||M===null)&&e.append(o===!0?rA([j],L,r):o===null?j:j+"[]",h(M))}),!1}return a2(N)?!0:(e.append(rA(E,j,r),h(N)),!1)}const g=[],x=Object.assign(DL,{defaultVisitor:f,convertValue:h,isVisitable:a2});function y(N,j){if(!Re.isUndefined(N)){if(g.indexOf(N)!==-1)throw Error("Circular reference detected in "+j.join("."));g.push(N),Re.forEach(N,function(A,R){(!(Re.isUndefined(A)||A===null)&&i.call(e,A,Re.isString(R)?R.trim():R,j,x))===!0&&y(A,j?j.concat(R):[R])}),g.pop()}}if(!Re.isObject(n))throw new TypeError("data must be an object");return y(n),e}function oA(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function bS(n,e){this._pairs=[],n&&nv(n,this,e)}const xD=bS.prototype;xD.append=function(e,t){this._pairs.push([e,t])};xD.toString=function(e){const t=e?function(s){return e.call(this,s,oA)}:oA;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function RL(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function bD(n,e,t){if(!e)return n;const s=t&&t.encode||RL;Re.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let r;if(i?r=i(e,t):r=Re.isURLSearchParams(e)?e.toString():new bS(e,t).toString(s),r){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+r}return n}class lA{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Re.forEach(this.handlers,function(s){s!==null&&e(s)})}}const yD={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ML=typeof URLSearchParams<"u"?URLSearchParams:bS,PL=typeof FormData<"u"?FormData:null,OL=typeof Blob<"u"?Blob:null,LL={isBrowser:!0,classes:{URLSearchParams:ML,FormData:PL,Blob:OL},protocols:["http","https","file","blob","url","data"]},yS=typeof window<"u"&&typeof document<"u",r2=typeof navigator=="object"&&navigator||void 0,FL=yS&&(!r2||["ReactNative","NativeScript","NS"].indexOf(r2.product)<0),zL=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",IL=yS&&window.location.href||"http://localhost",BL=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:yS,hasStandardBrowserEnv:FL,hasStandardBrowserWebWorkerEnv:zL,navigator:r2,origin:IL},Symbol.toStringTag,{value:"Module"})),Oa={...BL,...LL};function HL(n,e){return nv(n,new Oa.classes.URLSearchParams,{visitor:function(t,s,i,r){return Oa.isNode&&Re.isBuffer(t)?(this.append(s,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...e})}function UL(n){return Re.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function VL(n){const e={},t=Object.keys(n);let s;const i=t.length;let r;for(s=0;s<i;s++)r=t[s],e[r]=n[r];return e}function vD(n){function e(t,s,i,r){let o=t[r++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),u=r>=t.length;return o=!o&&Re.isArray(i)?i.length:o,u?(Re.hasOwnProp(i,o)?i[o]=[i[o],s]:i[o]=s,!c):((!i[o]||!Re.isObject(i[o]))&&(i[o]=[]),e(t,s,i[o],r)&&Re.isArray(i[o])&&(i[o]=VL(i[o])),!c)}if(Re.isFormData(n)&&Re.isFunction(n.entries)){const t={};return Re.forEachEntry(n,(s,i)=>{e(UL(s),i,t,0)}),t}return null}function WL(n,e,t){if(Re.isString(n))try{return(e||JSON.parse)(n),Re.trim(n)}catch(s){if(s.name!=="SyntaxError")throw s}return(t||JSON.stringify)(n)}const X0={transitional:yD,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",i=s.indexOf("application/json")>-1,r=Re.isObject(e);if(r&&Re.isHTMLForm(e)&&(e=new FormData(e)),Re.isFormData(e))return i?JSON.stringify(vD(e)):e;if(Re.isArrayBuffer(e)||Re.isBuffer(e)||Re.isStream(e)||Re.isFile(e)||Re.isBlob(e)||Re.isReadableStream(e))return e;if(Re.isArrayBufferView(e))return e.buffer;if(Re.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return HL(e,this.formSerializer).toString();if((c=Re.isFileList(e))||s.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return nv(c?{"files[]":e}:e,u&&new u,this.formSerializer)}}return r||i?(t.setContentType("application/json",!1),WL(e)):e}],transformResponse:[function(e){const t=this.transitional||X0.transitional,s=t&&t.forcedJSONParsing,i=this.responseType==="json";if(Re.isResponse(e)||Re.isReadableStream(e))return e;if(e&&Re.isString(e)&&(s&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?nn.from(c,nn.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Oa.classes.FormData,Blob:Oa.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Re.forEach(["delete","get","head","post","put","patch"],n=>{X0.headers[n]={}});const GL=Re.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),YL=n=>{const e={};let t,s,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),s=o.substring(i+1).trim(),!(!t||e[t]&&GL[t])&&(t==="set-cookie"?e[t]?e[t].push(s):e[t]=[s]:e[t]=e[t]?e[t]+", "+s:s)}),e},cA=Symbol("internals");function Ep(n){return n&&String(n).trim().toLowerCase()}function $b(n){return n===!1||n==null?n:Re.isArray(n)?n.map($b):String(n)}function XL(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=t.exec(n);)e[s[1]]=s[2];return e}const KL=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function J1(n,e,t,s,i){if(Re.isFunction(s))return s.call(this,e,t);if(i&&(e=t),!!Re.isString(e)){if(Re.isString(s))return e.indexOf(s)!==-1;if(Re.isRegExp(s))return s.test(e)}}function ZL(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}function QL(n,e){const t=Re.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(n,s+t,{value:function(i,r,o){return this[s].call(this,e,i,r,o)},configurable:!0})})}let Ar=class{constructor(e){e&&this.set(e)}set(e,t,s){const i=this;function r(c,u,h){const f=Ep(u);if(!f)throw new Error("header name must be a non-empty string");const g=Re.findKey(i,f);(!g||i[g]===void 0||h===!0||h===void 0&&i[g]!==!1)&&(i[g||u]=$b(c))}const o=(c,u)=>Re.forEach(c,(h,f)=>r(h,f,u));if(Re.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(Re.isString(e)&&(e=e.trim())&&!KL(e))o(YL(e),t);else if(Re.isObject(e)&&Re.isIterable(e)){let c={},u,h;for(const f of e){if(!Re.isArray(f))throw TypeError("Object iterator must return a key-value pair");c[h=f[0]]=(u=c[h])?Re.isArray(u)?[...u,f[1]]:[u,f[1]]:f[1]}o(c,t)}else e!=null&&r(t,e,s);return this}get(e,t){if(e=Ep(e),e){const s=Re.findKey(this,e);if(s){const i=this[s];if(!t)return i;if(t===!0)return XL(i);if(Re.isFunction(t))return t.call(this,i,s);if(Re.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ep(e),e){const s=Re.findKey(this,e);return!!(s&&this[s]!==void 0&&(!t||J1(this,this[s],s,t)))}return!1}delete(e,t){const s=this;let i=!1;function r(o){if(o=Ep(o),o){const c=Re.findKey(s,o);c&&(!t||J1(s,s[c],c,t))&&(delete s[c],i=!0)}}return Re.isArray(e)?e.forEach(r):r(e),i}clear(e){const t=Object.keys(this);let s=t.length,i=!1;for(;s--;){const r=t[s];(!e||J1(this,this[r],r,e,!0))&&(delete this[r],i=!0)}return i}normalize(e){const t=this,s={};return Re.forEach(this,(i,r)=>{const o=Re.findKey(s,r);if(o){t[o]=$b(i),delete t[r];return}const c=e?ZL(r):String(r).trim();c!==r&&delete t[r],t[c]=$b(i),s[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Re.forEach(this,(s,i)=>{s!=null&&s!==!1&&(t[i]=e&&Re.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach(i=>s.set(i)),s}static accessor(e){const s=(this[cA]=this[cA]={accessors:{}}).accessors,i=this.prototype;function r(o){const c=Ep(o);s[c]||(QL(i,o),s[c]=!0)}return Re.isArray(e)?e.forEach(r):r(e),this}};Ar.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Re.reduceDescriptors(Ar.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(s){this[t]=s}}});Re.freezeMethods(Ar);function q1(n,e){const t=this||X0,s=e||t,i=Ar.from(s.headers);let r=s.data;return Re.forEach(n,function(c){r=c.call(t,r,i.normalize(),e?e.status:void 0)}),i.normalize(),r}function wD(n){return!!(n&&n.__CANCEL__)}function og(n,e,t){nn.call(this,n??"canceled",nn.ERR_CANCELED,e,t),this.name="CanceledError"}Re.inherits(og,nn,{__CANCEL__:!0});function SD(n,e,t){const s=t.config.validateStatus;!t.status||!s||s(t.status)?n(t):e(new nn("Request failed with status code "+t.status,[nn.ERR_BAD_REQUEST,nn.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function JL(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function qL(n,e){n=n||10;const t=new Array(n),s=new Array(n);let i=0,r=0,o;return e=e!==void 0?e:1e3,function(u){const h=Date.now(),f=s[r];o||(o=h),t[i]=u,s[i]=h;let g=r,x=0;for(;g!==i;)x+=t[g++],g=g%n;if(i=(i+1)%n,i===r&&(r=(r+1)%n),h-o<e)return;const y=f&&h-f;return y?Math.round(x*1e3/y):void 0}}function $L(n,e){let t=0,s=1e3/e,i,r;const o=(h,f=Date.now())=>{t=f,i=null,r&&(clearTimeout(r),r=null),n(...h)};return[(...h)=>{const f=Date.now(),g=f-t;g>=s?o(h,f):(i=h,r||(r=setTimeout(()=>{r=null,o(i)},s-g)))},()=>i&&o(i)]}const py=(n,e,t=3)=>{let s=0;const i=qL(50,250);return $L(r=>{const o=r.loaded,c=r.lengthComputable?r.total:void 0,u=o-s,h=i(u),f=o<=c;s=o;const g={loaded:o,total:c,progress:c?o/c:void 0,bytes:u,rate:h||void 0,estimated:h&&c&&f?(c-o)/h:void 0,event:r,lengthComputable:c!=null,[e?"download":"upload"]:!0};n(g)},t)},dA=(n,e)=>{const t=n!=null;return[s=>e[0]({lengthComputable:t,total:n,loaded:s}),e[1]]},uA=n=>(...e)=>Re.asap(()=>n(...e)),eF=Oa.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Oa.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Oa.origin),Oa.navigator&&/(msie|trident)/i.test(Oa.navigator.userAgent)):()=>!0,tF=Oa.hasStandardBrowserEnv?{write(n,e,t,s,i,r,o){if(typeof document>"u")return;const c=[`${n}=${encodeURIComponent(e)}`];Re.isNumber(t)&&c.push(`expires=${new Date(t).toUTCString()}`),Re.isString(s)&&c.push(`path=${s}`),Re.isString(i)&&c.push(`domain=${i}`),r===!0&&c.push("secure"),Re.isString(o)&&c.push(`SameSite=${o}`),document.cookie=c.join("; ")},read(n){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function nF(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function sF(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function ND(n,e,t){let s=!nF(e);return n&&(s||t==!1)?sF(n,e):e}const hA=n=>n instanceof Ar?{...n}:n;function xf(n,e){e=e||{};const t={};function s(h,f,g,x){return Re.isPlainObject(h)&&Re.isPlainObject(f)?Re.merge.call({caseless:x},h,f):Re.isPlainObject(f)?Re.merge({},f):Re.isArray(f)?f.slice():f}function i(h,f,g,x){if(Re.isUndefined(f)){if(!Re.isUndefined(h))return s(void 0,h,g,x)}else return s(h,f,g,x)}function r(h,f){if(!Re.isUndefined(f))return s(void 0,f)}function o(h,f){if(Re.isUndefined(f)){if(!Re.isUndefined(h))return s(void 0,h)}else return s(void 0,f)}function c(h,f,g){if(g in e)return s(h,f);if(g in n)return s(void 0,h)}const u={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(h,f,g)=>i(hA(h),hA(f),g,!0)};return Re.forEach(Object.keys({...n,...e}),function(f){const g=u[f]||i,x=g(n[f],e[f],f);Re.isUndefined(x)&&g!==c||(t[f]=x)}),t}const jD=n=>{const e=xf({},n);let{data:t,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:r,headers:o,auth:c}=e;if(e.headers=o=Ar.from(o),e.url=bD(ND(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),Re.isFormData(t)){if(Oa.hasStandardBrowserEnv||Oa.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Re.isFunction(t.getHeaders)){const u=t.getHeaders(),h=["content-type","content-length"];Object.entries(u).forEach(([f,g])=>{h.includes(f.toLowerCase())&&o.set(f,g)})}}if(Oa.hasStandardBrowserEnv&&(s&&Re.isFunction(s)&&(s=s(e)),s||s!==!1&&eF(e.url))){const u=i&&r&&tF.read(r);u&&o.set(i,u)}return e},iF=typeof XMLHttpRequest<"u",aF=iF&&function(n){return new Promise(function(t,s){const i=jD(n);let r=i.data;const o=Ar.from(i.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:h}=i,f,g,x,y,N;function j(){y&&y(),N&&N(),i.cancelToken&&i.cancelToken.unsubscribe(f),i.signal&&i.signal.removeEventListener("abort",f)}let E=new XMLHttpRequest;E.open(i.method.toUpperCase(),i.url,!0),E.timeout=i.timeout;function A(){if(!E)return;const M=Ar.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),z={data:!c||c==="text"||c==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:M,config:n,request:E};SD(function(I){t(I),j()},function(I){s(I),j()},z),E=null}"onloadend"in E?E.onloadend=A:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(A)},E.onabort=function(){E&&(s(new nn("Request aborted",nn.ECONNABORTED,n,E)),E=null)},E.onerror=function(L){const z=L&&L.message?L.message:"Network Error",W=new nn(z,nn.ERR_NETWORK,n,E);W.event=L||null,s(W),E=null},E.ontimeout=function(){let L=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const z=i.transitional||yD;i.timeoutErrorMessage&&(L=i.timeoutErrorMessage),s(new nn(L,z.clarifyTimeoutError?nn.ETIMEDOUT:nn.ECONNABORTED,n,E)),E=null},r===void 0&&o.setContentType(null),"setRequestHeader"in E&&Re.forEach(o.toJSON(),function(L,z){E.setRequestHeader(z,L)}),Re.isUndefined(i.withCredentials)||(E.withCredentials=!!i.withCredentials),c&&c!=="json"&&(E.responseType=i.responseType),h&&([x,N]=py(h,!0),E.addEventListener("progress",x)),u&&E.upload&&([g,y]=py(u),E.upload.addEventListener("progress",g),E.upload.addEventListener("loadend",y)),(i.cancelToken||i.signal)&&(f=M=>{E&&(s(!M||M.type?new og(null,n,E):M),E.abort(),E=null)},i.cancelToken&&i.cancelToken.subscribe(f),i.signal&&(i.signal.aborted?f():i.signal.addEventListener("abort",f)));const R=JL(i.url);if(R&&Oa.protocols.indexOf(R)===-1){s(new nn("Unsupported protocol "+R+":",nn.ERR_BAD_REQUEST,n));return}E.send(r||null)})},rF=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let s=new AbortController,i;const r=function(h){if(!i){i=!0,c();const f=h instanceof Error?h:this.reason;s.abort(f instanceof nn?f:new og(f instanceof Error?f.message:f))}};let o=e&&setTimeout(()=>{o=null,r(new nn(`timeout ${e} of ms exceeded`,nn.ETIMEDOUT))},e);const c=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(h=>{h.unsubscribe?h.unsubscribe(r):h.removeEventListener("abort",r)}),n=null)};n.forEach(h=>h.addEventListener("abort",r));const{signal:u}=s;return u.unsubscribe=()=>Re.asap(c),u}},oF=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let s=0,i;for(;s<t;)i=s+e,yield n.slice(s,i),s=i},lF=async function*(n,e){for await(const t of cF(n))yield*oF(t,e)},cF=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:s}=await e.read();if(t)break;yield s}}finally{await e.cancel()}},fA=(n,e,t,s)=>{const i=lF(n,e);let r=0,o,c=u=>{o||(o=!0,s&&s(u))};return new ReadableStream({async pull(u){try{const{done:h,value:f}=await i.next();if(h){c(),u.close();return}let g=f.byteLength;if(t){let x=r+=g;t(x)}u.enqueue(new Uint8Array(f))}catch(h){throw c(h),h}},cancel(u){return c(u),i.return()}},{highWaterMark:2})},mA=64*1024,{isFunction:hb}=Re,dF=(({Request:n,Response:e})=>({Request:n,Response:e}))(Re.global),{ReadableStream:gA,TextEncoder:pA}=Re.global,xA=(n,...e)=>{try{return!!n(...e)}catch{return!1}},uF=n=>{n=Re.merge.call({skipUndefined:!0},dF,n);const{fetch:e,Request:t,Response:s}=n,i=e?hb(e):typeof fetch=="function",r=hb(t),o=hb(s);if(!i)return!1;const c=i&&hb(gA),u=i&&(typeof pA=="function"?(N=>j=>N.encode(j))(new pA):async N=>new Uint8Array(await new t(N).arrayBuffer())),h=r&&c&&xA(()=>{let N=!1;const j=new t(Oa.origin,{body:new gA,method:"POST",get duplex(){return N=!0,"half"}}).headers.has("Content-Type");return N&&!j}),f=o&&c&&xA(()=>Re.isReadableStream(new s("").body)),g={stream:f&&(N=>N.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(N=>{!g[N]&&(g[N]=(j,E)=>{let A=j&&j[N];if(A)return A.call(j);throw new nn(`Response type '${N}' is not supported`,nn.ERR_NOT_SUPPORT,E)})});const x=async N=>{if(N==null)return 0;if(Re.isBlob(N))return N.size;if(Re.isSpecCompliantForm(N))return(await new t(Oa.origin,{method:"POST",body:N}).arrayBuffer()).byteLength;if(Re.isArrayBufferView(N)||Re.isArrayBuffer(N))return N.byteLength;if(Re.isURLSearchParams(N)&&(N=N+""),Re.isString(N))return(await u(N)).byteLength},y=async(N,j)=>{const E=Re.toFiniteNumber(N.getContentLength());return E??x(j)};return async N=>{let{url:j,method:E,data:A,signal:R,cancelToken:M,timeout:L,onDownloadProgress:z,onUploadProgress:W,responseType:I,headers:Y,withCredentials:U="same-origin",fetchOptions:Z}=jD(N),$=e||fetch;I=I?(I+"").toLowerCase():"text";let ae=rF([R,M&&M.toAbortSignal()],L),xe=null;const fe=ae&&ae.unsubscribe&&(()=>{ae.unsubscribe()});let ke;try{if(W&&h&&E!=="get"&&E!=="head"&&(ke=await y(Y,A))!==0){let V=new t(j,{method:"POST",body:A,duplex:"half"}),re;if(Re.isFormData(A)&&(re=V.headers.get("content-type"))&&Y.setContentType(re),V.body){const[ge,Ne]=dA(ke,py(uA(W)));A=fA(V.body,mA,ge,Ne)}}Re.isString(U)||(U=U?"include":"omit");const G=r&&"credentials"in t.prototype,X={...Z,signal:ae,method:E.toUpperCase(),headers:Y.normalize().toJSON(),body:A,duplex:"half",credentials:G?U:void 0};xe=r&&new t(j,X);let se=await(r?$(xe,Z):$(j,X));const ee=f&&(I==="stream"||I==="response");if(f&&(z||ee&&fe)){const V={};["status","statusText","headers"].forEach(Ce=>{V[Ce]=se[Ce]});const re=Re.toFiniteNumber(se.headers.get("content-length")),[ge,Ne]=z&&dA(re,py(uA(z),!0))||[];se=new s(fA(se.body,mA,ge,()=>{Ne&&Ne(),fe&&fe()}),V)}I=I||"text";let ne=await g[Re.findKey(g,I)||"text"](se,N);return!ee&&fe&&fe(),await new Promise((V,re)=>{SD(V,re,{data:ne,headers:Ar.from(se.headers),status:se.status,statusText:se.statusText,config:N,request:xe})})}catch(G){throw fe&&fe(),G&&G.name==="TypeError"&&/Load failed|fetch/i.test(G.message)?Object.assign(new nn("Network Error",nn.ERR_NETWORK,N,xe),{cause:G.cause||G}):nn.from(G,G&&G.code,N,xe)}}},hF=new Map,CD=n=>{let e=n&&n.env||{};const{fetch:t,Request:s,Response:i}=e,r=[s,i,t];let o=r.length,c=o,u,h,f=hF;for(;c--;)u=r[c],h=f.get(u),h===void 0&&f.set(u,h=c?new Map:uF(e)),f=h;return h};CD();const vS={http:TL,xhr:aF,fetch:{get:CD}};Re.forEach(vS,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const bA=n=>`- ${n}`,fF=n=>Re.isFunction(n)||n===null||n===!1;function mF(n,e){n=Re.isArray(n)?n:[n];const{length:t}=n;let s,i;const r={};for(let o=0;o<t;o++){s=n[o];let c;if(i=s,!fF(s)&&(i=vS[(c=String(s)).toLowerCase()],i===void 0))throw new nn(`Unknown adapter '${c}'`);if(i&&(Re.isFunction(i)||(i=i.get(e))))break;r[c||"#"+o]=i}if(!i){const o=Object.entries(r).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let c=t?o.length>1?`since :
`+o.map(bA).join(`
`):" "+bA(o[0]):"as no adapter specified";throw new nn("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i}const AD={getAdapter:mF,adapters:vS};function $1(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new og(null,n)}function yA(n){return $1(n),n.headers=Ar.from(n.headers),n.data=q1.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),AD.getAdapter(n.adapter||X0.adapter,n)(n).then(function(s){return $1(n),s.data=q1.call(n,n.transformResponse,s),s.headers=Ar.from(s.headers),s},function(s){return wD(s)||($1(n),s&&s.response&&(s.response.data=q1.call(n,n.transformResponse,s.response),s.response.headers=Ar.from(s.response.headers))),Promise.reject(s)})}const ED="1.13.2",sv={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{sv[n]=function(s){return typeof s===n||"a"+(e<1?"n ":" ")+n}});const vA={};sv.transitional=function(e,t,s){function i(r,o){return"[Axios v"+ED+"] Transitional option '"+r+"'"+o+(s?". "+s:"")}return(r,o,c)=>{if(e===!1)throw new nn(i(o," has been removed"+(t?" in "+t:"")),nn.ERR_DEPRECATED);return t&&!vA[o]&&(vA[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,o,c):!0}};sv.spelling=function(e){return(t,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function gF(n,e,t){if(typeof n!="object")throw new nn("options must be an object",nn.ERR_BAD_OPTION_VALUE);const s=Object.keys(n);let i=s.length;for(;i-- >0;){const r=s[i],o=e[r];if(o){const c=n[r],u=c===void 0||o(c,r,n);if(u!==!0)throw new nn("option "+r+" must be "+u,nn.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new nn("Unknown option "+r,nn.ERR_BAD_OPTION)}}const ey={assertOptions:gF,validators:sv},wc=ey.validators;let mf=class{constructor(e){this.defaults=e||{},this.interceptors={request:new lA,response:new lA}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?r&&!String(s.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+r):s.stack=r}catch{}}throw s}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=xf(this.defaults,t);const{transitional:s,paramsSerializer:i,headers:r}=t;s!==void 0&&ey.assertOptions(s,{silentJSONParsing:wc.transitional(wc.boolean),forcedJSONParsing:wc.transitional(wc.boolean),clarifyTimeoutError:wc.transitional(wc.boolean)},!1),i!=null&&(Re.isFunction(i)?t.paramsSerializer={serialize:i}:ey.assertOptions(i,{encode:wc.function,serialize:wc.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ey.assertOptions(t,{baseUrl:wc.spelling("baseURL"),withXsrfToken:wc.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=r&&Re.merge(r.common,r[t.method]);r&&Re.forEach(["delete","get","head","post","put","patch","common"],N=>{delete r[N]}),t.headers=Ar.concat(o,r);const c=[];let u=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(t)===!1||(u=u&&j.synchronous,c.unshift(j.fulfilled,j.rejected))});const h=[];this.interceptors.response.forEach(function(j){h.push(j.fulfilled,j.rejected)});let f,g=0,x;if(!u){const N=[yA.bind(this),void 0];for(N.unshift(...c),N.push(...h),x=N.length,f=Promise.resolve(t);g<x;)f=f.then(N[g++],N[g++]);return f}x=c.length;let y=t;for(;g<x;){const N=c[g++],j=c[g++];try{y=N(y)}catch(E){j.call(this,E);break}}try{f=yA.call(this,y)}catch(N){return Promise.reject(N)}for(g=0,x=h.length;g<x;)f=f.then(h[g++],h[g++]);return f}getUri(e){e=xf(this.defaults,e);const t=ND(e.baseURL,e.url,e.allowAbsoluteUrls);return bD(t,e.params,e.paramsSerializer)}};Re.forEach(["delete","get","head","options"],function(e){mf.prototype[e]=function(t,s){return this.request(xf(s||{},{method:e,url:t,data:(s||{}).data}))}});Re.forEach(["post","put","patch"],function(e){function t(s){return function(r,o,c){return this.request(xf(c||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}mf.prototype[e]=t(),mf.prototype[e+"Form"]=t(!0)});let pF=class _D{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(r){t=r});const s=this;this.promise.then(i=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](i);s._listeners=null}),this.promise.then=i=>{let r;const o=new Promise(c=>{s.subscribe(c),r=c}).then(i);return o.cancel=function(){s.unsubscribe(r)},o},e(function(r,o,c){s.reason||(s.reason=new og(r,o,c),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=s=>{e.abort(s)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new _D(function(i){e=i}),cancel:e}}};function xF(n){return function(t){return n.apply(null,t)}}function bF(n){return Re.isObject(n)&&n.isAxiosError===!0}const o2={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(o2).forEach(([n,e])=>{o2[e]=n});function TD(n){const e=new mf(n),t=rD(mf.prototype.request,e);return Re.extend(t,mf.prototype,e,{allOwnKeys:!0}),Re.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return TD(xf(n,i))},t}const ps=TD(X0);ps.Axios=mf;ps.CanceledError=og;ps.CancelToken=pF;ps.isCancel=wD;ps.VERSION=ED;ps.toFormData=nv;ps.AxiosError=nn;ps.Cancel=ps.CanceledError;ps.all=function(e){return Promise.all(e)};ps.spread=xF;ps.isAxiosError=bF;ps.mergeConfig=xf;ps.AxiosHeaders=Ar;ps.formToJSON=n=>vD(Re.isHTMLForm(n)?new FormData(n):n);ps.getAdapter=AD.getAdapter;ps.HttpStatusCode=o2;ps.default=ps;const{Axios:jne,AxiosError:Cne,CanceledError:Ane,isCancel:Ene,CancelToken:_ne,VERSION:Tne,all:kne,Cancel:Dne,isAxiosError:Rne,spread:Mne,toFormData:Pne,AxiosHeaders:One,HttpStatusCode:Lne,formToJSON:Fne,getAdapter:zne,mergeConfig:Ine}=ps,wt=ps.create({baseURL:"http://127.0.0.1:8000/api/v1",headers:{Accept:"application/json"}});wt.interceptors.request.use(n=>{const e=localStorage.getItem("token");return e&&(n.headers.Authorization=`Bearer ${e}`),n});wt.interceptors.response.use(n=>n,n=>(n.response&&n.response.status===401&&localStorage.removeItem("token"),Promise.reject(n)));const yF=async n=>(await wt.post("/register",n)).data,vF=async n=>(await wt.post("/login",n)).data,wF=async()=>{await wt.post("/logout"),localStorage.removeItem("token")},SF=async n=>await wt.post("/forgot-password",{email:n}),NF=async n=>await wt.post("/reset-password",n),jF=async n=>(await wt.post("/user/profile",n)).data,CF=async()=>(await wt.post("/email/resend")).data,kD=_.createContext(),AF=({children:n})=>{const[e,t]=_.useState(null),[s,i]=_.useState(localStorage.getItem("token")),[r,o]=_.useState(!0),c=f=>{f?localStorage.setItem("token",f):localStorage.removeItem("token"),i(f)},u=async()=>{if(!s){o(!1);return}try{const f=await wt.get("/user");t(f.data.data)}catch(f){console.error("Failed to fetch user",f),c(null),t(null)}finally{o(!1)}},h=async()=>{try{await wF()}catch(f){console.error("API Logout failed",f)}finally{c(null),t(null),localStorage.removeItem("token")}};return _.useEffect(()=>{u()},[s]),a.jsx(kD.Provider,{value:{user:e,setUser:t,token:s,setToken:c,loading:r,fetchUser:u,logout:h},children:n})},Dr=()=>_.useContext(kD),wS=_.createContext({});function rh(n){const e=_.useRef(null);return e.current===null&&(e.current=n()),e.current}const DD=typeof window<"u",iv=DD?_.useLayoutEffect:_.useEffect,av=_.createContext(null);function SS(n,e){n.indexOf(e)===-1&&n.push(e)}function NS(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function EF([...n],e,t){const s=e<0?n.length+e:e;if(s>=0&&s<n.length){const i=t<0?n.length+t:t,[r]=n.splice(e,1);n.splice(i,0,r)}return n}const Dl=(n,e,t)=>t>e?e:t<n?n:t;let p0=()=>{};const Td={},RD=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function MD(n){return typeof n=="object"&&n!==null}const PD=n=>/^0[^.\s]+$/u.test(n);function jS(n){let e;return()=>(e===void 0&&(e=n()),e)}const Er=n=>n,_F=(n,e)=>t=>e(n(t)),K0=(...n)=>n.reduce(_F),Gm=(n,e,t)=>{const s=e-n;return s===0?1:(t-n)/s};class CS{constructor(){this.subscriptions=[]}add(e){return SS(this.subscriptions,e),()=>NS(this.subscriptions,e)}notify(e,t,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,s);else for(let r=0;r<i;r++){const o=this.subscriptions[r];o&&o(e,t,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ed=n=>n*1e3,Io=n=>n/1e3;function AS(n,e){return e?n*(1e3/e):0}const OD=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,TF=1e-7,kF=12;function DF(n,e,t,s,i){let r,o,c=0;do o=e+(t-e)/2,r=OD(o,s,i)-n,r>0?t=o:e=o;while(Math.abs(r)>TF&&++c<kF);return o}function Z0(n,e,t,s){if(n===e&&t===s)return Er;const i=r=>DF(r,0,1,n,t);return r=>r===0||r===1?r:OD(i(r),e,s)}const LD=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,FD=n=>e=>1-n(1-e),zD=Z0(.33,1.53,.69,.99),ES=FD(zD),ID=LD(ES),BD=n=>(n*=2)<1?.5*ES(n):.5*(2-Math.pow(2,-10*(n-1))),_S=n=>1-Math.sin(Math.acos(n)),HD=FD(_S),UD=LD(_S),RF=Z0(.42,0,1,1),MF=Z0(0,0,.58,1),VD=Z0(.42,0,.58,1),PF=n=>Array.isArray(n)&&typeof n[0]!="number",WD=n=>Array.isArray(n)&&typeof n[0]=="number",OF={linear:Er,easeIn:RF,easeInOut:VD,easeOut:MF,circIn:_S,circInOut:UD,circOut:HD,backIn:ES,backInOut:ID,backOut:zD,anticipate:BD},LF=n=>typeof n=="string",wA=n=>{if(WD(n)){p0(n.length===4);const[e,t,s,i]=n;return Z0(e,t,s,i)}else if(LF(n))return OF[n];return n},fb=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function FF(n,e){let t=new Set,s=new Set,i=!1,r=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(f){o.has(f)&&(h.schedule(f),n()),f(c)}const h={schedule:(f,g=!1,x=!1)=>{const N=x&&i?t:s;return g&&o.add(f),N.has(f)||N.add(f),f},cancel:f=>{s.delete(f),o.delete(f)},process:f=>{if(c=f,i){r=!0;return}i=!0,[t,s]=[s,t],t.forEach(u),t.clear(),i=!1,r&&(r=!1,h.process(f))}};return h}const zF=40;function GD(n,e){let t=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},r=()=>t=!0,o=fb.reduce((M,L)=>(M[L]=FF(r),M),{}),{setup:c,read:u,resolveKeyframes:h,preUpdate:f,update:g,preRender:x,render:y,postRender:N}=o,j=()=>{const M=Td.useManualTiming?i.timestamp:performance.now();t=!1,Td.useManualTiming||(i.delta=s?1e3/60:Math.max(Math.min(M-i.timestamp,zF),1)),i.timestamp=M,i.isProcessing=!0,c.process(i),u.process(i),h.process(i),f.process(i),g.process(i),x.process(i),y.process(i),N.process(i),i.isProcessing=!1,t&&e&&(s=!1,n(j))},E=()=>{t=!0,s=!0,i.isProcessing||n(j)};return{schedule:fb.reduce((M,L)=>{const z=o[L];return M[L]=(W,I=!1,Y=!1)=>(t||E(),z.schedule(W,I,Y)),M},{}),cancel:M=>{for(let L=0;L<fb.length;L++)o[fb[L]].cancel(M)},state:i,steps:o}}const{schedule:Un,cancel:Rl,state:ia,steps:ew}=GD(typeof requestAnimationFrame<"u"?requestAnimationFrame:Er,!0);let ty;function IF(){ty=void 0}const tr={now:()=>(ty===void 0&&tr.set(ia.isProcessing||Td.useManualTiming?ia.timestamp:performance.now()),ty),set:n=>{ty=n,queueMicrotask(IF)}},YD=n=>e=>typeof e=="string"&&e.startsWith(n),XD=YD("--"),BF=YD("var(--"),TS=n=>BF(n)?HF.test(n.split("/*")[0].trim()):!1,HF=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function SA(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const lg={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},x0={...lg,transform:n=>Dl(0,1,n)},mb={...lg,default:1},$p=n=>Math.round(n*1e5)/1e5,kS=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function UF(n){return n==null}const VF=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,DS=(n,e)=>t=>!!(typeof t=="string"&&VF.test(t)&&t.startsWith(n)||e&&!UF(t)&&Object.prototype.hasOwnProperty.call(t,e)),KD=(n,e,t)=>s=>{if(typeof s!="string")return s;const[i,r,o,c]=s.match(kS);return{[n]:parseFloat(i),[e]:parseFloat(r),[t]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},WF=n=>Dl(0,255,n),tw={...lg,transform:n=>Math.round(WF(n))},rf={test:DS("rgb","red"),parse:KD("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:s=1})=>"rgba("+tw.transform(n)+", "+tw.transform(e)+", "+tw.transform(t)+", "+$p(x0.transform(s))+")"};function GF(n){let e="",t="",s="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),s=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),s=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,s+=s,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const l2={test:DS("#"),parse:GF,transform:rf.transform},Q0=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Ku=Q0("deg"),Mc=Q0("%"),ft=Q0("px"),YF=Q0("vh"),XF=Q0("vw"),NA={...Mc,parse:n=>Mc.parse(n)/100,transform:n=>Mc.transform(n*100)},jm={test:DS("hsl","hue"),parse:KD("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:s=1})=>"hsla("+Math.round(n)+", "+Mc.transform($p(e))+", "+Mc.transform($p(t))+", "+$p(x0.transform(s))+")"},Ci={test:n=>rf.test(n)||l2.test(n)||jm.test(n),parse:n=>rf.test(n)?rf.parse(n):jm.test(n)?jm.parse(n):l2.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?rf.transform(n):jm.transform(n),getAnimatableNone:n=>{const e=Ci.parse(n);return e.alpha=0,Ci.transform(e)}},KF=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function ZF(n){return isNaN(n)&&typeof n=="string"&&(n.match(kS)?.length||0)+(n.match(KF)?.length||0)>0}const ZD="number",QD="color",QF="var",JF="var(",jA="${}",qF=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function b0(n){const e=n.toString(),t=[],s={color:[],number:[],var:[]},i=[];let r=0;const c=e.replace(qF,u=>(Ci.test(u)?(s.color.push(r),i.push(QD),t.push(Ci.parse(u))):u.startsWith(JF)?(s.var.push(r),i.push(QF),t.push(u)):(s.number.push(r),i.push(ZD),t.push(parseFloat(u))),++r,jA)).split(jA);return{values:t,split:c,indexes:s,types:i}}function JD(n){return b0(n).values}function qD(n){const{split:e,types:t}=b0(n),s=e.length;return i=>{let r="";for(let o=0;o<s;o++)if(r+=e[o],i[o]!==void 0){const c=t[o];c===ZD?r+=$p(i[o]):c===QD?r+=Ci.transform(i[o]):r+=i[o]}return r}}const $F=n=>typeof n=="number"?0:Ci.test(n)?Ci.getAnimatableNone(n):n;function ez(n){const e=JD(n);return qD(n)(e.map($F))}const sh={test:ZF,parse:JD,createTransformer:qD,getAnimatableNone:ez};function nw(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function tz({hue:n,saturation:e,lightness:t,alpha:s}){n/=360,e/=100,t/=100;let i=0,r=0,o=0;if(!e)i=r=o=t;else{const c=t<.5?t*(1+e):t+e-t*e,u=2*t-c;i=nw(u,c,n+1/3),r=nw(u,c,n),o=nw(u,c,n-1/3)}return{red:Math.round(i*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:s}}function xy(n,e){return t=>t>0?e:n}const Ms=(n,e,t)=>n+(e-n)*t,sw=(n,e,t)=>{const s=n*n,i=t*(e*e-s)+s;return i<0?0:Math.sqrt(i)},nz=[l2,rf,jm],sz=n=>nz.find(e=>e.test(n));function CA(n){const e=sz(n);if(!e)return!1;let t=e.parse(n);return e===jm&&(t=tz(t)),t}const AA=(n,e)=>{const t=CA(n),s=CA(e);if(!t||!s)return xy(n,e);const i={...t};return r=>(i.red=sw(t.red,s.red,r),i.green=sw(t.green,s.green,r),i.blue=sw(t.blue,s.blue,r),i.alpha=Ms(t.alpha,s.alpha,r),rf.transform(i))},c2=new Set(["none","hidden"]);function iz(n,e){return c2.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function az(n,e){return t=>Ms(n,e,t)}function RS(n){return typeof n=="number"?az:typeof n=="string"?TS(n)?xy:Ci.test(n)?AA:lz:Array.isArray(n)?$D:typeof n=="object"?Ci.test(n)?AA:rz:xy}function $D(n,e){const t=[...n],s=t.length,i=n.map((r,o)=>RS(r)(r,e[o]));return r=>{for(let o=0;o<s;o++)t[o]=i[o](r);return t}}function rz(n,e){const t={...n,...e},s={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(s[i]=RS(n[i])(n[i],e[i]));return i=>{for(const r in s)t[r]=s[r](i);return t}}function oz(n,e){const t=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const r=e.types[i],o=n.indexes[r][s[r]],c=n.values[o]??0;t[i]=c,s[r]++}return t}const lz=(n,e)=>{const t=sh.createTransformer(e),s=b0(n),i=b0(e);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?c2.has(n)&&!i.values.length||c2.has(e)&&!s.values.length?iz(n,e):K0($D(oz(s,i),i.values),t):xy(n,e)};function eR(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Ms(n,e,t):RS(n)(n,e)}const cz=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Un.update(e,t),stop:()=>Rl(e),now:()=>ia.isProcessing?ia.timestamp:tr.now()}},tR=(n,e,t=10)=>{let s="";const i=Math.max(Math.round(e/t),2);for(let r=0;r<i;r++)s+=Math.round(n(r/(i-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},by=2e4;function MS(n){let e=0;const t=50;let s=n.next(e);for(;!s.done&&e<by;)e+=t,s=n.next(e);return e>=by?1/0:e}function dz(n,e=100,t){const s=t({...n,keyframes:[0,e]}),i=Math.min(MS(s),by);return{type:"keyframes",ease:r=>s.next(i*r).value/e,duration:Io(i)}}const uz=5;function nR(n,e,t){const s=Math.max(e-uz,0);return AS(t-n(s),e-s)}const Qs={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},iw=.001;function hz({duration:n=Qs.duration,bounce:e=Qs.bounce,velocity:t=Qs.velocity,mass:s=Qs.mass}){let i,r,o=1-e;o=Dl(Qs.minDamping,Qs.maxDamping,o),n=Dl(Qs.minDuration,Qs.maxDuration,Io(n)),o<1?(i=h=>{const f=h*o,g=f*n,x=f-t,y=d2(h,o),N=Math.exp(-g);return iw-x/y*N},r=h=>{const g=h*o*n,x=g*t+t,y=Math.pow(o,2)*Math.pow(h,2)*n,N=Math.exp(-g),j=d2(Math.pow(h,2),o);return(-i(h)+iw>0?-1:1)*((x-y)*N)/j}):(i=h=>{const f=Math.exp(-h*n),g=(h-t)*n+1;return-iw+f*g},r=h=>{const f=Math.exp(-h*n),g=(t-h)*(n*n);return f*g});const c=5/n,u=mz(i,r,c);if(n=Ed(n),isNaN(u))return{stiffness:Qs.stiffness,damping:Qs.damping,duration:n};{const h=Math.pow(u,2)*s;return{stiffness:h,damping:o*2*Math.sqrt(s*h),duration:n}}}const fz=12;function mz(n,e,t){let s=t;for(let i=1;i<fz;i++)s=s-n(s)/e(s);return s}function d2(n,e){return n*Math.sqrt(1-e*e)}const gz=["duration","bounce"],pz=["stiffness","damping","mass"];function EA(n,e){return e.some(t=>n[t]!==void 0)}function xz(n){let e={velocity:Qs.velocity,stiffness:Qs.stiffness,damping:Qs.damping,mass:Qs.mass,isResolvedFromDuration:!1,...n};if(!EA(n,pz)&&EA(n,gz))if(n.visualDuration){const t=n.visualDuration,s=2*Math.PI/(t*1.2),i=s*s,r=2*Dl(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:Qs.mass,stiffness:i,damping:r}}else{const t=hz(n);e={...e,...t,mass:Qs.mass},e.isResolvedFromDuration=!0}return e}function yy(n=Qs.visualDuration,e=Qs.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:s,restDelta:i}=t;const r=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],c={done:!1,value:r},{stiffness:u,damping:h,mass:f,duration:g,velocity:x,isResolvedFromDuration:y}=xz({...t,velocity:-Io(t.velocity||0)}),N=x||0,j=h/(2*Math.sqrt(u*f)),E=o-r,A=Io(Math.sqrt(u/f)),R=Math.abs(E)<5;s||(s=R?Qs.restSpeed.granular:Qs.restSpeed.default),i||(i=R?Qs.restDelta.granular:Qs.restDelta.default);let M;if(j<1){const z=d2(A,j);M=W=>{const I=Math.exp(-j*A*W);return o-I*((N+j*A*E)/z*Math.sin(z*W)+E*Math.cos(z*W))}}else if(j===1)M=z=>o-Math.exp(-A*z)*(E+(N+A*E)*z);else{const z=A*Math.sqrt(j*j-1);M=W=>{const I=Math.exp(-j*A*W),Y=Math.min(z*W,300);return o-I*((N+j*A*E)*Math.sinh(Y)+z*E*Math.cosh(Y))/z}}const L={calculatedDuration:y&&g||null,next:z=>{const W=M(z);if(y)c.done=z>=g;else{let I=z===0?N:0;j<1&&(I=z===0?Ed(N):nR(M,z,W));const Y=Math.abs(I)<=s,U=Math.abs(o-W)<=i;c.done=Y&&U}return c.value=c.done?o:W,c},toString:()=>{const z=Math.min(MS(L),by),W=tR(I=>L.next(z*I).value,z,30);return z+"ms "+W},toTransition:()=>{}};return L}yy.applyToOptions=n=>{const e=dz(n,100,yy);return n.ease=e.ease,n.duration=Ed(e.duration),n.type="keyframes",n};function u2({keyframes:n,velocity:e=0,power:t=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:r=500,modifyTarget:o,min:c,max:u,restDelta:h=.5,restSpeed:f}){const g=n[0],x={done:!1,value:g},y=Y=>c!==void 0&&Y<c||u!==void 0&&Y>u,N=Y=>c===void 0?u:u===void 0||Math.abs(c-Y)<Math.abs(u-Y)?c:u;let j=t*e;const E=g+j,A=o===void 0?E:o(E);A!==E&&(j=A-g);const R=Y=>-j*Math.exp(-Y/s),M=Y=>A+R(Y),L=Y=>{const U=R(Y),Z=M(Y);x.done=Math.abs(U)<=h,x.value=x.done?A:Z};let z,W;const I=Y=>{y(x.value)&&(z=Y,W=yy({keyframes:[x.value,N(x.value)],velocity:nR(M,Y,x.value),damping:i,stiffness:r,restDelta:h,restSpeed:f}))};return I(0),{calculatedDuration:null,next:Y=>{let U=!1;return!W&&z===void 0&&(U=!0,L(Y),I(Y)),z!==void 0&&Y>=z?W.next(Y-z):(!U&&L(Y),x)}}}function bz(n,e,t){const s=[],i=t||Td.mix||eR,r=n.length-1;for(let o=0;o<r;o++){let c=i(n[o],n[o+1]);if(e){const u=Array.isArray(e)?e[o]||Er:e;c=K0(u,c)}s.push(c)}return s}function PS(n,e,{clamp:t=!0,ease:s,mixer:i}={}){const r=n.length;if(p0(r===e.length),r===1)return()=>e[0];if(r===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[r-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=bz(e,s,i),u=c.length,h=f=>{if(o&&f<n[0])return e[0];let g=0;if(u>1)for(;g<n.length-2&&!(f<n[g+1]);g++);const x=Gm(n[g],n[g+1],f);return c[g](x)};return t?f=>h(Dl(n[0],n[r-1],f)):h}function yz(n,e){const t=n[n.length-1];for(let s=1;s<=e;s++){const i=Gm(0,e,s);n.push(Ms(t,1,i))}}function sR(n){const e=[0];return yz(e,n.length-1),e}function vz(n,e){return n.map(t=>t*e)}function wz(n,e){return n.map(()=>e||VD).splice(0,n.length-1)}function e0({duration:n=300,keyframes:e,times:t,ease:s="easeInOut"}){const i=PF(s)?s.map(wA):wA(s),r={done:!1,value:e[0]},o=vz(t&&t.length===e.length?t:sR(e),n),c=PS(o,e,{ease:Array.isArray(i)?i:wz(e,i)});return{calculatedDuration:n,next:u=>(r.value=c(u),r.done=u>=n,r)}}const Sz=n=>n!==null;function OS(n,{repeat:e,repeatType:t="loop"},s,i=1){const r=n.filter(Sz),c=i<0||e&&t!=="loop"&&e%2===1?0:r.length-1;return!c||s===void 0?r[c]:s}const Nz={decay:u2,inertia:u2,tween:e0,keyframes:e0,spring:yy};function iR(n){typeof n.type=="string"&&(n.type=Nz[n.type])}class LS{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const jz=n=>n/100;class rv extends LS{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==tr.now()&&this.tick(tr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;iR(e);const{type:t=e0,repeat:s=0,repeatDelay:i=0,repeatType:r,velocity:o=0}=e;let{keyframes:c}=e;const u=t||e0;u!==e0&&typeof c[0]!="number"&&(this.mixKeyframes=K0(jz,eR(c[0],c[1])),c=[0,100]);const h=u({...e,keyframes:c});r==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...c].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=MS(h));const{calculatedDuration:f}=h;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(s+1)-i,this.generator=h}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:s,totalDuration:i,mixKeyframes:r,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return s.next(0);const{delay:h=0,keyframes:f,repeat:g,repeatType:x,repeatDelay:y,type:N,onUpdate:j,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const A=this.currentTime-h*(this.playbackSpeed>=0?1:-1),R=this.playbackSpeed>=0?A<0:A>i;this.currentTime=Math.max(A,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let M=this.currentTime,L=s;if(g){const Y=Math.min(this.currentTime,i)/c;let U=Math.floor(Y),Z=Y%1;!Z&&Y>=1&&(Z=1),Z===1&&U--,U=Math.min(U,g+1),U%2&&(x==="reverse"?(Z=1-Z,y&&(Z-=y/c)):x==="mirror"&&(L=o)),M=Dl(0,1,Z)*c}const z=R?{done:!1,value:f[0]}:L.next(M);r&&(z.value=r(z.value));let{done:W}=z;!R&&u!==null&&(W=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&W);return I&&N!==u2&&(z.value=OS(f,this.options,E,this.speed)),j&&j(z.value),I&&this.finish(),z}then(e,t){return this.finished.then(e,t)}get duration(){return Io(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Io(e)}get time(){return Io(this.currentTime)}set time(e){e=Ed(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(tr.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Io(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=cz,startTime:t}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=t??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(tr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Cz(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const of=n=>n*180/Math.PI,h2=n=>{const e=of(Math.atan2(n[1],n[0]));return f2(e)},Az={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:h2,rotateZ:h2,skewX:n=>of(Math.atan(n[1])),skewY:n=>of(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},f2=n=>(n=n%360,n<0&&(n+=360),n),_A=h2,TA=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),kA=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),Ez={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:TA,scaleY:kA,scale:n=>(TA(n)+kA(n))/2,rotateX:n=>f2(of(Math.atan2(n[6],n[5]))),rotateY:n=>f2(of(Math.atan2(-n[2],n[0]))),rotateZ:_A,rotate:_A,skewX:n=>of(Math.atan(n[4])),skewY:n=>of(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function m2(n){return n.includes("scale")?1:0}function g2(n,e){if(!n||n==="none")return m2(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,i;if(t)s=Ez,i=t;else{const c=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=Az,i=c}if(!i)return m2(e);const r=s[e],o=i[1].split(",").map(Tz);return typeof r=="function"?r(o):o[r]}const _z=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return g2(t,e)};function Tz(n){return parseFloat(n.trim())}const cg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],dg=new Set(cg),DA=n=>n===lg||n===ft,kz=new Set(["x","y","z"]),Dz=cg.filter(n=>!kz.has(n));function Rz(n){const e=[];return Dz.forEach(t=>{const s=n.getValue(t);s!==void 0&&(e.push([t,s.get()]),s.set(t.startsWith("scale")?1:0))}),e}const qu={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>g2(e,"x"),y:(n,{transform:e})=>g2(e,"y")};qu.translateX=qu.x;qu.translateY=qu.y;const gf=new Set;let p2=!1,x2=!1,b2=!1;function aR(){if(x2){const n=Array.from(gf).filter(s=>s.needsMeasurement),e=new Set(n.map(s=>s.element)),t=new Map;e.forEach(s=>{const i=Rz(s);i.length&&(t.set(s,i),s.render())}),n.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const i=t.get(s);i&&i.forEach(([r,o])=>{s.getValue(r)?.set(o)})}),n.forEach(s=>s.measureEndState()),n.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}x2=!1,p2=!1,gf.forEach(n=>n.complete(b2)),gf.clear()}function rR(){gf.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(x2=!0)})}function Mz(){b2=!0,rR(),aR(),b2=!1}class FS{constructor(e,t,s,i,r,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=s,this.motionValue=i,this.element=r,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(gf.add(this),p2||(p2=!0,Un.read(rR),Un.resolveKeyframes(aR))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:s,motionValue:i}=this;if(e[0]===null){const r=i?.get(),o=e[e.length-1];if(r!==void 0)e[0]=r;else if(s&&t){const c=s.readValue(t,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),i&&r===void 0&&i.set(e[0])}Cz(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),gf.delete(this)}cancel(){this.state==="scheduled"&&(gf.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Pz=n=>n.startsWith("--");function Oz(n,e,t){Pz(e)?n.style.setProperty(e,t):n.style[e]=t}const oR=jS(()=>window.ScrollTimeline!==void 0),Lz={};function Fz(n,e){const t=jS(n);return()=>Lz[e]??t()}const lR=Fz(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Wp=([n,e,t,s])=>`cubic-bezier(${n}, ${e}, ${t}, ${s})`,RA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wp([0,.65,.55,1]),circOut:Wp([.55,0,1,.45]),backIn:Wp([.31,.01,.66,-.59]),backOut:Wp([.33,1.53,.69,.99])};function cR(n,e){if(n)return typeof n=="function"?lR()?tR(n,e):"ease-out":WD(n)?Wp(n):Array.isArray(n)?n.map(t=>cR(t,e)||RA.easeOut):RA[n]}function zz(n,e,t,{delay:s=0,duration:i=300,repeat:r=0,repeatType:o="loop",ease:c="easeOut",times:u}={},h=void 0){const f={[e]:t};u&&(f.offset=u);const g=cR(c,i);Array.isArray(g)&&(f.easing=g);const x={delay:s,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"};return h&&(x.pseudoElement=h),n.animate(f,x)}function dR(n){return typeof n=="function"&&"applyToOptions"in n}function Iz({type:n,...e}){return dR(n)&&lR()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Bz extends LS{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:s,keyframes:i,pseudoElement:r,allowFlatten:o=!1,finalKeyframe:c,onComplete:u}=e;this.isPseudoElement=!!r,this.allowFlatten=o,this.options=e,p0(typeof e.type!="string");const h=Iz(e);this.animation=zz(t,s,i,h,r),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const f=OS(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(f):Oz(t,s,f),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Io(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Io(e)}get time(){return Io(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Ed(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&oR()?(this.animation.timeline=e,Er):t(this)}}const uR={anticipate:BD,backInOut:ID,circInOut:UD};function Hz(n){return n in uR}function Uz(n){typeof n.ease=="string"&&Hz(n.ease)&&(n.ease=uR[n.ease])}const aw=10;class Vz extends Bz{constructor(e){Uz(e),iR(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:s,onComplete:i,element:r,...o}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const c=new rv({...o,autoplay:!1}),u=Math.max(aw,tr.now()-this.startTime),h=Dl(0,aw,u-aw);t.setWithVelocity(c.sample(Math.max(0,u-h)).value,c.sample(u).value,h),c.stop()}}const MA=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(sh.test(n)||n==="0")&&!n.startsWith("url("));function Wz(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function Gz(n,e,t,s){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const r=n[n.length-1],o=MA(i,e),c=MA(r,e);return!o||!c?!1:Wz(n)||(t==="spring"||dR(t))&&s}function y2(n){n.duration=0,n.type="keyframes"}const Yz=new Set(["opacity","clipPath","filter","transform"]),Xz=jS(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Kz(n){const{motionValue:e,name:t,repeatDelay:s,repeatType:i,damping:r,type:o}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=e.owner.getProps();return Xz()&&t&&Yz.has(t)&&(t!=="transform"||!h)&&!u&&!s&&i!=="mirror"&&r!==0&&o!=="inertia"}const Zz=40;class Qz extends LS{constructor({autoplay:e=!0,delay:t=0,type:s="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o="loop",keyframes:c,name:u,motionValue:h,element:f,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=tr.now();const x={autoplay:e,delay:t,type:s,repeat:i,repeatDelay:r,repeatType:o,name:u,motionValue:h,element:f,...g},y=f?.KeyframeResolver||FS;this.keyframeResolver=new y(c,(N,j,E)=>this.onKeyframesResolved(N,j,x,!E),u,h,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,s,i){this.keyframeResolver=void 0;const{name:r,type:o,velocity:c,delay:u,isHandoff:h,onUpdate:f}=s;this.resolvedAt=tr.now(),Gz(e,r,o,c)||((Td.instantAnimations||!u)&&f?.(OS(e,s,t)),e[0]=e[e.length-1],y2(s),s.repeat=0);const x={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Zz?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...s,keyframes:e},y=!h&&Kz(x)?new Vz({...x,element:x.motionValue.owner.current}):new rv(x);y.finished.then(()=>this.notifyFinished()).catch(Er),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Mz()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const Jz=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function qz(n){const e=Jz.exec(n);if(!e)return[,];const[,t,s,i]=e;return[`--${t??s}`,i]}function hR(n,e,t=1){const[s,i]=qz(n);if(!s)return;const r=window.getComputedStyle(e).getPropertyValue(s);if(r){const o=r.trim();return RD(o)?parseFloat(o):o}return TS(i)?hR(i,e,t+1):i}function zS(n,e){return n?.[e]??n?.default??n}const $z={type:"spring",stiffness:500,damping:25,restSpeed:10},eI=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),tI={type:"keyframes",duration:.8},nI={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},sI=(n,{keyframes:e})=>e.length>2?tI:dg.has(n)?n.startsWith("scale")?eI(e[1]):$z:nI;function iI({when:n,delay:e,delayChildren:t,staggerChildren:s,staggerDirection:i,repeat:r,repeatType:o,repeatDelay:c,from:u,elapsed:h,...f}){return!!Object.keys(f).length}const aI=n=>n!==null;function rI(n,{repeat:e,repeatType:t="loop"},s){const i=n.filter(aI),r=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[r]}function fR(n,e,t,s=0,i=1){const r=Array.from(n).sort((h,f)=>h.sortNodePosition(f)).indexOf(e),o=n.size,c=(o-1)*s;return typeof t=="function"?t(r,o):i===1?r*s:c-r*s}const IS=(n,e,t,s={},i,r)=>o=>{const c=zS(s,n)||{},u=c.delay||s.delay||0;let{elapsed:h=0}=s;h=h-Ed(u);const f={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:x=>{e.set(x),c.onUpdate&&c.onUpdate(x)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:n,motionValue:e,element:r?void 0:i};iI(c)||Object.assign(f,sI(n,f)),f.duration&&(f.duration=Ed(f.duration)),f.repeatDelay&&(f.repeatDelay=Ed(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let g=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(y2(f),f.delay===0&&(g=!0)),(Td.instantAnimations||Td.skipAnimations)&&(g=!0,y2(f),f.delay=0),f.allowFlatten=!c.type&&!c.ease,g&&!r&&e.get()!==void 0){const x=rI(f.keyframes,c);if(x!==void 0){Un.update(()=>{f.onUpdate(x),f.onComplete()});return}}return c.isSync?new rv(f):new Qz(f)},mR=new Set(["width","height","top","left","right","bottom",...cg]),PA=30,oI=n=>!isNaN(parseFloat(n)),t0={current:void 0};class lI{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{const i=tr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const r of this.dependents)r.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=tr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=oI(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new CS);const s=this.events[e].add(t);return e==="change"?()=>{s(),Un.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,s){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return t0.current&&t0.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=tr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>PA)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,PA);return AS(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function El(n,e){return new lI(n,e)}function OA(n){const e=[{},{}];return n?.values.forEach((t,s)=>{e[0][s]=t.get(),e[1][s]=t.getVelocity()}),e}function BS(n,e,t,s){if(typeof e=="function"){const[i,r]=OA(s);e=e(t!==void 0?t:n.custom,i,r)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,r]=OA(s);e=e(t!==void 0?t:n.custom,i,r)}return e}function Mm(n,e,t){const s=n.getProps();return BS(s,e,t!==void 0?t:s.custom,n)}const v2=n=>Array.isArray(n);function cI(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,El(t))}function dI(n){return v2(n)?n[n.length-1]||0:n}function uI(n,e){const t=Mm(n,e);let{transitionEnd:s={},transition:i={},...r}=t||{};r={...r,...s};for(const o in r){const c=dI(r[o]);cI(n,o,c)}}const Wi=n=>!!(n&&n.getVelocity);function hI(n){return!!(Wi(n)&&n.add)}function w2(n,e){const t=n.getValue("willChange");if(hI(t))return t.add(e);if(!t&&Td.WillChange){const s=new Td.WillChange("auto");n.addValue("willChange",s),s.add(e)}}function HS(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const fI="framerAppearId",gR="data-"+HS(fI);function pR(n){return n.props[gR]}function mI({protectedKeys:n,needsAnimating:e},t){const s=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,s}function xR(n,e,{delay:t=0,transitionOverride:s,type:i}={}){let{transition:r=n.getDefaultTransition(),transitionEnd:o,...c}=e;s&&(r=s);const u=[],h=i&&n.animationState&&n.animationState.getState()[i];for(const f in c){const g=n.getValue(f,n.latestValues[f]??null),x=c[f];if(x===void 0||h&&mI(h,f))continue;const y={delay:t,...zS(r||{},f)},N=g.get();if(N!==void 0&&!g.isAnimating&&!Array.isArray(x)&&x===N&&!y.velocity)continue;let j=!1;if(window.MotionHandoffAnimation){const A=pR(n);if(A){const R=window.MotionHandoffAnimation(A,f,Un);R!==null&&(y.startTime=R,j=!0)}}w2(n,f),g.start(IS(f,g,x,n.shouldReduceMotion&&mR.has(f)?{type:!1}:y,n,j));const E=g.animation;E&&u.push(E)}return o&&Promise.all(u).then(()=>{Un.update(()=>{o&&uI(n,o)})}),u}function S2(n,e,t={}){const s=Mm(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=s||{};t.transitionOverride&&(i=t.transitionOverride);const r=s?()=>Promise.all(xR(n,s,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:g}=i;return gI(n,e,u,h,f,g,t)}:()=>Promise.resolve(),{when:c}=i;if(c){const[u,h]=c==="beforeChildren"?[r,o]:[o,r];return u().then(()=>h())}else return Promise.all([r(),o(t.delay)])}function gI(n,e,t=0,s=0,i=0,r=1,o){const c=[];for(const u of n.variantChildren)u.notify("AnimationStart",e),c.push(S2(u,e,{...o,delay:t+(typeof s=="function"?0:s)+fR(n.variantChildren,u,s,i,r)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(c)}function pI(n,e,t={}){n.notify("AnimationStart",e);let s;if(Array.isArray(e)){const i=e.map(r=>S2(n,r,t));s=Promise.all(i)}else if(typeof e=="string")s=S2(n,e,t);else{const i=typeof e=="function"?Mm(n,e,t.custom):e;s=Promise.all(xR(n,i,t))}return s.then(()=>{n.notify("AnimationComplete",e)})}const xI={test:n=>n==="auto",parse:n=>n},bR=n=>e=>e.test(n),yR=[lg,ft,Mc,Ku,XF,YF,xI],LA=n=>yR.find(bR(n));function bI(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||PD(n):!0}const yI=new Set(["brightness","contrast","saturate","opacity"]);function vI(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[s]=t.match(kS)||[];if(!s)return n;const i=t.replace(s,"");let r=yI.has(e)?1:0;return s!==t&&(r*=100),e+"("+r+i+")"}const wI=/\b([a-z-]*)\(.*?\)/gu,N2={...sh,getAnimatableNone:n=>{const e=n.match(wI);return e?e.map(vI).join(" "):n}},FA={...lg,transform:Math.round},SI={rotate:Ku,rotateX:Ku,rotateY:Ku,rotateZ:Ku,scale:mb,scaleX:mb,scaleY:mb,scaleZ:mb,skew:Ku,skewX:Ku,skewY:Ku,distance:ft,translateX:ft,translateY:ft,translateZ:ft,x:ft,y:ft,z:ft,perspective:ft,transformPerspective:ft,opacity:x0,originX:NA,originY:NA,originZ:ft},US={borderWidth:ft,borderTopWidth:ft,borderRightWidth:ft,borderBottomWidth:ft,borderLeftWidth:ft,borderRadius:ft,radius:ft,borderTopLeftRadius:ft,borderTopRightRadius:ft,borderBottomRightRadius:ft,borderBottomLeftRadius:ft,width:ft,maxWidth:ft,height:ft,maxHeight:ft,top:ft,right:ft,bottom:ft,left:ft,inset:ft,insetBlock:ft,insetBlockStart:ft,insetBlockEnd:ft,insetInline:ft,insetInlineStart:ft,insetInlineEnd:ft,padding:ft,paddingTop:ft,paddingRight:ft,paddingBottom:ft,paddingLeft:ft,paddingBlock:ft,paddingBlockStart:ft,paddingBlockEnd:ft,paddingInline:ft,paddingInlineStart:ft,paddingInlineEnd:ft,margin:ft,marginTop:ft,marginRight:ft,marginBottom:ft,marginLeft:ft,marginBlock:ft,marginBlockStart:ft,marginBlockEnd:ft,marginInline:ft,marginInlineStart:ft,marginInlineEnd:ft,backgroundPositionX:ft,backgroundPositionY:ft,...SI,zIndex:FA,fillOpacity:x0,strokeOpacity:x0,numOctaves:FA},NI={...US,color:Ci,backgroundColor:Ci,outlineColor:Ci,fill:Ci,stroke:Ci,borderColor:Ci,borderTopColor:Ci,borderRightColor:Ci,borderBottomColor:Ci,borderLeftColor:Ci,filter:N2,WebkitFilter:N2},vR=n=>NI[n];function wR(n,e){let t=vR(n);return t!==N2&&(t=sh),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const jI=new Set(["auto","none","0"]);function CI(n,e,t){let s=0,i;for(;s<n.length&&!i;){const r=n[s];typeof r=="string"&&!jI.has(r)&&b0(r).values.length&&(i=n[s]),s++}if(i&&t)for(const r of e)n[r]=wR(t,i)}class AI extends FS{constructor(e,t,s,i,r){super(e,t,s,i,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:s}=this;if(!t||!t.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let g=e[f];if(typeof g=="string"&&(g=g.trim(),TS(g))){const x=hR(g,t.current);x!==void 0&&(e[f]=x),f===e.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!mR.has(s)||e.length!==2)return;const[i,r]=e,o=LA(i),c=LA(r),u=SA(i),h=SA(r);if(u!==h&&qu[s]){this.needsMeasurement=!0;return}if(o!==c)if(DA(o)&&DA(c))for(let f=0;f<e.length;f++){const g=e[f];typeof g=="string"&&(e[f]=parseFloat(g))}else qu[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,s=[];for(let i=0;i<e.length;i++)(e[i]===null||bI(e[i]))&&s.push(i);s.length&&CI(e,s,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=qu[s](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(s,i).jump(i,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const r=s.length-1,o=s[r];s[r]=qu[t](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function SR(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){const i=document.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const NR=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function VS(n){return MD(n)&&"offsetHeight"in n}const{schedule:WS}=GD(queueMicrotask,!1),jl={x:!1,y:!1};function jR(){return jl.x||jl.y}function EI(n){return n==="x"||n==="y"?jl[n]?null:(jl[n]=!0,()=>{jl[n]=!1}):jl.x||jl.y?null:(jl.x=jl.y=!0,()=>{jl.x=jl.y=!1})}function CR(n,e){const t=SR(n),s=new AbortController,i={passive:!0,...e,signal:s.signal};return[t,i,()=>s.abort()]}function zA(n){return!(n.pointerType==="touch"||jR())}function _I(n,e,t={}){const[s,i,r]=CR(n,t),o=c=>{if(!zA(c))return;const{target:u}=c,h=e(u,c);if(typeof h!="function"||!u)return;const f=g=>{zA(g)&&(h(g),u.removeEventListener("pointerleave",f))};u.addEventListener("pointerleave",f,i)};return s.forEach(c=>{c.addEventListener("pointerenter",o,i)}),r}const AR=(n,e)=>e?n===e?!0:AR(n,e.parentElement):!1,GS=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,TI=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ER(n){return TI.has(n.tagName)||n.isContentEditable===!0}const ny=new WeakSet;function IA(n){return e=>{e.key==="Enter"&&n(e)}}function rw(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const kI=(n,e)=>{const t=n.currentTarget;if(!t)return;const s=IA(()=>{if(ny.has(t))return;rw(t,"down");const i=IA(()=>{rw(t,"up")}),r=()=>rw(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",r,e)});t.addEventListener("keydown",s,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",s),e)};function BA(n){return GS(n)&&!jR()}function DI(n,e,t={}){const[s,i,r]=CR(n,t),o=c=>{const u=c.currentTarget;if(!BA(c))return;ny.add(u);const h=e(u,c),f=(y,N)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",x),ny.has(u)&&ny.delete(u),BA(y)&&typeof h=="function"&&h(y,{success:N})},g=y=>{f(y,u===window||u===document||t.useGlobalTarget||AR(u,y.target))},x=y=>{f(y,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",x,i)};return s.forEach(c=>{(t.useGlobalTarget?window:c).addEventListener("pointerdown",o,i),VS(c)&&(c.addEventListener("focus",h=>kI(h,i)),!ER(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),r}function YS(n){return MD(n)&&"ownerSVGElement"in n}const sy=new WeakMap;let iy;const _R=(n,e,t)=>(s,i)=>i&&i[0]?i[0][n+"Size"]:YS(s)&&"getBBox"in s?s.getBBox()[e]:s[t],RI=_R("inline","width","offsetWidth"),MI=_R("block","height","offsetHeight");function PI({target:n,borderBoxSize:e}){sy.get(n)?.forEach(t=>{t(n,{get width(){return RI(n,e)},get height(){return MI(n,e)}})})}function OI(n){n.forEach(PI)}function LI(){typeof ResizeObserver>"u"||(iy=new ResizeObserver(OI))}function FI(n,e){iy||LI();const t=SR(n);return t.forEach(s=>{let i=sy.get(s);i||(i=new Set,sy.set(s,i)),i.add(e),iy?.observe(s)}),()=>{t.forEach(s=>{const i=sy.get(s);i?.delete(e),i?.size||iy?.unobserve(s)})}}const ay=new Set;let Cm;function zI(){Cm=()=>{const n={get width(){return window.innerWidth},get height(){return window.innerHeight}};ay.forEach(e=>e(n))},window.addEventListener("resize",Cm)}function II(n){return ay.add(n),Cm||zI(),()=>{ay.delete(n),!ay.size&&typeof Cm=="function"&&(window.removeEventListener("resize",Cm),Cm=void 0)}}function BI(n,e){return typeof n=="function"?II(n):FI(n,e)}function TR(n,e){let t;const s=()=>{const{currentTime:i}=e,o=(i===null?0:i.value)/100;t!==o&&n(o),t=o};return Un.preUpdate(s,!0),()=>Rl(s)}function HI(n){return YS(n)&&n.tagName==="svg"}function UI(...n){const e=!Array.isArray(n[0]),t=e?0:-1,s=n[0+t],i=n[1+t],r=n[2+t],o=n[3+t],c=PS(i,r,o);return e?c(s):c}function VI(n,e,t){const s=n.get();let i=null,r=s,o;const c=typeof s=="string"?s.replace(/[\d.-]/g,""):void 0,u=()=>{i&&(i.stop(),i=null)},h=()=>{u(),i=new rv({keyframes:[UA(n.get()),UA(r)],velocity:n.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:o})};if(n.attach((f,g)=>{r=f,o=x=>g(HA(x,c)),Un.postRender(()=>{h(),n.events.animationStart?.notify(),i?.then(()=>{n.events.animationComplete?.notify()})})},u),Wi(e)){const f=e.on("change",x=>n.set(HA(x,c))),g=n.on("destroy",f);return()=>{f(),g()}}return u}function HA(n,e){return e?n+e:n}function UA(n){return typeof n=="number"?n:parseFloat(n)}const WI=[...yR,Ci,sh],GI=n=>WI.find(bR(n)),VA=()=>({translate:0,scale:1,origin:0,originPoint:0}),Am=()=>({x:VA(),y:VA()}),WA=()=>({min:0,max:0}),Hi=()=>({x:WA(),y:WA()}),j2={current:null},kR={current:!1},YI=typeof window<"u";function XI(){if(kR.current=!0,!!YI)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>j2.current=n.matches;n.addEventListener("change",e),e()}else j2.current=!1}const KI=new WeakMap;function ov(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function y0(n){return typeof n=="string"||Array.isArray(n)}const XS=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],KS=["initial",...XS];function lv(n){return ov(n.animate)||KS.some(e=>y0(n[e]))}function DR(n){return!!(lv(n)||n.variants)}function ZI(n,e,t){for(const s in e){const i=e[s],r=t[s];if(Wi(i))n.addValue(s,i);else if(Wi(r))n.addValue(s,El(i,{owner:n}));else if(r!==i)if(n.hasValue(s)){const o=n.getValue(s);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=n.getStaticValue(s);n.addValue(s,El(o!==void 0?o:i,{owner:n}))}}for(const s in t)e[s]===void 0&&n.removeValue(s);return e}const GA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let vy={};function RR(n){vy=n}function QI(){return vy}class JI{scrapeMotionValuesFromProps(e,t,s){return{}}constructor({parent:e,props:t,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:r,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=FS,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=tr.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Un.render(this.render,!1,!0))};const{latestValues:u,renderState:h}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=t.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=t,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!r,this.isControllingVariants=lv(t),this.isVariantNode=DR(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...g}=this.scrapeMotionValuesFromProps(t,{},this);for(const x in g){const y=g[x];u[x]!==void 0&&Wi(y)&&y.set(u[x])}}mount(e){this.current=e,KI.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,s)=>this.bindToMotionValue(s,t)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(kR.current||XI(),this.shouldReduceMotion=j2.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Rl(this.notifyUpdate),Rl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=dg.has(e);s&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Un.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;typeof window<"u"&&window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),r&&r(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in vy){const t=vy[e];if(!t)continue;const{isEnabled:s,Feature:i}=t;if(!this.features[e]&&i&&s(this.props)&&(this.features[e]=new i(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Hi()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let s=0;s<GA.length;s++){const i=GA[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const r="on"+i,o=e[r];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=ZI(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const s=this.values.get(e);t!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&t!==void 0&&(s=El(t===null?void 0:t,{owner:this}),this.addValue(e,s)),s}readValue(e,t){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(RD(s)||PD(s))?s=parseFloat(s):!GI(s)&&sh.test(t)&&(s=wR(e,t)),this.setBaseTarget(e,Wi(s)?s.get():s)),Wi(s)?s.get():s}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let s;if(typeof t=="string"||typeof t=="object"){const r=BS(this.props,t,this.presenceContext?.custom);r&&(s=r[e])}if(t&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Wi(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new CS),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){WS.render(this.render)}}class oh{constructor(e){this.isMounted=!1,this.node=e}update(){}}class MR extends JI{constructor(){super(...arguments),this.KeyframeResolver=AI}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const s=e.style;return s?s[t]:void 0}removeValueFromRenderState(e,{vars:t,style:s}){delete t[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Wi(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function PR({top:n,left:e,right:t,bottom:s}){return{x:{min:e,max:t},y:{min:n,max:s}}}function qI({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function $I(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),s=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:s.y,right:s.x}}function ow(n){return n===void 0||n===1}function C2({scale:n,scaleX:e,scaleY:t}){return!ow(n)||!ow(e)||!ow(t)}function Jh(n){return C2(n)||OR(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function OR(n){return YA(n.x)||YA(n.y)}function YA(n){return n&&n!=="0%"}function wy(n,e,t){const s=n-t,i=e*s;return t+i}function XA(n,e,t,s,i){return i!==void 0&&(n=wy(n,i,s)),wy(n,t,s)+e}function A2(n,e=0,t=1,s,i){n.min=XA(n.min,e,t,s,i),n.max=XA(n.max,e,t,s,i)}function LR(n,{x:e,y:t}){A2(n.x,e.translate,e.scale,e.originPoint),A2(n.y,t.translate,t.scale,t.originPoint)}const KA=.999999999999,ZA=1.0000000000001;function eB(n,e,t,s=!1){const i=t.length;if(!i)return;e.x=e.y=1;let r,o;for(let c=0;c<i;c++){r=t[c],o=r.projectionDelta;const{visualElement:u}=r.options;u&&u.props.style&&u.props.style.display==="contents"||(s&&r.options.layoutScroll&&r.scroll&&r!==r.root&&_m(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,LR(n,o)),s&&Jh(r.latestValues)&&_m(n,r.latestValues))}e.x<ZA&&e.x>KA&&(e.x=1),e.y<ZA&&e.y>KA&&(e.y=1)}function Em(n,e){n.min=n.min+e,n.max=n.max+e}function QA(n,e,t,s,i=.5){const r=Ms(n.min,n.max,i);A2(n,e,t,r,s)}function _m(n,e){QA(n.x,e.x,e.scaleX,e.scale,e.originX),QA(n.y,e.y,e.scaleY,e.scale,e.originY)}function FR(n,e){return PR($I(n.getBoundingClientRect(),e))}function tB(n,e,t){const s=FR(n,t),{scroll:i}=e;return i&&(Em(s.x,i.offset.x),Em(s.y,i.offset.y)),s}const nB={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},sB=cg.length;function iB(n,e,t){let s="",i=!0;for(let r=0;r<sB;r++){const o=cg[r],c=n[o];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(o.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||t){const h=NR(c,US[o]);if(!u){i=!1;const f=nB[o]||o;s+=`${f}(${h}) `}t&&(e[o]=h)}}return s=s.trim(),t?s=t(e,i?"":s):i&&(s="none"),s}function ZS(n,e,t){const{style:s,vars:i,transformOrigin:r}=n;let o=!1,c=!1;for(const u in e){const h=e[u];if(dg.has(u)){o=!0;continue}else if(XD(u)){i[u]=h;continue}else{const f=NR(h,US[u]);u.startsWith("origin")?(c=!0,r[u]=f):s[u]=f}}if(e.transform||(o||t?s.transform=iB(e,n.transform,t):s.transform&&(s.transform="none")),c){const{originX:u="50%",originY:h="50%",originZ:f=0}=r;s.transformOrigin=`${u} ${h} ${f}`}}function zR(n,{style:e,vars:t},s,i){const r=n.style;let o;for(o in e)r[o]=e[o];i?.applyProjectionStyles(r,s);for(o in t)r.setProperty(o,t[o])}function JA(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const _p={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(ft.test(n))n=parseFloat(n);else return n;const t=JA(n,e.target.x),s=JA(n,e.target.y);return`${t}% ${s}%`}},aB={correct:(n,{treeScale:e,projectionDelta:t})=>{const s=n,i=sh.parse(n);if(i.length>5)return s;const r=sh.createTransformer(n),o=typeof i[0]!="number"?1:0,c=t.x.scale*e.x,u=t.y.scale*e.y;i[0+o]/=c,i[1+o]/=u;const h=Ms(c,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=h),typeof i[3+o]=="number"&&(i[3+o]/=h),r(i)}},E2={borderRadius:{..._p,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_p,borderTopRightRadius:_p,borderBottomLeftRadius:_p,borderBottomRightRadius:_p,boxShadow:aB};function IR(n,{layout:e,layoutId:t}){return dg.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!E2[n]||n==="opacity")}function QS(n,e,t){const s=n.style,i=e?.style,r={};if(!s)return r;for(const o in s)(Wi(s[o])||i&&Wi(i[o])||IR(o,n)||t?.getValue(o)?.liveStyle!==void 0)&&(r[o]=s[o]);return r}function rB(n){return window.getComputedStyle(n)}class oB extends MR{constructor(){super(...arguments),this.type="html",this.renderInstance=zR}readValueFromInstance(e,t){if(dg.has(t))return this.projection?.isProjecting?m2(t):_z(e,t);{const s=rB(e),i=(XD(t)?s.getPropertyValue(t):s[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return FR(e,t)}build(e,t,s){ZS(e,t,s.transformTemplate)}scrapeMotionValuesFromProps(e,t,s){return QS(e,t,s)}}const lB={offset:"stroke-dashoffset",array:"stroke-dasharray"},cB={offset:"strokeDashoffset",array:"strokeDasharray"};function dB(n,e,t=1,s=0,i=!0){n.pathLength=1;const r=i?lB:cB;n[r.offset]=ft.transform(-s);const o=ft.transform(e),c=ft.transform(t);n[r.array]=`${o} ${c}`}const uB=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function BR(n,{attrX:e,attrY:t,attrScale:s,pathLength:i,pathSpacing:r=1,pathOffset:o=0,...c},u,h,f){if(ZS(n,c,h),u){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:g,style:x}=n;g.transform&&(x.transform=g.transform,delete g.transform),(x.transform||g.transformOrigin)&&(x.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),x.transform&&(x.transformBox=f?.transformBox??"fill-box",delete g.transformBox);for(const y of uB)g[y]!==void 0&&(x[y]=g[y],delete g[y]);e!==void 0&&(g.x=e),t!==void 0&&(g.y=t),s!==void 0&&(g.scale=s),i!==void 0&&dB(g,i,r,o,!1)}const HR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),UR=n=>typeof n=="string"&&n.toLowerCase()==="svg";function hB(n,e,t,s){zR(n,e,void 0,s);for(const i in e.attrs)n.setAttribute(HR.has(i)?i:HS(i),e.attrs[i])}function VR(n,e,t){const s=QS(n,e,t);for(const i in n)if(Wi(n[i])||Wi(e[i])){const r=cg.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[r]=n[i]}return s}class fB extends MR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Hi}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(dg.has(t)){const s=vR(t);return s&&s.default||0}return t=HR.has(t)?t:HS(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,s){return VR(e,t,s)}build(e,t,s){BR(e,t,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,t,s,i){hB(e,t,s,i)}mount(e){this.isSVGTag=UR(e.tagName),super.mount(e)}}const mB=KS.length;function WR(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?WR(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<mB;t++){const s=KS[t],i=n.props[s];(y0(i)||i===!1)&&(e[s]=i)}return e}function GR(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let s=0;s<t;s++)if(e[s]!==n[s])return!1;return!0}const gB=[...XS].reverse(),pB=XS.length;function xB(n){return e=>Promise.all(e.map(({animation:t,options:s})=>pI(n,t,s)))}function bB(n){let e=xB(n),t=qA(),s=!0;const i=u=>(h,f)=>{const g=Mm(n,f,u==="exit"?n.presenceContext?.custom:void 0);if(g){const{transition:x,transitionEnd:y,...N}=g;h={...h,...N,...y}}return h};function r(u){e=u(n)}function o(u){const{props:h}=n,f=WR(n.parent)||{},g=[],x=new Set;let y={},N=1/0;for(let E=0;E<pB;E++){const A=gB[E],R=t[A],M=h[A]!==void 0?h[A]:f[A],L=y0(M),z=A===u?R.isActive:null;z===!1&&(N=E);let W=M===f[A]&&M!==h[A]&&L;if(W&&s&&n.manuallyAnimateOnMount&&(W=!1),R.protectedKeys={...y},!R.isActive&&z===null||!M&&!R.prevProp||ov(M)||typeof M=="boolean")continue;const I=yB(R.prevProp,M);let Y=I||A===u&&R.isActive&&!W&&L||E>N&&L,U=!1;const Z=Array.isArray(M)?M:[M];let $=Z.reduce(i(A),{});z===!1&&($={});const{prevResolvedValues:ae={}}=R,xe={...ae,...$},fe=X=>{Y=!0,x.has(X)&&(U=!0,x.delete(X)),R.needsAnimating[X]=!0;const se=n.getValue(X);se&&(se.liveStyle=!1)};for(const X in xe){const se=$[X],ee=ae[X];if(y.hasOwnProperty(X))continue;let ne=!1;v2(se)&&v2(ee)?ne=!GR(se,ee):ne=se!==ee,ne?se!=null?fe(X):x.add(X):se!==void 0&&x.has(X)?fe(X):R.protectedKeys[X]=!0}R.prevProp=M,R.prevResolvedValues=$,R.isActive&&(y={...y,...$}),s&&n.blockInitialAnimation&&(Y=!1);const ke=W&&I;Y&&(!ke||U)&&g.push(...Z.map(X=>{const se={type:A};if(typeof X=="string"&&s&&!ke&&n.manuallyAnimateOnMount&&n.parent){const{parent:ee}=n,ne=Mm(ee,X);if(ee.enteringChildren&&ne){const{delayChildren:V}=ne.transition||{};se.delay=fR(ee.enteringChildren,n,V)}}return{animation:X,options:se}}))}if(x.size){const E={};if(typeof h.initial!="boolean"){const A=Mm(n,Array.isArray(h.initial)?h.initial[0]:h.initial);A&&A.transition&&(E.transition=A.transition)}x.forEach(A=>{const R=n.getBaseTarget(A),M=n.getValue(A);M&&(M.liveStyle=!0),E[A]=R??null}),g.push({animation:E})}let j=!!g.length;return s&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(j=!1),s=!1,j?e(g):Promise.resolve()}function c(u,h){if(t[u].isActive===h)return Promise.resolve();n.variantChildren?.forEach(g=>g.animationState?.setActive(u,h)),t[u].isActive=h;const f=o(u);for(const g in t)t[g].protectedKeys={};return f}return{animateChanges:o,setActive:c,setAnimateFunction:r,getState:()=>t,reset:()=>{t=qA()}}}function yB(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!GR(e,n):!1}function Vh(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function qA(){return{animate:Vh(!0),whileInView:Vh(),whileHover:Vh(),whileTap:Vh(),whileDrag:Vh(),whileFocus:Vh(),exit:Vh()}}const YR=1e-4,vB=1-YR,wB=1+YR,XR=.01,SB=0-XR,NB=0+XR;function nr(n){return n.max-n.min}function jB(n,e,t){return Math.abs(n-e)<=t}function $A(n,e,t,s=.5){n.origin=s,n.originPoint=Ms(e.min,e.max,n.origin),n.scale=nr(t)/nr(e),n.translate=Ms(t.min,t.max,n.origin)-n.originPoint,(n.scale>=vB&&n.scale<=wB||isNaN(n.scale))&&(n.scale=1),(n.translate>=SB&&n.translate<=NB||isNaN(n.translate))&&(n.translate=0)}function n0(n,e,t,s){$A(n.x,e.x,t.x,s?s.originX:void 0),$A(n.y,e.y,t.y,s?s.originY:void 0)}function eE(n,e,t){n.min=t.min+e.min,n.max=n.min+nr(e)}function CB(n,e,t){eE(n.x,e.x,t.x),eE(n.y,e.y,t.y)}function tE(n,e,t){n.min=e.min-t.min,n.max=n.min+nr(e)}function Sy(n,e,t){tE(n.x,e.x,t.x),tE(n.y,e.y,t.y)}function nE(n,e,t,s,i){return n-=e,n=wy(n,1/t,s),i!==void 0&&(n=wy(n,1/i,s)),n}function AB(n,e=0,t=1,s=.5,i,r=n,o=n){if(Mc.test(e)&&(e=parseFloat(e),e=Ms(o.min,o.max,e/100)-o.min),typeof e!="number")return;let c=Ms(r.min,r.max,s);n===r&&(c-=e),n.min=nE(n.min,e,t,c,i),n.max=nE(n.max,e,t,c,i)}function sE(n,e,[t,s,i],r,o){AB(n,e[t],e[s],e[i],e.scale,r,o)}const EB=["x","scaleX","originX"],_B=["y","scaleY","originY"];function iE(n,e,t,s){sE(n.x,e,EB,t?t.x:void 0,s?s.x:void 0),sE(n.y,e,_B,t?t.y:void 0,s?s.y:void 0)}function aE(n,e){n.min=e.min,n.max=e.max}function Nl(n,e){aE(n.x,e.x),aE(n.y,e.y)}function rE(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function oE(n){return n.translate===0&&n.scale===1}function KR(n){return oE(n.x)&&oE(n.y)}function lE(n,e){return n.min===e.min&&n.max===e.max}function TB(n,e){return lE(n.x,e.x)&&lE(n.y,e.y)}function cE(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function ZR(n,e){return cE(n.x,e.x)&&cE(n.y,e.y)}function dE(n){return nr(n.x)/nr(n.y)}function uE(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function Lo(n){return[n("x"),n("y")]}function kB(n,e,t){let s="";const i=n.x.translate/e.x,r=n.y.translate/e.y,o=t?.z||0;if((i||r||o)&&(s=`translate3d(${i}px, ${r}px, ${o}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:h,rotate:f,rotateX:g,rotateY:x,skewX:y,skewY:N}=t;h&&(s=`perspective(${h}px) ${s}`),f&&(s+=`rotate(${f}deg) `),g&&(s+=`rotateX(${g}deg) `),x&&(s+=`rotateY(${x}deg) `),y&&(s+=`skewX(${y}deg) `),N&&(s+=`skewY(${N}deg) `)}const c=n.x.scale*e.x,u=n.y.scale*e.y;return(c!==1||u!==1)&&(s+=`scale(${c}, ${u})`),s||"none"}const QR=["TopLeft","TopRight","BottomLeft","BottomRight"],DB=QR.length,hE=n=>typeof n=="string"?parseFloat(n):n,fE=n=>typeof n=="number"||ft.test(n);function RB(n,e,t,s,i,r){i?(n.opacity=Ms(0,t.opacity??1,MB(s)),n.opacityExit=Ms(e.opacity??1,0,PB(s))):r&&(n.opacity=Ms(e.opacity??1,t.opacity??1,s));for(let o=0;o<DB;o++){const c=`border${QR[o]}Radius`;let u=mE(e,c),h=mE(t,c);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||fE(u)===fE(h)?(n[c]=Math.max(Ms(hE(u),hE(h),s),0),(Mc.test(h)||Mc.test(u))&&(n[c]+="%")):n[c]=h}(e.rotate||t.rotate)&&(n.rotate=Ms(e.rotate||0,t.rotate||0,s))}function mE(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const MB=JR(0,.5,HD),PB=JR(.5,.95,Er);function JR(n,e,t){return s=>s<n?0:s>e?1:t(Gm(n,e,s))}function OB(n,e){const t=tr.now(),s=({timestamp:i})=>{const r=i-t;r>=e&&(Rl(s),n(r-e))};return Un.setup(s,!0),()=>Rl(s)}function v0(n,e,t,s={passive:!0}){return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t)}function ry(n){return Wi(n)?n.get():n}function LB(n,e,t){const s=Wi(n)?n:El(n);return s.start(IS("",s,e,t)),s.animation}const FB=(n,e)=>n.depth-e.depth;class zB{constructor(){this.children=[],this.isDirty=!1}add(e){SS(this.children,e),this.isDirty=!0}remove(e){NS(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(FB),this.isDirty=!1,this.children.forEach(e)}}class IB{constructor(){this.members=[]}add(e){SS(this.members,e),e.scheduleRender()}remove(e){if(NS(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let s;for(let i=t;i>=0;i--){const r=this.members[i];if(r.isPresent!==!1){s=r;break}}return s?(this.promote(s),!0):!1}promote(e,t){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:s}=e;t.onExitComplete&&t.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const oy={hasAnimatedSinceResize:!0,hasEverUpdated:!1},lw=["","X","Y","Z"],BB=1e3;let HB=0;function cw(n,e,t,s){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),s&&(s[n]=0))}function qR(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=pR(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:r}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Un,!(i||r))}const{parent:s}=n;s&&!s.hasCheckedOptimisedAppear&&qR(s)}function $R({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(o={},c=e?.()){this.id=HB++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(WB),this.nodes.forEach(KB),this.nodes.forEach(ZB),this.nodes.forEach(GB)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new zB)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new CS),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const u=this.eventHandlers.get(o);u&&u.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=YS(o)&&!HI(o),this.instance=o;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),n){let f,g=0;const x=()=>this.root.updateBlockedByResize=!1;Un.read(()=>{g=window.innerWidth}),n(o,()=>{const y=window.innerWidth;y!==g&&(g=y,this.root.updateBlockedByResize=!0,f&&f(),f=OB(x,250),oy.hasAnimatedSinceResize&&(oy.hasAnimatedSinceResize=!1,this.nodes.forEach(xE)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:g,hasRelativeLayoutChanged:x,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||h.getDefaultTransition()||e8,{onLayoutAnimationStart:j,onLayoutAnimationComplete:E}=h.getProps(),A=!this.targetLayout||!ZR(this.targetLayout,y),R=!g&&x;if(this.options.layoutRoot||this.resumeFrom||R||g&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const M={...zS(N,"layout"),onPlay:j,onComplete:E};(h.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M),this.setAnimationOrigin(f,R)}else g||xE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Rl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(QB),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&qR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const g=this.path[f];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(gE);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(pE);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(XB),this.nodes.forEach(UB),this.nodes.forEach(VB)):this.nodes.forEach(pE),this.clearAllSnapshots();const c=tr.now();ia.delta=Dl(0,1e3/60,c-ia.timestamp),ia.timestamp=c,ia.isProcessing=!0,ew.update.process(ia),ew.preRender.process(ia),ew.render.process(ia),ia.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,WS.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(YB),this.sharedNodes.forEach(JB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Un.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Un.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!nr(this.snapshot.measuredBox.x)&&!nr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Hi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const u=s(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!KR(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;o&&this.instance&&(c||Jh(this.latestValues)||f)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return o&&(u=this.removeTransform(u)),t8(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Hi();const c=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(n8))){const{scroll:h}=this.root;h&&(Em(c.x,h.offset.x),Em(c.y,h.offset.y))}return c}removeElementScroll(o){const c=Hi();if(Nl(c,o),this.scroll?.wasRoot)return c;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:f,options:g}=h;h!==this.root&&f&&g.layoutScroll&&(f.wasRoot&&Nl(c,o),Em(c.x,f.offset.x),Em(c.y,f.offset.y))}return c}applyTransform(o,c=!1){const u=Hi();Nl(u,o);for(let h=0;h<this.path.length;h++){const f=this.path[h];!c&&f.options.layoutScroll&&f.scroll&&f!==f.root&&_m(u,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Jh(f.latestValues)&&_m(u,f.latestValues)}return Jh(this.latestValues)&&_m(u,this.latestValues),u}removeTransform(o){const c=Hi();Nl(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!Jh(h.latestValues))continue;C2(h.latestValues)&&h.updateSnapshot();const f=Hi(),g=h.measurePageBox();Nl(f,g),iE(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return Jh(this.latestValues)&&iE(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ia.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:g}=this.options;if(!this.layout||!(f||g))return;this.resolvedRelativeTargetAt=ia.timestamp;const x=this.getClosestProjectingParent();x&&this.linkedParentVersion!==x.layoutVersion&&!x.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(x&&x.layout?this.createRelativeTarget(x,this.layout.layoutBox,x.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Hi(),this.targetWithTransforms=Hi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),CB(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Nl(this.target,this.layout.layoutBox),LR(this.target,this.targetDelta)):Nl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?this.createRelativeTarget(x,this.target,x.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||C2(this.parent.latestValues)||OR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,c,u){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Hi(),this.relativeTargetOrigin=Hi(),Sy(this.relativeTargetOrigin,c,u),Nl(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===ia.timestamp&&(u=!1),u)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;Nl(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,x=this.treeScale.y;eB(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Hi());const{target:y}=o;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(rE(this.prevProjectionDelta.x,this.projectionDelta.x),rE(this.prevProjectionDelta.y,this.projectionDelta.y)),n0(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==x||!uE(this.projectionDelta.x,this.prevProjectionDelta.x)||!uE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Am(),this.projectionDelta=Am(),this.projectionDeltaWithTransform=Am()}setAnimationOrigin(o,c=!1){const u=this.snapshot,h=u?u.latestValues:{},f={...this.latestValues},g=Am();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const x=Hi(),y=u?u.source:void 0,N=this.layout?this.layout.source:void 0,j=y!==N,E=this.getStack(),A=!E||E.members.length<=1,R=!!(j&&!A&&this.options.crossfade===!0&&!this.path.some($B));this.animationProgress=0;let M;this.mixTargetDelta=L=>{const z=L/1e3;bE(g.x,o.x,z),bE(g.y,o.y,z),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Sy(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),qB(this.relativeTarget,this.relativeTargetOrigin,x,z),M&&TB(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=Hi()),Nl(M,this.relativeTarget)),j&&(this.animationValues=f,RB(f,h,this.latestValues,z,R,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Rl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Un.update(()=>{oy.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=El(0)),this.currentAnimation=LB(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(BB),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:u,layout:h,latestValues:f}=o;if(!(!c||!u||!h)){if(this!==o&&this.layout&&h&&e5(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||Hi();const g=nr(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+g;const x=nr(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+x}Nl(c,u),_m(c,f),n0(this.projectionDeltaWithTransform,this.layoutCorrected,c,f)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new IB),this.sharedNodes.get(o).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const h={};u.z&&cw("z",o,h,this.animationValues);for(let f=0;f<lw.length;f++)cw(`rotate${lw[f]}`,o,h,this.animationValues),cw(`skew${lw[f]}`,o,h,this.animationValues);o.render();for(const f in h)o.setStaticValue(f,h[f]),this.animationValues&&(this.animationValues[f]=h[f]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=ry(c?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=ry(c?.pointerEvents)||""),this.hasProjected&&!Jh(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const f=h.animationValues||h.latestValues;this.applyTransformsToTarget();let g=kB(this.projectionDeltaWithTransform,this.treeScale,f);u&&(g=u(f,g)),o.transform=g;const{x,y}=this.projectionDelta;o.transformOrigin=`${x.origin*100}% ${y.origin*100}% 0`,h.animationValues?o.opacity=h===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:o.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const N in E2){if(f[N]===void 0)continue;const{correct:j,applyTo:E,isCSSVariable:A}=E2[N],R=g==="none"?f[N]:j(f[N],h);if(E){const M=E.length;for(let L=0;L<M;L++)o[E[L]]=R}else A?this.options.visualElement.renderState.vars[N]=R:o[N]=R}this.options.layoutId&&(o.pointerEvents=h===this?ry(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(gE),this.root.sharedNodes.clear()}}}function UB(n){n.updateLayout()}function VB(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:s}=n.layout,{animationType:i}=n.options,r=e.source!==n.layout.source;i==="size"?Lo(f=>{const g=r?e.measuredBox[f]:e.layoutBox[f],x=nr(g);g.min=t[f].min,g.max=g.min+x}):e5(i,e.layoutBox,t)&&Lo(f=>{const g=r?e.measuredBox[f]:e.layoutBox[f],x=nr(t[f]);g.max=g.min+x,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[f].max=n.relativeTarget[f].min+x)});const o=Am();n0(o,t,e.layoutBox);const c=Am();r?n0(c,n.applyTransform(s,!0),e.measuredBox):n0(c,t,e.layoutBox);const u=!KR(o);let h=!1;if(!n.resumeFrom){const f=n.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:g,layout:x}=f;if(g&&x){const y=Hi();Sy(y,e.layoutBox,g.layoutBox);const N=Hi();Sy(N,t,x.layoutBox),ZR(y,N)||(h=!0),f.options.layoutRoot&&(n.relativeTarget=N,n.relativeTargetOrigin=y,n.relativeParent=f)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:h})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function WB(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function GB(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function YB(n){n.clearSnapshot()}function gE(n){n.clearMeasurements()}function pE(n){n.isLayoutDirty=!1}function XB(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function xE(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function KB(n){n.resolveTargetDelta()}function ZB(n){n.calcProjection()}function QB(n){n.resetSkewAndRotation()}function JB(n){n.removeLeadSnapshot()}function bE(n,e,t){n.translate=Ms(e.translate,0,t),n.scale=Ms(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function yE(n,e,t,s){n.min=Ms(e.min,t.min,s),n.max=Ms(e.max,t.max,s)}function qB(n,e,t,s){yE(n.x,e.x,t.x,s),yE(n.y,e.y,t.y,s)}function $B(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const e8={duration:.45,ease:[.4,0,.1,1]},vE=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),wE=vE("applewebkit/")&&!vE("chrome/")?Math.round:Er;function SE(n){n.min=wE(n.min),n.max=wE(n.max)}function t8(n){SE(n.x),SE(n.y)}function e5(n,e,t){return n==="position"||n==="preserve-aspect"&&!jB(dE(e),dE(t),.2)}function n8(n){return n!==n.root&&n.scroll?.wasRoot}const s8=$R({attachResizeListener:(n,e)=>v0(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),dw={current:void 0},t5=$R({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!dw.current){const n=new s8({});n.mount(window),n.setOptions({layoutScroll:!0}),dw.current=n}return dw.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),J0=_.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function NE(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function i8(...n){return e=>{let t=!1;const s=n.map(i=>{const r=NE(i,e);return!t&&typeof r=="function"&&(t=!0),r});if(t)return()=>{for(let i=0;i<s.length;i++){const r=s[i];typeof r=="function"?r():NE(n[i],null)}}}}function a8(...n){return _.useCallback(i8(...n),n)}class r8 extends _.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const s=t.offsetParent,i=VS(s)&&s.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=i-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function o8({children:n,isPresent:e,anchorX:t,root:s}){const i=_.useId(),r=_.useRef(null),o=_.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=_.useContext(J0),u=n.props?.ref??n?.ref,h=a8(r,u);return _.useInsertionEffect(()=>{const{width:f,height:g,top:x,left:y,right:N}=o.current;if(e||!r.current||!f||!g)return;const j=t==="left"?`left: ${y}`:`right: ${N}`;r.current.dataset.motionPopId=i;const E=document.createElement("style");c&&(E.nonce=c);const A=s??document.head;return A.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${g}px !important;
            ${j}px !important;
            top: ${x}px !important;
          }
        `),()=>{A.contains(E)&&A.removeChild(E)}},[e]),a.jsx(r8,{isPresent:e,childRef:r,sizeRef:o,children:_.cloneElement(n,{ref:h})})}const l8=({children:n,initial:e,isPresent:t,onExitComplete:s,custom:i,presenceAffectsLayout:r,mode:o,anchorX:c,root:u})=>{const h=rh(c8),f=_.useId();let g=!0,x=_.useMemo(()=>(g=!1,{id:f,initial:e,isPresent:t,custom:i,onExitComplete:y=>{h.set(y,!0);for(const N of h.values())if(!N)return;s&&s()},register:y=>(h.set(y,!1),()=>h.delete(y))}),[t,h,s]);return r&&g&&(x={...x}),_.useMemo(()=>{h.forEach((y,N)=>h.set(N,!1))},[t]),_.useEffect(()=>{!t&&!h.size&&s&&s()},[t]),o==="popLayout"&&(n=a.jsx(o8,{isPresent:t,anchorX:c,root:u,children:n})),a.jsx(av.Provider,{value:x,children:n})};function c8(){return new Map}function n5(n=!0){const e=_.useContext(av);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:i}=e,r=_.useId();_.useEffect(()=>{if(n)return i(r)},[n]);const o=_.useCallback(()=>n&&s&&s(r),[r,s,n]);return!t&&s?[!1,o]:[!0]}const gb=n=>n.key||"";function jE(n){const e=[];return _.Children.forEach(n,t=>{_.isValidElement(t)&&e.push(t)}),e}const dn=({children:n,custom:e,initial:t=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:r="sync",propagate:o=!1,anchorX:c="left",root:u})=>{const[h,f]=n5(o),g=_.useMemo(()=>jE(n),[n]),x=o&&!h?[]:g.map(gb),y=_.useRef(!0),N=_.useRef(g),j=rh(()=>new Map),E=_.useRef(new Set),[A,R]=_.useState(g),[M,L]=_.useState(g);iv(()=>{y.current=!1,N.current=g;for(let I=0;I<M.length;I++){const Y=gb(M[I]);x.includes(Y)?(j.delete(Y),E.current.delete(Y)):j.get(Y)!==!0&&j.set(Y,!1)}},[M,x.length,x.join("-")]);const z=[];if(g!==A){let I=[...g];for(let Y=0;Y<M.length;Y++){const U=M[Y],Z=gb(U);x.includes(Z)||(I.splice(Y,0,U),z.push(U))}return r==="wait"&&z.length&&(I=z),L(jE(I)),R(g),null}const{forceRender:W}=_.useContext(wS);return a.jsx(a.Fragment,{children:M.map(I=>{const Y=gb(I),U=o&&!h?!1:g===M||x.includes(Y),Z=()=>{if(E.current.has(Y))return;if(E.current.add(Y),j.has(Y))j.set(Y,!0);else return;let $=!0;j.forEach(ae=>{ae||($=!1)}),$&&(W?.(),L(N.current),o&&f?.(),s&&s())};return a.jsx(l8,{isPresent:U,initial:!y.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:r,root:u,onExitComplete:U?void 0:Z,anchorX:c,children:I},Y)})})},s5=_.createContext({strict:!1}),CE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let AE=!1;function d8(){if(AE)return;const n={};for(const e in CE)n[e]={isEnabled:t=>CE[e].some(s=>!!t[s])};RR(n),AE=!0}function i5(){return d8(),QI()}function u8(n){const e=i5();for(const t in n)e[t]={...e[t],...n[t]};RR(e)}const h8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ny(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||h8.has(n)}let a5=n=>!Ny(n);function f8(n){typeof n=="function"&&(a5=e=>e.startsWith("on")?!Ny(e):n(e))}try{f8(require("@emotion/is-prop-valid").default)}catch{}function m8(n,e,t){const s={};for(const i in n)i==="values"&&typeof n.values=="object"||(a5(i)||t===!0&&Ny(i)||!e&&!Ny(i)||n.draggable&&i.startsWith("onDrag"))&&(s[i]=n[i]);return s}const cv=_.createContext({});function g8(n,e){if(lv(n)){const{initial:t,animate:s}=n;return{initial:t===!1||y0(t)?t:void 0,animate:y0(s)?s:void 0}}return n.inherit!==!1?e:{}}function p8(n){const{initial:e,animate:t}=g8(n,_.useContext(cv));return _.useMemo(()=>({initial:e,animate:t}),[EE(e),EE(t)])}function EE(n){return Array.isArray(n)?n.join(" "):n}const JS=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function r5(n,e,t){for(const s in e)!Wi(e[s])&&!IR(s,t)&&(n[s]=e[s])}function x8({transformTemplate:n},e){return _.useMemo(()=>{const t=JS();return ZS(t,e,n),Object.assign({},t.vars,t.style)},[e])}function b8(n,e){const t=n.style||{},s={};return r5(s,t,n),Object.assign(s,x8(n,e)),s}function y8(n,e){const t={},s=b8(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=s,t}const o5=()=>({...JS(),attrs:{}});function v8(n,e,t,s){const i=_.useMemo(()=>{const r=o5();return BR(r,e,UR(s),n.transformTemplate,n.style),{...r.attrs,style:{...r.style}}},[e]);if(n.style){const r={};r5(r,n.style,n),i.style={...r,...i.style}}return i}const w8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function qS(n){return typeof n!="string"||n.includes("-")?!1:!!(w8.indexOf(n)>-1||/[A-Z]/u.test(n))}function S8(n,e,t,{latestValues:s},i,r=!1,o){const u=(o??qS(n)?v8:y8)(e,s,i,n),h=m8(e,typeof n=="string",r),f=n!==_.Fragment?{...h,...u,ref:t}:{},{children:g}=e,x=_.useMemo(()=>Wi(g)?g.get():g,[g]);return _.createElement(n,{...f,children:x})}function N8({scrapeMotionValuesFromProps:n,createRenderState:e},t,s,i){return{latestValues:j8(t,s,i,n),renderState:e()}}function j8(n,e,t,s){const i={},r=s(n,{});for(const x in r)i[x]=ry(r[x]);let{initial:o,animate:c}=n;const u=lv(n),h=DR(n);e&&h&&!u&&n.inherit!==!1&&(o===void 0&&(o=e.initial),c===void 0&&(c=e.animate));let f=t?t.initial===!1:!1;f=f||o===!1;const g=f?c:o;if(g&&typeof g!="boolean"&&!ov(g)){const x=Array.isArray(g)?g:[g];for(let y=0;y<x.length;y++){const N=BS(n,x[y]);if(N){const{transitionEnd:j,transition:E,...A}=N;for(const R in A){let M=A[R];if(Array.isArray(M)){const L=f?M.length-1:0;M=M[L]}M!==null&&(i[R]=M)}for(const R in j)i[R]=j[R]}}}return i}const l5=n=>(e,t)=>{const s=_.useContext(cv),i=_.useContext(av),r=()=>N8(n,e,s,i);return t?r():rh(r)},C8=l5({scrapeMotionValuesFromProps:QS,createRenderState:JS}),A8=l5({scrapeMotionValuesFromProps:VR,createRenderState:o5}),E8=Symbol.for("motionComponentSymbol");function _8(n,e,t){const s=_.useRef(t);_.useInsertionEffect(()=>{s.current=t});const i=_.useRef(null);return _.useCallback(r=>{r&&n.onMount?.(r),e&&(r?e.mount(r):e.unmount());const o=s.current;if(typeof o=="function")if(r){const c=o(r);typeof c=="function"&&(i.current=c)}else i.current?(i.current(),i.current=null):o(r);else o&&(o.current=r)},[e])}const c5=_.createContext({});function Gp(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function T8(n,e,t,s,i,r){const{visualElement:o}=_.useContext(cv),c=_.useContext(s5),u=_.useContext(av),h=_.useContext(J0).reducedMotion,f=_.useRef(null);s=s||c.renderer,!f.current&&s&&(f.current=s(n,{visualState:e,parent:o,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h,isSVG:r}));const g=f.current,x=_.useContext(c5);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&k8(f.current,t,i,x);const y=_.useRef(!1);_.useInsertionEffect(()=>{g&&y.current&&g.update(t,u)});const N=t[gR],j=_.useRef(!!N&&!window.MotionHandoffIsComplete?.(N)&&window.MotionHasOptimisedAnimation?.(N));return iv(()=>{g&&(y.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),j.current&&g.animationState&&g.animationState.animateChanges())}),_.useEffect(()=>{g&&(!j.current&&g.animationState&&g.animationState.animateChanges(),j.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(N)}),j.current=!1),g.enteringChildren=void 0)}),g}function k8(n,e,t,s){const{layoutId:i,layout:r,drag:o,dragConstraints:c,layoutScroll:u,layoutRoot:h,layoutCrossfade:f}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:d5(n.parent)),n.projection.setOptions({layoutId:i,layout:r,alwaysMeasureLayout:!!o||c&&Gp(c),visualElement:n,animationType:typeof r=="string"?r:"both",initialPromotionConfig:s,crossfade:f,layoutScroll:u,layoutRoot:h})}function d5(n){if(n)return n.options.allowProjection!==!1?n.projection:d5(n.parent)}function uw(n,{forwardMotionProps:e=!1,type:t}={},s,i){s&&u8(s);const r=t?t==="svg":qS(n),o=r?A8:C8;function c(h,f){let g;const x={..._.useContext(J0),...h,layoutId:D8(h)},{isStatic:y}=x,N=p8(h),j=o(h,y);if(!y&&DD){R8();const E=M8(x);g=E.MeasureLayout,N.visualElement=T8(n,j,x,i,E.ProjectionNode,r)}return a.jsxs(cv.Provider,{value:N,children:[g&&N.visualElement?a.jsx(g,{visualElement:N.visualElement,...x}):null,S8(n,h,_8(j,N.visualElement,f),j,y,e,r)]})}c.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const u=_.forwardRef(c);return u[E8]=n,u}function D8({layoutId:n}){const e=_.useContext(wS).id;return e&&n!==void 0?e+"-"+n:n}function R8(n,e){_.useContext(s5).strict}function M8(n){const e=i5(),{drag:t,layout:s}=e;if(!t&&!s)return{};const i={...t,...s};return{MeasureLayout:t?.isEnabled(n)||s?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function P8(n,e){if(typeof Proxy>"u")return uw;const t=new Map,s=(r,o)=>uw(r,o,n,e),i=(r,o)=>s(r,o);return new Proxy(i,{get:(r,o)=>o==="create"?s:(t.has(o)||t.set(o,uw(o,void 0,n,e)),t.get(o))})}const O8=(n,e)=>e.isSVG??qS(n)?new fB(e):new oB(e,{allowProjection:n!==_.Fragment});class L8 extends oh{constructor(e){super(e),e.animationState||(e.animationState=bB(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ov(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let F8=0;class z8 extends oh{constructor(){super(...arguments),this.id=F8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const I8={animation:{Feature:L8},exit:{Feature:z8}};function q0(n){return{point:{x:n.pageX,y:n.pageY}}}const B8=n=>e=>GS(e)&&n(e,q0(e));function s0(n,e,t,s){return v0(n,e,B8(t),s)}const u5=({current:n})=>n?n.ownerDocument.defaultView:null,_E=(n,e)=>Math.abs(n-e);function H8(n,e){const t=_E(n.x,e.x),s=_E(n.y,e.y);return Math.sqrt(t**2+s**2)}const TE=new Set(["auto","scroll"]);class h5{constructor(e,t,{transformPagePoint:s,contextWindow:i=window,dragSnapToOrigin:r=!1,distanceThreshold:o=3,element:c}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=y=>{this.handleScroll(y.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=fw(this.lastMoveEventInfo,this.history),N=this.startEvent!==null,j=H8(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!N&&!j)return;const{point:E}=y,{timestamp:A}=ia;this.history.push({...E,timestamp:A});const{onStart:R,onMove:M}=this.handlers;N||(R&&R(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,y)},this.handlePointerMove=(y,N)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=hw(N,this.transformPagePoint),Un.update(this.updatePoint,!0)},this.handlePointerUp=(y,N)=>{this.end();const{onEnd:j,onSessionEnd:E,resumeAnimation:A}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=fw(y.type==="pointercancel"?this.lastMoveEventInfo:hw(N,this.transformPagePoint),this.history);this.startEvent&&j&&j(y,R),E&&E(y,R)},!GS(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=s,this.distanceThreshold=o,this.contextWindow=i||window;const u=q0(e),h=hw(u,this.transformPagePoint),{point:f}=h,{timestamp:g}=ia;this.history=[{...f,timestamp:g}];const{onSessionStart:x}=t;x&&x(e,fw(h,this.history)),this.removeListeners=K0(s0(this.contextWindow,"pointermove",this.handlePointerMove),s0(this.contextWindow,"pointerup",this.handlePointerUp),s0(this.contextWindow,"pointercancel",this.handlePointerUp)),c&&this.startScrollTracking(c)}startScrollTracking(e){let t=e.parentElement;for(;t;){const s=getComputedStyle(t);(TE.has(s.overflowX)||TE.has(s.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const s=e===window,i=s?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},r={x:i.x-t.x,y:i.y-t.y};r.x===0&&r.y===0||(s?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=r.x,this.lastMoveEventInfo.point.y+=r.y):this.history.length>0&&(this.history[0].x-=r.x,this.history[0].y-=r.y),this.scrollPositions.set(e,i),Un.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Rl(this.updatePoint)}}function hw(n,e){return e?{point:e(n.point)}:n}function kE(n,e){return{x:n.x-e.x,y:n.y-e.y}}function fw({point:n},e){return{point:n,delta:kE(n,f5(e)),offset:kE(n,U8(e)),velocity:V8(e,.1)}}function U8(n){return n[0]}function f5(n){return n[n.length-1]}function V8(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,s=null;const i=f5(n);for(;t>=0&&(s=n[t],!(i.timestamp-s.timestamp>Ed(e)));)t--;if(!s)return{x:0,y:0};const r=Io(i.timestamp-s.timestamp);if(r===0)return{x:0,y:0};const o={x:(i.x-s.x)/r,y:(i.y-s.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function W8(n,{min:e,max:t},s){return e!==void 0&&n<e?n=s?Ms(e,n,s.min):Math.max(n,e):t!==void 0&&n>t&&(n=s?Ms(t,n,s.max):Math.min(n,t)),n}function DE(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function G8(n,{top:e,left:t,bottom:s,right:i}){return{x:DE(n.x,t,i),y:DE(n.y,e,s)}}function RE(n,e){let t=e.min-n.min,s=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,s]=[s,t]),{min:t,max:s}}function Y8(n,e){return{x:RE(n.x,e.x),y:RE(n.y,e.y)}}function X8(n,e){let t=.5;const s=nr(n),i=nr(e);return i>s?t=Gm(e.min,e.max-s,n.min):s>i&&(t=Gm(n.min,n.max-i,e.min)),Dl(0,1,t)}function K8(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const _2=.35;function Z8(n=_2){return n===!1?n=0:n===!0&&(n=_2),{x:ME(n,"left","right"),y:ME(n,"top","bottom")}}function ME(n,e,t){return{min:PE(n,e),max:PE(n,t)}}function PE(n,e){return typeof n=="number"?n:n[e]||0}const Q8=new WeakMap;class J8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Hi(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:s}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=g=>{t?(this.stopAnimation(),this.snapToCursor(q0(g).point)):this.pauseAnimation()},o=(g,x)=>{this.stopAnimation();const{drag:y,dragPropagation:N,onDragStart:j}=this.getProps();if(y&&!N&&(this.openDragLock&&this.openDragLock(),this.openDragLock=EI(y),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Lo(A=>{let R=this.getAxisMotionValue(A).get()||0;if(Mc.test(R)){const{projection:M}=this.visualElement;if(M&&M.layout){const L=M.layout.layoutBox[A];L&&(R=nr(L)*(parseFloat(R)/100))}}this.originPoint[A]=R}),j&&Un.postRender(()=>j(g,x)),w2(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},c=(g,x)=>{this.latestPointerEvent=g,this.latestPanInfo=x;const{dragPropagation:y,dragDirectionLock:N,onDirectionLock:j,onDrag:E}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:A}=x;if(N&&this.currentDirection===null){this.currentDirection=q8(A),this.currentDirection!==null&&j&&j(this.currentDirection);return}this.updateAxis("x",x.point,A),this.updateAxis("y",x.point,A),this.visualElement.render(),E&&E(g,x)},u=(g,x)=>{this.latestPointerEvent=g,this.latestPanInfo=x,this.stop(g,x),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>Lo(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new h5(e,{onSessionStart:r,onStart:o,onMove:c,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:s,contextWindow:u5(this.visualElement),element:this.visualElement.current})}stop(e,t){const s=e||this.latestPointerEvent,i=t||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!i||!s)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&Un.postRender(()=>c(s,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,s){const{drag:i}=this.getProps();if(!s||!pb(e,i,this.currentDirection))return;const r=this.getAxisMotionValue(e);let o=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(o=W8(o,this.constraints[e],this.elastic[e])),r.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Gp(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=G8(s.layoutBox,e):this.constraints=!1,this.elastic=Z8(t),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Lo(r=>{this.constraints!==!1&&this.getAxisMotionValue(r)&&(this.constraints[r]=K8(s.layoutBox[r],this.constraints[r]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Gp(e))return!1;const s=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=tB(s,i.root,this.visualElement.getTransformPagePoint());let o=Y8(i.layout.layoutBox,r);if(t){const c=t(qI(o));this.hasMutatedConstraints=!!c,c&&(o=PR(c))}return o}startAnimation(e){const{drag:t,dragMomentum:s,dragElastic:i,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},h=Lo(f=>{if(!pb(f,t,this.currentDirection))return;let g=u&&u[f]||{};o&&(g={min:0,max:0});const x=i?200:1e6,y=i?40:1e7,N={type:"inertia",velocity:s?e[f]:0,bounceStiffness:x,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...r,...g};return this.startAxisValueAnimation(f,N)});return Promise.all(h).then(c)}startAxisValueAnimation(e,t){const s=this.getAxisMotionValue(e);return w2(this.visualElement,e),s.start(IS(e,s,0,t,this.visualElement,!1))}stopAnimation(){Lo(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Lo(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),i=s[t];return i||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){Lo(t=>{const{drag:s}=this.getProps();if(!pb(t,s,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(t);if(i&&i.layout){const{min:o,max:c}=i.layout.layoutBox[t],u=r.get()||0;r.set(e[t]-Ms(o,c,.5)+u)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:s}=this.visualElement;if(!Gp(t)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Lo(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const u=c.get();i[o]=X8({min:u,max:u},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Lo(o=>{if(!pb(o,e,null))return;const c=this.getAxisMotionValue(o),{min:u,max:h}=this.constraints[o];c.set(Ms(u,h,i[o]))})}addListeners(){if(!this.visualElement.current)return;Q8.set(this.visualElement,this);const e=this.visualElement.current,t=s0(e,"pointerdown",u=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&!ER(u.target)&&this.start(u)}),s=()=>{const{dragConstraints:u}=this.getProps();Gp(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,r=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Un.read(s);const o=v0(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(Lo(f=>{const g=this.getAxisMotionValue(f);g&&(this.originPoint[f]+=u[f].translate,g.set(g.get()+u[f].translate))}),this.visualElement.render())}));return()=>{o(),t(),r(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:o=_2,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:s,dragPropagation:i,dragConstraints:r,dragElastic:o,dragMomentum:c}}}function pb(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function q8(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class $8 extends oh{constructor(e){super(e),this.removeGroupControls=Er,this.removeListeners=Er,this.controls=new J8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Er}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const OE=n=>(e,t)=>{n&&Un.postRender(()=>n(e,t))};class eH extends oh{constructor(){super(...arguments),this.removePointerDownListener=Er}onPointerDown(e){this.session=new h5(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:u5(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:OE(e),onStart:OE(t),onMove:s,onEnd:(r,o)=>{delete this.session,i&&Un.postRender(()=>i(r,o))}}}mount(){this.removePointerDownListener=s0(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let mw=!1;class tH extends _.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s,layoutId:i}=this.props,{projection:r}=e;r&&(t.group&&t.group.add(r),s&&s.register&&i&&s.register(r),mw&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),oy.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:s,drag:i,isPresent:r}=this.props,{projection:o}=s;return o&&(o.isPresent=r,mw=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==r?o.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?o.promote():o.relegate()||Un.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),WS.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s}=this.props,{projection:i}=e;mw=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function m5(n){const[e,t]=n5(),s=_.useContext(wS);return a.jsx(tH,{...n,layoutGroup:s,switchLayoutGroup:_.useContext(c5),isPresent:e,safeToRemove:t})}const nH={pan:{Feature:eH},drag:{Feature:$8,ProjectionNode:t5,MeasureLayout:m5}};function LE(n,e,t){const{props:s}=n;n.animationState&&s.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,r=s[i];r&&Un.postRender(()=>r(e,q0(e)))}class sH extends oh{mount(){const{current:e}=this.node;e&&(this.unmount=_I(e,(t,s)=>(LE(this.node,s,"Start"),i=>LE(this.node,i,"End"))))}unmount(){}}class iH extends oh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=K0(v0(this.node.current,"focus",()=>this.onFocus()),v0(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function FE(n,e,t){const{props:s}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&s.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),r=s[i];r&&Un.postRender(()=>r(e,q0(e)))}class aH extends oh{mount(){const{current:e}=this.node;e&&(this.unmount=DI(e,(t,s)=>(FE(this.node,s,"Start"),(i,{success:r})=>FE(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const T2=new WeakMap,gw=new WeakMap,rH=n=>{const e=T2.get(n.target);e&&e(n)},oH=n=>{n.forEach(rH)};function lH({root:n,...e}){const t=n||document;gw.has(t)||gw.set(t,{});const s=gw.get(t),i=JSON.stringify(e);return s[i]||(s[i]=new IntersectionObserver(oH,{root:n,...e})),s[i]}function cH(n,e,t){const s=lH(e);return T2.set(n,t),s.observe(n),()=>{T2.delete(n),s.unobserve(n)}}const dH={some:0,all:1};class uH extends oh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:s,amount:i="some",once:r}=e,o={root:t?t.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:dH[i]},c=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,r&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:g}=this.node.getProps(),x=h?f:g;x&&x(u)};return cH(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(hH(e,t))&&this.startObserver()}unmount(){}}function hH({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const fH={inView:{Feature:uH},tap:{Feature:aH},focus:{Feature:iH},hover:{Feature:sH}},mH={layout:{ProjectionNode:t5,MeasureLayout:m5}},gH={...I8,...fH,...nH,...mH},Ie=P8(gH,O8),pH=50,zE=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),xH=()=>({time:0,x:zE(),y:zE()}),bH={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function IE(n,e,t,s){const i=t[e],{length:r,position:o}=bH[e],c=i.current,u=t.time;i.current=n[`scroll${o}`],i.scrollLength=n[`scroll${r}`]-n[`client${r}`],i.offset.length=0,i.offset[0]=0,i.offset[1]=i.scrollLength,i.progress=Gm(0,i.scrollLength,i.current);const h=s-u;i.velocity=h>pH?0:AS(i.current-c,h)}function yH(n,e,t){IE(n,"x",e,t),IE(n,"y",e,t),e.time=t}function vH(n,e){const t={x:0,y:0};let s=n;for(;s&&s!==e;)if(VS(s))t.x+=s.offsetLeft,t.y+=s.offsetTop,s=s.offsetParent;else if(s.tagName==="svg"){const i=s.getBoundingClientRect();s=s.parentElement;const r=s.getBoundingClientRect();t.x+=i.left-r.left,t.y+=i.top-r.top}else if(s instanceof SVGGraphicsElement){const{x:i,y:r}=s.getBBox();t.x+=i,t.y+=r;let o=null,c=s.parentNode;for(;!o;)c.tagName==="svg"&&(o=c),c=s.parentNode;s=o}else break;return t}const k2={start:0,center:.5,end:1};function BE(n,e,t=0){let s=0;if(n in k2&&(n=k2[n]),typeof n=="string"){const i=parseFloat(n);n.endsWith("px")?s=i:n.endsWith("%")?n=i/100:n.endsWith("vw")?s=i/100*document.documentElement.clientWidth:n.endsWith("vh")?s=i/100*document.documentElement.clientHeight:n=i}return typeof n=="number"&&(s=e*n),t+s}const wH=[0,0];function SH(n,e,t,s){let i=Array.isArray(n)?n:wH,r=0,o=0;return typeof n=="number"?i=[n,n]:typeof n=="string"&&(n=n.trim(),n.includes(" ")?i=n.split(" "):i=[n,k2[n]?n:"0"]),r=BE(i[0],t,s),o=BE(i[1],e),r-o}const NH={All:[[0,0],[1,1]]},jH={x:0,y:0};function CH(n){return"getBBox"in n&&n.tagName!=="svg"?n.getBBox():{width:n.clientWidth,height:n.clientHeight}}function AH(n,e,t){const{offset:s=NH.All}=t,{target:i=n,axis:r="y"}=t,o=r==="y"?"height":"width",c=i!==n?vH(i,n):jH,u=i===n?{width:n.scrollWidth,height:n.scrollHeight}:CH(i),h={width:n.clientWidth,height:n.clientHeight};e[r].offset.length=0;let f=!e[r].interpolate;const g=s.length;for(let x=0;x<g;x++){const y=SH(s[x],h[o],u[o],c[r]);!f&&y!==e[r].interpolatorOffsets[x]&&(f=!0),e[r].offset[x]=y}f&&(e[r].interpolate=PS(e[r].offset,sR(s),{clamp:!1}),e[r].interpolatorOffsets=[...e[r].offset]),e[r].progress=Dl(0,1,e[r].interpolate(e[r].current))}function EH(n,e=n,t){if(t.x.targetOffset=0,t.y.targetOffset=0,e!==n){let s=e;for(;s&&s!==n;)t.x.targetOffset+=s.offsetLeft,t.y.targetOffset+=s.offsetTop,s=s.offsetParent}t.x.targetLength=e===n?e.scrollWidth:e.clientWidth,t.y.targetLength=e===n?e.scrollHeight:e.clientHeight,t.x.containerLength=n.clientWidth,t.y.containerLength=n.clientHeight}function _H(n,e,t,s={}){return{measure:i=>{EH(n,s.target,t),yH(n,t,i),(s.offset||s.target)&&AH(n,t,s)},notify:()=>e(t)}}const Tp=new WeakMap,HE=new WeakMap,pw=new WeakMap,UE=n=>n===document.scrollingElement?window:n;function g5(n,{container:e=document.scrollingElement,...t}={}){if(!e)return Er;let s=pw.get(e);s||(s=new Set,pw.set(e,s));const i=xH(),r=_H(e,n,i,t);if(s.add(r),!Tp.has(e)){const c=()=>{for(const g of s)g.measure(ia.timestamp);Un.preUpdate(u)},u=()=>{for(const g of s)g.notify()},h=()=>Un.read(c);Tp.set(e,h);const f=UE(e);window.addEventListener("resize",h,{passive:!0}),e!==document.documentElement&&HE.set(e,BI(e,h)),f.addEventListener("scroll",h,{passive:!0}),h()}const o=Tp.get(e);return Un.read(o,!1,!0),()=>{Rl(o);const c=pw.get(e);if(!c||(c.delete(r),c.size))return;const u=Tp.get(e);Tp.delete(e),u&&(UE(e).removeEventListener("scroll",u),HE.get(e)?.(),window.removeEventListener("resize",u))}}const VE=new Map;function TH(n){const e={value:0},t=g5(s=>{e.value=s[n.axis].progress*100},n);return{currentTime:e,cancel:t}}function p5({source:n,container:e,...t}){const{axis:s}=t;n&&(e=n);const i=VE.get(e)??new Map;VE.set(e,i);const r=t.target??"self",o=i.get(r)??{},c=s+(t.offset??[]).join(",");return o[c]||(o[c]=!t.target&&oR()?new ScrollTimeline({source:e,axis:s}):TH({container:e,...t})),o[c]}function kH(n,e){const t=p5(e);return n.attachTimeline({timeline:e.target?void 0:t,observe:s=>(s.pause(),TR(i=>{s.time=s.iterationDuration*i},t))})}function DH(n){return n.length===2}function RH(n,e){return DH(n)?g5(t=>{n(t[e.axis].progress,t)},e):TR(n,p5(e))}function MH(n,{axis:e="y",container:t=document.scrollingElement,...s}={}){if(!t)return Er;const i={axis:e,container:t,...s};return typeof n=="function"?RH(n,i):kH(n,i)}const PH=()=>({scrollX:El(0),scrollY:El(0),scrollXProgress:El(0),scrollYProgress:El(0)}),xb=n=>n?!n.current:!1;function OH({container:n,target:e,...t}={}){const s=rh(PH),i=_.useRef(null),r=_.useRef(!1),o=_.useCallback(()=>(i.current=MH((c,{x:u,y:h})=>{s.scrollX.set(u.current),s.scrollXProgress.set(u.progress),s.scrollY.set(h.current),s.scrollYProgress.set(h.progress)},{...t,container:n?.current||void 0,target:e?.current||void 0}),()=>{i.current?.()}),[n,e,JSON.stringify(t.offset)]);return iv(()=>{if(r.current=!1,xb(n)||xb(e)){r.current=!0;return}else return o()},[o]),_.useEffect(()=>{if(r.current)return p0(!xb(n)),p0(!xb(e)),o()},[o]),s}function $S(n){const e=rh(()=>El(n)),{isStatic:t}=_.useContext(J0);if(t){const[,s]=_.useState(n);_.useEffect(()=>e.on("change",s),[])}return e}function x5(n,e){const t=$S(e()),s=()=>t.set(e());return s(),iv(()=>{const i=()=>Un.preRender(s,!1,!0),r=n.map(o=>o.on("change",i));return()=>{r.forEach(o=>o()),Rl(s)}}),t}function LH(n){t0.current=[],n();const e=x5(t0.current,n);return t0.current=void 0,e}function b5(n,e,t,s){if(typeof n=="function")return LH(n);const r=typeof e=="function"?e:UI(e,t,s);return Array.isArray(n)?WE(n,r):WE([n],([o])=>r(o))}function WE(n,e){const t=rh(()=>[]);return x5(n,()=>{t.length=0;const s=n.length;for(let i=0;i<s;i++)t[i]=n[i].get();return e(t)})}function FH(n,e={}){const{isStatic:t}=_.useContext(J0),s=()=>Wi(n)?n.get():n;if(t)return b5(s);const i=$S(s());return _.useInsertionEffect(()=>VI(i,n,e),[i,JSON.stringify(e)]),i}const y5=_.createContext(null);function zH(n,e,t,s){if(!s)return n;const i=n.findIndex(f=>f.value===e);if(i===-1)return n;const r=s>0?1:-1,o=n[i+r];if(!o)return n;const c=n[i],u=o.layout,h=Ms(u.min,u.max,.5);return r===1&&c.layout.max+t>h||r===-1&&c.layout.min+t<h?EF(n,i,i+r):n}function IH({children:n,as:e="ul",axis:t="y",onReorder:s,values:i,...r},o){const c=rh(()=>Ie[e]),u=[],h=_.useRef(!1),f=_.useRef(null),g={axis:t,groupRef:f,registerItem:(N,j)=>{const E=u.findIndex(A=>N===A.value);E!==-1?u[E].layout=j[t]:u.push({value:N,layout:j[t]}),u.sort(HH)},updateOrder:(N,j,E)=>{if(h.current)return;const A=zH(u,N,j,E);u!==A&&(h.current=!0,s(A.map(BH).filter(R=>i.indexOf(R)!==-1)))}};_.useEffect(()=>{h.current=!1});const x=N=>{f.current=N,typeof o=="function"?o(N):o&&(o.current=N)},y={overflowAnchor:"none",...r.style};return a.jsx(c,{...r,style:y,ref:x,ignoreStrict:!0,children:a.jsx(y5.Provider,{value:g,children:n})})}const dv=_.forwardRef(IH);function BH(n){return n.value}function HH(n,e){return n.layout.min-e.layout.min}const bb=50,GE=25,UH=new Set(["auto","scroll"]),i0=new WeakMap,a0=new WeakMap;let Yp=null;function VH(){if(Yp){const n=D2(Yp,"y");n&&(a0.delete(n),i0.delete(n));const e=D2(Yp,"x");e&&e!==n&&(a0.delete(e),i0.delete(e)),Yp=null}}function WH(n,e){const t=getComputedStyle(n),s=e==="x"?t.overflowX:t.overflowY;return UH.has(s)}function D2(n,e){let t=n?.parentElement;for(;t;){if(WH(t,e))return t;t=t.parentElement}return null}function GH(n,e,t){const s=e.getBoundingClientRect(),i=t==="x"?s.left:s.top,r=t==="x"?s.right:s.bottom,o=n-i,c=r-n;if(o<bb){const u=1-o/bb;return{amount:-GE*u*u,edge:"start"}}else if(c<bb){const u=1-c/bb;return{amount:GE*u*u,edge:"end"}}return{amount:0,edge:null}}function YH(n,e,t,s){if(!n)return;Yp=n;const i=D2(n,t);if(!i)return;const{amount:r,edge:o}=GH(e,i,t);if(o===null){a0.delete(i),i0.delete(i);return}if(a0.get(i)!==o){if(!(o==="start"&&s<0||o==="end"&&s>0))return;a0.set(i,o);const h=t==="x"?i.scrollWidth-i.clientWidth:i.scrollHeight-i.clientHeight;i0.set(i,h)}if(r>0){const u=i0.get(i);if((t==="x"?i.scrollLeft:i.scrollTop)>=u)return}t==="x"?i.scrollLeft+=r:i.scrollTop+=r}function YE(n,e=0){return Wi(n)?n:$S(e)}function XH({children:n,style:e={},value:t,as:s="li",onDrag:i,onDragEnd:r,layout:o=!0,...c},u){const h=rh(()=>Ie[s]),f=_.useContext(y5),g={x:YE(e.x),y:YE(e.y)},x=b5([g.x,g.y],([A,R])=>A||R?1:"unset"),{axis:y,registerItem:N,updateOrder:j,groupRef:E}=f;return a.jsx(h,{drag:y,...c,dragSnapToOrigin:!0,style:{...e,x:g.x,y:g.y,zIndex:x},layout:o,onDrag:(A,R)=>{const{velocity:M,point:L}=R,z=g[y].get();j(t,z,M[y]),YH(E.current,L[y],y,M[y]),i&&i(A,R)},onDragEnd:(A,R)=>{VH(),r&&r(A,R)},onLayoutMeasure:A=>{N(t,A)},ref:u,ignoreStrict:!0,children:n})}const uv=_.forwardRef(XH);const KH=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ZH=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),XE=n=>{const e=ZH(n);return e.charAt(0).toUpperCase()+e.slice(1)},v5=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),QH=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var JH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const qH=_.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:i="",children:r,iconNode:o,...c},u)=>_.createElement("svg",{ref:u,...JH,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:v5("lucide",i),...!r&&!QH(c)&&{"aria-hidden":"true"},...c},[...o.map(([h,f])=>_.createElement(h,f)),...Array.isArray(r)?r:[r]]));const Ve=(n,e)=>{const t=_.forwardRef(({className:s,...i},r)=>_.createElement(qH,{ref:r,iconNode:e,className:v5(`lucide-${KH(XE(n))}`,`lucide-${n}`,s),...i}));return t.displayName=XE(n),t};const $H=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],KE=Ve("activity",$H);const e9=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],t9=Ve("archive",e9);const n9=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],s9=Ve("arrow-down-right",n9);const i9=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ia=Ve("arrow-left",i9);const a9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ml=Ve("arrow-right",a9);const r9=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],w5=Ve("arrow-up-right",r9);const o9=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],l9=Ve("award",o9);const c9=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Pl=Ve("bell",c9);const d9=[["path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1",key:"ezmyqa"}],["path",{d:"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",key:"e1hn23"}]],u9=Ve("braces",d9);const h9=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],ug=Ve("briefcase",h9);const f9=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Od=Ve("building-2",f9);const m9=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ld=Ve("calendar",m9);const g9=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],p9=Ve("chart-line",g9);const x9=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],fi=Ve("check",x9);const b9=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],kf=Ve("chevron-down",b9);const y9=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],hv=Ve("chevron-left",y9);const v9=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],fo=Ve("chevron-right",v9);const w9=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],S9=Ve("chevron-up",w9);const N9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],wa=Ve("circle-alert",N9);const j9=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],us=Ve("circle-check-big",j9);const C9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],S5=Ve("circle-check",C9);const A9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],N5=Ve("circle-x",A9);const E9=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],ZE=Ve("clipboard",E9);const _9=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],la=Ve("clock",_9);const T9=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],j5=Ve("cloud-upload",T9);const k9=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]],D9=Ve("columns-2",k9);const R9=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],M9=Ve("command",R9);const P9=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],O9=Ve("copy",P9);const L9=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],eN=Ve("dollar-sign",L9);const F9=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Yi=Ve("download",F9);const z9=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],bf=Ve("ellipsis-vertical",z9);const I9=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],tN=Ve("ellipsis",I9);const B9=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],H9=Ve("external-link",B9);const U9=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_r=Ve("eye",U9);const V9=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],W9=Ve("facebook",V9);const G9=[["path",{d:"M13 22h5a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v3.3",key:"cvl1xm"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m7.69 16.479 1.29 4.88a.5.5 0 0 1-.698.591l-1.843-.849a1 1 0 0 0-.879.001l-1.846.85a.5.5 0 0 1-.692-.593l1.29-4.88",key:"1ff7gj"}],["circle",{cx:"6",cy:"14",r:"3",key:"a1xfv6"}]],Y9=Ve("file-badge",G9);const X9=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],C5=Ve("file-check",X9);const K9=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],wn=Ve("file-text",K9);const Z9=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],Q9=Ve("file",Z9);const J9=[["path",{d:"M2 9V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1",key:"fm4g5t"}],["path",{d:"M2 13h10",key:"pgb2dq"}],["path",{d:"m9 16 3-3-3-3",key:"6m91ic"}]],q9=Ve("folder-input",J9);const $9=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],R2=Ve("folder-plus",$9);const eU=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],A5=Ve("folder",eU);const tU=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],nU=Ve("funnel",tU);const sU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],nN=Ve("globe",sU);const iU=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],fv=Ve("grip-vertical",iU);const aU=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],rU=Ve("handshake",aU);const oU=[["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M6 20V4",key:"1w1bmo"}],["path",{d:"M18 20V4",key:"o2hl4u"}]],lU=Ve("heading",oU);const cU=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],w0=Ve("history",cU);const dU=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],uU=Ve("house",dU);const hU=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],sN=Ve("image",hU);const fU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],mU=Ve("info",fU);const gU=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],pU=Ve("landmark",gU);const xU=[["path",{d:"M18 5a2 2 0 0 1 2 2v8.526a2 2 0 0 0 .212.897l1.068 2.127a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45l1.068-2.127A2 2 0 0 0 4 15.526V7a2 2 0 0 1 2-2z",key:"1pdavp"}],["path",{d:"M20.054 15.987H3.946",key:"14rxg9"}]],bU=Ve("laptop",xU);const yU=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],$0=Ve("layers",yU);const vU=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],wU=Ve("layout-dashboard",vU);const SU=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],iN=Ve("layout-grid",SU);const NU=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],jU=Ve("linkedin",NU);const CU=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],mv=Ve("list",CU);const AU=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Sn=Ve("loader-circle",AU);const EU=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Ym=Ve("loader",EU);const _U=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ho=Ve("lock",_U);const TU=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],E5=Ve("log-out",TU);const kU=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Js=Ve("mail",kU);const DU=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],RU=Ve("map-pin",DU);const MU=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],aN=Ve("menu",MU);const PU=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],OU=Ve("message-square",PU);const LU=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]],FU=Ve("mouse-pointer-click",LU);const zU=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Df=Ve("palette",zU);const IU=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],rN=Ve("panels-top-left",IU);const BU=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ex=Ve("pen-line",BU);const HU=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],ar=Ve("pen-tool",HU);const UU=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],oN=Ve("pen",UU);const VU=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],WU=Ve("percent",VU);const GU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],kd=Ve("plus",GU);const YU=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],yf=Ve("printer",YU);const XU=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],KU=Ve("quote",XU);const ZU=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],QU=Ve("receipt",ZU);const JU=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],qU=Ve("refresh-ccw",JU);const $U=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],e7=Ve("refresh-cw",$U);const t7=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],tx=Ve("rotate-ccw",t7);const n7=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],s7=Ve("rotate-cw",n7);const i7=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Xi=Ve("save",i7);const a7=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],r7=Ve("scale",a7);const o7=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],l7=Ve("scissors",o7);const c7=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],d7=Ve("scroll-text",c7);const u7=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Xm=Ve("search",u7);const h7=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Pm=Ve("send",h7);const f7=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vf=Ve("settings",f7);const m7=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],_5=Ve("share-2",m7);const g7=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],T5=Ve("shield-check",g7);const p7=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Tr=Ve("shield",p7);const x7=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],b7=Ve("shopping-bag",x7);const y7=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],v7=Ve("sparkles",y7);const w7=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],wf=Ve("square-check-big",w7);const S7=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],jy=Ve("square",S7);const N7=[["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-6 0c0 2 1 2 1 3.5V13",key:"i9gjdv"}],["path",{d:"M20 15.5a2.5 2.5 0 0 0-2.5-2.5h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1z",key:"1vzg3v"}],["path",{d:"M5 22h14",key:"ehvnwv"}]],j7=Ve("stamp",N7);const C7=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],k5=Ve("star",C7);const A7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],E7=Ve("target",A7);const _7=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],D5=Ve("text-align-center",_7);const T7=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],R5=Ve("text-align-end",T7);const k7=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],M5=Ve("text-align-start",k7);const D7=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ki=Ve("trash-2",D7);const R7=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],M7=Ve("trending-up",R7);const P7=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],O7=Ve("triangle-alert",P7);const L7=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],F7=Ve("twitter",L7);const z7=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Ol=Ve("type",z7);const I7=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Sf=Ve("upload",I7);const B7=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ai=Ve("user",B7);const H7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Pc=Ve("users",H7);const U7=[["path",{d:"M15 4V2",key:"z1p9b7"}],["path",{d:"M15 16v-2",key:"px0unx"}],["path",{d:"M8 9h2",key:"1g203m"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M17.8 11.8 19 13",key:"yihg8r"}],["path",{d:"M15 9h.01",key:"x1ddxp"}],["path",{d:"M17.8 6.2 19 5",key:"fd4us0"}],["path",{d:"m3 21 9-9",key:"1jfql5"}],["path",{d:"M12.2 6.2 11 5",key:"i3da3b"}]],hg=Ve("wand",U7);const V7=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],bs=Ve("x",V7);const W7=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Km=Ve("zap",W7);const G7=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Go=Ve("zoom-in",G7);const Y7=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Yo=Ve("zoom-out",Y7);function X7(){const[n,e]=_.useState(!1),[t,s]=_.useState(!1),i=kr();return _.useEffect(()=>{const o=()=>{e(window.scrollY>20)};return window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)},[]),["/login","/register","/onboarding"].includes(i.pathname)?null:a.jsxs("nav",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${n||t?"bg-white/80 backdrop-blur-md border-b border-slate-200 shadow-sm py-4":"bg-transparent py-6"}`,children:[a.jsxs("div",{className:"max-w-7xl mx-auto px-6 flex items-center justify-between",children:[a.jsxs(tn,{to:"/",className:"flex items-center gap-2 group",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-900 text-white flex items-center justify-center font-bold text-xl shadow-lg group-hover:scale-105 transition-transform",children:"D"}),a.jsx("span",{className:"text-xl font-bold tracking-tight transition-colors text-slate-900",children:"DocForge"})]}),a.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[a.jsx("a",{href:"/#templates",className:"text-slate-600 font-medium hover:text-slate-900 transition-colors",children:"Create Document"}),a.jsx(xw,{to:"/features",children:"Features"}),a.jsx(xw,{to:"/pricing",children:"Pricing"}),a.jsx(xw,{to:"/about",children:"About"})]}),a.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[a.jsx(tn,{to:"/login",className:"text-slate-600 font-medium hover:text-slate-900 transition-colors",children:"Sign In"}),a.jsx(tn,{to:"/register",className:"px-5 py-2.5 bg-slate-900 text-white rounded-lg font-bold hover:bg-slate-800 transition-all hover:shadow-lg hover:-translate-y-0.5",children:"Get Started"})]}),a.jsx("button",{className:"md:hidden text-slate-900",onClick:()=>s(!t),"aria-label":"Toggle mobile menu",children:t?a.jsx(bs,{}):a.jsx(aN,{})})]}),a.jsx(dn,{children:t&&a.jsx(Ie.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-white border-b border-slate-200 overflow-hidden",children:a.jsxs("div",{className:"flex flex-col p-6 gap-4",children:[a.jsx("a",{href:"/#templates",onClick:()=>s(!1),className:"text-slate-600 font-medium text-lg py-2 block",children:"Create Document"}),a.jsx(yb,{to:"/features",onClick:()=>s(!1),children:"Features"}),a.jsx(yb,{to:"/pricing",onClick:()=>s(!1),children:"Pricing"}),a.jsx(yb,{to:"/about",onClick:()=>s(!1),children:"About"}),a.jsx("hr",{className:"border-slate-100 my-2"}),a.jsx(yb,{to:"/login",onClick:()=>s(!1),children:"Sign In"}),a.jsx(tn,{to:"/register",onClick:()=>s(!1),className:"w-full py-3 bg-slate-900 text-white rounded-xl font-bold text-center",children:"Get Started"})]})})})]})}const xw=({to:n,children:e})=>a.jsx(tn,{to:n,className:"text-slate-600 font-medium hover:text-slate-900 transition-colors",children:e}),yb=({to:n,children:e,onClick:t})=>a.jsx(tn,{to:n,onClick:t,className:"text-slate-600 font-medium text-lg py-2 block",children:e});function K7(){return a.jsx("footer",{className:"bg-white py-12 px-6 border-t border-slate-200",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 mb-12",children:[a.jsxs("div",{className:"col-span-2 md:col-span-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-slate-900 flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-xl",children:"D"})}),a.jsx("span",{className:"font-bold text-xl text-slate-900",children:"DocForge"})]}),a.jsx("p",{className:"text-slate-500 text-sm leading-relaxed",children:"Forging the future of document management for modern teams."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-slate-900 mb-4",children:"Product"}),a.jsxs("ul",{className:"space-y-2 text-sm text-slate-500",children:[a.jsx("li",{children:a.jsx(tn,{to:"/features",className:"hover:text-slate-900 transition-colors",children:"Features"})}),a.jsx("li",{children:a.jsx(tn,{to:"/pricing",className:"hover:text-slate-900 transition-colors",children:"Pricing"})}),a.jsx("li",{children:a.jsx(tn,{to:"/changelog",className:"hover:text-slate-900 transition-colors",children:"Changelog"})}),a.jsx("li",{children:a.jsx(tn,{to:"/blog",className:"hover:text-slate-900 transition-colors",children:"Blogs"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-slate-900 mb-4",children:"Company"}),a.jsxs("ul",{className:"space-y-2 text-sm text-slate-500",children:[a.jsx("li",{children:a.jsx(tn,{to:"/about",className:"hover:text-slate-900 transition-colors",children:"About Us"})}),a.jsx("li",{children:a.jsx(tn,{to:"/careers",className:"hover:text-slate-900 transition-colors",children:"Careers"})}),a.jsx("li",{children:a.jsx(tn,{to:"/contact",className:"hover:text-slate-900 transition-colors",children:"Contact"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-slate-900 mb-4",children:"Legal"}),a.jsxs("ul",{className:"space-y-2 text-sm text-slate-500",children:[a.jsx("li",{children:a.jsx(tn,{to:"/privacy",className:"hover:text-slate-900 transition-colors",children:"Privacy Policy"})}),a.jsx("li",{children:a.jsx(tn,{to:"/terms",className:"hover:text-slate-900 transition-colors",children:"Terms of Service"})})]})]})]}),a.jsxs("div",{className:"pt-8 border-t border-slate-100 flex flex-col md:flex-row justify-between items-center gap-4",children:[a.jsxs("div",{className:"text-slate-500 text-sm",children:[" ",new Date().getFullYear()," TechSynchronic. All rights reserved."]}),a.jsxs("div",{className:"flex gap-6 text-slate-500",children:[a.jsx("a",{href:"#",className:"hover:text-slate-900 transition-colors",children:"Twitter"}),a.jsx("a",{href:"#",className:"hover:text-slate-900 transition-colors",children:"LinkedIn"}),a.jsx("a",{href:"#",className:"hover:text-slate-900 transition-colors",children:"GitHub"})]})]})]})})}function Z7(){return a.jsxs("div",{className:"min-h-screen flex flex-col bg-white",children:[a.jsx(X7,{}),a.jsx("main",{className:"flex-grow pt-0",children:a.jsx(V0,{})}),a.jsx(K7,{})]})}const Dc=({title:n,description:e,keywords:t,image:s,url:i,type:r="website",jsonLd:o})=>{const c="DocForge",u="Secure usage of NDAs, Proposals, and Invoices for modern businesses. Streamline your document workflow with DocForge.",h="https://docforgedocs.com",f=`${h}/images/logo.png`,g=n?`${n} | ${c}`:c,x=e||u,y=s?s.startsWith("http")?s:`${h}${s}`:f,N=i?`${h}${i}`:h;return a.jsxs(V6,{children:[a.jsx("title",{children:g}),a.jsx("meta",{name:"description",content:x}),t&&a.jsx("meta",{name:"keywords",content:t}),a.jsx("link",{rel:"canonical",href:N}),a.jsx("meta",{property:"og:type",content:r}),a.jsx("meta",{property:"og:url",content:N}),a.jsx("meta",{property:"og:title",content:g}),a.jsx("meta",{property:"og:description",content:x}),a.jsx("meta",{property:"og:image",content:y}),a.jsx("meta",{property:"og:site_name",content:c}),a.jsx("meta",{property:"og:locale",content:"en_US"}),a.jsx("meta",{name:"twitter:image",content:y}),a.jsx("meta",{name:"twitter:creator",content:"@DocForgeApp"}),o&&a.jsx("script",{type:"application/ld+json",children:JSON.stringify(o)})]})},Q7=[{id:"nda",title:"Non-Disclosure Agreement",subtitle:"Protect your ideas instantly.",description:"Generate a legally binding NDA in minutes. Perfect for freelancers, agencies, and startup discussions.",icon:Tr,color:"bg-emerald-500",gradient:"from-emerald-500 to-teal-400",bg:"bg-emerald-50",border:"border-emerald-100"},{id:"proposal",title:"Business Proposal",subtitle:"Win more clients, faster.",description:"Create stunning, structured proposals with pricing tables and timelines. Export as PDF or send online.",icon:Km,color:"bg-indigo-500",gradient:"from-indigo-500 to-purple-500",bg:"bg-indigo-50",border:"border-indigo-100"},{id:"consulting-agreement",title:"Consulting Agreement",subtitle:"Secure your services.",description:"Formalize your client relationships with a comprehensive consulting services agreement.",icon:wn,color:"bg-blue-500",gradient:"from-blue-500 to-cyan-400",bg:"bg-blue-50",border:"border-blue-100"}],J7=[{q:"Is it really free? What's the catch?",a:"Yes, it is 100% free to generate and export documents. We provide this tool to help freelancers and small businesses. If you want advanced features like eSignatures and analytics, you can upgrade to a full account later."},{q:"Do I need to create an account first?",a:"No! You can draft your entire document as a guest. We only ask you to create a password when you save/export, so you can access your document later. It's a seamless process."},{q:"Are these documents legally binding?",a:"Our templates are drafted by legal professionals to be standard and enforceable. However, we are not a law firm, and for high-stakes deals, we always recommend consulting a lawyer."},{q:"Can I edit the document after saving?",a:"Absolutely. Once you save, the document is stored in your secure dashboard. You can edit, duplicate, or send it for signature at any time."}],q7=({q:n,a:e})=>{const[t,s]=_.useState(!1);return a.jsxs("div",{className:"border-b border-slate-200 last:border-0",children:[a.jsxs("button",{onClick:()=>s(!t),className:"w-full py-6 flex items-center justify-between text-left focus:outline-none group",children:[a.jsx("span",{className:"text-lg font-bold text-slate-900 group-hover:text-indigo-600 transition-colors",children:n}),t?a.jsx(S9,{className:"text-slate-400"}):a.jsx(kf,{className:"text-slate-400"})]}),a.jsx(dn,{children:t&&a.jsx(Ie.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:a.jsx("p",{className:"pb-6 text-slate-600 leading-relaxed pr-8",children:e})})})]})},bw=({number:n,title:e,desc:t,icon:s})=>a.jsxs("div",{className:"relative p-6 rounded-2xl bg-white border border-slate-100 shadow-xl shadow-slate-200/50 flex flex-col items-center text-center group hover:-translate-y-1 transition-transform duration-300",children:[a.jsx("div",{className:"absolute -top-6 w-12 h-12 rounded-full bg-slate-900 text-white flex items-center justify-center font-bold text-lg shadow-lg border-4 border-white",children:n}),a.jsx("div",{className:"mt-8 mb-4 w-12 h-12 rounded-full bg-indigo-50 flex items-center justify-center text-indigo-600 group-hover:scale-110 transition-transform",children:a.jsx(s,{size:24})}),a.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-2",children:e}),a.jsx("p",{className:"text-slate-500 text-sm leading-relaxed",children:t})]}),yw=({icon:n,title:e,desc:t})=>a.jsxs("div",{className:"flex gap-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 shrink-0",children:a.jsx(n,{size:20})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-slate-900 mb-1",children:e}),a.jsx("p",{className:"text-slate-500 text-sm leading-relaxed",children:t})]})]}),$7=()=>{const n=ts();return a.jsxs("div",{className:"min-h-screen bg-white font-sans text-slate-900 selection:bg-indigo-100 selection:text-indigo-900",children:[a.jsx(Dc,{title:"DocForge - Free NDA & Proposal Generator",description:"The operating system for modern agencies. Generate professional NDAs, Proposals, and Invoices for free. No signup required to start.",keywords:"Free NDA Generator, Business Proposal Creator, Consulting Agreement Template, Online Legal Documents, Agency Software"}),a.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[a.jsx("div",{className:"absolute top-0 right-0 w-[800px] h-[800px] bg-indigo-50/50 rounded-full blur-[100px] opacity-60 -translate-y-1/2 translate-x-1/4"}),a.jsx("div",{className:"absolute top-0 left-0 w-[600px] h-[600px] bg-blue-50/50 rounded-full blur-[100px] opacity-40 -translate-y-1/2 -translate-x-1/4"}),a.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 brightness-100 contrast-150"})]}),a.jsxs("main",{className:"relative z-10 pt-32 pb-20 px-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"text-center max-w-4xl mx-auto mb-24",children:[a.jsxs(Ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"inline-flex items-center gap-2 px-4 py-1.5 bg-white border border-slate-200 rounded-full shadow-sm mb-8",children:[a.jsxs("span",{className:"relative flex h-2 w-2",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]}),a.jsx("span",{className:"text-xs font-bold text-slate-600 uppercase tracking-wider",children:"Free to use, forever"})]}),a.jsxs(Ie.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-5xl md:text-7xl font-black tracking-tighter text-slate-900 mb-8 leading-[1.1]",children:["Review Less. ",a.jsx("br",{className:"hidden md:block"}),a.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600",children:"Close Deals Faster."})]}),a.jsxs(Ie.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-xl md:text-2xl text-slate-500 leading-relaxed font-medium mb-12 max-w-2xl mx-auto",children:["Skip the formatting headaches. Generate professional, legally rigorous documents in seconds.",a.jsx("span",{className:"text-indigo-600 font-bold",children:" No signup required to start."})]}),a.jsxs(Ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[a.jsx("button",{onClick:()=>document.getElementById("templates").scrollIntoView({behavior:"smooth"}),className:"px-8 py-4 bg-slate-900 text-white rounded-full font-bold text-lg hover:bg-slate-800 transition-all hover:scale-105 shadow-xl shadow-slate-900/20",children:"Start Drafting Free"}),a.jsx("button",{onClick:()=>n("/features"),className:"px-8 py-4 bg-white text-slate-900 border border-slate-200 rounded-full font-bold text-lg hover:border-slate-300 transition-all flex items-center gap-2",children:"View All Features"})]})]}),a.jsxs("div",{className:"mb-32 text-center",children:[a.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-8",children:"Trusted by modern teams"}),a.jsx("div",{className:"flex flex-wrap justify-center gap-8 md:gap-16 opacity-50 grayscale hover:grayscale-0 transition-all duration-500",children:["Acme Corp","Nebula","GlobalBank","TechFlow","SaaS.io"].map(e=>a.jsx("span",{className:"text-xl font-black text-slate-800",children:e},e))})]}),a.jsxs("div",{id:"templates",className:"scroll-mt-24 mb-32",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-4",children:"Start Drafting"}),a.jsx("p",{className:"text-slate-500",children:"Select a document type to launch the live editor."})]}),a.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:Q7.map((e,t)=>a.jsxs(Ie.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:t*.1},whileHover:{y:-8},onClick:()=>n(`/create-document/${e.id}`),className:"group relative p-8 rounded-3xl bg-white border border-slate-100 shadow-xl shadow-slate-200/40 hover:shadow-2xl hover:shadow-indigo-500/10 transition-all cursor-pointer overflow-hidden flex flex-col h-full",children:[a.jsx("div",{className:`absolute top-0 inset-x-0 h-1 bg-gradient-to-r ${e.gradient}`}),a.jsx("div",{className:`w-14 h-14 rounded-2xl ${e.bg} flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300`,children:a.jsx(e.icon,{size:28,className:e.color.replace("bg-","text-")})}),a.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:e.title}),a.jsx("p",{className:"text-indigo-600 font-medium text-sm mb-4",children:e.subtitle}),a.jsx("p",{className:"text-slate-500 leading-relaxed mb-8 flex-1",children:e.description}),a.jsxs("div",{className:"flex items-center text-slate-900 font-bold text-sm group-hover:gap-2 transition-all mt-auto pt-6 border-t border-slate-50",children:["Launch Editor ",a.jsx(Ml,{size:16,className:"ml-2"})]})]},e.id))})]}),a.jsxs("div",{className:"mb-32 bg-slate-50 rounded-3xl p-8 md:p-16 border border-slate-100 relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-[400px] h-[400px] bg-white rounded-full blur-[80px] opacity-50 -translate-y-1/2 translate-x-1/2"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-4",children:"How it works"}),a.jsx("p",{className:"text-slate-500 max-w-xl mx-auto",children:"We've removed the friction. Go from zero to signed document in less than 5 minutes."})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-8 md:gap-12 px-4 pt-4",children:[a.jsx(bw,{number:"1",title:"Select & Draft",desc:"Choose a template and use our guest editor to fill in the details. No account needed.",icon:FU}),a.jsx(bw,{number:"2",title:"Save & Secure",desc:"Click save when you're done. We'll automatically create a secure account for you.",icon:Ho}),a.jsx(bw,{number:"3",title:"Export or Send",desc:"Download as PDF or share seamlessly with your clients for eSignature.",icon:C5})]})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-16 items-center mb-32",children:[a.jsxs("div",{children:[a.jsx("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-indigo-50 text-indigo-700 rounded-full text-xs font-bold uppercase tracking-wider mb-6",children:"Powered by DocForge"}),a.jsxs("h2",{className:"text-4xl font-bold text-slate-900 mb-6 leading-tight",children:["More than just a generator. ",a.jsx("br",{}),a.jsx("span",{className:"text-indigo-600",children:"Your entire workflow."})]}),a.jsx("p",{className:"text-lg text-slate-500 mb-8 leading-relaxed",children:"This free tool is just the beginning. DocForge is the complete operating system for modern agencies and freelancers."}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(yw,{icon:Km,title:"Integrated eSignatures",desc:"Stop paying for Docusign. Request enforceable signatures directly on your documents."}),a.jsx(yw,{icon:rN,title:"Smart Dashboard",desc:"Track every proposal sent. See when clients open them and get notified instantly."}),a.jsx(yw,{icon:Pc,title:"Team Collaboration",desc:"Invite your team to draft, review, and approve documents together."})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-indigo-600 rounded-3xl rotate-3 opacity-10"}),a.jsxs("div",{className:"relative bg-slate-900 rounded-3xl p-2 shadow-2xl border border-slate-800",children:[a.jsx("img",{src:"/images/dashboard-preview.png",alt:"DocForge Dashboard",className:"rounded-2xl w-full h-auto opacity-90"}),a.jsxs("div",{className:"absolute -bottom-6 -left-6 bg-white p-4 rounded-xl shadow-xl border border-slate-100 flex items-center gap-3 animate-bounce-slow",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600",children:a.jsx(k5,{size:20,fill:"currentColor"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Conversion Rate"}),a.jsx("div",{className:"font-bold text-slate-900 text-lg",children:"+34%"})]})]})]})]})]}),a.jsxs("div",{id:"signatures",className:"scroll-mt-24 mb-32 grid md:grid-cols-2 gap-16 items-center",children:[a.jsxs("div",{className:"order-2 md:order-1 relative",children:[a.jsx("div",{className:"absolute inset-0 bg-emerald-500 rounded-3xl -rotate-2 opacity-10"}),a.jsxs("div",{className:"relative bg-white rounded-3xl p-6 shadow-2xl border border-slate-100",children:[a.jsxs("div",{className:"space-y-4 font-serif text-slate-800 opacity-80 mb-8",children:[a.jsx("div",{className:"h-4 bg-slate-100 rounded w-full"}),a.jsx("div",{className:"h-4 bg-slate-100 rounded w-5/6"}),a.jsx("div",{className:"h-4 bg-slate-100 rounded w-4/6"})]}),a.jsxs("div",{className:"flex justify-between items-end border-t border-slate-200 pt-6",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold mb-2",children:"Signed by"}),a.jsx("div",{className:"font-handwriting text-3xl text-indigo-900",children:"John Doe"}),a.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"Sep 28, 2026  10:42 AM"})]}),a.jsx("div",{className:"ml-auto",children:a.jsx("div",{className:"w-16 h-16 border-4 border-emerald-500 rounded-full flex items-center justify-center text-emerald-600 rotate-12 bg-emerald-50",children:a.jsx(us,{size:32})})})]})]})]}),a.jsxs("div",{className:"order-1 md:order-2",children:[a.jsx("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-emerald-50 text-emerald-700 rounded-full text-xs font-bold uppercase tracking-wider mb-6",children:"New Feature"}),a.jsxs("h2",{className:"text-4xl font-bold text-slate-900 mb-6 leading-tight",children:["Secure, Legally Binding ",a.jsx("br",{}),a.jsx("span",{className:"text-emerald-600",children:"Digital Signatures."})]}),a.jsx("p",{className:"text-lg text-slate-500 mb-8 leading-relaxed",children:"Stop chasing clients for printers and scanners. Upload any PDF, place signature fields, and send for e-signature in seconds."}),a.jsx("ul",{className:"space-y-4 mb-10",children:["Bank-grade security & audit trails","Unlimited signature requests","Real-time status tracking"].map(e=>a.jsxs("li",{className:"flex items-center gap-3 text-slate-700 font-medium",children:[a.jsx(us,{size:20,className:"text-emerald-500 shrink-0"}),e]},e))}),a.jsxs("button",{onClick:()=>n("/register?redirect=/signatures"),className:"px-8 py-4 bg-emerald-600 text-white rounded-full font-bold text-lg hover:bg-emerald-700 transition-all hover:scale-105 shadow-xl shadow-emerald-500/20 flex items-center gap-2",children:["Try eSignatures Free ",a.jsx(Ml,{size:20})]})]})]}),a.jsxs("div",{className:"max-w-3xl mx-auto mb-32",children:[a.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-8 text-center",children:"Frequently Asked Questions"}),a.jsx("div",{className:"space-y-2",children:J7.map((e,t)=>a.jsx(q7,{q:e.q,a:e.a},t))})]}),a.jsxs("div",{className:"text-center py-20 bg-indigo-600 rounded-3xl relative overflow-hidden shadow-2xl shadow-indigo-500/30",children:[a.jsx("div",{className:"absolute top-0 right-0 w-[400px] h-[400px] bg-white rounded-full blur-[100px] opacity-20 -translate-y-1/2 translate-x-1/2"}),a.jsxs("div",{className:"relative z-10 px-6",children:[a.jsx("h2",{className:"text-3xl md:text-5xl font-bold text-white mb-6",children:"Ready to look professional?"}),a.jsx("p",{className:"text-indigo-100 text-lg mb-10 max-w-xl mx-auto",children:"Create your first document now. It takes less than 2 minutes."}),a.jsx("button",{onClick:()=>document.getElementById("templates").scrollIntoView({behavior:"smooth"}),className:"px-10 py-4 bg-white text-indigo-600 rounded-full font-bold text-lg hover:bg-indigo-50 transition-all hover:scale-105 shadow-xl",children:"Start Drafting"})]})]})]})]})},lf=_.forwardRef(({icon:n,name:e,type:t,value:s,onChange:i,placeholder:r,error:o,disabled:c},u)=>a.jsxs("div",{className:"relative group",children:[a.jsx(n,{className:`absolute left-4 top-3.5 transition-colors duration-200 ${o?"text-red-400":"text-slate-400 group-focus-within:text-indigo-600"}`,size:20}),a.jsx("input",{ref:u,type:t,name:e,value:s,onChange:i,disabled:c,placeholder:r,className:`w-full bg-slate-50 border text-slate-900 text-sm rounded-xl block w-full pl-12 p-3.5 transition-all outline-none disabled:opacity-50 disabled:cursor-not-allowed ${o?"border-red-300 focus:ring-2 focus:ring-red-200 focus:border-red-500 bg-red-50/10":"border-slate-200 focus:ring-2 focus:ring-indigo-600/20 focus:border-indigo-600 hover:border-slate-300"}`}),a.jsx(dn,{children:o&&a.jsx(Ie.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-4 top-3.5 text-red-500 pointer-events-none",children:a.jsx(wa,{size:20})})}),a.jsx(dn,{children:o&&a.jsx(Ie.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-red-500 text-xs mt-1.5 ml-1 font-medium pl-1",children:o})})]}));lf.displayName="AuthInput";const P5=({text:n="Continue with Google"})=>{const e=()=>{const s="http://127.0.0.1:8000/api/v1".replace(/\/api\/v1\/?$/,"");window.location.href=`${s}/auth/google`};return a.jsxs(Ie.button,{whileHover:{scale:1.01,backgroundColor:"#f8fafc"},whileTap:{scale:.98},type:"button",onClick:e,className:"w-full bg-white border border-slate-200 text-slate-700 font-bold py-3.5 px-4 rounded-xl hover:border-slate-300 hover:shadow-sm transition-all flex items-center justify-center gap-3 relative overflow-hidden group",children:[a.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[a.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),a.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),a.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),a.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),a.jsx("span",{className:"relative z-10",children:n})]})};let eV={data:""},tV=n=>{if(typeof window=="object"){let e=(n?n.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(n||document.head).appendChild(e),e.firstChild}return n||eV},nV=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,sV=/\/\*[^]*?\*\/|  +/g,QE=/\n+/g,Qu=(n,e)=>{let t="",s="",i="";for(let r in n){let o=n[r];r[0]=="@"?r[1]=="i"?t=r+" "+o+";":s+=r[1]=="f"?Qu(o,r):r+"{"+Qu(o,r[1]=="k"?"":e)+"}":typeof o=="object"?s+=Qu(o,e?e.replace(/([^,])+/g,c=>r.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,c):c?c+" "+u:u)):r):o!=null&&(r=/^--/.test(r)?r:r.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Qu.p?Qu.p(r,o):r+":"+o+";")}return t+(e&&i?e+"{"+i+"}":i)+s},xd={},O5=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+O5(n[t]);return e}return n},iV=(n,e,t,s,i)=>{let r=O5(n),o=xd[r]||(xd[r]=(u=>{let h=0,f=11;for(;h<u.length;)f=101*f+u.charCodeAt(h++)>>>0;return"go"+f})(r));if(!xd[o]){let u=r!==n?n:(h=>{let f,g,x=[{}];for(;f=nV.exec(h.replace(sV,""));)f[4]?x.shift():f[3]?(g=f[3].replace(QE," ").trim(),x.unshift(x[0][g]=x[0][g]||{})):x[0][f[1]]=f[2].replace(QE," ").trim();return x[0]})(n);xd[o]=Qu(i?{["@keyframes "+o]:u}:u,t?"":"."+o)}let c=t&&xd.g?xd.g:null;return t&&(xd.g=xd[o]),((u,h,f,g)=>{g?h.data=h.data.replace(g,u):h.data.indexOf(u)===-1&&(h.data=f?u+h.data:h.data+u)})(xd[o],e,s,c),o},aV=(n,e,t)=>n.reduce((s,i,r)=>{let o=e[r];if(o&&o.call){let c=o(t),u=c&&c.props&&c.props.className||/^go/.test(c)&&c;o=u?"."+u:c&&typeof c=="object"?c.props?"":Qu(c,""):c===!1?"":c}return s+i+(o??"")},"");function gv(n){let e=this||{},t=n.call?n(e.p):n;return iV(t.unshift?t.raw?aV(t,[].slice.call(arguments,1),e.p):t.reduce((s,i)=>Object.assign(s,i&&i.call?i(e.p):i),{}):t,tV(e.target),e.g,e.o,e.k)}let L5,M2,P2;gv.bind({g:1});let Dd=gv.bind({k:1});function rV(n,e,t,s){Qu.p=e,L5=n,M2=t,P2=s}function lh(n,e){let t=this||{};return function(){let s=arguments;function i(r,o){let c=Object.assign({},r),u=c.className||i.className;t.p=Object.assign({theme:M2&&M2()},c),t.o=/ *go\d+/.test(u),c.className=gv.apply(t,s)+(u?" "+u:"");let h=n;return n[0]&&(h=c.as||n,delete c.as),P2&&h[0]&&P2(c),L5(h,c)}return i}}var oV=n=>typeof n=="function",Cy=(n,e)=>oV(n)?n(e):n,lV=(()=>{let n=0;return()=>(++n).toString()})(),F5=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),cV=20,lN="default",z5=(n,e)=>{let{toastLimit:t}=n.settings;switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,t)};case 1:return{...n,toasts:n.toasts.map(o=>o.id===e.toast.id?{...o,...e.toast}:o)};case 2:let{toast:s}=e;return z5(n,{type:n.toasts.find(o=>o.id===s.id)?1:0,toast:s});case 3:let{toastId:i}=e;return{...n,toasts:n.toasts.map(o=>o.id===i||i===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(o=>o.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let r=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+r}))}}},ly=[],I5={toasts:[],pausedAt:void 0,settings:{toastLimit:cV}},Rc={},B5=(n,e=lN)=>{Rc[e]=z5(Rc[e]||I5,n),ly.forEach(([t,s])=>{t===e&&s(Rc[e])})},H5=n=>Object.keys(Rc).forEach(e=>B5(n,e)),dV=n=>Object.keys(Rc).find(e=>Rc[e].toasts.some(t=>t.id===n)),pv=(n=lN)=>e=>{B5(e,n)},uV={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},hV=(n={},e=lN)=>{let[t,s]=_.useState(Rc[e]||I5),i=_.useRef(Rc[e]);_.useEffect(()=>(i.current!==Rc[e]&&s(Rc[e]),ly.push([e,s]),()=>{let o=ly.findIndex(([c])=>c===e);o>-1&&ly.splice(o,1)}),[e]);let r=t.toasts.map(o=>{var c,u,h;return{...n,...n[o.type],...o,removeDelay:o.removeDelay||((c=n[o.type])==null?void 0:c.removeDelay)||n?.removeDelay,duration:o.duration||((u=n[o.type])==null?void 0:u.duration)||n?.duration||uV[o.type],style:{...n.style,...(h=n[o.type])==null?void 0:h.style,...o.style}}});return{...t,toasts:r}},fV=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:t?.id||lV()}),nx=n=>(e,t)=>{let s=fV(e,n,t);return pv(s.toasterId||dV(s.id))({type:2,toast:s}),s.id},qt=(n,e)=>nx("blank")(n,e);qt.error=nx("error");qt.success=nx("success");qt.loading=nx("loading");qt.custom=nx("custom");qt.dismiss=(n,e)=>{let t={type:3,toastId:n};e?pv(e)(t):H5(t)};qt.dismissAll=n=>qt.dismiss(void 0,n);qt.remove=(n,e)=>{let t={type:4,toastId:n};e?pv(e)(t):H5(t)};qt.removeAll=n=>qt.remove(void 0,n);qt.promise=(n,e,t)=>{let s=qt.loading(e.loading,{...t,...t?.loading});return typeof n=="function"&&(n=n()),n.then(i=>{let r=e.success?Cy(e.success,i):void 0;return r?qt.success(r,{id:s,...t,...t?.success}):qt.dismiss(s),i}).catch(i=>{let r=e.error?Cy(e.error,i):void 0;r?qt.error(r,{id:s,...t,...t?.error}):qt.dismiss(s)}),n};var mV=1e3,gV=(n,e="default")=>{let{toasts:t,pausedAt:s}=hV(n,e),i=_.useRef(new Map).current,r=_.useCallback((g,x=mV)=>{if(i.has(g))return;let y=setTimeout(()=>{i.delete(g),o({type:4,toastId:g})},x);i.set(g,y)},[]);_.useEffect(()=>{if(s)return;let g=Date.now(),x=t.map(y=>{if(y.duration===1/0)return;let N=(y.duration||0)+y.pauseDuration-(g-y.createdAt);if(N<0){y.visible&&qt.dismiss(y.id);return}return setTimeout(()=>qt.dismiss(y.id,e),N)});return()=>{x.forEach(y=>y&&clearTimeout(y))}},[t,s,e]);let o=_.useCallback(pv(e),[e]),c=_.useCallback(()=>{o({type:5,time:Date.now()})},[o]),u=_.useCallback((g,x)=>{o({type:1,toast:{id:g,height:x}})},[o]),h=_.useCallback(()=>{s&&o({type:6,time:Date.now()})},[s,o]),f=_.useCallback((g,x)=>{let{reverseOrder:y=!1,gutter:N=8,defaultPosition:j}=x||{},E=t.filter(M=>(M.position||j)===(g.position||j)&&M.height),A=E.findIndex(M=>M.id===g.id),R=E.filter((M,L)=>L<A&&M.visible).length;return E.filter(M=>M.visible).slice(...y?[R+1]:[0,R]).reduce((M,L)=>M+(L.height||0)+N,0)},[t]);return _.useEffect(()=>{t.forEach(g=>{if(g.dismissed)r(g.id,g.removeDelay);else{let x=i.get(g.id);x&&(clearTimeout(x),i.delete(g.id))}})},[t,r]),{toasts:t,handlers:{updateHeight:u,startPause:c,endPause:h,calculateOffset:f}}},pV=Dd`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,xV=Dd`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,bV=Dd`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,yV=lh("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${pV} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${xV} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${bV} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,vV=Dd`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,wV=lh("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${vV} 1s linear infinite;
`,SV=Dd`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,NV=Dd`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,jV=lh("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${SV} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${NV} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,CV=lh("div")`
  position: absolute;
`,AV=lh("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,EV=Dd`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,_V=lh("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${EV} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,TV=({toast:n})=>{let{icon:e,type:t,iconTheme:s}=n;return e!==void 0?typeof e=="string"?_.createElement(_V,null,e):e:t==="blank"?null:_.createElement(AV,null,_.createElement(wV,{...s}),t!=="loading"&&_.createElement(CV,null,t==="error"?_.createElement(yV,{...s}):_.createElement(jV,{...s})))},kV=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,DV=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,RV="0%{opacity:0;} 100%{opacity:1;}",MV="0%{opacity:1;} 100%{opacity:0;}",PV=lh("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,OV=lh("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,LV=(n,e)=>{let t=n.includes("top")?1:-1,[s,i]=F5()?[RV,MV]:[kV(t),DV(t)];return{animation:e?`${Dd(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Dd(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},FV=_.memo(({toast:n,position:e,style:t,children:s})=>{let i=n.height?LV(n.position||e||"top-center",n.visible):{opacity:0},r=_.createElement(TV,{toast:n}),o=_.createElement(OV,{...n.ariaProps},Cy(n.message,n));return _.createElement(PV,{className:n.className,style:{...i,...t,...n.style}},typeof s=="function"?s({icon:r,message:o}):_.createElement(_.Fragment,null,r,o))});rV(_.createElement);var zV=({id:n,className:e,style:t,onHeightUpdate:s,children:i})=>{let r=_.useCallback(o=>{if(o){let c=()=>{let u=o.getBoundingClientRect().height;s(n,u)};c(),new MutationObserver(c).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[n,s]);return _.createElement("div",{ref:r,className:e,style:t},i)},IV=(n,e)=>{let t=n.includes("top"),s=t?{top:0}:{bottom:0},i=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:F5()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...s,...i}},BV=gv`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,vb=16,HV=({reverseOrder:n,position:e="top-center",toastOptions:t,gutter:s,children:i,toasterId:r,containerStyle:o,containerClassName:c})=>{let{toasts:u,handlers:h}=gV(t,r);return _.createElement("div",{"data-rht-toaster":r||"",style:{position:"fixed",zIndex:9999,top:vb,left:vb,right:vb,bottom:vb,pointerEvents:"none",...o},className:c,onMouseEnter:h.startPause,onMouseLeave:h.endPause},u.map(f=>{let g=f.position||e,x=h.calculateOffset(f,{reverseOrder:n,gutter:s,defaultPosition:e}),y=IV(g,x);return _.createElement(zV,{id:f.id,key:f.id,onHeightUpdate:h.updateHeight,className:f.visible?BV:"",style:y},f.type==="custom"?Cy(f.message,f):i?i(f):_.createElement(FV,{toast:f,position:g}))}))},Te=qt;function UV(){const n=kr(),e=ts(),{setToken:t}=Dr(),[s,i]=_.useState({email:"",password:""}),[r,o]=_.useState({}),[c,u]=_.useState(null),[h,f]=_.useState(!1);_.useEffect(()=>{n.state?.message&&(Te.error(n.state.message,{id:"auth-error",icon:""}),window.history.replaceState({},document.title))},[n]);const g=_.useRef(null),x=_.useRef(null),y=E=>{i({...s,[E.target.name]:E.target.value}),r[E.target.name]&&o(A=>({...A,[E.target.name]:null}))},N=()=>{const E={};return s.email?/\S+@\S+\.\S+/.test(s.email)||(E.email="Please enter a valid email address"):E.email="Email address is required",s.password||(E.password="Password is required"),o(E),Object.keys(E).length===0},j=async E=>{if(E.preventDefault(),u(null),!N()){!s.email||!/\S+@\S+\.\S+/.test(s.email)?g.current?.focus():s.password||x.current?.focus();return}f(!0);try{const A=await vF(s);t(A.token),A.data.business?(Te.dismiss(),e("/dashboard")):(Te.dismiss(),e("/onboarding"))}catch(A){const R=A.response?.data?.message;u(R||"Login failed. Please check your credentials.")}finally{f(!1)}};return a.jsxs("form",{onSubmit:j,className:"flex flex-col gap-5",children:[a.jsx(dn,{children:c&&a.jsxs(Ie.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm border border-red-100 flex items-center gap-2 overflow-hidden",children:[a.jsx(wa,{size:16,className:"shrink-0"}),c]})}),a.jsx("div",{className:"mb-2",children:a.jsx(P5,{text:"Sign in with Google"})}),a.jsxs("div",{className:"relative flex items-center justify-center mb-2",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-slate-200"})}),a.jsx("span",{className:"relative z-10 bg-white px-2 text-xs text-slate-400 font-medium uppercase tracking-wider",children:"Or sign in with email"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(lf,{icon:Js,name:"email",type:"email",value:s.email,onChange:y,placeholder:"Email Address",ref:g,error:r.email}),a.jsx(lf,{icon:Ho,name:"password",type:"password",value:s.password,onChange:y,placeholder:"Password",ref:x,error:r.password})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-600"}),a.jsx("span",{className:"text-slate-600",children:"Remember me"})]}),a.jsx(tn,{to:"/forgot-password",className:"text-indigo-600 hover:text-indigo-700 font-medium hover:underline",children:"Forgot Password?"})]}),a.jsx("button",{type:"submit",disabled:h,className:"w-full bg-slate-900 text-white font-bold py-3.5 px-4 rounded-xl hover:bg-slate-800 transition-all focus:ring-4 focus:ring-slate-900/20 disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2 mt-2 relative overflow-hidden active:scale-[0.98]",children:h?a.jsxs(a.Fragment,{children:[a.jsx(Sn,{className:"animate-spin",size:20}),"Signing in..."]}):"Sign In"}),a.jsx("div",{className:"text-center mt-6",children:a.jsxs("p",{className:"text-slate-500 text-sm",children:["Don't have an account?"," ",a.jsx(tn,{to:"/register",className:"text-indigo-600 font-bold hover:underline",children:"Create one free"})]})})]})}const Zm=({children:n,title:e,subtitle:t})=>{const s=n||a.jsx(V0,{});return a.jsxs("div",{className:"min-h-screen flex bg-white font-sans selection:bg-indigo-100 selection:text-indigo-900",children:[a.jsxs("div",{className:"hidden lg:flex w-1/2 bg-slate-900 relative overflow-hidden items-center justify-center p-12",children:[a.jsxs("div",{className:"absolute inset-0 z-0",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-900/60 via-slate-900 to-slate-900"}),a.jsx("div",{className:"absolute -top-32 -left-32 w-96 h-96 bg-indigo-500/20 rounded-full blur-3xl mix-blend-multiply filter animate-blob"}),a.jsx("div",{className:"absolute -bottom-32 -right-32 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl mix-blend-multiply filter animate-blob animation-delay-2000"}),a.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 brightness-100 contrast-150"})]}),a.jsxs("div",{className:"relative z-10 max-w-lg text-center lg:text-left",children:[a.jsxs(tn,{to:"/",className:"flex items-center gap-3 mb-12 group w-fit",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20 flex items-center justify-center group-hover:bg-white/20 transition-colors",children:a.jsx("span",{className:"text-white font-bold text-xl",children:"D"})}),a.jsx("span",{className:"font-bold text-2xl text-white",children:"DocForge"})]}),a.jsxs(Ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[a.jsx(KU,{className:"text-indigo-400 mb-6 w-10 h-10 opacity-50"}),a.jsxs("h2",{className:"text-3xl md:text-5xl font-bold text-white mb-6 leading-tight",children:["Build details. ",a.jsx("br",{}),a.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400",children:"Scale vision."})]}),a.jsx("p",{className:"text-lg text-slate-400 leading-relaxed mb-8",children:'"DocForge has completely transformed how we handle proposals. What used to take hours now takes minutes, and clients are impressed by the professional look."'}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-500/20 border border-indigo-500/30"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-white",children:"Sarah Jenkins"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"CEO, Creative Studio"})]})]})]})]})]}),a.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8 lg:p-12 relative",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"mb-10 text-center lg:text-left",children:[e&&a.jsx(Ie.h2,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"text-3xl font-bold text-slate-900 mb-2",children:e}),t&&a.jsx(Ie.p,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},className:"text-slate-500",children:t})]}),a.jsx(Ie.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:s})]})})]})};function VV(){return a.jsx(Zm,{title:"Welcome back",subtitle:"Enter your details to access your workspace.",children:a.jsx(UV,{})})}function WV(){const[n,e]=_.useState({name:"",email:"",password:"",password_confirmation:""}),[t,s]=_.useState({}),[i,r]=_.useState(null),[o,c]=_.useState(!1),u=ts(),{setToken:h}=Dr(),f=_.useRef(null),g=_.useRef(null),x=_.useRef(null),y=_.useRef(null),N=M=>{e({...n,[M.target.name]:M.target.value}),t[M.target.name]&&s(L=>({...L,[M.target.name]:null}))},j=()=>{const M={};n.name.trim()||(M.name="Full name is required"),n.email?/\S+@\S+\.\S+/.test(n.email)||(M.email="Please enter a valid email address"):M.email="Email address is required";const L=n.password;return L?L.length<12?M.password="Password must be at least 12 characters":/(?=.*[a-zA-Z])(?=.*[0-9])(?=.*[!@#$%^&*])/.test(L)||(M.password="Must contain letters, numbers, and special characters (!@#$%^&*)"):M.password="Password is required",n.password!==n.password_confirmation&&(M.password_confirmation="Passwords do not match"),s(M),Object.keys(M).length===0},[E]=qy(),A=E.get("redirect"),R=async M=>{if(M.preventDefault(),r(null),!j()){n.name.trim()?t.email?g.current?.focus():t.password?x.current?.focus():t.password_confirmation&&y.current?.focus():f.current?.focus();return}c(!0);try{const L=await yF(n);h(L.token),u(A||"/verify-email-message")}catch(L){const z=L.response?.data?.message,W=L.response?.data?.errors;if(W){const I={};W.email&&(I.email=W.email[0]),W.password&&(I.password=W.password[0]),W.name&&(I.name=W.name[0]),s(I),Object.keys(I).length===0&&r(z||"Registration failed. Please fix the errors.")}else r(z||"Registration failed. Please try again.")}finally{c(!1)}};return a.jsxs("form",{onSubmit:R,className:"flex flex-col gap-5",children:[a.jsx(dn,{children:i&&a.jsxs(Ie.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm border border-red-100 flex items-center gap-2 overflow-hidden",children:[a.jsx(wa,{size:16,className:"shrink-0"}),i]})}),a.jsx("div",{className:"mb-2",children:a.jsx(P5,{text:"Sign up with Google"})}),a.jsxs("div",{className:"relative flex items-center justify-center mb-2",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-slate-200"})}),a.jsx("span",{className:"relative z-10 bg-white px-2 text-xs text-slate-400 font-medium uppercase tracking-wider",children:"Or continue with email"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(lf,{icon:Ai,name:"name",type:"text",value:n.name,onChange:N,placeholder:"Full Name",ref:f,error:t.name}),a.jsx(lf,{icon:Js,name:"email",type:"email",value:n.email,onChange:N,placeholder:"Email Address",ref:g,error:t.email}),a.jsx(lf,{icon:Ho,name:"password",type:"password",value:n.password,onChange:N,placeholder:"Password (12+ chars, special char & number)",ref:x,error:t.password}),a.jsx(lf,{icon:Ho,name:"password_confirmation",type:"password",value:n.password_confirmation,onChange:N,placeholder:"Confirm Password",ref:y,error:t.password_confirmation})]}),a.jsx("button",{type:"submit",disabled:o,className:"w-full bg-slate-900 text-white font-bold py-3.5 px-4 rounded-xl hover:bg-slate-800 transition-all focus:ring-4 focus:ring-slate-900/20 disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2 mt-4 relative overflow-hidden active:scale-[0.98]",children:o?a.jsxs(a.Fragment,{children:[a.jsx(Sn,{className:"animate-spin",size:20}),"Creating Account..."]}):"Register"}),a.jsx("div",{className:"text-center mt-6",children:a.jsxs("p",{className:"text-slate-500 text-sm",children:["Already have an account?"," ",a.jsx(tn,{to:"/login",className:"text-indigo-600 font-bold hover:underline",children:"Sign In"})]})})]})}function GV(){return a.jsx(Zm,{title:"Start your journey",subtitle:"Join thousands of businesses managing documents with ease.",children:a.jsx(WV,{})})}const wb=[{id:1,title:"Company Basics",description:"Tell us about your business entity."},{id:2,title:"Demographics",description:"Where are you located?"},{id:3,title:"Branding",description:"Make it yours with a logo."},{id:4,title:"Review",description:"Almost there!"}],YV=[{label:"Agency",icon:ug},{label:"Technology",icon:bU},{label:"Legal",icon:r7},{label:"Consulting",icon:p9},{label:"Freelance",icon:ar},{label:"Other",icon:Od}],XV=[{label:"Solo",value:"1",desc:"Just me"},{label:"Small",value:"2-10",desc:"Startups"},{label:"Medium",value:"11-50",desc:"Growing"},{label:"Large",value:"50+",desc:"Enterprise"}];function KV(){ts();const{setUser:n}=Dr(),[e,t]=_.useState(1),[s,i]=_.useState(!1),[r,o]=_.useState(""),[c,u]=_.useState({name:"",industry:"",size:"",city:"",country:"",website:"",logo:null}),h=A=>{o(""),u({...c,[A.target.name]:A.target.value})},f=A=>{const R=A.target.files[0];if(R){if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(R.type)){o("Invalid file type. Please upload a PNG, JPG, or WEBP file."),A.target.value=null;return}if(R.size>1024*1024){o("File size exceeds 1MB. Please upload a smaller image."),A.target.value=null;return}o(""),u({...c,logo:R})}},g=()=>{r||e<4&&t(e+1)},x=()=>{o(""),u(A=>({...A,logo:null})),e<4&&t(A=>A+1)},y=()=>{e>1&&t(e-1)},N=async A=>{A.preventDefault(),i(!0),o("");const R=new FormData;Object.keys(c).forEach(M=>{c[M]!==null&&R.append(M,c[M])});try{await wt.post("/businesses",R,{headers:{"Content-Type":"multipart/form-data"}}),window.location.href="/dashboard"}catch(M){if(console.error(M),M.response&&M.response.data&&M.response.data.errors){const L=M.response.data.errors;if(L.logo)o(L.logo[0]);else{const z=Object.values(L)[0][0];o(z)}}else o(M.response?.data?.message||"Failed to create business. Please try again.");i(!1)}},j=c.name&&c.industry&&c.size,E=c.city&&c.country;return a.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4 selection:bg-indigo-100 selection:text-indigo-900",children:a.jsxs(Ie.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-5xl bg-white rounded-3xl shadow-2xl overflow-hidden flex flex-col md:flex-row min-h-[600px]",children:[a.jsxs("div",{className:"md:w-1/3 bg-slate-900 relative p-8 flex flex-col justify-between overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 z-0",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-indigo-900/40 via-slate-900 to-slate-900"}),a.jsx("div",{className:"absolute -bottom-20 -left-20 w-64 h-64 bg-indigo-500/20 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute top-1/2 right-0 w-48 h-48 bg-purple-500/10 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 contrast-150"})]}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-10 text-white font-bold text-2xl",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/10 border border-white/10 flex items-center justify-center backdrop-blur-md",children:"D"}),"DocForge"]}),a.jsx("nav",{className:"space-y-8",children:wb.map(A=>{const R=A.id===e,M=A.id<e;return a.jsxs("div",{className:"flex gap-4 relative group",children:[A.id!==wb.length&&a.jsx("div",{className:`absolute left-[15px] top-10 w-0.5 h-12 ${M?"bg-indigo-500":"bg-slate-800"}`}),a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold z-10 transition-all duration-300 ${R?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/40 scale-110":M?"bg-green-500 text-white":"bg-slate-800 text-slate-500 group-hover:bg-slate-700"}`,children:M?a.jsx(us,{size:16}):A.id}),a.jsxs("div",{children:[a.jsx("h4",{className:`text-sm font-bold transition-colors ${R?"text-white":M?"text-slate-300":"text-slate-500"}`,children:A.title}),a.jsx("p",{className:`text-xs transition-colors ${R?"text-indigo-200":"text-slate-600"}`,children:A.description})]})]},A.id)})})]}),a.jsx("div",{className:"relative z-10 text-slate-500 text-xs",children:" DocForge Inc."})]}),a.jsx("div",{className:"md:w-2/3 p-8 md:p-12 flex flex-col bg-white overflow-y-auto",children:a.jsxs("div",{className:"max-w-xl mx-auto w-full flex-grow flex flex-col",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-2",children:wb[e-1].title}),a.jsx("p",{className:"text-slate-500",children:wb[e-1].description})]}),r&&a.jsxs("div",{className:"mb-6 p-4 bg-red-50 text-red-600 rounded-xl border border-red-100 flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"}),r]}),a.jsxs("form",{onSubmit:N,className:"flex-grow flex flex-col",children:[a.jsxs(dn,{mode:"wait",custom:e,children:[e===1&&a.jsxs(Ie.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Business Name"}),a.jsxs("div",{className:"relative group",children:[a.jsx(Od,{className:"absolute left-4 top-3.5 text-slate-400 group-focus-within:text-indigo-600 transition-colors",size:20}),a.jsx("input",{name:"name",value:c.name,onChange:h,className:"w-full pl-12 p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-100 focus:border-indigo-600 outline-none transition-all font-medium text-slate-800",placeholder:"e.g. Acme Corp",required:!0,autoFocus:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"Industry"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:YV.map(A=>a.jsxs("button",{type:"button",onClick:()=>u({...c,industry:A.label}),className:`p-3 rounded-xl border-2 flex flex-col items-center gap-2 transition-all ${c.industry===A.label?"border-indigo-600 bg-indigo-50/50 text-indigo-700":"border-slate-100 hover:border-slate-200 text-slate-600"}`,children:[a.jsx(A.icon,{size:24,className:c.industry===A.label?"text-indigo-600":"text-slate-400"}),a.jsx("span",{className:"text-xs font-bold",children:A.label})]},A.label))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"Team Size"}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:XV.map(A=>a.jsxs("button",{type:"button",onClick:()=>u({...c,size:A.value}),className:`p-3 rounded-xl border-2 text-left transition-all ${c.size===A.value?"border-indigo-600 bg-indigo-50/50 text-indigo-700":"border-slate-100 hover:border-slate-200"}`,children:[a.jsx("div",{className:"font-bold text-sm",children:A.label}),a.jsx("div",{className:"text-xs opacity-70",children:A.desc})]},A.value))})]})]},"step1"),e===2&&a.jsxs(Ie.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"City"}),a.jsxs("div",{className:"relative group",children:[a.jsx(RU,{className:"absolute left-4 top-3.5 text-slate-400 group-focus-within:text-indigo-600 transition-colors",size:20}),a.jsx("input",{name:"city",value:c.city,onChange:h,className:"w-full pl-12 p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-100 focus:border-indigo-600 outline-none transition-all font-medium text-slate-800",placeholder:"New York",required:!0,autoFocus:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Country"}),a.jsxs("div",{className:"relative group",children:[a.jsx(nN,{className:"absolute left-4 top-3.5 text-slate-400 group-focus-within:text-indigo-600 transition-colors",size:20}),a.jsx("input",{name:"country",value:c.country,onChange:h,className:"w-full pl-12 p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-100 focus:border-indigo-600 outline-none transition-all font-medium text-slate-800",placeholder:"USA",required:!0})]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Website ",a.jsx("span",{className:"text-slate-400 font-normal",children:"(Optional)"})]}),a.jsx("input",{name:"website",value:c.website,onChange:h,className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-100 focus:border-indigo-600 outline-none transition-all font-medium text-slate-800",placeholder:"https://example.com"})]})]},"step2"),e===3&&a.jsx(Ie.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6 flex flex-col items-center justify-center py-8",children:a.jsxs("div",{className:"w-full max-w-sm",children:[a.jsxs("label",{className:"relative flex flex-col items-center justify-center w-full h-64 border-2 border-slate-300 border-dashed rounded-3xl cursor-pointer bg-slate-50 hover:bg-slate-100 hover:border-indigo-400 transition-all group overflow-hidden",children:[a.jsx("input",{type:"file",onChange:f,accept:"image/*",className:"hidden"}),c.logo?a.jsxs("div",{className:"relative z-10 text-center",children:[a.jsx("div",{className:"w-20 h-20 mx-auto mb-3 rounded-xl bg-white shadow-sm flex items-center justify-center border border-slate-200",children:a.jsx("img",{src:URL.createObjectURL(c.logo),alt:"Logo preview",className:"max-w-full max-h-full rounded-lg object-contain"})}),a.jsx("p",{className:"font-bold text-slate-700",children:c.logo.name}),a.jsx("p",{className:"text-xs text-indigo-600 mt-1",children:"Click to change"})]}):a.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-indigo-50 text-indigo-500 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:a.jsx(Sf,{size:28})}),a.jsxs("p",{className:"mb-2 text-sm text-slate-600 font-medium",children:[a.jsx("span",{className:"font-bold text-indigo-600",children:"Click to upload"})," or drag and drop"]}),a.jsx("p",{className:"text-xs text-slate-500",children:"SVG, PNG, JPG or GIF (MAX. 2MB)"})]})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("button",{type:"button",onClick:x,className:"text-slate-400 hover:text-slate-600 text-sm font-medium",children:"Skip for now"})})]})},"step3"),e===4&&a.jsxs(Ie.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col items-center justify-center text-center py-8",children:[a.jsx("div",{className:"w-24 h-24 bg-green-100 text-green-600 rounded-full flex items-center justify-center mb-6 animate-bounce",children:a.jsx(us,{size:48})}),a.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"You're all set!"}),a.jsxs("p",{className:"text-slate-500 max-w-sm mb-8",children:["We have everything we need to set up your workspace for ",a.jsx("span",{className:"font-bold text-slate-900",children:c.name}),"."]}),a.jsxs("div",{className:"w-full bg-slate-50 p-6 rounded-2xl text-left border border-slate-100 mb-8",children:[a.jsx("h4",{className:"font-bold text-slate-900 mb-4 text-sm uppercase tracking-wider",children:"Summary"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between border-b border-slate-200 pb-2",children:[a.jsx("span",{className:"text-slate-500",children:"Business Name"}),a.jsx("span",{className:"font-medium text-slate-900",children:c.name})]}),a.jsxs("div",{className:"flex justify-between border-b border-slate-200 pb-2",children:[a.jsx("span",{className:"text-slate-500",children:"Industry"}),a.jsx("span",{className:"font-medium text-slate-900",children:c.industry})]}),a.jsxs("div",{className:"flex justify-between border-b border-slate-200 pb-2",children:[a.jsx("span",{className:"text-slate-500",children:"Location"}),a.jsxs("span",{className:"font-medium text-slate-900",children:[c.city,", ",c.country]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-500",children:"Logo"}),a.jsx("span",{className:"font-medium text-slate-900",children:c.logo?"Uploaded":"Skipped"})]})]})]})]},"step4")]}),a.jsxs("div",{className:"flex items-center justify-between mt-auto pt-8",children:[e>1?a.jsxs("button",{type:"button",onClick:y,disabled:s,className:"flex items-center gap-2 text-slate-500 hover:text-slate-800 font-bold px-4 py-2 hover:bg-slate-50 rounded-lg transition-colors",children:[a.jsx(hv,{size:18})," Back"]}):a.jsx("div",{}),e<4?a.jsxs("button",{type:"button",onClick:g,disabled:e===1&&!j||e===2&&!E||!!r,className:"flex items-center gap-2 bg-slate-900 text-white px-8 py-3 rounded-xl font-bold hover:bg-slate-800 shadow-lg hover:shadow-xl hover:-translate-y-0.5 disabled:opacity-50 disabled:shadow-none disabled:transform-none transition-all",children:["Next ",a.jsx(fo,{size:18})]}):a.jsx("button",{type:"submit",disabled:s,className:"flex items-center gap-2 bg-indigo-600 text-white px-10 py-3 rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-500/30 hover:shadow-indigo-500/50 hover:-translate-y-0.5 disabled:opacity-70 transition-all w-full md:w-auto justify-center",children:s?a.jsx(Sn,{className:"animate-spin"}):"Launch Workspace"})]})]})]})})]})})}const ZV=()=>wt.get("/team"),QV=n=>wt.post("/team",n),JV=(n,e)=>wt.put(`/team/${n}`,e),qV=n=>wt.delete(`/team/${n}`),$V=n=>wt.post("/accept-invite",n),eW=()=>{const[n]=qy(),e=ts(),{setToken:t,setUser:s}=Dr(),i=n.get("token"),r=n.get("email"),[o,c]=_.useState({name:"",password:"",password_confirmation:""}),[u,h]=_.useState(!1),[f,g]=_.useState(null),[x,y]=_.useState(!1);_.useEffect(()=>{(!i||!r)&&g("Invalid invitation link. Please check your email.")},[i,r]);const N=async j=>{if(j.preventDefault(),o.password!==o.password_confirmation){g("Passwords do not match");return}h(!0),g(null);try{const E=await $V({token:i,email:r,name:o.name,password:o.password,password_confirmation:o.password_confirmation});y(!0),E.data.token&&(localStorage.setItem("token",E.data.token),setTimeout(()=>{e("/dashboard"),window.location.reload()},1500))}catch(E){console.error(E),g(E.response?.data?.message||"Failed to accept invitation.")}finally{h(!1)}};return x?a.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:a.jsxs(Ie.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center border border-slate-100",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(us,{className:"text-green-600",size:32})}),a.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Welcome Aboard!"}),a.jsx("p",{className:"text-slate-600 mb-6",children:"Your account has been set up successfully. Redirecting you to the dashboard..."}),a.jsx(Ym,{className:"animate-spin mx-auto text-indigo-600"})]})}):a.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:a.jsxs(Ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-xl max-w-md w-full overflow-hidden border border-slate-100",children:[a.jsxs("div",{className:"bg-indigo-600 px-8 py-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:"Join the Team"}),a.jsx("p",{className:"text-indigo-100 text-sm",children:"Set up your account to get started."})]}),a.jsxs("div",{className:"p-8",children:[f&&a.jsxs("div",{className:"mb-6 p-4 bg-red-50 text-red-600 text-sm rounded-lg flex gap-3 items-start border border-red-100",children:[a.jsx(wa,{size:18,className:"mt-0.5 flex-shrink-0"}),f]}),!i||!r?a.jsx("div",{className:"text-center",children:a.jsx("button",{onClick:()=>e("/login"),className:"text-indigo-600 font-medium hover:underline",children:"Go to Login"})}):a.jsxs("form",{onSubmit:N,className:"space-y-5",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Full Name"}),a.jsx("input",{type:"text",required:!0,value:o.name,onChange:j=>c({...o,name:j.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-colors",placeholder:"John Doe"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Create Password"}),a.jsx("input",{type:"password",required:!0,minLength:8,value:o.password,onChange:j=>c({...o,password:j.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-colors",placeholder:""})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Confirm Password"}),a.jsx("input",{type:"password",required:!0,minLength:8,value:o.password_confirmation,onChange:j=>c({...o,password_confirmation:j.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-colors",placeholder:""})]}),a.jsxs("button",{type:"submit",disabled:u,className:"w-full py-2.5 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 focus:ring-4 focus:ring-indigo-500/20 transition-all shadow-sm flex items-center justify-center gap-2",children:[u&&a.jsx(Ym,{size:18,className:"animate-spin"}),"Complete Setup"]})]})]})]})})},tW=()=>{const[n,e]=_.useState("idle"),[t,s]=_.useState(""),i=async()=>{e("loading");try{await CF(),e("success"),s("Verification link resent!"),setTimeout(()=>{e("idle"),s("")},5e3)}catch(r){console.error(r),e("error"),s(r.response?.data?.message||"Failed to resend.")}};return a.jsxs("div",{className:"min-h-screen bg-[#0A0A0A] flex flex-col justify-center items-center px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-purple-500/10 rounded-full blur-[100px]"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-blue-500/10 rounded-full blur-[100px]"})]}),a.jsxs(Ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-md w-full space-y-8 bg-white/5 backdrop-blur-xl p-8 rounded-2xl border border-white/10 relative z-10 text-center",children:[a.jsx("div",{className:"mx-auto w-16 h-16 bg-purple-500/20 rounded-full flex items-center justify-center mb-6",children:a.jsx(Js,{className:"h-8 w-8 text-purple-400"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Check your inbox"}),a.jsx("p",{className:"text-gray-400 text-lg",children:"We've sent a verification link to your email."})]}),a.jsxs("div",{className:"bg-white/5 rounded-lg p-4 text-left border border-white/5",children:[a.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"Click the link in the email to verify your account and unlock:"}),a.jsxs("ul",{className:"space-y-2 text-sm text-gray-400",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Full access to all tools"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Secure document sharing"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Team collaboration features"]})]})]}),a.jsxs("div",{className:"pt-4 border-t border-white/10",children:[a.jsxs("p",{className:"text-sm text-gray-500",children:["Didn't receive the email? ",a.jsx("span",{className:"text-gray-400",children:"Check your spam folder or"}),a.jsx("button",{onClick:i,disabled:n==="loading"||n==="success",className:"ml-1 text-purple-400 hover:text-purple-300 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n==="loading"?"Sending...":"click to resend"})]}),(n==="success"||n==="error")&&a.jsx(Ie.p,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:`text-xs mt-2 font-medium ${n==="success"?"text-green-400":"text-red-400"}`,children:t})]}),a.jsx("div",{className:"text-sm",children:a.jsxs(tn,{to:"/login",className:"text-gray-500 hover:text-white transition-colors flex items-center justify-center gap-2 group",children:["Back to login ",a.jsx(Ml,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})})]})]})},nW=()=>{const[n]=qy(),e=ts(),{fetchUser:t}=Dr(),[s,i]=_.useState("verifying"),[r,o]=_.useState("Verifying your email...");return _.useEffect(()=>{(async()=>{const u=n.get("verify_url");if(!u){i("error"),o("Invalid verification link.");return}try{await wt.get(u),i("success"),o("Email verified successfully!"),await t(),setTimeout(()=>{localStorage.getItem("token")?e("/onboarding"):e("/login",{state:{message:"Email verified successfully! Please log in to continue."}})},2e3)}catch(h){console.error("Verification failed",h),i("error");const f=h.response?.data?.message||"Verification failed. The link may be expired.";o(f),Te.error(f)}})()},[n,e,t]),a.jsxs("div",{className:"min-h-screen bg-[#0A0A0A] flex justify-center items-center px-4 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[40%] h-[40%] bg-purple-500/10 rounded-full blur-[100px]"}),a.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[40%] h-[40%] bg-blue-500/10 rounded-full blur-[100px]"})]}),a.jsxs(Ie.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"max-w-md w-full bg-white/5 backdrop-blur-xl p-8 rounded-2xl border border-white/10 flex flex-col items-center text-center relative z-10",children:[s==="verifying"&&a.jsxs(a.Fragment,{children:[a.jsx(Sn,{className:"w-12 h-12 text-blue-500 animate-spin mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-white",children:"Verifying..."}),a.jsx("p",{className:"text-gray-400 mt-2",children:"Please wait while we secure your account."})]}),s==="success"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mb-4",children:a.jsx(S5,{className:"w-8 h-8 text-green-500"})}),a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Verified!"}),a.jsx("p",{className:"text-gray-400 mt-2",children:r}),a.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Redirecting to onboarding..."})]}),s==="error"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mb-4",children:a.jsx(N5,{className:"w-8 h-8 text-red-500"})}),a.jsx("h2",{className:"text-xl font-bold text-white",children:"Verification Failed"}),a.jsx("p",{className:"text-gray-400 mt-2",children:r}),a.jsx("button",{onClick:()=>e("/login"),className:"mt-6 px-6 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-colors border border-white/10",children:"Back to Login"})]})]})]})},sW=()=>{const[n,e]=_.useState(""),[t,s]=_.useState(!1),[i,r]=_.useState(null),[o,c]=_.useState(!1),u=async h=>{h.preventDefault(),r(null),s(!0);try{await SF(n),c(!0)}catch(f){r(f.response?.data?.message||f.response?.data?.errors?.email?.[0]||"Failed to send reset link.")}finally{s(!1)}};return o?a.jsx(Zm,{title:"Check your inbox",subtitle:"We've sent you a password reset link.",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mb-6",children:a.jsx(Js,{className:"text-green-600",size:24})}),a.jsxs("p",{className:"text-slate-600 mb-6",children:["We sent a password reset link to ",a.jsx("strong",{children:n}),". Please check your email and follow the instructions to reset your password."]}),a.jsxs(tn,{to:"/login",className:"inline-flex items-center text-sm font-medium text-indigo-600 hover:text-indigo-500",children:[a.jsx(Ia,{className:"mr-2",size:16}),"Back to sign in"]})]})}):a.jsx(Zm,{title:"Reset password",subtitle:"Enter your email and we'll send you a reset link.",children:a.jsxs("form",{onSubmit:u,className:"space-y-6",children:[i&&a.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm border border-red-100",children:i}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700",children:"Email address"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Js,{className:"h-5 w-5 text-slate-400"})}),a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>e(h.target.value),className:"block w-full pl-10 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-sm",placeholder:"you@example.com"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("button",{type:"submit",disabled:t,className:"w-full flex justify-center py-2.5 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-slate-900 hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-900 disabled:opacity-50 disabled:cursor-not-allowed",children:t?a.jsxs(a.Fragment,{children:[a.jsx(Sn,{className:"animate-spin -ml-1 mr-2 h-4 w-4"}),"Sending link..."]}):"Send reset link"}),a.jsx("div",{className:"text-center",children:a.jsxs(tn,{to:"/login",className:"inline-flex items-center text-sm font-medium text-slate-600 hover:text-slate-900",children:[a.jsx(Ia,{className:"mr-2",size:16}),"Back to sign in"]})})]})]})})},iW=()=>{const{token:n}=Wo(),[e]=qy(),t=ts(),s=e.get("email"),[i,r]=_.useState(""),[o,c]=_.useState(""),[u,h]=_.useState(!1),[f,g]=_.useState(null),[x,y]=_.useState(!1),N=async j=>{if(j.preventDefault(),g(null),i!==o){g("Passwords do not match");return}if(i.length<8){g("Password must be at least 8 characters");return}h(!0);try{await NF({token:n,email:s,password:i,password_confirmation:o}),y(!0),setTimeout(()=>{t("/login",{state:{message:"Password reset successfully. Please login with your new password."}})},3e3)}catch(E){g(E.response?.data?.message||E.response?.data?.errors?.password?.[0]||"Failed to reset password.")}finally{h(!1)}};return x?a.jsx(Zm,{title:"Password Reset",subtitle:"Your password has been successfully reset.",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mb-6",children:a.jsx(us,{className:"text-green-600",size:24})}),a.jsx("p",{className:"text-slate-600 mb-6",children:"You will be redirected to the login page momentarily."}),a.jsxs(tn,{to:"/login",className:"inline-flex items-center text-sm font-medium text-indigo-600 hover:text-indigo-500",children:[a.jsx(Ia,{className:"mr-2",size:16}),"Go to Sign In"]})]})}):a.jsx(Zm,{title:"Set new password",subtitle:"Your new password must be different to previously used passwords.",children:a.jsxs("form",{onSubmit:N,className:"space-y-6",children:[f&&a.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm border border-red-100",children:f}),a.jsx("input",{type:"hidden",name:"email",value:s||""}),a.jsx("input",{type:"hidden",name:"token",value:n||""}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700",children:"New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Ho,{className:"h-5 w-5 text-slate-400"})}),a.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:i,onChange:j=>r(j.target.value),className:"block w-full pl-10 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-sm",placeholder:""})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"password_confirmation",className:"block text-sm font-medium text-slate-700",children:"Confirm Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Ho,{className:"h-5 w-5 text-slate-400"})}),a.jsx("input",{id:"password_confirmation",name:"password_confirmation",type:"password",required:!0,value:o,onChange:j=>c(j.target.value),className:"block w-full pl-10 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-sm",placeholder:""})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("button",{type:"submit",disabled:u,className:"w-full flex justify-center py-2.5 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-slate-900 hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-900 disabled:opacity-50 disabled:cursor-not-allowed",children:u?a.jsxs(a.Fragment,{children:[a.jsx(Sn,{className:"animate-spin -ml-1 mr-2 h-4 w-4"}),"Resetting password..."]}):"Reset password"}),a.jsx("div",{className:"text-center",children:a.jsxs(tn,{to:"/login",className:"inline-flex items-center text-sm font-medium text-slate-600 hover:text-slate-900",children:[a.jsx(Ia,{className:"mr-2",size:16}),"Back to sign in"]})})]})]})})},aW=()=>{const n=ts(),e=kr(),{setToken:t}=Dr();return _.useEffect(()=>{const s=new URLSearchParams(e.search),i=s.get("token"),r=s.get("error");i?(t(i),n("/dashboard")):n("/login",{state:{message:r||"Login failed. Please try again."}})},[e,n,t]),a.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx(Sn,{className:"animate-spin text-indigo-600",size:40}),a.jsx("p",{className:"text-slate-600 font-medium",children:"Authenticating..."})]})})},rW=()=>wt.get("/dashboard/stats"),oW=n=>wt.get("/dashboard/analytics",{params:n}),lW=()=>wt.get("/dashboard/activity");function sx(n){return n+.5|0}const $u=(n,e,t)=>Math.max(Math.min(n,t),e);function Xp(n){return $u(sx(n*2.55),0,255)}function nh(n){return $u(sx(n*255),0,255)}function Sd(n){return $u(sx(n/2.55)/100,0,1)}function JE(n){return $u(sx(n*100),0,100)}const Ro={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},O2=[..."0123456789ABCDEF"],cW=n=>O2[n&15],dW=n=>O2[(n&240)>>4]+O2[n&15],Sb=n=>(n&240)>>4===(n&15),uW=n=>Sb(n.r)&&Sb(n.g)&&Sb(n.b)&&Sb(n.a);function hW(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Ro[n[1]]*17,g:255&Ro[n[2]]*17,b:255&Ro[n[3]]*17,a:e===5?Ro[n[4]]*17:255}:(e===7||e===9)&&(t={r:Ro[n[1]]<<4|Ro[n[2]],g:Ro[n[3]]<<4|Ro[n[4]],b:Ro[n[5]]<<4|Ro[n[6]],a:e===9?Ro[n[7]]<<4|Ro[n[8]]:255})),t}const fW=(n,e)=>n<255?e(n):"";function mW(n){var e=uW(n)?cW:dW;return n?"#"+e(n.r)+e(n.g)+e(n.b)+fW(n.a,e):void 0}const gW=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function U5(n,e,t){const s=e*Math.min(t,1-t),i=(r,o=(r+n/30)%12)=>t-s*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function pW(n,e,t){const s=(i,r=(i+n/60)%6)=>t-t*e*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function xW(n,e,t){const s=U5(n,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)s[i]*=1-e-t,s[i]+=e;return s}function bW(n,e,t,s,i){return n===i?(e-t)/s+(e<t?6:0):e===i?(t-n)/s+2:(n-e)/s+4}function cN(n){const t=n.r/255,s=n.g/255,i=n.b/255,r=Math.max(t,s,i),o=Math.min(t,s,i),c=(r+o)/2;let u,h,f;return r!==o&&(f=r-o,h=c>.5?f/(2-r-o):f/(r+o),u=bW(t,s,i,f,r),u=u*60+.5),[u|0,h||0,c]}function dN(n,e,t,s){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,s)).map(nh)}function uN(n,e,t){return dN(U5,n,e,t)}function yW(n,e,t){return dN(xW,n,e,t)}function vW(n,e,t){return dN(pW,n,e,t)}function V5(n){return(n%360+360)%360}function wW(n){const e=gW.exec(n);let t=255,s;if(!e)return;e[5]!==s&&(t=e[6]?Xp(+e[5]):nh(+e[5]));const i=V5(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=yW(i,r,o):e[1]==="hsv"?s=vW(i,r,o):s=uN(i,r,o),{r:s[0],g:s[1],b:s[2],a:t}}function SW(n,e){var t=cN(n);t[0]=V5(t[0]+e),t=uN(t),n.r=t[0],n.g=t[1],n.b=t[2]}function NW(n){if(!n)return;const e=cN(n),t=e[0],s=JE(e[1]),i=JE(e[2]);return n.a<255?`hsla(${t}, ${s}%, ${i}%, ${Sd(n.a)})`:`hsl(${t}, ${s}%, ${i}%)`}const qE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},$E={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function jW(){const n={},e=Object.keys($E),t=Object.keys(qE);let s,i,r,o,c;for(s=0;s<e.length;s++){for(o=c=e[s],i=0;i<t.length;i++)r=t[i],c=c.replace(r,qE[r]);r=parseInt($E[o],16),n[c]=[r>>16&255,r>>8&255,r&255]}return n}let Nb;function CW(n){Nb||(Nb=jW(),Nb.transparent=[0,0,0,0]);const e=Nb[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const AW=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function EW(n){const e=AW.exec(n);let t=255,s,i,r;if(e){if(e[7]!==s){const o=+e[7];t=e[8]?Xp(o):$u(o*255,0,255)}return s=+e[1],i=+e[3],r=+e[5],s=255&(e[2]?Xp(s):$u(s,0,255)),i=255&(e[4]?Xp(i):$u(i,0,255)),r=255&(e[6]?Xp(r):$u(r,0,255)),{r:s,g:i,b:r,a:t}}}function _W(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Sd(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const vw=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,pm=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function TW(n,e,t){const s=pm(Sd(n.r)),i=pm(Sd(n.g)),r=pm(Sd(n.b));return{r:nh(vw(s+t*(pm(Sd(e.r))-s))),g:nh(vw(i+t*(pm(Sd(e.g))-i))),b:nh(vw(r+t*(pm(Sd(e.b))-r))),a:n.a+t*(e.a-n.a)}}function jb(n,e,t){if(n){let s=cN(n);s[e]=Math.max(0,Math.min(s[e]+s[e]*t,e===0?360:1)),s=uN(s),n.r=s[0],n.g=s[1],n.b=s[2]}}function W5(n,e){return n&&Object.assign(e||{},n)}function e_(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=nh(n[3]))):(e=W5(n,{r:0,g:0,b:0,a:1}),e.a=nh(e.a)),e}function kW(n){return n.charAt(0)==="r"?EW(n):wW(n)}class S0{constructor(e){if(e instanceof S0)return e;const t=typeof e;let s;t==="object"?s=e_(e):t==="string"&&(s=hW(e)||CW(e)||kW(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=W5(this._rgb);return e&&(e.a=Sd(e.a)),e}set rgb(e){this._rgb=e_(e)}rgbString(){return this._valid?_W(this._rgb):void 0}hexString(){return this._valid?mW(this._rgb):void 0}hslString(){return this._valid?NW(this._rgb):void 0}mix(e,t){if(e){const s=this.rgb,i=e.rgb;let r;const o=t===r?.5:t,c=2*o-1,u=s.a-i.a,h=((c*u===-1?c:(c+u)/(1+c*u))+1)/2;r=1-h,s.r=255&h*s.r+r*i.r+.5,s.g=255&h*s.g+r*i.g+.5,s.b=255&h*s.b+r*i.b+.5,s.a=o*s.a+(1-o)*i.a,this.rgb=s}return this}interpolate(e,t){return e&&(this._rgb=TW(this._rgb,e._rgb,t)),this}clone(){return new S0(this.rgb)}alpha(e){return this._rgb.a=nh(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=sx(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return jb(this._rgb,2,e),this}darken(e){return jb(this._rgb,2,-e),this}saturate(e){return jb(this._rgb,1,e),this}desaturate(e){return jb(this._rgb,1,-e),this}rotate(e){return SW(this._rgb,e),this}}function bd(){}const DW=(()=>{let n=0;return()=>n++})();function xs(n){return n==null}function Vi(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Nn(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Ba(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Sc(n,e){return Ba(n)?n:e}function xn(n,e){return typeof n>"u"?e:n}const RW=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,G5=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function js(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function $n(n,e,t,s){let i,r,o;if(Vi(n))for(r=n.length,i=0;i<r;i++)e.call(t,n[i],i);else if(Nn(n))for(o=Object.keys(n),r=o.length,i=0;i<r;i++)e.call(t,n[o[i]],o[i])}function Ay(n,e){let t,s,i,r;if(!n||!e||n.length!==e.length)return!1;for(t=0,s=n.length;t<s;++t)if(i=n[t],r=e[t],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function Ey(n){if(Vi(n))return n.map(Ey);if(Nn(n)){const e=Object.create(null),t=Object.keys(n),s=t.length;let i=0;for(;i<s;++i)e[t[i]]=Ey(n[t[i]]);return e}return n}function Y5(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function MW(n,e,t,s){if(!Y5(n))return;const i=e[n],r=t[n];Nn(i)&&Nn(r)?N0(i,r,s):e[n]=Ey(r)}function N0(n,e,t){const s=Vi(e)?e:[e],i=s.length;if(!Nn(n))return n;t=t||{};const r=t.merger||MW;let o;for(let c=0;c<i;++c){if(o=s[c],!Nn(o))continue;const u=Object.keys(o);for(let h=0,f=u.length;h<f;++h)r(u[h],n,o,t)}return n}function r0(n,e){return N0(n,e,{merger:PW})}function PW(n,e,t){if(!Y5(n))return;const s=e[n],i=t[n];Nn(s)&&Nn(i)?r0(s,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Ey(i))}const t_={"":n=>n,x:n=>n.x,y:n=>n.y};function OW(n){const e=n.split("."),t=[];let s="";for(const i of e)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(t.push(s),s="");return t}function LW(n){const e=OW(n);return t=>{for(const s of e){if(s==="")break;t=t&&t[s]}return t}}function j0(n,e){return(t_[e]||(t_[e]=LW(e)))(n)}function hN(n){return n.charAt(0).toUpperCase()+n.slice(1)}const _y=n=>typeof n<"u",ih=n=>typeof n=="function",n_=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function FW(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const es=Math.PI,Hs=2*es,zW=Hs+es,Ty=Number.POSITIVE_INFINITY,IW=es/180,Gi=es/2,Wh=es/4,s_=es*2/3,X5=Math.log10,Qm=Math.sign;function o0(n,e,t){return Math.abs(n-e)<t}function i_(n){const e=Math.round(n);n=o0(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(X5(n))),s=n/t;return(s<=1?1:s<=2?2:s<=5?5:10)*t}function BW(n){const e=[],t=Math.sqrt(n);let s;for(s=1;s<t;s++)n%s===0&&(e.push(s),e.push(n/s));return t===(t|0)&&e.push(t),e.sort((i,r)=>i-r).pop(),e}function HW(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function C0(n){return!HW(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function UW(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function VW(n,e,t){let s,i,r;for(s=0,i=n.length;s<i;s++)r=n[s][t],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function jd(n){return n*(es/180)}function WW(n){return n*(180/es)}function a_(n){if(!Ba(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function K5(n,e){const t=e.x-n.x,s=e.y-n.y,i=Math.sqrt(t*t+s*s);let r=Math.atan2(s,t);return r<-.5*es&&(r+=Hs),{angle:r,distance:i}}function L2(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function GW(n,e){return(n-e+zW)%Hs-es}function uo(n){return(n%Hs+Hs)%Hs}function A0(n,e,t,s){const i=uo(n),r=uo(e),o=uo(t),c=uo(r-i),u=uo(o-i),h=uo(i-r),f=uo(i-o);return i===r||i===o||s&&r===o||c>u&&h<f}function Fa(n,e,t){return Math.max(e,Math.min(t,n))}function YW(n){return Fa(n,-32768,32767)}function Cd(n,e,t,s=1e-6){return n>=Math.min(e,t)-s&&n<=Math.max(e,t)+s}function fN(n,e,t){t=t||(o=>n[o]<e);let s=n.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,t(r)?i=r:s=r;return{lo:i,hi:s}}const cf=(n,e,t,s)=>fN(n,t,s?i=>{const r=n[i][e];return r<t||r===t&&n[i+1][e]===t}:i=>n[i][e]<t),XW=(n,e,t)=>fN(n,t,s=>n[s][e]>=t);function KW(n,e,t){let s=0,i=n.length;for(;s<i&&n[s]<e;)s++;for(;i>s&&n[i-1]>t;)i--;return s>0||i<n.length?n.slice(s,i):n}const Z5=["push","pop","shift","splice","unshift"];function ZW(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Z5.forEach(t=>{const s="_onData"+hN(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return n._chartjs.listeners.forEach(c=>{typeof c[s]=="function"&&c[s](...r)}),o}})})}function r_(n,e){const t=n._chartjs;if(!t)return;const s=t.listeners,i=s.indexOf(e);i!==-1&&s.splice(i,1),!(s.length>0)&&(Z5.forEach(r=>{delete n[r]}),delete n._chartjs)}function QW(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const Q5=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function J5(n,e){let t=[],s=!1;return function(...i){t=i,s||(s=!0,Q5.call(window,()=>{s=!1,n.apply(e,t)}))}}function JW(n,e){let t;return function(...s){return e?(clearTimeout(t),t=setTimeout(n,e,s)):n.apply(this,s),e}}const mN=n=>n==="start"?"left":n==="end"?"right":"center",Ra=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,qW=(n,e,t,s)=>n===(s?"left":"right")?t:n==="center"?(e+t)/2:e;function $W(n,e,t){const s=e.length;let i=0,r=s;if(n._sorted){const{iScale:o,vScale:c,_parsed:u}=n,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,f=o.axis,{min:g,max:x,minDefined:y,maxDefined:N}=o.getUserBounds();if(y){if(i=Math.min(cf(u,f,g).lo,t?s:cf(e,f,o.getPixelForValue(g)).lo),h){const j=u.slice(0,i+1).reverse().findIndex(E=>!xs(E[c.axis]));i-=Math.max(0,j)}i=Fa(i,0,s-1)}if(N){let j=Math.max(cf(u,o.axis,x,!0).hi+1,t?0:cf(e,f,o.getPixelForValue(x),!0).hi+1);if(h){const E=u.slice(j-1).findIndex(A=>!xs(A[c.axis]));j+=Math.max(0,E)}r=Fa(j,i,s)-i}else r=s-i}return{start:i,count:r}}function eG(n){const{xScale:e,yScale:t,_scaleRanges:s}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!s)return n._scaleRanges=i,!0;const r=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==t.min||s.ymax!==t.max;return Object.assign(s,i),r}const Cb=n=>n===0||n===1,o_=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Hs/t)),l_=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Hs/t)+1,l0={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Gi)+1,easeOutSine:n=>Math.sin(n*Gi),easeInOutSine:n=>-.5*(Math.cos(es*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Cb(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Cb(n)?n:o_(n,.075,.3),easeOutElastic:n=>Cb(n)?n:l_(n,.075,.3),easeInOutElastic(n){return Cb(n)?n:n<.5?.5*o_(n*2,.1125,.45):.5+.5*l_(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-l0.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?l0.easeInBounce(n*2)*.5:l0.easeOutBounce(n*2-1)*.5+.5};function gN(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function c_(n){return gN(n)?n:new S0(n)}function ww(n){return gN(n)?n:new S0(n).saturate(.5).darken(.1).hexString()}const tG=["x","y","borderWidth","radius","tension"],nG=["color","borderColor","backgroundColor"];function sG(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:nG},numbers:{type:"number",properties:tG}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function iG(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const d_=new Map;function aG(n,e){e=e||{};const t=n+JSON.stringify(e);let s=d_.get(t);return s||(s=new Intl.NumberFormat(n,e),d_.set(t,s)),s}function pN(n,e,t){return aG(e,t).format(n)}const rG={values(n){return Vi(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const s=this.chart.options.locale;let i,r=n;if(t.length>1){const h=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(h<1e-4||h>1e15)&&(i="scientific"),r=oG(n,t)}const o=X5(Math.abs(r)),c=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),u={notation:i,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(u,this.options.ticks.format),pN(n,s,u)}};function oG(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var q5={formatters:rG};function lG(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:q5.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Nf=Object.create(null),F2=Object.create(null);function c0(n,e){if(!e)return n;const t=e.split(".");for(let s=0,i=t.length;s<i;++s){const r=t[s];n=n[r]||(n[r]=Object.create(null))}return n}function Sw(n,e,t){return typeof e=="string"?N0(c0(n,e),t):N0(c0(n,""),e)}class cG{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>ww(i.backgroundColor),this.hoverBorderColor=(s,i)=>ww(i.borderColor),this.hoverColor=(s,i)=>ww(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Sw(this,e,t)}get(e){return c0(this,e)}describe(e,t){return Sw(F2,e,t)}override(e,t){return Sw(Nf,e,t)}route(e,t,s,i){const r=c0(this,e),o=c0(this,s),c="_"+t;Object.defineProperties(r,{[c]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const u=this[c],h=o[i];return Nn(u)?Object.assign({},h,u):xn(u,h)},set(u){this[c]=u}}})}apply(e){e.forEach(t=>t(this))}}var hi=new cG({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[sG,iG,lG]);function dG(n){return!n||xs(n.size)||xs(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function u_(n,e,t,s,i){let r=e[i];return r||(r=e[i]=n.measureText(i).width,t.push(i)),r>s&&(s=r),s}function Gh(n,e,t){const s=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*s)/s+i}function h_(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function z2(n,e,t,s){$5(n,e,t,s,null)}function $5(n,e,t,s,i){let r,o,c,u,h,f,g,x;const y=e.pointStyle,N=e.rotation,j=e.radius;let E=(N||0)*IW;if(y&&typeof y=="object"&&(r=y.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(t,s),n.rotate(E),n.drawImage(y,-y.width/2,-y.height/2,y.width,y.height),n.restore();return}if(!(isNaN(j)||j<=0)){switch(n.beginPath(),y){default:i?n.ellipse(t,s,i/2,j,0,0,Hs):n.arc(t,s,j,0,Hs),n.closePath();break;case"triangle":f=i?i/2:j,n.moveTo(t+Math.sin(E)*f,s-Math.cos(E)*j),E+=s_,n.lineTo(t+Math.sin(E)*f,s-Math.cos(E)*j),E+=s_,n.lineTo(t+Math.sin(E)*f,s-Math.cos(E)*j),n.closePath();break;case"rectRounded":h=j*.516,u=j-h,o=Math.cos(E+Wh)*u,g=Math.cos(E+Wh)*(i?i/2-h:u),c=Math.sin(E+Wh)*u,x=Math.sin(E+Wh)*(i?i/2-h:u),n.arc(t-g,s-c,h,E-es,E-Gi),n.arc(t+x,s-o,h,E-Gi,E),n.arc(t+g,s+c,h,E,E+Gi),n.arc(t-x,s+o,h,E+Gi,E+es),n.closePath();break;case"rect":if(!N){u=Math.SQRT1_2*j,f=i?i/2:u,n.rect(t-f,s-u,2*f,2*u);break}E+=Wh;case"rectRot":g=Math.cos(E)*(i?i/2:j),o=Math.cos(E)*j,c=Math.sin(E)*j,x=Math.sin(E)*(i?i/2:j),n.moveTo(t-g,s-c),n.lineTo(t+x,s-o),n.lineTo(t+g,s+c),n.lineTo(t-x,s+o),n.closePath();break;case"crossRot":E+=Wh;case"cross":g=Math.cos(E)*(i?i/2:j),o=Math.cos(E)*j,c=Math.sin(E)*j,x=Math.sin(E)*(i?i/2:j),n.moveTo(t-g,s-c),n.lineTo(t+g,s+c),n.moveTo(t+x,s-o),n.lineTo(t-x,s+o);break;case"star":g=Math.cos(E)*(i?i/2:j),o=Math.cos(E)*j,c=Math.sin(E)*j,x=Math.sin(E)*(i?i/2:j),n.moveTo(t-g,s-c),n.lineTo(t+g,s+c),n.moveTo(t+x,s-o),n.lineTo(t-x,s+o),E+=Wh,g=Math.cos(E)*(i?i/2:j),o=Math.cos(E)*j,c=Math.sin(E)*j,x=Math.sin(E)*(i?i/2:j),n.moveTo(t-g,s-c),n.lineTo(t+g,s+c),n.moveTo(t+x,s-o),n.lineTo(t-x,s+o);break;case"line":o=i?i/2:Math.cos(E)*j,c=Math.sin(E)*j,n.moveTo(t-o,s-c),n.lineTo(t+o,s+c);break;case"dash":n.moveTo(t,s),n.lineTo(t+Math.cos(E)*(i?i/2:j),s+Math.sin(E)*j);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function E0(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function xv(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function bv(n){n.restore()}function uG(n,e,t,s,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){const r=(e.x+t.x)/2;n.lineTo(r,e.y),n.lineTo(r,t.y)}else i==="after"!=!!s?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function hG(n,e,t,s){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?t.cp2x:t.cp1x,s?t.cp2y:t.cp1y,t.x,t.y)}function fG(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),xs(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function mG(n,e,t,s,i){if(i.strikethrough||i.underline){const r=n.measureText(s),o=e-r.actualBoundingBoxLeft,c=e+r.actualBoundingBoxRight,u=t-r.actualBoundingBoxAscent,h=t+r.actualBoundingBoxDescent,f=i.strikethrough?(u+h)/2:h;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(o,f),n.lineTo(c,f),n.stroke()}}function gG(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function _0(n,e,t,s,i,r={}){const o=Vi(e)?e:[e],c=r.strokeWidth>0&&r.strokeColor!=="";let u,h;for(n.save(),n.font=i.string,fG(n,r),u=0;u<o.length;++u)h=o[u],r.backdrop&&gG(n,r.backdrop),c&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),xs(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(h,t,s,r.maxWidth)),n.fillText(h,t,s,r.maxWidth),mG(n,t,s,h,r),s+=Number(i.lineHeight);n.restore()}function ky(n,e){const{x:t,y:s,w:i,h:r,radius:o}=e;n.arc(t+o.topLeft,s+o.topLeft,o.topLeft,1.5*es,es,!0),n.lineTo(t,s+r-o.bottomLeft),n.arc(t+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,es,Gi,!0),n.lineTo(t+i-o.bottomRight,s+r),n.arc(t+i-o.bottomRight,s+r-o.bottomRight,o.bottomRight,Gi,0,!0),n.lineTo(t+i,s+o.topRight),n.arc(t+i-o.topRight,s+o.topRight,o.topRight,0,-Gi,!0),n.lineTo(t+o.topLeft,s)}const pG=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,xG=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function bG(n,e){const t=(""+n).match(pG);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const yG=n=>+n||0;function xN(n,e){const t={},s=Nn(e),i=s?Object.keys(e):e,r=Nn(n)?s?o=>xn(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of i)t[o]=yG(r(o));return t}function eM(n){return xN(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Om(n){return xN(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Uo(n){const e=eM(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function za(n,e){n=n||{},e=e||hi.font;let t=xn(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let s=xn(n.style,e.style);s&&!(""+s).match(xG)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:xn(n.family,e.family),lineHeight:bG(xn(n.lineHeight,e.lineHeight),t),size:t,style:s,weight:xn(n.weight,e.weight),string:""};return i.string=dG(i),i}function Ab(n,e,t,s){let i,r,o;for(i=0,r=n.length;i<r;++i)if(o=n[i],o!==void 0&&o!==void 0)return o}function vG(n,e,t){const{min:s,max:i}=n,r=G5(e,(i-s)/2),o=(c,u)=>t&&c===0?0:c+u;return{min:o(s,-Math.abs(r)),max:o(i,r)}}function Rf(n,e){return Object.assign(Object.create(n),e)}function bN(n,e=[""],t,s,i=()=>n[0]){const r=t||n;typeof s>"u"&&(s=iM("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:s,_getTarget:i,override:c=>bN([c,...n],e,r,s)};return new Proxy(o,{deleteProperty(c,u){return delete c[u],delete c._keys,delete n[0][u],!0},get(c,u){return nM(c,u,()=>_G(u,e,n,c))},getOwnPropertyDescriptor(c,u){return Reflect.getOwnPropertyDescriptor(c._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(c,u){return m_(c).includes(u)},ownKeys(c){return m_(c)},set(c,u,h){const f=c._storage||(c._storage=i());return c[u]=f[u]=h,delete c._keys,!0}})}function Jm(n,e,t,s){const i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:tM(n,s),setContext:r=>Jm(n,r,t,s),override:r=>Jm(n.override(r),e,t,s)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete n[o],!0},get(r,o,c){return nM(r,o,()=>SG(r,o,c))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(r,o,c){return n[o]=c,delete r[o],!0}})}function tM(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:s=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:s,isScriptable:ih(t)?t:()=>t,isIndexable:ih(s)?s:()=>s}}const wG=(n,e)=>n?n+hN(e):e,yN=(n,e)=>Nn(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function nM(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const s=t();return n[e]=s,s}function SG(n,e,t){const{_proxy:s,_context:i,_subProxy:r,_descriptors:o}=n;let c=s[e];return ih(c)&&o.isScriptable(e)&&(c=NG(e,c,n,t)),Vi(c)&&c.length&&(c=jG(e,c,n,o.isIndexable)),yN(e,c)&&(c=Jm(c,i,r&&r[e],o)),c}function NG(n,e,t,s){const{_proxy:i,_context:r,_subProxy:o,_stack:c}=t;if(c.has(n))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+n);c.add(n);let u=e(r,o||s);return c.delete(n),yN(n,u)&&(u=vN(i._scopes,i,n,u)),u}function jG(n,e,t,s){const{_proxy:i,_context:r,_subProxy:o,_descriptors:c}=t;if(typeof r.index<"u"&&s(n))return e[r.index%e.length];if(Nn(e[0])){const u=e,h=i._scopes.filter(f=>f!==u);e=[];for(const f of u){const g=vN(h,i,n,f);e.push(Jm(g,r,o&&o[n],c))}}return e}function sM(n,e,t){return ih(n)?n(e,t):n}const CG=(n,e)=>n===!0?e:typeof n=="string"?j0(e,n):void 0;function AG(n,e,t,s,i){for(const r of e){const o=CG(t,r);if(o){n.add(o);const c=sM(o._fallback,t,i);if(typeof c<"u"&&c!==t&&c!==s)return c}else if(o===!1&&typeof s<"u"&&t!==s)return null}return!1}function vN(n,e,t,s){const i=e._rootScopes,r=sM(e._fallback,t,s),o=[...n,...i],c=new Set;c.add(s);let u=f_(c,o,t,r||t,s);return u===null||typeof r<"u"&&r!==t&&(u=f_(c,o,r,u,s),u===null)?!1:bN(Array.from(c),[""],i,r,()=>EG(e,t,s))}function f_(n,e,t,s,i){for(;t;)t=AG(n,e,t,s,i);return t}function EG(n,e,t){const s=n._getTarget();e in s||(s[e]={});const i=s[e];return Vi(i)&&Nn(t)?t:i||{}}function _G(n,e,t,s){let i;for(const r of e)if(i=iM(wG(r,n),t),typeof i<"u")return yN(n,i)?vN(t,s,n,i):i}function iM(n,e){for(const t of e){if(!t)continue;const s=t[n];if(typeof s<"u")return s}}function m_(n){let e=n._keys;return e||(e=n._keys=TG(n._scopes)),e}function TG(n){const e=new Set;for(const t of n)for(const s of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(s);return Array.from(e)}const kG=Number.EPSILON||1e-14,qm=(n,e)=>e<n.length&&!n[e].skip&&n[e],aM=n=>n==="x"?"y":"x";function DG(n,e,t,s){const i=n.skip?e:n,r=e,o=t.skip?e:t,c=L2(r,i),u=L2(o,r);let h=c/(c+u),f=u/(c+u);h=isNaN(h)?0:h,f=isNaN(f)?0:f;const g=s*h,x=s*f;return{previous:{x:r.x-g*(o.x-i.x),y:r.y-g*(o.y-i.y)},next:{x:r.x+x*(o.x-i.x),y:r.y+x*(o.y-i.y)}}}function RG(n,e,t){const s=n.length;let i,r,o,c,u,h=qm(n,0);for(let f=0;f<s-1;++f)if(u=h,h=qm(n,f+1),!(!u||!h)){if(o0(e[f],0,kG)){t[f]=t[f+1]=0;continue}i=t[f]/e[f],r=t[f+1]/e[f],c=Math.pow(i,2)+Math.pow(r,2),!(c<=9)&&(o=3/Math.sqrt(c),t[f]=i*o*e[f],t[f+1]=r*o*e[f])}}function MG(n,e,t="x"){const s=aM(t),i=n.length;let r,o,c,u=qm(n,0);for(let h=0;h<i;++h){if(o=c,c=u,u=qm(n,h+1),!c)continue;const f=c[t],g=c[s];o&&(r=(f-o[t])/3,c[`cp1${t}`]=f-r,c[`cp1${s}`]=g-r*e[h]),u&&(r=(u[t]-f)/3,c[`cp2${t}`]=f+r,c[`cp2${s}`]=g+r*e[h])}}function PG(n,e="x"){const t=aM(e),s=n.length,i=Array(s).fill(0),r=Array(s);let o,c,u,h=qm(n,0);for(o=0;o<s;++o)if(c=u,u=h,h=qm(n,o+1),!!u){if(h){const f=h[e]-u[e];i[o]=f!==0?(h[t]-u[t])/f:0}r[o]=c?h?Qm(i[o-1])!==Qm(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}RG(n,i,r),MG(n,r,e)}function Eb(n,e,t){return Math.max(Math.min(n,t),e)}function OG(n,e){let t,s,i,r,o,c=E0(n[0],e);for(t=0,s=n.length;t<s;++t)o=r,r=c,c=t<s-1&&E0(n[t+1],e),r&&(i=n[t],o&&(i.cp1x=Eb(i.cp1x,e.left,e.right),i.cp1y=Eb(i.cp1y,e.top,e.bottom)),c&&(i.cp2x=Eb(i.cp2x,e.left,e.right),i.cp2y=Eb(i.cp2y,e.top,e.bottom)))}function LG(n,e,t,s,i){let r,o,c,u;if(e.spanGaps&&(n=n.filter(h=>!h.skip)),e.cubicInterpolationMode==="monotone")PG(n,i);else{let h=s?n[n.length-1]:n[0];for(r=0,o=n.length;r<o;++r)c=n[r],u=DG(h,c,n[Math.min(r+1,o-(s?0:1))%o],e.tension),c.cp1x=u.previous.x,c.cp1y=u.previous.y,c.cp2x=u.next.x,c.cp2y=u.next.y,h=c}e.capBezierPoints&&OG(n,t)}function wN(){return typeof window<"u"&&typeof document<"u"}function SN(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Dy(n,e,t){let s;return typeof n=="string"?(s=parseInt(n,10),n.indexOf("%")!==-1&&(s=s/100*e.parentNode[t])):s=n,s}const yv=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function FG(n,e){return yv(n).getPropertyValue(e)}const zG=["top","right","bottom","left"];function pf(n,e,t){const s={};t=t?"-"+t:"";for(let i=0;i<4;i++){const r=zG[i];s[r]=parseFloat(n[e+"-"+r+t])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const IG=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function BG(n,e){const t=n.touches,s=t&&t.length?t[0]:n,{offsetX:i,offsetY:r}=s;let o=!1,c,u;if(IG(i,r,n.target))c=i,u=r;else{const h=e.getBoundingClientRect();c=s.clientX-h.left,u=s.clientY-h.top,o=!0}return{x:c,y:u,box:o}}function qh(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:s}=e,i=yv(t),r=i.boxSizing==="border-box",o=pf(i,"padding"),c=pf(i,"border","width"),{x:u,y:h,box:f}=BG(n,t),g=o.left+(f&&c.left),x=o.top+(f&&c.top);let{width:y,height:N}=e;return r&&(y-=o.width+c.width,N-=o.height+c.height),{x:Math.round((u-g)/y*t.width/s),y:Math.round((h-x)/N*t.height/s)}}function HG(n,e,t){let s,i;if(e===void 0||t===void 0){const r=n&&SN(n);if(!r)e=n.clientWidth,t=n.clientHeight;else{const o=r.getBoundingClientRect(),c=yv(r),u=pf(c,"border","width"),h=pf(c,"padding");e=o.width-h.width-u.width,t=o.height-h.height-u.height,s=Dy(c.maxWidth,r,"clientWidth"),i=Dy(c.maxHeight,r,"clientHeight")}}return{width:e,height:t,maxWidth:s||Ty,maxHeight:i||Ty}}const eh=n=>Math.round(n*10)/10;function UG(n,e,t,s){const i=yv(n),r=pf(i,"margin"),o=Dy(i.maxWidth,n,"clientWidth")||Ty,c=Dy(i.maxHeight,n,"clientHeight")||Ty,u=HG(n,e,t);let{width:h,height:f}=u;if(i.boxSizing==="content-box"){const x=pf(i,"border","width"),y=pf(i,"padding");h-=y.width+x.width,f-=y.height+x.height}return h=Math.max(0,h-r.width),f=Math.max(0,s?h/s:f-r.height),h=eh(Math.min(h,o,u.maxWidth)),f=eh(Math.min(f,c,u.maxHeight)),h&&!f&&(f=eh(h/2)),(e!==void 0||t!==void 0)&&s&&u.height&&f>u.height&&(f=u.height,h=eh(Math.floor(f*s))),{width:h,height:f}}function g_(n,e,t){const s=e||1,i=eh(n.height*s),r=eh(n.width*s);n.height=eh(n.height),n.width=eh(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==s||o.height!==i||o.width!==r?(n.currentDevicePixelRatio=s,o.height=i,o.width=r,n.ctx.setTransform(s,0,0,s,0,0),!0):!1}const VG=(function(){let n=!1;try{const e={get passive(){return n=!0,!1}};wN()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n})();function p_(n,e){const t=FG(n,e),s=t&&t.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function $h(n,e,t,s){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function WG(n,e,t,s){return{x:n.x+t*(e.x-n.x),y:s==="middle"?t<.5?n.y:e.y:s==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function GG(n,e,t,s){const i={x:n.cp2x,y:n.cp2y},r={x:e.cp1x,y:e.cp1y},o=$h(n,i,t),c=$h(i,r,t),u=$h(r,e,t),h=$h(o,c,t),f=$h(c,u,t);return $h(h,f,t)}const YG=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,s){return t-s},leftForLtr(t,s){return t-s}}},XG=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Lm(n,e,t){return n?YG(e,t):XG()}function rM(n,e){let t,s;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,s=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=s)}function oM(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function lM(n){return n==="angle"?{between:A0,compare:GW,normalize:uo}:{between:Cd,compare:(e,t)=>e-t,normalize:e=>e}}function x_({start:n,end:e,count:t,loop:s,style:i}){return{start:n%t,end:e%t,loop:s&&(e-n+1)%t===0,style:i}}function KG(n,e,t){const{property:s,start:i,end:r}=t,{between:o,normalize:c}=lM(s),u=e.length;let{start:h,end:f,loop:g}=n,x,y;if(g){for(h+=u,f+=u,x=0,y=u;x<y&&o(c(e[h%u][s]),i,r);++x)h--,f--;h%=u,f%=u}return f<h&&(f+=u),{start:h,end:f,loop:g,style:n.style}}function cM(n,e,t){if(!t)return[n];const{property:s,start:i,end:r}=t,o=e.length,{compare:c,between:u,normalize:h}=lM(s),{start:f,end:g,loop:x,style:y}=KG(n,e,t),N=[];let j=!1,E=null,A,R,M;const L=()=>u(i,M,A)&&c(i,M)!==0,z=()=>c(r,A)===0||u(r,M,A),W=()=>j||L(),I=()=>!j||z();for(let Y=f,U=f;Y<=g;++Y)R=e[Y%o],!R.skip&&(A=h(R[s]),A!==M&&(j=u(A,i,r),E===null&&W()&&(E=c(A,i)===0?Y:U),E!==null&&I()&&(N.push(x_({start:E,end:Y,loop:x,count:o,style:y})),E=null),U=Y,M=A));return E!==null&&N.push(x_({start:E,end:g,loop:x,count:o,style:y})),N}function dM(n,e){const t=[],s=n.segments;for(let i=0;i<s.length;i++){const r=cM(s[i],n.points,e);r.length&&t.push(...r)}return t}function ZG(n,e,t,s){let i=0,r=e-1;if(t&&!s)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(r+=i);r>i&&n[r%e].skip;)r--;return r%=e,{start:i,end:r}}function QG(n,e,t,s){const i=n.length,r=[];let o=e,c=n[e],u;for(u=e+1;u<=t;++u){const h=n[u%i];h.skip||h.stop?c.skip||(s=!1,r.push({start:e%i,end:(u-1)%i,loop:s}),e=o=h.stop?u:null):(o=u,c.skip&&(e=u)),c=h}return o!==null&&r.push({start:e%i,end:o%i,loop:s}),r}function JG(n,e){const t=n.points,s=n.options.spanGaps,i=t.length;if(!i)return[];const r=!!n._loop,{start:o,end:c}=ZG(t,i,r,s);if(s===!0)return b_(n,[{start:o,end:c,loop:r}],t,e);const u=c<o?c+i:c,h=!!n._fullLoop&&o===0&&c===i-1;return b_(n,QG(t,o,u,h),t,e)}function b_(n,e,t,s){return!s||!s.setContext||!t?e:qG(n,e,t,s)}function qG(n,e,t,s){const i=n._chart.getContext(),r=y_(n.options),{_datasetIndex:o,options:{spanGaps:c}}=n,u=t.length,h=[];let f=r,g=e[0].start,x=g;function y(N,j,E,A){const R=c?-1:1;if(N!==j){for(N+=u;t[N%u].skip;)N-=R;for(;t[j%u].skip;)j+=R;N%u!==j%u&&(h.push({start:N%u,end:j%u,loop:E,style:A}),f=A,g=j%u)}}for(const N of e){g=c?g:N.start;let j=t[g%u],E;for(x=g+1;x<=N.end;x++){const A=t[x%u];E=y_(s.setContext(Rf(i,{type:"segment",p0:j,p1:A,p0DataIndex:(x-1)%u,p1DataIndex:x%u,datasetIndex:o}))),$G(E,f)&&y(g,x-1,N.loop,f),j=A,f=E}g<x-1&&y(g,x-1,N.loop,f)}return h}function y_(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function $G(n,e){if(!e)return!1;const t=[],s=function(i,r){return gN(r)?(t.includes(r)||t.push(r),t.indexOf(r)):r};return JSON.stringify(n,s)!==JSON.stringify(e,s)}function _b(n,e,t){return n.options.clip?n[t]:e[t]}function eY(n,e){const{xScale:t,yScale:s}=n;return t&&s?{left:_b(t,e,"left"),right:_b(t,e,"right"),top:_b(s,e,"top"),bottom:_b(s,e,"bottom")}:e}function uM(n,e){const t=e._clip;if(t.disabled)return!1;const s=eY(e,n.chartArea);return{left:t.left===!1?0:s.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:s.right+(t.right===!0?0:t.right),top:t.top===!1?0:s.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:s.bottom+(t.bottom===!0?0:t.bottom)}}class tY{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,s,i){const r=t.listeners[i],o=t.duration;r.forEach(c=>c({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(s-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Q5.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,c=!1,u;for(;o>=0;--o)u=r[o],u._active?(u._total>s.duration&&(s.duration=u._total),u.tick(e),c=!0):(r[o]=r[r.length-1],r.pop());c&&(i.draw(),this._notify(i,s,e,"progress")),r.length||(s.running=!1,this._notify(i,s,e,"complete"),s.initial=!1),t+=r.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let s=t.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,s)),s}listen(e,t,s){this._getAnims(e).listeners[t].push(s)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const s=t.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var yd=new tY;const v_="transparent",nY={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const s=c_(n||v_),i=s.valid&&c_(e||v_);return i&&i.valid?i.mix(s,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class sY{constructor(e,t,s,i){const r=t[s];i=Ab([e.to,i,r,e.from]);const o=Ab([e.from,r,i]);this._active=!0,this._fn=e.fn||nY[e.type||typeof o],this._easing=l0[e.easing]||l0.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=s,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Ab([e.to,t,i,e.from]),this._from=Ab([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,s=this._duration,i=this._prop,r=this._from,o=this._loop,c=this._to;let u;if(this._active=r!==c&&(o||t<s),!this._active){this._target[i]=c,this._notify(!0);return}if(t<0){this._target[i]=r;return}u=t/s%2,u=o&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[i]=this._fn(r,c,u)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,s)=>{e.push({res:t,rej:s})})}_notify(e){const t=e?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][t]()}}class hM{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Nn(e))return;const t=Object.keys(hi.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const r=e[i];if(!Nn(r))return;const o={};for(const c of t)o[c]=r[c];(Vi(r.properties)&&r.properties||[i]).forEach(c=>{(c===i||!s.has(c))&&s.set(c,o)})})}_animateOptions(e,t){const s=t.options,i=aY(e,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&iY(e.options.$animations,s).then(()=>{e.options=s},()=>{}),r}_createAnimations(e,t){const s=this._properties,i=[],r=e.$animations||(e.$animations={}),o=Object.keys(t),c=Date.now();let u;for(u=o.length-1;u>=0;--u){const h=o[u];if(h.charAt(0)==="$")continue;if(h==="options"){i.push(...this._animateOptions(e,t));continue}const f=t[h];let g=r[h];const x=s.get(h);if(g)if(x&&g.active()){g.update(x,f,c);continue}else g.cancel();if(!x||!x.duration){e[h]=f;continue}r[h]=g=new sY(x,e,h,f),i.push(g)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const s=this._createAnimations(e,t);if(s.length)return yd.add(this._chart,s),!0}}function iY(n,e){const t=[],s=Object.keys(e);for(let i=0;i<s.length;i++){const r=n[s[i]];r&&r.active()&&t.push(r.wait())}return Promise.all(t)}function aY(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function w_(n,e){const t=n&&n.options||{},s=t.reverse,i=t.min===void 0?e:0,r=t.max===void 0?e:0;return{start:s?r:i,end:s?i:r}}function rY(n,e,t){if(t===!1)return!1;const s=w_(n,t),i=w_(e,t);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function oY(n){let e,t,s,i;return Nn(n)?(e=n.top,t=n.right,s=n.bottom,i=n.left):e=t=s=i=n,{top:e,right:t,bottom:s,left:i,disabled:n===!1}}function fM(n,e){const t=[],s=n._getSortedDatasetMetas(e);let i,r;for(i=0,r=s.length;i<r;++i)t.push(s[i].index);return t}function S_(n,e,t,s={}){const i=n.keys,r=s.mode==="single";let o,c,u,h;if(e===null)return;let f=!1;for(o=0,c=i.length;o<c;++o){if(u=+i[o],u===t){if(f=!0,s.all)continue;break}h=n.values[u],Ba(h)&&(r||e===0||Qm(e)===Qm(h))&&(e+=h)}return!f&&!s.all?0:e}function lY(n,e){const{iScale:t,vScale:s}=e,i=t.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(n),c=new Array(o.length);let u,h,f;for(u=0,h=o.length;u<h;++u)f=o[u],c[u]={[i]:f,[r]:n[f]};return c}function Nw(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function cY(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function dY(n){const{min:e,max:t,minDefined:s,maxDefined:i}=n.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function uY(n,e,t){const s=n[e]||(n[e]={});return s[t]||(s[t]={})}function N_(n,e,t,s){for(const i of e.getMatchingVisibleMetas(s).reverse()){const r=n[i.index];if(t&&r>0||!t&&r<0)return i.index}return null}function j_(n,e){const{chart:t,_cachedMeta:s}=n,i=t._stacks||(t._stacks={}),{iScale:r,vScale:o,index:c}=s,u=r.axis,h=o.axis,f=cY(r,o,s),g=e.length;let x;for(let y=0;y<g;++y){const N=e[y],{[u]:j,[h]:E}=N,A=N._stacks||(N._stacks={});x=A[h]=uY(i,f,j),x[c]=E,x._top=N_(x,o,!0,s.type),x._bottom=N_(x,o,!1,s.type);const R=x._visualValues||(x._visualValues={});R[c]=E}}function jw(n,e){const t=n.scales;return Object.keys(t).filter(s=>t[s].axis===e).shift()}function hY(n,e){return Rf(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function fY(n,e,t){return Rf(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function kp(n,e){const t=n.controller.index,s=n.vScale&&n.vScale.axis;if(s){e=e||n._parsed;for(const i of e){const r=i._stacks;if(!r||r[s]===void 0||r[s][t]===void 0)return;delete r[s][t],r[s]._visualValues!==void 0&&r[s]._visualValues[t]!==void 0&&delete r[s]._visualValues[t]}}}const Cw=n=>n==="reset"||n==="none",C_=(n,e)=>e?n:Object.assign({},n),mY=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:fM(t,!0),values:null};class NN{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Nw(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&kp(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,s=this.getDataset(),i=(g,x,y,N)=>g==="x"?x:g==="r"?N:y,r=t.xAxisID=xn(s.xAxisID,jw(e,"x")),o=t.yAxisID=xn(s.yAxisID,jw(e,"y")),c=t.rAxisID=xn(s.rAxisID,jw(e,"r")),u=t.indexAxis,h=t.iAxisID=i(u,r,o,c),f=t.vAxisID=i(u,o,r,c);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(c),t.iScale=this.getScaleForId(h),t.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&r_(this._data,this),e._stacked&&kp(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),s=this._data;if(Nn(t)){const i=this._cachedMeta;this._data=lY(t,i)}else if(s!==t){if(s){r_(s,this);const i=this._cachedMeta;kp(i),i._parsed=[]}t&&Object.isExtensible(t)&&ZW(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=t._stacked;t._stacked=Nw(t.vScale,t),t.stack!==s.stack&&(i=!0,kp(t),t.stack=s.stack),this._resyncElements(e),(i||r!==t._stacked)&&(j_(this,t._parsed),t._stacked=Nw(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:o}=s,c=r.axis;let u=e===0&&t===i.length?!0:s._sorted,h=e>0&&s._parsed[e-1],f,g,x;if(this._parsing===!1)s._parsed=i,s._sorted=!0,x=i;else{Vi(i[e])?x=this.parseArrayData(s,i,e,t):Nn(i[e])?x=this.parseObjectData(s,i,e,t):x=this.parsePrimitiveData(s,i,e,t);const y=()=>g[c]===null||h&&g[c]<h[c];for(f=0;f<t;++f)s._parsed[f+e]=g=x[f],u&&(y()&&(u=!1),h=g);s._sorted=u}o&&j_(this,x)}parsePrimitiveData(e,t,s,i){const{iScale:r,vScale:o}=e,c=r.axis,u=o.axis,h=r.getLabels(),f=r===o,g=new Array(i);let x,y,N;for(x=0,y=i;x<y;++x)N=x+s,g[x]={[c]:f||r.parse(h[N],N),[u]:o.parse(t[N],N)};return g}parseArrayData(e,t,s,i){const{xScale:r,yScale:o}=e,c=new Array(i);let u,h,f,g;for(u=0,h=i;u<h;++u)f=u+s,g=t[f],c[u]={x:r.parse(g[0],f),y:o.parse(g[1],f)};return c}parseObjectData(e,t,s,i){const{xScale:r,yScale:o}=e,{xAxisKey:c="x",yAxisKey:u="y"}=this._parsing,h=new Array(i);let f,g,x,y;for(f=0,g=i;f<g;++f)x=f+s,y=t[x],h[f]={x:r.parse(j0(y,c),x),y:o.parse(j0(y,u),x)};return h}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,s){const i=this.chart,r=this._cachedMeta,o=t[e.axis],c={keys:fM(i,!0),values:t._stacks[e.axis]._visualValues};return S_(c,o,r.index,{mode:s})}updateRangeFromParsed(e,t,s,i){const r=s[t.axis];let o=r===null?NaN:r;const c=i&&s._stacks[t.axis];i&&c&&(i.values=c,o=S_(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&e===s.iScale,o=i.length,c=this._getOtherScale(e),u=mY(t,s,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:g}=dY(c);let x,y;function N(){y=i[x];const j=y[c.axis];return!Ba(y[e.axis])||f>j||g<j}for(x=0;x<o&&!(!N()&&(this.updateRangeFromParsed(h,e,y,u),r));++x);if(r){for(x=o-1;x>=0;--x)if(!N()){this.updateRangeFromParsed(h,e,y,u);break}}return h}getAllParsedValues(e){const t=this._cachedMeta._parsed,s=[];let i,r,o;for(i=0,r=t.length;i<r;++i)o=t[i][e.axis],Ba(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,s=t.iScale,i=t.vScale,r=this.getParsed(e);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=oY(xn(this.options.clip,rY(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,s=this._cachedMeta,i=s.data||[],r=t.chartArea,o=[],c=this._drawStart||0,u=this._drawCount||i.length-c,h=this.options.drawActiveElementsOnTop;let f;for(s.dataset&&s.dataset.draw(e,r,c,u),f=c;f<c+u;++f){const g=i[f];g.hidden||(g.active&&h?o.push(g):g.draw(e,r))}for(f=0;f<o.length;++f)o[f].draw(e,r)}getStyle(e,t){const s=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,t,s){const i=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=fY(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=hY(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=s,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",s){const i=t==="active",r=this._cachedDataOpts,o=e+"-"+t,c=r[o],u=this.enableOptionSharing&&_y(s);if(c)return C_(c,u);const h=this.chart.config,f=h.datasetElementScopeKeys(this._type,e),g=i?[`${e}Hover`,"hover",e,""]:[e,""],x=h.getOptionScopes(this.getDataset(),f),y=Object.keys(hi.elements[e]),N=()=>this.getContext(s,i,t),j=h.resolveNamedOptions(x,y,N,g);return j.$shared&&(j.$shared=u,r[o]=Object.freeze(C_(j,u))),j}_resolveAnimations(e,t,s){const i=this.chart,r=this._cachedDataOpts,o=`animation-${t}`,c=r[o];if(c)return c;let u;if(i.options.animation!==!1){const f=this.chart.config,g=f.datasetAnimationScopeKeys(this._type,t),x=f.getOptionScopes(this.getDataset(),g);u=f.createResolver(x,this.getContext(e,s,t))}const h=new hM(i,u&&u.animations);return u&&u._cacheable&&(r[o]=Object.freeze(h)),h}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Cw(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const s=this.resolveDataElementOptions(e,t),i=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(t,r)||r!==i;return this.updateSharedOptions(r,t,s),{sharedOptions:r,includeOptions:o}}updateElement(e,t,s,i){Cw(i)?Object.assign(e,s):this._resolveAnimations(t,i).update(e,s)}updateSharedOptions(e,t,s){e&&!Cw(t)&&this._resolveAnimations(void 0,t).update(e,s)}_setStyle(e,t,s,i){e.active=i;const r=this.getStyle(t,i);this._resolveAnimations(t,s,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,t,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,s=this._cachedMeta.data;for(const[c,u,h]of this._syncList)this[c](u,h);this._syncList=[];const i=s.length,r=t.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,e):r<i&&this._removeElements(r,i-r)}_insertElements(e,t,s=!0){const i=this._cachedMeta,r=i.data,o=e+t;let c;const u=h=>{for(h.length+=t,c=h.length-1;c>=o;c--)h[c]=h[c-t]};for(u(r),c=e;c<o;++c)r[c]=new this.dataElementType;this._parsing&&u(i._parsed),this.parse(e,t),s&&this.updateElements(r,e,t,"reset")}updateElements(e,t,s,i){}_removeElements(e,t){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(e,t);s._stacked&&kp(s,i)}s.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,s,i]=e;this[t](s,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function gY(n,e,t){let s=1,i=1,r=0,o=0;if(e<Hs){const c=n,u=c+e,h=Math.cos(c),f=Math.sin(c),g=Math.cos(u),x=Math.sin(u),y=(M,L,z)=>A0(M,c,u,!0)?1:Math.max(L,L*t,z,z*t),N=(M,L,z)=>A0(M,c,u,!0)?-1:Math.min(L,L*t,z,z*t),j=y(0,h,g),E=y(Gi,f,x),A=N(es,h,g),R=N(es+Gi,f,x);s=(j-A)/2,i=(E-R)/2,r=-(j+A)/2,o=-(E+R)/2}return{ratioX:s,ratioY:i,offsetX:r,offsetY:o}}class pY extends NN{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data,{labels:{pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:c}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((u,h)=>{const g=e.getDatasetMeta(0).controller.getStyle(h);return{text:u,fillStyle:g.backgroundColor,fontColor:r,hidden:!e.getDataVisibility(h),lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:g.borderWidth,strokeStyle:g.borderColor,textAlign:i,pointStyle:s,borderRadius:o&&(c||g.borderRadius),index:h}}):[]}},onClick(e,t,s){s.chart.toggleDataVisibility(t.index),s.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const s=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=s;else{let r=u=>+s[u];if(Nn(s[e])){const{key:u="value"}=this._parsing;r=h=>+j0(s[h],u)}let o,c;for(o=e,c=e+t;o<c;++o)i._parsed[o]=r(o)}}_getRotation(){return jd(this.options.rotation-90)}_getCircumference(){return jd(this.options.circumference)}_getRotationExtents(){let e=Hs,t=-Hs;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const i=this.chart.getDatasetMeta(s).controller,r=i._getRotation(),o=i._getCircumference();e=Math.min(e,r),t=Math.max(t,r+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:s}=t,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,c=Math.max((Math.min(s.width,s.height)-o)/2,0),u=Math.min(RW(this.options.cutout,c),1),h=this._getRingWeight(this.index),{circumference:f,rotation:g}=this._getRotationExtents(),{ratioX:x,ratioY:y,offsetX:N,offsetY:j}=gY(g,f,u),E=(s.width-o)/x,A=(s.height-o)/y,R=Math.max(Math.min(E,A)/2,0),M=G5(this.options.radius,R),L=Math.max(M*u,0),z=(M-L)/this._getVisibleDatasetWeightTotal();this.offsetX=N*M,this.offsetY=j*M,i.total=this.calculateTotal(),this.outerRadius=M-z*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-z*h,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const s=this.options,i=this._cachedMeta,r=this._getCircumference();return t&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*r/Hs)}updateElements(e,t,s,i){const r=i==="reset",o=this.chart,c=o.chartArea,h=o.options.animation,f=(c.left+c.right)/2,g=(c.top+c.bottom)/2,x=r&&h.animateScale,y=x?0:this.innerRadius,N=x?0:this.outerRadius,{sharedOptions:j,includeOptions:E}=this._getSharedOptions(t,i);let A=this._getRotation(),R;for(R=0;R<t;++R)A+=this._circumference(R,r);for(R=t;R<t+s;++R){const M=this._circumference(R,r),L=e[R],z={x:f+this.offsetX,y:g+this.offsetY,startAngle:A,endAngle:A+M,circumference:M,outerRadius:N,innerRadius:y};E&&(z.options=j||this.resolveDataElementOptions(R,L.active?"active":i)),A+=M,this.updateElement(L,R,z,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let s=0,i;for(i=0;i<t.length;i++){const r=e._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!t[i].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Hs*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=pN(t._parsed[e],s.options.locale);return{label:i[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const s=this.chart;let i,r,o,c,u;if(!e){for(i=0,r=s.data.datasets.length;i<r;++i)if(s.isDatasetVisible(i)){o=s.getDatasetMeta(i),e=o.data,c=o.controller;break}}if(!e)return 0;for(i=0,r=e.length;i<r;++i)u=c.resolveDataElementOptions(i),u.borderAlign!=="inner"&&(t=Math.max(t,u.borderWidth||0,u.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let s=0,i=e.length;s<i;++s){const r=this.resolveDataElementOptions(s);t=Math.max(t,r.offset||0,r.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(t+=this._getRingWeight(s));return t}_getRingWeight(e){return Math.max(xn(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class xY extends NN{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:s,data:i=[],_dataset:r}=t,o=this.chart._animationsDisabled;let{start:c,count:u}=$W(t,i,o);this._drawStart=c,this._drawCount=u,eG(t)&&(c=0,u=i.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=i;const h=this.resolveDatasetElementOptions(e);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:h},e),this.updateElements(i,c,u,e)}updateElements(e,t,s,i){const r=i==="reset",{iScale:o,vScale:c,_stacked:u,_dataset:h}=this._cachedMeta,{sharedOptions:f,includeOptions:g}=this._getSharedOptions(t,i),x=o.axis,y=c.axis,{spanGaps:N,segment:j}=this.options,E=C0(N)?N:Number.POSITIVE_INFINITY,A=this.chart._animationsDisabled||r||i==="none",R=t+s,M=e.length;let L=t>0&&this.getParsed(t-1);for(let z=0;z<M;++z){const W=e[z],I=A?W:{};if(z<t||z>=R){I.skip=!0;continue}const Y=this.getParsed(z),U=xs(Y[y]),Z=I[x]=o.getPixelForValue(Y[x],z),$=I[y]=r||U?c.getBasePixel():c.getPixelForValue(u?this.applyStack(c,Y,u):Y[y],z);I.skip=isNaN(Z)||isNaN($)||U,I.stop=z>0&&Math.abs(Y[x]-L[x])>E,j&&(I.parsed=Y,I.raw=h.data[z]),g&&(I.options=f||this.resolveDataElementOptions(z,W.active?"active":i)),A||this.updateElement(W,z,I,i),L=Y}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,s=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return s;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function Yh(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class jN{static override(e){Object.assign(jN.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Yh()}parse(){return Yh()}format(){return Yh()}add(){return Yh()}diff(){return Yh()}startOf(){return Yh()}endOf(){return Yh()}}var bY={_date:jN};function yY(n,e,t,s){const{controller:i,data:r,_sorted:o}=n,c=i._cachedMeta.iScale,u=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(c&&e===c.axis&&e!=="r"&&o&&r.length){const h=c._reversePixels?XW:cf;if(s){if(i._sharedOptions){const f=r[0],g=typeof f.getRange=="function"&&f.getRange(e);if(g){const x=h(r,e,t-g),y=h(r,e,t+g);return{lo:x.lo,hi:y.hi}}}}else{const f=h(r,e,t);if(u){const{vScale:g}=i._cachedMeta,{_parsed:x}=n,y=x.slice(0,f.lo+1).reverse().findIndex(j=>!xs(j[g.axis]));f.lo-=Math.max(0,y);const N=x.slice(f.hi).findIndex(j=>!xs(j[g.axis]));f.hi+=Math.max(0,N)}return f}}return{lo:0,hi:r.length-1}}function vv(n,e,t,s,i){const r=n.getSortedVisibleDatasetMetas(),o=t[e];for(let c=0,u=r.length;c<u;++c){const{index:h,data:f}=r[c],{lo:g,hi:x}=yY(r[c],e,o,i);for(let y=g;y<=x;++y){const N=f[y];N.skip||s(N,h,y)}}}function vY(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(s,i){const r=e?Math.abs(s.x-i.x):0,o=t?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Aw(n,e,t,s,i){const r=[];return!i&&!n.isPointInArea(e)||vv(n,t,e,function(c,u,h){!i&&!E0(c,n.chartArea,0)||c.inRange(e.x,e.y,s)&&r.push({element:c,datasetIndex:u,index:h})},!0),r}function wY(n,e,t,s){let i=[];function r(o,c,u){const{startAngle:h,endAngle:f}=o.getProps(["startAngle","endAngle"],s),{angle:g}=K5(o,{x:e.x,y:e.y});A0(g,h,f)&&i.push({element:o,datasetIndex:c,index:u})}return vv(n,t,e,r),i}function SY(n,e,t,s,i,r){let o=[];const c=vY(t);let u=Number.POSITIVE_INFINITY;function h(f,g,x){const y=f.inRange(e.x,e.y,i);if(s&&!y)return;const N=f.getCenterPoint(i);if(!(!!r||n.isPointInArea(N))&&!y)return;const E=c(e,N);E<u?(o=[{element:f,datasetIndex:g,index:x}],u=E):E===u&&o.push({element:f,datasetIndex:g,index:x})}return vv(n,t,e,h),o}function Ew(n,e,t,s,i,r){return!r&&!n.isPointInArea(e)?[]:t==="r"&&!s?wY(n,e,t,i):SY(n,e,t,s,i,r)}function A_(n,e,t,s,i){const r=[],o=t==="x"?"inXRange":"inYRange";let c=!1;return vv(n,t,e,(u,h,f)=>{u[o]&&u[o](e[t],i)&&(r.push({element:u,datasetIndex:h,index:f}),c=c||u.inRange(e.x,e.y,i))}),s&&!c?[]:r}var NY={modes:{index(n,e,t,s){const i=qh(e,n),r=t.axis||"x",o=t.includeInvisible||!1,c=t.intersect?Aw(n,i,r,s,o):Ew(n,i,r,!1,s,o),u=[];return c.length?(n.getSortedVisibleDatasetMetas().forEach(h=>{const f=c[0].index,g=h.data[f];g&&!g.skip&&u.push({element:g,datasetIndex:h.index,index:f})}),u):[]},dataset(n,e,t,s){const i=qh(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;let c=t.intersect?Aw(n,i,r,s,o):Ew(n,i,r,!1,s,o);if(c.length>0){const u=c[0].datasetIndex,h=n.getDatasetMeta(u).data;c=[];for(let f=0;f<h.length;++f)c.push({element:h[f],datasetIndex:u,index:f})}return c},point(n,e,t,s){const i=qh(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;return Aw(n,i,r,s,o)},nearest(n,e,t,s){const i=qh(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;return Ew(n,i,r,t.intersect,s,o)},x(n,e,t,s){const i=qh(e,n);return A_(n,i,"x",t.intersect,s)},y(n,e,t,s){const i=qh(e,n);return A_(n,i,"y",t.intersect,s)}}};const mM=["left","top","right","bottom"];function Dp(n,e){return n.filter(t=>t.pos===e)}function E_(n,e){return n.filter(t=>mM.indexOf(t.pos)===-1&&t.box.axis===e)}function Rp(n,e){return n.sort((t,s)=>{const i=e?s:t,r=e?t:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function jY(n){const e=[];let t,s,i,r,o,c;for(t=0,s=(n||[]).length;t<s;++t)i=n[t],{position:r,options:{stack:o,stackWeight:c=1}}=i,e.push({index:t,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:c});return e}function CY(n){const e={};for(const t of n){const{stack:s,pos:i,stackWeight:r}=t;if(!s||!mM.includes(i))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function AY(n,e){const t=CY(n),{vBoxMaxWidth:s,hBoxMaxHeight:i}=e;let r,o,c;for(r=0,o=n.length;r<o;++r){c=n[r];const{fullSize:u}=c.box,h=t[c.stack],f=h&&c.stackWeight/h.weight;c.horizontal?(c.width=f?f*s:u&&e.availableWidth,c.height=i):(c.width=s,c.height=f?f*i:u&&e.availableHeight)}return t}function EY(n){const e=jY(n),t=Rp(e.filter(h=>h.box.fullSize),!0),s=Rp(Dp(e,"left"),!0),i=Rp(Dp(e,"right")),r=Rp(Dp(e,"top"),!0),o=Rp(Dp(e,"bottom")),c=E_(e,"x"),u=E_(e,"y");return{fullSize:t,leftAndTop:s.concat(r),rightAndBottom:i.concat(u).concat(o).concat(c),chartArea:Dp(e,"chartArea"),vertical:s.concat(i).concat(u),horizontal:r.concat(o).concat(c)}}function __(n,e,t,s){return Math.max(n[t],e[t])+Math.max(n[s],e[s])}function gM(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function _Y(n,e,t,s){const{pos:i,box:r}=t,o=n.maxPadding;if(!Nn(i)){t.size&&(n[i]-=t.size);const g=s[t.stack]||{size:0,count:1};g.size=Math.max(g.size,t.horizontal?r.height:r.width),t.size=g.size/g.count,n[i]+=t.size}r.getPadding&&gM(o,r.getPadding());const c=Math.max(0,e.outerWidth-__(o,n,"left","right")),u=Math.max(0,e.outerHeight-__(o,n,"top","bottom")),h=c!==n.w,f=u!==n.h;return n.w=c,n.h=u,t.horizontal?{same:h,other:f}:{same:f,other:h}}function TY(n){const e=n.maxPadding;function t(s){const i=Math.max(e[s]-n[s],0);return n[s]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function kY(n,e){const t=e.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(e[o],t[o])}),r}return s(n?["left","right"]:["top","bottom"])}function Kp(n,e,t,s){const i=[];let r,o,c,u,h,f;for(r=0,o=n.length,h=0;r<o;++r){c=n[r],u=c.box,u.update(c.width||e.w,c.height||e.h,kY(c.horizontal,e));const{same:g,other:x}=_Y(e,t,c,s);h|=g&&i.length,f=f||x,u.fullSize||i.push(c)}return h&&Kp(i,e,t,s)||f}function Tb(n,e,t,s,i){n.top=t,n.left=e,n.right=e+s,n.bottom=t+i,n.width=s,n.height=i}function T_(n,e,t,s){const i=t.padding;let{x:r,y:o}=e;for(const c of n){const u=c.box,h=s[c.stack]||{placed:0,weight:1},f=c.stackWeight/h.weight||1;if(c.horizontal){const g=e.w*f,x=h.size||u.height;_y(h.start)&&(o=h.start),u.fullSize?Tb(u,i.left,o,t.outerWidth-i.right-i.left,x):Tb(u,e.left+h.placed,o,g,x),h.start=o,h.placed+=g,o=u.bottom}else{const g=e.h*f,x=h.size||u.width;_y(h.start)&&(r=h.start),u.fullSize?Tb(u,r,i.top,x,t.outerHeight-i.bottom-i.top):Tb(u,r,e.top+h.placed,x,g),h.start=r,h.placed+=g,r=u.right}}e.x=r,e.y=o}var Bo={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,s){if(!n)return;const i=Uo(n.options.layout.padding),r=Math.max(e-i.width,0),o=Math.max(t-i.height,0),c=EY(n.boxes),u=c.vertical,h=c.horizontal;$n(n.boxes,j=>{typeof j.beforeLayout=="function"&&j.beforeLayout()});const f=u.reduce((j,E)=>E.box.options&&E.box.options.display===!1?j:j+1,0)||1,g=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/f,hBoxMaxHeight:o/2}),x=Object.assign({},i);gM(x,Uo(s));const y=Object.assign({maxPadding:x,w:r,h:o,x:i.left,y:i.top},i),N=AY(u.concat(h),g);Kp(c.fullSize,y,g,N),Kp(u,y,g,N),Kp(h,y,g,N)&&Kp(u,y,g,N),TY(y),T_(c.leftAndTop,y,g,N),y.x+=y.w,y.y+=y.h,T_(c.rightAndBottom,y,g,N),n.chartArea={left:y.left,top:y.top,right:y.left+y.w,bottom:y.top+y.h,height:y.h,width:y.w},$n(c.chartArea,j=>{const E=j.box;Object.assign(E,n.chartArea),E.update(y.w,y.h,{left:0,top:0,right:0,bottom:0})})}};class pM{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,s){}removeEventListener(e,t,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,s,i){return t=Math.max(0,t||e.width),s=s||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):s)}}isAttached(e){return!0}updateConfig(e){}}class DY extends pM{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const cy="$chartjs",RY={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},k_=n=>n===null||n==="";function MY(n,e){const t=n.style,s=n.getAttribute("height"),i=n.getAttribute("width");if(n[cy]={initial:{height:s,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",k_(i)){const r=p_(n,"width");r!==void 0&&(n.width=r)}if(k_(s))if(n.style.height==="")n.height=n.width/(e||2);else{const r=p_(n,"height");r!==void 0&&(n.height=r)}return n}const xM=VG?{passive:!0}:!1;function PY(n,e,t){n&&n.addEventListener(e,t,xM)}function OY(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,xM)}function LY(n,e){const t=RY[n.type]||n.type,{x:s,y:i}=qh(n,e);return{type:t,chart:e,native:n,x:s!==void 0?s:null,y:i!==void 0?i:null}}function Ry(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function FY(n,e,t){const s=n.canvas,i=new MutationObserver(r=>{let o=!1;for(const c of r)o=o||Ry(c.addedNodes,s),o=o&&!Ry(c.removedNodes,s);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function zY(n,e,t){const s=n.canvas,i=new MutationObserver(r=>{let o=!1;for(const c of r)o=o||Ry(c.removedNodes,s),o=o&&!Ry(c.addedNodes,s);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const T0=new Map;let D_=0;function bM(){const n=window.devicePixelRatio;n!==D_&&(D_=n,T0.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function IY(n,e){T0.size||window.addEventListener("resize",bM),T0.set(n,e)}function BY(n){T0.delete(n),T0.size||window.removeEventListener("resize",bM)}function HY(n,e,t){const s=n.canvas,i=s&&SN(s);if(!i)return;const r=J5((c,u)=>{const h=i.clientWidth;t(c,u),h<i.clientWidth&&t()},window),o=new ResizeObserver(c=>{const u=c[0],h=u.contentRect.width,f=u.contentRect.height;h===0&&f===0||r(h,f)});return o.observe(i),IY(n,r),o}function _w(n,e,t){t&&t.disconnect(),e==="resize"&&BY(n)}function UY(n,e,t){const s=n.canvas,i=J5(r=>{n.ctx!==null&&t(LY(r,n))},n);return PY(s,e,i),i}class VY extends pM{acquireContext(e,t){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(MY(e,t),s):null}releaseContext(e){const t=e.canvas;if(!t[cy])return!1;const s=t[cy].initial;["height","width"].forEach(r=>{const o=s[r];xs(o)?t.removeAttribute(r):t.setAttribute(r,o)});const i=s.style||{};return Object.keys(i).forEach(r=>{t.style[r]=i[r]}),t.width=t.width,delete t[cy],!0}addEventListener(e,t,s){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),o={attach:FY,detach:zY,resize:HY}[t]||UY;i[t]=o(e,t,s)}removeEventListener(e,t){const s=e.$proxies||(e.$proxies={}),i=s[t];if(!i)return;({attach:_w,detach:_w,resize:_w}[t]||OY)(e,t,i),s[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,s,i){return UG(e,t,s,i)}isAttached(e){const t=e&&SN(e);return!!(t&&t.isConnected)}}function WY(n){return!wN()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?DY:VY}let Fd=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}hasValue(){return C0(this.x)&&C0(this.y)}getProps(e,t){const s=this.$animations;if(!t||!s)return this;const i={};return e.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}};function GY(n,e){const t=n.options.ticks,s=YY(n),i=Math.min(t.maxTicksLimit||s,s),r=t.major.enabled?KY(e):[],o=r.length,c=r[0],u=r[o-1],h=[];if(o>i)return ZY(e,h,r,o/i),h;const f=XY(r,e,i);if(o>0){let g,x;const y=o>1?Math.round((u-c)/(o-1)):null;for(kb(e,h,f,xs(y)?0:c-y,c),g=0,x=o-1;g<x;g++)kb(e,h,f,r[g],r[g+1]);return kb(e,h,f,u,xs(y)?e.length:u+y),h}return kb(e,h,f),h}function YY(n){const e=n.options.offset,t=n._tickSize(),s=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(s,i))}function XY(n,e,t){const s=QY(n),i=e.length/t;if(!s)return Math.max(i,1);const r=BW(s);for(let o=0,c=r.length-1;o<c;o++){const u=r[o];if(u>i)return u}return Math.max(i,1)}function KY(n){const e=[];let t,s;for(t=0,s=n.length;t<s;t++)n[t].major&&e.push(t);return e}function ZY(n,e,t,s){let i=0,r=t[0],o;for(s=Math.ceil(s),o=0;o<n.length;o++)o===r&&(e.push(n[o]),i++,r=t[i*s])}function kb(n,e,t,s,i){const r=xn(s,0),o=Math.min(xn(i,n.length),n.length);let c=0,u,h,f;for(t=Math.ceil(t),i&&(u=i-s,t=u/Math.floor(u/t)),f=r;f<0;)c++,f=Math.round(r+c*t);for(h=Math.max(r,0);h<o;h++)h===f&&(e.push(n[h]),c++,f=Math.round(r+c*t))}function QY(n){const e=n.length;let t,s;if(e<2)return!1;for(s=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==s)return!1;return s}const JY=n=>n==="left"?"right":n==="right"?"left":n,R_=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,M_=(n,e)=>Math.min(e||n,n);function P_(n,e){const t=[],s=n.length/e,i=n.length;let r=0;for(;r<i;r+=s)t.push(n[Math.floor(r)]);return t}function qY(n,e,t){const s=n.ticks.length,i=Math.min(e,s-1),r=n._startPixel,o=n._endPixel,c=1e-6;let u=n.getPixelForTick(i),h;if(!(t&&(s===1?h=Math.max(u-r,o-u):e===0?h=(n.getPixelForTick(1)-u)/2:h=(u-n.getPixelForTick(i-1))/2,u+=i<e?h:-h,u<r-c||u>o+c)))return u}function $Y(n,e){$n(n,t=>{const s=t.gc,i=s.length/2;let r;if(i>e){for(r=0;r<i;++r)delete t.data[s[r]];s.splice(0,i)}})}function Mp(n){return n.drawTicks?n.tickLength:0}function O_(n,e){if(!n.display)return 0;const t=za(n.font,e),s=Uo(n.padding);return(Vi(n.text)?n.text.length:1)*t.lineHeight+s.height}function eX(n,e){return Rf(n,{scale:e,type:"scale"})}function tX(n,e,t){return Rf(n,{tick:t,index:e,type:"tick"})}function nX(n,e,t){let s=mN(n);return(t&&e!=="right"||!t&&e==="right")&&(s=JY(s)),s}function sX(n,e,t,s){const{top:i,left:r,bottom:o,right:c,chart:u}=n,{chartArea:h,scales:f}=u;let g=0,x,y,N;const j=o-i,E=c-r;if(n.isHorizontal()){if(y=Ra(s,r,c),Nn(t)){const A=Object.keys(t)[0],R=t[A];N=f[A].getPixelForValue(R)+j-e}else t==="center"?N=(h.bottom+h.top)/2+j-e:N=R_(n,t,e);x=c-r}else{if(Nn(t)){const A=Object.keys(t)[0],R=t[A];y=f[A].getPixelForValue(R)-E+e}else t==="center"?y=(h.left+h.right)/2-E+e:y=R_(n,t,e);N=Ra(s,o,i),g=t==="left"?-Gi:Gi}return{titleX:y,titleY:N,maxWidth:x,rotation:g}}class fg extends Fd{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:s,_suggestedMax:i}=this;return e=Sc(e,Number.POSITIVE_INFINITY),t=Sc(t,Number.NEGATIVE_INFINITY),s=Sc(s,Number.POSITIVE_INFINITY),i=Sc(i,Number.NEGATIVE_INFINITY),{min:Sc(e,s),max:Sc(t,i),minDefined:Ba(e),maxDefined:Ba(t)}}getMinMax(e){let{min:t,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:t,max:s};const c=this.getMatchingVisibleMetas();for(let u=0,h=c.length;u<h;++u)o=c[u].controller.getMinMax(this,e),i||(t=Math.min(t,o.min)),r||(s=Math.max(s,o.max));return t=r&&t>s?s:t,s=i&&t>s?t:s,{min:Sc(t,Sc(s,t)),max:Sc(s,Sc(t,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){js(this.options.beforeUpdate,[this])}update(e,t,s){const{beginAtZero:i,grace:r,ticks:o}=this.options,c=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=vG(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=c<this.ticks.length;this._convertTicksToLabels(u?P_(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=GY(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,s;this.isHorizontal()?(t=this.left,s=this.right):(t=this.top,s=this.bottom,e=!e),this._startPixel=t,this._endPixel=s,this._reversePixels=e,this._length=s-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){js(this.options.afterUpdate,[this])}beforeSetDimensions(){js(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){js(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),js(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){js(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let s,i,r;for(s=0,i=e.length;s<i;s++)r=e[s],r.label=js(t.callback,[r.value,s,e],this)}afterTickToLabelConversion(){js(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){js(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,s=M_(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,r=t.maxRotation;let o=i,c,u,h;if(!this._isVisible()||!t.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const f=this._getLabelSizes(),g=f.widest.width,x=f.highest.height,y=Fa(this.chart.width-g,0,this.maxWidth);c=e.offset?this.maxWidth/s:y/(s-1),g+6>c&&(c=y/(s-(e.offset?.5:1)),u=this.maxHeight-Mp(e.grid)-t.padding-O_(e.title,this.chart.options.font),h=Math.sqrt(g*g+x*x),o=WW(Math.min(Math.asin(Fa((f.highest.height+6)/c,-1,1)),Math.asin(Fa(u/h,-1,1))-Math.asin(Fa(x/h,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){js(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){js(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:s,title:i,grid:r}}=this,o=this._isVisible(),c=this.isHorizontal();if(o){const u=O_(i,t.options.font);if(c?(e.width=this.maxWidth,e.height=Mp(r)+u):(e.height=this.maxHeight,e.width=Mp(r)+u),s.display&&this.ticks.length){const{first:h,last:f,widest:g,highest:x}=this._getLabelSizes(),y=s.padding*2,N=jd(this.labelRotation),j=Math.cos(N),E=Math.sin(N);if(c){const A=s.mirror?0:E*g.width+j*x.height;e.height=Math.min(this.maxHeight,e.height+A+y)}else{const A=s.mirror?0:j*g.width+E*x.height;e.width=Math.min(this.maxWidth,e.width+A+y)}this._calculatePadding(h,f,E,j)}}this._handleMargins(),c?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,s,i){const{ticks:{align:r,padding:o},position:c}=this.options,u=this.labelRotation!==0,h=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const f=this.getPixelForTick(0)-this.left,g=this.right-this.getPixelForTick(this.ticks.length-1);let x=0,y=0;u?h?(x=i*e.width,y=s*t.height):(x=s*e.height,y=i*t.width):r==="start"?y=t.width:r==="end"?x=e.width:r!=="inner"&&(x=e.width/2,y=t.width/2),this.paddingLeft=Math.max((x-f+o)*this.width/(this.width-f),0),this.paddingRight=Math.max((y-g+o)*this.width/(this.width-g),0)}else{let f=t.height/2,g=e.height/2;r==="start"?(f=0,g=e.height):r==="end"&&(f=t.height,g=0),this.paddingTop=f+o,this.paddingBottom=g+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){js(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,s;for(t=0,s=e.length;t<s;t++)xs(e[t].label)&&(e.splice(t,1),s--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let s=this.ticks;t<s.length&&(s=P_(s,t)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,s){const{ctx:i,_longestTextCache:r}=this,o=[],c=[],u=Math.floor(t/M_(t,s));let h=0,f=0,g,x,y,N,j,E,A,R,M,L,z;for(g=0;g<t;g+=u){if(N=e[g].label,j=this._resolveTickFontOptions(g),i.font=E=j.string,A=r[E]=r[E]||{data:{},gc:[]},R=j.lineHeight,M=L=0,!xs(N)&&!Vi(N))M=u_(i,A.data,A.gc,M,N),L=R;else if(Vi(N))for(x=0,y=N.length;x<y;++x)z=N[x],!xs(z)&&!Vi(z)&&(M=u_(i,A.data,A.gc,M,z),L+=R);o.push(M),c.push(L),h=Math.max(M,h),f=Math.max(L,f)}$Y(r,t);const W=o.indexOf(h),I=c.indexOf(f),Y=U=>({width:o[U]||0,height:c[U]||0});return{first:Y(0),last:Y(t-1),widest:Y(W),highest:Y(I),widths:o,heights:c}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return YW(this._alignToPixels?Gh(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const s=t[e];return s.$context||(s.$context=tX(this.getContext(),e,s))}return this.$context||(this.$context=eX(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=jd(this.labelRotation),s=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,c=r?r.widest.width+o:0,u=r?r.highest.height+o:0;return this.isHorizontal()?u*s>c*i?c/s:u/i:u*i<c*s?u/s:c/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,s=this.chart,i=this.options,{grid:r,position:o,border:c}=i,u=r.offset,h=this.isHorizontal(),g=this.ticks.length+(u?1:0),x=Mp(r),y=[],N=c.setContext(this.getContext()),j=N.display?N.width:0,E=j/2,A=function(G){return Gh(s,G,j)};let R,M,L,z,W,I,Y,U,Z,$,ae,xe;if(o==="top")R=A(this.bottom),I=this.bottom-x,U=R-E,$=A(e.top)+E,xe=e.bottom;else if(o==="bottom")R=A(this.top),$=e.top,xe=A(e.bottom)-E,I=R+E,U=this.top+x;else if(o==="left")R=A(this.right),W=this.right-x,Y=R-E,Z=A(e.left)+E,ae=e.right;else if(o==="right")R=A(this.left),Z=e.left,ae=A(e.right)-E,W=R+E,Y=this.left+x;else if(t==="x"){if(o==="center")R=A((e.top+e.bottom)/2+.5);else if(Nn(o)){const G=Object.keys(o)[0],X=o[G];R=A(this.chart.scales[G].getPixelForValue(X))}$=e.top,xe=e.bottom,I=R+E,U=I+x}else if(t==="y"){if(o==="center")R=A((e.left+e.right)/2);else if(Nn(o)){const G=Object.keys(o)[0],X=o[G];R=A(this.chart.scales[G].getPixelForValue(X))}W=R-E,Y=W-x,Z=e.left,ae=e.right}const fe=xn(i.ticks.maxTicksLimit,g),ke=Math.max(1,Math.ceil(g/fe));for(M=0;M<g;M+=ke){const G=this.getContext(M),X=r.setContext(G),se=c.setContext(G),ee=X.lineWidth,ne=X.color,V=se.dash||[],re=se.dashOffset,ge=X.tickWidth,Ne=X.tickColor,Ce=X.tickBorderDash||[],We=X.tickBorderDashOffset;L=qY(this,M,u),L!==void 0&&(z=Gh(s,L,ee),h?W=Y=Z=ae=z:I=U=$=xe=z,y.push({tx1:W,ty1:I,tx2:Y,ty2:U,x1:Z,y1:$,x2:ae,y2:xe,width:ee,color:ne,borderDash:V,borderDashOffset:re,tickWidth:ge,tickColor:Ne,tickBorderDash:Ce,tickBorderDashOffset:We}))}return this._ticksLength=g,this._borderValue=R,y}_computeLabelItems(e){const t=this.axis,s=this.options,{position:i,ticks:r}=s,o=this.isHorizontal(),c=this.ticks,{align:u,crossAlign:h,padding:f,mirror:g}=r,x=Mp(s.grid),y=x+f,N=g?-f:y,j=-jd(this.labelRotation),E=[];let A,R,M,L,z,W,I,Y,U,Z,$,ae,xe="middle";if(i==="top")W=this.bottom-N,I=this._getXAxisLabelAlignment();else if(i==="bottom")W=this.top+N,I=this._getXAxisLabelAlignment();else if(i==="left"){const ke=this._getYAxisLabelAlignment(x);I=ke.textAlign,z=ke.x}else if(i==="right"){const ke=this._getYAxisLabelAlignment(x);I=ke.textAlign,z=ke.x}else if(t==="x"){if(i==="center")W=(e.top+e.bottom)/2+y;else if(Nn(i)){const ke=Object.keys(i)[0],G=i[ke];W=this.chart.scales[ke].getPixelForValue(G)+y}I=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")z=(e.left+e.right)/2-y;else if(Nn(i)){const ke=Object.keys(i)[0],G=i[ke];z=this.chart.scales[ke].getPixelForValue(G)}I=this._getYAxisLabelAlignment(x).textAlign}t==="y"&&(u==="start"?xe="top":u==="end"&&(xe="bottom"));const fe=this._getLabelSizes();for(A=0,R=c.length;A<R;++A){M=c[A],L=M.label;const ke=r.setContext(this.getContext(A));Y=this.getPixelForTick(A)+r.labelOffset,U=this._resolveTickFontOptions(A),Z=U.lineHeight,$=Vi(L)?L.length:1;const G=$/2,X=ke.color,se=ke.textStrokeColor,ee=ke.textStrokeWidth;let ne=I;o?(z=Y,I==="inner"&&(A===R-1?ne=this.options.reverse?"left":"right":A===0?ne=this.options.reverse?"right":"left":ne="center"),i==="top"?h==="near"||j!==0?ae=-$*Z+Z/2:h==="center"?ae=-fe.highest.height/2-G*Z+Z:ae=-fe.highest.height+Z/2:h==="near"||j!==0?ae=Z/2:h==="center"?ae=fe.highest.height/2-G*Z:ae=fe.highest.height-$*Z,g&&(ae*=-1),j!==0&&!ke.showLabelBackdrop&&(z+=Z/2*Math.sin(j))):(W=Y,ae=(1-$)*Z/2);let V;if(ke.showLabelBackdrop){const re=Uo(ke.backdropPadding),ge=fe.heights[A],Ne=fe.widths[A];let Ce=ae-re.top,We=0-re.left;switch(xe){case"middle":Ce-=ge/2;break;case"bottom":Ce-=ge;break}switch(I){case"center":We-=Ne/2;break;case"right":We-=Ne;break;case"inner":A===R-1?We-=Ne:A>0&&(We-=Ne/2);break}V={left:We,top:Ce,width:Ne+re.width,height:ge+re.height,color:ke.backdropColor}}E.push({label:L,font:U,textOffset:ae,options:{rotation:j,color:X,strokeColor:se,strokeWidth:ee,textAlign:ne,textBaseline:xe,translation:[z,W],backdrop:V}})}return E}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-jd(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),c=e+r,u=o.widest.width;let h,f;return t==="left"?i?(f=this.right+r,s==="near"?h="left":s==="center"?(h="center",f+=u/2):(h="right",f+=u)):(f=this.right-c,s==="near"?h="right":s==="center"?(h="center",f-=u/2):(h="left",f=this.left)):t==="right"?i?(f=this.left+r,s==="near"?h="right":s==="center"?(h="center",f-=u/2):(h="left",f-=u)):(f=this.left+c,s==="near"?h="left":s==="center"?(h="center",f+=u/2):(h="right",f=this.right)):h="right",{textAlign:h,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:s,top:i,width:r,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(s,i,r,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(r=>r.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const c=(u,h,f)=>{!f.width||!f.color||(s.save(),s.lineWidth=f.width,s.strokeStyle=f.color,s.setLineDash(f.borderDash||[]),s.lineDashOffset=f.borderDashOffset,s.beginPath(),s.moveTo(u.x,u.y),s.lineTo(h.x,h.y),s.stroke(),s.restore())};if(t.display)for(r=0,o=i.length;r<o;++r){const u=i[r];t.drawOnChartArea&&c({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),t.drawTicks&&c({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const c=i.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let h,f,g,x;this.isHorizontal()?(h=Gh(e,this.left,o)-o/2,f=Gh(e,this.right,c)+c/2,g=x=u):(g=Gh(e,this.top,o)-o/2,x=Gh(e,this.bottom,c)+c/2,h=f=u),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(h,g),t.lineTo(f,x),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&xv(s,i);const r=this.getLabelItems(e);for(const o of r){const c=o.options,u=o.font,h=o.label,f=o.textOffset;_0(s,h,0,f,u,c)}i&&bv(s)}drawTitle(){const{ctx:e,options:{position:t,title:s,reverse:i}}=this;if(!s.display)return;const r=za(s.font),o=Uo(s.padding),c=s.align;let u=r.lineHeight/2;t==="bottom"||t==="center"||Nn(t)?(u+=o.bottom,Vi(s.text)&&(u+=r.lineHeight*(s.text.length-1))):u+=o.top;const{titleX:h,titleY:f,maxWidth:g,rotation:x}=sX(this,u,t,c);_0(e,s.text,0,0,r,{color:s.color,maxWidth:g,rotation:x,textAlign:nX(c,t,i),textBaseline:"middle",translation:[h,f]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,s=xn(e.grid&&e.grid.z,-1),i=xn(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==fg.prototype.draw?[{z:t,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,o;for(r=0,o=t.length;r<o;++r){const c=t[r];c[s]===this.id&&(!e||c.type===e)&&i.push(c)}return i}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return za(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Db{constructor(e,t,s){this.type=e,this.scope=t,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let s;rX(t)&&(s=this.register(t));const i=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,iX(e,o,s),this.override&&hi.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,s=e.id,i=this.scope;s in t&&delete t[s],i&&s in hi[i]&&(delete hi[i][s],this.override&&delete Nf[s])}}function iX(n,e,t){const s=N0(Object.create(null),[t?hi.get(t):{},hi.get(e),n.defaults]);hi.set(e,s),n.defaultRoutes&&aX(e,n.defaultRoutes),n.descriptors&&hi.describe(e,n.descriptors)}function aX(n,e){Object.keys(e).forEach(t=>{const s=t.split("."),i=s.pop(),r=[n].concat(s).join("."),o=e[t].split("."),c=o.pop(),u=o.join(".");hi.route(r,i,u,c)})}function rX(n){return"id"in n&&"defaults"in n}class oX{constructor(){this.controllers=new Db(NN,"datasets",!0),this.elements=new Db(Fd,"elements"),this.plugins=new Db(Object,"plugins"),this.scales=new Db(fg,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,s){[...t].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(e,r,i):$n(i,o=>{const c=s||this._getRegistryForType(o);this._exec(e,c,o)})})}_exec(e,t,s){const i=hN(e);js(s["before"+i],[],s),t[e](s),js(s["after"+i],[],s)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const s=this._typedRegistries[t];if(s.isForType(e))return s}return this.plugins}_get(e,t,s){const i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return i}}var Ac=new oX;class lX{constructor(){this._init=void 0}notify(e,t,s,i){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const r=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(r,e,t,s);return t==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,t,s,i){i=i||{};for(const r of e){const o=r.plugin,c=o[s],u=[t,i,r.options];if(js(c,u,o)===!1&&i.cancelable)return!1}return!0}invalidate(){xs(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const s=e&&e.config,i=xn(s.options&&s.options.plugins,{}),r=cX(s);return i===!1&&!t?[]:uX(e,r,i,t)}_notifyStateChanges(e){const t=this._oldCache||[],s=this._cache,i=(r,o)=>r.filter(c=>!o.some(u=>c.plugin.id===u.plugin.id));this._notify(i(t,s),e,"stop"),this._notify(i(s,t),e,"start")}}function cX(n){const e={},t=[],s=Object.keys(Ac.plugins.items);for(let r=0;r<s.length;r++)t.push(Ac.getPlugin(s[r]));const i=n.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function dX(n,e){return!e&&n===!1?null:n===!0?{}:n}function uX(n,{plugins:e,localIds:t},s,i){const r=[],o=n.getContext();for(const c of e){const u=c.id,h=dX(s[u],i);h!==null&&r.push({plugin:c,options:hX(n.config,{plugin:c,local:t[u]},h,o)})}return r}function hX(n,{plugin:e,local:t},s,i){const r=n.pluginScopeKeys(e),o=n.getOptionScopes(s,r);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function I2(n,e){const t=hi.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function fX(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function mX(n,e){return n===e?"_index_":"_value_"}function L_(n){if(n==="x"||n==="y"||n==="r")return n}function gX(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function B2(n,...e){if(L_(n))return n;for(const t of e){const s=t.axis||gX(t.position)||n.length>1&&L_(n[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function F_(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function pX(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(s=>s.xAxisID===n||s.yAxisID===n);if(t.length)return F_(n,"x",t[0])||F_(n,"y",t[0])}return{}}function xX(n,e){const t=Nf[n.type]||{scales:{}},s=e.scales||{},i=I2(n.type,e),r=Object.create(null);return Object.keys(s).forEach(o=>{const c=s[o];if(!Nn(c))return console.error(`Invalid scale configuration for scale: ${o}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const u=B2(o,c,pX(o,n),hi.scales[c.type]),h=mX(u,i),f=t.scales||{};r[o]=r0(Object.create(null),[{axis:u},c,f[u],f[h]])}),n.data.datasets.forEach(o=>{const c=o.type||n.type,u=o.indexAxis||I2(c,e),f=(Nf[c]||{}).scales||{};Object.keys(f).forEach(g=>{const x=fX(g,u),y=o[x+"AxisID"]||x;r[y]=r[y]||Object.create(null),r0(r[y],[{axis:x},s[y],f[g]])})}),Object.keys(r).forEach(o=>{const c=r[o];r0(c,[hi.scales[c.type],hi.scale])}),r}function yM(n){const e=n.options||(n.options={});e.plugins=xn(e.plugins,{}),e.scales=xX(n,e)}function vM(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function bX(n){return n=n||{},n.data=vM(n.data),yM(n),n}const z_=new Map,wM=new Set;function Rb(n,e){let t=z_.get(n);return t||(t=e(),z_.set(n,t),wM.add(t)),t}const Pp=(n,e,t)=>{const s=j0(e,t);s!==void 0&&n.add(s)};class yX{constructor(e){this._config=bX(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=vM(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),yM(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Rb(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Rb(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Rb(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,s=this.type;return Rb(`${s}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const s=this._scopeCache;let i=s.get(e);return(!i||t)&&(i=new Map,s.set(e,i)),i}getOptionScopes(e,t,s){const{options:i,type:r}=this,o=this._cachedScopes(e,s),c=o.get(t);if(c)return c;const u=new Set;t.forEach(f=>{e&&(u.add(e),f.forEach(g=>Pp(u,e,g))),f.forEach(g=>Pp(u,i,g)),f.forEach(g=>Pp(u,Nf[r]||{},g)),f.forEach(g=>Pp(u,hi,g)),f.forEach(g=>Pp(u,F2,g))});const h=Array.from(u);return h.length===0&&h.push(Object.create(null)),wM.has(t)&&o.set(t,h),h}chartOptionScopes(){const{options:e,type:t}=this;return[e,Nf[t]||{},hi.datasets[t]||{},{type:t},hi,F2]}resolveNamedOptions(e,t,s,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:c}=I_(this._resolverCache,e,i);let u=o;if(wX(o,t)){r.$shared=!1,s=ih(s)?s():s;const h=this.createResolver(e,s,c);u=Jm(o,s,h)}for(const h of t)r[h]=u[h];return r}createResolver(e,t,s=[""],i){const{resolver:r}=I_(this._resolverCache,e,s);return Nn(t)?Jm(r,t,void 0,i):r}}function I_(n,e,t){let s=n.get(e);s||(s=new Map,n.set(e,s));const i=t.join();let r=s.get(i);return r||(r={resolver:bN(e,t),subPrefixes:t.filter(c=>!c.toLowerCase().includes("hover"))},s.set(i,r)),r}const vX=n=>Nn(n)&&Object.getOwnPropertyNames(n).some(e=>ih(n[e]));function wX(n,e){const{isScriptable:t,isIndexable:s}=tM(n);for(const i of e){const r=t(i),o=s(i),c=(o||r)&&n[i];if(r&&(ih(c)||vX(c))||o&&Vi(c))return!0}return!1}var SX="4.5.1";const NX=["top","bottom","left","right","chartArea"];function B_(n,e){return n==="top"||n==="bottom"||NX.indexOf(n)===-1&&e==="x"}function H_(n,e){return function(t,s){return t[n]===s[n]?t[e]-s[e]:t[n]-s[n]}}function U_(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),js(t&&t.onComplete,[n],e)}function jX(n){const e=n.chart,t=e.options.animation;js(t&&t.onProgress,[n],e)}function SM(n){return wN()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const dy={},V_=n=>{const e=SM(n);return Object.values(dy).filter(t=>t.canvas===e).pop()};function CX(n,e,t){const s=Object.keys(n);for(const i of s){const r=+i;if(r>=e){const o=n[i];delete n[i],(t>0||r>e)&&(n[r+t]=o)}}}function AX(n,e,t,s){return!t||n.type==="mouseout"?null:s?e:n}let wv=class{static defaults=hi;static instances=dy;static overrides=Nf;static registry=Ac;static version=SX;static getChart=V_;static register(...e){Ac.add(...e),W_()}static unregister(...e){Ac.remove(...e),W_()}constructor(e,t){const s=this.config=new yX(t),i=SM(e),r=V_(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||WY(i)),this.platform.updateConfig(s);const c=this.platform.acquireContext(i,o.aspectRatio),u=c&&c.canvas,h=u&&u.height,f=u&&u.width;if(this.id=DW(),this.ctx=c,this.canvas=u,this.width=f,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new lX,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=JW(g=>this.update(g),o.resizeDelay||0),this._dataChanges=[],dy[this.id]=this,!c||!u){console.error("Failed to create chart: can't acquire context from the given item");return}yd.listen(this,"complete",U_),yd.listen(this,"progress",jX),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:s,height:i,_aspectRatio:r}=this;return xs(e)?t&&r?r:i?s/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ac}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():g_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return h_(this.canvas,this.ctx),this}stop(){return yd.stop(this),this}resize(e,t){yd.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,t,r),c=s.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,g_(this,c,!0)&&(this.notifyPlugins("resize",{size:o}),js(s.onResize,[this,o],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};$n(t,(s,i)=>{s.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,s=this.scales,i=Object.keys(s).reduce((o,c)=>(o[c]=!1,o),{});let r=[];t&&(r=r.concat(Object.keys(t).map(o=>{const c=t[o],u=B2(o,c),h=u==="r",f=u==="x";return{options:c,dposition:h?"chartArea":f?"bottom":"left",dtype:h?"radialLinear":f?"category":"linear"}}))),$n(r,o=>{const c=o.options,u=c.id,h=B2(u,c),f=xn(c.type,o.dtype);(c.position===void 0||B_(c.position,h)!==B_(o.dposition))&&(c.position=o.dposition),i[u]=!0;let g=null;if(u in s&&s[u].type===f)g=s[u];else{const x=Ac.getScale(f);g=new x({id:u,type:f,ctx:this.ctx,chart:this}),s[g.id]=g}g.init(c,e)}),$n(i,(o,c)=>{o||delete s[c]}),$n(s,o=>{Bo.configure(this,o,o.options),Bo.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,s=e.length;if(e.sort((i,r)=>i.index-r.index),s>t){for(let i=t;i<s;++i)this._destroyDatasetMeta(i);e.splice(t,s-t)}this._sortedMetasets=e.slice(0).sort(H_("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((s,i)=>{t.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=t.length;s<i;s++){const r=t[s];let o=this.getDatasetMeta(s);const c=r.type||this.config.type;if(o.type&&o.type!==c&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=c,o.indexAxis=r.indexAxis||I2(c,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const u=Ac.getController(c),{datasetElementType:h,dataElementType:f}=hi.datasets[c];Object.assign(u,{dataElementType:Ac.getElement(f),datasetElementType:h&&Ac.getElement(h)}),o.controller=new u(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){$n(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const s=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let h=0,f=this.data.datasets.length;h<f;h++){const{controller:g}=this.getDatasetMeta(h),x=!i&&r.indexOf(g)===-1;g.buildOrUpdateElements(x),o=Math.max(+g.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),i||$n(r,h=>{h.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(H_("z","_idx"));const{_active:c,_lastEvent:u}=this;u?this._eventHandler(u,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){$n(this.scales,e=>{Bo.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!n_(t,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of t){const o=s==="_removeElements"?-r:r;CX(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,s=r=>new Set(e.filter(o=>o[0]===r).map((o,c)=>c+","+o.splice(1).join(","))),i=s(0);for(let r=1;r<t;r++)if(!n_(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Bo.update(this,this.width,this.height,e);const t=this.chartArea,s=t.width<=0||t.height<=0;this._layers=[],$n(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,s=this.data.datasets.length;t<s;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,s=this.data.datasets.length;t<s;++t)this._updateDataset(t,ih(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const s=this.getDatasetMeta(e),i={meta:s,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(yd.has(this)?this.attached&&!yd.running(this)&&yd.start(this):(this.draw(),U_({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,s=[];let i,r;for(i=0,r=t.length;i<r;++i){const o=t[i];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,s={meta:e,index:e.index,cancelable:!0},i=uM(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&xv(t,i),e.controller.draw(),i&&bv(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return E0(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,s,i){const r=NY.modes[t];return typeof r=="function"?r(this,e,s,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],s=this._metasets;let i=s.filter(r=>r&&r._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=Rf(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!t.hidden}setDatasetVisibility(e,t){const s=this.getDatasetMeta(e);s.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,s){const i=s?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,i);_y(t)?(r.data[t].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(r,{visible:s}),this.update(c=>c.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),yd.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),h_(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete dy[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,s=(r,o)=>{t.addEventListener(this,r,o),e[r]=o},i=(r,o,c)=>{r.offsetX=o,r.offsetY=c,this._eventHandler(r)};$n(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,s=(u,h)=>{t.addEventListener(this,u,h),e[u]=h},i=(u,h)=>{e[u]&&(t.removeEventListener(this,u,h),delete e[u])},r=(u,h)=>{this.canvas&&this.resize(u,h)};let o;const c=()=>{i("attach",c),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",c)},t.isAttached(this.canvas)?c():o()}unbindEvents(){$n(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},$n(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,s){const i=s?"set":"remove";let r,o,c,u;for(t==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),c=0,u=e.length;c<u;++c){o=e[c];const h=o&&this.getDatasetMeta(o.datasetIndex).controller;h&&h[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],s=e.map(({datasetIndex:r,index:o})=>{const c=this.getDatasetMeta(r);if(!c)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:c.data[o],index:o}});!Ay(s,t)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,t))}notifyPlugins(e,t,s){return this._plugins.notify(this,e,t,s)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,s){const i=this.options.hover,r=(u,h)=>u.filter(f=>!h.some(g=>f.datasetIndex===g.datasetIndex&&f.index===g.index)),o=r(t,e),c=s?e:r(e,t);o.length&&this.updateHoverStyle(o,i.mode,!1),c.length&&i.mode&&this.updateHoverStyle(c,i.mode,!0)}_eventHandler(e,t){const s={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(e,t,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(e,t,s){const{_active:i=[],options:r}=this,o=t,c=this._getActiveElements(e,i,s,o),u=FW(e),h=AX(e,this._lastEvent,s,u);s&&(this._lastEvent=null,js(r.onHover,[e,c,this],this),u&&js(r.onClick,[e,c,this],this));const f=!Ay(c,i);return(f||t)&&(this._active=c,this._updateHoverStyles(c,i,t)),this._lastEvent=h,f}_getActiveElements(e,t,s,i){if(e.type==="mouseout")return[];if(!s)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}};function W_(){return $n(wv.instances,n=>n._plugins.invalidate())}function EX(n,e,t){const{startAngle:s,x:i,y:r,outerRadius:o,innerRadius:c,options:u}=e,{borderWidth:h,borderJoinStyle:f}=u,g=Math.min(h/o,uo(s-t));if(n.beginPath(),n.arc(i,r,o-h/2,s+g/2,t-g/2),c>0){const x=Math.min(h/c,uo(s-t));n.arc(i,r,c+h/2,t-x/2,s+x/2,!0)}else{const x=Math.min(h/2,o*uo(s-t));if(f==="round")n.arc(i,r,x,t-es/2,s+es/2,!0);else if(f==="bevel"){const y=2*x*x,N=-y*Math.cos(t+es/2)+i,j=-y*Math.sin(t+es/2)+r,E=y*Math.cos(s+es/2)+i,A=y*Math.sin(s+es/2)+r;n.lineTo(N,j),n.lineTo(E,A)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function _X(n,e,t){const{startAngle:s,pixelMargin:i,x:r,y:o,outerRadius:c,innerRadius:u}=e;let h=i/c;n.beginPath(),n.arc(r,o,c,s-h,t+h),u>i?(h=i/u,n.arc(r,o,u,t+h,s-h,!0)):n.arc(r,o,i,t+Gi,s-Gi),n.closePath(),n.clip()}function TX(n){return xN(n,["outerStart","outerEnd","innerStart","innerEnd"])}function kX(n,e,t,s){const i=TX(n.options.borderRadius),r=(t-e)/2,o=Math.min(r,s*e/2),c=u=>{const h=(t-Math.min(r,u))*s/2;return Fa(u,0,Math.min(r,h))};return{outerStart:c(i.outerStart),outerEnd:c(i.outerEnd),innerStart:Fa(i.innerStart,0,o),innerEnd:Fa(i.innerEnd,0,o)}}function xm(n,e,t,s){return{x:t+n*Math.cos(e),y:s+n*Math.sin(e)}}function My(n,e,t,s,i,r){const{x:o,y:c,startAngle:u,pixelMargin:h,innerRadius:f}=e,g=Math.max(e.outerRadius+s+t-h,0),x=f>0?f+s+t+h:0;let y=0;const N=i-u;if(s){const ke=f>0?f-s:0,G=g>0?g-s:0,X=(ke+G)/2,se=X!==0?N*X/(X+s):N;y=(N-se)/2}const j=Math.max(.001,N*g-t/es)/g,E=(N-j)/2,A=u+E+y,R=i-E-y,{outerStart:M,outerEnd:L,innerStart:z,innerEnd:W}=kX(e,x,g,R-A),I=g-M,Y=g-L,U=A+M/I,Z=R-L/Y,$=x+z,ae=x+W,xe=A+z/$,fe=R-W/ae;if(n.beginPath(),r){const ke=(U+Z)/2;if(n.arc(o,c,g,U,ke),n.arc(o,c,g,ke,Z),L>0){const ee=xm(Y,Z,o,c);n.arc(ee.x,ee.y,L,Z,R+Gi)}const G=xm(ae,R,o,c);if(n.lineTo(G.x,G.y),W>0){const ee=xm(ae,fe,o,c);n.arc(ee.x,ee.y,W,R+Gi,fe+Math.PI)}const X=(R-W/x+(A+z/x))/2;if(n.arc(o,c,x,R-W/x,X,!0),n.arc(o,c,x,X,A+z/x,!0),z>0){const ee=xm($,xe,o,c);n.arc(ee.x,ee.y,z,xe+Math.PI,A-Gi)}const se=xm(I,A,o,c);if(n.lineTo(se.x,se.y),M>0){const ee=xm(I,U,o,c);n.arc(ee.x,ee.y,M,A-Gi,U)}}else{n.moveTo(o,c);const ke=Math.cos(U)*g+o,G=Math.sin(U)*g+c;n.lineTo(ke,G);const X=Math.cos(Z)*g+o,se=Math.sin(Z)*g+c;n.lineTo(X,se)}n.closePath()}function DX(n,e,t,s,i){const{fullCircles:r,startAngle:o,circumference:c}=e;let u=e.endAngle;if(r){My(n,e,t,s,u,i);for(let h=0;h<r;++h)n.fill();isNaN(c)||(u=o+(c%Hs||Hs))}return My(n,e,t,s,u,i),n.fill(),u}function RX(n,e,t,s,i){const{fullCircles:r,startAngle:o,circumference:c,options:u}=e,{borderWidth:h,borderJoinStyle:f,borderDash:g,borderDashOffset:x,borderRadius:y}=u,N=u.borderAlign==="inner";if(!h)return;n.setLineDash(g||[]),n.lineDashOffset=x,N?(n.lineWidth=h*2,n.lineJoin=f||"round"):(n.lineWidth=h,n.lineJoin=f||"bevel");let j=e.endAngle;if(r){My(n,e,t,s,j,i);for(let E=0;E<r;++E)n.stroke();isNaN(c)||(j=o+(c%Hs||Hs))}N&&_X(n,e,j),u.selfJoin&&j-o>=es&&y===0&&f!=="miter"&&EX(n,e,j),r||(My(n,e,t,s,j,i),n.stroke())}class MX extends Fd{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,s){const i=this.getProps(["x","y"],s),{angle:r,distance:o}=K5(i,{x:e,y:t}),{startAngle:c,endAngle:u,innerRadius:h,outerRadius:f,circumference:g}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),x=(this.options.spacing+this.options.borderWidth)/2,y=xn(g,u-c),N=A0(r,c,u)&&c!==u,j=y>=Hs||N,E=Cd(o,h+x,f+x);return j&&E}getCenterPoint(e){const{x:t,y:s,startAngle:i,endAngle:r,innerRadius:o,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:u,spacing:h}=this.options,f=(i+r)/2,g=(o+c+h+u)/2;return{x:t+Math.cos(f)*g,y:s+Math.sin(f)*g}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:s}=this,i=(t.offset||0)/4,r=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=s>Hs?Math.floor(s/Hs):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const c=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(c)*i,Math.sin(c)*i);const u=1-Math.sin(Math.min(es,s||0)),h=i*u;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,DX(e,this,h,r,o),RX(e,this,h,r,o),e.restore()}}function NM(n,e,t=e){n.lineCap=xn(t.borderCapStyle,e.borderCapStyle),n.setLineDash(xn(t.borderDash,e.borderDash)),n.lineDashOffset=xn(t.borderDashOffset,e.borderDashOffset),n.lineJoin=xn(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=xn(t.borderWidth,e.borderWidth),n.strokeStyle=xn(t.borderColor,e.borderColor)}function PX(n,e,t){n.lineTo(t.x,t.y)}function OX(n){return n.stepped?uG:n.tension||n.cubicInterpolationMode==="monotone"?hG:PX}function jM(n,e,t={}){const s=n.length,{start:i=0,end:r=s-1}=t,{start:o,end:c}=e,u=Math.max(i,o),h=Math.min(r,c),f=i<o&&r<o||i>c&&r>c;return{count:s,start:u,loop:e.loop,ilen:h<u&&!f?s+h-u:h-u}}function LX(n,e,t,s){const{points:i,options:r}=e,{count:o,start:c,loop:u,ilen:h}=jM(i,t,s),f=OX(r);let{move:g=!0,reverse:x}=s||{},y,N,j;for(y=0;y<=h;++y)N=i[(c+(x?h-y:y))%o],!N.skip&&(g?(n.moveTo(N.x,N.y),g=!1):f(n,j,N,x,r.stepped),j=N);return u&&(N=i[(c+(x?h:0))%o],f(n,j,N,x,r.stepped)),!!u}function FX(n,e,t,s){const i=e.points,{count:r,start:o,ilen:c}=jM(i,t,s),{move:u=!0,reverse:h}=s||{};let f=0,g=0,x,y,N,j,E,A;const R=L=>(o+(h?c-L:L))%r,M=()=>{j!==E&&(n.lineTo(f,E),n.lineTo(f,j),n.lineTo(f,A))};for(u&&(y=i[R(0)],n.moveTo(y.x,y.y)),x=0;x<=c;++x){if(y=i[R(x)],y.skip)continue;const L=y.x,z=y.y,W=L|0;W===N?(z<j?j=z:z>E&&(E=z),f=(g*f+L)/++g):(M(),n.lineTo(L,z),N=W,g=0,j=E=z),A=z}M()}function H2(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?FX:LX}function zX(n){return n.stepped?WG:n.tension||n.cubicInterpolationMode==="monotone"?GG:$h}function IX(n,e,t,s){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,s)&&i.closePath()),NM(n,e.options),n.stroke(i)}function BX(n,e,t,s){const{segments:i,options:r}=e,o=H2(e);for(const c of i)NM(n,r,c.style),n.beginPath(),o(n,e,c,{start:t,end:t+s-1})&&n.closePath(),n.stroke()}const HX=typeof Path2D=="function";function UX(n,e,t,s){HX&&!e.options.segment?IX(n,e,t,s):BX(n,e,t,s)}class Sv extends Fd{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const i=s.spanGaps?this._loop:this._fullLoop;LG(this._points,s,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=JG(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,s=e.length;return s&&t[e[s-1].end]}interpolate(e,t){const s=this.options,i=e[t],r=this.points,o=dM(this,{property:t,start:i,end:i});if(!o.length)return;const c=[],u=zX(s);let h,f;for(h=0,f=o.length;h<f;++h){const{start:g,end:x}=o[h],y=r[g],N=r[x];if(y===N){c.push(y);continue}const j=Math.abs((i-y[t])/(N[t]-y[t])),E=u(y,N,j,s.stepped);E[t]=e[t],c.push(E)}return c.length===1?c[0]:c}pathSegment(e,t,s){return H2(this)(e,this,t,s)}path(e,t,s){const i=this.segments,r=H2(this);let o=this._loop;t=t||0,s=s||this.points.length-t;for(const c of i)o&=r(e,this,c,{start:t,end:t+s-1});return!!o}draw(e,t,s,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),UX(e,this,s,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function G_(n,e,t,s){const i=n.options,{[t]:r}=n.getProps([t],s);return Math.abs(e-r)<i.radius+i.hitRadius}class VX extends Fd{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,s){const i=this.options,{x:r,y:o}=this.getProps(["x","y"],s);return Math.pow(e-r,2)+Math.pow(t-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return G_(this,e,"x",t)}inYRange(e,t){return G_(this,e,"y",t)}getCenterPoint(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const s=t&&e.borderWidth||0;return(t+s)*2}draw(e,t){const s=this.options;this.skip||s.radius<.1||!E0(this,t,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,z2(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function CM(n,e){const{x:t,y:s,base:i,width:r,height:o}=n.getProps(["x","y","base","width","height"],e);let c,u,h,f,g;return n.horizontal?(g=o/2,c=Math.min(t,i),u=Math.max(t,i),h=s-g,f=s+g):(g=r/2,c=t-g,u=t+g,h=Math.min(s,i),f=Math.max(s,i)),{left:c,top:h,right:u,bottom:f}}function th(n,e,t,s){return n?0:Fa(e,t,s)}function WX(n,e,t){const s=n.options.borderWidth,i=n.borderSkipped,r=eM(s);return{t:th(i.top,r.top,0,t),r:th(i.right,r.right,0,e),b:th(i.bottom,r.bottom,0,t),l:th(i.left,r.left,0,e)}}function GX(n,e,t){const{enableBorderRadius:s}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,r=Om(i),o=Math.min(e,t),c=n.borderSkipped,u=s||Nn(i);return{topLeft:th(!u||c.top||c.left,r.topLeft,0,o),topRight:th(!u||c.top||c.right,r.topRight,0,o),bottomLeft:th(!u||c.bottom||c.left,r.bottomLeft,0,o),bottomRight:th(!u||c.bottom||c.right,r.bottomRight,0,o)}}function YX(n){const e=CM(n),t=e.right-e.left,s=e.bottom-e.top,i=WX(n,t/2,s/2),r=GX(n,t/2,s/2);return{outer:{x:e.left,y:e.top,w:t,h:s,radius:r},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:s-i.t-i.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,r.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(i.b,i.r))}}}}function Tw(n,e,t,s){const i=e===null,r=t===null,c=n&&!(i&&r)&&CM(n,s);return c&&(i||Cd(e,c.left,c.right))&&(r||Cd(t,c.top,c.bottom))}function XX(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function KX(n,e){n.rect(e.x,e.y,e.w,e.h)}function kw(n,e,t={}){const s=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0,r=(n.x+n.w!==t.x+t.w?e:0)-s,o=(n.y+n.h!==t.y+t.h?e:0)-i;return{x:n.x+s,y:n.y+i,w:n.w+r,h:n.h+o,radius:n.radius}}class ZX extends Fd{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:s,backgroundColor:i}}=this,{inner:r,outer:o}=YX(this),c=XX(o.radius)?ky:KX;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),c(e,kw(o,t,r)),e.clip(),c(e,kw(r,-t,o)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),c(e,kw(r,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,s){return Tw(this,e,t,s)}inXRange(e,t){return Tw(this,e,null,t)}inYRange(e,t){return Tw(this,null,e,t)}getCenterPoint(e){const{x:t,y:s,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+i)/2:t,y:r?s:(s+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}function QX(n,e,t){const s=n.segments,i=n.points,r=e.points,o=[];for(const c of s){let{start:u,end:h}=c;h=Nv(u,h,i);const f=U2(t,i[u],i[h],c.loop);if(!e.segments){o.push({source:c,target:f,start:i[u],end:i[h]});continue}const g=dM(e,f);for(const x of g){const y=U2(t,r[x.start],r[x.end],x.loop),N=cM(c,i,y);for(const j of N)o.push({source:j,target:x,start:{[t]:Y_(f,y,"start",Math.max)},end:{[t]:Y_(f,y,"end",Math.min)}})}}return o}function U2(n,e,t,s){if(s)return;let i=e[n],r=t[n];return n==="angle"&&(i=uo(i),r=uo(r)),{property:n,start:i,end:r}}function JX(n,e){const{x:t=null,y:s=null}=n||{},i=e.points,r=[];return e.segments.forEach(({start:o,end:c})=>{c=Nv(o,c,i);const u=i[o],h=i[c];s!==null?(r.push({x:u.x,y:s}),r.push({x:h.x,y:s})):t!==null&&(r.push({x:t,y:u.y}),r.push({x:t,y:h.y}))}),r}function Nv(n,e,t){for(;e>n;e--){const s=t[e];if(!isNaN(s.x)&&!isNaN(s.y))break}return e}function Y_(n,e,t,s){return n&&e?s(n[t],e[t]):n?n[t]:e?e[t]:0}function AM(n,e){let t=[],s=!1;return Vi(n)?(s=!0,t=n):t=JX(n,e),t.length?new Sv({points:t,options:{tension:0},_loop:s,_fullLoop:s}):null}function X_(n){return n&&n.fill!==!1}function qX(n,e,t){let i=n[e].fill;const r=[e];let o;if(!t)return i;for(;i!==!1&&r.indexOf(i)===-1;){if(!Ba(i))return i;if(o=n[i],!o)return!1;if(o.visible)return i;r.push(i),i=o.fill}return!1}function $X(n,e,t){const s=sK(n);if(Nn(s))return isNaN(s.value)?!1:s;let i=parseFloat(s);return Ba(i)&&Math.floor(i)===i?eK(s[0],e,i,t):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function eK(n,e,t,s){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=s?!1:t}function tK(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:Nn(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function nK(n,e,t){let s;return n==="start"?s=t:n==="end"?s=e.options.reverse?e.min:e.max:Nn(n)?s=n.value:s=e.getBaseValue(),s}function sK(n){const e=n.options,t=e.fill;let s=xn(t&&t.target,t);return s===void 0&&(s=!!e.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function iK(n){const{scale:e,index:t,line:s}=n,i=[],r=s.segments,o=s.points,c=aK(e,t);c.push(AM({x:null,y:e.bottom},s));for(let u=0;u<r.length;u++){const h=r[u];for(let f=h.start;f<=h.end;f++)rK(i,o[f],c)}return new Sv({points:i,options:{}})}function aK(n,e){const t=[],s=n.getMatchingVisibleMetas("line");for(let i=0;i<s.length;i++){const r=s[i];if(r.index===e)break;r.hidden||t.unshift(r.dataset)}return t}function rK(n,e,t){const s=[];for(let i=0;i<t.length;i++){const r=t[i],{first:o,last:c,point:u}=oK(r,e,"x");if(!(!u||o&&c)){if(o)s.unshift(u);else if(n.push(u),!c)break}}n.push(...s)}function oK(n,e,t){const s=n.interpolate(e,t);if(!s)return{};const i=s[t],r=n.segments,o=n.points;let c=!1,u=!1;for(let h=0;h<r.length;h++){const f=r[h],g=o[f.start][t],x=o[f.end][t];if(Cd(i,g,x)){c=i===g,u=i===x;break}}return{first:c,last:u,point:s}}class EM{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,s){const{x:i,y:r,radius:o}=this;return t=t||{start:0,end:Hs},e.arc(i,r,o,t.end,t.start,!0),!s.bounds}interpolate(e){const{x:t,y:s,radius:i}=this,r=e.angle;return{x:t+Math.cos(r)*i,y:s+Math.sin(r)*i,angle:r}}}function lK(n){const{chart:e,fill:t,line:s}=n;if(Ba(t))return cK(e,t);if(t==="stack")return iK(n);if(t==="shape")return!0;const i=dK(n);return i instanceof EM?i:AM(i,s)}function cK(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function dK(n){return(n.scale||{}).getPointPositionForValue?hK(n):uK(n)}function uK(n){const{scale:e={},fill:t}=n,s=tK(t,e);if(Ba(s)){const i=e.isHorizontal();return{x:i?s:null,y:i?null:s}}return null}function hK(n){const{scale:e,fill:t}=n,s=e.options,i=e.getLabels().length,r=s.reverse?e.max:e.min,o=nK(t,e,r),c=[];if(s.grid.circular){const u=e.getPointPositionForValue(0,r);return new EM({x:u.x,y:u.y,radius:e.getDistanceFromCenterForValue(o)})}for(let u=0;u<i;++u)c.push(e.getPointPositionForValue(u,o));return c}function Dw(n,e,t){const s=lK(e),{chart:i,index:r,line:o,scale:c,axis:u}=e,h=o.options,f=h.fill,g=h.backgroundColor,{above:x=g,below:y=g}=f||{},N=i.getDatasetMeta(r),j=uM(i,N);s&&o.points.length&&(xv(n,t),fK(n,{line:o,target:s,above:x,below:y,area:t,scale:c,axis:u,clip:j}),bv(n))}function fK(n,e){const{line:t,target:s,above:i,below:r,area:o,scale:c,clip:u}=e,h=t._loop?"angle":e.axis;n.save();let f=r;r!==i&&(h==="x"?(K_(n,s,o.top),Rw(n,{line:t,target:s,color:i,scale:c,property:h,clip:u}),n.restore(),n.save(),K_(n,s,o.bottom)):h==="y"&&(Z_(n,s,o.left),Rw(n,{line:t,target:s,color:r,scale:c,property:h,clip:u}),n.restore(),n.save(),Z_(n,s,o.right),f=i)),Rw(n,{line:t,target:s,color:f,scale:c,property:h,clip:u}),n.restore()}function K_(n,e,t){const{segments:s,points:i}=e;let r=!0,o=!1;n.beginPath();for(const c of s){const{start:u,end:h}=c,f=i[u],g=i[Nv(u,h,i)];r?(n.moveTo(f.x,f.y),r=!1):(n.lineTo(f.x,t),n.lineTo(f.x,f.y)),o=!!e.pathSegment(n,c,{move:o}),o?n.closePath():n.lineTo(g.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function Z_(n,e,t){const{segments:s,points:i}=e;let r=!0,o=!1;n.beginPath();for(const c of s){const{start:u,end:h}=c,f=i[u],g=i[Nv(u,h,i)];r?(n.moveTo(f.x,f.y),r=!1):(n.lineTo(t,f.y),n.lineTo(f.x,f.y)),o=!!e.pathSegment(n,c,{move:o}),o?n.closePath():n.lineTo(t,g.y)}n.lineTo(t,e.first().y),n.closePath(),n.clip()}function Rw(n,e){const{line:t,target:s,property:i,color:r,scale:o,clip:c}=e,u=QX(t,s,i);for(const{source:h,target:f,start:g,end:x}of u){const{style:{backgroundColor:y=r}={}}=h,N=s!==!0;n.save(),n.fillStyle=y,mK(n,o,c,N&&U2(i,g,x)),n.beginPath();const j=!!t.pathSegment(n,h);let E;if(N){j?n.closePath():Q_(n,s,x,i);const A=!!s.pathSegment(n,f,{move:j,reverse:!0});E=j&&A,E||Q_(n,s,g,i)}n.closePath(),n.fill(E?"evenodd":"nonzero"),n.restore()}}function mK(n,e,t,s){const i=e.chart.chartArea,{property:r,start:o,end:c}=s||{};if(r==="x"||r==="y"){let u,h,f,g;r==="x"?(u=o,h=i.top,f=c,g=i.bottom):(u=i.left,h=o,f=i.right,g=c),n.beginPath(),t&&(u=Math.max(u,t.left),f=Math.min(f,t.right),h=Math.max(h,t.top),g=Math.min(g,t.bottom)),n.rect(u,h,f-u,g-h),n.clip()}}function Q_(n,e,t,s){const i=e.interpolate(t,s);i&&n.lineTo(i.x,i.y)}var gK={id:"filler",afterDatasetsUpdate(n,e,t){const s=(n.data.datasets||[]).length,i=[];let r,o,c,u;for(o=0;o<s;++o)r=n.getDatasetMeta(o),c=r.dataset,u=null,c&&c.options&&c instanceof Sv&&(u={visible:n.isDatasetVisible(o),index:o,fill:$X(c,o,s),chart:n,axis:r.controller.options.indexAxis,scale:r.vScale,line:c}),r.$filler=u,i.push(u);for(o=0;o<s;++o)u=i[o],!(!u||u.fill===!1)&&(u.fill=qX(i,o,t.propagate))},beforeDraw(n,e,t){const s=t.drawTime==="beforeDraw",i=n.getSortedVisibleDatasetMetas(),r=n.chartArea;for(let o=i.length-1;o>=0;--o){const c=i[o].$filler;c&&(c.line.updateControlPoints(r,c.axis),s&&c.fill&&Dw(n.ctx,c,r))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const s=n.getSortedVisibleDatasetMetas();for(let i=s.length-1;i>=0;--i){const r=s[i].$filler;X_(r)&&Dw(n.ctx,r,n.chartArea)}},beforeDatasetDraw(n,e,t){const s=e.meta.$filler;!X_(s)||t.drawTime!=="beforeDatasetDraw"||Dw(n.ctx,s,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const J_=(n,e)=>{let{boxHeight:t=e,boxWidth:s=e}=n;return n.usePointStyle&&(t=Math.min(t,e),s=n.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:t,itemHeight:Math.max(e,t)}},pK=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class q_ extends Fd{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,s){this.maxWidth=e,this.maxHeight=t,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=js(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(s=>e.filter(s,this.chart.data))),e.sort&&(t=t.sort((s,i)=>e.sort(s,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,i=za(s.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:c,itemHeight:u}=J_(s,r);let h,f;t.font=i.string,this.isHorizontal()?(h=this.maxWidth,f=this._fitRows(o,r,c,u)+10):(f=this.maxHeight,h=this._fitCols(o,i,c,u)+10),this.width=Math.min(h,e.maxWidth||this.maxWidth),this.height=Math.min(f,e.maxHeight||this.maxHeight)}_fitRows(e,t,s,i){const{ctx:r,maxWidth:o,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],h=this.lineWidths=[0],f=i+c;let g=e;r.textAlign="left",r.textBaseline="middle";let x=-1,y=-f;return this.legendItems.forEach((N,j)=>{const E=s+t/2+r.measureText(N.text).width;(j===0||h[h.length-1]+E+2*c>o)&&(g+=f,h[h.length-(j>0?0:1)]=0,y+=f,x++),u[j]={left:0,top:y,row:x,width:E,height:i},h[h.length-1]+=E+c}),g}_fitCols(e,t,s,i){const{ctx:r,maxHeight:o,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],h=this.columnSizes=[],f=o-e;let g=c,x=0,y=0,N=0,j=0;return this.legendItems.forEach((E,A)=>{const{itemWidth:R,itemHeight:M}=xK(s,t,r,E,i);A>0&&y+M+2*c>f&&(g+=x+c,h.push({width:x,height:y}),N+=x+c,j++,x=y=0),u[A]={left:N,top:y,col:j,width:R,height:M},x=Math.max(x,R),y+=M+c}),g+=x,h.push({width:x,height:y}),g}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:s,labels:{padding:i},rtl:r}}=this,o=Lm(r,this.left,this.width);if(this.isHorizontal()){let c=0,u=Ra(s,this.left+i,this.right-this.lineWidths[c]);for(const h of t)c!==h.row&&(c=h.row,u=Ra(s,this.left+i,this.right-this.lineWidths[c])),h.top+=this.top+e+i,h.left=o.leftForLtr(o.x(u),h.width),u+=h.width+i}else{let c=0,u=Ra(s,this.top+e+i,this.bottom-this.columnSizes[c].height);for(const h of t)h.col!==c&&(c=h.col,u=Ra(s,this.top+e+i,this.bottom-this.columnSizes[c].height)),h.top=u,h.left+=this.left+i,h.left=o.leftForLtr(o.x(h.left),h.width),u+=h.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;xv(e,this),this._draw(),bv(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:s,ctx:i}=this,{align:r,labels:o}=e,c=hi.color,u=Lm(e.rtl,this.left,this.width),h=za(o.font),{padding:f}=o,g=h.size,x=g/2;let y;this.drawTitle(),i.textAlign=u.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=h.string;const{boxWidth:N,boxHeight:j,itemHeight:E}=J_(o,g),A=function(W,I,Y){if(isNaN(N)||N<=0||isNaN(j)||j<0)return;i.save();const U=xn(Y.lineWidth,1);if(i.fillStyle=xn(Y.fillStyle,c),i.lineCap=xn(Y.lineCap,"butt"),i.lineDashOffset=xn(Y.lineDashOffset,0),i.lineJoin=xn(Y.lineJoin,"miter"),i.lineWidth=U,i.strokeStyle=xn(Y.strokeStyle,c),i.setLineDash(xn(Y.lineDash,[])),o.usePointStyle){const Z={radius:j*Math.SQRT2/2,pointStyle:Y.pointStyle,rotation:Y.rotation,borderWidth:U},$=u.xPlus(W,N/2),ae=I+x;$5(i,Z,$,ae,o.pointStyleWidth&&N)}else{const Z=I+Math.max((g-j)/2,0),$=u.leftForLtr(W,N),ae=Om(Y.borderRadius);i.beginPath(),Object.values(ae).some(xe=>xe!==0)?ky(i,{x:$,y:Z,w:N,h:j,radius:ae}):i.rect($,Z,N,j),i.fill(),U!==0&&i.stroke()}i.restore()},R=function(W,I,Y){_0(i,Y.text,W,I+E/2,h,{strikethrough:Y.hidden,textAlign:u.textAlign(Y.textAlign)})},M=this.isHorizontal(),L=this._computeTitleHeight();M?y={x:Ra(r,this.left+f,this.right-s[0]),y:this.top+f+L,line:0}:y={x:this.left+f,y:Ra(r,this.top+L+f,this.bottom-t[0].height),line:0},rM(this.ctx,e.textDirection);const z=E+f;this.legendItems.forEach((W,I)=>{i.strokeStyle=W.fontColor,i.fillStyle=W.fontColor;const Y=i.measureText(W.text).width,U=u.textAlign(W.textAlign||(W.textAlign=o.textAlign)),Z=N+x+Y;let $=y.x,ae=y.y;u.setWidth(this.width),M?I>0&&$+Z+f>this.right&&(ae=y.y+=z,y.line++,$=y.x=Ra(r,this.left+f,this.right-s[y.line])):I>0&&ae+z>this.bottom&&($=y.x=$+t[y.line].width+f,y.line++,ae=y.y=Ra(r,this.top+L+f,this.bottom-t[y.line].height));const xe=u.x($);if(A(xe,ae,W),$=qW(U,$+N+x,M?$+Z:this.right,e.rtl),R(u.x($),ae,W),M)y.x+=Z+f;else if(typeof W.text!="string"){const fe=h.lineHeight;y.y+=_M(W,fe)+f}else y.y+=z}),oM(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,s=za(t.font),i=Uo(t.padding);if(!t.display)return;const r=Lm(e.rtl,this.left,this.width),o=this.ctx,c=t.position,u=s.size/2,h=i.top+u;let f,g=this.left,x=this.width;if(this.isHorizontal())x=Math.max(...this.lineWidths),f=this.top+h,g=Ra(e.align,g,this.right-x);else{const N=this.columnSizes.reduce((j,E)=>Math.max(j,E.height),0);f=h+Ra(e.align,this.top,this.bottom-N-e.labels.padding-this._computeTitleHeight())}const y=Ra(c,g,g+x);o.textAlign=r.textAlign(mN(c)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=s.string,_0(o,t.text,y,f,s)}_computeTitleHeight(){const e=this.options.title,t=za(e.font),s=Uo(e.padding);return e.display?t.lineHeight+s.height:0}_getLegendItemAt(e,t){let s,i,r;if(Cd(e,this.left,this.right)&&Cd(t,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],Cd(e,i.left,i.left+i.width)&&Cd(t,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(e){const t=this.options;if(!vK(e.type,t))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,r=pK(i,s);i&&!r&&js(t.onLeave,[e,i,this],this),this._hoveredItem=s,s&&!r&&js(t.onHover,[e,s,this],this)}else s&&js(t.onClick,[e,s,this],this)}}function xK(n,e,t,s,i){const r=bK(s,n,e,t),o=yK(i,s,e.lineHeight);return{itemWidth:r,itemHeight:o}}function bK(n,e,t,s){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),e+t.size/2+s.measureText(i).width}function yK(n,e,t){let s=n;return typeof e.text!="string"&&(s=_M(e,t)),s}function _M(n,e){const t=n.text?n.text.length:0;return e*t}function vK(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var wK={id:"legend",_element:q_,start(n,e,t){const s=n.legend=new q_({ctx:n.ctx,options:t,chart:n});Bo.configure(n,s,t),Bo.addBox(n,s)},stop(n){Bo.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const s=n.legend;Bo.configure(n,s,t),s.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const s=e.datasetIndex,i=t.chart;i.isDatasetVisible(s)?(i.hide(s),e.hidden=!0):(i.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:c}}=n.legend.options;return n._getSortedDatasetMetas().map(u=>{const h=u.controller.getStyle(t?0:void 0),f=Uo(h.borderWidth);return{text:e[u.index].label,fillStyle:h.backgroundColor,fontColor:r,hidden:!u.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(f.width+f.height)/4,strokeStyle:h.borderColor,pointStyle:s||h.pointStyle,rotation:h.rotation,textAlign:i||h.textAlign,borderRadius:o&&(c||h.borderRadius),datasetIndex:u.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class TM extends Fd{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const i=Vi(s.text)?s.text.length:1;this._padding=Uo(s.padding);const r=i*za(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:s,bottom:i,right:r,options:o}=this,c=o.align;let u=0,h,f,g;return this.isHorizontal()?(f=Ra(c,s,r),g=t+e,h=r-s):(o.position==="left"?(f=s+e,g=Ra(c,i,t),u=es*-.5):(f=r-e,g=Ra(c,t,i),u=es*.5),h=i-t),{titleX:f,titleY:g,maxWidth:h,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const s=za(t.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:c,maxWidth:u,rotation:h}=this._drawArgs(r);_0(e,t.text,0,0,s,{color:t.color,maxWidth:u,rotation:h,textAlign:mN(t.align),textBaseline:"middle",translation:[o,c]})}}function SK(n,e){const t=new TM({ctx:n.ctx,options:e,chart:n});Bo.configure(n,t,e),Bo.addBox(n,t),n.titleBlock=t}var NK={id:"title",_element:TM,start(n,e,t){SK(n,t)},stop(n){const e=n.titleBlock;Bo.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const s=n.titleBlock;Bo.configure(n,s,t),s.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Zp={average(n){if(!n.length)return!1;let e,t,s=new Set,i=0,r=0;for(e=0,t=n.length;e<t;++e){const c=n[e].element;if(c&&c.hasValue()){const u=c.tooltipPosition();s.add(u.x),i+=u.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((c,u)=>c+u)/s.size,y:i/r}},nearest(n,e){if(!n.length)return!1;let t=e.x,s=e.y,i=Number.POSITIVE_INFINITY,r,o,c;for(r=0,o=n.length;r<o;++r){const u=n[r].element;if(u&&u.hasValue()){const h=u.getCenterPoint(),f=L2(e,h);f<i&&(i=f,c=u)}}if(c){const u=c.tooltipPosition();t=u.x,s=u.y}return{x:t,y:s}}};function Cc(n,e){return e&&(Vi(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function vd(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function jK(n,e){const{element:t,datasetIndex:s,index:i}=e,r=n.getDatasetMeta(s).controller,{label:o,value:c}=r.getLabelAndValue(i);return{chart:n,label:o,parsed:r.getParsed(i),raw:n.data.datasets[s].data[i],formattedValue:c,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:t}}function $_(n,e){const t=n.chart.ctx,{body:s,footer:i,title:r}=n,{boxWidth:o,boxHeight:c}=e,u=za(e.bodyFont),h=za(e.titleFont),f=za(e.footerFont),g=r.length,x=i.length,y=s.length,N=Uo(e.padding);let j=N.height,E=0,A=s.reduce((L,z)=>L+z.before.length+z.lines.length+z.after.length,0);if(A+=n.beforeBody.length+n.afterBody.length,g&&(j+=g*h.lineHeight+(g-1)*e.titleSpacing+e.titleMarginBottom),A){const L=e.displayColors?Math.max(c,u.lineHeight):u.lineHeight;j+=y*L+(A-y)*u.lineHeight+(A-1)*e.bodySpacing}x&&(j+=e.footerMarginTop+x*f.lineHeight+(x-1)*e.footerSpacing);let R=0;const M=function(L){E=Math.max(E,t.measureText(L).width+R)};return t.save(),t.font=h.string,$n(n.title,M),t.font=u.string,$n(n.beforeBody.concat(n.afterBody),M),R=e.displayColors?o+2+e.boxPadding:0,$n(s,L=>{$n(L.before,M),$n(L.lines,M),$n(L.after,M)}),R=0,t.font=f.string,$n(n.footer,M),t.restore(),E+=N.width,{width:E,height:j}}function CK(n,e){const{y:t,height:s}=e;return t<s/2?"top":t>n.height-s/2?"bottom":"center"}function AK(n,e,t,s){const{x:i,width:r}=s,o=t.caretSize+t.caretPadding;if(n==="left"&&i+r+o>e.width||n==="right"&&i-r-o<0)return!0}function EK(n,e,t,s){const{x:i,width:r}=t,{width:o,chartArea:{left:c,right:u}}=n;let h="center";return s==="center"?h=i<=(c+u)/2?"left":"right":i<=r/2?h="left":i>=o-r/2&&(h="right"),AK(h,n,e,t)&&(h="center"),h}function eT(n,e,t){const s=t.yAlign||e.yAlign||CK(n,t);return{xAlign:t.xAlign||e.xAlign||EK(n,e,t,s),yAlign:s}}function _K(n,e){let{x:t,width:s}=n;return e==="right"?t-=s:e==="center"&&(t-=s/2),t}function TK(n,e,t){let{y:s,height:i}=n;return e==="top"?s+=t:e==="bottom"?s-=i+t:s-=i/2,s}function tT(n,e,t,s){const{caretSize:i,caretPadding:r,cornerRadius:o}=n,{xAlign:c,yAlign:u}=t,h=i+r,{topLeft:f,topRight:g,bottomLeft:x,bottomRight:y}=Om(o);let N=_K(e,c);const j=TK(e,u,h);return u==="center"?c==="left"?N+=h:c==="right"&&(N-=h):c==="left"?N-=Math.max(f,x)+i:c==="right"&&(N+=Math.max(g,y)+i),{x:Fa(N,0,s.width-e.width),y:Fa(j,0,s.height-e.height)}}function Mb(n,e,t){const s=Uo(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-s.right:n.x+s.left}function nT(n){return Cc([],vd(n))}function kK(n,e,t){return Rf(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function sT(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const kM={beforeTitle:bd,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,s=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return t[e.dataIndex]}return""},afterTitle:bd,beforeBody:bd,beforeLabel:bd,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return xs(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:bd,afterBody:bd,beforeFooter:bd,footer:bd,afterFooter:bd};function wr(n,e,t,s){const i=n[e].call(t,s);return typeof i>"u"?kM[e].call(t,s):i}class iT extends Fd{static positioners=Zp;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&t.options.animation&&s.animations,r=new hM(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=kK(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:s}=t,i=wr(s,"beforeTitle",this,e),r=wr(s,"title",this,e),o=wr(s,"afterTitle",this,e);let c=[];return c=Cc(c,vd(i)),c=Cc(c,vd(r)),c=Cc(c,vd(o)),c}getBeforeBody(e,t){return nT(wr(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:s}=t,i=[];return $n(e,r=>{const o={before:[],lines:[],after:[]},c=sT(s,r);Cc(o.before,vd(wr(c,"beforeLabel",this,r))),Cc(o.lines,wr(c,"label",this,r)),Cc(o.after,vd(wr(c,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(e,t){return nT(wr(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:s}=t,i=wr(s,"beforeFooter",this,e),r=wr(s,"footer",this,e),o=wr(s,"afterFooter",this,e);let c=[];return c=Cc(c,vd(i)),c=Cc(c,vd(r)),c=Cc(c,vd(o)),c}_createItems(e){const t=this._active,s=this.chart.data,i=[],r=[],o=[];let c=[],u,h;for(u=0,h=t.length;u<h;++u)c.push(jK(this.chart,t[u]));return e.filter&&(c=c.filter((f,g,x)=>e.filter(f,g,x,s))),e.itemSort&&(c=c.sort((f,g)=>e.itemSort(f,g,s))),$n(c,f=>{const g=sT(e.callbacks,f);i.push(wr(g,"labelColor",this,f)),r.push(wr(g,"labelPointStyle",this,f)),o.push(wr(g,"labelTextColor",this,f))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=c,c}update(e,t){const s=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const c=Zp[s.position].call(this,i,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const u=this._size=$_(this,s),h=Object.assign({},c,u),f=eT(this.chart,s,h),g=tT(s,h,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,r={opacity:1,x:g.x,y:g.y,width:u.width,height:u.height,caretX:c.x,caretY:c.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,s,i){const r=this.getCaretPosition(e,s,i);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,s){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:c}=s,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:g}=Om(c),{x,y}=e,{width:N,height:j}=t;let E,A,R,M,L,z;return r==="center"?(L=y+j/2,i==="left"?(E=x,A=E-o,M=L+o,z=L-o):(E=x+N,A=E+o,M=L-o,z=L+o),R=E):(i==="left"?A=x+Math.max(u,f)+o:i==="right"?A=x+N-Math.max(h,g)-o:A=this.caretX,r==="top"?(M=y,L=M-o,E=A-o,R=A+o):(M=y+j,L=M+o,E=A+o,R=A-o),z=M),{x1:E,x2:A,x3:R,y1:M,y2:L,y3:z}}drawTitle(e,t,s){const i=this.title,r=i.length;let o,c,u;if(r){const h=Lm(s.rtl,this.x,this.width);for(e.x=Mb(this,s.titleAlign,s),t.textAlign=h.textAlign(s.titleAlign),t.textBaseline="middle",o=za(s.titleFont),c=s.titleSpacing,t.fillStyle=s.titleColor,t.font=o.string,u=0;u<r;++u)t.fillText(i[u],h.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+c,u+1===r&&(e.y+=s.titleMarginBottom-c)}}_drawColorBox(e,t,s,i,r){const o=this.labelColors[s],c=this.labelPointStyles[s],{boxHeight:u,boxWidth:h}=r,f=za(r.bodyFont),g=Mb(this,"left",r),x=i.x(g),y=u<f.lineHeight?(f.lineHeight-u)/2:0,N=t.y+y;if(r.usePointStyle){const j={radius:Math.min(h,u)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},E=i.leftForLtr(x,h)+h/2,A=N+u/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,z2(e,j,E,A),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,z2(e,j,E,A)}else{e.lineWidth=Nn(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const j=i.leftForLtr(x,h),E=i.leftForLtr(i.xPlus(x,1),h-2),A=Om(o.borderRadius);Object.values(A).some(R=>R!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,ky(e,{x:j,y:N,w:h,h:u,radius:A}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),ky(e,{x:E,y:N+1,w:h-2,h:u-2,radius:A}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(j,N,h,u),e.strokeRect(j,N,h,u),e.fillStyle=o.backgroundColor,e.fillRect(E,N+1,h-2,u-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,t,s){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:c,boxHeight:u,boxWidth:h,boxPadding:f}=s,g=za(s.bodyFont);let x=g.lineHeight,y=0;const N=Lm(s.rtl,this.x,this.width),j=function(Y){t.fillText(Y,N.x(e.x+y),e.y+x/2),e.y+=x+r},E=N.textAlign(o);let A,R,M,L,z,W,I;for(t.textAlign=o,t.textBaseline="middle",t.font=g.string,e.x=Mb(this,E,s),t.fillStyle=s.bodyColor,$n(this.beforeBody,j),y=c&&E!=="right"?o==="center"?h/2+f:h+2+f:0,L=0,W=i.length;L<W;++L){for(A=i[L],R=this.labelTextColors[L],t.fillStyle=R,$n(A.before,j),M=A.lines,c&&M.length&&(this._drawColorBox(t,e,L,N,s),x=Math.max(g.lineHeight,u)),z=0,I=M.length;z<I;++z)j(M[z]),x=g.lineHeight;$n(A.after,j)}y=0,x=g.lineHeight,$n(this.afterBody,j),e.y-=r}drawFooter(e,t,s){const i=this.footer,r=i.length;let o,c;if(r){const u=Lm(s.rtl,this.x,this.width);for(e.x=Mb(this,s.footerAlign,s),e.y+=s.footerMarginTop,t.textAlign=u.textAlign(s.footerAlign),t.textBaseline="middle",o=za(s.footerFont),t.fillStyle=s.footerColor,t.font=o.string,c=0;c<r;++c)t.fillText(i[c],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,t,s,i){const{xAlign:r,yAlign:o}=this,{x:c,y:u}=e,{width:h,height:f}=s,{topLeft:g,topRight:x,bottomLeft:y,bottomRight:N}=Om(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(c+g,u),o==="top"&&this.drawCaret(e,t,s,i),t.lineTo(c+h-x,u),t.quadraticCurveTo(c+h,u,c+h,u+x),o==="center"&&r==="right"&&this.drawCaret(e,t,s,i),t.lineTo(c+h,u+f-N),t.quadraticCurveTo(c+h,u+f,c+h-N,u+f),o==="bottom"&&this.drawCaret(e,t,s,i),t.lineTo(c+y,u+f),t.quadraticCurveTo(c,u+f,c,u+f-y),o==="center"&&r==="left"&&this.drawCaret(e,t,s,i),t.lineTo(c,u+g),t.quadraticCurveTo(c,u,c+g,u),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const o=Zp[e.position].call(this,this._active,this._eventPosition);if(!o)return;const c=this._size=$_(this,e),u=Object.assign({},o,this._size),h=eT(t,e,u),f=tT(e,u,h,t);(i._to!==f.x||r._to!==f.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=c.width,this.height=c.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Uo(t.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&c&&(e.save(),e.globalAlpha=s,this.drawBackground(r,e,i,t),rM(e,t.textDirection),r.y+=o.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),oM(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const s=this._active,i=e.map(({datasetIndex:c,index:u})=>{const h=this.chart.getDatasetMeta(c);if(!h)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:h.data[u],index:u}}),r=!Ay(s,i),o=this._positionChanged(i,t);(r||o)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,s=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(e,r,t,s),c=this._positionChanged(o,e),u=t||!Ay(o,r)||c;return u&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),u}_getActiveElements(e,t,s,i){const r=this.options;if(e.type==="mouseout")return[];if(!i)return t.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:s,caretY:i,options:r}=this,o=Zp[r.position].call(this,e,t);return o!==!1&&(s!==o.x||i!==o.y)}}var DK={id:"tooltip",_element:iT,positioners:Zp,afterInit(n,e,t){t&&(n.tooltip=new iT({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:kM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const RK=(n,e,t,s)=>(typeof e=="string"?(t=n.push(e)-1,s.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function MK(n,e,t,s){const i=n.indexOf(e);if(i===-1)return RK(n,e,t,s);const r=n.lastIndexOf(e);return i!==r?t:i}const PK=(n,e)=>n===null?null:Fa(Math.round(n),0,e);function aT(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class OK extends fg{static id="category";static defaults={ticks:{callback:aT}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const s=this.getLabels();for(const{index:i,label:r}of t)s[i]===r&&s.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(xs(e))return null;const s=this.getLabels();return t=isFinite(t)&&s[t]===e?t:MK(s,e,xn(t,e),this._addedLabels),PK(t,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),t||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const e=this.min,t=this.max,s=this.options.offset,i=[];let r=this.getLabels();r=e===0&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=t;o++)i.push({value:o});return i}getLabelForValue(e){return aT.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function LK(n,e){const t=[],{bounds:i,step:r,min:o,max:c,precision:u,count:h,maxTicks:f,maxDigits:g,includeBounds:x}=n,y=r||1,N=f-1,{min:j,max:E}=e,A=!xs(o),R=!xs(c),M=!xs(h),L=(E-j)/(g+1);let z=i_((E-j)/N/y)*y,W,I,Y,U;if(z<1e-14&&!A&&!R)return[{value:j},{value:E}];U=Math.ceil(E/z)-Math.floor(j/z),U>N&&(z=i_(U*z/N/y)*y),xs(u)||(W=Math.pow(10,u),z=Math.ceil(z*W)/W),i==="ticks"?(I=Math.floor(j/z)*z,Y=Math.ceil(E/z)*z):(I=j,Y=E),A&&R&&r&&UW((c-o)/r,z/1e3)?(U=Math.round(Math.min((c-o)/z,f)),z=(c-o)/U,I=o,Y=c):M?(I=A?o:I,Y=R?c:Y,U=h-1,z=(Y-I)/U):(U=(Y-I)/z,o0(U,Math.round(U),z/1e3)?U=Math.round(U):U=Math.ceil(U));const Z=Math.max(a_(z),a_(I));W=Math.pow(10,xs(u)?Z:u),I=Math.round(I*W)/W,Y=Math.round(Y*W)/W;let $=0;for(A&&(x&&I!==o?(t.push({value:o}),I<o&&$++,o0(Math.round((I+$*z)*W)/W,o,rT(o,L,n))&&$++):I<o&&$++);$<U;++$){const ae=Math.round((I+$*z)*W)/W;if(R&&ae>c)break;t.push({value:ae})}return R&&x&&Y!==c?t.length&&o0(t[t.length-1].value,c,rT(c,L,n))?t[t.length-1].value=c:t.push({value:c}):(!R||Y===c)&&t.push({value:Y}),t}function rT(n,e,{horizontal:t,minRotation:s}){const i=jd(s),r=(t?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+n).length;return Math.min(e/r,o)}class FK extends fg{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return xs(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:s}=this.getUserBounds();let{min:i,max:r}=this;const o=u=>i=t?i:u,c=u=>r=s?r:u;if(e){const u=Qm(i),h=Qm(r);u<0&&h<0?c(0):u>0&&h>0&&o(0)}if(i===r){let u=r===0?1:Math.abs(r*.05);c(r+u),e||o(i-u)}this.min=i,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:s}=e,i;return s?(i=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const i={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},r=this._range||this,o=LK(i,r);return e.bounds==="ticks"&&VW(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const i=(s-t)/Math.max(e.length-1,1)/2;t-=i,s+=i}this._startValue=t,this._endValue=s,this._valueRange=s-t}getLabelForValue(e){return pN(e,this.chart.options.locale,this.options.ticks.format)}}class zK extends FK{static id="linear";static defaults={ticks:{callback:q5.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Ba(e)?e:0,this.max=Ba(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,s=jd(this.options.ticks.minRotation),i=(e?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const jv={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},jr=Object.keys(jv);function oT(n,e){return n-e}function lT(n,e){if(xs(e))return null;const t=n._adapter,{parser:s,round:i,isoWeekday:r}=n._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),Ba(o)||(o=typeof s=="string"?t.parse(o,s):t.parse(o)),o===null?null:(i&&(o=i==="week"&&(C0(r)||r===!0)?t.startOf(o,"isoWeek",r):t.startOf(o,i)),+o)}function cT(n,e,t,s){const i=jr.length;for(let r=jr.indexOf(n);r<i-1;++r){const o=jv[jr[r]],c=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(c*o.size))<=s)return jr[r]}return jr[i-1]}function IK(n,e,t,s,i){for(let r=jr.length-1;r>=jr.indexOf(t);r--){const o=jr[r];if(jv[o].common&&n._adapter.diff(i,s,o)>=e-1)return o}return jr[t?jr.indexOf(t):0]}function BK(n){for(let e=jr.indexOf(n)+1,t=jr.length;e<t;++e)if(jv[jr[e]].common)return jr[e]}function dT(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:s,hi:i}=fN(t,e),r=t[s]>=e?t[s]:t[i];n[r]=!0}}function HK(n,e,t,s){const i=n._adapter,r=+i.startOf(e[0].value,s),o=e[e.length-1].value;let c,u;for(c=r;c<=o;c=+i.add(c,1,s))u=t[c],u>=0&&(e[u].major=!0);return e}function uT(n,e,t){const s=[],i={},r=e.length;let o,c;for(o=0;o<r;++o)c=e[o],i[c]=o,s.push({value:c,major:!1});return r===0||!t?s:HK(n,s,i,t)}class hT extends fg{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const s=e.time||(e.time={}),i=this._adapter=new bY._date(e.adapters.date);i.init(t),r0(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:lT(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,s=e.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:c}=this.getUserBounds();function u(h){!o&&!isNaN(h.min)&&(i=Math.min(i,h.min)),!c&&!isNaN(h.max)&&(r=Math.max(r,h.max))}(!o||!c)&&(u(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&u(this.getMinMax(!1))),i=Ba(i)&&!isNaN(i)?i:+t.startOf(Date.now(),s),r=Ba(r)&&!isNaN(r)?r:+t.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],s=e[e.length-1]),{min:t,max:s}}buildTicks(){const e=this.options,t=e.time,s=e.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,c=KW(i,r,o);return this._unit=t.unit||(s.autoSkip?cT(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):IK(this,c.length,t.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:BK(this._unit),this.initOffsets(i),e.reverse&&c.reverse(),uT(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,s=0,i,r;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?t=1-i:t=(this.getDecimalForValue(e[1])-i)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?s=r:s=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=Fa(t,0,o),s=Fa(s,0,o),this._offsets={start:t,end:s,factor:1/(t+1+s)}}_generate(){const e=this._adapter,t=this.min,s=this.max,i=this.options,r=i.time,o=r.unit||cT(r.minUnit,t,s,this._getLabelCapacity(t)),c=xn(i.ticks.stepSize,1),u=o==="week"?r.isoWeekday:!1,h=C0(u)||u===!0,f={};let g=t,x,y;if(h&&(g=+e.startOf(g,"isoWeek",u)),g=+e.startOf(g,h?"day":o),e.diff(s,t,o)>1e5*c)throw new Error(t+" and "+s+" are too far apart with stepSize of "+c+" "+o);const N=i.ticks.source==="data"&&this.getDataTimestamps();for(x=g,y=0;x<s;x=+e.add(x,c,o),y++)dT(f,x,N);return(x===s||i.bounds==="ticks"||y===1)&&dT(f,x,N),Object.keys(f).sort(oT).map(j=>+j)}getLabelForValue(e){const t=this._adapter,s=this.options.time;return s.tooltipFormat?t.format(e,s.tooltipFormat):t.format(e,s.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,r=this._unit,o=t||i[r];return this._adapter.format(e,o)}_tickFormatFunction(e,t,s,i){const r=this.options,o=r.ticks.callback;if(o)return js(o,[e,t,s],this);const c=r.time.displayFormats,u=this._unit,h=this._majorUnit,f=u&&c[u],g=h&&c[h],x=s[t],y=h&&g&&x&&x.major;return this._adapter.format(e,i||(y?g:f))}generateTickLabels(e){let t,s,i;for(t=0,s=e.length;t<s;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+s)*t.factor)}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,s=this.ctx.measureText(e).width,i=jd(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(i),o=Math.sin(i),c=this._resolveTickFontOptions(0).size;return{w:s*r+c*o,h:s*o+c*r}}_getLabelCapacity(e){const t=this.options.time,s=t.displayFormats,i=s[t.unit]||s.millisecond,r=this._tickFormatFunction(e,0,uT(this,[e],this._majorUnit),i),o=this._getLabelSize(r),c=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return c>0?c:1}getDataTimestamps(){let e=this._cache.data||[],t,s;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,s=i.length;t<s;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,s;if(e.length)return e;const i=this.getLabels();for(t=0,s=i.length;t<s;++t)e.push(lT(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return QW(e.sort(oT))}}function Pb(n,e,t){let s=0,i=n.length-1,r,o,c,u;t?(e>=n[s].pos&&e<=n[i].pos&&({lo:s,hi:i}=cf(n,"pos",e)),{pos:r,time:c}=n[s],{pos:o,time:u}=n[i]):(e>=n[s].time&&e<=n[i].time&&({lo:s,hi:i}=cf(n,"time",e)),{time:r,pos:c}=n[s],{time:o,pos:u}=n[i]);const h=o-r;return h?c+(u-c)*(e-r)/h:c}class Vne extends hT{static id="timeseries";static defaults=hT.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Pb(t,this.min),this._tableRange=Pb(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:s}=this,i=[],r=[];let o,c,u,h,f;for(o=0,c=e.length;o<c;++o)h=e[o],h>=t&&h<=s&&i.push(h);if(i.length<2)return[{time:t,pos:0},{time:s,pos:1}];for(o=0,c=i.length;o<c;++o)f=i[o+1],u=i[o-1],h=i[o],Math.round((f+u)/2)!==h&&r.push({time:h,pos:o/(c-1)});return r}_generate(){const e=this.min,t=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(t)||s.length===1)&&s.push(t),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),s=this.getLabelTimestamps();return t.length&&s.length?e=this.normalize(t.concat(s)):e=t.length?t:s,e=this._cache.all=e,e}getDecimalForValue(e){return(Pb(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return Pb(this._table,s*this._tableRange+this._minPos,!0)}}const DM="label";function fT(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function UK(n,e){const t=n.options;t&&e&&Object.assign(t,e)}function RM(n,e){n.labels=e}function MM(n,e,t=DM){const s=[];n.datasets=e.map(i=>{const r=n.datasets.find(o=>o[t]===i[t]);return!r||!i.data||s.includes(r)?{...i}:(s.push(r),Object.assign(r,i),r)})}function VK(n,e=DM){const t={labels:[],datasets:[]};return RM(t,n.labels),MM(t,n.datasets,e),t}function WK(n,e){const{height:t=150,width:s=300,redraw:i=!1,datasetIdKey:r,type:o,data:c,options:u,plugins:h=[],fallbackContent:f,updateMode:g,...x}=n,y=_.useRef(null),N=_.useRef(null),j=()=>{y.current&&(N.current=new wv(y.current,{type:o,data:VK(c,r),options:u&&{...u},plugins:h}),fT(e,N.current))},E=()=>{fT(e,null),N.current&&(N.current.destroy(),N.current=null)};return _.useEffect(()=>{!i&&N.current&&u&&UK(N.current,u)},[i,u]),_.useEffect(()=>{!i&&N.current&&RM(N.current.config.data,c.labels)},[i,c.labels]),_.useEffect(()=>{!i&&N.current&&c.datasets&&MM(N.current.config.data,c.datasets,r)},[i,c.datasets]),_.useEffect(()=>{N.current&&(i?(E(),setTimeout(j)):N.current.update(g))},[i,u,c.labels,c.datasets,g]),_.useEffect(()=>{N.current&&(E(),setTimeout(j))},[o]),_.useEffect(()=>(j(),()=>E()),[]),a.jsx("canvas",{ref:y,role:"img",height:t,width:s,...x,children:f})}const GK=_.forwardRef(WK);function PM(n,e){return wv.register(e),_.forwardRef((t,s)=>a.jsx(GK,{...t,ref:s,type:n}))}const YK=PM("line",xY),XK=PM("doughnut",pY);wv.register(OK,zK,VX,Sv,ZX,NK,DK,wK,gK,MX);const KK=()=>{const[n,e]=_.useState(null),[t,s]=_.useState(!0),[i,r]=_.useState("6m");_.useEffect(()=>{o()},[i]);const o=async()=>{try{s(!0);const x=await oW({range:i});e(x.data)}catch(x){console.error("Failed to fetch analytics",x)}finally{s(!1)}};if(t)return a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 animate-pulse",children:[a.jsx("div",{className:"lg:col-span-2 bg-white rounded-2xl h-[300px] shadow-sm border border-slate-200"}),a.jsx("div",{className:"bg-white rounded-2xl h-[300px] shadow-sm border border-slate-200"})]});if(!n)return null;const c={labels:n.labels||[],datasets:[{label:"Documents Created",data:n.data||[],borderColor:"#6366f1",backgroundColor:"rgba(99, 102, 241, 0.1)",fill:!0,tension:.4,pointBackgroundColor:"#fff",pointBorderColor:"#6366f1",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6}]},u={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(15, 23, 42, 0.9)",padding:12,titleFont:{size:13,family:"'Inter', sans-serif",weight:"600"},bodyFont:{size:12,family:"'Inter', sans-serif"},cornerRadius:8,displayColors:!1,callbacks:{label:x=>`Documents: ${x.parsed.y}`}}},scales:{y:{beginAtZero:!0,grid:{color:"#f1f5f9",borderDash:[5,5],drawBorder:!1},ticks:{font:{size:11,family:"'Inter', sans-serif"},color:"#64748b",padding:10},border:{display:!1}},x:{grid:{display:!1},ticks:{font:{size:11,family:"'Inter', sans-serif"},color:"#64748b",padding:10},border:{display:!1}}},interaction:{mode:"index",intersect:!1}},h={labels:["Draft","Sent","Completed"],datasets:[{data:n?.breakdown?[n.breakdown.draft,n.breakdown.sent,n.breakdown.completed]:[0,0,0],backgroundColor:["#f59e0b","#3b82f6","#10b981"],borderWidth:0,hoverOffset:10}]},f={responsive:!0,maintainAspectRatio:!1,cutout:"70%",plugins:{legend:{position:"bottom",labels:{usePointStyle:!0,boxWidth:8,padding:20,font:{size:12,family:"'Inter', sans-serif",weight:"500"},color:"#475569"}},tooltip:{backgroundColor:"rgba(15, 23, 42, 0.9)",padding:12,cornerRadius:8,callbacks:{label:x=>` ${x.label}: ${x.parsed}`}}}},g=n?.breakdown?Object.values(n.breakdown).reduce((x,y)=>x+y,0):0;return a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 bg-white p-6 rounded-2xl shadow-sm border border-slate-200 hover:shadow-md transition-shadow duration-300",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-800 tracking-tight",children:"Document Trends"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Activity overview"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:i,onChange:x=>r(x.target.value),className:"appearance-none bg-slate-50 border border-slate-200 text-slate-700 text-xs font-medium py-2 pl-3 pr-8 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 cursor-pointer hover:bg-slate-100 transition-colors",children:[a.jsx("option",{value:"7d",children:"Last 7 Days"}),a.jsx("option",{value:"30d",children:"Last 30 Days"}),a.jsx("option",{value:"90d",children:"Last 90 Days"}),a.jsx("option",{value:"6m",children:"Last 6 Months"}),a.jsx("option",{value:"1y",children:"Last Year"})]}),a.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none text-slate-400",children:a.jsx(Ld,{size:14})})]}),a.jsx("div",{className:"p-2.5 bg-indigo-50 text-indigo-600 rounded-xl",children:a.jsx(M7,{size:20,strokeWidth:2.5})})]})]}),a.jsx("div",{className:"h-[300px] w-full",children:a.jsx(YK,{data:c,options:u})})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 hover:shadow-md transition-shadow duration-300 flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-800 tracking-tight",children:"Status Overview"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Distribution by status"})]}),a.jsx("div",{className:"p-2.5 bg-emerald-50 text-emerald-600 rounded-xl",children:a.jsx(wn,{size:20,strokeWidth:2.5})})]}),a.jsxs("div",{className:"flex-1 min-h-[250px] relative flex items-center justify-center py-4",children:[a.jsx(XK,{data:h,options:f}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none pb-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("span",{className:"block text-3xl font-extrabold text-slate-800 tracking-tight",children:g}),a.jsx("span",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-widest mt-0.5",children:"Total"})]})})]}),a.jsxs("div",{className:"mt-auto pt-4 border-t border-slate-50 flex justify-between items-center text-xs text-slate-500 font-medium",children:[a.jsx("span",{children:"Real-time data"}),a.jsxs(tn,{to:"/documents",className:"text-indigo-600 hover:text-indigo-700 hover:underline flex items-center gap-1",children:["View Report ",a.jsx(w5,{size:12})]})]})]})]})},ZK=()=>{const[n,e]=_.useState(null),[t,s]=_.useState([]),[i,r]=_.useState(!0);_.useEffect(()=>{(async()=>{try{const[y,N]=await Promise.all([rW(),lW()]);e(y.data),s(N.data)}catch(y){console.error("Failed to fetch dashboard data",y)}finally{r(!1)}})()},[]);const o={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:24}}},u=n?.total_documents||0,h=n?.breakdown?.completed||0,f=u>0?Math.round(h/u*100):0,g=[{label:"Draft Documents",value:n?.breakdown?.draft||0,change:"+2.5%",isPositive:!0,icon:la,color:"text-amber-600",bg:"bg-amber-50",border:"border-amber-100"},{label:"Team Members",value:n?.team_size||0,change:"+0%",isPositive:!0,icon:Pc,color:"text-indigo-600",bg:"bg-indigo-50",border:"border-indigo-100"},{label:"Total Documents",value:u,change:"+12%",isPositive:!0,icon:wn,color:"text-blue-600",bg:"bg-blue-50",border:"border-blue-100"},{label:"Completion Rate",value:`${f}%`,change:"+1.2%",isPositive:!0,icon:KE,color:"text-emerald-600",bg:"bg-emerald-50",border:"border-emerald-100"}];return i?a.jsx("div",{className:"flex h-[50vh] items-center justify-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600"}),a.jsx("p",{className:"text-slate-400 text-sm animate-pulse font-medium",children:"Loading dashboard..."})]})}):a.jsxs(Ie.div,{variants:o,initial:"hidden",animate:"visible",className:"space-y-8 max-w-7xl mx-auto pb-10",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6 pb-2 border-b border-slate-200/60",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold text-slate-900 tracking-tight",children:"Overview"}),a.jsx("p",{className:"text-slate-500 mt-2 text-sm font-medium",children:"Here's what's happening with your workspace today."})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs(tn,{to:"/documents",className:"px-5 py-2.5 bg-white text-slate-700 font-semibold rounded-xl border border-slate-200 hover:bg-slate-50 hover:border-slate-300 transition-all text-sm shadow-sm flex items-center gap-2",children:[a.jsx(wn,{size:18}),"View Documents"]}),a.jsxs("button",{className:"px-5 py-2.5 bg-indigo-600 text-white font-semibold rounded-xl hover:bg-indigo-700 transition-all text-sm shadow-lg shadow-indigo-600/20 hover:shadow-indigo-600/30 hover:-translate-y-0.5 flex items-center gap-2",children:[a.jsx(Km,{size:18,fill:"currentColor"}),"Quick Action"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:g.map((x,y)=>a.jsxs(Ie.div,{variants:c,whileHover:{y:-5,transition:{duration:.2}},className:`bg-white p-6 rounded-2xl border ${x.border} shadow-premium hover:shadow-premium-hover transition-all duration-300 relative overflow-hidden group`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[a.jsx("div",{className:`p-3.5 rounded-xl ${x.bg} ${x.color} transition-transform group-hover:scale-110 duration-300 shadow-sm`,children:a.jsx(x.icon,{size:24,strokeWidth:2})}),a.jsxs("div",{className:`flex items-center gap-1 text-xs font-bold px-2.5 py-1 rounded-lg ${x.isPositive?"text-emerald-700 bg-emerald-50 border border-emerald-100":"text-slate-700 bg-slate-50 border border-slate-100"}`,children:[x.isPositive?a.jsx(w5,{size:14}):a.jsx(s9,{size:14}),x.change]})]}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("h3",{className:"text-3xl font-bold text-slate-900 tracking-tight leading-tight",children:x.value}),a.jsx("p",{className:"text-sm font-medium text-slate-500 mt-1 uppercase tracking-wide text-[11px]",children:x.label})]})]},y))}),a.jsx(Ie.div,{variants:c,children:a.jsx(KK,{})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs(Ie.div,{variants:c,className:"lg:col-span-2 bg-white rounded-2xl border border-slate-200 shadow-sm flex flex-col overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-white sticky top-0 z-10",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Recent Activity"}),a.jsx("p",{className:"text-sm text-slate-500 mt-0.5 font-medium",children:"Latest updates from your team"})]}),a.jsxs("button",{className:"text-indigo-600 text-sm font-semibold hover:text-indigo-700 hover:bg-indigo-50 px-3 py-1.5 rounded-lg transition-colors flex items-center gap-1",children:["View All ",a.jsx(fo,{size:16})]})]}),a.jsx("div",{className:"p-2",children:a.jsx("div",{className:"overflow-y-auto max-h-[500px] scrollbar-thin scrollbar-thumb-slate-200 pr-2",children:t.length===0?a.jsxs("div",{className:"p-12 text-center flex flex-col items-center text-slate-400",children:[a.jsx(KE,{size:48,className:"mb-4 opacity-50 text-slate-300"}),a.jsx("p",{className:"text-sm font-medium",children:"No recent activity found."})]}):a.jsx("div",{className:"space-y-1",children:t.map(x=>a.jsxs("div",{className:"p-4 flex items-start gap-4 hover:bg-slate-50 rounded-xl transition-all cursor-pointer group border border-transparent hover:border-slate-100",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 border border-slate-200 flex items-center justify-center text-xs font-bold text-indigo-600 uppercase shrink-0 shadow-sm group-hover:shadow-md transition-all",children:x.initials}),a.jsxs("div",{className:"flex-1 min-w-0 pt-0.5",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("p",{className:"text-sm font-bold text-slate-800 truncate group-hover:text-indigo-600 transition-colors",children:x.user}),a.jsx("span",{className:"flex items-center text-[10px] font-bold text-slate-400 gap-1 whitespace-nowrap bg-slate-50 px-2 py-0.5 rounded border border-slate-100 uppercase tracking-wide",children:x.time})]}),a.jsxs("p",{className:"text-sm text-slate-600 mt-1 leading-relaxed",children:[x.action," ",a.jsx("span",{className:"text-slate-300 mx-1",children:""})," ",a.jsx("span",{className:"font-medium text-slate-900 bg-slate-100 px-1.5 py-0.5 rounded text-xs",children:x.project})]})]})]},x.id))})})})]}),a.jsx(Ie.div,{variants:c,className:"flex flex-col gap-6",children:a.jsxs("div",{className:"bg-slate-900 rounded-2xl shadow-2xl p-8 text-white border border-slate-800 relative overflow-hidden group",children:[a.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-slate-800/50 rounded-full blur-[80px] -translate-y-1/2 translate-x-1/2"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-slate-800/30 rounded-full blur-[60px] translate-y-1/2 -translate-x-1/2"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-xl flex items-center justify-center mb-6 backdrop-blur-md border border-white/10 group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-black/20",children:a.jsx(T5,{className:"text-indigo-400",size:24})}),a.jsx("h3",{className:"text-xl font-bold mb-2 text-white tracking-tight",children:"Upgrade to Enterprise"}),a.jsx("p",{className:"text-slate-400 text-sm mb-8 leading-relaxed font-medium",children:"Get access to advanced analytics, unlimited team members, and dedicated support."}),a.jsx("button",{className:"w-full py-3.5 bg-indigo-600 text-white font-bold text-sm rounded-xl hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-900/20 hover:-translate-y-0.5",children:"Upgrade Plan"}),a.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-800",children:[a.jsxs("div",{className:"flex justify-between items-center text-xs mb-2",children:[a.jsx("span",{className:"text-slate-400 font-medium",children:"Storage Usage"}),a.jsx("span",{className:"font-bold text-indigo-300",children:"7.8 GB / 10 GB"})]}),a.jsx("div",{className:"w-full bg-slate-800 rounded-full h-2 overflow-hidden border border-slate-700",children:a.jsx("div",{className:"bg-indigo-500 rounded-full h-full w-[78%]"})})]})]})]})})]})]})},mg=()=>{const{user:n}=Dr(),[e,t]=_.useState({roles:{},permissions:[]}),[s,i]=_.useState(!0);return _.useEffect(()=>{(async()=>{try{const c=await wt.get("/permissions");t(c.data)}catch(c){console.error("Failed to fetch permissions",c)}finally{i(!1)}})()},[]),{can:o=>{if(!n)return!1;if(n.permissions&&n.permissions.includes("*")||n.permissions&&Array.isArray(n.permissions)&&n.permissions.includes(o))return!0;const c=n.role||"viewer",u=e.permissions?.find(h=>h.key===o);return u&&u.roles?u.roles.includes(c):!1},matrix:e,loading:s}};function zd(n){const[e,t]=_.useState(!1);return _.useEffect(()=>{const s=window.matchMedia(n);s.matches!==e&&t(s.matches);const i=()=>{t(s.matches)};return window.addEventListener("resize",i),s.addEventListener("change",i),()=>{window.removeEventListener("resize",i),s.removeEventListener("change",i)}},[e,n]),e}const QK=({business:n,mobileMenuOpen:e,setMobileMenuOpen:t})=>{const s=zd("(max-width: 1024px)"),[i,r]=_.useState(!1),o=ts(),{can:c}=mg(),{logout:u}=Dr(),h=()=>r(!i),f=async()=>{await u(),o("/")},g=n?.name||"DocForge",x=[{icon:wU,label:"Dashboard",path:"/dashboard"},{icon:A5,label:"Drive",path:"/drive",permission:"document.view"},{icon:wn,label:"Documents",path:"/documents",permission:"document.view"},{icon:d7,label:"Signatures",path:"/signatures/list",permission:"settings.signature"},{icon:Pc,label:"Team",path:"/team",permission:"team.view"},{icon:vf,label:"Settings",path:"/settings",permission:"settings.manage"}].filter(N=>!N.permission||c(N.permission)),y={expanded:{width:280},collapsed:{width:80},mobileOpen:{x:0},mobileClosed:{x:-300}};return a.jsxs(Ie.aside,{initial:s?"mobileClosed":"expanded",animate:s?e?"mobileOpen":"mobileClosed":i?"collapsed":"expanded",variants:y,transition:{type:"spring",stiffness:300,damping:30},className:`
                no-print bg-slate-900 text-slate-400 flex flex-col justify-between
                z-50 border-r border-slate-800 shadow-2xl
                lg:sticky lg:top-0 fixed top-0 left-0 h-screen overflow-hidden
            `,children:[a.jsxs("div",{className:`p-6 flex items-center h-20 border-b border-slate-800/50 ${i?"justify-center":"justify-between"}`,children:[a.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[a.jsx("div",{className:"w-10 h-10 shrink-0 bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 rounded-xl flex items-center justify-center text-white shadow-lg shadow-indigo-500/20 ring-1 ring-white/10",children:a.jsx(Od,{size:20,strokeWidth:2.5})}),a.jsx(dn,{children:(!i||s&&e)&&a.jsxs(Ie.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,width:0},className:"whitespace-nowrap",children:[a.jsx("span",{className:"font-bold text-lg text-white block leading-none",children:g}),a.jsxs("span",{className:"text-[10px] uppercase font-bold text-indigo-400 tracking-wider flex items-center gap-1 mt-0.5",children:[a.jsx(v7,{size:10})," Workspace"]})]})})]}),!s&&!i&&a.jsx("button",{onClick:h,className:"p-1.5 rounded-lg text-slate-500 hover:text-white hover:bg-white/10 transition-colors",children:a.jsx(hv,{size:18})})]}),a.jsxs("nav",{className:"flex-1 px-3 py-6 space-y-1 overflow-y-auto scrollbar-none",children:[!s&&i&&a.jsx("button",{onClick:h,className:"w-full flex justify-center p-2 mb-4 text-slate-500 hover:text-white hover:bg-white/5 rounded-xl transition-colors",children:a.jsx(fo,{size:20})}),x.map(N=>a.jsx(Qk,{to:N.path,onClick:()=>s&&t(!1),className:({isActive:j})=>`flex items-center px-3 py-3 rounded-xl transition-all group relative overflow-hidden
                             ${j?"bg-indigo-600 text-white shadow-lg shadow-indigo-900/20":"hover:bg-slate-800 hover:text-slate-100"}`,children:({isActive:j})=>a.jsxs(a.Fragment,{children:[j&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 to-transparent pointer-events-none"}),a.jsxs("div",{className:`relative z-10 flex items-center ${i&&!s?"justify-center w-full":""}`,children:[a.jsx(N.icon,{size:22,strokeWidth:j?2.5:2,className:j?"text-white":"text-slate-400 group-hover:text-slate-200"}),a.jsx(dn,{children:(!i||s&&e)&&a.jsx(Ie.span,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,width:0},className:"ml-3 text-sm font-medium whitespace-nowrap",children:N.label})})]}),i&&!s&&a.jsx("div",{className:"hidden group-hover:block absolute left-full ml-4 px-3 py-2 bg-slate-800 text-xs font-semibold text-white rounded-lg shadow-xl border border-slate-700 whitespace-nowrap z-50 animate-in fade-in slide-in-from-left-2",children:N.label})]})},N.path))]}),a.jsxs("div",{className:"p-4 border-t border-slate-800/50 bg-slate-900/50",children:[a.jsx(dn,{children:(!i||s&&e)&&a.jsxs(Ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,height:0,marginBottom:0},className:"mb-4 p-4 rounded-xl bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700/50 shadow-inner group cursor-pointer hover:border-indigo-500/30 transition-colors",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"text-xs font-bold text-white flex items-center gap-1",children:[a.jsx(Tr,{size:12,className:"text-emerald-400"})," Pro Plan"]}),a.jsx("span",{className:"text-[10px] bg-emerald-500/10 text-emerald-400 px-1.5 py-0.5 rounded border border-emerald-500/20",children:"Active"})]}),a.jsx("div",{className:"w-full bg-slate-700/50 rounded-full h-1.5 overflow-hidden mb-2",children:a.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 h-full w-[75%] rounded-full shadow-[0_0_10px_rgba(99,102,241,0.5)]"})}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"75% of storage used"})]})}),a.jsxs("button",{onClick:f,className:`flex items-center w-full rounded-xl text-slate-400 hover:text-red-400 hover:bg-slate-800 transition-all border border-transparent hover:border-slate-700/50
                        ${i&&!s?"justify-center p-3":"px-4 py-3"}`,title:"Log Out",children:[a.jsx(E5,{size:20,strokeWidth:2}),a.jsx(dn,{children:(!i||s&&e)&&a.jsx(Ie.span,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},className:"ml-3 text-sm font-medium whitespace-nowrap overflow-hidden",children:"Log Out"})})]})]})]})},JK=()=>wt.get("/notifications"),qK=()=>wt.post("/notifications/mark-all-read"),$K=n=>wt.post(`/notifications/${n}/read`),eZ=({business:n,onMenuClick:e})=>{const{user:t,logout:s}=Dr(),i=ts(),[r,o]=_.useState(!1),c=_.useRef(null),[u,h]=_.useState(!1),[f,g]=_.useState(!1),x=_.useRef(null),y=_.useRef(null),[N,j]=_.useState([]),[E,A]=_.useState(0),R=async()=>{try{const W=await JK(),Y=W.data.data.map(U=>({id:U.id,type:U.data.type||"info",title:U.data.title||"Notification",message:U.data.message||"",time:U.created_at?new Date(U.created_at).toLocaleDateString():"Just now",read:!!U.read_at,raw_created_at:U.created_at}));j(Y),A(W.data.unread_count)}catch(W){console.error("Failed to fetch notifications",W)}};_.useEffect(()=>{if(t){R();const W=setInterval(R,3e4);return()=>clearInterval(W)}},[t]);const M=async()=>{try{await qK(),R()}catch(W){console.error("Failed to mark all read",W)}},L=async W=>{try{await $K(W),R()}catch(I){console.error("Failed to mark read",I)}};_.useEffect(()=>{const W=I=>{x.current&&!x.current.contains(I.target)&&h(!1),y.current&&!y.current.contains(I.target)&&g(!1),c.current&&!c.current.contains(I.target)&&o(!1)};return document.addEventListener("mousedown",W),()=>document.removeEventListener("mousedown",W)},[]);const z=async()=>{await s(),i("/login")};return a.jsxs("header",{className:"no-print px-6 py-4 flex items-center justify-between sticky top-0 z-40 glass border-b border-indigo-50/50 shadow-sm transition-all duration-300",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:e,className:"p-2 -ml-2 text-slate-500 hover:bg-slate-100 rounded-xl lg:hidden transition-colors",children:a.jsx(aN,{size:20})}),a.jsx("div",{className:`${r?"hidden md:block":"block"}`,children:a.jsxs("h1",{className:"text-lg font-bold text-slate-800 tracking-tight flex items-center gap-2",children:["Dashboard",a.jsx("span",{className:"hidden sm:inline-block px-2 py-0.5 rounded-md bg-slate-100 border border-slate-200 text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Beta"})]})})]}),a.jsxs("div",{className:"flex items-center gap-3 sm:gap-5",children:[a.jsxs("div",{className:"relative group",ref:c,children:[a.jsx("button",{onClick:()=>o(!r),className:"md:hidden p-2 text-slate-500 hover:bg-slate-50 rounded-xl",children:a.jsx(Xm,{size:20})}),a.jsxs("div",{className:`${r?"absolute right-0 top-1/2 -translate-y-1/2 w-[calc(100vw-80px)] md:w-auto bg-white z-50 shadow-xl rounded-xl":"hidden md:block relative"}`,children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-slate-400 group-focus-within:text-indigo-600 transition-colors",children:a.jsx(Xm,{size:16,strokeWidth:2.5})}),a.jsx("input",{type:"text",autoFocus:r,placeholder:"Type to search...",className:"pl-10 pr-12 py-2.5 bg-slate-100/50 border border-transparent rounded-xl text-sm w-full md:w-72 focus:ring-2 focus:ring-indigo-500/20 focus:bg-white focus:border-indigo-500 transition-all duration-200 placeholder-slate-400 text-slate-700 hover:bg-slate-100 outline-none"}),a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none text-slate-400",children:a.jsxs("kbd",{className:"hidden sm:inline-flex items-center gap-1 px-1.5 py-0.5 rounded border border-slate-200 bg-white text-[10px] font-sans font-medium text-slate-500 shadow-sm",children:[a.jsx(M9,{size:10})," K"]})})]})]}),a.jsxs("div",{className:"relative",ref:x,children:[a.jsxs(Ie.button,{autoFocus:!1,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(!u),className:`relative p-2.5 rounded-xl transition-all ${u?"bg-indigo-50 text-indigo-600 shadow-inner":"text-slate-500 hover:bg-slate-50 hover:text-indigo-600"}`,children:[a.jsx(Pl,{size:20,strokeWidth:2}),E>0&&a.jsxs("span",{className:"absolute top-2.5 right-2.5 flex h-2.5 w-2.5",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-red-500 ring-2 ring-white"})]})]}),a.jsx(dn,{children:u&&a.jsxs(Ie.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{type:"spring",duration:.3},className:"absolute right-0 mt-4 w-[90vw] sm:w-[400px] bg-white rounded-2xl shadow-premium border border-slate-100 overflow-hidden z-50 origin-top-right -mr-12 sm:mr-0",children:[a.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between bg-slate-50/50 backdrop-blur-sm",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-slate-800",children:"Notifications"}),a.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:["You have ",E," unread messages"]})]}),E>0&&a.jsx("button",{onClick:M,className:"text-xs text-indigo-600 hover:text-indigo-700 font-bold px-3 py-1.5 bg-indigo-50 hover:bg-indigo-100 rounded-lg transition-colors",children:"Mark all read"})]}),a.jsx("div",{className:"max-h-[400px] overflow-y-auto scrollbar-thin scrollbar-thumb-slate-200",children:N.length===0?a.jsxs("div",{className:"p-12 text-center text-slate-400 flex flex-col items-center",children:[a.jsx(Pl,{size:32,className:"mb-3 opacity-20"}),a.jsx("p",{className:"text-sm font-medium",children:"All caught up!"})]}):a.jsx("div",{className:"divide-y divide-slate-50",children:N.map(W=>a.jsxs("div",{onClick:()=>L(W.id),className:`p-4 hover:bg-slate-50 transition-all cursor-pointer group relative ${W.read?"":"bg-indigo-50/20"}`,children:[!W.read&&a.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-indigo-500 rounded-r-full"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("div",{className:`mt-1 h-10 w-10 rounded-full flex items-center justify-center shrink-0 ${W.read?"bg-slate-100 text-slate-500":"bg-indigo-100 text-indigo-600"}`,children:a.jsx(wn,{size:18,strokeWidth:2})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex justify-between items-start mb-0.5",children:[a.jsx("p",{className:`text-sm font-semibold truncate pr-2 ${W.read?"text-slate-700":"text-slate-900"}`,children:W.title}),a.jsx("span",{className:"text-[10px] text-slate-400 font-medium whitespace-nowrap bg-slate-50 px-1.5 py-0.5 rounded border border-slate-100",children:W.time})]}),a.jsx("p",{className:"text-sm text-slate-500 leading-snug line-clamp-2 mix-blend-multiply",children:W.message})]})]})]},W.id))})}),a.jsx("div",{className:"p-3 bg-slate-50/50 text-center border-t border-slate-100",children:a.jsxs("button",{className:"text-xs font-bold text-slate-600 hover:text-indigo-600 transition-colors flex items-center justify-center gap-1 w-full py-1",children:["View All Activity ",a.jsx(kf,{size:12})]})})]})})]}),a.jsxs("div",{className:"relative pl-2",ref:y,children:[a.jsxs(Ie.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>g(!f),className:`flex items-center gap-3 p-1 rounded-xl transition-all border ${f?"bg-white border-indigo-200 shadow-md ring-2 ring-indigo-50/50":"border-transparent hover:bg-slate-50"}`,children:[a.jsxs("div",{className:"text-right hidden md:block pr-1",children:[a.jsx("p",{className:"text-sm font-bold text-slate-800 leading-none",children:t?.name||"User"}),a.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-500 tracking-wider mt-1",children:t?.role||"Member"})]}),a.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 p-0.5 shadow-lg shadow-indigo-500/20",children:a.jsx("div",{className:"h-full w-full bg-white rounded-[10px] flex items-center justify-center overflow-hidden",children:t?.avatar_url?a.jsx("img",{src:t.avatar_url,alt:t.name,className:"h-full w-full object-cover"}):a.jsx("span",{className:"font-bold text-sm bg-gradient-to-br from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:t?.name?.charAt(0).toUpperCase()||"U"})})})]}),a.jsx(dn,{children:f&&a.jsxs(Ie.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{type:"spring",duration:.3},className:"absolute right-0 mt-3 w-64 bg-white rounded-2xl shadow-premium border border-slate-100 overflow-hidden z-50 origin-top-right",children:[a.jsxs("div",{className:"p-5 border-b border-slate-100 bg-gradient-to-br from-slate-50 to-white",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"h-12 w-12 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-bold text-xl",children:t?.name?.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-800",children:t?.name}),a.jsx("p",{className:"text-xs text-slate-500 font-medium truncate max-w-[140px]",children:t?.email})]})]}),a.jsx("div",{className:"flex gap-2",children:a.jsx("span",{className:"px-2 py-1 rounded-md bg-emerald-50 text-emerald-700 border border-emerald-100 text-[10px] font-bold uppercase tracking-wide",children:"Pro Plan"})})]}),a.jsxs("div",{className:"p-2 space-y-1",children:[a.jsxs(tn,{to:"/settings",onClick:()=>g(!1),className:"flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-slate-600 hover:text-indigo-600 hover:bg-slate-50 rounded-xl transition-colors group",children:[a.jsx(Ai,{size:18,className:"text-slate-400 group-hover:text-indigo-500 transition-colors"}),"My Profile"]}),a.jsxs(tn,{to:"/settings",onClick:()=>g(!1),className:"flex items-center gap-3 px-3 py-2.5 text-sm font-medium text-slate-600 hover:text-indigo-600 hover:bg-slate-50 rounded-xl transition-colors group",children:[a.jsx(vf,{size:18,className:"text-slate-400 group-hover:text-indigo-500 transition-colors"}),"Settings"]})]}),a.jsx("div",{className:"p-2 border-t border-slate-50 mt-1",children:a.jsxs("button",{onClick:z,className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm font-bold text-red-600 hover:bg-red-50 rounded-xl transition-colors group",children:[a.jsx(E5,{size:18,className:"text-red-500 group-hover:text-red-600 transition-colors"}),"Sign Out"]})})]})})]})]})]})},ix=async n=>{let e;return n instanceof FormData?(n.append("_method","PUT"),e=await wt.post("/business",n,{headers:{"Content-Type":"multipart/form-data"}})):e=await wt.put("/business",n),e.data},Rr=async()=>(await wt.get("/user")).data.data.business;function tZ(){const[n,e]=_.useState(null),[t,s]=_.useState(!1);return _.useEffect(()=>{Te.dismiss(),(async()=>{try{const r=await Rr();e(r)}catch(r){console.error("Failed to fetch business",r)}})()},[]),a.jsxs("div",{className:"flex bg-slate-50 min-h-screen",children:[a.jsx(QK,{business:n,mobileMenuOpen:t,setMobileMenuOpen:s}),t&&a.jsx("div",{className:"fixed inset-0 bg-slate-900/50 z-40 lg:hidden backdrop-blur-sm",onClick:()=>s(!1)}),a.jsxs("div",{className:"flex-1 flex flex-col min-w-0 transition-all duration-300 relative overflow-x-hidden",children:[a.jsx(eZ,{business:n,onMenuClick:()=>s(!t)}),a.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-8",children:a.jsx(V0,{})})]})]})}function nZ(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return _.useMemo(()=>s=>{e.forEach(i=>i(s))},e)}const Cv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function gg(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function CN(n){return"nodeType"in n}function rr(n){var e,t;return n?gg(n)?n:CN(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function AN(n){const{Document:e}=rr(n);return n instanceof e}function ax(n){return gg(n)?!1:n instanceof rr(n).HTMLElement}function OM(n){return n instanceof rr(n).SVGElement}function pg(n){return n?gg(n)?n.document:CN(n)?AN(n)?n:ax(n)||OM(n)?n.ownerDocument:document:document:document}const Ll=Cv?_.useLayoutEffect:_.useEffect;function Av(n){const e=_.useRef(n);return Ll(()=>{e.current=n}),_.useCallback(function(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return e.current==null?void 0:e.current(...s)},[])}function sZ(){const n=_.useRef(null),e=_.useCallback((s,i)=>{n.current=setInterval(s,i)},[]),t=_.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function k0(n,e){e===void 0&&(e=[n]);const t=_.useRef(n);return Ll(()=>{t.current!==n&&(t.current=n)},e),t}function rx(n,e){const t=_.useRef();return _.useMemo(()=>{const s=n(t.current);return t.current=s,s},[...e])}function Py(n){const e=Av(n),t=_.useRef(null),s=_.useCallback(i=>{i!==t.current&&e?.(i,t.current),t.current=i},[]);return[t,s]}function Oy(n){const e=_.useRef();return _.useEffect(()=>{e.current=n},[n]),e.current}let Mw={};function ox(n,e){return _.useMemo(()=>{if(e)return e;const t=Mw[n]==null?0:Mw[n]+1;return Mw[n]=t,n+"-"+t},[n,e])}function LM(n){return function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];return s.reduce((r,o)=>{const c=Object.entries(o);for(const[u,h]of c){const f=r[u];f!=null&&(r[u]=f+n*h)}return r},{...e})}}const Fm=LM(1),Ly=LM(-1);function iZ(n){return"clientX"in n&&"clientY"in n}function Ev(n){if(!n)return!1;const{KeyboardEvent:e}=rr(n.target);return e&&n instanceof e}function aZ(n){if(!n)return!1;const{TouchEvent:e}=rr(n.target);return e&&n instanceof e}function Fy(n){if(aZ(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return iZ(n)?{x:n.clientX,y:n.clientY}:null}const Oc=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[Oc.Translate.toString(n),Oc.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:s}=n;return e+" "+t+"ms "+s}}}),mT="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function rZ(n){return n.matches(mT)?n:n.querySelector(mT)}const oZ={display:"none"};function lZ(n){let{id:e,value:t}=n;return ht.createElement("div",{id:e,style:oZ},t)}function cZ(n){let{id:e,announcement:t,ariaLiveType:s="assertive"}=n;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ht.createElement("div",{id:e,style:i,role:"status","aria-live":s,"aria-atomic":!0},t)}function dZ(){const[n,e]=_.useState("");return{announce:_.useCallback(s=>{s!=null&&e(s)},[]),announcement:n}}const FM=_.createContext(null);function uZ(n){const e=_.useContext(FM);_.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function hZ(){const[n]=_.useState(()=>new Set),e=_.useCallback(s=>(n.add(s),()=>n.delete(s)),[n]);return[_.useCallback(s=>{let{type:i,event:r}=s;n.forEach(o=>{var c;return(c=o[i])==null?void 0:c.call(o,r)})},[n]),e]}const fZ={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},mZ={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function gZ(n){let{announcements:e=mZ,container:t,hiddenTextDescribedById:s,screenReaderInstructions:i=fZ}=n;const{announce:r,announcement:o}=dZ(),c=ox("DndLiveRegion"),[u,h]=_.useState(!1);if(_.useEffect(()=>{h(!0)},[]),uZ(_.useMemo(()=>({onDragStart(g){let{active:x}=g;r(e.onDragStart({active:x}))},onDragMove(g){let{active:x,over:y}=g;e.onDragMove&&r(e.onDragMove({active:x,over:y}))},onDragOver(g){let{active:x,over:y}=g;r(e.onDragOver({active:x,over:y}))},onDragEnd(g){let{active:x,over:y}=g;r(e.onDragEnd({active:x,over:y}))},onDragCancel(g){let{active:x,over:y}=g;r(e.onDragCancel({active:x,over:y}))}}),[r,e])),!u)return null;const f=ht.createElement(ht.Fragment,null,ht.createElement(lZ,{id:s,value:i.draggable}),ht.createElement(cZ,{id:c,announcement:o}));return t?sf.createPortal(f,t):f}var Ui;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(Ui||(Ui={}));function zy(){}function Ha(n,e){return _.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function Id(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return _.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const Fl=Object.freeze({x:0,y:0});function pZ(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function xZ(n,e){const t=Fy(n);if(!t)return"0 0";const s={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return s.x+"% "+s.y+"%"}function bZ(n,e){let{data:{value:t}}=n,{data:{value:s}}=e;return t-s}function yZ(n,e){let{data:{value:t}}=n,{data:{value:s}}=e;return s-t}function vZ(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function gT(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}const EN=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=n;const i=gT(e,e.left,e.top),r=[];for(const o of s){const{id:c}=o,u=t.get(c);if(u){const h=pZ(gT(u),i);r.push({id:c,data:{droppableContainer:o,value:h}})}}return r.sort(bZ)};function wZ(n,e){const t=Math.max(e.top,n.top),s=Math.max(e.left,n.left),i=Math.min(e.left+e.width,n.left+n.width),r=Math.min(e.top+e.height,n.top+n.height),o=i-s,c=r-t;if(s<i&&t<r){const u=e.width*e.height,h=n.width*n.height,f=o*c,g=f/(u+h-f);return Number(g.toFixed(4))}return 0}const SZ=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=n;const i=[];for(const r of s){const{id:o}=r,c=t.get(o);if(c){const u=wZ(c,e);u>0&&i.push({id:o,data:{droppableContainer:r,value:u}})}}return i.sort(yZ)};function NZ(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function zM(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:Fl}function jZ(n){return function(t){for(var s=arguments.length,i=new Array(s>1?s-1:0),r=1;r<s;r++)i[r-1]=arguments[r];return i.reduce((o,c)=>({...o,top:o.top+n*c.y,bottom:o.bottom+n*c.y,left:o.left+n*c.x,right:o.right+n*c.x}),{...t})}}const CZ=jZ(1);function IM(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function AZ(n,e,t){const s=IM(e);if(!s)return n;const{scaleX:i,scaleY:r,x:o,y:c}=s,u=n.left-o-(1-i)*parseFloat(t),h=n.top-c-(1-r)*parseFloat(t.slice(t.indexOf(" ")+1)),f=i?n.width/i:n.width,g=r?n.height/r:n.height;return{width:f,height:g,top:h,right:u+f,bottom:h+g,left:u}}const EZ={ignoreTransform:!1};function xg(n,e){e===void 0&&(e=EZ);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:f}=rr(n).getComputedStyle(n);h&&(t=AZ(t,h,f))}const{top:s,left:i,width:r,height:o,bottom:c,right:u}=t;return{top:s,left:i,width:r,height:o,bottom:c,right:u}}function pT(n){return xg(n,{ignoreTransform:!0})}function _Z(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function TZ(n,e){return e===void 0&&(e=rr(n).getComputedStyle(n)),e.position==="fixed"}function kZ(n,e){e===void 0&&(e=rr(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const r=e[i];return typeof r=="string"?t.test(r):!1})}function _N(n,e){const t=[];function s(i){if(e!=null&&t.length>=e||!i)return t;if(AN(i)&&i.scrollingElement!=null&&!t.includes(i.scrollingElement))return t.push(i.scrollingElement),t;if(!ax(i)||OM(i)||t.includes(i))return t;const r=rr(n).getComputedStyle(i);return i!==n&&kZ(i,r)&&t.push(i),TZ(i,r)?t:s(i.parentNode)}return n?s(n):t}function BM(n){const[e]=_N(n,1);return e??null}function Pw(n){return!Cv||!n?null:gg(n)?n:CN(n)?AN(n)||n===pg(n).scrollingElement?window:ax(n)?n:null:null}function HM(n){return gg(n)?n.scrollX:n.scrollLeft}function UM(n){return gg(n)?n.scrollY:n.scrollTop}function V2(n){return{x:HM(n),y:UM(n)}}var ra;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(ra||(ra={}));function VM(n){return!Cv||!n?!1:n===document.scrollingElement}function WM(n){const e={x:0,y:0},t=VM(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},s={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},i=n.scrollTop<=e.y,r=n.scrollLeft<=e.x,o=n.scrollTop>=s.y,c=n.scrollLeft>=s.x;return{isTop:i,isLeft:r,isBottom:o,isRight:c,maxScroll:s,minScroll:e}}const DZ={x:.2,y:.2};function RZ(n,e,t,s,i){let{top:r,left:o,right:c,bottom:u}=t;s===void 0&&(s=10),i===void 0&&(i=DZ);const{isTop:h,isBottom:f,isLeft:g,isRight:x}=WM(n),y={x:0,y:0},N={x:0,y:0},j={height:e.height*i.y,width:e.width*i.x};return!h&&r<=e.top+j.height?(y.y=ra.Backward,N.y=s*Math.abs((e.top+j.height-r)/j.height)):!f&&u>=e.bottom-j.height&&(y.y=ra.Forward,N.y=s*Math.abs((e.bottom-j.height-u)/j.height)),!x&&c>=e.right-j.width?(y.x=ra.Forward,N.x=s*Math.abs((e.right-j.width-c)/j.width)):!g&&o<=e.left+j.width&&(y.x=ra.Backward,N.x=s*Math.abs((e.left+j.width-o)/j.width)),{direction:y,speed:N}}function MZ(n){if(n===document.scrollingElement){const{innerWidth:r,innerHeight:o}=window;return{top:0,left:0,right:r,bottom:o,width:r,height:o}}const{top:e,left:t,right:s,bottom:i}=n.getBoundingClientRect();return{top:e,left:t,right:s,bottom:i,width:n.clientWidth,height:n.clientHeight}}function GM(n){return n.reduce((e,t)=>Fm(e,V2(t)),Fl)}function PZ(n){return n.reduce((e,t)=>e+HM(t),0)}function OZ(n){return n.reduce((e,t)=>e+UM(t),0)}function YM(n,e){if(e===void 0&&(e=xg),!n)return;const{top:t,left:s,bottom:i,right:r}=e(n);BM(n)&&(i<=0||r<=0||t>=window.innerHeight||s>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const LZ=[["x",["left","right"],PZ],["y",["top","bottom"],OZ]];class TN{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=_N(t),i=GM(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[r,o,c]of LZ)for(const u of o)Object.defineProperty(this,u,{get:()=>{const h=c(s),f=i[r]-h;return this.rect[u]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class d0{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...t)})},this.target=e}add(e,t,s){var i;(i=this.target)==null||i.addEventListener(e,t,s),this.listeners.push([e,t,s])}}function FZ(n){const{EventTarget:e}=rr(n);return n instanceof e?n:pg(n)}function Ow(n,e){const t=Math.abs(n.x),s=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+s**2)>e:"x"in e&&"y"in e?t>e.x&&s>e.y:"x"in e?t>e.x:"y"in e?s>e.y:!1}var zo;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(zo||(zo={}));function xT(n){n.preventDefault()}function zZ(n){n.stopPropagation()}var Hn;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(Hn||(Hn={}));const XM={start:[Hn.Space,Hn.Enter],cancel:[Hn.Esc],end:[Hn.Space,Hn.Enter,Hn.Tab]},IZ=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case Hn.Right:return{...t,x:t.x+25};case Hn.Left:return{...t,x:t.x-25};case Hn.Down:return{...t,y:t.y+25};case Hn.Up:return{...t,y:t.y-25}}};class kN{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new d0(pg(t)),this.windowListeners=new d0(rr(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(zo.Resize,this.handleCancel),this.windowListeners.add(zo.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(zo.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,s=e.node.current;s&&YM(s),t(Fl)}handleKeyDown(e){if(Ev(e)){const{active:t,context:s,options:i}=this.props,{keyboardCodes:r=XM,coordinateGetter:o=IZ,scrollBehavior:c="smooth"}=i,{code:u}=e;if(r.end.includes(u)){this.handleEnd(e);return}if(r.cancel.includes(u)){this.handleCancel(e);return}const{collisionRect:h}=s.current,f=h?{x:h.left,y:h.top}:Fl;this.referenceCoordinates||(this.referenceCoordinates=f);const g=o(e,{active:t,context:s.current,currentCoordinates:f});if(g){const x=Ly(g,f),y={x:0,y:0},{scrollableAncestors:N}=s.current;for(const j of N){const E=e.code,{isTop:A,isRight:R,isLeft:M,isBottom:L,maxScroll:z,minScroll:W}=WM(j),I=MZ(j),Y={x:Math.min(E===Hn.Right?I.right-I.width/2:I.right,Math.max(E===Hn.Right?I.left:I.left+I.width/2,g.x)),y:Math.min(E===Hn.Down?I.bottom-I.height/2:I.bottom,Math.max(E===Hn.Down?I.top:I.top+I.height/2,g.y))},U=E===Hn.Right&&!R||E===Hn.Left&&!M,Z=E===Hn.Down&&!L||E===Hn.Up&&!A;if(U&&Y.x!==g.x){const $=j.scrollLeft+x.x,ae=E===Hn.Right&&$<=z.x||E===Hn.Left&&$>=W.x;if(ae&&!x.y){j.scrollTo({left:$,behavior:c});return}ae?y.x=j.scrollLeft-$:y.x=E===Hn.Right?j.scrollLeft-z.x:j.scrollLeft-W.x,y.x&&j.scrollBy({left:-y.x,behavior:c});break}else if(Z&&Y.y!==g.y){const $=j.scrollTop+x.y,ae=E===Hn.Down&&$<=z.y||E===Hn.Up&&$>=W.y;if(ae&&!x.x){j.scrollTo({top:$,behavior:c});return}ae?y.y=j.scrollTop-$:y.y=E===Hn.Down?j.scrollTop-z.y:j.scrollTop-W.y,y.y&&j.scrollBy({top:-y.y,behavior:c});break}}this.handleMove(e,Fm(Ly(g,this.referenceCoordinates),y))}}}handleMove(e,t){const{onMove:s}=this.props;e.preventDefault(),s(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}kN.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:s=XM,onActivation:i}=e,{active:r}=t;const{code:o}=n.nativeEvent;if(s.start.includes(o)){const c=r.activatorNode.current;return c&&n.target!==c?!1:(n.preventDefault(),i?.({event:n.nativeEvent}),!0)}return!1}}];function bT(n){return!!(n&&"distance"in n)}function yT(n){return!!(n&&"delay"in n)}class DN{constructor(e,t,s){var i;s===void 0&&(s=FZ(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:r}=e,{target:o}=r;this.props=e,this.events=t,this.document=pg(o),this.documentListeners=new d0(this.document),this.listeners=new d0(s),this.windowListeners=new d0(rr(o)),this.initialCoordinates=(i=Fy(r))!=null?i:Fl,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(zo.Resize,this.handleCancel),this.windowListeners.add(zo.DragStart,xT),this.windowListeners.add(zo.VisibilityChange,this.handleCancel),this.windowListeners.add(zo.ContextMenu,xT),this.documentListeners.add(zo.Keydown,this.handleKeydown),t){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(yT(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(bT(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:s,onPending:i}=this.props;i(s,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(zo.Click,zZ,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(zo.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:s,initialCoordinates:i,props:r}=this,{onMove:o,options:{activationConstraint:c}}=r;if(!i)return;const u=(t=Fy(e))!=null?t:Fl,h=Ly(i,u);if(!s&&c){if(bT(c)){if(c.tolerance!=null&&Ow(h,c.tolerance))return this.handleCancel();if(Ow(h,c.distance))return this.handleStart()}if(yT(c)&&Ow(h,c.tolerance))return this.handleCancel();this.handlePending(c,h);return}e.cancelable&&e.preventDefault(),o(u)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Hn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const BZ={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Lc extends DN{constructor(e){const{event:t}=e,s=pg(t.target);super(e,BZ,s)}}Lc.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:s}=e;return!t.isPrimary||t.button!==0?!1:(s?.({event:t}),!0)}}];const HZ={move:{name:"mousemove"},end:{name:"mouseup"}};var W2;(function(n){n[n.RightClick=2]="RightClick"})(W2||(W2={}));class KM extends DN{constructor(e){super(e,HZ,pg(e.event.target))}}KM.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:s}=e;return t.button===W2.RightClick?!1:(s?.({event:t}),!0)}}];const Lw={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Mf extends DN{constructor(e){super(e,Lw)}static setup(){return window.addEventListener(Lw.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Lw.move.name,e)};function e(){}}}Mf.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:s}=e;const{touches:i}=t;return i.length>1?!1:(s?.({event:t}),!0)}}];var u0;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(u0||(u0={}));var Iy;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(Iy||(Iy={}));function UZ(n){let{acceleration:e,activator:t=u0.Pointer,canScroll:s,draggingRect:i,enabled:r,interval:o=5,order:c=Iy.TreeOrder,pointerCoordinates:u,scrollableAncestors:h,scrollableAncestorRects:f,delta:g,threshold:x}=n;const y=WZ({delta:g,disabled:!r}),[N,j]=sZ(),E=_.useRef({x:0,y:0}),A=_.useRef({x:0,y:0}),R=_.useMemo(()=>{switch(t){case u0.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case u0.DraggableRect:return i}},[t,i,u]),M=_.useRef(null),L=_.useCallback(()=>{const W=M.current;if(!W)return;const I=E.current.x*A.current.x,Y=E.current.y*A.current.y;W.scrollBy(I,Y)},[]),z=_.useMemo(()=>c===Iy.TreeOrder?[...h].reverse():h,[c,h]);_.useEffect(()=>{if(!r||!h.length||!R){j();return}for(const W of z){if(s?.(W)===!1)continue;const I=h.indexOf(W),Y=f[I];if(!Y)continue;const{direction:U,speed:Z}=RZ(W,Y,R,e,x);for(const $ of["x","y"])y[$][U[$]]||(Z[$]=0,U[$]=0);if(Z.x>0||Z.y>0){j(),M.current=W,N(L,o),E.current=Z,A.current=U;return}}E.current={x:0,y:0},A.current={x:0,y:0},j()},[e,L,s,j,r,o,JSON.stringify(R),JSON.stringify(y),N,h,z,f,JSON.stringify(x)])}const VZ={x:{[ra.Backward]:!1,[ra.Forward]:!1},y:{[ra.Backward]:!1,[ra.Forward]:!1}};function WZ(n){let{delta:e,disabled:t}=n;const s=Oy(e);return rx(i=>{if(t||!s||!i)return VZ;const r={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[ra.Backward]:i.x[ra.Backward]||r.x===-1,[ra.Forward]:i.x[ra.Forward]||r.x===1},y:{[ra.Backward]:i.y[ra.Backward]||r.y===-1,[ra.Forward]:i.y[ra.Forward]||r.y===1}}},[t,e,s])}function GZ(n,e){const t=e!=null?n.get(e):void 0,s=t?t.node.current:null;return rx(i=>{var r;return e==null?null:(r=s??i)!=null?r:null},[s,e])}function YZ(n,e){return _.useMemo(()=>n.reduce((t,s)=>{const{sensor:i}=s,r=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,s)}));return[...t,...r]},[]),[n,e])}var D0;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(D0||(D0={}));var G2;(function(n){n.Optimized="optimized"})(G2||(G2={}));const vT=new Map;function XZ(n,e){let{dragging:t,dependencies:s,config:i}=e;const[r,o]=_.useState(null),{frequency:c,measure:u,strategy:h}=i,f=_.useRef(n),g=E(),x=k0(g),y=_.useCallback(function(A){A===void 0&&(A=[]),!x.current&&o(R=>R===null?A:R.concat(A.filter(M=>!R.includes(M))))},[x]),N=_.useRef(null),j=rx(A=>{if(g&&!t)return vT;if(!A||A===vT||f.current!==n||r!=null){const R=new Map;for(let M of n){if(!M)continue;if(r&&r.length>0&&!r.includes(M.id)&&M.rect.current){R.set(M.id,M.rect.current);continue}const L=M.node.current,z=L?new TN(u(L),L):null;M.rect.current=z,z&&R.set(M.id,z)}return R}return A},[n,r,t,g,u]);return _.useEffect(()=>{f.current=n},[n]),_.useEffect(()=>{g||y()},[t,g]),_.useEffect(()=>{r&&r.length>0&&o(null)},[JSON.stringify(r)]),_.useEffect(()=>{g||typeof c!="number"||N.current!==null||(N.current=setTimeout(()=>{y(),N.current=null},c))},[c,g,y,...s]),{droppableRects:j,measureDroppableContainers:y,measuringScheduled:r!=null};function E(){switch(h){case D0.Always:return!1;case D0.BeforeDragging:return t;default:return!t}}}function RN(n,e){return rx(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function KZ(n,e){return RN(n,e)}function ZZ(n){let{callback:e,disabled:t}=n;const s=Av(e),i=_.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:r}=window;return new r(s)},[s,t]);return _.useEffect(()=>()=>i?.disconnect(),[i]),i}function _v(n){let{callback:e,disabled:t}=n;const s=Av(e),i=_.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:r}=window;return new r(s)},[t]);return _.useEffect(()=>()=>i?.disconnect(),[i]),i}function QZ(n){return new TN(xg(n),n)}function wT(n,e,t){e===void 0&&(e=QZ);const[s,i]=_.useState(null);function r(){i(u=>{if(!n)return null;if(n.isConnected===!1){var h;return(h=u??t)!=null?h:null}const f=e(n);return JSON.stringify(u)===JSON.stringify(f)?u:f})}const o=ZZ({callback(u){if(n)for(const h of u){const{type:f,target:g}=h;if(f==="childList"&&g instanceof HTMLElement&&g.contains(n)){r();break}}}}),c=_v({callback:r});return Ll(()=>{r(),n?(c?.observe(n),o?.observe(document.body,{childList:!0,subtree:!0})):(c?.disconnect(),o?.disconnect())},[n]),s}function JZ(n){const e=RN(n);return zM(n,e)}const ST=[];function qZ(n){const e=_.useRef(n),t=rx(s=>n?s&&s!==ST&&n&&e.current&&n.parentNode===e.current.parentNode?s:_N(n):ST,[n]);return _.useEffect(()=>{e.current=n},[n]),t}function $Z(n){const[e,t]=_.useState(null),s=_.useRef(n),i=_.useCallback(r=>{const o=Pw(r.target);o&&t(c=>c?(c.set(o,V2(o)),new Map(c)):null)},[]);return _.useEffect(()=>{const r=s.current;if(n!==r){o(r);const c=n.map(u=>{const h=Pw(u);return h?(h.addEventListener("scroll",i,{passive:!0}),[h,V2(h)]):null}).filter(u=>u!=null);t(c.length?new Map(c):null),s.current=n}return()=>{o(n),o(r)};function o(c){c.forEach(u=>{const h=Pw(u);h?.removeEventListener("scroll",i)})}},[i,n]),_.useMemo(()=>n.length?e?Array.from(e.values()).reduce((r,o)=>Fm(r,o),Fl):GM(n):Fl,[n,e])}function NT(n,e){e===void 0&&(e=[]);const t=_.useRef(null);return _.useEffect(()=>{t.current=null},e),_.useEffect(()=>{const s=n!==Fl;s&&!t.current&&(t.current=n),!s&&t.current&&(t.current=null)},[n]),t.current?Ly(n,t.current):Fl}function eQ(n){_.useEffect(()=>{if(!Cv)return;const e=n.map(t=>{let{sensor:s}=t;return s.setup==null?void 0:s.setup()});return()=>{for(const t of e)t?.()}},n.map(e=>{let{sensor:t}=e;return t}))}function tQ(n,e){return _.useMemo(()=>n.reduce((t,s)=>{let{eventName:i,handler:r}=s;return t[i]=o=>{r(o,e)},t},{}),[n,e])}function ZM(n){return _.useMemo(()=>n?_Z(n):null,[n])}const jT=[];function nQ(n,e){e===void 0&&(e=xg);const[t]=n,s=ZM(t?rr(t):null),[i,r]=_.useState(jT);function o(){r(()=>n.length?n.map(u=>VM(u)?s:new TN(e(u),u)):jT)}const c=_v({callback:o});return Ll(()=>{c?.disconnect(),o(),n.forEach(u=>c?.observe(u))},[n]),i}function QM(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return ax(e)?e:n}function sQ(n){let{measure:e}=n;const[t,s]=_.useState(null),i=_.useCallback(h=>{for(const{target:f}of h)if(ax(f)){s(g=>{const x=e(f);return g?{...g,width:x.width,height:x.height}:x});break}},[e]),r=_v({callback:i}),o=_.useCallback(h=>{const f=QM(h);r?.disconnect(),f&&r?.observe(f),s(f?e(f):null)},[e,r]),[c,u]=Py(o);return _.useMemo(()=>({nodeRef:c,rect:t,setRef:u}),[t,c,u])}const iQ=[{sensor:Lc,options:{}},{sensor:kN,options:{}}],aQ={current:{}},uy={draggable:{measure:pT},droppable:{measure:pT,strategy:D0.WhileDragging,frequency:G2.Optimized},dragOverlay:{measure:xg}};class h0 extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,s;return(t=(s=this.get(e))==null?void 0:s.node.current)!=null?t:void 0}}const rQ={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new h0,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:zy},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:uy,measureDroppableContainers:zy,windowRect:null,measuringScheduled:!1},JM={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:zy,draggableNodes:new Map,over:null,measureDroppableContainers:zy},lx=_.createContext(JM),qM=_.createContext(rQ);function oQ(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new h0}}}function lQ(n,e){switch(e.type){case Ui.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ui.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case Ui.DragEnd:case Ui.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ui.RegisterDroppable:{const{element:t}=e,{id:s}=t,i=new h0(n.droppable.containers);return i.set(s,t),{...n,droppable:{...n.droppable,containers:i}}}case Ui.SetDroppableDisabled:{const{id:t,key:s,disabled:i}=e,r=n.droppable.containers.get(t);if(!r||s!==r.key)return n;const o=new h0(n.droppable.containers);return o.set(t,{...r,disabled:i}),{...n,droppable:{...n.droppable,containers:o}}}case Ui.UnregisterDroppable:{const{id:t,key:s}=e,i=n.droppable.containers.get(t);if(!i||s!==i.key)return n;const r=new h0(n.droppable.containers);return r.delete(t),{...n,droppable:{...n.droppable,containers:r}}}default:return n}}function cQ(n){let{disabled:e}=n;const{active:t,activatorEvent:s,draggableNodes:i}=_.useContext(lx),r=Oy(s),o=Oy(t?.id);return _.useEffect(()=>{if(!e&&!s&&r&&o!=null){if(!Ev(r)||document.activeElement===r.target)return;const c=i.get(o);if(!c)return;const{activatorNode:u,node:h}=c;if(!u.current&&!h.current)return;requestAnimationFrame(()=>{for(const f of[u.current,h.current]){if(!f)continue;const g=rZ(f);if(g){g.focus();break}}})}},[s,e,i,o,r]),null}function $M(n,e){let{transform:t,...s}=e;return n!=null&&n.length?n.reduce((i,r)=>r({transform:i,...s}),t):t}function dQ(n){return _.useMemo(()=>({draggable:{...uy.draggable,...n?.draggable},droppable:{...uy.droppable,...n?.droppable},dragOverlay:{...uy.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function uQ(n){let{activeNode:e,measure:t,initialRect:s,config:i=!0}=n;const r=_.useRef(!1),{x:o,y:c}=typeof i=="boolean"?{x:i,y:i}:i;Ll(()=>{if(!o&&!c||!e){r.current=!1;return}if(r.current||!s)return;const h=e?.node.current;if(!h||h.isConnected===!1)return;const f=t(h),g=zM(f,s);if(o||(g.x=0),c||(g.y=0),r.current=!0,Math.abs(g.x)>0||Math.abs(g.y)>0){const x=BM(h);x&&x.scrollBy({top:g.y,left:g.x})}},[e,o,c,s,t])}const Tv=_.createContext({...Fl,scaleX:1,scaleY:1});var Zu;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(Zu||(Zu={}));const Bd=_.memo(function(e){var t,s,i,r;let{id:o,accessibility:c,autoScroll:u=!0,children:h,sensors:f=iQ,collisionDetection:g=SZ,measuring:x,modifiers:y,...N}=e;const j=_.useReducer(lQ,void 0,oQ),[E,A]=j,[R,M]=hZ(),[L,z]=_.useState(Zu.Uninitialized),W=L===Zu.Initialized,{draggable:{active:I,nodes:Y,translate:U},droppable:{containers:Z}}=E,$=I!=null?Y.get(I):null,ae=_.useRef({initial:null,translated:null}),xe=_.useMemo(()=>{var le;return I!=null?{id:I,data:(le=$?.data)!=null?le:aQ,rect:ae}:null},[I,$]),fe=_.useRef(null),[ke,G]=_.useState(null),[X,se]=_.useState(null),ee=k0(N,Object.values(N)),ne=ox("DndDescribedBy",o),V=_.useMemo(()=>Z.getEnabled(),[Z]),re=dQ(x),{droppableRects:ge,measureDroppableContainers:Ne,measuringScheduled:Ce}=XZ(V,{dragging:W,dependencies:[U.x,U.y],config:re.droppable}),We=GZ(Y,I),Ge=_.useMemo(()=>X?Fy(X):null,[X]),Oe=et(),$e=KZ(We,re.draggable.measure);uQ({activeNode:I!=null?Y.get(I):null,config:Oe.layoutShiftCompensation,initialRect:$e,measure:re.draggable.measure});const Le=wT(We,re.draggable.measure,$e),pe=wT(We?We.parentElement:null),je=_.useRef({activatorEvent:null,active:null,activeNode:We,collisionRect:null,collisions:null,droppableRects:ge,draggableNodes:Y,draggingNode:null,draggingNodeRect:null,droppableContainers:Z,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Se=Z.getNodeFor((t=je.current.over)==null?void 0:t.id),Je=sQ({measure:re.dragOverlay.measure}),lt=(s=Je.nodeRef.current)!=null?s:We,ct=W?(i=Je.rect)!=null?i:Le:null,Fe=!!(Je.nodeRef.current&&Je.rect),nt=JZ(Fe?null:Le),Ye=ZM(lt?rr(lt):null),ot=qZ(W?Se??We:null),St=nQ(ot),Pt=$M(y,{transform:{x:U.x-nt.x,y:U.y-nt.y,scaleX:1,scaleY:1},activatorEvent:X,active:xe,activeNodeRect:Le,containerNodeRect:pe,draggingNodeRect:ct,over:je.current.over,overlayNodeRect:Je.rect,scrollableAncestors:ot,scrollableAncestorRects:St,windowRect:Ye}),qe=Ge?Fm(Ge,U):null,Ze=$Z(ot),Xe=NT(Ze),yt=NT(Ze,[Le]),Et=Fm(Pt,Xe),Ot=ct?CZ(ct,Pt):null,Kt=xe&&Ot?g({active:xe,collisionRect:Ot,droppableRects:ge,droppableContainers:V,pointerCoordinates:qe}):null,Fn=vZ(Kt,"id"),[un,qs]=_.useState(null),Os=Fe?Pt:Fm(Pt,yt),An=NZ(Os,(r=un?.rect)!=null?r:null,Le),ye=_.useRef(null),Qe=_.useCallback((le,Ke)=>{let{sensor:at,options:ut}=Ke;if(fe.current==null)return;const gt=Y.get(fe.current);if(!gt)return;const Dt=le.nativeEvent,hn=new at({active:fe.current,activeNode:gt,event:Dt,options:ut,context:je,onAbort(Rt){if(!Y.get(Rt))return;const{onDragAbort:$s}=ee.current,Dn={id:Rt};$s?.(Dn),R({type:"onDragAbort",event:Dn})},onPending(Rt,Ei,$s,Dn){if(!Y.get(Rt))return;const{onDragPending:jn}=ee.current,Zi={id:Rt,constraint:Ei,initialCoordinates:$s,offset:Dn};jn?.(Zi),R({type:"onDragPending",event:Zi})},onStart(Rt){const Ei=fe.current;if(Ei==null)return;const $s=Y.get(Ei);if(!$s)return;const{onDragStart:Dn}=ee.current,Cs={activatorEvent:Dt,active:{id:Ei,data:$s.data,rect:ae}};sf.unstable_batchedUpdates(()=>{Dn?.(Cs),z(Zu.Initializing),A({type:Ui.DragStart,initialCoordinates:Rt,active:Ei}),R({type:"onDragStart",event:Cs}),G(ye.current),se(Dt)})},onMove(Rt){A({type:Ui.DragMove,coordinates:Rt})},onEnd:en(Ui.DragEnd),onCancel:en(Ui.DragCancel)});ye.current=hn;function en(Rt){return async function(){const{active:$s,collisions:Dn,over:Cs,scrollAdjustedTranslate:jn}=je.current;let Zi=null;if($s&&jn){const{cancelDrop:As}=ee.current;Zi={activatorEvent:Dt,active:$s,collisions:Dn,delta:jn,over:Cs},Rt===Ui.DragEnd&&typeof As=="function"&&await Promise.resolve(As(Zi))&&(Rt=Ui.DragCancel)}fe.current=null,sf.unstable_batchedUpdates(()=>{A({type:Rt}),z(Zu.Uninitialized),qs(null),G(null),se(null),ye.current=null;const As=Rt===Ui.DragEnd?"onDragEnd":"onDragCancel";if(Zi){const fn=ee.current[As];fn?.(Zi),R({type:As,event:Zi})}})}}},[Y]),rt=_.useCallback((le,Ke)=>(at,ut)=>{const gt=at.nativeEvent,Dt=Y.get(ut);if(fe.current!==null||!Dt||gt.dndKit||gt.defaultPrevented)return;const hn={active:Dt};le(at,Ke.options,hn)===!0&&(gt.dndKit={capturedBy:Ke.sensor},fe.current=ut,Qe(at,Ke))},[Y,Qe]),Nt=YZ(f,rt);eQ(f),Ll(()=>{Le&&L===Zu.Initializing&&z(Zu.Initialized)},[Le,L]),_.useEffect(()=>{const{onDragMove:le}=ee.current,{active:Ke,activatorEvent:at,collisions:ut,over:gt}=je.current;if(!Ke||!at)return;const Dt={active:Ke,activatorEvent:at,collisions:ut,delta:{x:Et.x,y:Et.y},over:gt};sf.unstable_batchedUpdates(()=>{le?.(Dt),R({type:"onDragMove",event:Dt})})},[Et.x,Et.y]),_.useEffect(()=>{const{active:le,activatorEvent:Ke,collisions:at,droppableContainers:ut,scrollAdjustedTranslate:gt}=je.current;if(!le||fe.current==null||!Ke||!gt)return;const{onDragOver:Dt}=ee.current,hn=ut.get(Fn),en=hn&&hn.rect.current?{id:hn.id,rect:hn.rect.current,data:hn.data,disabled:hn.disabled}:null,Rt={active:le,activatorEvent:Ke,collisions:at,delta:{x:gt.x,y:gt.y},over:en};sf.unstable_batchedUpdates(()=>{qs(en),Dt?.(Rt),R({type:"onDragOver",event:Rt})})},[Fn]),Ll(()=>{je.current={activatorEvent:X,active:xe,activeNode:We,collisionRect:Ot,collisions:Kt,droppableRects:ge,draggableNodes:Y,draggingNode:lt,draggingNodeRect:ct,droppableContainers:Z,over:un,scrollableAncestors:ot,scrollAdjustedTranslate:Et},ae.current={initial:ct,translated:Ot}},[xe,We,Kt,Ot,Y,lt,ct,ge,Z,un,ot,Et]),UZ({...Oe,delta:U,draggingRect:Ot,pointerCoordinates:qe,scrollableAncestors:ot,scrollableAncestorRects:St});const mt=_.useMemo(()=>({active:xe,activeNode:We,activeNodeRect:Le,activatorEvent:X,collisions:Kt,containerNodeRect:pe,dragOverlay:Je,draggableNodes:Y,droppableContainers:Z,droppableRects:ge,over:un,measureDroppableContainers:Ne,scrollableAncestors:ot,scrollableAncestorRects:St,measuringConfiguration:re,measuringScheduled:Ce,windowRect:Ye}),[xe,We,Le,X,Kt,pe,Je,Y,Z,ge,un,Ne,ot,St,re,Ce,Ye]),It=_.useMemo(()=>({activatorEvent:X,activators:Nt,active:xe,activeNodeRect:Le,ariaDescribedById:{draggable:ne},dispatch:A,draggableNodes:Y,over:un,measureDroppableContainers:Ne}),[X,Nt,xe,Le,A,ne,Y,un,Ne]);return ht.createElement(FM.Provider,{value:M},ht.createElement(lx.Provider,{value:It},ht.createElement(qM.Provider,{value:mt},ht.createElement(Tv.Provider,{value:An},h)),ht.createElement(cQ,{disabled:c?.restoreFocus===!1})),ht.createElement(gZ,{...c,hiddenTextDescribedById:ne}));function et(){const le=ke?.autoScrollEnabled===!1,Ke=typeof u=="object"?u.enabled===!1:u===!1,at=W&&!le&&!Ke;return typeof u=="object"?{...u,enabled:at}:{enabled:at}}}),hQ=_.createContext(null),CT="button",fQ="Draggable";function kv(n){let{id:e,data:t,disabled:s=!1,attributes:i}=n;const r=ox(fQ),{activators:o,activatorEvent:c,active:u,activeNodeRect:h,ariaDescribedById:f,draggableNodes:g,over:x}=_.useContext(lx),{role:y=CT,roleDescription:N="draggable",tabIndex:j=0}=i??{},E=u?.id===e,A=_.useContext(E?Tv:hQ),[R,M]=Py(),[L,z]=Py(),W=tQ(o,e),I=k0(t);Ll(()=>(g.set(e,{id:e,key:r,node:R,activatorNode:L,data:I}),()=>{const U=g.get(e);U&&U.key===r&&g.delete(e)}),[g,e]);const Y=_.useMemo(()=>({role:y,tabIndex:j,"aria-disabled":s,"aria-pressed":E&&y===CT?!0:void 0,"aria-roledescription":N,"aria-describedby":f.draggable}),[s,y,j,E,N,f.draggable]);return{active:u,activatorEvent:c,activeNodeRect:h,attributes:Y,isDragging:E,listeners:s?void 0:W,node:R,over:x,setNodeRef:M,setActivatorNodeRef:z,transform:A}}function eP(){return _.useContext(qM)}const mQ="Droppable",gQ={timeout:25};function MN(n){let{data:e,disabled:t=!1,id:s,resizeObserverConfig:i}=n;const r=ox(mQ),{active:o,dispatch:c,over:u,measureDroppableContainers:h}=_.useContext(lx),f=_.useRef({disabled:t}),g=_.useRef(!1),x=_.useRef(null),y=_.useRef(null),{disabled:N,updateMeasurementsFor:j,timeout:E}={...gQ,...i},A=k0(j??s),R=_.useCallback(()=>{if(!g.current){g.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{h(Array.isArray(A.current)?A.current:[A.current]),y.current=null},E)},[E]),M=_v({callback:R,disabled:N||!o}),L=_.useCallback((Y,U)=>{M&&(U&&(M.unobserve(U),g.current=!1),Y&&M.observe(Y))},[M]),[z,W]=Py(L),I=k0(e);return _.useEffect(()=>{!M||!z.current||(M.disconnect(),g.current=!1,M.observe(z.current))},[z,M]),_.useEffect(()=>(c({type:Ui.RegisterDroppable,element:{id:s,key:r,disabled:t,node:z,rect:x,data:I}}),()=>c({type:Ui.UnregisterDroppable,key:r,id:s})),[s]),_.useEffect(()=>{t!==f.current.disabled&&(c({type:Ui.SetDroppableDisabled,id:s,key:r,disabled:t}),f.current.disabled=t)},[s,r,t,c]),{active:o,rect:x,isOver:u?.id===s,node:z,over:u,setNodeRef:W}}function pQ(n){let{animation:e,children:t}=n;const[s,i]=_.useState(null),[r,o]=_.useState(null),c=Oy(t);return!t&&!s&&c&&i(c),Ll(()=>{if(!r)return;const u=s?.key,h=s?.props.id;if(u==null||h==null){i(null);return}Promise.resolve(e(h,r)).then(()=>{i(null)})},[e,s,r]),ht.createElement(ht.Fragment,null,t,s?_.cloneElement(s,{ref:o}):null)}const xQ={x:0,y:0,scaleX:1,scaleY:1};function bQ(n){let{children:e}=n;return ht.createElement(lx.Provider,{value:JM},ht.createElement(Tv.Provider,{value:xQ},e))}const yQ={position:"fixed",touchAction:"none"},vQ=n=>Ev(n)?"transform 250ms ease":void 0,wQ=_.forwardRef((n,e)=>{let{as:t,activatorEvent:s,adjustScale:i,children:r,className:o,rect:c,style:u,transform:h,transition:f=vQ}=n;if(!c)return null;const g=i?h:{...h,scaleX:1,scaleY:1},x={...yQ,width:c.width,height:c.height,top:c.top,left:c.left,transform:Oc.Transform.toString(g),transformOrigin:i&&s?xZ(s,c):void 0,transition:typeof f=="function"?f(s):f,...u};return ht.createElement(t,{className:o,style:x,ref:e},r)}),SQ=n=>e=>{let{active:t,dragOverlay:s}=e;const i={},{styles:r,className:o}=n;if(r!=null&&r.active)for(const[c,u]of Object.entries(r.active))u!==void 0&&(i[c]=t.node.style.getPropertyValue(c),t.node.style.setProperty(c,u));if(r!=null&&r.dragOverlay)for(const[c,u]of Object.entries(r.dragOverlay))u!==void 0&&s.node.style.setProperty(c,u);return o!=null&&o.active&&t.node.classList.add(o.active),o!=null&&o.dragOverlay&&s.node.classList.add(o.dragOverlay),function(){for(const[u,h]of Object.entries(i))t.node.style.setProperty(u,h);o!=null&&o.active&&t.node.classList.remove(o.active)}},NQ=n=>{let{transform:{initial:e,final:t}}=n;return[{transform:Oc.Transform.toString(e)},{transform:Oc.Transform.toString(t)}]},jQ={duration:250,easing:"ease",keyframes:NQ,sideEffects:SQ({styles:{active:{opacity:"0"}}})};function CQ(n){let{config:e,draggableNodes:t,droppableContainers:s,measuringConfiguration:i}=n;return Av((r,o)=>{if(e===null)return;const c=t.get(r);if(!c)return;const u=c.node.current;if(!u)return;const h=QM(o);if(!h)return;const{transform:f}=rr(o).getComputedStyle(o),g=IM(f);if(!g)return;const x=typeof e=="function"?e:AQ(e);return YM(u,i.draggable.measure),x({active:{id:r,data:c.data,node:u,rect:i.draggable.measure(u)},draggableNodes:t,dragOverlay:{node:o,rect:i.dragOverlay.measure(h)},droppableContainers:s,measuringConfiguration:i,transform:g})})}function AQ(n){const{duration:e,easing:t,sideEffects:s,keyframes:i}={...jQ,...n};return r=>{let{active:o,dragOverlay:c,transform:u,...h}=r;if(!e)return;const f={x:c.rect.left-o.rect.left,y:c.rect.top-o.rect.top},g={scaleX:u.scaleX!==1?o.rect.width*u.scaleX/c.rect.width:1,scaleY:u.scaleY!==1?o.rect.height*u.scaleY/c.rect.height:1},x={x:u.x-f.x,y:u.y-f.y,...g},y=i({...h,active:o,dragOverlay:c,transform:{initial:u,final:x}}),[N]=y,j=y[y.length-1];if(JSON.stringify(N)===JSON.stringify(j))return;const E=s?.({active:o,dragOverlay:c,...h}),A=c.node.animate(y,{duration:e,easing:t,fill:"forwards"});return new Promise(R=>{A.onfinish=()=>{E?.(),R()}})}}let AT=0;function EQ(n){return _.useMemo(()=>{if(n!=null)return AT++,AT},[n])}const bg=ht.memo(n=>{let{adjustScale:e=!1,children:t,dropAnimation:s,style:i,transition:r,modifiers:o,wrapperElement:c="div",className:u,zIndex:h=999}=n;const{activatorEvent:f,active:g,activeNodeRect:x,containerNodeRect:y,draggableNodes:N,droppableContainers:j,dragOverlay:E,over:A,measuringConfiguration:R,scrollableAncestors:M,scrollableAncestorRects:L,windowRect:z}=eP(),W=_.useContext(Tv),I=EQ(g?.id),Y=$M(o,{activatorEvent:f,active:g,activeNodeRect:x,containerNodeRect:y,draggingNodeRect:E.rect,over:A,overlayNodeRect:E.rect,scrollableAncestors:M,scrollableAncestorRects:L,transform:W,windowRect:z}),U=RN(x),Z=CQ({config:s,draggableNodes:N,droppableContainers:j,measuringConfiguration:R}),$=U?E.setRef:void 0;return ht.createElement(bQ,null,ht.createElement(pQ,{animation:Z},g&&I?ht.createElement(wQ,{key:I,id:g.id,ref:$,as:c,activatorEvent:f,adjustScale:e,className:u,transition:r,rect:U,style:{zIndex:h,...i},transform:Y},t):null))}),Pa=({title:n,icon:e,isOpen:t,isComplete:s,onClick:i,children:r})=>a.jsxs("div",{className:"border-b border-slate-100 last:border-none",children:[a.jsxs("button",{onClick:i,className:`w-full flex items-center justify-between p-4 transition-all duration-200 ${t?"bg-indigo-50/50 text-indigo-700":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"}`,children:[a.jsxs("div",{className:"flex items-center gap-3 font-semibold text-sm",children:[e&&a.jsx(e,{size:18,className:`transition-colors duration-200 ${t?"text-indigo-600":s?"text-emerald-500":"text-slate-400 group-hover:text-slate-500"}`}),a.jsx("span",{children:n})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[s&&a.jsx(S5,{size:16,className:"text-emerald-500"}),a.jsx(Ie.div,{animate:{rotate:t?180:0},transition:{duration:.2},children:a.jsx(kf,{size:16})})]})]}),a.jsx(dn,{initial:!1,children:t&&a.jsx(Ie.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:a.jsx("div",{className:"p-4 pt-0 space-y-4",children:r})})})]}),Yt=({label:n,name:e,value:t,onChange:s,placeholder:i,type:r="text",rows:o,className:c=""})=>a.jsxs("div",{className:c,children:[a.jsx("label",{className:"block text-[11px] font-bold text-slate-500 uppercase tracking-wider mb-1.5",children:n}),o?a.jsx("textarea",{name:e,value:t||"",onChange:s,placeholder:i,rows:o,className:"w-full px-3 py-2.5 bg-white border border-slate-200 rounded-lg text-sm text-slate-700 shadow-sm focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all duration-200 placeholder-slate-400 resize-y hover:border-slate-300"}):a.jsx("input",{type:r,name:e,value:t||"",onChange:s,placeholder:i,className:"w-full px-3 py-2.5 bg-white border border-slate-200 rounded-lg text-sm text-slate-700 shadow-sm focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all duration-200 placeholder-slate-400 hover:border-slate-300"})]}),jf=({section:n,onUpdate:e,onRemove:t,isFixed:s=!1,placeholderTitle:i="Section Title",placeholderContent:r="Content...",children:o})=>{const[c,u]=_.useState(!0);return a.jsxs("div",{className:"group relative pl-4",children:[a.jsx("div",{className:"absolute left-[7px] top-8 bottom-[-8px] w-[2px] bg-slate-100 group-last:hidden"}),a.jsx("div",{className:"absolute left-0 top-6 w-4 h-4 rounded-full border-2 border-indigo-100 bg-white z-10 flex items-center justify-center",children:a.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${s?"bg-slate-300":"bg-indigo-500"}`})}),a.jsxs("div",{className:`bg-white border rounded-xl shadow-sm transition-all duration-200 ${c?"border-indigo-200 shadow-md ring-1 ring-indigo-500/10":"border-slate-200 hover:border-indigo-300"}`,children:[a.jsxs("div",{className:"flex items-center gap-3 p-3 select-none",children:[!s&&a.jsx("div",{className:"cursor-grab active:cursor-grabbing text-slate-300 hover:text-indigo-500 transition-colors p-1",children:a.jsx(fv,{size:18})}),a.jsx("button",{onClick:()=>u(!c),className:"p-1 text-slate-400 hover:text-indigo-600 rounded-md hover:bg-indigo-50 transition-colors",children:c?a.jsx(kf,{size:18}):a.jsx(fo,{size:18})}),a.jsx("div",{className:"flex-1 min-w-0",children:s?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-slate-500",children:n.title}),a.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-400 border border-slate-200",children:"FIXED"})]}):a.jsx("input",{type:"text",value:n.title||"",onChange:h=>e("title",h.target.value),placeholder:i,className:"w-full bg-transparent text-sm font-bold text-slate-800 placeholder-slate-300 focus:outline-none focus:placeholder-slate-400",onClick:h=>h.stopPropagation()})}),!s&&a.jsx("button",{onClick:t,className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all opacity-0 group-hover:opacity-100",title:"Remove Section",children:a.jsx(Ki,{size:16})})]}),a.jsx(dn,{children:c&&a.jsx(Ie.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:a.jsx("div",{className:"p-3 pt-0 border-t border-slate-50",children:s?o:a.jsx("textarea",{value:n.content||"",onChange:h=>e("content",h.target.value),rows:4,className:"w-full mt-3 p-3 text-sm text-slate-600 bg-slate-50 border border-slate-100 rounded-lg focus:bg-white focus:border-indigo-300 focus:ring-4 focus:ring-indigo-500/10 outline-none transition-all resize-y placeholder-slate-300",placeholder:r})})})})]})]})},Dv=({onClick:n,label:e="Add New Section"})=>a.jsxs("div",{className:"pl-4 relative",children:[a.jsx("div",{className:"absolute left-[7px] top-0 h-8 w-[2px] bg-slate-100"}),a.jsx("div",{className:"absolute left-0 top-8 w-4 h-4 rounded-full border-2 border-indigo-100 bg-indigo-50 z-10 flex items-center justify-center",children:a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-300"})}),a.jsxs("button",{onClick:n,className:"w-full mt-4 py-3 flex items-center justify-center gap-2 bg-white border-2 border-dashed border-slate-200 rounded-xl text-slate-400 font-medium hover:border-indigo-400 hover:text-indigo-600 hover:bg-indigo-50/50 transition-all duration-200 group relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-indigo-50/0 group-hover:bg-indigo-50/30 transition-colors"}),a.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center group-hover:scale-110 transition-transform",children:a.jsx(kd,{size:14,strokeWidth:3})}),a.jsx("span",{children:e})]})]}),cx=({formData:n,onChange:e})=>{const t=n.logoSize||70,s=n.logoAlignment||"left",i=n.brandingEnabled!==!1&&n.brandingEnabled!=="false",r=()=>{e({target:{name:"brandingEnabled",value:!i}})},o=u=>{e({target:{name:"logoSize",value:parseInt(u.target.value)}})},c=u=>{e({target:{name:"logoAlignment",value:u}})};return a.jsxs("div",{className:"space-y-4 pt-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide",children:"Show Logo"}),a.jsx("button",{onClick:r,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none ${i?"bg-indigo-600":"bg-slate-200"}`,children:a.jsx("span",{className:`${i?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-white transition-transform`})})]}),i&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide",children:"Logo Size"}),a.jsxs("span",{className:"text-xs font-mono text-slate-400",children:[t,"px"]})]}),a.jsx("input",{type:"range",min:"30",max:"200",step:"5",value:t,onChange:o,className:"w-full h-1.5 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500/30"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-2",children:"Position"}),a.jsx("div",{className:"flex bg-slate-100 p-1 rounded-lg",children:[{id:"left",icon:M5,label:"Left"},{id:"center",icon:D5,label:"Center"},{id:"right",icon:R5,label:"Right"}].map(u=>a.jsx("button",{onClick:()=>c(u.id),className:`flex-1 flex items-center justify-center py-1.5 rounded-md transition-all ${s===u.id?"bg-white text-indigo-600 shadow-sm ring-1 ring-slate-200":"text-slate-400 hover:text-slate-600 hover:bg-slate-200/50"}`,title:`Align ${u.label}`,children:a.jsx(u.icon,{size:18})},u.id))})]}),a.jsx("p",{className:"text-[10px] text-slate-400 italic mt-2",children:"* Adjust position based on header layout compatibility."})]})]})},Rv=({styles:n,onUpdate:e,onReset:t})=>{const s=[{label:"Modern Sans",value:"font-sans"},{label:"Classic Serif",value:"font-serif"},{label:"Monospace",value:"font-mono"}],i=[{label:"Small (10pt)",value:"text-[10pt]"},{label:"Standard (11pt)",value:"text-[11pt]"},{label:"Large (12pt)",value:"text-[12pt]"}],r=[{label:"Compact",value:"leading-normal"},{label:"Standard",value:"leading-relaxed"},{label:"Loose",value:"leading-loose"}],o=[{label:"Narrow",value:"p-[15mm]"},{label:"Standard",value:"p-[25.4mm]"},{label:"Wide",value:"p-[35mm]"}];return a.jsxs("div",{className:"space-y-6 pt-2",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-wide",children:[a.jsx(Ol,{size:14})," Typography"]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-400 mb-1 block",children:"Font Family"}),a.jsx("select",{value:n.fontFamily,onChange:c=>e("fontFamily",c.target.value),className:"w-full text-sm bg-slate-50 border border-slate-200 rounded-lg p-2 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none",children:s.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-400 mb-1 block",children:"Size"}),a.jsx("select",{value:n.fontSize,onChange:c=>e("fontSize",c.target.value),className:"w-full text-sm bg-slate-50 border border-slate-200 rounded-lg p-2 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none",children:i.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-400 mb-1 block",children:"Line Height"}),a.jsx("select",{value:n.lineHeight,onChange:c=>e("lineHeight",c.target.value),className:"w-full text-sm bg-slate-50 border border-slate-200 rounded-lg p-2 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none",children:r.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))})]})]})]})]}),a.jsx("hr",{className:"border-slate-100"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-wide",children:[a.jsx(Df,{size:14})," Colors"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-400 mb-1 block",children:"Text Color"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"color",value:n.textColor,onChange:c=>e("textColor",c.target.value),className:"h-8 w-8 rounded cursor-pointer border-0 p-0"}),a.jsx("span",{className:"text-xs font-mono text-slate-500",children:n.textColor})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-400 mb-1 block",children:"Accent Color"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"color",value:n.accentColor,onChange:c=>e("accentColor",c.target.value),className:"h-8 w-8 rounded cursor-pointer border-0 p-0"}),a.jsx("span",{className:"text-xs font-mono text-slate-500",children:n.accentColor})]})]})]})]}),a.jsx("hr",{className:"border-slate-100"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-wide",children:[a.jsx(rN,{size:14})," Layout"]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-400 mb-1 block",children:"Page Margins"}),a.jsx("select",{value:n.pageMargin,onChange:c=>e("pageMargin",c.target.value),className:"w-full text-sm bg-slate-50 border border-slate-200 rounded-lg p-2 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none",children:o.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))})]})]}),a.jsxs("button",{onClick:t,className:"w-full mt-4 flex items-center justify-center gap-2 py-2 text-xs font-medium text-slate-500 hover:text-slate-700 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors border border-slate-200",children:[a.jsx(tx,{size:14})," Reset to Defaults"]})]})},Mv=({isOpen:n,onClose:e,onConfirm:t,title:s,message:i,confirmText:r="Confirm",cancelText:o="Cancel",isDestructive:c=!1,isLoading:u=!1})=>a.jsx(dn,{children:n&&a.jsxs(a.Fragment,{children:[a.jsx(Ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:u?void 0:e,className:"fixed inset-0 bg-black/40 z-50 backdrop-blur-sm"}),a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:a.jsxs(Ie.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},className:"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden",children:[a.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between bg-slate-50/50",children:[a.jsxs("h3",{className:`font-semibold text-lg flex items-center gap-2 ${c?"text-red-600":"text-slate-900"}`,children:[c&&a.jsx(O7,{size:20}),s]}),a.jsx("button",{onClick:e,disabled:u,className:"text-slate-400 hover:text-slate-600 p-1 rounded-lg hover:bg-slate-100 transition-colors disabled:opacity-50",children:a.jsx(bs,{size:20})})]}),a.jsx("div",{className:"p-6",children:a.jsx("p",{className:"text-slate-600 leading-relaxed",children:i})}),a.jsxs("div",{className:"p-4 bg-slate-50 flex items-center justify-end gap-3",children:[a.jsx("button",{onClick:e,disabled:u,className:"px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-800 bg-white border border-slate-200 hover:border-slate-300 rounded-lg shadow-sm transition-all disabled:opacity-50",children:o}),a.jsxs("button",{onClick:t,disabled:u,className:`px-4 py-2 text-sm font-medium text-white rounded-lg shadow-sm transition-all flex items-center gap-2 ${c?"bg-red-600 hover:bg-red-700 focus:ring-2 focus:ring-red-500/20":"bg-indigo-600 hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500/20"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[u&&a.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),r]})]})]})})]})}),tP=({formData:n,onChange:e,docContent:t,onContentChange:s,addSection:i,removeSection:r,updateSection:o,reorderSections:c,styles:u,onStyleUpdate:h,onStyleReset:f})=>{const[g,x]=_.useState("parties"),[y,N]=_.useState("fill"),[j,E]=_.useState({isOpen:!1,sectionId:null}),A=Z=>{x(g===Z?null:Z)},R=n.effectiveDateDay&&n.effectiveDateMonth&&n.effectiveDateYear,M=n.disclosingPartyName&&n.receivingPartyName&&n.disclosingPartyAddress&&n.receivingPartyAddress,L=!!n.purpose,z=n.termYears&&n.survivalYears&&n.jurisdiction&&n.courtCity,W=n.disclosingSignatoryName&&n.disclosingSignatoryDesignation&&n.receivingSignatoryName&&n.receivingSignatoryDesignation,I=Z=>{E({isOpen:!0,sectionId:Z})},Y=()=>{j.sectionId&&(r(j.sectionId),E({isOpen:!1,sectionId:null}))},U=async()=>{try{const Z=await Rr();if(Z){e({target:{name:"disclosingPartyName",value:Z.name||""}});const $=[Z.address,Z.city,Z.state,Z.country].filter(Boolean).join(", ");e({target:{name:"disclosingPartyAddress",value:$||""}}),Te.success("Business details populated")}else Te.error("No business profile found")}catch(Z){console.error("Failed to fetch business info",Z),Te.error("Failed to load business info")}};return a.jsxs("div",{className:"bg-white min-h-full pb-20 relative",children:[a.jsx(Mv,{isOpen:j.isOpen,onClose:()=>E({isOpen:!1,sectionId:null}),onConfirm:Y,title:"Delete Section",message:"Are you sure you want to remove this section? This action cannot be undone and will remove the clause from the generated document.",confirmText:"Delete Section",isDestructive:!0}),a.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 sticky top-0 z-10 backdrop-blur-sm",children:[a.jsxs("div",{className:"flex gap-1 bg-slate-200/50 p-1 rounded-lg mb-4",children:[a.jsx("button",{onClick:()=>N("fill"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${y==="fill"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,title:"Fill Details",children:a.jsx($0,{size:16})}),a.jsx("button",{onClick:()=>N("edit"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${y==="edit"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,title:"Structure Builder",children:a.jsx(ex,{size:16})}),a.jsx("button",{onClick:()=>N("style"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${y==="style"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,title:"Appearance",children:a.jsx(Ol,{size:16})})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-slate-900",children:y==="fill"?"Document Details":y==="edit"?"Structure Builder":"Styling & Appearance"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:y==="fill"?"Review and specify the agreement terms":y==="edit"?"Customize layout and clauses":"Fonts, colors and spacing"})]})]}),y==="fill"&&a.jsxs(a.Fragment,{children:[a.jsx(Pa,{title:"Effective Date",icon:Ld,isOpen:g==="date",isComplete:R,onClick:()=>A("date"),children:a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsx(Yt,{label:"Day",name:"effectiveDateDay",value:n.effectiveDateDay,onChange:e,placeholder:"DD"}),a.jsx(Yt,{label:"Month",name:"effectiveDateMonth",value:n.effectiveDateMonth,onChange:e,placeholder:"Month"}),a.jsx(Yt,{label:"Year",name:"effectiveDateYear",value:n.effectiveDateYear,onChange:e,placeholder:"YY"})]})}),a.jsx(Pa,{title:"Parties Involved",icon:Ai,isOpen:g==="parties",isComplete:M,onClick:()=>A("parties"),children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-3 bg-indigo-50 rounded-lg border border-indigo-100",children:[a.jsxs("h4",{className:"text-xs font-bold text-indigo-900 uppercase mb-3 flex items-center justify-between",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"})," Disclosing Party"]}),a.jsxs("button",{onClick:U,className:"text-[10px] bg-white border border-indigo-200 text-indigo-600 px-2 py-1 rounded hover:bg-indigo-50 transition-colors flex items-center gap-1",title:"Auto-fill with your business profile",children:[a.jsx(Od,{size:10})," Use Profile"]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Yt,{label:"Name / Company",name:"disclosingPartyName",value:n.disclosingPartyName,onChange:e,placeholder:"Ex: Acme Corp"}),a.jsx(Yt,{label:"Full Address",name:"disclosingPartyAddress",value:n.disclosingPartyAddress,onChange:e,placeholder:"Address",rows:2})]})]}),a.jsxs("div",{className:"p-3 bg-emerald-50 rounded-lg border border-emerald-100",children:[a.jsxs("h4",{className:"text-xs font-bold text-emerald-900 uppercase mb-3 flex items-center gap-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"})," Receiving Party"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Yt,{label:"Name / Company",name:"receivingPartyName",value:n.receivingPartyName,onChange:e,placeholder:"Ex: John Doe"}),a.jsx(Yt,{label:"Full Address",name:"receivingPartyAddress",value:n.receivingPartyAddress,onChange:e,placeholder:"Address",rows:2})]})]})]})}),a.jsx(Pa,{title:"Document Branding",icon:Df,isOpen:g==="branding",isComplete:!0,onClick:()=>A("branding"),children:a.jsx(cx,{formData:n,onChange:e})}),a.jsx(Pa,{title:"Purpose Scope",icon:wn,isOpen:g==="purpose",isComplete:L,onClick:()=>A("purpose"),children:a.jsx(Yt,{label:"Description of Purpose",name:"purpose",value:n.purpose,onChange:e,placeholder:"Describe why information is being shared (e.g., potential partnership, investment evaluation)...",rows:6})}),a.jsxs(Pa,{title:"Terms & Jurisdiction",icon:nN,isOpen:g==="terms",isComplete:z,onClick:()=>A("terms"),children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(Yt,{label:"Term (Years)",name:"termYears",value:n.termYears,onChange:e,placeholder:"2"}),a.jsx(Yt,{label:"Survival (Years)",name:"survivalYears",value:n.survivalYears,onChange:e,placeholder:"5"})]}),a.jsx("div",{className:"h-px bg-slate-100 my-2"}),a.jsx(Yt,{label:"Jurisdiction",name:"jurisdiction",value:n.jurisdiction,onChange:e,placeholder:"State/Country (e.g. California)"}),a.jsx(Yt,{label:"Court Location",name:"courtCity",value:n.courtCity,onChange:e,placeholder:"City (e.g. San Francisco)"})]}),a.jsx(Pa,{title:"Signatories",icon:ar,isOpen:g==="signatures",isComplete:W,onClick:()=>A("signatures"),children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-400 mb-2 uppercase",children:"For Disclosing Party"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(Yt,{label:"Name",name:"disclosingSignatoryName",value:n.disclosingSignatoryName,onChange:e,placeholder:"Name"}),a.jsx(Yt,{label:"Title",name:"disclosingSignatoryDesignation",value:n.disclosingSignatoryDesignation,onChange:e,placeholder:"Title"})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-400 mb-2 uppercase",children:"For Receiving Party"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(Yt,{label:"Name",name:"receivingSignatoryName",value:n.receivingSignatoryName,onChange:e,placeholder:"Name"}),a.jsx(Yt,{label:"Title",name:"receivingSignatoryDesignation",value:n.receivingSignatoryDesignation,onChange:e,placeholder:"Title"})]})]})]})})]}),y==="edit"&&a.jsxs("div",{className:"p-4 space-y-6 pb-20",children:[a.jsx(jf,{isFixed:!0,section:{title:"Preamble & Parties"},onUpdate:()=>{},children:a.jsxs("div",{className:"space-y-3 mt-3",children:[a.jsx("textarea",{name:"preamble",value:t.preamble||"",onChange:s,rows:3,className:"w-full text-xs p-3 rounded-lg border border-slate-200 bg-slate-50 focus:bg-white focus:border-indigo-300 focus:ring-4 focus:ring-indigo-500/10 outline-none transition-all resize-y placeholder-slate-400",placeholder:"Preamble..."}),a.jsxs("div",{className:"grid gap-3",children:[a.jsx("textarea",{name:"partiesDisclosing",value:t.partiesDisclosing||"",onChange:s,rows:2,className:"w-full text-xs p-3 rounded-lg border border-slate-200 bg-slate-50 focus:bg-white focus:border-indigo-300 focus:ring-4 focus:ring-indigo-500/10 outline-none transition-all resize-y placeholder-slate-400",placeholder:"Disclosing Party Clause..."}),a.jsx("textarea",{name:"partiesReceiving",value:t.partiesReceiving||"",onChange:s,rows:2,className:"w-full text-xs p-3 rounded-lg border border-slate-200 bg-slate-50 focus:bg-white focus:border-indigo-300 focus:ring-4 focus:ring-indigo-500/10 outline-none transition-all resize-y placeholder-slate-400",placeholder:"Receiving Party Clause..."})]})]})}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-[7px] top-[-24px] bottom-0 w-[2px] bg-slate-100"}),a.jsx("p",{className:"font-bold text-[10px] uppercase tracking-widest text-slate-400 pl-8 mb-4",children:"Structure"}),a.jsx(dv,{axis:"y",values:t.sections,onReorder:c,className:"space-y-0",children:t.sections.map(Z=>a.jsx(uv,{value:Z,className:"relative mb-2",children:a.jsx(jf,{section:Z,onUpdate:($,ae)=>o(Z.id,$,ae),onRemove:()=>I(Z.id),placeholderTitle:"Section Title",placeholderContent:"Section clauses..."})},Z.id))}),a.jsx(Dv,{onClick:i})]})]}),y==="style"&&a.jsx("div",{className:"p-4 pb-20",children:a.jsx(Rv,{styles:u,onUpdate:h,onReset:f})})]})},nP=({style:n,data:e,isSelected:t,isDragging:s,onEdit:i,onDelete:r,listeners:o,attributes:c,setNodeRef:u,readOnly:h=!1})=>{const f=()=>{switch(e.fieldType){case"date":return{icon:Ld,label:"Date"};case"text":return{icon:Ol,label:"Text"};case"initials":return{icon:Ai,label:"Initials"};case"checkbox":return{icon:wf,label:"Check"};default:return{icon:ar,label:"Signature"}}},{icon:g,label:x}=f();return a.jsxs("div",{ref:u,style:n,className:`
                group flex items-center gap-2 bg-white/95 backdrop-blur-md 
                border shadow-sm transition-all duration-200 py-1.5 px-3 rounded-full
                ${t&&!h?"border-indigo-500 shadow-indigo-100 ring-2 ring-indigo-500/20":"border-slate-300"}
                ${h?"cursor-default":"hover:border-indigo-400 hover:shadow-md cursor-grab"}
                ${s?"opacity-50 cursor-grabbing":""}
                w-auto min-w-[120px] max-w-[240px] select-none
            `,...o,...c,onClick:y=>{h||(y.preventDefault(),y.stopPropagation(),i&&i())},children:[!h&&a.jsx("div",{className:`text-slate-400 ${t?"text-indigo-400":""}`,children:a.jsx(fv,{size:14})}),a.jsx("div",{className:`text-slate-400 ${t?"text-indigo-500":""}`,children:a.jsx(g,{size:14})}),a.jsxs("div",{className:"flex flex-col leading-none",children:[a.jsx("span",{className:`text-[10px] uppercase font-bold tracking-wider ${t&&!h?"text-indigo-600":"text-slate-500"}`,children:x}),a.jsx("span",{className:`text-xs font-semibold truncate select-none ${t&&!h?"text-indigo-700":"text-slate-700"}`,children:e.signeeName||"Signer"})]}),!h&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-px h-3 bg-slate-200 mx-0.5"}),a.jsxs("div",{className:"flex items-center gap-0.5 relative z-20",children:[a.jsx("button",{onPointerDown:y=>y.stopPropagation(),onMouseDown:y=>y.stopPropagation(),onTouchStart:y=>y.stopPropagation(),onClick:y=>{y.stopPropagation(),y.preventDefault(),i&&i()},className:"p-1 hover:bg-slate-100 rounded-full text-slate-400 hover:text-indigo-600 transition-colors cursor-pointer",children:a.jsx(oN,{size:12})}),a.jsx("button",{onPointerDown:y=>y.stopPropagation(),onMouseDown:y=>y.stopPropagation(),onTouchStart:y=>y.stopPropagation(),onClick:y=>{y.stopPropagation(),y.preventDefault(),r&&r()},className:"p-1 hover:bg-slate-100 rounded-full text-slate-400 hover:text-red-500 transition-colors cursor-pointer",children:a.jsx(Ki,{size:12})})]})]}),e.order&&a.jsx("div",{className:"absolute -top-1.5 -right-1.5 w-4 h-4 bg-indigo-600 text-white text-[9px] font-bold flex items-center justify-center rounded-full shadow-sm border border-white z-10 pointer-events-none",children:e.order})]})},sP=({id:n,data:e,left:t,top:s,onEdit:i,onDelete:r,isSelected:o,readOnly:c=!1})=>{const{attributes:u,listeners:h,setNodeRef:f,transform:g,isDragging:x}=kv({id:n,data:{...e,type:"signature-field",id:n},disabled:c}),y={transform:Oc.Translate.toString(g),left:`${t}%`,top:`${s}%`,position:"absolute",zIndex:x?999:o?50:10,touchAction:"none"};return a.jsx(nP,{style:y,data:e,isSelected:o,isDragging:x,onEdit:i,onDelete:r,listeners:h,attributes:u,setNodeRef:f,readOnly:c})},iP=({signatures:n,onUpdateSignature:e,onRemoveSignature:t,onEditSignature:s})=>{const{setNodeRef:i}=MN({id:"document-canvas"});return a.jsx("div",{ref:i,className:"absolute inset-0 z-20 pointer-events-none",children:n.map(r=>a.jsx("div",{className:"pointer-events-auto",children:a.jsx(sP,{id:r.id,data:r.metadata,left:r.position.x,top:r.position.y,onEdit:()=>s(r),onDelete:()=>t(r.id)})},r.id))})};function By({data:n,content:e,zoom:t=1,printing:s=!1,readOnly:i=!1,signatures:r=[],onUpdateSignature:o,onRemoveSignature:c,onEditSignature:u,businessLogo:h,styles:f}){const g=A=>{if(!A)return"bg-slate-100 text-slate-600 border-slate-200";const R=["bg-indigo-50 text-indigo-700 border-indigo-200","bg-emerald-50 text-emerald-700 border-emerald-200","bg-amber-50 text-amber-700 border-amber-200","bg-rose-50 text-rose-700 border-rose-200","bg-violet-50 text-violet-700 border-violet-200","bg-sky-50 text-sky-700 border-sky-200"];let M=0;for(let L=0;L<A.length;L++)M=A.charCodeAt(L)+((M<<5)-M);return R[Math.abs(M)%R.length]},x=({value:A,placeholder:R,name:M,className:L=""})=>{const z=g(M);return A?i||s?a.jsx("span",{className:`font-medium text-slate-900 ${L}`,children:A}):a.jsx("span",{className:`px-1.5 py-0.5 rounded border ${z} font-medium mx-0.5 transition-all hover:brightness-95 ${L}`,children:A}):i||s?a.jsx("span",{className:`text-slate-500 italic ${L}`,children:R}):a.jsx("span",{className:`px-1.5 py-0.5 rounded border border-dashed ${z} bg-opacity-50 font-medium text-xs mx-0.5 ${L}`,children:R})},y=({template:A,values:R})=>{if(!A)return null;const M=A.split(/(\{\{[^}]+\}\})/g);return a.jsx("span",{children:M.map((L,z)=>{if(L.startsWith("{{")&&L.endsWith("}}")){const W=L.slice(2,-2).trim();return a.jsx(x,{value:R[W],name:W,placeholder:`[${W}]`},z)}return a.jsx("span",{children:L},z)})})},N=f||{fontFamily:"font-serif",fontSize:"text-[11pt]",lineHeight:"leading-relaxed",textColor:"#1e293b",pageMargin:"p-[25mm]"},j=s?"div":Ie.div,E=s?"div":Ie.section;return a.jsxs(j,{id:"printable-document",...s?{}:{initial:{opacity:0,y:20},animate:{opacity:1,y:0}},style:{transform:s?"none":`scale(${t})`,transformOrigin:"top center",color:N.textColor},className:`w-[210mm] min-h-[297mm] bg-white relative mb-20 origin-top 
                ${s?"":"shadow-[0_8px_30px_rgb(0,0,0,0.12)] border border-slate-200/60"}
                ${N.fontFamily} ${N.fontSize} ${N.lineHeight} ${N.pageMargin}
            `,children:[!s&&a.jsx("div",{className:"no-print absolute inset-0 rounded-sm pointer-events-none bg-gradient-to-b from-white to-slate-50/20"}),!s&&!i&&a.jsx(iP,{signatures:r,onUpdateSignature:o,onRemoveSignature:c,onEditSignature:u}),(s||i)&&r.length>0&&a.jsx("div",{className:"absolute inset-0 z-50 pointer-events-none",children:r.map(A=>a.jsxs("div",{style:{position:"absolute",left:`${A.position.x}px`,top:`${A.position.y}px`,width:"200px",height:"60px",borderBottom:"1px solid #000",display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:[a.jsx("div",{style:{fontFamily:"cursive",fontSize:"14pt",color:"#1e3a8a",marginBottom:"4px"},children:A.metadata.signeeName||"Sign Here"}),a.jsx("div",{style:{fontSize:"8pt",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:A.metadata.type==="date"?"Date":"Authorized Signature"}),A.metadata.signeeEmail&&a.jsx("div",{style:{fontSize:"7pt",color:"#94a3b8",position:"absolute",bottom:"-14px",left:"0"},children:A.metadata.signeeEmail})]},A.id))}),a.jsxs("div",{className:"p-[10mm] relative z-10",children:[h&&n.brandingEnabled!==!1&&n.brandingEnabled!=="false"&&a.jsx("div",{className:`flex mb-8 ${n.logoAlignment==="left"?"justify-start":n.logoAlignment==="right"?"justify-end":"justify-center"}`,style:s?{textAlign:n.logoAlignment||"center"}:{},children:a.jsx("img",{src:h,alt:"Company Logo",style:{height:`${n.logoSize||70}px`,objectFit:"contain"}})}),a.jsx("h1",{className:"text-xl font-bold text-center mb-10 uppercase tracking-widest border-b-2 border-slate-900 pb-2",children:e.title}),a.jsx("p",{className:"mb-6 text-justify",children:a.jsx(y,{template:e.preamble,values:n})}),a.jsxs("div",{className:"mb-8 pl-4 border-l-4 border-slate-100",children:[a.jsx("p",{className:"font-bold text-xs uppercase text-slate-400 mb-1",children:"BY AND BETWEEN"}),a.jsx("p",{className:"mb-4 text-justify",children:a.jsx(y,{template:e.partiesDisclosing,values:n})}),a.jsx("p",{className:"font-bold text-xs uppercase text-slate-400 mb-1",children:"AND"}),a.jsx("p",{className:"mb-2 text-justify",children:a.jsx(y,{template:e.partiesReceiving,values:n})})]}),a.jsx("p",{className:"text-justify mb-8",children:a.jsx(y,{template:e.partiesFooter,values:n})}),a.jsx("div",{className:"space-y-6 min-h-[100px]",children:a.jsx(dn,{mode:"popLayout",children:e.sections&&e.sections.map((A,R)=>a.jsxs(E,{...s?{}:{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95}},children:[a.jsxs("h2",{className:"font-bold text-sm uppercase mb-2",children:[R+1,". ",A.title]}),a.jsx("p",{className:"text-justify",children:a.jsx(y,{template:A.content,values:n})})]},A.id))})}),a.jsxs("div",{className:"mt-12 break-inside-avoid",children:[a.jsxs("h2",{className:"font-bold text-sm uppercase mb-6 border-b border-slate-900 pb-1",children:[e.sections.length+1,". Signatures"]}),a.jsx("p",{className:"mb-8",children:"IN WITNESS WHEREOF, the Parties have executed this Agreement as of the date first written above."}),s?a.jsx("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"20px"},children:a.jsx("tbody",{children:a.jsxs("tr",{children:[a.jsxs("td",{style:{width:"48%",verticalAlign:"top",paddingRight:"2%"},children:[a.jsx("p",{className:"font-bold uppercase text-xs tracking-wider mb-8",children:"For Disclosing Party"}),a.jsx("div",{className:"relative border-b border-slate-800 h-8 mb-2",style:{borderBottom:"1px solid #000",height:"40px",marginBottom:"10px"},children:n.disclosingSignatoryName&&a.jsx("span",{style:{fontFamily:"cursive",fontSize:"16pt",color:"#1e3a8a"},children:n.disclosingSignatoryName})}),a.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Authorized Signature"}),a.jsx("table",{style:{width:"100%",marginTop:"15px"},children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{style:{width:"60px",fontWeight:"bold",fontSize:"10pt"},children:"Name:"}),a.jsx("td",{style:{borderBottom:"1px solid #ccc"},children:n.disclosingSignatoryName})]}),a.jsxs("tr",{children:[a.jsx("td",{style:{paddingBottom:"5px"}}),a.jsx("td",{})]}),a.jsxs("tr",{children:[a.jsx("td",{style:{width:"60px",fontWeight:"bold",fontSize:"10pt"},children:"Title:"}),a.jsx("td",{style:{borderBottom:"1px solid #ccc"},children:n.disclosingSignatoryDesignation})]})]})})]}),a.jsx("td",{style:{width:"4%"}}),a.jsxs("td",{style:{width:"48%",verticalAlign:"top"},children:[a.jsx("p",{className:"font-bold uppercase text-xs tracking-wider mb-8",children:"For Receiving Party"}),a.jsx("div",{className:"relative border-b border-slate-800 h-8 mb-2",style:{borderBottom:"1px solid #000",height:"40px",marginBottom:"10px"},children:n.receivingSignatoryName&&a.jsx("span",{style:{fontFamily:"cursive",fontSize:"16pt",color:"#1e3a8a"},children:n.receivingSignatoryName})}),a.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Authorized Signature"}),a.jsx("table",{style:{width:"100%",marginTop:"15px"},children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{style:{width:"60px",fontWeight:"bold",fontSize:"10pt"},children:"Name:"}),a.jsx("td",{style:{borderBottom:"1px solid #ccc"},children:n.receivingSignatoryName})]}),a.jsxs("tr",{children:[a.jsx("td",{style:{paddingBottom:"5px"}}),a.jsx("td",{})]}),a.jsxs("tr",{children:[a.jsx("td",{style:{width:"60px",fontWeight:"bold",fontSize:"10pt"},children:"Title:"}),a.jsx("td",{style:{borderBottom:"1px solid #ccc"},children:n.receivingSignatoryDesignation})]})]})})]})]})})}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-16",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"font-bold uppercase text-xs tracking-wider mb-8",children:"For Disclosing Party"}),a.jsx("div",{className:"relative border-b border-slate-800 h-8 mb-2",children:n.disclosingSignatoryName&&a.jsx("span",{className:"absolute bottom-1 left-2 font-cursive text-xl text-blue-900 opacity-80 rotate-[-2deg]",children:n.disclosingSignatoryName})}),a.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Authorized Signature"}),a.jsxs("div",{className:"pt-4 grid grid-cols-[80px_1fr] gap-x-2 gap-y-1 items-baseline",children:[a.jsx("span",{className:"text-sm font-medium",children:"Name:"}),a.jsx("span",{className:"border-b border-slate-300 w-full inline-block h-5 pl-1",children:n.disclosingSignatoryName}),a.jsx("span",{className:"text-sm font-medium",children:"Title:"}),a.jsx("span",{className:"border-b border-slate-300 w-full inline-block h-5 pl-1",children:n.disclosingSignatoryDesignation})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"font-bold uppercase text-xs tracking-wider mb-8",children:"For Receiving Party"}),a.jsx("div",{className:"relative border-b border-slate-800 h-8 mb-2",children:n.receivingSignatoryName&&a.jsx("span",{className:"absolute bottom-1 left-2 font-cursive text-xl text-blue-900 opacity-80 rotate-[-2deg]",children:n.receivingSignatoryName})}),a.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Authorized Signature"}),a.jsxs("div",{className:"pt-4 grid grid-cols-[80px_1fr] gap-x-2 gap-y-1 items-baseline",children:[a.jsx("span",{className:"text-sm font-medium",children:"Name:"}),a.jsx("span",{className:"border-b border-slate-300 w-full inline-block h-5 pl-1",children:n.receivingSignatoryName}),a.jsx("span",{className:"text-sm font-medium",children:"Title:"}),a.jsx("span",{className:"border-b border-slate-300 w-full inline-block h-5 pl-1",children:n.receivingSignatoryDesignation})]})]})]})]}),!s&&a.jsx("div",{className:"absolute bottom-4 left-0 right-0 text-center",children:a.jsx("p",{className:"text-[9px] text-slate-300 uppercase tracking-widest font-sans",children:"Powered by DocForge"})})]})]})}const yg=async n=>(await wt.get(`/documents/${n}`)).data,dx=async n=>(await wt.post("/documents",n)).data,vg=async(n,e)=>(await wt.put(`/documents/${n}`,e)).data,_Q=async(n,e)=>(await wt.post(`/documents/${n}/generate-pdf`,{html_content:e})).data,TQ=async()=>(await wt.get("/documents/next-invoice-number")).data,kQ=async(n,e,t,s)=>(await wt.post(`/documents/${n}/send`,{email:e,message:t,html_content:s})).data,DQ=async(n,e,t)=>(await wt.post(`/documents/${n}/remind`,{email:e,message:t})).data,RQ=async n=>await wt.get(`/documents/${n}/versions`),MQ=async(n,e)=>await wt.post(`/documents/${n}/restore/${e}`),aP=async n=>(await wt.get(`/documents/${n}/shares`)).data,ux=({documentId:n,isOpen:e,onClose:t,onRestore:s,onPreview:i,onDownload:r})=>{const[o,c]=_.useState([]),[u,h]=_.useState(!1),[f,g]=_.useState({isOpen:!1,version:null}),[x,y]=_.useState(!1);_.useEffect(()=>{e&&n&&N()},[e,n]);const N=async()=>{try{h(!0);const[A,R]=await Promise.allSettled([RQ(n),aP(n)]),M=A.status==="fulfilled"?A.value.data.data:[],L=R.status==="fulfilled"?R.value.data:[],z=M.map(Y=>({id:Y.id,type:"version",version_number:Y.version_number,created_at:Y.created_at,created_by:Y.created_by,data:Y})),W=L.map(Y=>({id:Y.id,type:"share",email:Y.email,permission:Y.permission,created_at:Y.created_at,created_by:Y.created_by||"You",data:Y})),I=[...z,...W].sort((Y,U)=>new Date(U.created_at)-new Date(Y.created_at));c(I)}catch(A){console.error("Failed to load history",A),Te.error("Failed to load history.")}finally{h(!1)}},j=A=>{g({isOpen:!0,version:A})},E=async()=>{const{version:A}=f;if(A)try{y(!0);const R=await MQ(n,A.id);Te.success(`Restored to Version ${A.version_number}`),s&&s(R.data.data),g({isOpen:!1,version:null}),t()}catch(R){console.error("Failed to restore version",R),Te.error("Failed to restore version.")}finally{y(!1)}};return a.jsx(dn,{children:e&&a.jsxs(a.Fragment,{children:[a.jsx(Ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"fixed inset-0 bg-black/20 z-40 backdrop-blur-sm"}),a.jsxs(Ie.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed right-0 top-0 bottom-0 w-80 bg-white shadow-2xl z-50 border-l border-slate-200 flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between bg-slate-50",children:[a.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[a.jsx(la,{size:16})," Activity & History"]}),a.jsx("button",{onClick:t,className:"p-1 hover:bg-slate-200 rounded text-slate-500",children:a.jsx(bs,{size:20})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:u?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx(Sn,{className:"animate-spin text-indigo-600"})}):o.length===0?a.jsx("p",{className:"text-center text-slate-500 text-sm py-8",children:"No history available yet."}):o.map((A,R)=>{if(A.type==="version"){const M=A.data;return a.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-slate-100 last:border-0 last:pb-0",children:[a.jsx("div",{className:"absolute -left-[9px] top-0 w-4 h-4 rounded-full border-2 border-white bg-slate-200 shadow-sm flex items-center justify-center",children:a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-400"})}),a.jsxs("div",{className:"text-sm",children:[a.jsxs("div",{className:"flex justify-between items-start mb-1",children:[a.jsxs("span",{className:"font-semibold text-slate-700",children:["Version ",M.version_number]}),a.jsx("span",{className:"text-xs text-slate-400",children:new Date(M.created_at).toLocaleDateString()})]}),a.jsxs("p",{className:"text-xs text-slate-500 mb-2",children:["Saved by ",M.created_by," ",a.jsx("br",{}),new Date(M.created_at).toLocaleTimeString()]}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsxs("button",{onClick:()=>i&&i(M),className:"px-2 py-1 text-xs font-medium bg-indigo-50 text-indigo-700 rounded hover:bg-indigo-100 transition-colors flex items-center gap-1",children:[a.jsx(_r,{size:12})," Preview"]}),a.jsxs("button",{onClick:()=>r&&r(M),className:"px-2 py-1 text-xs font-medium bg-slate-100 text-slate-700 rounded hover:bg-slate-200 transition-colors flex items-center gap-1",children:[a.jsx(Yi,{size:12})," PDF"]}),a.jsxs("button",{onClick:()=>j(M),className:"px-2 py-1 text-xs font-medium bg-amber-50 text-amber-700 rounded hover:bg-amber-100 transition-colors flex items-center gap-1 ml-auto",children:[a.jsx(qU,{size:12})," Restore"]})]})]})]},`v-${M.id}`)}else{const M=A.data;return a.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-slate-100 last:border-0 last:pb-0",children:[a.jsx("div",{className:"absolute -left-[9px] top-0 w-4 h-4 rounded-full border-2 border-white bg-blue-100 shadow-sm flex items-center justify-center",children:a.jsx(_5,{size:10,className:"text-blue-600"})}),a.jsxs("div",{className:"text-sm",children:[a.jsxs("div",{className:"flex justify-between items-start mb-1",children:[a.jsx("span",{className:"font-semibold text-blue-700 flex items-center gap-1",children:"Document Shared"}),a.jsx("span",{className:"text-xs text-slate-400",children:new Date(M.created_at).toLocaleDateString()})]}),a.jsxs("div",{className:"text-xs text-slate-600 bg-slate-50 p-2 rounded border border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(Js,{size:12,className:"text-slate-400"}),a.jsx("span",{className:"font-medium text-slate-800",children:M.email})]}),a.jsxs("p",{className:"text-slate-400",children:["Shared by ",M.created_by||"You"]})]})]})]},`s-${M.id}`)}})})]}),a.jsx(Mv,{isOpen:f.isOpen,onClose:()=>g({isOpen:!1,version:null}),onConfirm:E,title:"Restore Version",message:`Are you sure you want to restore Version ${f.version?.version_number}? Current changes will be replaced by this version.`,confirmText:"Restore Version",isLoading:x})]})})},hx=({isOpen:n,onClose:e,documentId:t,documentName:s,isReminder:i=!1,onSuccess:r,getHtmlContent:o,signatures:c=[]})=>{const[u,h]=_.useState([]),[f,g]=_.useState([]),[x,y]=_.useState(""),[N,j]=_.useState(""),[E,A]=_.useState("idle"),[R,M]=_.useState({current:0,total:0}),[L,z]=_.useState([]);if(ht.useEffect(()=>{if(n&&c.length>0){const Z=[],$=new Set;c.forEach(ae=>{const xe=ae.metadata?.signeeEmail||"",fe=ae.metadata?.signeeName||"Unknown Signer",ke=`${xe}-${fe}`;$.has(ke)||($.add(ke),Z.push({id:ae.id,name:fe,email:xe,role:"signer",isValid:!!xe}))}),h(Z)}else n&&c.length===0&&h([])},[n,c]),!n)return null;const W=Z=>{Z.preventDefault(),x&&/^\S+@\S+\.\S+$/.test(x)&&(g([...f,{email:x,role:"viewer"}]),y(""))},I=Z=>{g(f.filter(($,ae)=>ae!==Z))},Y=(Z,$)=>{const ae=[...u];ae[Z].email=$,ae[Z].isValid=/^\S+@\S+\.\S+$/.test($),h(ae)},U=async()=>{A("sending"),z([]);const Z=[...u.filter(xe=>xe.isValid).map(xe=>({email:xe.email,type:"signer"})),...f.map(xe=>({email:xe.email,type:"viewer"}))];if(Z.length===0){A("error"),z(["No valid recipients found. Please add an email."]);return}M({current:0,total:Z.length});let $=0;const ae=[];try{let xe=null;o&&(xe=await o());for(let fe=0;fe<Z.length;fe++){const ke=Z[fe];try{i?await DQ(t,ke.email,N):await kQ(t,ke.email,N,xe),$++}catch(G){console.error(`Failed to send to ${ke.email}`,G),ae.push(`Failed to send to ${ke.email}: ${G.message}`)}M(G=>({...G,current:fe+1}))}$===Z.length?(A("success"),r&&r({sent_at:new Date().toISOString()}),setTimeout(()=>{e(),A("idle"),j(""),h([]),g([])},2e3)):(A("error"),z(ae.length>0?ae:["Some emails failed to send."]))}catch(xe){console.error("Critical Failure",xe),A("error"),z(["A critical error occurred. Please try again."])}};return a.jsx(dn,{children:n&&a.jsx(Ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs(Ie.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-xl shadow-xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50 flex-shrink-0",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[i?a.jsx(Pl,{size:20,className:"text-amber-500"}):a.jsx(Js,{size:20,className:"text-indigo-600"}),i?"Send Reminder":"Send Document"]}),a.jsx("p",{className:"text-xs text-slate-500",children:i?`Follow up on "${s}"`:"Review signatures and send to recipients"})]}),a.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 p-1 hover:bg-slate-100 rounded-full transition-colors",children:a.jsx(bs,{size:20})})]}),a.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:E==="success"?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Ie.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},className:"w-16 h-16 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(us,{size:32})}),a.jsx("h4",{className:"font-bold text-slate-800 text-lg mb-2",children:"Sent Successfully!"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"All recipients have been notified."})]}):a.jsxs("div",{className:"space-y-6",children:[u.length>0&&a.jsxs("div",{children:[a.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),"Signers (Detected)"]}),a.jsx("div",{className:"space-y-3",children:u.map((Z,$)=>a.jsxs("div",{className:"flex items-center gap-3 bg-indigo-50/50 p-3 rounded-lg border border-indigo-100",children:[a.jsxs("div",{className:"w-8 h-8 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center text-xs font-bold shrink-0",children:["S",$+1]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-semibold text-slate-700 truncate",children:Z.name}),a.jsx("input",{type:"email",value:Z.email,onChange:ae=>Y($,ae.target.value),placeholder:"Enter signer email...",className:`mt-1 w-full text-xs px-2 py-1 bg-white border rounded focus:ring-1 focus:ring-indigo-500 outline-none ${Z.isValid?"border-slate-200 text-slate-600":"border-red-300 text-red-600"}`})]}),a.jsx("div",{className:"text-[10px] font-bold text-indigo-500 bg-indigo-100 px-2 py-1 rounded",children:"REQ"})]},$))})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-400"}),"CC / Viewers"]}),a.jsxs("div",{className:"space-y-3",children:[f.map((Z,$)=>a.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 p-2 rounded-lg border border-slate-200",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 text-slate-500 flex items-center justify-center text-xs font-bold shrink-0",children:"CC"}),a.jsx("div",{className:"flex-1 text-sm text-slate-600 truncate",children:Z.email}),a.jsx("button",{onClick:()=>I($),className:"text-slate-400 hover:text-red-500 p-1",children:a.jsx(bs,{size:14})})]},$)),a.jsxs("form",{onSubmit:W,className:"flex gap-2",children:[a.jsx("input",{type:"email",value:x,onChange:Z=>y(Z.target.value),placeholder:"Add a viewer (e.g. hr@company.com)",className:"flex-1 px-3 py-2 text-sm border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200 outline-none"}),a.jsx("button",{type:"submit",disabled:!x,className:"px-3 py-2 bg-slate-100 text-slate-600 font-medium rounded-lg text-sm hover:bg-slate-200 disabled:opacity-50",children:"Add"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Custom Message"}),a.jsx("textarea",{value:N,onChange:Z=>j(Z.target.value),rows:2,className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none resize-none",placeholder:i?"Checking in...":"Please review and sign..."})]}),L.length>0&&a.jsx("div",{className:"p-3 bg-red-50 text-red-600 text-sm rounded-lg",children:L.map((Z,$)=>a.jsxs("div",{className:"flex gap-2",children:[a.jsx(wa,{size:14,className:"mt-1 shrink-0"})," ",Z]},$))})]})}),E!=="success"&&a.jsx("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50 flex-shrink-0",children:a.jsx("button",{onClick:U,disabled:E==="sending"||u.length===0&&f.length===0,className:`w-full py-3 font-semibold rounded-lg shadow-md hover:shadow-lg transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed ${i?"bg-amber-500 hover:bg-amber-600 text-white":"bg-indigo-600 hover:bg-indigo-700 text-white"}`,children:E==="sending"?a.jsxs(a.Fragment,{children:[a.jsx(Sn,{size:18,className:"animate-spin"}),"Sending (",R.current,"/",R.total,")..."]}):a.jsxs(a.Fragment,{children:[i?a.jsx(Pl,{size:18}):a.jsx(Pm,{size:18}),i?"Send Reminders":"Send to All Recipients"]})})})]})})})},wg=({isOpen:n,onClose:e,onSave:t,initialData:s,parties:i})=>{const[r,o]=_.useState({id:null,signeeName:"",signeeEmail:"",type:"all",required:!0,order:1,placeholder:"",label:""});_.useEffect(()=>{n&&s&&o({id:s.id,signeeName:s.signeeName||"",signeeEmail:s.signeeEmail||"",type:s.type||"all",required:s.required??!0,order:s.order||1,placeholder:s.placeholder||"",label:s.label||"",fieldType:s.fieldType||"signature"})},[n,s]);const c=()=>{t(r),e()},u=h=>{i&&(h==="disclosing"?o(f=>({...f,signeeName:i.disclosingSignatoryName||i.disclosingPartyName||""})):h==="receiving"&&o(f=>({...f,signeeName:i.receivingSignatoryName||i.receivingPartyName||""})))};return a.jsx(dn,{children:n&&a.jsxs(a.Fragment,{children:[a.jsx(Ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 bg-black/40 z-[60] backdrop-blur-sm"}),a.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 pointer-events-none",children:a.jsxs(Ie.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},className:"bg-white rounded-xl shadow-2xl w-full max-w-md pointer-events-auto flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between bg-slate-50/50 rounded-t-xl",children:[a.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[a.jsx(vf,{size:18,className:"text-indigo-600"}),"Configure Signature"]}),a.jsx("button",{onClick:e,className:"p-1 hover:bg-slate-200 rounded text-slate-500",children:a.jsx(bs,{size:20})})]}),a.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto",children:[i&&a.jsxs("div",{className:"flex gap-2 p-1 bg-slate-100 rounded-lg",children:[a.jsx("button",{onClick:()=>u("disclosing"),className:"flex-1 text-xs font-medium py-1.5 px-3 rounded text-slate-600 hover:bg-white hover:shadow-sm hover:text-indigo-600 transition-all text-center",children:"Disclosing Party"}),a.jsx("button",{onClick:()=>u("receiving"),className:"flex-1 text-xs font-medium py-1.5 px-3 rounded text-slate-600 hover:bg-white hover:shadow-sm hover:text-indigo-600 transition-all text-center",children:"Receiving Party"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Signee Name"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ai,{className:"absolute left-3 top-2.5 text-slate-400",size:16}),a.jsx("input",{type:"text",value:r.signeeName,onChange:h=>o({...r,signeeName:h.target.value}),className:"w-full pl-9 pr-3 py-2 text-sm border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all",placeholder:"e.g. John Doe"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Signee Email"}),a.jsx("input",{type:"email",value:r.signeeEmail,onChange:h=>o({...r,signeeEmail:h.target.value}),className:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all",placeholder:"john@example.com"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Signing Order"}),a.jsx("input",{type:"number",min:"1",value:r.order,onChange:h=>o({...r,order:parseInt(h.target.value)||1}),className:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Required?"}),a.jsxs("button",{onClick:()=>o({...r,required:!r.required}),className:`w-full py-2 px-3 rounded-lg border text-sm font-medium flex items-center justify-center gap-2 transition-all ${r.required?"bg-emerald-50 border-emerald-200 text-emerald-700":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:[r.required?a.jsx(fi,{size:16}):a.jsx("span",{className:"w-4 h-4 block border rounded-sm border-slate-300"}),r.required?"Required":"Optional"]})]})]}),r.fieldType==="text"&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Field Label"}),a.jsx("input",{type:"text",value:r.label,onChange:h=>o({...r,label:h.target.value}),className:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500",placeholder:"e.g. Full Address"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Placeholder Text"}),a.jsx("input",{type:"text",value:r.placeholder,onChange:h=>o({...r,placeholder:h.target.value}),className:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500",placeholder:"e.g. 123 Main St..."})]})]}),(!r.fieldType||r.fieldType==="signature")&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 flex items-center gap-2",children:[a.jsx(Tr,{size:14,className:"text-slate-400"}),"Allowed Signature Types"]}),a.jsxs("select",{value:r.type,onChange:h=>o({...r,type:h.target.value}),className:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none bg-white",children:[a.jsx("option",{value:"all",children:"Any (Draw, Type, Upload)"}),a.jsx("option",{value:"draw",children:"Draw Only"}),a.jsx("option",{value:"text",children:"Type Only"}),a.jsx("option",{value:"upload",children:"Upload Only"})]})]})]}),a.jsxs("div",{className:"p-4 border-t border-slate-100 bg-slate-50/50 flex justify-end gap-3 rounded-b-xl",children:[a.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-800 bg-white border border-slate-200 rounded-lg hover:border-slate-300 transition-all",children:"Cancel"}),a.jsx("button",{onClick:c,className:"px-6 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg shadow-sm shadow-indigo-200 transition-all transform active:scale-95",children:"Save Signature"})]})]})})]})})},PQ={title:"Non-Disclosure Agreement",preamble:"This Non-Disclosure Agreement (Agreement) is made and entered into on this {{effectiveDateDay}} day of {{effectiveDateMonth}}, 20{{effectiveDateYear}} (Effective Date),",partiesDisclosing:'{{disclosingPartyName}}, a company/individual having its registered office/address at {{disclosingPartyAddress}} (hereinafter referred to as the "Disclosing Party"),',partiesReceiving:'{{receivingPartyName}}, a company/individual having its registered office/address at {{receivingPartyAddress}} (hereinafter referred to as the "Receiving Party").',partiesFooter:'The Disclosing Party and the Receiving Party may hereinafter be collectively referred to as the "Parties" and individually as a "Party".',sections:[{id:"1",title:"Purpose",content:"The Disclosing Party intends to disclose certain confidential and proprietary information to the Receiving Party for the purpose of {{purpose}} (Purpose)."},{id:"2",title:"Definition of Confidential Information",content:'For the purposes of this Agreement, "Confidential Information" shall mean any information disclosed by the Disclosing Party to the Receiving Party, whether orally, in writing, electronically, visually, or in any other form, including but not limited to business plans, strategies, financial information, and technical data.'},{id:"3",title:"Exclusions from Confidential Information",content:"Confidential Information shall not include information that is publicly available, lawfully known to the Receiving Party prior to disclosure, or independently developed by the Receiving Party."},{id:"4",title:"Obligations of the Receiving Party",content:"The Receiving Party agrees to keep all Confidential Information strictly confidential, use it solely for the Purpose, and not disclose it to any third party without prior written consent."},{id:"5",title:"Disclosure",content:"The Receiving Party may disclose Confidential Information only to its employees, agents, or representatives who have a legitimate need to know for the Purpose and are bound by confidentiality obligations."},{id:"6",title:"No License",content:"Nothing in this Agreement shall be construed as granting any rights, licenses, or ownership in the Confidential Information, except for the limited right to use it for the Purpose."},{id:"7",title:"Term and Survival",content:"This Agreement shall commence on the Effective Date and remain in effect for a period of {{termYears}} years. The confidentiality obligations shall survive the termination for a period of {{survivalYears}} years thereafter."},{id:"8",title:"Return of Information",content:"Upon termination of this Agreement or upon written request by the Disclosing Party, the Receiving Party shall promptly return or destroy all Confidential Information."},{id:"9",title:"Remedies",content:"The Receiving Party acknowledges that unauthorized disclosure or misuse of Confidential Information may cause irreparable harm. The Disclosing Party shall be entitled to seek injunctive relief."},{id:"10",title:"Governing Law",content:"This Agreement shall be governed by and construed in accordance with the laws of {{jurisdiction}}, and the courts of {{courtCity}} shall have exclusive jurisdiction."},{id:"11",title:"Miscellaneous",content:"This Agreement constitutes the entire understanding between the Parties. Any amendment must be in writing. Failure to enforce any provision shall not constitute a waiver."}]},OQ={effectiveDateDay:"",effectiveDateMonth:"",effectiveDateYear:"",logoSize:70,logoAlignment:"center",brandingEnabled:!0,disclosingPartyName:"",disclosingPartyAddress:"",receivingPartyName:"",receivingPartyAddress:"",purpose:"",termYears:"",survivalYears:"",jurisdiction:"",courtCity:"",disclosingSignatoryName:"",disclosingSignatoryDesignation:"",receivingSignatoryName:"",receivingSignatoryDesignation:""};var Xh={},Op={};var ET;function LQ(){if(ET)return Op;ET=1;var n=B0(),e=Zy();function t(v){var S="https://react.dev/errors/"+v;if(1<arguments.length){S+="?args[]="+encodeURIComponent(arguments[1]);for(var D=2;D<arguments.length;D++)S+="&args[]="+encodeURIComponent(arguments[D])}return"Minified React error #"+v+"; visit "+S+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),j=Symbol.for("react.scope"),E=Symbol.for("react.activity"),A=Symbol.for("react.legacy_hidden"),R=Symbol.for("react.memo_cache_sentinel"),M=Symbol.for("react.view_transition"),L=Symbol.iterator;function z(v){return v===null||typeof v!="object"?null:(v=L&&v[L]||v["@@iterator"],typeof v=="function"?v:null)}var W=Array.isArray;function I(v,S){var D=v.length&3,O=v.length-D,H=S;for(S=0;S<O;){var J=v.charCodeAt(S)&255|(v.charCodeAt(++S)&255)<<8|(v.charCodeAt(++S)&255)<<16|(v.charCodeAt(++S)&255)<<24;++S,J=3432918353*(J&65535)+((3432918353*(J>>>16)&65535)<<16)&4294967295,J=J<<15|J>>>17,J=461845907*(J&65535)+((461845907*(J>>>16)&65535)<<16)&4294967295,H^=J,H=H<<13|H>>>19,H=5*(H&65535)+((5*(H>>>16)&65535)<<16)&4294967295,H=(H&65535)+27492+(((H>>>16)+58964&65535)<<16)}switch(J=0,D){case 3:J^=(v.charCodeAt(S+2)&255)<<16;case 2:J^=(v.charCodeAt(S+1)&255)<<8;case 1:J^=v.charCodeAt(S)&255,J=3432918353*(J&65535)+((3432918353*(J>>>16)&65535)<<16)&4294967295,J=J<<15|J>>>17,H^=461845907*(J&65535)+((461845907*(J>>>16)&65535)<<16)&4294967295}return H^=v.length,H^=H>>>16,H=2246822507*(H&65535)+((2246822507*(H>>>16)&65535)<<16)&4294967295,H^=H>>>13,H=3266489909*(H&65535)+((3266489909*(H>>>16)&65535)<<16)&4294967295,(H^H>>>16)>>>0}var Y=Object.assign,U=Object.prototype.hasOwnProperty,Z=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$={},ae={};function xe(v){return U.call(ae,v)?!0:U.call($,v)?!1:Z.test(v)?ae[v]=!0:($[v]=!0,!1)}var fe=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" ")),ke=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),G=/["'&<>]/;function X(v){if(typeof v=="boolean"||typeof v=="number"||typeof v=="bigint")return""+v;v=""+v;var S=G.exec(v);if(S){var D="",O,H=0;for(O=S.index;O<v.length;O++){switch(v.charCodeAt(O)){case 34:S="&quot;";break;case 38:S="&amp;";break;case 39:S="&#x27;";break;case 60:S="&lt;";break;case 62:S="&gt;";break;default:continue}H!==O&&(D+=v.slice(H,O)),H=O+1,D+=S}v=H!==O?D+v.slice(H,O):D}return v}var se=/([A-Z])/g,ee=/^ms-/,ne=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function V(v){return ne.test(""+v)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":v}var re=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ne={pending:!1,data:null,method:null,action:null},Ce=ge.d;ge.d={f:Ce.f,r:Ce.r,D:Xo,C:Ws,L:Bl,m:Ko,X:Ls,S:Zo,M:Ff};var We=[],Ge=null,Oe=/(<\/|<)(s)(cript)/gi;function $e(v,S,D,O){return""+S+(D==="s"?"\\u0073":"\\u0053")+O}function Le(v,S,D,O,H){return{idPrefix:v===void 0?"":v,nextFormID:0,streamingFormat:0,bootstrapScriptContent:D,bootstrapScripts:O,bootstrapModules:H,instructions:0,hasBody:!1,hasHtml:!1,unknownResources:{},dnsResources:{},connectResources:{default:{},anonymous:{},credentials:{}},imageResources:{},styleResources:{},scriptResources:{},moduleUnknownResources:{},moduleScriptResources:{}}}function pe(v,S,D,O){return{insertionMode:v,selectedValue:S,tagScope:D,viewTransition:O}}function je(v,S,D){var O=v.tagScope&-25;switch(S){case"noscript":return pe(2,null,O|1,null);case"select":return pe(2,D.value!=null?D.value:D.defaultValue,O,null);case"svg":return pe(4,null,O,null);case"picture":return pe(2,null,O|2,null);case"math":return pe(5,null,O,null);case"foreignObject":return pe(2,null,O,null);case"table":return pe(6,null,O,null);case"thead":case"tbody":case"tfoot":return pe(7,null,O,null);case"colgroup":return pe(9,null,O,null);case"tr":return pe(8,null,O,null);case"head":if(2>v.insertionMode)return pe(3,null,O,null);break;case"html":if(v.insertionMode===0)return pe(1,null,O,null)}return 6<=v.insertionMode||2>v.insertionMode?pe(2,null,O,null):v.tagScope!==O?pe(v.insertionMode,v.selectedValue,O,null):v}function Se(v){return v===null?null:{update:v.update,enter:"none",exit:"none",share:v.update,name:v.autoName,autoName:v.autoName,nameIdx:0}}function Je(v,S){return S.tagScope&32&&(v.instructions|=128),pe(S.insertionMode,S.selectedValue,S.tagScope|12,Se(S.viewTransition))}function lt(v,S){v=Se(S.viewTransition);var D=S.tagScope|16;return v!==null&&v.share!=="none"&&(D|=64),pe(S.insertionMode,S.selectedValue,D,v)}var ct=new Map;function Fe(v,S){if(typeof S!="object")throw Error(t(62));var D=!0,O;for(O in S)if(U.call(S,O)){var H=S[O];if(H!=null&&typeof H!="boolean"&&H!==""){if(O.indexOf("--")===0){var J=X(O);H=X((""+H).trim())}else J=ct.get(O),J===void 0&&(J=X(O.replace(se,"-$1").toLowerCase().replace(ee,"-ms-")),ct.set(O,J)),H=typeof H=="number"?H===0||fe.has(O)?""+H:H+"px":X((""+H).trim());D?(D=!1,v.push(' style="',J,":",H)):v.push(";",J,":",H)}}D||v.push('"')}function nt(v,S,D){D&&typeof D!="function"&&typeof D!="symbol"&&v.push(" ",S,'=""')}function Ye(v,S,D){typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&v.push(" ",S,'="',X(D),'"')}var ot=X("javascript:throw new Error('React form unexpectedly submitted.')");function St(v,S){this.push('<input type="hidden"'),Pt(v),Ye(this,"name",S),Ye(this,"value",v),this.push("/>")}function Pt(v){if(typeof v!="string")throw Error(t(480))}function qe(v,S){if(typeof S.$$FORM_ACTION=="function"){var D=v.nextFormID++;v=v.idPrefix+D;try{var O=S.$$FORM_ACTION(v);if(O){var H=O.data;H?.forEach(Pt)}return O}catch(J){if(typeof J=="object"&&J!==null&&typeof J.then=="function")throw J}}return null}function Ze(v,S,D,O,H,J,te,Ee){var ce=null;if(typeof O=="function"){var _e=qe(S,O);_e!==null?(Ee=_e.name,O=_e.action||"",H=_e.encType,J=_e.method,te=_e.target,ce=_e.data):(v.push(" ","formAction",'="',ot,'"'),te=J=H=O=Ee=null,Ot(S,D))}return Ee!=null&&Xe(v,"name",Ee),O!=null&&Xe(v,"formAction",O),H!=null&&Xe(v,"formEncType",H),J!=null&&Xe(v,"formMethod",J),te!=null&&Xe(v,"formTarget",te),ce}function Xe(v,S,D){switch(S){case"className":Ye(v,"class",D);break;case"tabIndex":Ye(v,"tabindex",D);break;case"dir":case"role":case"viewBox":case"width":case"height":Ye(v,S,D);break;case"style":Fe(v,D);break;case"src":case"href":if(D==="")break;case"action":case"formAction":if(D==null||typeof D=="function"||typeof D=="symbol"||typeof D=="boolean")break;D=V(""+D),v.push(" ",S,'="',X(D),'"');break;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":case"ref":break;case"autoFocus":case"multiple":case"muted":nt(v,S.toLowerCase(),D);break;case"xlinkHref":if(typeof D=="function"||typeof D=="symbol"||typeof D=="boolean")break;D=V(""+D),v.push(" ","xlink:href",'="',X(D),'"');break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":typeof D!="function"&&typeof D!="symbol"&&v.push(" ",S,'="',X(D),'"');break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":D&&typeof D!="function"&&typeof D!="symbol"&&v.push(" ",S,'=""');break;case"capture":case"download":D===!0?v.push(" ",S,'=""'):D!==!1&&typeof D!="function"&&typeof D!="symbol"&&v.push(" ",S,'="',X(D),'"');break;case"cols":case"rows":case"size":case"span":typeof D!="function"&&typeof D!="symbol"&&!isNaN(D)&&1<=D&&v.push(" ",S,'="',X(D),'"');break;case"rowSpan":case"start":typeof D=="function"||typeof D=="symbol"||isNaN(D)||v.push(" ",S,'="',X(D),'"');break;case"xlinkActuate":Ye(v,"xlink:actuate",D);break;case"xlinkArcrole":Ye(v,"xlink:arcrole",D);break;case"xlinkRole":Ye(v,"xlink:role",D);break;case"xlinkShow":Ye(v,"xlink:show",D);break;case"xlinkTitle":Ye(v,"xlink:title",D);break;case"xlinkType":Ye(v,"xlink:type",D);break;case"xmlBase":Ye(v,"xml:base",D);break;case"xmlLang":Ye(v,"xml:lang",D);break;case"xmlSpace":Ye(v,"xml:space",D);break;default:if((!(2<S.length)||S[0]!=="o"&&S[0]!=="O"||S[1]!=="n"&&S[1]!=="N")&&(S=ke.get(S)||S,xe(S))){switch(typeof D){case"function":case"symbol":return;case"boolean":var O=S.toLowerCase().slice(0,5);if(O!=="data-"&&O!=="aria-")return}v.push(" ",S,'="',X(D),'"')}}}function yt(v,S,D){if(S!=null){if(D!=null)throw Error(t(60));if(typeof S!="object"||!("__html"in S))throw Error(t(61));S=S.__html,S!=null&&v.push(""+S)}}function Et(v){var S="";return n.Children.forEach(v,function(D){D!=null&&(S+=D)}),S}function Ot(v,S){if((v.instructions&16)===0){v.instructions|=16;var D=S.preamble,O=S.bootstrapChunks;(D.htmlChunks||D.headChunks)&&O.length===0?(O.push(S.startInlineScript),Fc(O,v),O.push(">",`addEventListener("submit",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute("formAction");null!=f&&(e=f,b=null)}"javascript:throw new Error('React form unexpectedly submitted.')"===e&&(a.preventDefault(),b?(a=document.createElement("input"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});`,"<\/script>")):O.unshift(S.startInlineScript,">",`addEventListener("submit",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute("formAction");null!=f&&(e=f,b=null)}"javascript:throw new Error('React form unexpectedly submitted.')"===e&&(a.preventDefault(),b?(a=document.createElement("input"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});`,"<\/script>")}}function Kt(v,S){v.push(mt("link"));for(var D in S)if(U.call(S,D)){var O=S[D];if(O!=null)switch(D){case"children":case"dangerouslySetInnerHTML":throw Error(t(399,"link"));default:Xe(v,D,O)}}return v.push("/>"),null}var Fn=/(<\/|<)(s)(tyle)/gi;function un(v,S,D,O){return""+S+(D==="s"?"\\73 ":"\\53 ")+O}function qs(v,S,D){v.push(mt(D));for(var O in S)if(U.call(S,O)){var H=S[O];if(H!=null)switch(O){case"children":case"dangerouslySetInnerHTML":throw Error(t(399,D));default:Xe(v,O,H)}}return v.push("/>"),null}function Os(v,S){v.push(mt("title"));var D=null,O=null,H;for(H in S)if(U.call(S,H)){var J=S[H];if(J!=null)switch(H){case"children":D=J;break;case"dangerouslySetInnerHTML":O=J;break;default:Xe(v,H,J)}}return v.push(">"),S=Array.isArray(D)?2>D.length?D[0]:null:D,typeof S!="function"&&typeof S!="symbol"&&S!==null&&S!==void 0&&v.push(X(""+S)),yt(v,O,D),v.push(le("title")),null}function An(v,S){v.push(mt("script"));var D=null,O=null,H;for(H in S)if(U.call(S,H)){var J=S[H];if(J!=null)switch(H){case"children":D=J;break;case"dangerouslySetInnerHTML":O=J;break;default:Xe(v,H,J)}}return v.push(">"),yt(v,O,D),typeof D=="string"&&v.push((""+D).replace(Oe,$e)),v.push(le("script")),null}function ye(v,S,D){v.push(mt(D));var O=D=null,H;for(H in S)if(U.call(S,H)){var J=S[H];if(J!=null)switch(H){case"children":D=J;break;case"dangerouslySetInnerHTML":O=J;break;default:Xe(v,H,J)}}return v.push(">"),yt(v,O,D),D}function Qe(v,S,D){v.push(mt(D));var O=D=null,H;for(H in S)if(U.call(S,H)){var J=S[H];if(J!=null)switch(H){case"children":D=J;break;case"dangerouslySetInnerHTML":O=J;break;default:Xe(v,H,J)}}return v.push(">"),yt(v,O,D),typeof D=="string"?(v.push(X(D)),null):D}var rt=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Nt=new Map;function mt(v){var S=Nt.get(v);if(S===void 0){if(!rt.test(v))throw Error(t(65,v));S="<"+v,Nt.set(v,S)}return S}function It(v,S,D,O,H,J,te,Ee,ce){switch(S){case"div":case"span":case"svg":case"path":break;case"a":v.push(mt("a"));var _e=null,He=null,Pe;for(Pe in D)if(U.call(D,Pe)){var it=D[Pe];if(it!=null)switch(Pe){case"children":_e=it;break;case"dangerouslySetInnerHTML":He=it;break;case"href":it===""?Ye(v,"href",""):Xe(v,Pe,it);break;default:Xe(v,Pe,it)}}if(v.push(">"),yt(v,He,_e),typeof _e=="string"){v.push(X(_e));var pt=null}else pt=_e;return pt;case"g":case"p":case"li":break;case"select":v.push(mt("select"));var Zt=null,Ut=null,Bt;for(Bt in D)if(U.call(D,Bt)){var zt=D[Bt];if(zt!=null)switch(Bt){case"children":Zt=zt;break;case"dangerouslySetInnerHTML":Ut=zt;break;case"defaultValue":case"value":break;default:Xe(v,Bt,zt)}}return v.push(">"),yt(v,Ut,Zt),Zt;case"option":var Wt=Ee.selectedValue;v.push(mt("option"));var _n=null,ns=null,rn=null,on=null,mn;for(mn in D)if(U.call(D,mn)){var Wn=D[mn];if(Wn!=null)switch(mn){case"children":_n=Wn;break;case"selected":rn=Wn;break;case"dangerouslySetInnerHTML":on=Wn;break;case"value":ns=Wn;default:Xe(v,mn,Wn)}}if(Wt!=null){var cn=ns!==null?""+ns:Et(_n);if(W(Wt)){for(var ys=0;ys<Wt.length;ys++)if(""+Wt[ys]===cn){v.push(' selected=""');break}}else""+Wt===cn&&v.push(' selected=""')}else rn&&v.push(' selected=""');return v.push(">"),yt(v,on,_n),_n;case"textarea":v.push(mt("textarea"));var Tn=null,ls=null,Zn=null,Gn;for(Gn in D)if(U.call(D,Gn)){var pi=D[Gn];if(pi!=null)switch(Gn){case"children":Zn=pi;break;case"value":Tn=pi;break;case"defaultValue":ls=pi;break;case"dangerouslySetInnerHTML":throw Error(t(91));default:Xe(v,Gn,pi)}}if(Tn===null&&ls!==null&&(Tn=ls),v.push(">"),Zn!=null){if(Tn!=null)throw Error(t(92));if(W(Zn)){if(1<Zn.length)throw Error(t(93));Tn=""+Zn[0]}Tn=""+Zn}return typeof Tn=="string"&&Tn[0]===`
`&&v.push(`
`),Tn!==null&&v.push(X(""+Tn)),null;case"input":v.push(mt("input"));var Yr=null,Qi=null,xi=null,Ya=null,vs=null,Mi=null,Pi=null,fs=null,Es=null,Oi;for(Oi in D)if(U.call(D,Oi)){var zn=D[Oi];if(zn!=null)switch(Oi){case"children":case"dangerouslySetInnerHTML":throw Error(t(399,"input"));case"name":Yr=zn;break;case"formAction":Qi=zn;break;case"formEncType":xi=zn;break;case"formMethod":Ya=zn;break;case"formTarget":vs=zn;break;case"defaultChecked":Es=zn;break;case"defaultValue":Pi=zn;break;case"checked":fs=zn;break;case"value":Mi=zn;break;default:Xe(v,Oi,zn)}}var bi=Ze(v,O,H,Qi,xi,Ya,vs,Yr);return fs!==null?nt(v,"checked",fs):Es!==null&&nt(v,"checked",Es),Mi!==null?Xe(v,"value",Mi):Pi!==null&&Xe(v,"value",Pi),v.push("/>"),bi?.forEach(St,v),null;case"button":v.push(mt("button"));var da=null,cu=null,Jc=null,du=null,uu=null,ws=null,Yn=null,Xt;for(Xt in D)if(U.call(D,Xt)){var si=D[Xt];if(si!=null)switch(Xt){case"children":da=si;break;case"dangerouslySetInnerHTML":cu=si;break;case"name":Jc=si;break;case"formAction":du=si;break;case"formEncType":uu=si;break;case"formMethod":ws=si;break;case"formTarget":Yn=si;break;default:Xe(v,Xt,si)}}var Ys=Ze(v,O,H,du,uu,ws,Yn,Jc);if(v.push(">"),Ys?.forEach(St,v),yt(v,cu,da),typeof da=="string"){v.push(X(da));var nc=null}else nc=da;return nc;case"form":v.push(mt("form"));var Li=null,hu=null,ua=null,dr=null,Ca=null,Ao=null,Xr;for(Xr in D)if(U.call(D,Xr)){var Xa=D[Xr];if(Xa!=null)switch(Xr){case"children":Li=Xa;break;case"dangerouslySetInnerHTML":hu=Xa;break;case"action":ua=Xa;break;case"encType":dr=Xa;break;case"method":Ca=Xa;break;case"target":Ao=Xa;break;default:Xe(v,Xr,Xa)}}var Kr=null,In=null;if(typeof ua=="function"){var Fi=qe(O,ua);Fi!==null?(ua=Fi.action||"",dr=Fi.encType,Ca=Fi.method,Ao=Fi.target,Kr=Fi.data,In=Fi.name):(v.push(" ","action",'="',ot,'"'),Ao=Ca=dr=ua=null,Ot(O,H))}if(ua!=null&&Xe(v,"action",ua),dr!=null&&Xe(v,"encType",dr),Ca!=null&&Xe(v,"method",Ca),Ao!=null&&Xe(v,"target",Ao),v.push(">"),In!==null&&(v.push('<input type="hidden"'),Ye(v,"name",In),v.push("/>"),Kr?.forEach(St,v)),yt(v,hu,Li),typeof Li=="string"){v.push(X(Li));var Ji=null}else Ji=Li;return Ji;case"menuitem":v.push(mt("menuitem"));for(var ur in D)if(U.call(D,ur)){var sc=D[ur];if(sc!=null)switch(ur){case"children":case"dangerouslySetInnerHTML":throw Error(t(400));default:Xe(v,ur,sc)}}return v.push(">"),null;case"object":v.push(mt("object"));var ii=null,Ka=null,ha;for(ha in D)if(U.call(D,ha)){var Mn=D[ha];if(Mn!=null)switch(ha){case"children":ii=Mn;break;case"dangerouslySetInnerHTML":Ka=Mn;break;case"data":var _s=V(""+Mn);if(_s==="")break;v.push(" ","data",'="',X(_s),'"');break;default:Xe(v,ha,Mn)}}if(v.push(">"),yt(v,Ka,ii),typeof ii=="string"){v.push(X(ii));var dl=null}else dl=ii;return dl;case"title":var yi=Ee.tagScope&1,yh=Ee.tagScope&4;if(Ee.insertionMode===4||yi||D.itemProp!=null)var qc=Os(v,D);else yh?qc=null:(Os(H.hoistableChunks,D),qc=void 0);return qc;case"link":var ss=Ee.tagScope&1,fu=Ee.tagScope&4,ic=D.rel,fa=D.href,Zr=D.precedence;if(Ee.insertionMode===4||ss||D.itemProp!=null||typeof ic!="string"||typeof fa!="string"||fa===""){Kt(v,D);var ma=null}else if(D.rel==="stylesheet")if(typeof Zr!="string"||D.disabled!=null||D.onLoad||D.onError)ma=Kt(v,D);else{var ms=H.styles.get(Zr),ac=O.styleResources.hasOwnProperty(fa)?O.styleResources[fa]:void 0;if(ac!==null){O.styleResources[fa]=null,ms||(ms={precedence:X(Zr),rules:[],hrefs:[],sheets:new Map},H.styles.set(Zr,ms));var ul={state:0,props:Y({},D,{"data-precedence":D.precedence,precedence:null})};if(ac){ac.length===2&&Hl(ul.props,ac);var mu=H.preloads.stylesheets.get(fa);mu&&0<mu.length?mu.length=0:ul.state=1}ms.sheets.set(fa,ul),te&&te.stylesheets.add(ul)}else if(ms){var $c=ms.sheets.get(fa);$c&&te&&te.stylesheets.add($c)}ce&&v.push("<!-- -->"),ma=null}else D.onLoad||D.onError?ma=Kt(v,D):(ce&&v.push("<!-- -->"),ma=fu?null:Kt(H.hoistableChunks,D));return ma;case"script":var Qr=Ee.tagScope&1,rc=D.async;if(typeof D.src!="string"||!D.src||!rc||typeof rc=="function"||typeof rc=="symbol"||D.onLoad||D.onError||Ee.insertionMode===4||Qr||D.itemProp!=null)var oc=An(v,D);else{var gs=D.src;if(D.type==="module")var Jr=O.moduleScriptResources,Eo=H.preloads.moduleScripts;else Jr=O.scriptResources,Eo=H.preloads.scripts;var qr=Jr.hasOwnProperty(gs)?Jr[gs]:void 0;if(qr!==null){Jr[gs]=null;var _o=D;if(qr){qr.length===2&&(_o=Y({},D),Hl(_o,qr));var ed=Eo.get(gs);ed&&(ed.length=0)}var lc=[];H.scripts.add(lc),An(lc,_o)}ce&&v.push("<!-- -->"),oc=null}return oc;case"style":var Za=Ee.tagScope&1,zi=D.precedence,qi=D.href,gu=D.nonce;if(Ee.insertionMode===4||Za||D.itemProp!=null||typeof zi!="string"||typeof qi!="string"||qi===""){v.push(mt("style"));var ga=null,hl=null,Aa;for(Aa in D)if(U.call(D,Aa)){var Qa=D[Aa];if(Qa!=null)switch(Aa){case"children":ga=Qa;break;case"dangerouslySetInnerHTML":hl=Qa;break;default:Xe(v,Aa,Qa)}}v.push(">");var Ea=Array.isArray(ga)?2>ga.length?ga[0]:null:ga;typeof Ea!="function"&&typeof Ea!="symbol"&&Ea!==null&&Ea!==void 0&&v.push((""+Ea).replace(Fn,un)),yt(v,hl,ga),v.push(le("style"));var fl=null}else{var Ii=H.styles.get(zi);if((O.styleResources.hasOwnProperty(qi)?O.styleResources[qi]:void 0)!==null){O.styleResources[qi]=null,Ii||(Ii={precedence:X(zi),rules:[],hrefs:[],sheets:new Map},H.styles.set(zi,Ii));var pu=H.nonce.style;if(!pu||pu===gu){Ii.hrefs.push(X(qi));var hr=Ii.rules,Ja=null,ml=null,$i;for($i in D)if(U.call(D,$i)){var vi=D[$i];if(vi!=null)switch($i){case"children":Ja=vi;break;case"dangerouslySetInnerHTML":ml=vi}}var _a=Array.isArray(Ja)?2>Ja.length?Ja[0]:null:Ja;typeof _a!="function"&&typeof _a!="symbol"&&_a!==null&&_a!==void 0&&hr.push((""+_a).replace(Fn,un)),yt(hr,ml,Ja)}}Ii&&te&&te.styles.add(Ii),ce&&v.push("<!-- -->"),fl=void 0}return fl;case"meta":var ea=Ee.tagScope&1,cc=Ee.tagScope&4;if(Ee.insertionMode===4||ea||D.itemProp!=null)var gl=qs(v,D,"meta");else ce&&v.push("<!-- -->"),gl=cc?null:typeof D.charSet=="string"?qs(H.charsetChunks,D,"meta"):D.name==="viewport"?qs(H.viewportChunks,D,"meta"):qs(H.hoistableChunks,D,"meta");return gl;case"listing":case"pre":v.push(mt(S));var fr=null,b=null,w;for(w in D)if(U.call(D,w)){var k=D[w];if(k!=null)switch(w){case"children":fr=k;break;case"dangerouslySetInnerHTML":b=k;break;default:Xe(v,w,k)}}if(v.push(">"),b!=null){if(fr!=null)throw Error(t(60));if(typeof b!="object"||!("__html"in b))throw Error(t(61));var P=b.__html;P!=null&&(typeof P=="string"&&0<P.length&&P[0]===`
`?v.push(`
`,P):v.push(""+P))}return typeof fr=="string"&&fr[0]===`
`&&v.push(`
`),fr;case"img":var F=Ee.tagScope&3,K=D.src,q=D.srcSet;if(!(D.loading==="lazy"||!K&&!q||typeof K!="string"&&K!=null||typeof q!="string"&&q!=null||D.fetchPriority==="low"||F)&&(typeof K!="string"||K[4]!==":"||K[0]!=="d"&&K[0]!=="D"||K[1]!=="a"&&K[1]!=="A"||K[2]!=="t"&&K[2]!=="T"||K[3]!=="a"&&K[3]!=="A")&&(typeof q!="string"||q[4]!==":"||q[0]!=="d"&&q[0]!=="D"||q[1]!=="a"&&q[1]!=="A"||q[2]!=="t"&&q[2]!=="T"||q[3]!=="a"&&q[3]!=="A")){te!==null&&Ee.tagScope&64&&(te.suspenseyImages=!0);var ue=typeof D.sizes=="string"?D.sizes:void 0,ie=q?q+`
`+(ue||""):K,he=H.preloads.images,we=he.get(ie);if(we)(D.fetchPriority==="high"||10>H.highImagePreloads.size)&&(he.delete(ie),H.highImagePreloads.add(we));else if(!O.imageResources.hasOwnProperty(ie)){O.imageResources[ie]=We;var De=D.crossOrigin,tt=typeof De=="string"?De==="use-credentials"?De:"":void 0,st=H.headers,Ct;st&&0<st.remainingCapacity&&typeof D.srcSet!="string"&&(D.fetchPriority==="high"||500>st.highImagePreloads.length)&&(Ct=Kn(K,"image",{imageSrcSet:D.srcSet,imageSizes:D.sizes,crossOrigin:tt,integrity:D.integrity,nonce:D.nonce,type:D.type,fetchPriority:D.fetchPriority,referrerPolicy:D.refererPolicy}),0<=(st.remainingCapacity-=Ct.length+2))?(H.resets.image[ie]=We,st.highImagePreloads&&(st.highImagePreloads+=", "),st.highImagePreloads+=Ct):(we=[],Kt(we,{rel:"preload",as:"image",href:q?void 0:K,imageSrcSet:q,imageSizes:ue,crossOrigin:tt,integrity:D.integrity,type:D.type,fetchPriority:D.fetchPriority,referrerPolicy:D.referrerPolicy}),D.fetchPriority==="high"||10>H.highImagePreloads.size?H.highImagePreloads.add(we):(H.bulkPreloads.add(we),he.set(ie,we)))}}return qs(v,D,"img");case"base":case"area":case"br":case"col":case"embed":case"hr":case"keygen":case"param":case"source":case"track":case"wbr":return qs(v,D,S);case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":break;case"head":if(2>Ee.insertionMode){var Gt=J||H.preamble;if(Gt.headChunks)throw Error(t(545,"`<head>`"));J!==null&&v.push("<!--head-->"),Gt.headChunks=[];var Ht=ye(Gt.headChunks,D,"head")}else Ht=Qe(v,D,"head");return Ht;case"body":if(2>Ee.insertionMode){var dt=J||H.preamble;if(dt.bodyChunks)throw Error(t(545,"`<body>`"));J!==null&&v.push("<!--body-->"),dt.bodyChunks=[];var At=ye(dt.bodyChunks,D,"body")}else At=Qe(v,D,"body");return At;case"html":if(Ee.insertionMode===0){var ln=J||H.preamble;if(ln.htmlChunks)throw Error(t(545,"`<html>`"));J!==null&&v.push("<!--html-->"),ln.htmlChunks=[""];var ai=ye(ln.htmlChunks,D,"html")}else ai=Qe(v,D,"html");return ai;default:if(S.indexOf("-")!==-1){v.push(mt(S));var ri=null,_t=null,zs;for(zs in D)if(U.call(D,zs)){var Xn=D[zs];if(Xn!=null){var Ts=zs;switch(zs){case"children":ri=Xn;break;case"dangerouslySetInnerHTML":_t=Xn;break;case"style":Fe(v,Xn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"ref":break;case"className":Ts="class";default:if(xe(zs)&&typeof Xn!="function"&&typeof Xn!="symbol"&&Xn!==!1){if(Xn===!0)Xn="";else if(typeof Xn=="object")continue;v.push(" ",Ts,'="',X(Xn),'"')}}}}return v.push(">"),yt(v,_t,ri),ri}}return Qe(v,D,S)}var et=new Map;function le(v){var S=et.get(v);return S===void 0&&(S="</"+v+">",et.set(v,S)),S}function Ke(v,S){v=v.preamble,v.htmlChunks===null&&S.htmlChunks&&(v.htmlChunks=S.htmlChunks),v.headChunks===null&&S.headChunks&&(v.headChunks=S.headChunks),v.bodyChunks===null&&S.bodyChunks&&(v.bodyChunks=S.bodyChunks)}function at(v,S){S=S.bootstrapChunks;for(var D=0;D<S.length-1;D++)v.push(S[D]);return D<S.length?(D=S[D],S.length=0,v.push(D)):!0}function ut(v,S,D){if(v.push('<!--$?--><template id="'),D===null)throw Error(t(395));return v.push(S.boundaryPrefix),S=D.toString(16),v.push(S),v.push('"></template>')}function gt(v,S,D,O){switch(D.insertionMode){case 0:case 1:case 3:case 2:return v.push('<div hidden id="'),v.push(S.segmentPrefix),S=O.toString(16),v.push(S),v.push('">');case 4:return v.push('<svg aria-hidden="true" style="display:none" id="'),v.push(S.segmentPrefix),S=O.toString(16),v.push(S),v.push('">');case 5:return v.push('<math aria-hidden="true" style="display:none" id="'),v.push(S.segmentPrefix),S=O.toString(16),v.push(S),v.push('">');case 6:return v.push('<table hidden id="'),v.push(S.segmentPrefix),S=O.toString(16),v.push(S),v.push('">');case 7:return v.push('<table hidden><tbody id="'),v.push(S.segmentPrefix),S=O.toString(16),v.push(S),v.push('">');case 8:return v.push('<table hidden><tr id="'),v.push(S.segmentPrefix),S=O.toString(16),v.push(S),v.push('">');case 9:return v.push('<table hidden><colgroup id="'),v.push(S.segmentPrefix),S=O.toString(16),v.push(S),v.push('">');default:throw Error(t(397))}}function Dt(v,S){switch(S.insertionMode){case 0:case 1:case 3:case 2:return v.push("</div>");case 4:return v.push("</svg>");case 5:return v.push("</math>");case 6:return v.push("</table>");case 7:return v.push("</tbody></table>");case 8:return v.push("</tr></table>");case 9:return v.push("</colgroup></table>");default:throw Error(t(397))}}var hn=/[<\u2028\u2029]/g;function en(v){return JSON.stringify(v).replace(hn,function(S){switch(S){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var Rt=/[&><\u2028\u2029]/g;function Ei(v){return JSON.stringify(v).replace(Rt,function(S){switch(S){case"&":return"\\u0026";case">":return"\\u003e";case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSObjectForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var $s=!1,Dn=!0;function Cs(v){var S=v.rules,D=v.hrefs,O=0;if(D.length){for(this.push(Ge.startInlineStyle),this.push(' media="not all" data-precedence="'),this.push(v.precedence),this.push('" data-href="');O<D.length-1;O++)this.push(D[O]),this.push(" ");for(this.push(D[O]),this.push('">'),O=0;O<S.length;O++)this.push(S[O]);Dn=this.push("</style>"),$s=!0,S.length=0,D.length=0}}function jn(v){return v.state!==2?$s=!0:!1}function Zi(v,S,D){return $s=!1,Dn=!0,Ge=D,S.styles.forEach(Cs,v),Ge=null,S.stylesheets.forEach(jn),$s&&(D.stylesToHoist=!0),Dn}function As(v){for(var S=0;S<v.length;S++)this.push(v[S]);v.length=0}var fn=[];function Vs(v){Kt(fn,v.props);for(var S=0;S<fn.length;S++)this.push(fn[S]);fn.length=0,v.state=2}function _i(v){var S=0<v.sheets.size;v.sheets.forEach(Vs,this),v.sheets.clear();var D=v.rules,O=v.hrefs;if(!S||O.length){if(this.push(Ge.startInlineStyle),this.push(' data-precedence="'),this.push(v.precedence),v=0,O.length){for(this.push('" data-href="');v<O.length-1;v++)this.push(O[v]),this.push(" ");this.push(O[v])}for(this.push('">'),v=0;v<D.length;v++)this.push(D[v]);this.push("</style>"),D.length=0,O.length=0}}function xo(v){if(v.state===0){v.state=1;var S=v.props;for(Kt(fn,{rel:"preload",as:"style",href:v.props.href,crossOrigin:S.crossOrigin,fetchPriority:S.fetchPriority,integrity:S.integrity,media:S.media,hrefLang:S.hrefLang,referrerPolicy:S.referrerPolicy}),v=0;v<fn.length;v++)this.push(fn[v]);fn.length=0}}function Hd(v){v.sheets.forEach(xo,this),v.sheets.clear()}function Fc(v,S){(S.instructions&32)===0&&(S.instructions|=32,v.push(' id="',X("_"+S.idPrefix+"R_"),'"'))}function Lf(v,S){v.push("[");var D="[";S.stylesheets.forEach(function(O){if(O.state!==2)if(O.state===3)v.push(D),O=Ei(""+O.props.href),v.push(O),v.push("]"),D=",[";else{v.push(D);var H=O.props["data-precedence"],J=O.props,te=V(""+O.props.href);te=Ei(te),v.push(te),H=""+H,v.push(","),H=Ei(H),v.push(H);for(var Ee in J)if(U.call(J,Ee)&&(H=J[Ee],H!=null))switch(Ee){case"href":case"rel":case"precedence":case"data-precedence":break;case"children":case"dangerouslySetInnerHTML":throw Error(t(399,"link"));default:En(v,Ee,H)}v.push("]"),D=",[",O.state=3}}),v.push("]")}function En(v,S,D){var O=S.toLowerCase();switch(typeof D){case"function":case"symbol":return}switch(S){case"innerHTML":case"dangerouslySetInnerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":case"style":case"ref":return;case"className":O="class",S=""+D;break;case"hidden":if(D===!1)return;S="";break;case"src":case"href":D=V(D),S=""+D;break;default:if(2<S.length&&(S[0]==="o"||S[0]==="O")&&(S[1]==="n"||S[1]==="N")||!xe(S))return;S=""+D}v.push(","),O=Ei(O),v.push(O),v.push(","),O=Ei(S),v.push(O)}function kn(){return{styles:new Set,stylesheets:new Set,suspenseyImages:!1}}function Xo(v){var S=ti||null;if(S){var D=S.resumableState,O=S.renderState;if(typeof v=="string"&&v){if(!D.dnsResources.hasOwnProperty(v)){D.dnsResources[v]=null,D=O.headers;var H,J;(J=D&&0<D.remainingCapacity)&&(J=(H="<"+(""+v).replace(Mr,Ud)+">; rel=dns-prefetch",0<=(D.remainingCapacity-=H.length+2))),J?(O.resets.dns[v]=null,D.preconnects&&(D.preconnects+=", "),D.preconnects+=H):(H=[],Kt(H,{href:v,rel:"dns-prefetch"}),O.preconnects.add(H))}Ga(S)}}else Ce.D(v)}function Ws(v,S){var D=ti||null;if(D){var O=D.resumableState,H=D.renderState;if(typeof v=="string"&&v){var J=S==="use-credentials"?"credentials":typeof S=="string"?"anonymous":"default";if(!O.connectResources[J].hasOwnProperty(v)){O.connectResources[J][v]=null,O=H.headers;var te,Ee;if(Ee=O&&0<O.remainingCapacity){if(Ee="<"+(""+v).replace(Mr,Ud)+">; rel=preconnect",typeof S=="string"){var ce=(""+S).replace(Pr,zc);Ee+='; crossorigin="'+ce+'"'}Ee=(te=Ee,0<=(O.remainingCapacity-=te.length+2))}Ee?(H.resets.connect[J][v]=null,O.preconnects&&(O.preconnects+=", "),O.preconnects+=te):(J=[],Kt(J,{rel:"preconnect",href:v,crossOrigin:S}),H.preconnects.add(J))}Ga(D)}}else Ce.C(v,S)}function Bl(v,S,D){var O=ti||null;if(O){var H=O.resumableState,J=O.renderState;if(S&&v){switch(S){case"image":if(D)var te=D.imageSrcSet,Ee=D.imageSizes,ce=D.fetchPriority;var _e=te?te+`
`+(Ee||""):v;if(H.imageResources.hasOwnProperty(_e))return;H.imageResources[_e]=We,H=J.headers;var He;H&&0<H.remainingCapacity&&typeof te!="string"&&ce==="high"&&(He=Kn(v,S,D),0<=(H.remainingCapacity-=He.length+2))?(J.resets.image[_e]=We,H.highImagePreloads&&(H.highImagePreloads+=", "),H.highImagePreloads+=He):(H=[],Kt(H,Y({rel:"preload",href:te?void 0:v,as:S},D)),ce==="high"?J.highImagePreloads.add(H):(J.bulkPreloads.add(H),J.preloads.images.set(_e,H)));break;case"style":if(H.styleResources.hasOwnProperty(v))return;te=[],Kt(te,Y({rel:"preload",href:v,as:S},D)),H.styleResources[v]=!D||typeof D.crossOrigin!="string"&&typeof D.integrity!="string"?We:[D.crossOrigin,D.integrity],J.preloads.stylesheets.set(v,te),J.bulkPreloads.add(te);break;case"script":if(H.scriptResources.hasOwnProperty(v))return;te=[],J.preloads.scripts.set(v,te),J.bulkPreloads.add(te),Kt(te,Y({rel:"preload",href:v,as:S},D)),H.scriptResources[v]=!D||typeof D.crossOrigin!="string"&&typeof D.integrity!="string"?We:[D.crossOrigin,D.integrity];break;default:if(H.unknownResources.hasOwnProperty(S)){if(te=H.unknownResources[S],te.hasOwnProperty(v))return}else te={},H.unknownResources[S]=te;te[v]=We,(H=J.headers)&&0<H.remainingCapacity&&S==="font"&&(_e=Kn(v,S,D),0<=(H.remainingCapacity-=_e.length+2))?(J.resets.font[v]=We,H.fontPreloads&&(H.fontPreloads+=", "),H.fontPreloads+=_e):(H=[],v=Y({rel:"preload",href:v,as:S},D),Kt(H,v),S)==="font"?J.fontPreloads.add(H):J.bulkPreloads.add(H)}Ga(O)}}else Ce.L(v,S,D)}function Ko(v,S){var D=ti||null;if(D){var O=D.resumableState,H=D.renderState;if(v){var J=S&&typeof S.as=="string"?S.as:"script";switch(J){case"script":if(O.moduleScriptResources.hasOwnProperty(v))return;J=[],O.moduleScriptResources[v]=!S||typeof S.crossOrigin!="string"&&typeof S.integrity!="string"?We:[S.crossOrigin,S.integrity],H.preloads.moduleScripts.set(v,J);break;default:if(O.moduleUnknownResources.hasOwnProperty(J)){var te=O.unknownResources[J];if(te.hasOwnProperty(v))return}else te={},O.moduleUnknownResources[J]=te;J=[],te[v]=We}Kt(J,Y({rel:"modulepreload",href:v},S)),H.bulkPreloads.add(J),Ga(D)}}else Ce.m(v,S)}function Zo(v,S,D){var O=ti||null;if(O){var H=O.resumableState,J=O.renderState;if(v){S=S||"default";var te=J.styles.get(S),Ee=H.styleResources.hasOwnProperty(v)?H.styleResources[v]:void 0;Ee!==null&&(H.styleResources[v]=null,te||(te={precedence:X(S),rules:[],hrefs:[],sheets:new Map},J.styles.set(S,te)),S={state:0,props:Y({rel:"stylesheet",href:v,"data-precedence":S},D)},Ee&&(Ee.length===2&&Hl(S.props,Ee),(J=J.preloads.stylesheets.get(v))&&0<J.length?J.length=0:S.state=1),te.sheets.set(v,S),Ga(O))}}else Ce.S(v,S,D)}function Ls(v,S){var D=ti||null;if(D){var O=D.resumableState,H=D.renderState;if(v){var J=O.scriptResources.hasOwnProperty(v)?O.scriptResources[v]:void 0;J!==null&&(O.scriptResources[v]=null,S=Y({src:v,async:!0},S),J&&(J.length===2&&Hl(S,J),v=H.preloads.scripts.get(v))&&(v.length=0),v=[],H.scripts.add(v),An(v,S),Ga(D))}}else Ce.X(v,S)}function Ff(v,S){var D=ti||null;if(D){var O=D.resumableState,H=D.renderState;if(v){var J=O.moduleScriptResources.hasOwnProperty(v)?O.moduleScriptResources[v]:void 0;J!==null&&(O.moduleScriptResources[v]=null,S=Y({src:v,type:"module",async:!0},S),J&&(J.length===2&&Hl(S,J),v=H.preloads.moduleScripts.get(v))&&(v.length=0),v=[],H.scripts.add(v),An(v,S),Ga(D))}}else Ce.M(v,S)}function Hl(v,S){v.crossOrigin==null&&(v.crossOrigin=S[0]),v.integrity==null&&(v.integrity=S[1])}function Kn(v,S,D){v=(""+v).replace(Mr,Ud),S=(""+S).replace(Pr,zc),S="<"+v+'>; rel=preload; as="'+S+'"';for(var O in D)U.call(D,O)&&(v=D[O],typeof v=="string"&&(S+="; "+O.toLowerCase()+'="'+(""+v).replace(Pr,zc)+'"'));return S}var Mr=/[<>\r\n]/g;function Ud(v){switch(v){case"<":return"%3C";case">":return"%3E";case`
`:return"%0A";case"\r":return"%0D";default:throw Error("escapeLinkHrefForHeaderContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}var Pr=/["';,\r\n]/g;function zc(v){switch(v){case'"':return"%22";case"'":return"%27";case";":return"%3B";case",":return"%2C";case`
`:return"%0A";case"\r":return"%0D";default:throw Error("escapeStringForLinkHeaderQuotedParamValueContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}function _g(v){this.styles.add(v)}function Vd(v){this.stylesheets.add(v)}function Or(v,S){S.styles.forEach(_g,v),S.stylesheets.forEach(Vd,v),S.suspenseyImages&&(v.suspenseyImages=!0)}function Sa(v,S){var D=v.idPrefix,O=[],H=v.bootstrapScriptContent,J=v.bootstrapScripts,te=v.bootstrapModules;H!==void 0&&(O.push("<script"),Fc(O,v),O.push(">",(""+H).replace(Oe,$e),"<\/script>")),H=D+"P:";var Ee=D+"S:";D+="B:";var ce=new Set,_e=new Set,He=new Set,Pe=new Map,it=new Set,pt=new Set,Zt=new Set,Ut={images:new Map,stylesheets:new Map,scripts:new Map,moduleScripts:new Map};if(J!==void 0)for(var Bt=0;Bt<J.length;Bt++){var zt=J[Bt],Wt,_n=void 0,ns=void 0,rn={rel:"preload",as:"script",fetchPriority:"low",nonce:void 0};typeof zt=="string"?rn.href=Wt=zt:(rn.href=Wt=zt.src,rn.integrity=ns=typeof zt.integrity=="string"?zt.integrity:void 0,rn.crossOrigin=_n=typeof zt=="string"||zt.crossOrigin==null?void 0:zt.crossOrigin==="use-credentials"?"use-credentials":""),zt=v;var on=Wt;zt.scriptResources[on]=null,zt.moduleScriptResources[on]=null,zt=[],Kt(zt,rn),it.add(zt),O.push('<script src="',X(Wt),'"'),typeof ns=="string"&&O.push(' integrity="',X(ns),'"'),typeof _n=="string"&&O.push(' crossorigin="',X(_n),'"'),Fc(O,v),O.push(' async=""><\/script>')}if(te!==void 0)for(J=0;J<te.length;J++)rn=te[J],_n=Wt=void 0,ns={rel:"modulepreload",fetchPriority:"low",nonce:void 0},typeof rn=="string"?ns.href=Bt=rn:(ns.href=Bt=rn.src,ns.integrity=_n=typeof rn.integrity=="string"?rn.integrity:void 0,ns.crossOrigin=Wt=typeof rn=="string"||rn.crossOrigin==null?void 0:rn.crossOrigin==="use-credentials"?"use-credentials":""),rn=v,zt=Bt,rn.scriptResources[zt]=null,rn.moduleScriptResources[zt]=null,rn=[],Kt(rn,ns),it.add(rn),O.push('<script type="module" src="',X(Bt),'"'),typeof _n=="string"&&O.push(' integrity="',X(_n),'"'),typeof Wt=="string"&&O.push(' crossorigin="',X(Wt),'"'),Fc(O,v),O.push(' async=""><\/script>');return{placeholderPrefix:H,segmentPrefix:Ee,boundaryPrefix:D,startInlineScript:"<script",startInlineStyle:"<style",preamble:{htmlChunks:null,headChunks:null,bodyChunks:null},externalRuntimeScript:null,bootstrapChunks:O,importMapChunks:[],onHeaders:void 0,headers:null,resets:{font:{},dns:{},connect:{default:{},anonymous:{},credentials:{}},image:{},style:{}},charsetChunks:[],viewportChunks:[],hoistableChunks:[],preconnects:ce,fontPreloads:_e,highImagePreloads:He,styles:Pe,bootstrapScripts:it,scripts:pt,bulkPreloads:Zt,preloads:Ut,nonce:{script:void 0,style:void 0},stylesToHoist:!1,generateStaticMarkup:S}}function Ti(v,S,D,O){return D.generateStaticMarkup?(v.push(X(S)),!1):(S===""?v=O:(O&&v.push("<!-- -->"),v.push(X(S)),v=!0),v)}function Lr(v,S,D,O){S.generateStaticMarkup||D&&O&&v.push("<!-- -->")}var dh=Function.prototype.bind,uh=Symbol.for("react.client.reference");function Ul(v){if(v==null)return null;if(typeof v=="function")return v.$$typeof===uh?null:v.displayName||v.name||null;if(typeof v=="string")return v;switch(v){case r:return"Fragment";case c:return"Profiler";case o:return"StrictMode";case g:return"Suspense";case x:return"SuspenseList";case E:return"Activity"}if(typeof v=="object")switch(v.$$typeof){case i:return"Portal";case h:return v.displayName||"Context";case u:return(v._context.displayName||"Context")+".Consumer";case f:var S=v.render;return v=v.displayName,v||(v=S.displayName||S.name||"",v=v!==""?"ForwardRef("+v+")":"ForwardRef"),v;case y:return S=v.displayName||null,S!==null?S:Ul(v.type)||"Memo";case N:S=v._payload,v=v._init;try{return Ul(v(S))}catch{}}return null}var os={},Qo=null;function ki(v,S){if(v!==S){v.context._currentValue2=v.parentValue,v=v.parent;var D=S.parent;if(v===null){if(D!==null)throw Error(t(401))}else{if(D===null)throw Error(t(401));ki(v,D)}S.context._currentValue2=S.value}}function Ic(v){v.context._currentValue2=v.parentValue,v=v.parent,v!==null&&Ic(v)}function Fr(v){var S=v.parent;S!==null&&Fr(S),v.context._currentValue2=v.value}function Bc(v,S){if(v.context._currentValue2=v.parentValue,v=v.parent,v===null)throw Error(t(402));v.depth===S.depth?ki(v,S):Bc(v,S)}function bo(v,S){var D=S.parent;if(D===null)throw Error(t(402));v.depth===D.depth?ki(v,D):bo(v,D),S.context._currentValue2=S.value}function zr(v){var S=Qo;S!==v&&(S===null?Fr(v):v===null?Ic(S):S.depth===v.depth?ki(S,v):S.depth>v.depth?Bc(S,v):bo(S,v),Qo=v)}var hh={enqueueSetState:function(v,S){v=v._reactInternals,v.queue!==null&&v.queue.push(S)},enqueueReplaceState:function(v,S){v=v._reactInternals,v.replace=!0,v.queue=[S]},enqueueForceUpdate:function(){}},Vl={id:1,overflow:""};function Jo(v,S,D){var O=v.id;v=v.overflow;var H=32-Hc(O)-1;O&=~(1<<H),D+=1;var J=32-Hc(S)+H;if(30<J){var te=H-H%5;return J=(O&(1<<te)-1).toString(32),O>>=te,H-=te,{id:1<<32-Hc(S)+H|D<<H|O,overflow:J+v}}return{id:1<<J|D<<H|O,overflow:v}}var Hc=Math.clz32?Math.clz32:Tg,zf=Math.log,fh=Math.LN2;function Tg(v){return v>>>=0,v===0?32:31-(zf(v)/fh|0)|0}function Di(){}var mi=Error(t(460));function Ir(v,S,D){switch(D=v[D],D===void 0?v.push(S):D!==S&&(S.then(Di,Di),S=D),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(Di,Di):(v=S,v.status="pending",v.then(function(O){if(S.status==="pending"){var H=S;H.status="fulfilled",H.value=O}},function(O){if(S.status==="pending"){var H=S;H.status="rejected",H.reason=O}})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}throw Wl=S,mi}}var Wl=null;function Gl(){if(Wl===null)throw Error(t(459));var v=Wl;return Wl=null,v}function Yl(v,S){return v===S&&(v!==0||1/v===1/S)||v!==v&&S!==S}var qo=typeof Object.is=="function"?Object.is:Yl,or=null,Uc=null,Wd=null,$o=null,Na=null,Rn=null,Br=!1,Ua=!1,el=0,yo=0,Xl=-1,tl=0,Hr=null,Ur=null,ei=0;function Ri(){if(or===null)throw Error(t(321));return or}function Vc(){if(0<ei)throw Error(t(312));return{memoizedState:null,queue:null,next:null}}function nl(){return Rn===null?Na===null?(Br=!1,Na=Rn=Vc()):(Br=!0,Rn=Na):Rn.next===null?(Br=!1,Rn=Rn.next=Vc()):(Br=!0,Rn=Rn.next),Rn}function Kl(){var v=Hr;return Hr=null,v}function sl(){$o=Wd=Uc=or=null,Ua=!1,Na=null,ei=0,Rn=Ur=null}function Gd(v,S){return typeof S=="function"?S(v):S}function Zl(v,S,D){if(or=Ri(),Rn=nl(),Br){var O=Rn.queue;if(S=O.dispatch,Ur!==null&&(D=Ur.get(O),D!==void 0)){Ur.delete(O),O=Rn.memoizedState;do O=v(O,D.action),D=D.next;while(D!==null);return Rn.memoizedState=O,[O,S]}return[Rn.memoizedState,S]}return v=v===Gd?typeof S=="function"?S():S:D!==void 0?D(S):S,Rn.memoizedState=v,v=Rn.queue={last:null,dispatch:null},v=v.dispatch=If.bind(null,or,v),[Rn.memoizedState,v]}function Wc(v,S){if(or=Ri(),Rn=nl(),S=S===void 0?null:S,Rn!==null){var D=Rn.memoizedState;if(D!==null&&S!==null){var O=D[1];e:if(O===null)O=!1;else{for(var H=0;H<O.length&&H<S.length;H++)if(!qo(S[H],O[H])){O=!1;break e}O=!0}if(O)return D[0]}}return v=v(),Rn.memoizedState=[v,S],v}function If(v,S,D){if(25<=ei)throw Error(t(301));if(v===or)if(Ua=!0,v={action:D,next:null},Ur===null&&(Ur=new Map),D=Ur.get(S),D===void 0)Ur.set(S,v);else{for(S=D;S.next!==null;)S=S.next;S.next=v}}function kg(){throw Error(t(440))}function Dg(){throw Error(t(394))}function Rg(){throw Error(t(479))}function Gc(v,S,D){Ri();var O=yo++,H=Wd;if(typeof v.$$FORM_ACTION=="function"){var J=null,te=$o;H=H.formState;var Ee=v.$$IS_SIGNATURE_EQUAL;if(H!==null&&typeof Ee=="function"){var ce=H[1];Ee.call(v,H[2],H[3])&&(J=D!==void 0?"p"+D:"k"+I(JSON.stringify([te,null,O]),0),ce===J&&(Xl=O,S=H[0]))}var _e=v.bind(null,S);return v=function(Pe){_e(Pe)},typeof _e.$$FORM_ACTION=="function"&&(v.$$FORM_ACTION=function(Pe){Pe=_e.$$FORM_ACTION(Pe),D!==void 0&&(D+="",Pe.action=D);var it=Pe.data;return it&&(J===null&&(J=D!==void 0?"p"+D:"k"+I(JSON.stringify([te,null,O]),0)),it.append("$ACTION_KEY",J)),Pe}),[S,v,!1]}var He=v.bind(null,S);return[S,function(Pe){He(Pe)},!1]}function Bf(v){var S=tl;return tl+=1,Hr===null&&(Hr=[]),Ir(Hr,v,S)}function Mg(){throw Error(t(393))}var Hf={readContext:function(v){return v._currentValue2},use:function(v){if(v!==null&&typeof v=="object"){if(typeof v.then=="function")return Bf(v);if(v.$$typeof===h)return v._currentValue2}throw Error(t(438,String(v)))},useContext:function(v){return Ri(),v._currentValue2},useMemo:Wc,useReducer:Zl,useRef:function(v){or=Ri(),Rn=nl();var S=Rn.memoizedState;return S===null?(v={current:v},Rn.memoizedState=v):S},useState:function(v){return Zl(Gd,v)},useInsertionEffect:Di,useLayoutEffect:Di,useCallback:function(v,S){return Wc(function(){return v},S)},useImperativeHandle:Di,useEffect:Di,useDebugValue:Di,useDeferredValue:function(v,S){return Ri(),S!==void 0?S:v},useTransition:function(){return Ri(),[!1,Dg]},useId:function(){var v=Uc.treeContext,S=v.overflow;v=v.id,v=(v&~(1<<32-Hc(v)-1)).toString(32)+S;var D=Yd;if(D===null)throw Error(t(404));return S=el++,v="_"+D.idPrefix+"R_"+v,0<S&&(v+="H"+S.toString(32)),v+"_"},useSyncExternalStore:function(v,S,D){if(D===void 0)throw Error(t(407));return D()},useOptimistic:function(v){return Ri(),[v,Rg]},useActionState:Gc,useFormState:Gc,useHostTransitionStatus:function(){return Ri(),Ne},useMemoCache:function(v){for(var S=Array(v),D=0;D<v;D++)S[D]=R;return S},useCacheRefresh:function(){return Mg},useEffectEvent:function(){return kg}},Yd=null,Pg={getCacheForType:function(){throw Error(t(248))},cacheSignal:function(){throw Error(t(248))}},Xd,Uf;function Ql(v){if(Xd===void 0)try{throw Error()}catch(D){var S=D.stack.trim().match(/\n( *(at )?)/);Xd=S&&S[1]||"",Uf=-1<D.stack.indexOf(`
    at`)?" (<anonymous>)":-1<D.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xd+v+Uf}var mh=!1;function Kd(v,S){if(!v||mh)return"";mh=!0;var D=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var O={DetermineComponentFrameRoot:function(){try{if(S){var Pe=function(){throw Error()};if(Object.defineProperty(Pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Pe,[])}catch(pt){var it=pt}Reflect.construct(v,[],Pe)}else{try{Pe.call()}catch(pt){it=pt}v.call(Pe.prototype)}}else{try{throw Error()}catch(pt){it=pt}(Pe=v())&&typeof Pe.catch=="function"&&Pe.catch(function(){})}}catch(pt){if(pt&&it&&typeof pt.stack=="string")return[pt.stack,it.stack]}return[null,null]}};O.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var H=Object.getOwnPropertyDescriptor(O.DetermineComponentFrameRoot,"name");H&&H.configurable&&Object.defineProperty(O.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var J=O.DetermineComponentFrameRoot(),te=J[0],Ee=J[1];if(te&&Ee){var ce=te.split(`
`),_e=Ee.split(`
`);for(H=O=0;O<ce.length&&!ce[O].includes("DetermineComponentFrameRoot");)O++;for(;H<_e.length&&!_e[H].includes("DetermineComponentFrameRoot");)H++;if(O===ce.length||H===_e.length)for(O=ce.length-1,H=_e.length-1;1<=O&&0<=H&&ce[O]!==_e[H];)H--;for(;1<=O&&0<=H;O--,H--)if(ce[O]!==_e[H]){if(O!==1||H!==1)do if(O--,H--,0>H||ce[O]!==_e[H]){var He=`
`+ce[O].replace(" at new "," at ");return v.displayName&&He.includes("<anonymous>")&&(He=He.replace("<anonymous>",v.displayName)),He}while(1<=O&&0<=H);break}}}finally{mh=!1,Error.prepareStackTrace=D}return(D=v?v.displayName||v.name:"")?Ql(D):""}function Zd(v){if(typeof v=="string")return Ql(v);if(typeof v=="function")return v.prototype&&v.prototype.isReactComponent?Kd(v,!0):Kd(v,!1);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case f:return Kd(v.render,!1);case y:return Kd(v.type,!1);case N:var S=v,D=S._payload;S=S._init;try{v=S(D)}catch{return Ql("Lazy")}return Zd(v)}if(typeof v.name=="string"){e:{D=v.name,S=v.env;var O=v.debugLocation;if(O!=null&&(v=Error.prepareStackTrace,Error.prepareStackTrace=void 0,O=O.stack,Error.prepareStackTrace=v,O.startsWith(`Error: react-stack-top-frame
`)&&(O=O.slice(29)),v=O.indexOf(`
`),v!==-1&&(O=O.slice(v+1)),v=O.indexOf("react_stack_bottom_frame"),v!==-1&&(v=O.lastIndexOf(`
`,v)),v=v!==-1?O=O.slice(0,v):"",O=v.lastIndexOf(`
`),v=O===-1?v:v.slice(O+1),v.indexOf(D)!==-1)){D=`
`+v;break e}D=Ql(D+(S?" ["+S+"]":""))}return D}}switch(v){case x:return Ql("SuspenseList");case g:return Ql("Suspense")}return""}function Jl(v,S){return(500<S.byteSize||!1)&&S.contentPreamble===null}function Og(v){if(typeof v=="object"&&v!==null&&typeof v.environmentName=="string"){var S=v.environmentName;v=[v].slice(0),typeof v[0]=="string"?v.splice(0,1,"[%s] "+v[0]," "+S+" "):v.splice(0,0,"[%s]"," "+S+" "),v.unshift(console),S=dh.apply(console.error,v),S()}else console.error(v);return null}function Lg(v,S,D,O,H,J,te,Ee,ce,_e,He){var Pe=new Set;this.destination=null,this.flushScheduled=!1,this.resumableState=v,this.renderState=S,this.rootFormatContext=D,this.progressiveChunkSize=O===void 0?12800:O,this.status=10,this.fatalError=null,this.pendingRootTasks=this.allPendingTasks=this.nextSegmentId=0,this.completedPreambleSegments=this.completedRootSegment=null,this.byteSize=0,this.abortableTasks=Pe,this.pingedTasks=[],this.clientRenderedBoundaries=[],this.completedBoundaries=[],this.partialBoundaries=[],this.trackedPostpones=null,this.onError=H===void 0?Og:H,this.onPostpone=_e===void 0?Di:_e,this.onAllReady=J===void 0?Di:J,this.onShellReady=te===void 0?Di:te,this.onShellError=Ee===void 0?Di:Ee,this.onFatalError=ce===void 0?Di:ce,this.formState=He===void 0?null:He}function Vf(v,S,D,O,H,J,te,Ee,ce,_e,He,Pe){return S=new Lg(S,D,O,H,J,te,Ee,ce,_e,He,Pe),D=il(S,0,null,O,!1,!1),D.parentFlushed=!0,v=Qd(S,null,v,-1,null,D,null,null,S.abortableTasks,null,O,null,Vl,null,null),vo(v),S.pingedTasks.push(v),S}var ti=null;function ql(v,S){v.pingedTasks.push(S),v.pingedTasks.length===1&&(v.flushScheduled=v.destination!==null,Gf(v))}function gh(v,S,D,O,H){return D={status:0,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,row:S,completedSegments:[],byteSize:0,fallbackAbortableTasks:D,errorDigest:null,contentState:kn(),fallbackState:kn(),contentPreamble:O,fallbackPreamble:H,trackedContentKeyPath:null,trackedFallbackNode:null},S!==null&&(S.pendingTasks++,O=S.boundaries,O!==null&&(v.allPendingTasks++,D.pendingTasks++,O.push(D)),v=S.inheritedHoistables,v!==null&&Or(D.contentState,v)),D}function Qd(v,S,D,O,H,J,te,Ee,ce,_e,He,Pe,it,pt,Zt){v.allPendingTasks++,H===null?v.pendingRootTasks++:H.pendingTasks++,pt!==null&&pt.pendingTasks++;var Ut={replay:null,node:D,childIndex:O,ping:function(){return ql(v,Ut)},blockedBoundary:H,blockedSegment:J,blockedPreamble:te,hoistableState:Ee,abortSet:ce,keyPath:_e,formatContext:He,context:Pe,treeContext:it,row:pt,componentStack:Zt,thenableState:S};return ce.add(Ut),Ut}function Wf(v,S,D,O,H,J,te,Ee,ce,_e,He,Pe,it,pt){v.allPendingTasks++,J===null?v.pendingRootTasks++:J.pendingTasks++,it!==null&&it.pendingTasks++,D.pendingTasks++;var Zt={replay:D,node:O,childIndex:H,ping:function(){return ql(v,Zt)},blockedBoundary:J,blockedSegment:null,blockedPreamble:null,hoistableState:te,abortSet:Ee,keyPath:ce,formatContext:_e,context:He,treeContext:Pe,row:it,componentStack:pt,thenableState:S};return Ee.add(Zt),Zt}function il(v,S,D,O,H,J){return{status:0,parentFlushed:!1,id:-1,index:S,chunks:[],children:[],preambleChildren:[],parentFormatContext:O,boundary:D,lastPushedText:H,textEmbedded:J}}function vo(v){var S=v.node;typeof S=="object"&&S!==null&&S.$$typeof===s&&(v.componentStack={parent:v.componentStack,type:S.type})}function Yc(v){return v===null?null:{parent:v.parent,type:"Suspense Fallback"}}function wo(v){var S={};return v&&Object.defineProperty(S,"componentStack",{configurable:!0,enumerable:!0,get:function(){try{var D="",O=v;do D+=Zd(O.type),O=O.parent;while(O);var H=D}catch(J){H=`
Error generating stack: `+J.message+`
`+J.stack}return Object.defineProperty(S,"componentStack",{value:H}),H}}),S}function Gs(v,S,D){if(v=v.onError,S=v(S,D),S==null||typeof S=="string")return S}function lr(v,S){var D=v.onShellError,O=v.onFatalError;D(S),O(S),v.destination!==null?(v.status=14,v.destination.destroy(S)):(v.status=13,v.fatalError=S)}function Vn(v,S){Va(v,S.next,S.hoistables)}function Va(v,S,D){for(;S!==null;){D!==null&&(Or(S.hoistables,D),S.inheritedHoistables=D);var O=S.boundaries;if(O!==null){S.boundaries=null;for(var H=0;H<O.length;H++){var J=O[H];D!==null&&Or(J.contentState,D),No(v,J,null,null)}}if(S.pendingTasks--,0<S.pendingTasks)break;D=S.hoistables,S=S.next}}function Jd(v,S){var D=S.boundaries;if(D!==null&&S.pendingTasks===D.length){for(var O=!0,H=0;H<D.length;H++){var J=D[H];if(J.pendingTasks!==1||J.parentFlushed||Jl(v,J)){O=!1;break}}O&&Va(v,S,S.hoistables)}}function $l(v){var S={pendingTasks:1,boundaries:null,hoistables:kn(),inheritedHoistables:null,together:!1,next:null};return v!==null&&0<v.pendingTasks&&(S.pendingTasks++,S.boundaries=[],v.next=S),S}function ph(v,S,D,O,H){var J=S.keyPath,te=S.treeContext,Ee=S.row;S.keyPath=D,D=O.length;var ce=null;if(S.replay!==null){var _e=S.replay.slots;if(_e!==null&&typeof _e=="object")for(var He=0;He<D;He++){var Pe=H!=="backwards"&&H!=="unstable_legacy-backwards"?He:D-1-He,it=O[Pe];S.row=ce=$l(ce),S.treeContext=Jo(te,D,Pe);var pt=_e[Pe];typeof pt=="number"?(eu(v,S,pt,it,Pe),delete _e[Pe]):Fs(v,S,it,Pe),--ce.pendingTasks===0&&Vn(v,ce)}else for(_e=0;_e<D;_e++)He=H!=="backwards"&&H!=="unstable_legacy-backwards"?_e:D-1-_e,Pe=O[He],S.row=ce=$l(ce),S.treeContext=Jo(te,D,He),Fs(v,S,Pe,He),--ce.pendingTasks===0&&Vn(v,ce)}else if(H!=="backwards"&&H!=="unstable_legacy-backwards")for(H=0;H<D;H++)_e=O[H],S.row=ce=$l(ce),S.treeContext=Jo(te,D,H),Fs(v,S,_e,H),--ce.pendingTasks===0&&Vn(v,ce);else{for(H=S.blockedSegment,_e=H.children.length,He=H.chunks.length,Pe=D-1;0<=Pe;Pe--){it=O[Pe],S.row=ce=$l(ce),S.treeContext=Jo(te,D,Pe),pt=il(v,He,null,S.formatContext,Pe===0?H.lastPushedText:!0,!0),H.children.splice(_e,0,pt),S.blockedSegment=pt;try{Fs(v,S,it,Pe),Lr(pt.chunks,v.renderState,pt.lastPushedText,pt.textEmbedded),pt.status=1,--ce.pendingTasks===0&&Vn(v,ce)}catch(Zt){throw pt.status=v.status===12?3:4,Zt}}S.blockedSegment=H,H.lastPushedText=!1}Ee!==null&&ce!==null&&0<ce.pendingTasks&&(Ee.pendingTasks++,ce.next=Ee),S.treeContext=te,S.row=Ee,S.keyPath=J}function qd(v,S,D,O,H,J){var te=S.thenableState;for(S.thenableState=null,or={},Uc=S,Wd=v,$o=D,yo=el=0,Xl=-1,tl=0,Hr=te,v=O(H,J);Ua;)Ua=!1,yo=el=0,Xl=-1,tl=0,ei+=1,Rn=null,v=O(H,J);return sl(),v}function al(v,S,D,O,H,J,te){var Ee=!1;if(J!==0&&v.formState!==null){var ce=S.blockedSegment;if(ce!==null){Ee=!0,ce=ce.chunks;for(var _e=0;_e<J;_e++)_e===te?ce.push("<!--F!-->"):ce.push("<!--F-->")}}J=S.keyPath,S.keyPath=D,H?(D=S.treeContext,S.treeContext=Jo(D,1,0),Fs(v,S,O,-1),S.treeContext=D):Ee?Fs(v,S,O,-1):ja(v,S,O,-1),S.keyPath=J}function $d(v,S,D,O,H,J){if(typeof O=="function")if(O.prototype&&O.prototype.isReactComponent){var te=H;if("ref"in H){te={};for(var Ee in H)Ee!=="ref"&&(te[Ee]=H[Ee])}var ce=O.defaultProps;if(ce){te===H&&(te=Y({},te,H));for(var _e in ce)te[_e]===void 0&&(te[_e]=ce[_e])}H=te,te=os,ce=O.contextType,typeof ce=="object"&&ce!==null&&(te=ce._currentValue2),te=new O(H,te);var He=te.state!==void 0?te.state:null;if(te.updater=hh,te.props=H,te.state=He,ce={queue:[],replace:!1},te._reactInternals=ce,J=O.contextType,te.context=typeof J=="object"&&J!==null?J._currentValue2:os,J=O.getDerivedStateFromProps,typeof J=="function"&&(J=J(H,He),He=J==null?He:Y({},He,J),te.state=He),typeof O.getDerivedStateFromProps!="function"&&typeof te.getSnapshotBeforeUpdate!="function"&&(typeof te.UNSAFE_componentWillMount=="function"||typeof te.componentWillMount=="function"))if(O=te.state,typeof te.componentWillMount=="function"&&te.componentWillMount(),typeof te.UNSAFE_componentWillMount=="function"&&te.UNSAFE_componentWillMount(),O!==te.state&&hh.enqueueReplaceState(te,te.state,null),ce.queue!==null&&0<ce.queue.length)if(O=ce.queue,J=ce.replace,ce.queue=null,ce.replace=!1,J&&O.length===1)te.state=O[0];else{for(ce=J?O[0]:te.state,He=!0,J=J?1:0;J<O.length;J++)_e=O[J],_e=typeof _e=="function"?_e.call(te,ce,H,void 0):_e,_e!=null&&(He?(He=!1,ce=Y({},ce,_e)):Y(ce,_e));te.state=ce}else ce.queue=null;if(O=te.render(),v.status===12)throw null;H=S.keyPath,S.keyPath=D,ja(v,S,O,-1),S.keyPath=H}else{if(O=qd(v,S,D,O,H,void 0),v.status===12)throw null;al(v,S,D,O,el!==0,yo,Xl)}else if(typeof O=="string")if(te=S.blockedSegment,te===null)te=H.children,ce=S.formatContext,He=S.keyPath,S.formatContext=je(ce,O,H),S.keyPath=D,Fs(v,S,te,-1),S.formatContext=ce,S.keyPath=He;else{if(He=It(te.chunks,O,H,v.resumableState,v.renderState,S.blockedPreamble,S.hoistableState,S.formatContext,te.lastPushedText),te.lastPushedText=!1,ce=S.formatContext,J=S.keyPath,S.keyPath=D,(S.formatContext=je(ce,O,H)).insertionMode===3){D=il(v,0,null,S.formatContext,!1,!1),te.preambleChildren.push(D),S.blockedSegment=D;try{D.status=6,Fs(v,S,He,-1),Lr(D.chunks,v.renderState,D.lastPushedText,D.textEmbedded),D.status=1}finally{S.blockedSegment=te}}else Fs(v,S,He,-1);S.formatContext=ce,S.keyPath=J;e:{switch(S=te.chunks,v=v.resumableState,O){case"title":case"style":case"script":case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break e;case"body":if(1>=ce.insertionMode){v.hasBody=!0;break e}break;case"html":if(ce.insertionMode===0){v.hasHtml=!0;break e}break;case"head":if(1>=ce.insertionMode)break e}S.push(le(O))}te.lastPushedText=!1}else{switch(O){case A:case o:case c:case r:O=S.keyPath,S.keyPath=D,ja(v,S,H.children,-1),S.keyPath=O;return;case E:O=S.blockedSegment,O===null?H.mode!=="hidden"&&(O=S.keyPath,S.keyPath=D,Fs(v,S,H.children,-1),S.keyPath=O):H.mode!=="hidden"&&(v.renderState.generateStaticMarkup||O.chunks.push("<!--&-->"),O.lastPushedText=!1,te=S.keyPath,S.keyPath=D,Fs(v,S,H.children,-1),S.keyPath=te,v.renderState.generateStaticMarkup||O.chunks.push("<!--/&-->"),O.lastPushedText=!1);return;case x:e:{if(O=H.children,H=H.revealOrder,H==="forwards"||H==="backwards"||H==="unstable_legacy-backwards"){if(W(O)){ph(v,S,D,O,H);break e}if((te=z(O))&&(te=te.call(O))){if(ce=te.next(),!ce.done){do ce=te.next();while(!ce.done);ph(v,S,D,O,H)}break e}}H==="together"?(H=S.keyPath,te=S.row,ce=S.row=$l(null),ce.boundaries=[],ce.together=!0,S.keyPath=D,ja(v,S,O,-1),--ce.pendingTasks===0&&Vn(v,ce),S.keyPath=H,S.row=te,te!==null&&0<ce.pendingTasks&&(te.pendingTasks++,ce.next=te)):(H=S.keyPath,S.keyPath=D,ja(v,S,O,-1),S.keyPath=H)}return;case M:case j:throw Error(t(343));case g:e:if(S.replay!==null){O=S.keyPath,te=S.formatContext,ce=S.row,S.keyPath=D,S.formatContext=lt(v.resumableState,te),S.row=null,D=H.children;try{Fs(v,S,D,-1)}finally{S.keyPath=O,S.formatContext=te,S.row=ce}}else{O=S.keyPath,J=S.formatContext;var Pe=S.row,it=S.blockedBoundary;_e=S.blockedPreamble;var pt=S.hoistableState;Ee=S.blockedSegment;var Zt=H.fallback;H=H.children;var Ut=new Set,Bt=gh(v,S.row,Ut,null,null);v.trackedPostpones!==null&&(Bt.trackedContentKeyPath=D);var zt=il(v,Ee.chunks.length,Bt,S.formatContext,!1,!1);Ee.children.push(zt),Ee.lastPushedText=!1;var Wt=il(v,0,null,S.formatContext,!1,!1);if(Wt.parentFlushed=!0,v.trackedPostpones!==null){te=S.componentStack,ce=[D[0],"Suspense Fallback",D[2]],He=[ce[1],ce[2],[],null],v.trackedPostpones.workingMap.set(ce,He),Bt.trackedFallbackNode=He,S.blockedSegment=zt,S.blockedPreamble=Bt.fallbackPreamble,S.keyPath=ce,S.formatContext=Je(v.resumableState,J),S.componentStack=Yc(te),zt.status=6;try{Fs(v,S,Zt,-1),Lr(zt.chunks,v.renderState,zt.lastPushedText,zt.textEmbedded),zt.status=1}catch(_n){throw zt.status=v.status===12?3:4,_n}finally{S.blockedSegment=Ee,S.blockedPreamble=_e,S.keyPath=O,S.formatContext=J}S=Qd(v,null,H,-1,Bt,Wt,Bt.contentPreamble,Bt.contentState,S.abortSet,D,lt(v.resumableState,S.formatContext),S.context,S.treeContext,null,te),vo(S),v.pingedTasks.push(S)}else{S.blockedBoundary=Bt,S.blockedPreamble=Bt.contentPreamble,S.hoistableState=Bt.contentState,S.blockedSegment=Wt,S.keyPath=D,S.formatContext=lt(v.resumableState,J),S.row=null,Wt.status=6;try{if(Fs(v,S,H,-1),Lr(Wt.chunks,v.renderState,Wt.lastPushedText,Wt.textEmbedded),Wt.status=1,Zc(Bt,Wt),Bt.pendingTasks===0&&Bt.status===0){if(Bt.status=1,!Jl(v,Bt)){Pe!==null&&--Pe.pendingTasks===0&&Vn(v,Pe),v.pendingRootTasks===0&&S.blockedPreamble&&Wa(v);break e}}else Pe!==null&&Pe.together&&Jd(v,Pe)}catch(_n){Bt.status=4,v.status===12?(Wt.status=3,te=v.fatalError):(Wt.status=4,te=_n),ce=wo(S.componentStack),He=Gs(v,te,ce),Bt.errorDigest=He,nu(v,Bt)}finally{S.blockedBoundary=it,S.blockedPreamble=_e,S.hoistableState=pt,S.blockedSegment=Ee,S.keyPath=O,S.formatContext=J,S.row=Pe}S=Qd(v,null,Zt,-1,it,zt,Bt.fallbackPreamble,Bt.fallbackState,Ut,[D[0],"Suspense Fallback",D[2]],Je(v.resumableState,S.formatContext),S.context,S.treeContext,S.row,Yc(S.componentStack)),vo(S),v.pingedTasks.push(S)}}return}if(typeof O=="object"&&O!==null)switch(O.$$typeof){case f:if("ref"in H)for(Zt in te={},H)Zt!=="ref"&&(te[Zt]=H[Zt]);else te=H;O=qd(v,S,D,O.render,te,J),al(v,S,D,O,el!==0,yo,Xl);return;case y:$d(v,S,D,O.type,H,J);return;case h:if(ce=H.children,te=S.keyPath,H=H.value,He=O._currentValue2,O._currentValue2=H,J=Qo,Qo=O={parent:J,depth:J===null?0:J.depth+1,context:O,parentValue:He,value:H},S.context=O,S.keyPath=D,ja(v,S,ce,-1),v=Qo,v===null)throw Error(t(403));v.context._currentValue2=v.parentValue,v=Qo=v.parent,S.context=v,S.keyPath=te;return;case u:H=H.children,O=H(O._context._currentValue2),H=S.keyPath,S.keyPath=D,ja(v,S,O,-1),S.keyPath=H;return;case N:if(te=O._init,O=te(O._payload),v.status===12)throw null;$d(v,S,D,O,H,J);return}throw Error(t(130,O==null?O:typeof O,""))}}function eu(v,S,D,O,H){var J=S.replay,te=S.blockedBoundary,Ee=il(v,0,null,S.formatContext,!1,!1);Ee.id=D,Ee.parentFlushed=!0;try{S.replay=null,S.blockedSegment=Ee,Fs(v,S,O,H),Ee.status=1,te===null?v.completedRootSegment=Ee:(Zc(te,Ee),te.parentFlushed&&v.partialBoundaries.push(te))}finally{S.replay=J,S.blockedSegment=null}}function ja(v,S,D,O){S.replay!==null&&typeof S.replay.slots=="number"?eu(v,S,S.replay.slots,D,O):(S.node=D,S.childIndex=O,D=S.componentStack,vo(S),tu(v,S),S.componentStack=D)}function tu(v,S){var D=S.node,O=S.childIndex;if(D!==null){if(typeof D=="object"){switch(D.$$typeof){case s:var H=D.type,J=D.key,te=D.props;D=te.ref;var Ee=D!==void 0?D:null,ce=Ul(H),_e=J??(O===-1?0:O);if(J=[S.keyPath,ce,_e],S.replay!==null)e:{var He=S.replay;for(O=He.nodes,D=0;D<O.length;D++){var Pe=O[D];if(_e===Pe[1]){if(Pe.length===4){if(ce!==null&&ce!==Pe[0])throw Error(t(490,Pe[0],ce));var it=Pe[2];ce=Pe[3],_e=S.node,S.replay={nodes:it,slots:ce,pendingTasks:1};try{if($d(v,S,J,H,te,Ee),S.replay.pendingTasks===1&&0<S.replay.nodes.length)throw Error(t(488));S.replay.pendingTasks--}catch(on){if(typeof on=="object"&&on!==null&&(on===mi||typeof on.then=="function"))throw S.node===_e?S.replay=He:O.splice(D,1),on;S.replay.pendingTasks--,te=wo(S.componentStack),J=v,v=S.blockedBoundary,H=on,te=Gs(J,H,te),Wr(J,v,it,ce,H,te)}S.replay=He}else{if(H!==g)throw Error(t(490,"Suspense",Ul(H)||"Unknown"));t:{He=void 0,H=Pe[5],Ee=Pe[2],ce=Pe[3],_e=Pe[4]===null?[]:Pe[4][2],Pe=Pe[4]===null?null:Pe[4][3];var pt=S.keyPath,Zt=S.formatContext,Ut=S.row,Bt=S.replay,zt=S.blockedBoundary,Wt=S.hoistableState,_n=te.children,ns=te.fallback,rn=new Set;te=gh(v,S.row,rn,null,null),te.parentFlushed=!0,te.rootSegmentID=H,S.blockedBoundary=te,S.hoistableState=te.contentState,S.keyPath=J,S.formatContext=lt(v.resumableState,Zt),S.row=null,S.replay={nodes:Ee,slots:ce,pendingTasks:1};try{if(Fs(v,S,_n,-1),S.replay.pendingTasks===1&&0<S.replay.nodes.length)throw Error(t(488));if(S.replay.pendingTasks--,te.pendingTasks===0&&te.status===0){te.status=1,v.completedBoundaries.push(te);break t}}catch(on){te.status=4,it=wo(S.componentStack),He=Gs(v,on,it),te.errorDigest=He,S.replay.pendingTasks--,v.clientRenderedBoundaries.push(te)}finally{S.blockedBoundary=zt,S.hoistableState=Wt,S.replay=Bt,S.keyPath=pt,S.formatContext=Zt,S.row=Ut}it=Wf(v,null,{nodes:_e,slots:Pe,pendingTasks:0},ns,-1,zt,te.fallbackState,rn,[J[0],"Suspense Fallback",J[2]],Je(v.resumableState,S.formatContext),S.context,S.treeContext,S.row,Yc(S.componentStack)),vo(it),v.pingedTasks.push(it)}}O.splice(D,1);break e}}}else $d(v,S,J,H,te,Ee);return;case i:throw Error(t(257));case N:if(it=D._init,D=it(D._payload),v.status===12)throw null;ja(v,S,D,O);return}if(W(D)){Xc(v,S,D,O);return}if((it=z(D))&&(it=it.call(D))){if(D=it.next(),!D.done){te=[];do te.push(D.value),D=it.next();while(!D.done);Xc(v,S,te,O)}return}if(typeof D.then=="function")return S.thenableState=null,ja(v,S,Bf(D),O);if(D.$$typeof===h)return ja(v,S,D._currentValue2,O);throw O=Object.prototype.toString.call(D),Error(t(31,O==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":O))}typeof D=="string"?(O=S.blockedSegment,O!==null&&(O.lastPushedText=Ti(O.chunks,D,v.renderState,O.lastPushedText))):(typeof D=="number"||typeof D=="bigint")&&(O=S.blockedSegment,O!==null&&(O.lastPushedText=Ti(O.chunks,""+D,v.renderState,O.lastPushedText)))}}function Xc(v,S,D,O){var H=S.keyPath;if(O!==-1&&(S.keyPath=[S.keyPath,"Fragment",O],S.replay!==null)){for(var J=S.replay,te=J.nodes,Ee=0;Ee<te.length;Ee++){var ce=te[Ee];if(ce[1]===O){O=ce[2],ce=ce[3],S.replay={nodes:O,slots:ce,pendingTasks:1};try{if(Xc(v,S,D,-1),S.replay.pendingTasks===1&&0<S.replay.nodes.length)throw Error(t(488));S.replay.pendingTasks--}catch(Pe){if(typeof Pe=="object"&&Pe!==null&&(Pe===mi||typeof Pe.then=="function"))throw Pe;S.replay.pendingTasks--,D=wo(S.componentStack);var _e=S.blockedBoundary,He=Pe;D=Gs(v,He,D),Wr(v,_e,O,ce,He,D)}S.replay=J,te.splice(Ee,1);break}}S.keyPath=H;return}if(J=S.treeContext,te=D.length,S.replay!==null&&(Ee=S.replay.slots,Ee!==null&&typeof Ee=="object")){for(O=0;O<te;O++)ce=D[O],S.treeContext=Jo(J,te,O),_e=Ee[O],typeof _e=="number"?(eu(v,S,_e,ce,O),delete Ee[O]):Fs(v,S,ce,O);S.treeContext=J,S.keyPath=H;return}for(Ee=0;Ee<te;Ee++)O=D[Ee],S.treeContext=Jo(J,te,Ee),Fs(v,S,O,Ee);S.treeContext=J,S.keyPath=H}function Vr(v,S,D){if(D.status=5,D.rootSegmentID=v.nextSegmentId++,v=D.trackedContentKeyPath,v===null)throw Error(t(486));var O=D.trackedFallbackNode,H=[],J=S.workingMap.get(v);return J===void 0?(D=[v[1],v[2],H,null,O,D.rootSegmentID],S.workingMap.set(v,D),gi(D,v[0],S),D):(J[4]=O,J[5]=D.rootSegmentID,J)}function So(v,S,D,O){O.status=5;var H=D.keyPath,J=D.blockedBoundary;if(J===null)O.id=v.nextSegmentId++,S.rootSlots=O.id,v.completedRootSegment!==null&&(v.completedRootSegment.status=5);else{if(J!==null&&J.status===0){var te=Vr(v,S,J);if(J.trackedContentKeyPath===H&&D.childIndex===-1){O.id===-1&&(O.id=O.parentFlushed?J.rootSegmentID:v.nextSegmentId++),te[3]=O.id;return}}if(O.id===-1&&(O.id=O.parentFlushed&&J!==null?J.rootSegmentID:v.nextSegmentId++),D.childIndex===-1)H===null?S.rootSlots=O.id:(D=S.workingMap.get(H),D===void 0?(D=[H[1],H[2],[],O.id],gi(D,H[0],S)):D[3]=O.id);else{if(H===null){if(v=S.rootSlots,v===null)v=S.rootSlots={};else if(typeof v=="number")throw Error(t(491))}else if(J=S.workingMap,te=J.get(H),te===void 0)v={},te=[H[1],H[2],[],v],J.set(H,te),gi(te,H[0],S);else if(v=te[3],v===null)v=te[3]={};else if(typeof v=="number")throw Error(t(491));v[D.childIndex]=O.id}}}function nu(v,S){v=v.trackedPostpones,v!==null&&(S=S.trackedContentKeyPath,S!==null&&(S=v.workingMap.get(S),S!==void 0&&(S.length=4,S[2]=[],S[3]=null)))}function rl(v,S,D){return Wf(v,D,S.replay,S.node,S.childIndex,S.blockedBoundary,S.hoistableState,S.abortSet,S.keyPath,S.formatContext,S.context,S.treeContext,S.row,S.componentStack)}function Kc(v,S,D){var O=S.blockedSegment,H=il(v,O.chunks.length,null,S.formatContext,O.lastPushedText,!0);return O.children.push(H),O.lastPushedText=!1,Qd(v,D,S.node,S.childIndex,S.blockedBoundary,H,S.blockedPreamble,S.hoistableState,S.abortSet,S.keyPath,S.formatContext,S.context,S.treeContext,S.row,S.componentStack)}function Fs(v,S,D,O){var H=S.formatContext,J=S.context,te=S.keyPath,Ee=S.treeContext,ce=S.componentStack,_e=S.blockedSegment;if(_e===null){_e=S.replay;try{return ja(v,S,D,O)}catch(it){if(sl(),D=it===mi?Gl():it,v.status!==12&&typeof D=="object"&&D!==null){if(typeof D.then=="function"){O=it===mi?Kl():null,v=rl(v,S,O).ping,D.then(v,v),S.formatContext=H,S.context=J,S.keyPath=te,S.treeContext=Ee,S.componentStack=ce,S.replay=_e,zr(J);return}if(D.message==="Maximum call stack size exceeded"){D=it===mi?Kl():null,D=rl(v,S,D),v.pingedTasks.push(D),S.formatContext=H,S.context=J,S.keyPath=te,S.treeContext=Ee,S.componentStack=ce,S.replay=_e,zr(J);return}}}}else{var He=_e.children.length,Pe=_e.chunks.length;try{return ja(v,S,D,O)}catch(it){if(sl(),_e.children.length=He,_e.chunks.length=Pe,D=it===mi?Gl():it,v.status!==12&&typeof D=="object"&&D!==null){if(typeof D.then=="function"){_e=D,D=it===mi?Kl():null,v=Kc(v,S,D).ping,_e.then(v,v),S.formatContext=H,S.context=J,S.keyPath=te,S.treeContext=Ee,S.componentStack=ce,zr(J);return}if(D.message==="Maximum call stack size exceeded"){_e=it===mi?Kl():null,_e=Kc(v,S,_e),v.pingedTasks.push(_e),S.formatContext=H,S.context=J,S.keyPath=te,S.treeContext=Ee,S.componentStack=ce,zr(J);return}}}}throw S.formatContext=H,S.context=J,S.keyPath=te,S.treeContext=Ee,zr(J),D}function xh(v){var S=v.blockedBoundary,D=v.blockedSegment;D!==null&&(D.status=3,No(this,S,v.row,D))}function Wr(v,S,D,O,H,J){for(var te=0;te<D.length;te++){var Ee=D[te];if(Ee.length===4)Wr(v,S,Ee[2],Ee[3],H,J);else{Ee=Ee[5];var ce=v,_e=J,He=gh(ce,null,new Set,null,null);He.parentFlushed=!0,He.rootSegmentID=Ee,He.status=4,He.errorDigest=_e,He.parentFlushed&&ce.clientRenderedBoundaries.push(He)}}if(D.length=0,O!==null){if(S===null)throw Error(t(487));if(S.status!==4&&(S.status=4,S.errorDigest=J,S.parentFlushed&&v.clientRenderedBoundaries.push(S)),typeof O=="object")for(var Pe in O)delete O[Pe]}}function su(v,S,D){var O=v.blockedBoundary,H=v.blockedSegment;if(H!==null){if(H.status===6)return;H.status=3}var J=wo(v.componentStack);if(O===null){if(S.status!==13&&S.status!==14){if(O=v.replay,O===null){S.trackedPostpones!==null&&H!==null?(O=S.trackedPostpones,Gs(S,D,J),So(S,O,v,H),No(S,null,v.row,H)):(Gs(S,D,J),lr(S,D));return}O.pendingTasks--,O.pendingTasks===0&&0<O.nodes.length&&(H=Gs(S,D,J),Wr(S,null,O.nodes,O.slots,D,H)),S.pendingRootTasks--,S.pendingRootTasks===0&&au(S)}}else{var te=S.trackedPostpones;if(O.status!==4){if(te!==null&&H!==null)return Gs(S,D,J),So(S,te,v,H),O.fallbackAbortableTasks.forEach(function(Ee){return su(Ee,S,D)}),O.fallbackAbortableTasks.clear(),No(S,O,v.row,H);O.status=4,H=Gs(S,D,J),O.status=4,O.errorDigest=H,nu(S,O),O.parentFlushed&&S.clientRenderedBoundaries.push(O)}O.pendingTasks--,H=O.row,H!==null&&--H.pendingTasks===0&&Vn(S,H),O.fallbackAbortableTasks.forEach(function(Ee){return su(Ee,S,D)}),O.fallbackAbortableTasks.clear()}v=v.row,v!==null&&--v.pendingTasks===0&&Vn(S,v),S.allPendingTasks--,S.allPendingTasks===0&&ru(S)}function iu(v,S){try{var D=v.renderState,O=D.onHeaders;if(O){var H=D.headers;if(H){D.headers=null;var J=H.preconnects;if(H.fontPreloads&&(J&&(J+=", "),J+=H.fontPreloads),H.highImagePreloads&&(J&&(J+=", "),J+=H.highImagePreloads),!S){var te=D.styles.values(),Ee=te.next();e:for(;0<H.remainingCapacity&&!Ee.done;Ee=te.next())for(var ce=Ee.value.sheets.values(),_e=ce.next();0<H.remainingCapacity&&!_e.done;_e=ce.next()){var He=_e.value,Pe=He.props,it=Pe.href,pt=He.props,Zt=Kn(pt.href,"style",{crossOrigin:pt.crossOrigin,integrity:pt.integrity,nonce:pt.nonce,type:pt.type,fetchPriority:pt.fetchPriority,referrerPolicy:pt.referrerPolicy,media:pt.media});if(0<=(H.remainingCapacity-=Zt.length+2))D.resets.style[it]=We,J&&(J+=", "),J+=Zt,D.resets.style[it]=typeof Pe.crossOrigin=="string"||typeof Pe.integrity=="string"?[Pe.crossOrigin,Pe.integrity]:We;else break e}}O(J?{Link:J}:{})}}}catch(Ut){Gs(v,Ut,{})}}function au(v){v.trackedPostpones===null&&iu(v,!0),v.trackedPostpones===null&&Wa(v),v.onShellError=Di,v=v.onShellReady,v()}function ru(v){iu(v,v.trackedPostpones===null?!0:v.completedRootSegment===null||v.completedRootSegment.status!==5),Wa(v),v=v.onAllReady,v()}function Zc(v,S){if(S.chunks.length===0&&S.children.length===1&&S.children[0].boundary===null&&S.children[0].id===-1){var D=S.children[0];D.id=S.id,D.parentFlushed=!0,D.status!==1&&D.status!==3&&D.status!==4||Zc(v,D)}else v.completedSegments.push(S)}function No(v,S,D,O){if(D!==null&&(--D.pendingTasks===0?Vn(v,D):D.together&&Jd(v,D)),v.allPendingTasks--,S===null){if(O!==null&&O.parentFlushed){if(v.completedRootSegment!==null)throw Error(t(389));v.completedRootSegment=O}v.pendingRootTasks--,v.pendingRootTasks===0&&au(v)}else if(S.pendingTasks--,S.status!==4)if(S.pendingTasks===0){if(S.status===0&&(S.status=1),O!==null&&O.parentFlushed&&(O.status===1||O.status===3)&&Zc(S,O),S.parentFlushed&&v.completedBoundaries.push(S),S.status===1)D=S.row,D!==null&&Or(D.hoistables,S.contentState),Jl(v,S)||(S.fallbackAbortableTasks.forEach(xh,v),S.fallbackAbortableTasks.clear(),D!==null&&--D.pendingTasks===0&&Vn(v,D)),v.pendingRootTasks===0&&v.trackedPostpones===null&&S.contentPreamble!==null&&Wa(v);else if(S.status===5&&(S=S.row,S!==null)){if(v.trackedPostpones!==null){D=v.trackedPostpones;var H=S.next;if(H!==null&&(O=H.boundaries,O!==null))for(H.boundaries=null,H=0;H<O.length;H++){var J=O[H];Vr(v,D,J),No(v,J,null,null)}}--S.pendingTasks===0&&Vn(v,S)}}else O===null||!O.parentFlushed||O.status!==1&&O.status!==3||(Zc(S,O),S.completedSegments.length===1&&S.parentFlushed&&v.partialBoundaries.push(S)),S=S.row,S!==null&&S.together&&Jd(v,S);v.allPendingTasks===0&&ru(v)}function Gf(v){if(v.status!==14&&v.status!==13){var S=Qo,D=re.H;re.H=Hf;var O=re.A;re.A=Pg;var H=ti;ti=v;var J=Yd;Yd=v.resumableState;try{var te=v.pingedTasks,Ee;for(Ee=0;Ee<te.length;Ee++){var ce=te[Ee],_e=v,He=ce.blockedSegment;if(He===null){var Pe=_e;if(ce.replay.pendingTasks!==0){zr(ce.context);try{if(typeof ce.replay.slots=="number"?eu(Pe,ce,ce.replay.slots,ce.node,ce.childIndex):tu(Pe,ce),ce.replay.pendingTasks===1&&0<ce.replay.nodes.length)throw Error(t(488));ce.replay.pendingTasks--,ce.abortSet.delete(ce),No(Pe,ce.blockedBoundary,ce.row,null)}catch(Gn){sl();var it=Gn===mi?Gl():Gn;if(typeof it=="object"&&it!==null&&typeof it.then=="function"){var pt=ce.ping;it.then(pt,pt),ce.thenableState=Gn===mi?Kl():null}else{ce.replay.pendingTasks--,ce.abortSet.delete(ce);var Zt=wo(ce.componentStack);_e=void 0;var Ut=Pe,Bt=ce.blockedBoundary,zt=Pe.status===12?Pe.fatalError:it,Wt=ce.replay.nodes,_n=ce.replay.slots;_e=Gs(Ut,zt,Zt),Wr(Ut,Bt,Wt,_n,zt,_e),Pe.pendingRootTasks--,Pe.pendingRootTasks===0&&au(Pe),Pe.allPendingTasks--,Pe.allPendingTasks===0&&ru(Pe)}}}}else if(Pe=void 0,Ut=He,Ut.status===0){Ut.status=6,zr(ce.context);var ns=Ut.children.length,rn=Ut.chunks.length;try{tu(_e,ce),Lr(Ut.chunks,_e.renderState,Ut.lastPushedText,Ut.textEmbedded),ce.abortSet.delete(ce),Ut.status=1,No(_e,ce.blockedBoundary,ce.row,Ut)}catch(Gn){sl(),Ut.children.length=ns,Ut.chunks.length=rn;var on=Gn===mi?Gl():_e.status===12?_e.fatalError:Gn;if(_e.status===12&&_e.trackedPostpones!==null){var mn=_e.trackedPostpones,Wn=wo(ce.componentStack);ce.abortSet.delete(ce),Gs(_e,on,Wn),So(_e,mn,ce,Ut),No(_e,ce.blockedBoundary,ce.row,Ut)}else if(typeof on=="object"&&on!==null&&typeof on.then=="function"){Ut.status=0,ce.thenableState=Gn===mi?Kl():null;var cn=ce.ping;on.then(cn,cn)}else{var ys=wo(ce.componentStack);ce.abortSet.delete(ce),Ut.status=4;var Tn=ce.blockedBoundary,ls=ce.row;if(ls!==null&&--ls.pendingTasks===0&&Vn(_e,ls),_e.allPendingTasks--,Pe=Gs(_e,on,ys),Tn===null)lr(_e,on);else if(Tn.pendingTasks--,Tn.status!==4){Tn.status=4,Tn.errorDigest=Pe,nu(_e,Tn);var Zn=Tn.row;Zn!==null&&--Zn.pendingTasks===0&&Vn(_e,Zn),Tn.parentFlushed&&_e.clientRenderedBoundaries.push(Tn),_e.pendingRootTasks===0&&_e.trackedPostpones===null&&Tn.contentPreamble!==null&&Wa(_e)}_e.allPendingTasks===0&&ru(_e)}}}}te.splice(0,Ee),v.destination!==null&&ec(v,v.destination)}catch(Gn){Gs(v,Gn,{}),lr(v,Gn)}finally{Yd=J,re.H=D,re.A=O,D===Hf&&zr(S),ti=H}}}function ol(v,S,D){S.preambleChildren.length&&D.push(S.preambleChildren);for(var O=!1,H=0;H<S.children.length;H++)O=ni(v,S.children[H],D)||O;return O}function ni(v,S,D){var O=S.boundary;if(O===null)return ol(v,S,D);var H=O.contentPreamble,J=O.fallbackPreamble;if(H===null||J===null)return!1;switch(O.status){case 1:if(Ke(v.renderState,H),v.byteSize+=O.byteSize,S=O.completedSegments[0],!S)throw Error(t(391));return ol(v,S,D);case 5:if(v.trackedPostpones!==null)return!0;case 4:if(S.status===1)return Ke(v.renderState,J),ol(v,S,D);default:return!0}}function Wa(v){if(v.completedRootSegment&&v.completedPreambleSegments===null){var S=[],D=v.byteSize,O=ni(v,v.completedRootSegment,S),H=v.renderState.preamble;O===!1||H.headChunks&&H.bodyChunks?v.completedPreambleSegments=S:v.byteSize=D}}function ll(v,S,D,O){switch(D.parentFlushed=!0,D.status){case 0:D.id=v.nextSegmentId++;case 5:return O=D.id,D.lastPushedText=!1,D.textEmbedded=!1,v=v.renderState,S.push('<template id="'),S.push(v.placeholderPrefix),v=O.toString(16),S.push(v),S.push('"></template>');case 1:D.status=2;var H=!0,J=D.chunks,te=0;D=D.children;for(var Ee=0;Ee<D.length;Ee++){for(H=D[Ee];te<H.index;te++)S.push(J[te]);H=Co(v,S,H,O)}for(;te<J.length-1;te++)S.push(J[te]);return te<J.length&&(H=S.push(J[te])),H;case 3:return!0;default:throw Error(t(390))}}var jo=0;function Co(v,S,D,O){var H=D.boundary;if(H===null)return ll(v,S,D,O);if(H.parentFlushed=!0,H.status===4){var J=H.row;return J!==null&&--J.pendingTasks===0&&Vn(v,J),v.renderState.generateStaticMarkup||(H=H.errorDigest,S.push("<!--$!-->"),S.push("<template"),H&&(S.push(' data-dgst="'),H=X(H),S.push(H),S.push('"')),S.push("></template>")),ll(v,S,D,O),v=v.renderState.generateStaticMarkup?!0:S.push("<!--/$-->"),v}if(H.status!==1)return H.status===0&&(H.rootSegmentID=v.nextSegmentId++),0<H.completedSegments.length&&v.partialBoundaries.push(H),ut(S,v.renderState,H.rootSegmentID),O&&Or(O,H.fallbackState),ll(v,S,D,O),S.push("<!--/$-->");if(!cr&&Jl(v,H)&&jo+H.byteSize>v.progressiveChunkSize)return H.rootSegmentID=v.nextSegmentId++,v.completedBoundaries.push(H),ut(S,v.renderState,H.rootSegmentID),ll(v,S,D,O),S.push("<!--/$-->");if(jo+=H.byteSize,O&&Or(O,H.contentState),D=H.row,D!==null&&Jl(v,H)&&--D.pendingTasks===0&&Vn(v,D),v.renderState.generateStaticMarkup||S.push("<!--$-->"),D=H.completedSegments,D.length!==1)throw Error(t(391));return Co(v,S,D[0],O),v=v.renderState.generateStaticMarkup?!0:S.push("<!--/$-->"),v}function ou(v,S,D,O){return gt(S,v.renderState,D.parentFormatContext,D.id),Co(v,S,D,O),Dt(S,D.parentFormatContext)}function lu(v,S,D){jo=D.byteSize;for(var O=D.completedSegments,H=0;H<O.length;H++)cl(v,S,D,O[H]);O.length=0,O=D.row,O!==null&&Jl(v,D)&&--O.pendingTasks===0&&Vn(v,O),Zi(S,D.contentState,v.renderState),O=v.resumableState,v=v.renderState,H=D.rootSegmentID,D=D.contentState;var J=v.stylesToHoist;return v.stylesToHoist=!1,S.push(v.startInlineScript),S.push(">"),J?((O.instructions&4)===0&&(O.instructions|=4,S.push('$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};')),(O.instructions&2)===0&&(O.instructions|=2,S.push(`$RB=[];$RV=function(a){$RT=performance.now();for(var b=0;b<a.length;b+=2){var c=a[b],e=a[b+1];null!==e.parentNode&&e.parentNode.removeChild(e);var f=c.parentNode;if(f){var g=c.previousSibling,h=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d||"/&"===d)if(0===h)break;else h--;else"$"!==d&&"$?"!==d&&"$~"!==d&&"$!"!==d&&"&"!==d||h++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;e.firstChild;)f.insertBefore(e.firstChild,c);g.data="$";g._reactRetry&&requestAnimationFrame(g._reactRetry)}}a.length=0};
$RC=function(a,b){if(b=document.getElementById(b))(a=document.getElementById(a))?(a.previousSibling.data="$~",$RB.push(a,b),2===$RB.length&&("number"!==typeof $RT?requestAnimationFrame($RV.bind(null,$RB)):(a=performance.now(),setTimeout($RV.bind(null,$RB),2300>a&&2E3<a?2300-a:$RT+300-a)))):b.parentNode.removeChild(b)};`)),(O.instructions&8)===0?(O.instructions|=8,S.push(`$RM=new Map;$RR=function(n,w,p){function u(q){this._p=null;q()}for(var r=new Map,t=document,h,b,e=t.querySelectorAll("link[data-precedence],style[data-precedence]"),v=[],k=0;b=e[k++];)"not all"===b.getAttribute("media")?v.push(b):("LINK"===b.tagName&&$RM.set(b.getAttribute("href"),b),r.set(b.dataset.precedence,h=b));e=0;b=[];var l,a;for(k=!0;;){if(k){var f=p[e++];if(!f){k=!1;e=0;continue}var c=!1,m=0;var d=f[m++];if(a=$RM.get(d)){var g=a._p;c=!0}else{a=t.createElement("link");a.href=d;a.rel=
"stylesheet";for(a.dataset.precedence=l=f[m++];g=f[m++];)a.setAttribute(g,f[m++]);g=a._p=new Promise(function(q,x){a.onload=u.bind(a,q);a.onerror=u.bind(a,x)});$RM.set(d,a)}d=a.getAttribute("media");!g||d&&!matchMedia(d).matches||b.push(g);if(c)continue}else{a=v[e++];if(!a)break;l=a.getAttribute("data-precedence");a.removeAttribute("media")}c=r.get(l)||h;c===h&&(h=a);r.set(l,a);c?c.parentNode.insertBefore(a,c.nextSibling):(c=t.head,c.insertBefore(a,c.firstChild))}if(p=document.getElementById(n))p.previousSibling.data=
"$~";Promise.all(b).then($RC.bind(null,n,w),$RX.bind(null,n,"CSS failed to load"))};$RR("`)):S.push('$RR("')):((O.instructions&2)===0&&(O.instructions|=2,S.push(`$RB=[];$RV=function(a){$RT=performance.now();for(var b=0;b<a.length;b+=2){var c=a[b],e=a[b+1];null!==e.parentNode&&e.parentNode.removeChild(e);var f=c.parentNode;if(f){var g=c.previousSibling,h=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d||"/&"===d)if(0===h)break;else h--;else"$"!==d&&"$?"!==d&&"$~"!==d&&"$!"!==d&&"&"!==d||h++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;e.firstChild;)f.insertBefore(e.firstChild,c);g.data="$";g._reactRetry&&requestAnimationFrame(g._reactRetry)}}a.length=0};
$RC=function(a,b){if(b=document.getElementById(b))(a=document.getElementById(a))?(a.previousSibling.data="$~",$RB.push(a,b),2===$RB.length&&("number"!==typeof $RT?requestAnimationFrame($RV.bind(null,$RB)):(a=performance.now(),setTimeout($RV.bind(null,$RB),2300>a&&2E3<a?2300-a:$RT+300-a)))):b.parentNode.removeChild(b)};`)),S.push('$RC("')),O=H.toString(16),S.push(v.boundaryPrefix),S.push(O),S.push('","'),S.push(v.segmentPrefix),S.push(O),J?(S.push('",'),Lf(S,D)):S.push('"'),D=S.push(")<\/script>"),at(S,v)&&D}function cl(v,S,D,O){if(O.status===2)return!0;var H=D.contentState,J=O.id;if(J===-1){if((O.id=D.rootSegmentID)===-1)throw Error(t(392));return ou(v,S,O,H)}return J===D.rootSegmentID?ou(v,S,O,H):(ou(v,S,O,H),D=v.resumableState,v=v.renderState,S.push(v.startInlineScript),S.push(">"),(D.instructions&1)===0?(D.instructions|=1,S.push('$RS=function(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')):S.push('$RS("'),S.push(v.segmentPrefix),J=J.toString(16),S.push(J),S.push('","'),S.push(v.placeholderPrefix),S.push(J),S=S.push('")<\/script>'),S)}var cr=!1;function ec(v,S){try{if(!(0<v.pendingRootTasks)){var D,O=v.completedRootSegment;if(O!==null){if(O.status===5)return;var H=v.completedPreambleSegments;if(H===null)return;jo=v.byteSize;var J=v.resumableState,te=v.renderState,Ee=te.preamble,ce=Ee.htmlChunks,_e=Ee.headChunks,He;if(ce){for(He=0;He<ce.length;He++)S.push(ce[He]);if(_e)for(He=0;He<_e.length;He++)S.push(_e[He]);else{var Pe=mt("head");S.push(Pe),S.push(">")}}else if(_e)for(He=0;He<_e.length;He++)S.push(_e[He]);var it=te.charsetChunks;for(He=0;He<it.length;He++)S.push(it[He]);it.length=0,te.preconnects.forEach(As,S),te.preconnects.clear();var pt=te.viewportChunks;for(He=0;He<pt.length;He++)S.push(pt[He]);pt.length=0,te.fontPreloads.forEach(As,S),te.fontPreloads.clear(),te.highImagePreloads.forEach(As,S),te.highImagePreloads.clear(),Ge=te,te.styles.forEach(_i,S),Ge=null;var Zt=te.importMapChunks;for(He=0;He<Zt.length;He++)S.push(Zt[He]);Zt.length=0,te.bootstrapScripts.forEach(As,S),te.scripts.forEach(As,S),te.scripts.clear(),te.bulkPreloads.forEach(As,S),te.bulkPreloads.clear(),J.instructions|=32;var Ut=te.hoistableChunks;for(He=0;He<Ut.length;He++)S.push(Ut[He]);for(J=Ut.length=0;J<H.length;J++){var Bt=H[J];for(te=0;te<Bt.length;te++)Co(v,S,Bt[te],null)}var zt=v.renderState.preamble,Wt=zt.headChunks;if(zt.htmlChunks||Wt){var _n=le("head");S.push(_n)}var ns=zt.bodyChunks;if(ns)for(H=0;H<ns.length;H++)S.push(ns[H]);Co(v,S,O,null),v.completedRootSegment=null;var rn=v.renderState;if(v.allPendingTasks!==0||v.clientRenderedBoundaries.length!==0||v.completedBoundaries.length!==0||v.trackedPostpones!==null&&(v.trackedPostpones.rootNodes.length!==0||v.trackedPostpones.rootSlots!==null)){var on=v.resumableState;if((on.instructions&64)===0){if(on.instructions|=64,S.push(rn.startInlineScript),(on.instructions&32)===0){on.instructions|=32;var mn="_"+on.idPrefix+"R_";S.push(' id="');var Wn=X(mn);S.push(Wn),S.push('"')}S.push(">"),S.push("requestAnimationFrame(function(){$RT=performance.now()});"),S.push("<\/script>")}}at(S,rn)}var cn=v.renderState;O=0;var ys=cn.viewportChunks;for(O=0;O<ys.length;O++)S.push(ys[O]);ys.length=0,cn.preconnects.forEach(As,S),cn.preconnects.clear(),cn.fontPreloads.forEach(As,S),cn.fontPreloads.clear(),cn.highImagePreloads.forEach(As,S),cn.highImagePreloads.clear(),cn.styles.forEach(Hd,S),cn.scripts.forEach(As,S),cn.scripts.clear(),cn.bulkPreloads.forEach(As,S),cn.bulkPreloads.clear();var Tn=cn.hoistableChunks;for(O=0;O<Tn.length;O++)S.push(Tn[O]);Tn.length=0;var ls=v.clientRenderedBoundaries;for(D=0;D<ls.length;D++){var Zn=ls[D];cn=S;var Gn=v.resumableState,pi=v.renderState,Yr=Zn.rootSegmentID,Qi=Zn.errorDigest;cn.push(pi.startInlineScript),cn.push(">"),(Gn.instructions&4)===0?(Gn.instructions|=4,cn.push('$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};;$RX("')):cn.push('$RX("'),cn.push(pi.boundaryPrefix);var xi=Yr.toString(16);if(cn.push(xi),cn.push('"'),Qi){cn.push(",");var Ya=en(Qi||"");cn.push(Ya)}var vs=cn.push(")<\/script>");if(!vs){v.destination=null,D++,ls.splice(0,D);return}}ls.splice(0,D);var Mi=v.completedBoundaries;for(D=0;D<Mi.length;D++)if(!lu(v,S,Mi[D])){v.destination=null,D++,Mi.splice(0,D);return}Mi.splice(0,D),cr=!0;var Pi=v.partialBoundaries;for(D=0;D<Pi.length;D++){var fs=Pi[D];e:{ls=v,Zn=S,jo=fs.byteSize;var Es=fs.completedSegments;for(vs=0;vs<Es.length;vs++)if(!cl(ls,Zn,fs,Es[vs])){vs++,Es.splice(0,vs);var Oi=!1;break e}Es.splice(0,vs);var zn=fs.row;zn!==null&&zn.together&&fs.pendingTasks===1&&(zn.pendingTasks===1?Va(ls,zn,zn.hoistables):zn.pendingTasks--),Oi=Zi(Zn,fs.contentState,ls.renderState)}if(!Oi){v.destination=null,D++,Pi.splice(0,D);return}}Pi.splice(0,D),cr=!1;var bi=v.completedBoundaries;for(D=0;D<bi.length;D++)if(!lu(v,S,bi[D])){v.destination=null,D++,bi.splice(0,D);return}bi.splice(0,D)}}finally{cr=!1,v.allPendingTasks===0&&v.clientRenderedBoundaries.length===0&&v.completedBoundaries.length===0&&(v.flushScheduled=!1,D=v.resumableState,D.hasBody&&(Pi=le("body"),S.push(Pi)),D.hasHtml&&(D=le("html"),S.push(D)),v.status=14,S.push(null),v.destination=null)}}function Ga(v){if(v.flushScheduled===!1&&v.pingedTasks.length===0&&v.destination!==null){v.flushScheduled=!0;var S=v.destination;S?ec(v,S):v.flushScheduled=!1}}function tc(v,S){if(v.status===13)v.status=14,S.destroy(v.fatalError);else if(v.status!==14&&v.destination===null){v.destination=S;try{ec(v,S)}catch(D){Gs(v,D,{}),lr(v,D)}}}function bh(v,S){(v.status===11||v.status===10)&&(v.status=12);try{var D=v.abortableTasks;if(0<D.size){var O=S===void 0?Error(t(432)):typeof S=="object"&&S!==null&&typeof S.then=="function"?Error(t(530)):S;v.fatalError=O,D.forEach(function(H){return su(H,v,O)}),D.clear()}v.destination!==null&&ec(v,v.destination)}catch(H){Gs(v,H,{}),lr(v,H)}}function gi(v,S,D){if(S===null)D.rootNodes.push(v);else{var O=D.workingMap,H=O.get(S);H===void 0&&(H=[S[1],S[2],[],null],O.set(S,H),gi(H,S[0],D)),H[2].push(v)}}function Gr(){}function Qc(v,S,D,O){var H=!1,J=null,te="",Ee=!1;if(S=Le(S?S.identifierPrefix:void 0),v=Vf(v,S,Sa(S,D),pe(0,null,0,null),1/0,Gr,void 0,function(){Ee=!0},void 0,void 0,void 0),v.flushScheduled=v.destination!==null,Gf(v),v.status===10&&(v.status=11),v.trackedPostpones===null&&iu(v,v.pendingRootTasks===0),bh(v,O),tc(v,{push:function(ce){return ce!==null&&(te+=ce),!0},destroy:function(ce){H=!0,J=ce}}),H&&J!==O)throw J;if(!Ee)throw Error(t(426));return te}return Op.renderToStaticMarkup=function(v,S){return Qc(v,S,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},Op.renderToString=function(v,S){return Qc(v,S,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},Op.version="19.2.3",Op}var Kh={};var _T;function FQ(){if(_T)return Kh;_T=1;var n=B0(),e=Zy();function t(b){var w="https://react.dev/errors/"+b;if(1<arguments.length){w+="?args[]="+encodeURIComponent(arguments[1]);for(var k=2;k<arguments.length;k++)w+="&args[]="+encodeURIComponent(arguments[k])}return"Minified React error #"+b+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),j=Symbol.for("react.scope"),E=Symbol.for("react.activity"),A=Symbol.for("react.legacy_hidden"),R=Symbol.for("react.memo_cache_sentinel"),M=Symbol.for("react.view_transition"),L=Symbol.iterator;function z(b){return b===null||typeof b!="object"?null:(b=L&&b[L]||b["@@iterator"],typeof b=="function"?b:null)}var W=Array.isArray;function I(b,w){var k=b.length&3,P=b.length-k,F=w;for(w=0;w<P;){var K=b.charCodeAt(w)&255|(b.charCodeAt(++w)&255)<<8|(b.charCodeAt(++w)&255)<<16|(b.charCodeAt(++w)&255)<<24;++w,K=3432918353*(K&65535)+((3432918353*(K>>>16)&65535)<<16)&4294967295,K=K<<15|K>>>17,K=461845907*(K&65535)+((461845907*(K>>>16)&65535)<<16)&4294967295,F^=K,F=F<<13|F>>>19,F=5*(F&65535)+((5*(F>>>16)&65535)<<16)&4294967295,F=(F&65535)+27492+(((F>>>16)+58964&65535)<<16)}switch(K=0,k){case 3:K^=(b.charCodeAt(w+2)&255)<<16;case 2:K^=(b.charCodeAt(w+1)&255)<<8;case 1:K^=b.charCodeAt(w)&255,K=3432918353*(K&65535)+((3432918353*(K>>>16)&65535)<<16)&4294967295,K=K<<15|K>>>17,F^=461845907*(K&65535)+((461845907*(K>>>16)&65535)<<16)&4294967295}return F^=b.length,F^=F>>>16,F=2246822507*(F&65535)+((2246822507*(F>>>16)&65535)<<16)&4294967295,F^=F>>>13,F=3266489909*(F&65535)+((3266489909*(F>>>16)&65535)<<16)&4294967295,(F^F>>>16)>>>0}var Y=new MessageChannel,U=[];Y.port1.onmessage=function(){var b=U.shift();b&&b()};function Z(b){U.push(b),Y.port2.postMessage(null)}function $(b){setTimeout(function(){throw b})}var ae=Promise,xe=typeof queueMicrotask=="function"?queueMicrotask:function(b){ae.resolve(null).then(b).catch($)},fe=null,ke=0;function G(b,w){if(w.byteLength!==0)if(2048<w.byteLength)0<ke&&(b.enqueue(new Uint8Array(fe.buffer,0,ke)),fe=new Uint8Array(2048),ke=0),b.enqueue(w);else{var k=fe.length-ke;k<w.byteLength&&(k===0?b.enqueue(fe):(fe.set(w.subarray(0,k),ke),b.enqueue(fe),w=w.subarray(k)),fe=new Uint8Array(2048),ke=0),fe.set(w,ke),ke+=w.byteLength}}function X(b,w){return G(b,w),!0}function se(b){fe&&0<ke&&(b.enqueue(new Uint8Array(fe.buffer,0,ke)),fe=null,ke=0)}var ee=new TextEncoder;function ne(b){return ee.encode(b)}function V(b){return ee.encode(b)}function re(b){return b.byteLength}function ge(b,w){typeof b.error=="function"?b.error(w):b.close()}var Ne=Object.assign,Ce=Object.prototype.hasOwnProperty,We=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ge={},Oe={};function $e(b){return Ce.call(Oe,b)?!0:Ce.call(Ge,b)?!1:We.test(b)?Oe[b]=!0:(Ge[b]=!0,!1)}var Le=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" ")),pe=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),je=/["'&<>]/;function Se(b){if(typeof b=="boolean"||typeof b=="number"||typeof b=="bigint")return""+b;b=""+b;var w=je.exec(b);if(w){var k="",P,F=0;for(P=w.index;P<b.length;P++){switch(b.charCodeAt(P)){case 34:w="&quot;";break;case 38:w="&amp;";break;case 39:w="&#x27;";break;case 60:w="&lt;";break;case 62:w="&gt;";break;default:continue}F!==P&&(k+=b.slice(F,P)),F=P+1,k+=w}b=F!==P?k+b.slice(F,P):k}return b}var Je=/([A-Z])/g,lt=/^ms-/,ct=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fe(b){return ct.test(""+b)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":b}var nt=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ye=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot={pending:!1,data:null,method:null,action:null},St=Ye.d;Ye.d={f:St.f,r:St.r,D:su,C:iu,L:au,m:ru,X:No,S:Zc,M:Gf};var Pt=[],qe=null;V('"></template>');var Ze=V("<script"),Xe=V("<\/script>"),yt=V('<script src="'),Et=V('<script type="module" src="'),Ot=V(' nonce="'),Kt=V(' integrity="'),Fn=V(' crossorigin="'),un=V(' async=""><\/script>'),qs=V("<style"),Os=/(<\/|<)(s)(cript)/gi;function An(b,w,k,P){return""+w+(k==="s"?"\\u0073":"\\u0053")+P}var ye=V('<script type="importmap">'),Qe=V("<\/script>");function rt(b,w,k,P,F,K){k=typeof w=="string"?w:w&&w.script;var q=k===void 0?Ze:V('<script nonce="'+Se(k)+'"'),ue=typeof w=="string"?void 0:w&&w.style,ie=ue===void 0?qs:V('<style nonce="'+Se(ue)+'"'),he=b.idPrefix,we=[],De=b.bootstrapScriptContent,tt=b.bootstrapScripts,st=b.bootstrapModules;if(De!==void 0&&(we.push(q),Vr(we,b),we.push(kn,ne((""+De).replace(Os,An)),Xe)),De=[],P!==void 0&&(De.push(ye),De.push(ne((""+JSON.stringify(P)).replace(Os,An))),De.push(Qe)),P=F?{preconnects:"",fontPreloads:"",highImagePreloads:"",remainingCapacity:2+(typeof K=="number"?K:2e3)}:null,F={placeholderPrefix:V(he+"P:"),segmentPrefix:V(he+"S:"),boundaryPrefix:V(he+"B:"),startInlineScript:q,startInlineStyle:ie,preamble:mt(),externalRuntimeScript:null,bootstrapChunks:we,importMapChunks:De,onHeaders:F,headers:P,resets:{font:{},dns:{},connect:{default:{},anonymous:{},credentials:{}},image:{},style:{}},charsetChunks:[],viewportChunks:[],hoistableChunks:[],preconnects:new Set,fontPreloads:new Set,highImagePreloads:new Set,styles:new Map,bootstrapScripts:new Set,scripts:new Set,bulkPreloads:new Set,preloads:{images:new Map,stylesheets:new Map,scripts:new Map,moduleScripts:new Map},nonce:{script:k,style:ue},hoistableState:null,stylesToHoist:!1},tt!==void 0)for(P=0;P<tt.length;P++)he=tt[P],ue=q=void 0,ie={rel:"preload",as:"script",fetchPriority:"low",nonce:w},typeof he=="string"?ie.href=K=he:(ie.href=K=he.src,ie.integrity=ue=typeof he.integrity=="string"?he.integrity:void 0,ie.crossOrigin=q=typeof he=="string"||he.crossOrigin==null?void 0:he.crossOrigin==="use-credentials"?"use-credentials":""),he=b,De=K,he.scriptResources[De]=null,he.moduleScriptResources[De]=null,he=[],Kn(he,ie),F.bootstrapScripts.add(he),we.push(yt,ne(Se(K)),jn),k&&we.push(Ot,ne(Se(k)),jn),typeof ue=="string"&&we.push(Kt,ne(Se(ue)),jn),typeof q=="string"&&we.push(Fn,ne(Se(q)),jn),Vr(we,b),we.push(un);if(st!==void 0)for(w=0;w<st.length;w++)ue=st[w],K=P=void 0,q={rel:"modulepreload",fetchPriority:"low",nonce:k},typeof ue=="string"?q.href=tt=ue:(q.href=tt=ue.src,q.integrity=K=typeof ue.integrity=="string"?ue.integrity:void 0,q.crossOrigin=P=typeof ue=="string"||ue.crossOrigin==null?void 0:ue.crossOrigin==="use-credentials"?"use-credentials":""),ue=b,ie=tt,ue.scriptResources[ie]=null,ue.moduleScriptResources[ie]=null,ue=[],Kn(ue,q),F.bootstrapScripts.add(ue),we.push(Et,ne(Se(tt)),jn),k&&we.push(Ot,ne(Se(k)),jn),typeof K=="string"&&we.push(Kt,ne(Se(K)),jn),typeof P=="string"&&we.push(Fn,ne(Se(P)),jn),Vr(we,b),we.push(un);return F}function Nt(b,w,k,P,F){return{idPrefix:b===void 0?"":b,nextFormID:0,streamingFormat:0,bootstrapScriptContent:k,bootstrapScripts:P,bootstrapModules:F,instructions:0,hasBody:!1,hasHtml:!1,unknownResources:{},dnsResources:{},connectResources:{default:{},anonymous:{},credentials:{}},imageResources:{},styleResources:{},scriptResources:{},moduleUnknownResources:{},moduleScriptResources:{}}}function mt(){return{htmlChunks:null,headChunks:null,bodyChunks:null}}function It(b,w,k,P){return{insertionMode:b,selectedValue:w,tagScope:k,viewTransition:P}}function et(b){return It(b==="http://www.w3.org/2000/svg"?4:b==="http://www.w3.org/1998/Math/MathML"?5:0,null,0,null)}function le(b,w,k){var P=b.tagScope&-25;switch(w){case"noscript":return It(2,null,P|1,null);case"select":return It(2,k.value!=null?k.value:k.defaultValue,P,null);case"svg":return It(4,null,P,null);case"picture":return It(2,null,P|2,null);case"math":return It(5,null,P,null);case"foreignObject":return It(2,null,P,null);case"table":return It(6,null,P,null);case"thead":case"tbody":case"tfoot":return It(7,null,P,null);case"colgroup":return It(9,null,P,null);case"tr":return It(8,null,P,null);case"head":if(2>b.insertionMode)return It(3,null,P,null);break;case"html":if(b.insertionMode===0)return It(1,null,P,null)}return 6<=b.insertionMode||2>b.insertionMode?It(2,null,P,null):b.tagScope!==P?It(b.insertionMode,b.selectedValue,P,null):b}function Ke(b){return b===null?null:{update:b.update,enter:"none",exit:"none",share:b.update,name:b.autoName,autoName:b.autoName,nameIdx:0}}function at(b,w){return w.tagScope&32&&(b.instructions|=128),It(w.insertionMode,w.selectedValue,w.tagScope|12,Ke(w.viewTransition))}function ut(b,w){b=Ke(w.viewTransition);var k=w.tagScope|16;return b!==null&&b.share!=="none"&&(k|=64),It(w.insertionMode,w.selectedValue,k,b)}var gt=V("<!-- -->");function Dt(b,w,k,P){return w===""?P:(P&&b.push(gt),b.push(ne(Se(w))),!0)}var hn=new Map,en=V(' style="'),Rt=V(":"),Ei=V(";");function $s(b,w){if(typeof w!="object")throw Error(t(62));var k=!0,P;for(P in w)if(Ce.call(w,P)){var F=w[P];if(F!=null&&typeof F!="boolean"&&F!==""){if(P.indexOf("--")===0){var K=ne(Se(P));F=ne(Se((""+F).trim()))}else K=hn.get(P),K===void 0&&(K=V(Se(P.replace(Je,"-$1").toLowerCase().replace(lt,"-ms-"))),hn.set(P,K)),F=typeof F=="number"?F===0||Le.has(P)?ne(""+F):ne(F+"px"):ne(Se((""+F).trim()));k?(k=!1,b.push(en,K,Rt,F)):b.push(Ei,K,Rt,F)}}k||b.push(jn)}var Dn=V(" "),Cs=V('="'),jn=V('"'),Zi=V('=""');function As(b,w,k){k&&typeof k!="function"&&typeof k!="symbol"&&b.push(Dn,ne(w),Zi)}function fn(b,w,k){typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&b.push(Dn,ne(w),Cs,ne(Se(k)),jn)}var Vs=V(Se("javascript:throw new Error('React form unexpectedly submitted.')")),_i=V('<input type="hidden"');function xo(b,w){this.push(_i),Hd(b),fn(this,"name",w),fn(this,"value",b),this.push(Xo)}function Hd(b){if(typeof b!="string")throw Error(t(480))}function Fc(b,w){if(typeof w.$$FORM_ACTION=="function"){var k=b.nextFormID++;b=b.idPrefix+k;try{var P=w.$$FORM_ACTION(b);if(P){var F=P.data;F?.forEach(Hd)}return P}catch(K){if(typeof K=="object"&&K!==null&&typeof K.then=="function")throw K}}return null}function Lf(b,w,k,P,F,K,q,ue){var ie=null;if(typeof P=="function"){var he=Fc(w,P);he!==null?(ue=he.name,P=he.action||"",F=he.encType,K=he.method,q=he.target,ie=he.data):(b.push(Dn,ne("formAction"),Cs,Vs,jn),q=K=F=P=ue=null,Ls(w,k))}return ue!=null&&En(b,"name",ue),P!=null&&En(b,"formAction",P),F!=null&&En(b,"formEncType",F),K!=null&&En(b,"formMethod",K),q!=null&&En(b,"formTarget",q),ie}function En(b,w,k){switch(w){case"className":fn(b,"class",k);break;case"tabIndex":fn(b,"tabindex",k);break;case"dir":case"role":case"viewBox":case"width":case"height":fn(b,w,k);break;case"style":$s(b,k);break;case"src":case"href":if(k==="")break;case"action":case"formAction":if(k==null||typeof k=="function"||typeof k=="symbol"||typeof k=="boolean")break;k=Fe(""+k),b.push(Dn,ne(w),Cs,ne(Se(k)),jn);break;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":case"ref":break;case"autoFocus":case"multiple":case"muted":As(b,w.toLowerCase(),k);break;case"xlinkHref":if(typeof k=="function"||typeof k=="symbol"||typeof k=="boolean")break;k=Fe(""+k),b.push(Dn,ne("xlink:href"),Cs,ne(Se(k)),jn);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":typeof k!="function"&&typeof k!="symbol"&&b.push(Dn,ne(w),Cs,ne(Se(k)),jn);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":k&&typeof k!="function"&&typeof k!="symbol"&&b.push(Dn,ne(w),Zi);break;case"capture":case"download":k===!0?b.push(Dn,ne(w),Zi):k!==!1&&typeof k!="function"&&typeof k!="symbol"&&b.push(Dn,ne(w),Cs,ne(Se(k)),jn);break;case"cols":case"rows":case"size":case"span":typeof k!="function"&&typeof k!="symbol"&&!isNaN(k)&&1<=k&&b.push(Dn,ne(w),Cs,ne(Se(k)),jn);break;case"rowSpan":case"start":typeof k=="function"||typeof k=="symbol"||isNaN(k)||b.push(Dn,ne(w),Cs,ne(Se(k)),jn);break;case"xlinkActuate":fn(b,"xlink:actuate",k);break;case"xlinkArcrole":fn(b,"xlink:arcrole",k);break;case"xlinkRole":fn(b,"xlink:role",k);break;case"xlinkShow":fn(b,"xlink:show",k);break;case"xlinkTitle":fn(b,"xlink:title",k);break;case"xlinkType":fn(b,"xlink:type",k);break;case"xmlBase":fn(b,"xml:base",k);break;case"xmlLang":fn(b,"xml:lang",k);break;case"xmlSpace":fn(b,"xml:space",k);break;default:if((!(2<w.length)||w[0]!=="o"&&w[0]!=="O"||w[1]!=="n"&&w[1]!=="N")&&(w=pe.get(w)||w,$e(w))){switch(typeof k){case"function":case"symbol":return;case"boolean":var P=w.toLowerCase().slice(0,5);if(P!=="data-"&&P!=="aria-")return}b.push(Dn,ne(w),Cs,ne(Se(k)),jn)}}}var kn=V(">"),Xo=V("/>");function Ws(b,w,k){if(w!=null){if(k!=null)throw Error(t(60));if(typeof w!="object"||!("__html"in w))throw Error(t(61));w=w.__html,w!=null&&b.push(ne(""+w))}}function Bl(b){var w="";return n.Children.forEach(b,function(k){k!=null&&(w+=k)}),w}var Ko=V(' selected=""'),Zo=V(`addEventListener("submit",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute("formAction");null!=f&&(e=f,b=null)}"javascript:throw new Error('React form unexpectedly submitted.')"===e&&(a.preventDefault(),b?(a=document.createElement("input"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});`);function Ls(b,w){if((b.instructions&16)===0){b.instructions|=16;var k=w.preamble,P=w.bootstrapChunks;(k.htmlChunks||k.headChunks)&&P.length===0?(P.push(w.startInlineScript),Vr(P,b),P.push(kn,Zo,Xe)):P.unshift(w.startInlineScript,kn,Zo,Xe)}}var Ff=V("<!--F!-->"),Hl=V("<!--F-->");function Kn(b,w){b.push(os("link"));for(var k in w)if(Ce.call(w,k)){var P=w[k];if(P!=null)switch(k){case"children":case"dangerouslySetInnerHTML":throw Error(t(399,"link"));default:En(b,k,P)}}return b.push(Xo),null}var Mr=/(<\/|<)(s)(tyle)/gi;function Ud(b,w,k,P){return""+w+(k==="s"?"\\73 ":"\\53 ")+P}function Pr(b,w,k){b.push(os(k));for(var P in w)if(Ce.call(w,P)){var F=w[P];if(F!=null)switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(t(399,k));default:En(b,P,F)}}return b.push(Xo),null}function zc(b,w){b.push(os("title"));var k=null,P=null,F;for(F in w)if(Ce.call(w,F)){var K=w[F];if(K!=null)switch(F){case"children":k=K;break;case"dangerouslySetInnerHTML":P=K;break;default:En(b,F,K)}}return b.push(kn),w=Array.isArray(k)?2>k.length?k[0]:null:k,typeof w!="function"&&typeof w!="symbol"&&w!==null&&w!==void 0&&b.push(ne(Se(""+w))),Ws(b,P,k),b.push(Fr("title")),null}var _g=V("<!--head-->"),Vd=V("<!--body-->"),Or=V("<!--html-->");function Sa(b,w){b.push(os("script"));var k=null,P=null,F;for(F in w)if(Ce.call(w,F)){var K=w[F];if(K!=null)switch(F){case"children":k=K;break;case"dangerouslySetInnerHTML":P=K;break;default:En(b,F,K)}}return b.push(kn),Ws(b,P,k),typeof k=="string"&&b.push(ne((""+k).replace(Os,An))),b.push(Fr("script")),null}function Ti(b,w,k){b.push(os(k));var P=k=null,F;for(F in w)if(Ce.call(w,F)){var K=w[F];if(K!=null)switch(F){case"children":k=K;break;case"dangerouslySetInnerHTML":P=K;break;default:En(b,F,K)}}return b.push(kn),Ws(b,P,k),k}function Lr(b,w,k){b.push(os(k));var P=k=null,F;for(F in w)if(Ce.call(w,F)){var K=w[F];if(K!=null)switch(F){case"children":k=K;break;case"dangerouslySetInnerHTML":P=K;break;default:En(b,F,K)}}return b.push(kn),Ws(b,P,k),typeof k=="string"?(b.push(ne(Se(k))),null):k}var dh=V(`
`),uh=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Ul=new Map;function os(b){var w=Ul.get(b);if(w===void 0){if(!uh.test(b))throw Error(t(65,b));w=V("<"+b),Ul.set(b,w)}return w}var Qo=V("<!DOCTYPE html>");function ki(b,w,k,P,F,K,q,ue,ie){switch(w){case"div":case"span":case"svg":case"path":break;case"a":b.push(os("a"));var he=null,we=null,De;for(De in k)if(Ce.call(k,De)){var tt=k[De];if(tt!=null)switch(De){case"children":he=tt;break;case"dangerouslySetInnerHTML":we=tt;break;case"href":tt===""?fn(b,"href",""):En(b,De,tt);break;default:En(b,De,tt)}}if(b.push(kn),Ws(b,we,he),typeof he=="string"){b.push(ne(Se(he)));var st=null}else st=he;return st;case"g":case"p":case"li":break;case"select":b.push(os("select"));var Ct=null,Gt=null,Ht;for(Ht in k)if(Ce.call(k,Ht)){var dt=k[Ht];if(dt!=null)switch(Ht){case"children":Ct=dt;break;case"dangerouslySetInnerHTML":Gt=dt;break;case"defaultValue":case"value":break;default:En(b,Ht,dt)}}return b.push(kn),Ws(b,Gt,Ct),Ct;case"option":var At=ue.selectedValue;b.push(os("option"));var ln=null,ai=null,ri=null,_t=null,zs;for(zs in k)if(Ce.call(k,zs)){var Xn=k[zs];if(Xn!=null)switch(zs){case"children":ln=Xn;break;case"selected":ri=Xn;break;case"dangerouslySetInnerHTML":_t=Xn;break;case"value":ai=Xn;default:En(b,zs,Xn)}}if(At!=null){var Ts=ai!==null?""+ai:Bl(ln);if(W(At)){for(var $r=0;$r<At.length;$r++)if(""+At[$r]===Ts){b.push(Ko);break}}else""+At===Ts&&b.push(Ko)}else ri&&b.push(Ko);return b.push(kn),Ws(b,_t,ln),ln;case"textarea":b.push(os("textarea"));var Vt=null,mr=null,Ta=null,Xs;for(Xs in k)if(Ce.call(k,Xs)){var pa=k[Xs];if(pa!=null)switch(Xs){case"children":Ta=pa;break;case"value":Vt=pa;break;case"defaultValue":mr=pa;break;case"dangerouslySetInnerHTML":throw Error(t(91));default:En(b,Xs,pa)}}if(Vt===null&&mr!==null&&(Vt=mr),b.push(kn),Ta!=null){if(Vt!=null)throw Error(t(92));if(W(Ta)){if(1<Ta.length)throw Error(t(93));Vt=""+Ta[0]}Vt=""+Ta}return typeof Vt=="string"&&Vt[0]===`
`&&b.push(dh),Vt!==null&&b.push(ne(Se(""+Vt))),null;case"input":b.push(os("input"));var td=null,pl=null,eo=null,xl=null,oi=null,Pn=null,to=null,nd=null,xu=null,sd;for(sd in k)if(Ce.call(k,sd)){var li=k[sd];if(li!=null)switch(sd){case"children":case"dangerouslySetInnerHTML":throw Error(t(399,"input"));case"name":td=li;break;case"formAction":pl=li;break;case"formEncType":eo=li;break;case"formMethod":xl=li;break;case"formTarget":oi=li;break;case"defaultChecked":xu=li;break;case"defaultValue":to=li;break;case"checked":nd=li;break;case"value":Pn=li;break;default:En(b,sd,li)}}var vh=Lf(b,P,F,pl,eo,xl,oi,td);return nd!==null?As(b,"checked",nd):xu!==null&&As(b,"checked",xu),Pn!==null?En(b,"value",Pn):to!==null&&En(b,"value",to),b.push(Xo),vh?.forEach(xo,b),null;case"button":b.push(os("button"));var id=null,Yf=null,Fg=null,zg=null,Ig=null,Bg=null,Hg=null,bu;for(bu in k)if(Ce.call(k,bu)){var no=k[bu];if(no!=null)switch(bu){case"children":id=no;break;case"dangerouslySetInnerHTML":Yf=no;break;case"name":Fg=no;break;case"formAction":zg=no;break;case"formEncType":Ig=no;break;case"formMethod":Bg=no;break;case"formTarget":Hg=no;break;default:En(b,bu,no)}}var Ug=Lf(b,P,F,zg,Ig,Bg,Hg,Fg);if(b.push(kn),Ug?.forEach(xo,b),Ws(b,Yf,id),typeof id=="string"){b.push(ne(Se(id)));var jx=null}else jx=id;return jx;case"form":b.push(os("form"));var yu=null,Vg=null,dc=null,ad=null,vu=null,wu=null,Su;for(Su in k)if(Ce.call(k,Su)){var bl=k[Su];if(bl!=null)switch(Su){case"children":yu=bl;break;case"dangerouslySetInnerHTML":Vg=bl;break;case"action":dc=bl;break;case"encType":ad=bl;break;case"method":vu=bl;break;case"target":wu=bl;break;default:En(b,Su,bl)}}var Xf=null,Wg=null;if(typeof dc=="function"){var uc=Fc(P,dc);uc!==null?(dc=uc.action||"",ad=uc.encType,vu=uc.method,wu=uc.target,Xf=uc.data,Wg=uc.name):(b.push(Dn,ne("action"),Cs,Vs,jn),wu=vu=ad=dc=null,Ls(P,F))}if(dc!=null&&En(b,"action",dc),ad!=null&&En(b,"encType",ad),vu!=null&&En(b,"method",vu),wu!=null&&En(b,"target",wu),b.push(kn),Wg!==null&&(b.push(_i),fn(b,"name",Wg),b.push(Xo),Xf?.forEach(xo,b)),Ws(b,Vg,yu),typeof yu=="string"){b.push(ne(Se(yu)));var rd=null}else rd=yu;return rd;case"menuitem":b.push(os("menuitem"));for(var wh in k)if(Ce.call(k,wh)){var Sh=k[wh];if(Sh!=null)switch(wh){case"children":case"dangerouslySetInnerHTML":throw Error(t(400));default:En(b,wh,Sh)}}return b.push(kn),null;case"object":b.push(os("object"));var hc=null,Gg=null,od;for(od in k)if(Ce.call(k,od)){var Nh=k[od];if(Nh!=null)switch(od){case"children":hc=Nh;break;case"dangerouslySetInnerHTML":Gg=Nh;break;case"data":var Yg=Fe(""+Nh);if(Yg==="")break;b.push(Dn,ne("data"),Cs,ne(Se(Yg)),jn);break;default:En(b,od,Nh)}}if(b.push(kn),Ws(b,Gg,hc),typeof hc=="string"){b.push(ne(Se(hc)));var Xg=null}else Xg=hc;return Xg;case"title":var Cx=ue.tagScope&1,Ax=ue.tagScope&4;if(ue.insertionMode===4||Cx||k.itemProp!=null)var Kf=zc(b,k);else Ax?Kf=null:(zc(F.hoistableChunks,k),Kf=void 0);return Kf;case"link":var Kg=ue.tagScope&1,Ex=ue.tagScope&4,_x=k.rel,To=k.href,jh=k.precedence;if(ue.insertionMode===4||Kg||k.itemProp!=null||typeof _x!="string"||typeof To!="string"||To===""){Kn(b,k);var Nu=null}else if(k.rel==="stylesheet")if(typeof jh!="string"||k.disabled!=null||k.onLoad||k.onError)Nu=Kn(b,k);else{var ju=F.styles.get(jh),Cu=P.styleResources.hasOwnProperty(To)?P.styleResources[To]:void 0;if(Cu!==null){P.styleResources[To]=null,ju||(ju={precedence:ne(Se(jh)),rules:[],hrefs:[],sheets:new Map},F.styles.set(jh,ju));var Ch={state:0,props:Ne({},k,{"data-precedence":k.precedence,precedence:null})};if(Cu){Cu.length===2&&ol(Ch.props,Cu);var Zf=F.preloads.stylesheets.get(To);Zf&&0<Zf.length?Zf.length=0:Ch.state=1}ju.sheets.set(To,Ch),q&&q.stylesheets.add(Ch)}else if(ju){var Qf=ju.sheets.get(To);Qf&&q&&q.stylesheets.add(Qf)}ie&&b.push(gt),Nu=null}else k.onLoad||k.onError?Nu=Kn(b,k):(ie&&b.push(gt),Nu=Ex?null:Kn(F.hoistableChunks,k));return Nu;case"script":var Tx=ue.tagScope&1,Jf=k.async;if(typeof k.src!="string"||!k.src||!Jf||typeof Jf=="function"||typeof Jf=="symbol"||k.onLoad||k.onError||ue.insertionMode===4||Tx||k.itemProp!=null)var kx=Sa(b,k);else{var qf=k.src;if(k.type==="module")var Ah=P.moduleScriptResources,Au=F.preloads.moduleScripts;else Ah=P.scriptResources,Au=F.preloads.scripts;var Eu=Ah.hasOwnProperty(qf)?Ah[qf]:void 0;if(Eu!==null){Ah[qf]=null;var _u=k;if(Eu){Eu.length===2&&(_u=Ne({},k),ol(_u,Eu));var Zg=Au.get(qf);Zg&&(Zg.length=0)}var Qg=[];F.scripts.add(Qg),Sa(Qg,_u)}ie&&b.push(gt),kx=null}return kx;case"style":var Eh=ue.tagScope&1,_h=k.precedence,fc=k.href,Dx=k.nonce;if(ue.insertionMode===4||Eh||k.itemProp!=null||typeof _h!="string"||typeof fc!="string"||fc===""){b.push(os("style"));var mc=null,$f=null,Tu;for(Tu in k)if(Ce.call(k,Tu)){var Th=k[Tu];if(Th!=null)switch(Tu){case"children":mc=Th;break;case"dangerouslySetInnerHTML":$f=Th;break;default:En(b,Tu,Th)}}b.push(kn);var so=Array.isArray(mc)?2>mc.length?mc[0]:null:mc;typeof so!="function"&&typeof so!="symbol"&&so!==null&&so!==void 0&&b.push(ne((""+so).replace(Mr,Ud))),Ws(b,$f,mc),b.push(Fr("style"));var Jg=null}else{var gc=F.styles.get(_h);if((P.styleResources.hasOwnProperty(fc)?P.styleResources[fc]:void 0)!==null){P.styleResources[fc]=null,gc||(gc={precedence:ne(Se(_h)),rules:[],hrefs:[],sheets:new Map},F.styles.set(_h,gc));var qg=F.nonce.style;if(!qg||qg===Dx){gc.hrefs.push(ne(Se(fc)));var kh=gc.rules,ld=null,em=null,Dh;for(Dh in k)if(Ce.call(k,Dh)){var tm=k[Dh];if(tm!=null)switch(Dh){case"children":ld=tm;break;case"dangerouslySetInnerHTML":em=tm}}var Rh=Array.isArray(ld)?2>ld.length?ld[0]:null:ld;typeof Rh!="function"&&typeof Rh!="symbol"&&Rh!==null&&Rh!==void 0&&kh.push(ne((""+Rh).replace(Mr,Ud))),Ws(kh,em,ld)}}gc&&q&&q.styles.add(gc),ie&&b.push(gt),Jg=void 0}return Jg;case"meta":var $g=ue.tagScope&1,Ks=ue.tagScope&4;if(ue.insertionMode===4||$g||k.itemProp!=null)var wi=Pr(b,k,"meta");else ie&&b.push(gt),wi=Ks?null:typeof k.charSet=="string"?Pr(F.charsetChunks,k,"meta"):k.name==="viewport"?Pr(F.viewportChunks,k,"meta"):Pr(F.hoistableChunks,k,"meta");return wi;case"listing":case"pre":b.push(os(w));var ku=null,Du=null,Ru;for(Ru in k)if(Ce.call(k,Ru)){var Mh=k[Ru];if(Mh!=null)switch(Ru){case"children":ku=Mh;break;case"dangerouslySetInnerHTML":Du=Mh;break;default:En(b,Ru,Mh)}}if(b.push(kn),Du!=null){if(ku!=null)throw Error(t(60));if(typeof Du!="object"||!("__html"in Du))throw Error(t(61));var io=Du.__html;io!=null&&(typeof io=="string"&&0<io.length&&io[0]===`
`?b.push(dh,ne(io)):b.push(ne(""+io)))}return typeof ku=="string"&&ku[0]===`
`&&b.push(dh),ku;case"img":var Rx=ue.tagScope&3,ci=k.src,Si=k.srcSet;if(!(k.loading==="lazy"||!ci&&!Si||typeof ci!="string"&&ci!=null||typeof Si!="string"&&Si!=null||k.fetchPriority==="low"||Rx)&&(typeof ci!="string"||ci[4]!==":"||ci[0]!=="d"&&ci[0]!=="D"||ci[1]!=="a"&&ci[1]!=="A"||ci[2]!=="t"&&ci[2]!=="T"||ci[3]!=="a"&&ci[3]!=="A")&&(typeof Si!="string"||Si[4]!==":"||Si[0]!=="d"&&Si[0]!=="D"||Si[1]!=="a"&&Si[1]!=="A"||Si[2]!=="t"&&Si[2]!=="T"||Si[3]!=="a"&&Si[3]!=="A")){q!==null&&ue.tagScope&64&&(q.suspenseyImages=!0);var Mx=typeof k.sizes=="string"?k.sizes:void 0,yl=Si?Si+`
`+(Mx||""):ci,Ph=F.preloads.images,pc=Ph.get(yl);if(pc)(k.fetchPriority==="high"||10>F.highImagePreloads.size)&&(Ph.delete(yl),F.highImagePreloads.add(pc));else if(!P.imageResources.hasOwnProperty(yl)){P.imageResources[yl]=Pt;var nm=k.crossOrigin,ep=typeof nm=="string"?nm==="use-credentials"?nm:"":void 0,vl=F.headers,Oh;vl&&0<vl.remainingCapacity&&typeof k.srcSet!="string"&&(k.fetchPriority==="high"||500>vl.highImagePreloads.length)&&(Oh=ni(ci,"image",{imageSrcSet:k.srcSet,imageSizes:k.sizes,crossOrigin:ep,integrity:k.integrity,nonce:k.nonce,type:k.type,fetchPriority:k.fetchPriority,referrerPolicy:k.refererPolicy}),0<=(vl.remainingCapacity-=Oh.length+2))?(F.resets.image[yl]=Pt,vl.highImagePreloads&&(vl.highImagePreloads+=", "),vl.highImagePreloads+=Oh):(pc=[],Kn(pc,{rel:"preload",as:"image",href:Si?void 0:ci,imageSrcSet:Si,imageSizes:Mx,crossOrigin:ep,integrity:k.integrity,type:k.type,fetchPriority:k.fetchPriority,referrerPolicy:k.referrerPolicy}),k.fetchPriority==="high"||10>F.highImagePreloads.size?F.highImagePreloads.add(pc):(F.bulkPreloads.add(pc),Ph.set(yl,pc)))}}return Pr(b,k,"img");case"base":case"area":case"br":case"col":case"embed":case"hr":case"keygen":case"param":case"source":case"track":case"wbr":return Pr(b,k,w);case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":break;case"head":if(2>ue.insertionMode){var Lh=K||F.preamble;if(Lh.headChunks)throw Error(t(545,"`<head>`"));K!==null&&b.push(_g),Lh.headChunks=[];var tp=Ti(Lh.headChunks,k,"head")}else tp=Lr(b,k,"head");return tp;case"body":if(2>ue.insertionMode){var Fh=K||F.preamble;if(Fh.bodyChunks)throw Error(t(545,"`<body>`"));K!==null&&b.push(Vd),Fh.bodyChunks=[];var zh=Ti(Fh.bodyChunks,k,"body")}else zh=Lr(b,k,"body");return zh;case"html":if(ue.insertionMode===0){var Ih=K||F.preamble;if(Ih.htmlChunks)throw Error(t(545,"`<html>`"));K!==null&&b.push(Or),Ih.htmlChunks=[Qo];var np=Ti(Ih.htmlChunks,k,"html")}else np=Lr(b,k,"html");return np;default:if(w.indexOf("-")!==-1){b.push(os(w));var Bh=null,sp=null,ka;for(ka in k)if(Ce.call(k,ka)){var qa=k[ka];if(qa!=null){var Px=ka;switch(ka){case"children":Bh=qa;break;case"dangerouslySetInnerHTML":sp=qa;break;case"style":$s(b,qa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"ref":break;case"className":Px="class";default:if($e(ka)&&typeof qa!="function"&&typeof qa!="symbol"&&qa!==!1){if(qa===!0)qa="";else if(typeof qa=="object")continue;b.push(Dn,ne(Px),Cs,ne(Se(qa)),jn)}}}}return b.push(kn),Ws(b,sp,Bh),Bh}}return Lr(b,k,w)}var Ic=new Map;function Fr(b){var w=Ic.get(b);return w===void 0&&(w=V("</"+b+">"),Ic.set(b,w)),w}function Bc(b,w){b=b.preamble,b.htmlChunks===null&&w.htmlChunks&&(b.htmlChunks=w.htmlChunks),b.headChunks===null&&w.headChunks&&(b.headChunks=w.headChunks),b.bodyChunks===null&&w.bodyChunks&&(b.bodyChunks=w.bodyChunks)}function bo(b,w){w=w.bootstrapChunks;for(var k=0;k<w.length-1;k++)G(b,w[k]);return k<w.length?(k=w[k],w.length=0,X(b,k)):!0}var zr=V("requestAnimationFrame(function(){$RT=performance.now()});"),hh=V('<template id="'),Vl=V('"></template>'),Jo=V("<!--&-->"),Hc=V("<!--/&-->"),zf=V("<!--$-->"),fh=V('<!--$?--><template id="'),Tg=V('"></template>'),Di=V("<!--$!-->"),mi=V("<!--/$-->"),Ir=V("<template"),Wl=V('"'),Gl=V(' data-dgst="');V(' data-msg="'),V(' data-stck="'),V(' data-cstck="');var Yl=V("></template>");function qo(b,w,k){if(G(b,fh),k===null)throw Error(t(395));return G(b,w.boundaryPrefix),G(b,ne(k.toString(16))),X(b,Tg)}var or=V('<div hidden id="'),Uc=V('">'),Wd=V("</div>"),$o=V('<svg aria-hidden="true" style="display:none" id="'),Na=V('">'),Rn=V("</svg>"),Br=V('<math aria-hidden="true" style="display:none" id="'),Ua=V('">'),el=V("</math>"),yo=V('<table hidden id="'),Xl=V('">'),tl=V("</table>"),Hr=V('<table hidden><tbody id="'),Ur=V('">'),ei=V("</tbody></table>"),Ri=V('<table hidden><tr id="'),Vc=V('">'),nl=V("</tr></table>"),Kl=V('<table hidden><colgroup id="'),sl=V('">'),Gd=V("</colgroup></table>");function Zl(b,w,k,P){switch(k.insertionMode){case 0:case 1:case 3:case 2:return G(b,or),G(b,w.segmentPrefix),G(b,ne(P.toString(16))),X(b,Uc);case 4:return G(b,$o),G(b,w.segmentPrefix),G(b,ne(P.toString(16))),X(b,Na);case 5:return G(b,Br),G(b,w.segmentPrefix),G(b,ne(P.toString(16))),X(b,Ua);case 6:return G(b,yo),G(b,w.segmentPrefix),G(b,ne(P.toString(16))),X(b,Xl);case 7:return G(b,Hr),G(b,w.segmentPrefix),G(b,ne(P.toString(16))),X(b,Ur);case 8:return G(b,Ri),G(b,w.segmentPrefix),G(b,ne(P.toString(16))),X(b,Vc);case 9:return G(b,Kl),G(b,w.segmentPrefix),G(b,ne(P.toString(16))),X(b,sl);default:throw Error(t(397))}}function Wc(b,w){switch(w.insertionMode){case 0:case 1:case 3:case 2:return X(b,Wd);case 4:return X(b,Rn);case 5:return X(b,el);case 6:return X(b,tl);case 7:return X(b,ei);case 8:return X(b,nl);case 9:return X(b,Gd);default:throw Error(t(397))}}var If=V('$RS=function(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),kg=V('$RS("'),Dg=V('","'),Rg=V('")<\/script>');V('<template data-rsi="" data-sid="'),V('" data-pid="');var Gc=V(`$RB=[];$RV=function(a){$RT=performance.now();for(var b=0;b<a.length;b+=2){var c=a[b],e=a[b+1];null!==e.parentNode&&e.parentNode.removeChild(e);var f=c.parentNode;if(f){var g=c.previousSibling,h=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d||"/&"===d)if(0===h)break;else h--;else"$"!==d&&"$?"!==d&&"$~"!==d&&"$!"!==d&&"&"!==d||h++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;e.firstChild;)f.insertBefore(e.firstChild,c);g.data="$";g._reactRetry&&requestAnimationFrame(g._reactRetry)}}a.length=0};
$RC=function(a,b){if(b=document.getElementById(b))(a=document.getElementById(a))?(a.previousSibling.data="$~",$RB.push(a,b),2===$RB.length&&("number"!==typeof $RT?requestAnimationFrame($RV.bind(null,$RB)):(a=performance.now(),setTimeout($RV.bind(null,$RB),2300>a&&2E3<a?2300-a:$RT+300-a)))):b.parentNode.removeChild(b)};`);ne(`$RV=function(A,g){function k(a,b){var e=a.getAttribute(b);e&&(b=a.style,l.push(a,b.viewTransitionName,b.viewTransitionClass),"auto"!==e&&(b.viewTransitionClass=e),(a=a.getAttribute("vt-name"))||(a="_T_"+K++ +"_"),b.viewTransitionName=a,B=!0)}var B=!1,K=0,l=[];try{var f=document.__reactViewTransition;if(f){f.finished.finally($RV.bind(null,g));return}var m=new Map;for(f=1;f<g.length;f+=2)for(var h=g[f].querySelectorAll("[vt-share]"),d=0;d<h.length;d++){var c=h[d];m.set(c.getAttribute("vt-name"),c)}var u=[];for(h=0;h<g.length;h+=2){var C=g[h],x=C.parentNode;if(x){var v=x.getBoundingClientRect();if(v.left||v.top||v.width||v.height){c=C;for(f=0;c;){if(8===c.nodeType){var r=c.data;if("/$"===r)if(0===f)break;else f--;else"$"!==r&&"$?"!==r&&"$~"!==r&&"$!"!==r||f++}else if(1===c.nodeType){d=c;var D=d.getAttribute("vt-name"),y=m.get(D);k(d,y?"vt-share":"vt-exit");y&&(k(y,"vt-share"),m.set(D,null));var E=d.querySelectorAll("[vt-share]");for(d=0;d<E.length;d++){var F=E[d],G=F.getAttribute("vt-name"),
H=m.get(G);H&&(k(F,"vt-share"),k(H,"vt-share"),m.set(G,null))}}c=c.nextSibling}for(var I=g[h+1],t=I.firstElementChild;t;)null!==m.get(t.getAttribute("vt-name"))&&k(t,"vt-enter"),t=t.nextElementSibling;c=x;do for(var n=c.firstElementChild;n;){var J=n.getAttribute("vt-update");J&&"none"!==J&&!l.includes(n)&&k(n,"vt-update");n=n.nextElementSibling}while((c=c.parentNode)&&1===c.nodeType&&"none"!==c.getAttribute("vt-update"));u.push.apply(u,I.querySelectorAll('img[src]:not([loading="lazy"])'))}}}if(B){var z=
document.__reactViewTransition=document.startViewTransition({update:function(){A(g);for(var a=[document.documentElement.clientHeight,document.fonts.ready],b={},e=0;e<u.length;b={g:b.g},e++)if(b.g=u[e],!b.g.complete){var p=b.g.getBoundingClientRect();0<p.bottom&&0<p.right&&p.top<window.innerHeight&&p.left<window.innerWidth&&(p=new Promise(function(w){return function(q){w.g.addEventListener("load",q);w.g.addEventListener("error",q)}}(b)),a.push(p))}return Promise.race([Promise.all(a),new Promise(function(w){var q=
performance.now();setTimeout(w,2300>q&&2E3<q?2300-q:500)})])},types:[]});z.ready.finally(function(){for(var a=l.length-3;0<=a;a-=3){var b=l[a],e=b.style;e.viewTransitionName=l[a+1];e.viewTransitionClass=l[a+1];""===b.getAttribute("style")&&b.removeAttribute("style")}});z.finished.finally(function(){document.__reactViewTransition===z&&(document.__reactViewTransition=null)});$RB=[];return}}catch(a){}A(g)}.bind(null,$RV);`);var Bf=V('$RC("'),Mg=V(`$RM=new Map;$RR=function(n,w,p){function u(q){this._p=null;q()}for(var r=new Map,t=document,h,b,e=t.querySelectorAll("link[data-precedence],style[data-precedence]"),v=[],k=0;b=e[k++];)"not all"===b.getAttribute("media")?v.push(b):("LINK"===b.tagName&&$RM.set(b.getAttribute("href"),b),r.set(b.dataset.precedence,h=b));e=0;b=[];var l,a;for(k=!0;;){if(k){var f=p[e++];if(!f){k=!1;e=0;continue}var c=!1,m=0;var d=f[m++];if(a=$RM.get(d)){var g=a._p;c=!0}else{a=t.createElement("link");a.href=d;a.rel=
"stylesheet";for(a.dataset.precedence=l=f[m++];g=f[m++];)a.setAttribute(g,f[m++]);g=a._p=new Promise(function(q,x){a.onload=u.bind(a,q);a.onerror=u.bind(a,x)});$RM.set(d,a)}d=a.getAttribute("media");!g||d&&!matchMedia(d).matches||b.push(g);if(c)continue}else{a=v[e++];if(!a)break;l=a.getAttribute("data-precedence");a.removeAttribute("media")}c=r.get(l)||h;c===h&&(h=a);r.set(l,a);c?c.parentNode.insertBefore(a,c.nextSibling):(c=t.head,c.insertBefore(a,c.firstChild))}if(p=document.getElementById(n))p.previousSibling.data=
"$~";Promise.all(b).then($RC.bind(null,n,w),$RX.bind(null,n,"CSS failed to load"))};$RR("`),Hf=V('$RR("'),Yd=V('","'),Pg=V('",'),Xd=V('"'),Uf=V(")<\/script>");V('<template data-rci="" data-bid="'),V('<template data-rri="" data-bid="'),V('" data-sid="'),V('" data-sty="');var Ql=V('$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};'),mh=V('$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};;$RX("'),Kd=V('$RX("'),Zd=V('"'),Jl=V(","),Og=V(")<\/script>");V('<template data-rxi="" data-bid="'),V('" data-dgst="'),V('" data-msg="'),V('" data-stck="'),V('" data-cstck="');var Lg=/[<\u2028\u2029]/g;function Vf(b){return JSON.stringify(b).replace(Lg,function(w){switch(w){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var ti=/[&><\u2028\u2029]/g;function ql(b){return JSON.stringify(b).replace(ti,function(w){switch(w){case"&":return"\\u0026";case">":return"\\u003e";case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSObjectForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var gh=V(' media="not all" data-precedence="'),Qd=V('" data-href="'),Wf=V('">'),il=V("</style>"),vo=!1,Yc=!0;function wo(b){var w=b.rules,k=b.hrefs,P=0;if(k.length){for(G(this,qe.startInlineStyle),G(this,gh),G(this,b.precedence),G(this,Qd);P<k.length-1;P++)G(this,k[P]),G(this,qd);for(G(this,k[P]),G(this,Wf),P=0;P<w.length;P++)G(this,w[P]);Yc=X(this,il),vo=!0,w.length=0,k.length=0}}function Gs(b){return b.state!==2?vo=!0:!1}function lr(b,w,k){return vo=!1,Yc=!0,qe=k,w.styles.forEach(wo,b),qe=null,w.stylesheets.forEach(Gs),vo&&(k.stylesToHoist=!0),Yc}function Vn(b){for(var w=0;w<b.length;w++)G(this,b[w]);b.length=0}var Va=[];function Jd(b){Kn(Va,b.props);for(var w=0;w<Va.length;w++)G(this,Va[w]);Va.length=0,b.state=2}var $l=V(' data-precedence="'),ph=V('" data-href="'),qd=V(" "),al=V('">'),$d=V("</style>");function eu(b){var w=0<b.sheets.size;b.sheets.forEach(Jd,this),b.sheets.clear();var k=b.rules,P=b.hrefs;if(!w||P.length){if(G(this,qe.startInlineStyle),G(this,$l),G(this,b.precedence),b=0,P.length){for(G(this,ph);b<P.length-1;b++)G(this,P[b]),G(this,qd);G(this,P[b])}for(G(this,al),b=0;b<k.length;b++)G(this,k[b]);G(this,$d),k.length=0,P.length=0}}function ja(b){if(b.state===0){b.state=1;var w=b.props;for(Kn(Va,{rel:"preload",as:"style",href:b.props.href,crossOrigin:w.crossOrigin,fetchPriority:w.fetchPriority,integrity:w.integrity,media:w.media,hrefLang:w.hrefLang,referrerPolicy:w.referrerPolicy}),b=0;b<Va.length;b++)G(this,Va[b]);Va.length=0}}function tu(b){b.sheets.forEach(ja,this),b.sheets.clear()}V('<link rel="expect" href="#'),V('" blocking="render"/>');var Xc=V(' id="');function Vr(b,w){(w.instructions&32)===0&&(w.instructions|=32,b.push(Xc,ne(Se("_"+w.idPrefix+"R_")),jn))}var So=V("["),nu=V(",["),rl=V(","),Kc=V("]");function Fs(b,w){G(b,So);var k=So;w.stylesheets.forEach(function(P){if(P.state!==2)if(P.state===3)G(b,k),G(b,ne(ql(""+P.props.href))),G(b,Kc),k=nu;else{G(b,k);var F=P.props["data-precedence"],K=P.props,q=Fe(""+P.props.href);G(b,ne(ql(q))),F=""+F,G(b,rl),G(b,ne(ql(F)));for(var ue in K)if(Ce.call(K,ue)&&(F=K[ue],F!=null))switch(ue){case"href":case"rel":case"precedence":case"data-precedence":break;case"children":case"dangerouslySetInnerHTML":throw Error(t(399,"link"));default:xh(b,ue,F)}G(b,Kc),k=nu,P.state=3}}),G(b,Kc)}function xh(b,w,k){var P=w.toLowerCase();switch(typeof k){case"function":case"symbol":return}switch(w){case"innerHTML":case"dangerouslySetInnerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":case"style":case"ref":return;case"className":P="class",w=""+k;break;case"hidden":if(k===!1)return;w="";break;case"src":case"href":k=Fe(k),w=""+k;break;default:if(2<w.length&&(w[0]==="o"||w[0]==="O")&&(w[1]==="n"||w[1]==="N")||!$e(w))return;w=""+k}G(b,rl),G(b,ne(ql(P))),G(b,rl),G(b,ne(ql(w)))}function Wr(){return{styles:new Set,stylesheets:new Set,suspenseyImages:!1}}function su(b){var w=In||null;if(w){var k=w.resumableState,P=w.renderState;if(typeof b=="string"&&b){if(!k.dnsResources.hasOwnProperty(b)){k.dnsResources[b]=null,k=P.headers;var F,K;(K=k&&0<k.remainingCapacity)&&(K=(F="<"+(""+b).replace(Wa,ll)+">; rel=dns-prefetch",0<=(k.remainingCapacity-=F.length+2))),K?(P.resets.dns[b]=null,k.preconnects&&(k.preconnects+=", "),k.preconnects+=F):(F=[],Kn(F,{href:b,rel:"dns-prefetch"}),P.preconnects.add(F))}vi(w)}}else St.D(b)}function iu(b,w){var k=In||null;if(k){var P=k.resumableState,F=k.renderState;if(typeof b=="string"&&b){var K=w==="use-credentials"?"credentials":typeof w=="string"?"anonymous":"default";if(!P.connectResources[K].hasOwnProperty(b)){P.connectResources[K][b]=null,P=F.headers;var q,ue;if(ue=P&&0<P.remainingCapacity){if(ue="<"+(""+b).replace(Wa,ll)+">; rel=preconnect",typeof w=="string"){var ie=(""+w).replace(jo,Co);ue+='; crossorigin="'+ie+'"'}ue=(q=ue,0<=(P.remainingCapacity-=q.length+2))}ue?(F.resets.connect[K][b]=null,P.preconnects&&(P.preconnects+=", "),P.preconnects+=q):(K=[],Kn(K,{rel:"preconnect",href:b,crossOrigin:w}),F.preconnects.add(K))}vi(k)}}else St.C(b,w)}function au(b,w,k){var P=In||null;if(P){var F=P.resumableState,K=P.renderState;if(w&&b){switch(w){case"image":if(k)var q=k.imageSrcSet,ue=k.imageSizes,ie=k.fetchPriority;var he=q?q+`
`+(ue||""):b;if(F.imageResources.hasOwnProperty(he))return;F.imageResources[he]=Pt,F=K.headers;var we;F&&0<F.remainingCapacity&&typeof q!="string"&&ie==="high"&&(we=ni(b,w,k),0<=(F.remainingCapacity-=we.length+2))?(K.resets.image[he]=Pt,F.highImagePreloads&&(F.highImagePreloads+=", "),F.highImagePreloads+=we):(F=[],Kn(F,Ne({rel:"preload",href:q?void 0:b,as:w},k)),ie==="high"?K.highImagePreloads.add(F):(K.bulkPreloads.add(F),K.preloads.images.set(he,F)));break;case"style":if(F.styleResources.hasOwnProperty(b))return;q=[],Kn(q,Ne({rel:"preload",href:b,as:w},k)),F.styleResources[b]=!k||typeof k.crossOrigin!="string"&&typeof k.integrity!="string"?Pt:[k.crossOrigin,k.integrity],K.preloads.stylesheets.set(b,q),K.bulkPreloads.add(q);break;case"script":if(F.scriptResources.hasOwnProperty(b))return;q=[],K.preloads.scripts.set(b,q),K.bulkPreloads.add(q),Kn(q,Ne({rel:"preload",href:b,as:w},k)),F.scriptResources[b]=!k||typeof k.crossOrigin!="string"&&typeof k.integrity!="string"?Pt:[k.crossOrigin,k.integrity];break;default:if(F.unknownResources.hasOwnProperty(w)){if(q=F.unknownResources[w],q.hasOwnProperty(b))return}else q={},F.unknownResources[w]=q;q[b]=Pt,(F=K.headers)&&0<F.remainingCapacity&&w==="font"&&(he=ni(b,w,k),0<=(F.remainingCapacity-=he.length+2))?(K.resets.font[b]=Pt,F.fontPreloads&&(F.fontPreloads+=", "),F.fontPreloads+=he):(F=[],b=Ne({rel:"preload",href:b,as:w},k),Kn(F,b),w)==="font"?K.fontPreloads.add(F):K.bulkPreloads.add(F)}vi(P)}}else St.L(b,w,k)}function ru(b,w){var k=In||null;if(k){var P=k.resumableState,F=k.renderState;if(b){var K=w&&typeof w.as=="string"?w.as:"script";switch(K){case"script":if(P.moduleScriptResources.hasOwnProperty(b))return;K=[],P.moduleScriptResources[b]=!w||typeof w.crossOrigin!="string"&&typeof w.integrity!="string"?Pt:[w.crossOrigin,w.integrity],F.preloads.moduleScripts.set(b,K);break;default:if(P.moduleUnknownResources.hasOwnProperty(K)){var q=P.unknownResources[K];if(q.hasOwnProperty(b))return}else q={},P.moduleUnknownResources[K]=q;K=[],q[b]=Pt}Kn(K,Ne({rel:"modulepreload",href:b},w)),F.bulkPreloads.add(K),vi(k)}}else St.m(b,w)}function Zc(b,w,k){var P=In||null;if(P){var F=P.resumableState,K=P.renderState;if(b){w=w||"default";var q=K.styles.get(w),ue=F.styleResources.hasOwnProperty(b)?F.styleResources[b]:void 0;ue!==null&&(F.styleResources[b]=null,q||(q={precedence:ne(Se(w)),rules:[],hrefs:[],sheets:new Map},K.styles.set(w,q)),w={state:0,props:Ne({rel:"stylesheet",href:b,"data-precedence":w},k)},ue&&(ue.length===2&&ol(w.props,ue),(K=K.preloads.stylesheets.get(b))&&0<K.length?K.length=0:w.state=1),q.sheets.set(b,w),vi(P))}}else St.S(b,w,k)}function No(b,w){var k=In||null;if(k){var P=k.resumableState,F=k.renderState;if(b){var K=P.scriptResources.hasOwnProperty(b)?P.scriptResources[b]:void 0;K!==null&&(P.scriptResources[b]=null,w=Ne({src:b,async:!0},w),K&&(K.length===2&&ol(w,K),b=F.preloads.scripts.get(b))&&(b.length=0),b=[],F.scripts.add(b),Sa(b,w),vi(k))}}else St.X(b,w)}function Gf(b,w){var k=In||null;if(k){var P=k.resumableState,F=k.renderState;if(b){var K=P.moduleScriptResources.hasOwnProperty(b)?P.moduleScriptResources[b]:void 0;K!==null&&(P.moduleScriptResources[b]=null,w=Ne({src:b,type:"module",async:!0},w),K&&(K.length===2&&ol(w,K),b=F.preloads.moduleScripts.get(b))&&(b.length=0),b=[],F.scripts.add(b),Sa(b,w),vi(k))}}else St.M(b,w)}function ol(b,w){b.crossOrigin==null&&(b.crossOrigin=w[0]),b.integrity==null&&(b.integrity=w[1])}function ni(b,w,k){b=(""+b).replace(Wa,ll),w=(""+w).replace(jo,Co),w="<"+b+'>; rel=preload; as="'+w+'"';for(var P in k)Ce.call(k,P)&&(b=k[P],typeof b=="string"&&(w+="; "+P.toLowerCase()+'="'+(""+b).replace(jo,Co)+'"'));return w}var Wa=/[<>\r\n]/g;function ll(b){switch(b){case"<":return"%3C";case">":return"%3E";case`
`:return"%0A";case"\r":return"%0D";default:throw Error("escapeLinkHrefForHeaderContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}var jo=/["';,\r\n]/g;function Co(b){switch(b){case'"':return"%22";case"'":return"%27";case";":return"%3B";case",":return"%2C";case`
`:return"%0A";case"\r":return"%0D";default:throw Error("escapeStringForLinkHeaderQuotedParamValueContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}function ou(b){this.styles.add(b)}function lu(b){this.stylesheets.add(b)}function cl(b,w){w.styles.forEach(ou,b),w.stylesheets.forEach(lu,b),w.suspenseyImages&&(b.suspenseyImages=!0)}function cr(b){return 0<b.stylesheets.size||b.suspenseyImages}var ec=Function.prototype.bind,Ga=Symbol.for("react.client.reference");function tc(b){if(b==null)return null;if(typeof b=="function")return b.$$typeof===Ga?null:b.displayName||b.name||null;if(typeof b=="string")return b;switch(b){case r:return"Fragment";case c:return"Profiler";case o:return"StrictMode";case g:return"Suspense";case x:return"SuspenseList";case E:return"Activity"}if(typeof b=="object")switch(b.$$typeof){case i:return"Portal";case h:return b.displayName||"Context";case u:return(b._context.displayName||"Context")+".Consumer";case f:var w=b.render;return b=b.displayName,b||(b=w.displayName||w.name||"",b=b!==""?"ForwardRef("+b+")":"ForwardRef"),b;case y:return w=b.displayName||null,w!==null?w:tc(b.type)||"Memo";case N:w=b._payload,b=b._init;try{return tc(b(w))}catch{}}return null}var bh={},gi=null;function Gr(b,w){if(b!==w){b.context._currentValue=b.parentValue,b=b.parent;var k=w.parent;if(b===null){if(k!==null)throw Error(t(401))}else{if(k===null)throw Error(t(401));Gr(b,k)}w.context._currentValue=w.value}}function Qc(b){b.context._currentValue=b.parentValue,b=b.parent,b!==null&&Qc(b)}function v(b){var w=b.parent;w!==null&&v(w),b.context._currentValue=b.value}function S(b,w){if(b.context._currentValue=b.parentValue,b=b.parent,b===null)throw Error(t(402));b.depth===w.depth?Gr(b,w):S(b,w)}function D(b,w){var k=w.parent;if(k===null)throw Error(t(402));b.depth===k.depth?Gr(b,k):D(b,k),w.context._currentValue=w.value}function O(b){var w=gi;w!==b&&(w===null?v(b):b===null?Qc(w):w.depth===b.depth?Gr(w,b):w.depth>b.depth?S(w,b):D(w,b),gi=b)}var H={enqueueSetState:function(b,w){b=b._reactInternals,b.queue!==null&&b.queue.push(w)},enqueueReplaceState:function(b,w){b=b._reactInternals,b.replace=!0,b.queue=[w]},enqueueForceUpdate:function(){}},J={id:1,overflow:""};function te(b,w,k){var P=b.id;b=b.overflow;var F=32-Ee(P)-1;P&=~(1<<F),k+=1;var K=32-Ee(w)+F;if(30<K){var q=F-F%5;return K=(P&(1<<q)-1).toString(32),P>>=q,F-=q,{id:1<<32-Ee(w)+F|k<<F|P,overflow:K+b}}return{id:1<<K|k<<F|P,overflow:b}}var Ee=Math.clz32?Math.clz32:He,ce=Math.log,_e=Math.LN2;function He(b){return b>>>=0,b===0?32:31-(ce(b)/_e|0)|0}function Pe(){}var it=Error(t(460));function pt(b,w,k){switch(k=b[k],k===void 0?b.push(w):k!==w&&(w.then(Pe,Pe),w=k),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(Pe,Pe):(b=w,b.status="pending",b.then(function(P){if(w.status==="pending"){var F=w;F.status="fulfilled",F.value=P}},function(P){if(w.status==="pending"){var F=w;F.status="rejected",F.reason=P}})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}throw Zt=w,it}}var Zt=null;function Ut(){if(Zt===null)throw Error(t(459));var b=Zt;return Zt=null,b}function Bt(b,w){return b===w&&(b!==0||1/b===1/w)||b!==b&&w!==w}var zt=typeof Object.is=="function"?Object.is:Bt,Wt=null,_n=null,ns=null,rn=null,on=null,mn=null,Wn=!1,cn=!1,ys=0,Tn=0,ls=-1,Zn=0,Gn=null,pi=null,Yr=0;function Qi(){if(Wt===null)throw Error(t(321));return Wt}function xi(){if(0<Yr)throw Error(t(312));return{memoizedState:null,queue:null,next:null}}function Ya(){return mn===null?on===null?(Wn=!1,on=mn=xi()):(Wn=!0,mn=on):mn.next===null?(Wn=!1,mn=mn.next=xi()):(Wn=!0,mn=mn.next),mn}function vs(){var b=Gn;return Gn=null,b}function Mi(){rn=ns=_n=Wt=null,cn=!1,on=null,Yr=0,mn=pi=null}function Pi(b,w){return typeof w=="function"?w(b):w}function fs(b,w,k){if(Wt=Qi(),mn=Ya(),Wn){var P=mn.queue;if(w=P.dispatch,pi!==null&&(k=pi.get(P),k!==void 0)){pi.delete(P),P=mn.memoizedState;do P=b(P,k.action),k=k.next;while(k!==null);return mn.memoizedState=P,[P,w]}return[mn.memoizedState,w]}return b=b===Pi?typeof w=="function"?w():w:k!==void 0?k(w):w,mn.memoizedState=b,b=mn.queue={last:null,dispatch:null},b=b.dispatch=Oi.bind(null,Wt,b),[mn.memoizedState,b]}function Es(b,w){if(Wt=Qi(),mn=Ya(),w=w===void 0?null:w,mn!==null){var k=mn.memoizedState;if(k!==null&&w!==null){var P=k[1];e:if(P===null)P=!1;else{for(var F=0;F<P.length&&F<w.length;F++)if(!zt(w[F],P[F])){P=!1;break e}P=!0}if(P)return k[0]}}return b=b(),mn.memoizedState=[b,w],b}function Oi(b,w,k){if(25<=Yr)throw Error(t(301));if(b===Wt)if(cn=!0,b={action:k,next:null},pi===null&&(pi=new Map),k=pi.get(w),k===void 0)pi.set(w,b);else{for(w=k;w.next!==null;)w=w.next;w.next=b}}function zn(){throw Error(t(440))}function bi(){throw Error(t(394))}function da(){throw Error(t(479))}function cu(b,w,k){Qi();var P=Tn++,F=ns;if(typeof b.$$FORM_ACTION=="function"){var K=null,q=rn;F=F.formState;var ue=b.$$IS_SIGNATURE_EQUAL;if(F!==null&&typeof ue=="function"){var ie=F[1];ue.call(b,F[2],F[3])&&(K=k!==void 0?"p"+k:"k"+I(JSON.stringify([q,null,P]),0),ie===K&&(ls=P,w=F[0]))}var he=b.bind(null,w);return b=function(De){he(De)},typeof he.$$FORM_ACTION=="function"&&(b.$$FORM_ACTION=function(De){De=he.$$FORM_ACTION(De),k!==void 0&&(k+="",De.action=k);var tt=De.data;return tt&&(K===null&&(K=k!==void 0?"p"+k:"k"+I(JSON.stringify([q,null,P]),0)),tt.append("$ACTION_KEY",K)),De}),[w,b,!1]}var we=b.bind(null,w);return[w,function(De){we(De)},!1]}function Jc(b){var w=Zn;return Zn+=1,Gn===null&&(Gn=[]),pt(Gn,b,w)}function du(){throw Error(t(393))}var uu={readContext:function(b){return b._currentValue},use:function(b){if(b!==null&&typeof b=="object"){if(typeof b.then=="function")return Jc(b);if(b.$$typeof===h)return b._currentValue}throw Error(t(438,String(b)))},useContext:function(b){return Qi(),b._currentValue},useMemo:Es,useReducer:fs,useRef:function(b){Wt=Qi(),mn=Ya();var w=mn.memoizedState;return w===null?(b={current:b},mn.memoizedState=b):w},useState:function(b){return fs(Pi,b)},useInsertionEffect:Pe,useLayoutEffect:Pe,useCallback:function(b,w){return Es(function(){return b},w)},useImperativeHandle:Pe,useEffect:Pe,useDebugValue:Pe,useDeferredValue:function(b,w){return Qi(),w!==void 0?w:b},useTransition:function(){return Qi(),[!1,bi]},useId:function(){var b=_n.treeContext,w=b.overflow;b=b.id,b=(b&~(1<<32-Ee(b)-1)).toString(32)+w;var k=ws;if(k===null)throw Error(t(404));return w=ys++,b="_"+k.idPrefix+"R_"+b,0<w&&(b+="H"+w.toString(32)),b+"_"},useSyncExternalStore:function(b,w,k){if(k===void 0)throw Error(t(407));return k()},useOptimistic:function(b){return Qi(),[b,da]},useActionState:cu,useFormState:cu,useHostTransitionStatus:function(){return Qi(),ot},useMemoCache:function(b){for(var w=Array(b),k=0;k<b;k++)w[k]=R;return w},useCacheRefresh:function(){return du},useEffectEvent:function(){return zn}},ws=null,Yn={getCacheForType:function(){throw Error(t(248))},cacheSignal:function(){throw Error(t(248))}},Xt,si;function Ys(b){if(Xt===void 0)try{throw Error()}catch(k){var w=k.stack.trim().match(/\n( *(at )?)/);Xt=w&&w[1]||"",si=-1<k.stack.indexOf(`
    at`)?" (<anonymous>)":-1<k.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xt+b+si}var nc=!1;function Li(b,w){if(!b||nc)return"";nc=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var P={DetermineComponentFrameRoot:function(){try{if(w){var De=function(){throw Error()};if(Object.defineProperty(De.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(De,[])}catch(st){var tt=st}Reflect.construct(b,[],De)}else{try{De.call()}catch(st){tt=st}b.call(De.prototype)}}else{try{throw Error()}catch(st){tt=st}(De=b())&&typeof De.catch=="function"&&De.catch(function(){})}}catch(st){if(st&&tt&&typeof st.stack=="string")return[st.stack,tt.stack]}return[null,null]}};P.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var F=Object.getOwnPropertyDescriptor(P.DetermineComponentFrameRoot,"name");F&&F.configurable&&Object.defineProperty(P.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var K=P.DetermineComponentFrameRoot(),q=K[0],ue=K[1];if(q&&ue){var ie=q.split(`
`),he=ue.split(`
`);for(F=P=0;P<ie.length&&!ie[P].includes("DetermineComponentFrameRoot");)P++;for(;F<he.length&&!he[F].includes("DetermineComponentFrameRoot");)F++;if(P===ie.length||F===he.length)for(P=ie.length-1,F=he.length-1;1<=P&&0<=F&&ie[P]!==he[F];)F--;for(;1<=P&&0<=F;P--,F--)if(ie[P]!==he[F]){if(P!==1||F!==1)do if(P--,F--,0>F||ie[P]!==he[F]){var we=`
`+ie[P].replace(" at new "," at ");return b.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",b.displayName)),we}while(1<=P&&0<=F);break}}}finally{nc=!1,Error.prepareStackTrace=k}return(k=b?b.displayName||b.name:"")?Ys(k):""}function hu(b){if(typeof b=="string")return Ys(b);if(typeof b=="function")return b.prototype&&b.prototype.isReactComponent?Li(b,!0):Li(b,!1);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case f:return Li(b.render,!1);case y:return Li(b.type,!1);case N:var w=b,k=w._payload;w=w._init;try{b=w(k)}catch{return Ys("Lazy")}return hu(b)}if(typeof b.name=="string"){e:{k=b.name,w=b.env;var P=b.debugLocation;if(P!=null&&(b=Error.prepareStackTrace,Error.prepareStackTrace=void 0,P=P.stack,Error.prepareStackTrace=b,P.startsWith(`Error: react-stack-top-frame
`)&&(P=P.slice(29)),b=P.indexOf(`
`),b!==-1&&(P=P.slice(b+1)),b=P.indexOf("react_stack_bottom_frame"),b!==-1&&(b=P.lastIndexOf(`
`,b)),b=b!==-1?P=P.slice(0,b):"",P=b.lastIndexOf(`
`),b=P===-1?b:b.slice(P+1),b.indexOf(k)!==-1)){k=`
`+b;break e}k=Ys(k+(w?" ["+w+"]":""))}return k}}switch(b){case x:return Ys("SuspenseList");case g:return Ys("Suspense")}return""}function ua(b,w){return(500<w.byteSize||cr(w.contentState))&&w.contentPreamble===null}function dr(b){if(typeof b=="object"&&b!==null&&typeof b.environmentName=="string"){var w=b.environmentName;b=[b].slice(0),typeof b[0]=="string"?b.splice(0,1,"%c%s%c "+b[0],"background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px"," "+w+" ",""):b.splice(0,0,"%c%s%c","background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px"," "+w+" ",""),b.unshift(console),w=ec.apply(console.error,b),w()}else console.error(b);return null}function Ca(b,w,k,P,F,K,q,ue,ie,he,we){var De=new Set;this.destination=null,this.flushScheduled=!1,this.resumableState=b,this.renderState=w,this.rootFormatContext=k,this.progressiveChunkSize=P===void 0?12800:P,this.status=10,this.fatalError=null,this.pendingRootTasks=this.allPendingTasks=this.nextSegmentId=0,this.completedPreambleSegments=this.completedRootSegment=null,this.byteSize=0,this.abortableTasks=De,this.pingedTasks=[],this.clientRenderedBoundaries=[],this.completedBoundaries=[],this.partialBoundaries=[],this.trackedPostpones=null,this.onError=F===void 0?dr:F,this.onPostpone=he===void 0?Pe:he,this.onAllReady=K===void 0?Pe:K,this.onShellReady=q===void 0?Pe:q,this.onShellError=ue===void 0?Pe:ue,this.onFatalError=ie===void 0?Pe:ie,this.formState=we===void 0?null:we}function Ao(b,w,k,P,F,K,q,ue,ie,he,we,De){return w=new Ca(w,k,P,F,K,q,ue,ie,he,we,De),k=ii(w,0,null,P,!1,!1),k.parentFlushed=!0,b=ur(w,null,b,-1,null,k,null,null,w.abortableTasks,null,P,null,J,null,null),Ka(b),w.pingedTasks.push(b),w}function Xr(b,w,k,P,F,K,q,ue,ie,he,we){return b=Ao(b,w,k,P,F,K,q,ue,ie,he,we,void 0),b.trackedPostpones={workingMap:new Map,rootNodes:[],rootSlots:null},b}function Xa(b,w,k,P,F,K,q,ue,ie){return k=new Ca(w.resumableState,k,w.rootFormatContext,w.progressiveChunkSize,P,F,K,q,ue,ie,null),k.nextSegmentId=w.nextSegmentId,typeof w.replaySlots=="number"?(P=ii(k,0,null,w.rootFormatContext,!1,!1),P.parentFlushed=!0,b=ur(k,null,b,-1,null,P,null,null,k.abortableTasks,null,w.rootFormatContext,null,J,null,null),Ka(b),k.pingedTasks.push(b),k):(b=sc(k,null,{nodes:w.replayNodes,slots:w.replaySlots,pendingTasks:0},b,-1,null,null,k.abortableTasks,null,w.rootFormatContext,null,J,null,null),Ka(b),k.pingedTasks.push(b),k)}function Kr(b,w,k,P,F,K,q,ue,ie){return b=Xa(b,w,k,P,F,K,q,ue,ie),b.trackedPostpones={workingMap:new Map,rootNodes:[],rootSlots:null},b}var In=null;function Fi(b,w){b.pingedTasks.push(w),b.pingedTasks.length===1&&(b.flushScheduled=b.destination!==null,b.trackedPostpones!==null||b.status===10?xe(function(){return gu(b)}):Z(function(){return gu(b)}))}function Ji(b,w,k,P,F){return k={status:0,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,row:w,completedSegments:[],byteSize:0,fallbackAbortableTasks:k,errorDigest:null,contentState:Wr(),fallbackState:Wr(),contentPreamble:P,fallbackPreamble:F,trackedContentKeyPath:null,trackedFallbackNode:null},w!==null&&(w.pendingTasks++,P=w.boundaries,P!==null&&(b.allPendingTasks++,k.pendingTasks++,P.push(k)),b=w.inheritedHoistables,b!==null&&cl(k.contentState,b)),k}function ur(b,w,k,P,F,K,q,ue,ie,he,we,De,tt,st,Ct){b.allPendingTasks++,F===null?b.pendingRootTasks++:F.pendingTasks++,st!==null&&st.pendingTasks++;var Gt={replay:null,node:k,childIndex:P,ping:function(){return Fi(b,Gt)},blockedBoundary:F,blockedSegment:K,blockedPreamble:q,hoistableState:ue,abortSet:ie,keyPath:he,formatContext:we,context:De,treeContext:tt,row:st,componentStack:Ct,thenableState:w};return ie.add(Gt),Gt}function sc(b,w,k,P,F,K,q,ue,ie,he,we,De,tt,st){b.allPendingTasks++,K===null?b.pendingRootTasks++:K.pendingTasks++,tt!==null&&tt.pendingTasks++,k.pendingTasks++;var Ct={replay:k,node:P,childIndex:F,ping:function(){return Fi(b,Ct)},blockedBoundary:K,blockedSegment:null,blockedPreamble:null,hoistableState:q,abortSet:ue,keyPath:ie,formatContext:he,context:we,treeContext:De,row:tt,componentStack:st,thenableState:w};return ue.add(Ct),Ct}function ii(b,w,k,P,F,K){return{status:0,parentFlushed:!1,id:-1,index:w,chunks:[],children:[],preambleChildren:[],parentFormatContext:P,boundary:k,lastPushedText:F,textEmbedded:K}}function Ka(b){var w=b.node;typeof w=="object"&&w!==null&&w.$$typeof===s&&(b.componentStack={parent:b.componentStack,type:w.type})}function ha(b){return b===null?null:{parent:b.parent,type:"Suspense Fallback"}}function Mn(b){var w={};return b&&Object.defineProperty(w,"componentStack",{configurable:!0,enumerable:!0,get:function(){try{var k="",P=b;do k+=hu(P.type),P=P.parent;while(P);var F=k}catch(K){F=`
Error generating stack: `+K.message+`
`+K.stack}return Object.defineProperty(w,"componentStack",{value:F}),F}}),w}function _s(b,w,k){if(b=b.onError,w=b(w,k),w==null||typeof w=="string")return w}function dl(b,w){var k=b.onShellError,P=b.onFatalError;k(w),P(w),b.destination!==null?(b.status=14,ge(b.destination,w)):(b.status=13,b.fatalError=w)}function yi(b,w){yh(b,w.next,w.hoistables)}function yh(b,w,k){for(;w!==null;){k!==null&&(cl(w.hoistables,k),w.inheritedHoistables=k);var P=w.boundaries;if(P!==null){w.boundaries=null;for(var F=0;F<P.length;F++){var K=P[F];k!==null&&cl(K.contentState,k),qi(b,K,null,null)}}if(w.pendingTasks--,0<w.pendingTasks)break;k=w.hoistables,w=w.next}}function qc(b,w){var k=w.boundaries;if(k!==null&&w.pendingTasks===k.length){for(var P=!0,F=0;F<k.length;F++){var K=k[F];if(K.pendingTasks!==1||K.parentFlushed||ua(b,K)){P=!1;break}}P&&yh(b,w,w.hoistables)}}function ss(b){var w={pendingTasks:1,boundaries:null,hoistables:Wr(),inheritedHoistables:null,together:!1,next:null};return b!==null&&0<b.pendingTasks&&(w.pendingTasks++,w.boundaries=[],b.next=w),w}function fu(b,w,k,P,F){var K=w.keyPath,q=w.treeContext,ue=w.row;w.keyPath=k,k=P.length;var ie=null;if(w.replay!==null){var he=w.replay.slots;if(he!==null&&typeof he=="object")for(var we=0;we<k;we++){var De=F!=="backwards"&&F!=="unstable_legacy-backwards"?we:k-1-we,tt=P[De];w.row=ie=ss(ie),w.treeContext=te(q,k,De);var st=he[De];typeof st=="number"?(ma(b,w,st,tt,De),delete he[De]):gs(b,w,tt,De),--ie.pendingTasks===0&&yi(b,ie)}else for(he=0;he<k;he++)we=F!=="backwards"&&F!=="unstable_legacy-backwards"?he:k-1-he,De=P[we],w.row=ie=ss(ie),w.treeContext=te(q,k,we),gs(b,w,De,we),--ie.pendingTasks===0&&yi(b,ie)}else if(F!=="backwards"&&F!=="unstable_legacy-backwards")for(F=0;F<k;F++)he=P[F],w.row=ie=ss(ie),w.treeContext=te(q,k,F),gs(b,w,he,F),--ie.pendingTasks===0&&yi(b,ie);else{for(F=w.blockedSegment,he=F.children.length,we=F.chunks.length,De=k-1;0<=De;De--){tt=P[De],w.row=ie=ss(ie),w.treeContext=te(q,k,De),st=ii(b,we,null,w.formatContext,De===0?F.lastPushedText:!0,!0),F.children.splice(he,0,st),w.blockedSegment=st;try{gs(b,w,tt,De),st.lastPushedText&&st.textEmbedded&&st.chunks.push(gt),st.status=1,zi(b,w.blockedBoundary,st),--ie.pendingTasks===0&&yi(b,ie)}catch(Ct){throw st.status=b.status===12?3:4,Ct}}w.blockedSegment=F,F.lastPushedText=!1}ue!==null&&ie!==null&&0<ie.pendingTasks&&(ue.pendingTasks++,ie.next=ue),w.treeContext=q,w.row=ue,w.keyPath=K}function ic(b,w,k,P,F,K){var q=w.thenableState;for(w.thenableState=null,Wt={},_n=w,ns=b,rn=k,Tn=ys=0,ls=-1,Zn=0,Gn=q,b=P(F,K);cn;)cn=!1,Tn=ys=0,ls=-1,Zn=0,Yr+=1,mn=null,b=P(F,K);return Mi(),b}function fa(b,w,k,P,F,K,q){var ue=!1;if(K!==0&&b.formState!==null){var ie=w.blockedSegment;if(ie!==null){ue=!0,ie=ie.chunks;for(var he=0;he<K;he++)he===q?ie.push(Ff):ie.push(Hl)}}K=w.keyPath,w.keyPath=k,F?(k=w.treeContext,w.treeContext=te(k,1,0),gs(b,w,P,-1),w.treeContext=k):ue?gs(b,w,P,-1):ms(b,w,P,-1),w.keyPath=K}function Zr(b,w,k,P,F,K){if(typeof P=="function")if(P.prototype&&P.prototype.isReactComponent){var q=F;if("ref"in F){q={};for(var ue in F)ue!=="ref"&&(q[ue]=F[ue])}var ie=P.defaultProps;if(ie){q===F&&(q=Ne({},q,F));for(var he in ie)q[he]===void 0&&(q[he]=ie[he])}F=q,q=bh,ie=P.contextType,typeof ie=="object"&&ie!==null&&(q=ie._currentValue),q=new P(F,q);var we=q.state!==void 0?q.state:null;if(q.updater=H,q.props=F,q.state=we,ie={queue:[],replace:!1},q._reactInternals=ie,K=P.contextType,q.context=typeof K=="object"&&K!==null?K._currentValue:bh,K=P.getDerivedStateFromProps,typeof K=="function"&&(K=K(F,we),we=K==null?we:Ne({},we,K),q.state=we),typeof P.getDerivedStateFromProps!="function"&&typeof q.getSnapshotBeforeUpdate!="function"&&(typeof q.UNSAFE_componentWillMount=="function"||typeof q.componentWillMount=="function"))if(P=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),P!==q.state&&H.enqueueReplaceState(q,q.state,null),ie.queue!==null&&0<ie.queue.length)if(P=ie.queue,K=ie.replace,ie.queue=null,ie.replace=!1,K&&P.length===1)q.state=P[0];else{for(ie=K?P[0]:q.state,we=!0,K=K?1:0;K<P.length;K++)he=P[K],he=typeof he=="function"?he.call(q,ie,F,void 0):he,he!=null&&(we?(we=!1,ie=Ne({},ie,he)):Ne(ie,he));q.state=ie}else ie.queue=null;if(P=q.render(),b.status===12)throw null;F=w.keyPath,w.keyPath=k,ms(b,w,P,-1),w.keyPath=F}else{if(P=ic(b,w,k,P,F,void 0),b.status===12)throw null;fa(b,w,k,P,ys!==0,Tn,ls)}else if(typeof P=="string")if(q=w.blockedSegment,q===null)q=F.children,ie=w.formatContext,we=w.keyPath,w.formatContext=le(ie,P,F),w.keyPath=k,gs(b,w,q,-1),w.formatContext=ie,w.keyPath=we;else{if(we=ki(q.chunks,P,F,b.resumableState,b.renderState,w.blockedPreamble,w.hoistableState,w.formatContext,q.lastPushedText),q.lastPushedText=!1,ie=w.formatContext,K=w.keyPath,w.keyPath=k,(w.formatContext=le(ie,P,F)).insertionMode===3){k=ii(b,0,null,w.formatContext,!1,!1),q.preambleChildren.push(k),w.blockedSegment=k;try{k.status=6,gs(b,w,we,-1),k.lastPushedText&&k.textEmbedded&&k.chunks.push(gt),k.status=1,zi(b,w.blockedBoundary,k)}finally{w.blockedSegment=q}}else gs(b,w,we,-1);w.formatContext=ie,w.keyPath=K;e:{switch(w=q.chunks,b=b.resumableState,P){case"title":case"style":case"script":case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break e;case"body":if(1>=ie.insertionMode){b.hasBody=!0;break e}break;case"html":if(ie.insertionMode===0){b.hasHtml=!0;break e}break;case"head":if(1>=ie.insertionMode)break e}w.push(Fr(P))}q.lastPushedText=!1}else{switch(P){case A:case o:case c:case r:P=w.keyPath,w.keyPath=k,ms(b,w,F.children,-1),w.keyPath=P;return;case E:P=w.blockedSegment,P===null?F.mode!=="hidden"&&(P=w.keyPath,w.keyPath=k,gs(b,w,F.children,-1),w.keyPath=P):F.mode!=="hidden"&&(P.chunks.push(Jo),P.lastPushedText=!1,q=w.keyPath,w.keyPath=k,gs(b,w,F.children,-1),w.keyPath=q,P.chunks.push(Hc),P.lastPushedText=!1);return;case x:e:{if(P=F.children,F=F.revealOrder,F==="forwards"||F==="backwards"||F==="unstable_legacy-backwards"){if(W(P)){fu(b,w,k,P,F);break e}if((q=z(P))&&(q=q.call(P))){if(ie=q.next(),!ie.done){do ie=q.next();while(!ie.done);fu(b,w,k,P,F)}break e}}F==="together"?(F=w.keyPath,q=w.row,ie=w.row=ss(null),ie.boundaries=[],ie.together=!0,w.keyPath=k,ms(b,w,P,-1),--ie.pendingTasks===0&&yi(b,ie),w.keyPath=F,w.row=q,q!==null&&0<ie.pendingTasks&&(q.pendingTasks++,ie.next=q)):(F=w.keyPath,w.keyPath=k,ms(b,w,P,-1),w.keyPath=F)}return;case M:case j:throw Error(t(343));case g:e:if(w.replay!==null){P=w.keyPath,q=w.formatContext,ie=w.row,w.keyPath=k,w.formatContext=ut(b.resumableState,q),w.row=null,k=F.children;try{gs(b,w,k,-1)}finally{w.keyPath=P,w.formatContext=q,w.row=ie}}else{P=w.keyPath,K=w.formatContext;var De=w.row;he=w.blockedBoundary,ue=w.blockedPreamble;var tt=w.hoistableState,st=w.blockedSegment,Ct=F.fallback;F=F.children;var Gt=new Set,Ht=2>w.formatContext.insertionMode?Ji(b,w.row,Gt,mt(),mt()):Ji(b,w.row,Gt,null,null);b.trackedPostpones!==null&&(Ht.trackedContentKeyPath=k);var dt=ii(b,st.chunks.length,Ht,w.formatContext,!1,!1);st.children.push(dt),st.lastPushedText=!1;var At=ii(b,0,null,w.formatContext,!1,!1);if(At.parentFlushed=!0,b.trackedPostpones!==null){q=w.componentStack,ie=[k[0],"Suspense Fallback",k[2]],we=[ie[1],ie[2],[],null],b.trackedPostpones.workingMap.set(ie,we),Ht.trackedFallbackNode=we,w.blockedSegment=dt,w.blockedPreamble=Ht.fallbackPreamble,w.keyPath=ie,w.formatContext=at(b.resumableState,K),w.componentStack=ha(q),dt.status=6;try{gs(b,w,Ct,-1),dt.lastPushedText&&dt.textEmbedded&&dt.chunks.push(gt),dt.status=1,zi(b,he,dt)}catch(ln){throw dt.status=b.status===12?3:4,ln}finally{w.blockedSegment=st,w.blockedPreamble=ue,w.keyPath=P,w.formatContext=K}w=ur(b,null,F,-1,Ht,At,Ht.contentPreamble,Ht.contentState,w.abortSet,k,ut(b.resumableState,w.formatContext),w.context,w.treeContext,null,q),Ka(w),b.pingedTasks.push(w)}else{w.blockedBoundary=Ht,w.blockedPreamble=Ht.contentPreamble,w.hoistableState=Ht.contentState,w.blockedSegment=At,w.keyPath=k,w.formatContext=ut(b.resumableState,K),w.row=null,At.status=6;try{if(gs(b,w,F,-1),At.lastPushedText&&At.textEmbedded&&At.chunks.push(gt),At.status=1,zi(b,Ht,At),Za(Ht,At),Ht.pendingTasks===0&&Ht.status===0){if(Ht.status=1,!ua(b,Ht)){De!==null&&--De.pendingTasks===0&&yi(b,De),b.pendingRootTasks===0&&w.blockedPreamble&&Aa(b);break e}}else De!==null&&De.together&&qc(b,De)}catch(ln){Ht.status=4,b.status===12?(At.status=3,q=b.fatalError):(At.status=4,q=ln),ie=Mn(w.componentStack),we=_s(b,q,ie),Ht.errorDigest=we,Qr(b,Ht)}finally{w.blockedBoundary=he,w.blockedPreamble=ue,w.hoistableState=tt,w.blockedSegment=st,w.keyPath=P,w.formatContext=K,w.row=De}w=ur(b,null,Ct,-1,he,dt,Ht.fallbackPreamble,Ht.fallbackState,Gt,[k[0],"Suspense Fallback",k[2]],at(b.resumableState,w.formatContext),w.context,w.treeContext,w.row,ha(w.componentStack)),Ka(w),b.pingedTasks.push(w)}}return}if(typeof P=="object"&&P!==null)switch(P.$$typeof){case f:if("ref"in F)for(st in q={},F)st!=="ref"&&(q[st]=F[st]);else q=F;P=ic(b,w,k,P.render,q,K),fa(b,w,k,P,ys!==0,Tn,ls);return;case y:Zr(b,w,k,P.type,F,K);return;case h:if(ie=F.children,q=w.keyPath,F=F.value,we=P._currentValue,P._currentValue=F,K=gi,gi=P={parent:K,depth:K===null?0:K.depth+1,context:P,parentValue:we,value:F},w.context=P,w.keyPath=k,ms(b,w,ie,-1),b=gi,b===null)throw Error(t(403));b.context._currentValue=b.parentValue,b=gi=b.parent,w.context=b,w.keyPath=q;return;case u:F=F.children,P=F(P._context._currentValue),F=w.keyPath,w.keyPath=k,ms(b,w,P,-1),w.keyPath=F;return;case N:if(q=P._init,P=q(P._payload),b.status===12)throw null;Zr(b,w,k,P,F,K);return}throw Error(t(130,P==null?P:typeof P,""))}}function ma(b,w,k,P,F){var K=w.replay,q=w.blockedBoundary,ue=ii(b,0,null,w.formatContext,!1,!1);ue.id=k,ue.parentFlushed=!0;try{w.replay=null,w.blockedSegment=ue,gs(b,w,P,F),ue.status=1,zi(b,q,ue),q===null?b.completedRootSegment=ue:(Za(q,ue),q.parentFlushed&&b.partialBoundaries.push(q))}finally{w.replay=K,w.blockedSegment=null}}function ms(b,w,k,P){w.replay!==null&&typeof w.replay.slots=="number"?ma(b,w,w.replay.slots,k,P):(w.node=k,w.childIndex=P,k=w.componentStack,Ka(w),ac(b,w),w.componentStack=k)}function ac(b,w){var k=w.node,P=w.childIndex;if(k!==null){if(typeof k=="object"){switch(k.$$typeof){case s:var F=k.type,K=k.key,q=k.props;k=q.ref;var ue=k!==void 0?k:null,ie=tc(F),he=K??(P===-1?0:P);if(K=[w.keyPath,ie,he],w.replay!==null)e:{var we=w.replay;for(P=we.nodes,k=0;k<P.length;k++){var De=P[k];if(he===De[1]){if(De.length===4){if(ie!==null&&ie!==De[0])throw Error(t(490,De[0],ie));var tt=De[2];ie=De[3],he=w.node,w.replay={nodes:tt,slots:ie,pendingTasks:1};try{if(Zr(b,w,K,F,q,ue),w.replay.pendingTasks===1&&0<w.replay.nodes.length)throw Error(t(488));w.replay.pendingTasks--}catch(_t){if(typeof _t=="object"&&_t!==null&&(_t===it||typeof _t.then=="function"))throw w.node===he?w.replay=we:P.splice(k,1),_t;w.replay.pendingTasks--,q=Mn(w.componentStack),K=b,b=w.blockedBoundary,F=_t,q=_s(K,F,q),Eo(K,b,tt,ie,F,q)}w.replay=we}else{if(F!==g)throw Error(t(490,"Suspense",tc(F)||"Unknown"));t:{we=void 0,F=De[5],ue=De[2],ie=De[3],he=De[4]===null?[]:De[4][2],De=De[4]===null?null:De[4][3];var st=w.keyPath,Ct=w.formatContext,Gt=w.row,Ht=w.replay,dt=w.blockedBoundary,At=w.hoistableState,ln=q.children,ai=q.fallback,ri=new Set;q=2>w.formatContext.insertionMode?Ji(b,w.row,ri,mt(),mt()):Ji(b,w.row,ri,null,null),q.parentFlushed=!0,q.rootSegmentID=F,w.blockedBoundary=q,w.hoistableState=q.contentState,w.keyPath=K,w.formatContext=ut(b.resumableState,Ct),w.row=null,w.replay={nodes:ue,slots:ie,pendingTasks:1};try{if(gs(b,w,ln,-1),w.replay.pendingTasks===1&&0<w.replay.nodes.length)throw Error(t(488));if(w.replay.pendingTasks--,q.pendingTasks===0&&q.status===0){q.status=1,b.completedBoundaries.push(q);break t}}catch(_t){q.status=4,tt=Mn(w.componentStack),we=_s(b,_t,tt),q.errorDigest=we,w.replay.pendingTasks--,b.clientRenderedBoundaries.push(q)}finally{w.blockedBoundary=dt,w.hoistableState=At,w.replay=Ht,w.keyPath=st,w.formatContext=Ct,w.row=Gt}tt=sc(b,null,{nodes:he,slots:De,pendingTasks:0},ai,-1,dt,q.fallbackState,ri,[K[0],"Suspense Fallback",K[2]],at(b.resumableState,w.formatContext),w.context,w.treeContext,w.row,ha(w.componentStack)),Ka(tt),b.pingedTasks.push(tt)}}P.splice(k,1);break e}}}else Zr(b,w,K,F,q,ue);return;case i:throw Error(t(257));case N:if(tt=k._init,k=tt(k._payload),b.status===12)throw null;ms(b,w,k,P);return}if(W(k)){ul(b,w,k,P);return}if((tt=z(k))&&(tt=tt.call(k))){if(k=tt.next(),!k.done){q=[];do q.push(k.value),k=tt.next();while(!k.done);ul(b,w,q,P)}return}if(typeof k.then=="function")return w.thenableState=null,ms(b,w,Jc(k),P);if(k.$$typeof===h)return ms(b,w,k._currentValue,P);throw P=Object.prototype.toString.call(k),Error(t(31,P==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":P))}typeof k=="string"?(P=w.blockedSegment,P!==null&&(P.lastPushedText=Dt(P.chunks,k,b.renderState,P.lastPushedText))):(typeof k=="number"||typeof k=="bigint")&&(P=w.blockedSegment,P!==null&&(P.lastPushedText=Dt(P.chunks,""+k,b.renderState,P.lastPushedText)))}}function ul(b,w,k,P){var F=w.keyPath;if(P!==-1&&(w.keyPath=[w.keyPath,"Fragment",P],w.replay!==null)){for(var K=w.replay,q=K.nodes,ue=0;ue<q.length;ue++){var ie=q[ue];if(ie[1]===P){P=ie[2],ie=ie[3],w.replay={nodes:P,slots:ie,pendingTasks:1};try{if(ul(b,w,k,-1),w.replay.pendingTasks===1&&0<w.replay.nodes.length)throw Error(t(488));w.replay.pendingTasks--}catch(De){if(typeof De=="object"&&De!==null&&(De===it||typeof De.then=="function"))throw De;w.replay.pendingTasks--,k=Mn(w.componentStack);var he=w.blockedBoundary,we=De;k=_s(b,we,k),Eo(b,he,P,ie,we,k)}w.replay=K,q.splice(ue,1);break}}w.keyPath=F;return}if(K=w.treeContext,q=k.length,w.replay!==null&&(ue=w.replay.slots,ue!==null&&typeof ue=="object")){for(P=0;P<q;P++)ie=k[P],w.treeContext=te(K,q,P),he=ue[P],typeof he=="number"?(ma(b,w,he,ie,P),delete ue[P]):gs(b,w,ie,P);w.treeContext=K,w.keyPath=F;return}for(ue=0;ue<q;ue++)P=k[ue],w.treeContext=te(K,q,ue),gs(b,w,P,ue);w.treeContext=K,w.keyPath=F}function mu(b,w,k){if(k.status=5,k.rootSegmentID=b.nextSegmentId++,b=k.trackedContentKeyPath,b===null)throw Error(t(486));var P=k.trackedFallbackNode,F=[],K=w.workingMap.get(b);return K===void 0?(k=[b[1],b[2],F,null,P,k.rootSegmentID],w.workingMap.set(b,k),cc(k,b[0],w),k):(K[4]=P,K[5]=k.rootSegmentID,K)}function $c(b,w,k,P){P.status=5;var F=k.keyPath,K=k.blockedBoundary;if(K===null)P.id=b.nextSegmentId++,w.rootSlots=P.id,b.completedRootSegment!==null&&(b.completedRootSegment.status=5);else{if(K!==null&&K.status===0){var q=mu(b,w,K);if(K.trackedContentKeyPath===F&&k.childIndex===-1){P.id===-1&&(P.id=P.parentFlushed?K.rootSegmentID:b.nextSegmentId++),q[3]=P.id;return}}if(P.id===-1&&(P.id=P.parentFlushed&&K!==null?K.rootSegmentID:b.nextSegmentId++),k.childIndex===-1)F===null?w.rootSlots=P.id:(k=w.workingMap.get(F),k===void 0?(k=[F[1],F[2],[],P.id],cc(k,F[0],w)):k[3]=P.id);else{if(F===null){if(b=w.rootSlots,b===null)b=w.rootSlots={};else if(typeof b=="number")throw Error(t(491))}else if(K=w.workingMap,q=K.get(F),q===void 0)b={},q=[F[1],F[2],[],b],K.set(F,q),cc(q,F[0],w);else if(b=q[3],b===null)b=q[3]={};else if(typeof b=="number")throw Error(t(491));b[k.childIndex]=P.id}}}function Qr(b,w){b=b.trackedPostpones,b!==null&&(w=w.trackedContentKeyPath,w!==null&&(w=b.workingMap.get(w),w!==void 0&&(w.length=4,w[2]=[],w[3]=null)))}function rc(b,w,k){return sc(b,k,w.replay,w.node,w.childIndex,w.blockedBoundary,w.hoistableState,w.abortSet,w.keyPath,w.formatContext,w.context,w.treeContext,w.row,w.componentStack)}function oc(b,w,k){var P=w.blockedSegment,F=ii(b,P.chunks.length,null,w.formatContext,P.lastPushedText,!0);return P.children.push(F),P.lastPushedText=!1,ur(b,k,w.node,w.childIndex,w.blockedBoundary,F,w.blockedPreamble,w.hoistableState,w.abortSet,w.keyPath,w.formatContext,w.context,w.treeContext,w.row,w.componentStack)}function gs(b,w,k,P){var F=w.formatContext,K=w.context,q=w.keyPath,ue=w.treeContext,ie=w.componentStack,he=w.blockedSegment;if(he===null){he=w.replay;try{return ms(b,w,k,P)}catch(tt){if(Mi(),k=tt===it?Ut():tt,b.status!==12&&typeof k=="object"&&k!==null){if(typeof k.then=="function"){P=tt===it?vs():null,b=rc(b,w,P).ping,k.then(b,b),w.formatContext=F,w.context=K,w.keyPath=q,w.treeContext=ue,w.componentStack=ie,w.replay=he,O(K);return}if(k.message==="Maximum call stack size exceeded"){k=tt===it?vs():null,k=rc(b,w,k),b.pingedTasks.push(k),w.formatContext=F,w.context=K,w.keyPath=q,w.treeContext=ue,w.componentStack=ie,w.replay=he,O(K);return}}}}else{var we=he.children.length,De=he.chunks.length;try{return ms(b,w,k,P)}catch(tt){if(Mi(),he.children.length=we,he.chunks.length=De,k=tt===it?Ut():tt,b.status!==12&&typeof k=="object"&&k!==null){if(typeof k.then=="function"){he=k,k=tt===it?vs():null,b=oc(b,w,k).ping,he.then(b,b),w.formatContext=F,w.context=K,w.keyPath=q,w.treeContext=ue,w.componentStack=ie,O(K);return}if(k.message==="Maximum call stack size exceeded"){he=tt===it?vs():null,he=oc(b,w,he),b.pingedTasks.push(he),w.formatContext=F,w.context=K,w.keyPath=q,w.treeContext=ue,w.componentStack=ie,O(K);return}}}}throw w.formatContext=F,w.context=K,w.keyPath=q,w.treeContext=ue,O(K),k}function Jr(b){var w=b.blockedBoundary,k=b.blockedSegment;k!==null&&(k.status=3,qi(this,w,b.row,k))}function Eo(b,w,k,P,F,K){for(var q=0;q<k.length;q++){var ue=k[q];if(ue.length===4)Eo(b,w,ue[2],ue[3],F,K);else{ue=ue[5];var ie=b,he=K,we=Ji(ie,null,new Set,null,null);we.parentFlushed=!0,we.rootSegmentID=ue,we.status=4,we.errorDigest=he,we.parentFlushed&&ie.clientRenderedBoundaries.push(we)}}if(k.length=0,P!==null){if(w===null)throw Error(t(487));if(w.status!==4&&(w.status=4,w.errorDigest=K,w.parentFlushed&&b.clientRenderedBoundaries.push(w)),typeof P=="object")for(var De in P)delete P[De]}}function qr(b,w,k){var P=b.blockedBoundary,F=b.blockedSegment;if(F!==null){if(F.status===6)return;F.status=3}var K=Mn(b.componentStack);if(P===null){if(w.status!==13&&w.status!==14){if(P=b.replay,P===null){w.trackedPostpones!==null&&F!==null?(P=w.trackedPostpones,_s(w,k,K),$c(w,P,b,F),qi(w,null,b.row,F)):(_s(w,k,K),dl(w,k));return}P.pendingTasks--,P.pendingTasks===0&&0<P.nodes.length&&(F=_s(w,k,K),Eo(w,null,P.nodes,P.slots,k,F)),w.pendingRootTasks--,w.pendingRootTasks===0&&ed(w)}}else{var q=w.trackedPostpones;if(P.status!==4){if(q!==null&&F!==null)return _s(w,k,K),$c(w,q,b,F),P.fallbackAbortableTasks.forEach(function(ue){return qr(ue,w,k)}),P.fallbackAbortableTasks.clear(),qi(w,P,b.row,F);P.status=4,F=_s(w,k,K),P.status=4,P.errorDigest=F,Qr(w,P),P.parentFlushed&&w.clientRenderedBoundaries.push(P)}P.pendingTasks--,F=P.row,F!==null&&--F.pendingTasks===0&&yi(w,F),P.fallbackAbortableTasks.forEach(function(ue){return qr(ue,w,k)}),P.fallbackAbortableTasks.clear()}b=b.row,b!==null&&--b.pendingTasks===0&&yi(w,b),w.allPendingTasks--,w.allPendingTasks===0&&lc(w)}function _o(b,w){try{var k=b.renderState,P=k.onHeaders;if(P){var F=k.headers;if(F){k.headers=null;var K=F.preconnects;if(F.fontPreloads&&(K&&(K+=", "),K+=F.fontPreloads),F.highImagePreloads&&(K&&(K+=", "),K+=F.highImagePreloads),!w){var q=k.styles.values(),ue=q.next();e:for(;0<F.remainingCapacity&&!ue.done;ue=q.next())for(var ie=ue.value.sheets.values(),he=ie.next();0<F.remainingCapacity&&!he.done;he=ie.next()){var we=he.value,De=we.props,tt=De.href,st=we.props,Ct=ni(st.href,"style",{crossOrigin:st.crossOrigin,integrity:st.integrity,nonce:st.nonce,type:st.type,fetchPriority:st.fetchPriority,referrerPolicy:st.referrerPolicy,media:st.media});if(0<=(F.remainingCapacity-=Ct.length+2))k.resets.style[tt]=Pt,K&&(K+=", "),K+=Ct,k.resets.style[tt]=typeof De.crossOrigin=="string"||typeof De.integrity=="string"?[De.crossOrigin,De.integrity]:Pt;else break e}}P(K?{Link:K}:{})}}}catch(Gt){_s(b,Gt,{})}}function ed(b){b.trackedPostpones===null&&_o(b,!0),b.trackedPostpones===null&&Aa(b),b.onShellError=Pe,b=b.onShellReady,b()}function lc(b){_o(b,b.trackedPostpones===null?!0:b.completedRootSegment===null||b.completedRootSegment.status!==5),Aa(b),b=b.onAllReady,b()}function Za(b,w){if(w.chunks.length===0&&w.children.length===1&&w.children[0].boundary===null&&w.children[0].id===-1){var k=w.children[0];k.id=w.id,k.parentFlushed=!0,k.status!==1&&k.status!==3&&k.status!==4||Za(b,k)}else b.completedSegments.push(w)}function zi(b,w,k){if(re!==null){k=k.chunks;for(var P=0,F=0;F<k.length;F++)P+=k[F].byteLength;w===null?b.byteSize+=P:w.byteSize+=P}}function qi(b,w,k,P){if(k!==null&&(--k.pendingTasks===0?yi(b,k):k.together&&qc(b,k)),b.allPendingTasks--,w===null){if(P!==null&&P.parentFlushed){if(b.completedRootSegment!==null)throw Error(t(389));b.completedRootSegment=P}b.pendingRootTasks--,b.pendingRootTasks===0&&ed(b)}else if(w.pendingTasks--,w.status!==4)if(w.pendingTasks===0){if(w.status===0&&(w.status=1),P!==null&&P.parentFlushed&&(P.status===1||P.status===3)&&Za(w,P),w.parentFlushed&&b.completedBoundaries.push(w),w.status===1)k=w.row,k!==null&&cl(k.hoistables,w.contentState),ua(b,w)||(w.fallbackAbortableTasks.forEach(Jr,b),w.fallbackAbortableTasks.clear(),k!==null&&--k.pendingTasks===0&&yi(b,k)),b.pendingRootTasks===0&&b.trackedPostpones===null&&w.contentPreamble!==null&&Aa(b);else if(w.status===5&&(w=w.row,w!==null)){if(b.trackedPostpones!==null){k=b.trackedPostpones;var F=w.next;if(F!==null&&(P=F.boundaries,P!==null))for(F.boundaries=null,F=0;F<P.length;F++){var K=P[F];mu(b,k,K),qi(b,K,null,null)}}--w.pendingTasks===0&&yi(b,w)}}else P===null||!P.parentFlushed||P.status!==1&&P.status!==3||(Za(w,P),w.completedSegments.length===1&&w.parentFlushed&&b.partialBoundaries.push(w)),w=w.row,w!==null&&w.together&&qc(b,w);b.allPendingTasks===0&&lc(b)}function gu(b){if(b.status!==14&&b.status!==13){var w=gi,k=nt.H;nt.H=uu;var P=nt.A;nt.A=Yn;var F=In;In=b;var K=ws;ws=b.resumableState;try{var q=b.pingedTasks,ue;for(ue=0;ue<q.length;ue++){var ie=q[ue],he=b,we=ie.blockedSegment;if(we===null){var De=he;if(ie.replay.pendingTasks!==0){O(ie.context);try{if(typeof ie.replay.slots=="number"?ma(De,ie,ie.replay.slots,ie.node,ie.childIndex):ac(De,ie),ie.replay.pendingTasks===1&&0<ie.replay.nodes.length)throw Error(t(488));ie.replay.pendingTasks--,ie.abortSet.delete(ie),qi(De,ie.blockedBoundary,ie.row,null)}catch(Xs){Mi();var tt=Xs===it?Ut():Xs;if(typeof tt=="object"&&tt!==null&&typeof tt.then=="function"){var st=ie.ping;tt.then(st,st),ie.thenableState=Xs===it?vs():null}else{ie.replay.pendingTasks--,ie.abortSet.delete(ie);var Ct=Mn(ie.componentStack);he=void 0;var Gt=De,Ht=ie.blockedBoundary,dt=De.status===12?De.fatalError:tt,At=ie.replay.nodes,ln=ie.replay.slots;he=_s(Gt,dt,Ct),Eo(Gt,Ht,At,ln,dt,he),De.pendingRootTasks--,De.pendingRootTasks===0&&ed(De),De.allPendingTasks--,De.allPendingTasks===0&&lc(De)}}}}else if(De=void 0,Gt=we,Gt.status===0){Gt.status=6,O(ie.context);var ai=Gt.children.length,ri=Gt.chunks.length;try{ac(he,ie),Gt.lastPushedText&&Gt.textEmbedded&&Gt.chunks.push(gt),ie.abortSet.delete(ie),Gt.status=1,zi(he,ie.blockedBoundary,Gt),qi(he,ie.blockedBoundary,ie.row,Gt)}catch(Xs){Mi(),Gt.children.length=ai,Gt.chunks.length=ri;var _t=Xs===it?Ut():he.status===12?he.fatalError:Xs;if(he.status===12&&he.trackedPostpones!==null){var zs=he.trackedPostpones,Xn=Mn(ie.componentStack);ie.abortSet.delete(ie),_s(he,_t,Xn),$c(he,zs,ie,Gt),qi(he,ie.blockedBoundary,ie.row,Gt)}else if(typeof _t=="object"&&_t!==null&&typeof _t.then=="function"){Gt.status=0,ie.thenableState=Xs===it?vs():null;var Ts=ie.ping;_t.then(Ts,Ts)}else{var $r=Mn(ie.componentStack);ie.abortSet.delete(ie),Gt.status=4;var Vt=ie.blockedBoundary,mr=ie.row;if(mr!==null&&--mr.pendingTasks===0&&yi(he,mr),he.allPendingTasks--,De=_s(he,_t,$r),Vt===null)dl(he,_t);else if(Vt.pendingTasks--,Vt.status!==4){Vt.status=4,Vt.errorDigest=De,Qr(he,Vt);var Ta=Vt.row;Ta!==null&&--Ta.pendingTasks===0&&yi(he,Ta),Vt.parentFlushed&&he.clientRenderedBoundaries.push(Vt),he.pendingRootTasks===0&&he.trackedPostpones===null&&Vt.contentPreamble!==null&&Aa(he)}he.allPendingTasks===0&&lc(he)}}}}q.splice(0,ue),b.destination!==null&&ml(b,b.destination)}catch(Xs){_s(b,Xs,{}),dl(b,Xs)}finally{ws=K,nt.H=k,nt.A=P,k===uu&&O(w),In=F}}}function ga(b,w,k){w.preambleChildren.length&&k.push(w.preambleChildren);for(var P=!1,F=0;F<w.children.length;F++)P=hl(b,w.children[F],k)||P;return P}function hl(b,w,k){var P=w.boundary;if(P===null)return ga(b,w,k);var F=P.contentPreamble,K=P.fallbackPreamble;if(F===null||K===null)return!1;switch(P.status){case 1:if(Bc(b.renderState,F),b.byteSize+=P.byteSize,w=P.completedSegments[0],!w)throw Error(t(391));return ga(b,w,k);case 5:if(b.trackedPostpones!==null)return!0;case 4:if(w.status===1)return Bc(b.renderState,K),ga(b,w,k);default:return!0}}function Aa(b){if(b.completedRootSegment&&b.completedPreambleSegments===null){var w=[],k=b.byteSize,P=hl(b,b.completedRootSegment,w),F=b.renderState.preamble;P===!1||F.headChunks&&F.bodyChunks?b.completedPreambleSegments=w:b.byteSize=k}}function Qa(b,w,k,P){switch(k.parentFlushed=!0,k.status){case 0:k.id=b.nextSegmentId++;case 5:return P=k.id,k.lastPushedText=!1,k.textEmbedded=!1,b=b.renderState,G(w,hh),G(w,b.placeholderPrefix),b=ne(P.toString(16)),G(w,b),X(w,Vl);case 1:k.status=2;var F=!0,K=k.chunks,q=0;k=k.children;for(var ue=0;ue<k.length;ue++){for(F=k[ue];q<F.index;q++)G(w,K[q]);F=fl(b,w,F,P)}for(;q<K.length-1;q++)G(w,K[q]);return q<K.length&&(F=X(w,K[q])),F;case 3:return!0;default:throw Error(t(390))}}var Ea=0;function fl(b,w,k,P){var F=k.boundary;if(F===null)return Qa(b,w,k,P);if(F.parentFlushed=!0,F.status===4){var K=F.row;K!==null&&--K.pendingTasks===0&&yi(b,K),F=F.errorDigest,X(w,Di),G(w,Ir),F&&(G(w,Gl),G(w,ne(Se(F))),G(w,Wl)),X(w,Yl),Qa(b,w,k,P)}else if(F.status!==1)F.status===0&&(F.rootSegmentID=b.nextSegmentId++),0<F.completedSegments.length&&b.partialBoundaries.push(F),qo(w,b.renderState,F.rootSegmentID),P&&cl(P,F.fallbackState),Qa(b,w,k,P);else if(!Ja&&ua(b,F)&&(Ea+F.byteSize>b.progressiveChunkSize||cr(F.contentState)))F.rootSegmentID=b.nextSegmentId++,b.completedBoundaries.push(F),qo(w,b.renderState,F.rootSegmentID),Qa(b,w,k,P);else{if(Ea+=F.byteSize,P&&cl(P,F.contentState),k=F.row,k!==null&&ua(b,F)&&--k.pendingTasks===0&&yi(b,k),X(w,zf),k=F.completedSegments,k.length!==1)throw Error(t(391));fl(b,w,k[0],P)}return X(w,mi)}function Ii(b,w,k,P){return Zl(w,b.renderState,k.parentFormatContext,k.id),fl(b,w,k,P),Wc(w,k.parentFormatContext)}function pu(b,w,k){Ea=k.byteSize;for(var P=k.completedSegments,F=0;F<P.length;F++)hr(b,w,k,P[F]);P.length=0,P=k.row,P!==null&&ua(b,k)&&--P.pendingTasks===0&&yi(b,P),lr(w,k.contentState,b.renderState),P=b.resumableState,b=b.renderState,F=k.rootSegmentID,k=k.contentState;var K=b.stylesToHoist;return b.stylesToHoist=!1,G(w,b.startInlineScript),G(w,kn),K?((P.instructions&4)===0&&(P.instructions|=4,G(w,Ql)),(P.instructions&2)===0&&(P.instructions|=2,G(w,Gc)),(P.instructions&8)===0?(P.instructions|=8,G(w,Mg)):G(w,Hf)):((P.instructions&2)===0&&(P.instructions|=2,G(w,Gc)),G(w,Bf)),P=ne(F.toString(16)),G(w,b.boundaryPrefix),G(w,P),G(w,Yd),G(w,b.segmentPrefix),G(w,P),K?(G(w,Pg),Fs(w,k)):G(w,Xd),k=X(w,Uf),bo(w,b)&&k}function hr(b,w,k,P){if(P.status===2)return!0;var F=k.contentState,K=P.id;if(K===-1){if((P.id=k.rootSegmentID)===-1)throw Error(t(392));return Ii(b,w,P,F)}return K===k.rootSegmentID?Ii(b,w,P,F):(Ii(b,w,P,F),k=b.resumableState,b=b.renderState,G(w,b.startInlineScript),G(w,kn),(k.instructions&1)===0?(k.instructions|=1,G(w,If)):G(w,kg),G(w,b.segmentPrefix),K=ne(K.toString(16)),G(w,K),G(w,Dg),G(w,b.placeholderPrefix),G(w,K),w=X(w,Rg),w)}var Ja=!1;function ml(b,w){fe=new Uint8Array(2048),ke=0;try{if(!(0<b.pendingRootTasks)){var k,P=b.completedRootSegment;if(P!==null){if(P.status===5)return;var F=b.completedPreambleSegments;if(F===null)return;Ea=b.byteSize;var K=b.resumableState,q=b.renderState,ue=q.preamble,ie=ue.htmlChunks,he=ue.headChunks,we;if(ie){for(we=0;we<ie.length;we++)G(w,ie[we]);if(he)for(we=0;we<he.length;we++)G(w,he[we]);else G(w,os("head")),G(w,kn)}else if(he)for(we=0;we<he.length;we++)G(w,he[we]);var De=q.charsetChunks;for(we=0;we<De.length;we++)G(w,De[we]);De.length=0,q.preconnects.forEach(Vn,w),q.preconnects.clear();var tt=q.viewportChunks;for(we=0;we<tt.length;we++)G(w,tt[we]);tt.length=0,q.fontPreloads.forEach(Vn,w),q.fontPreloads.clear(),q.highImagePreloads.forEach(Vn,w),q.highImagePreloads.clear(),qe=q,q.styles.forEach(eu,w),qe=null;var st=q.importMapChunks;for(we=0;we<st.length;we++)G(w,st[we]);st.length=0,q.bootstrapScripts.forEach(Vn,w),q.scripts.forEach(Vn,w),q.scripts.clear(),q.bulkPreloads.forEach(Vn,w),q.bulkPreloads.clear(),ie||he||(K.instructions|=32);var Ct=q.hoistableChunks;for(we=0;we<Ct.length;we++)G(w,Ct[we]);for(K=Ct.length=0;K<F.length;K++){var Gt=F[K];for(q=0;q<Gt.length;q++)fl(b,w,Gt[q],null)}var Ht=b.renderState.preamble,dt=Ht.headChunks;(Ht.htmlChunks||dt)&&G(w,Fr("head"));var At=Ht.bodyChunks;if(At)for(F=0;F<At.length;F++)G(w,At[F]);fl(b,w,P,null),b.completedRootSegment=null;var ln=b.renderState;if(b.allPendingTasks!==0||b.clientRenderedBoundaries.length!==0||b.completedBoundaries.length!==0||b.trackedPostpones!==null&&(b.trackedPostpones.rootNodes.length!==0||b.trackedPostpones.rootSlots!==null)){var ai=b.resumableState;if((ai.instructions&64)===0){if(ai.instructions|=64,G(w,ln.startInlineScript),(ai.instructions&32)===0){ai.instructions|=32;var ri="_"+ai.idPrefix+"R_";G(w,Xc),G(w,ne(Se(ri))),G(w,jn)}G(w,kn),G(w,zr),X(w,Xe)}}bo(w,ln)}var _t=b.renderState;P=0;var zs=_t.viewportChunks;for(P=0;P<zs.length;P++)G(w,zs[P]);zs.length=0,_t.preconnects.forEach(Vn,w),_t.preconnects.clear(),_t.fontPreloads.forEach(Vn,w),_t.fontPreloads.clear(),_t.highImagePreloads.forEach(Vn,w),_t.highImagePreloads.clear(),_t.styles.forEach(tu,w),_t.scripts.forEach(Vn,w),_t.scripts.clear(),_t.bulkPreloads.forEach(Vn,w),_t.bulkPreloads.clear();var Xn=_t.hoistableChunks;for(P=0;P<Xn.length;P++)G(w,Xn[P]);Xn.length=0;var Ts=b.clientRenderedBoundaries;for(k=0;k<Ts.length;k++){var $r=Ts[k];_t=w;var Vt=b.resumableState,mr=b.renderState,Ta=$r.rootSegmentID,Xs=$r.errorDigest;G(_t,mr.startInlineScript),G(_t,kn),(Vt.instructions&4)===0?(Vt.instructions|=4,G(_t,mh)):G(_t,Kd),G(_t,mr.boundaryPrefix),G(_t,ne(Ta.toString(16))),G(_t,Zd),Xs&&(G(_t,Jl),G(_t,ne(Vf(Xs||""))));var pa=X(_t,Og);if(!pa){b.destination=null,k++,Ts.splice(0,k);return}}Ts.splice(0,k);var td=b.completedBoundaries;for(k=0;k<td.length;k++)if(!pu(b,w,td[k])){b.destination=null,k++,td.splice(0,k);return}td.splice(0,k),se(w),fe=new Uint8Array(2048),ke=0,Ja=!0;var pl=b.partialBoundaries;for(k=0;k<pl.length;k++){var eo=pl[k];e:{Ts=b,$r=w,Ea=eo.byteSize;var xl=eo.completedSegments;for(pa=0;pa<xl.length;pa++)if(!hr(Ts,$r,eo,xl[pa])){pa++,xl.splice(0,pa);var oi=!1;break e}xl.splice(0,pa);var Pn=eo.row;Pn!==null&&Pn.together&&eo.pendingTasks===1&&(Pn.pendingTasks===1?yh(Ts,Pn,Pn.hoistables):Pn.pendingTasks--),oi=lr($r,eo.contentState,Ts.renderState)}if(!oi){b.destination=null,k++,pl.splice(0,k);return}}pl.splice(0,k),Ja=!1;var to=b.completedBoundaries;for(k=0;k<to.length;k++)if(!pu(b,w,to[k])){b.destination=null,k++,to.splice(0,k);return}to.splice(0,k)}}finally{Ja=!1,b.allPendingTasks===0&&b.clientRenderedBoundaries.length===0&&b.completedBoundaries.length===0?(b.flushScheduled=!1,k=b.resumableState,k.hasBody&&G(w,Fr("body")),k.hasHtml&&G(w,Fr("html")),se(w),b.status=14,w.close(),b.destination=null):se(w)}}function $i(b){b.flushScheduled=b.destination!==null,xe(function(){return gu(b)}),Z(function(){b.status===10&&(b.status=11),b.trackedPostpones===null&&_o(b,b.pendingRootTasks===0)})}function vi(b){b.flushScheduled===!1&&b.pingedTasks.length===0&&b.destination!==null&&(b.flushScheduled=!0,Z(function(){var w=b.destination;w?ml(b,w):b.flushScheduled=!1}))}function _a(b,w){if(b.status===13)b.status=14,ge(w,b.fatalError);else if(b.status!==14&&b.destination===null){b.destination=w;try{ml(b,w)}catch(k){_s(b,k,{}),dl(b,k)}}}function ea(b,w){(b.status===11||b.status===10)&&(b.status=12);try{var k=b.abortableTasks;if(0<k.size){var P=w===void 0?Error(t(432)):typeof w=="object"&&w!==null&&typeof w.then=="function"?Error(t(530)):w;b.fatalError=P,k.forEach(function(F){return qr(F,b,P)}),k.clear()}b.destination!==null&&ml(b,b.destination)}catch(F){_s(b,F,{}),dl(b,F)}}function cc(b,w,k){if(w===null)k.rootNodes.push(b);else{var P=k.workingMap,F=P.get(w);F===void 0&&(F=[w[1],w[2],[],null],P.set(w,F),cc(F,w[0],k)),F[2].push(b)}}function gl(b){var w=b.trackedPostpones;if(w===null||w.rootNodes.length===0&&w.rootSlots===null)return b.trackedPostpones=null;if(b.completedRootSegment===null||b.completedRootSegment.status!==5&&b.completedPreambleSegments!==null){var k=b.nextSegmentId,P=w.rootSlots,F=b.resumableState;F.bootstrapScriptContent=void 0,F.bootstrapScripts=void 0,F.bootstrapModules=void 0}else{k=0,P=-1,F=b.resumableState;var K=b.renderState;F.nextFormID=0,F.hasBody=!1,F.hasHtml=!1,F.unknownResources={font:K.resets.font},F.dnsResources=K.resets.dns,F.connectResources=K.resets.connect,F.imageResources=K.resets.image,F.styleResources=K.resets.style,F.scriptResources={},F.moduleUnknownResources={},F.moduleScriptResources={},F.instructions=0}return{nextSegmentId:k,rootFormatContext:b.rootFormatContext,progressiveChunkSize:b.progressiveChunkSize,resumableState:b.resumableState,replayNodes:w.rootNodes,replaySlots:P}}function fr(){var b=n.version;if(b!=="19.2.3")throw Error(t(527,b,"19.2.3"))}return fr(),fr(),Kh.prerender=function(b,w){return new Promise(function(k,P){var F=w?w.onHeaders:void 0,K;F&&(K=function(we){F(new Headers(we))});var q=Nt(w?w.identifierPrefix:void 0,w?w.unstable_externalRuntimeSrc:void 0,w?w.bootstrapScriptContent:void 0,w?w.bootstrapScripts:void 0,w?w.bootstrapModules:void 0),ue=Xr(b,q,rt(q,void 0,w?w.unstable_externalRuntimeSrc:void 0,w?w.importMap:void 0,K,w?w.maxHeadersLength:void 0),et(w?w.namespaceURI:void 0),w?w.progressiveChunkSize:void 0,w?w.onError:void 0,function(){var we=new ReadableStream({type:"bytes",pull:function(De){_a(ue,De)},cancel:function(De){ue.destination=null,ea(ue,De)}},{highWaterMark:0});we={postponed:gl(ue),prelude:we},k(we)},void 0,void 0,P,w?w.onPostpone:void 0);if(w&&w.signal){var ie=w.signal;if(ie.aborted)ea(ue,ie.reason);else{var he=function(){ea(ue,ie.reason),ie.removeEventListener("abort",he)};ie.addEventListener("abort",he)}}$i(ue)})},Kh.renderToReadableStream=function(b,w){return new Promise(function(k,P){var F,K,q=new Promise(function(st,Ct){K=st,F=Ct}),ue=w?w.onHeaders:void 0,ie;ue&&(ie=function(st){ue(new Headers(st))});var he=Nt(w?w.identifierPrefix:void 0,w?w.unstable_externalRuntimeSrc:void 0,w?w.bootstrapScriptContent:void 0,w?w.bootstrapScripts:void 0,w?w.bootstrapModules:void 0),we=Ao(b,he,rt(he,w?w.nonce:void 0,w?w.unstable_externalRuntimeSrc:void 0,w?w.importMap:void 0,ie,w?w.maxHeadersLength:void 0),et(w?w.namespaceURI:void 0),w?w.progressiveChunkSize:void 0,w?w.onError:void 0,K,function(){var st=new ReadableStream({type:"bytes",pull:function(Ct){_a(we,Ct)},cancel:function(Ct){we.destination=null,ea(we,Ct)}},{highWaterMark:0});st.allReady=q,k(st)},function(st){q.catch(function(){}),P(st)},F,w?w.onPostpone:void 0,w?w.formState:void 0);if(w&&w.signal){var De=w.signal;if(De.aborted)ea(we,De.reason);else{var tt=function(){ea(we,De.reason),De.removeEventListener("abort",tt)};De.addEventListener("abort",tt)}}$i(we)})},Kh.resume=function(b,w,k){return new Promise(function(P,F){var K,q,ue=new Promise(function(De,tt){q=De,K=tt}),ie=Xa(b,w,rt(w.resumableState,k?k.nonce:void 0,void 0,void 0,void 0,void 0),k?k.onError:void 0,q,function(){var De=new ReadableStream({type:"bytes",pull:function(tt){_a(ie,tt)},cancel:function(tt){ie.destination=null,ea(ie,tt)}},{highWaterMark:0});De.allReady=ue,P(De)},function(De){ue.catch(function(){}),F(De)},K,k?k.onPostpone:void 0);if(k&&k.signal){var he=k.signal;if(he.aborted)ea(ie,he.reason);else{var we=function(){ea(ie,he.reason),he.removeEventListener("abort",we)};he.addEventListener("abort",we)}}$i(ie)})},Kh.resumeAndPrerender=function(b,w,k){return new Promise(function(P,F){var K=Kr(b,w,rt(w.resumableState,void 0,void 0,void 0,void 0,void 0),k?k.onError:void 0,function(){var ie=new ReadableStream({type:"bytes",pull:function(he){_a(K,he)},cancel:function(he){K.destination=null,ea(K,he)}},{highWaterMark:0});ie={postponed:gl(K),prelude:ie},P(ie)},void 0,void 0,F,k?k.onPostpone:void 0);if(k&&k.signal){var q=k.signal;if(q.aborted)ea(K,q.reason);else{var ue=function(){ea(K,q.reason),q.removeEventListener("abort",ue)};q.addEventListener("abort",ue)}}$i(K)})},Kh.version="19.2.3",Kh}var TT;function zQ(){if(TT)return Xh;TT=1;var n,e;return n=LQ(),e=FQ(),Xh.version=n.version,Xh.renderToString=n.renderToString,Xh.renderToStaticMarkup=n.renderToStaticMarkup,Xh.renderToReadableStream=e.renderToReadableStream,Xh.resume=e.resume,Xh}var _l=zQ();const Fw=(n,e,t="Document",s=[],i=null)=>{const r=_l.renderToStaticMarkup(a.jsx(By,{data:n,content:e,zoom:1,printing:!0,signatures:s,businessLogo:i}));return`
    <!DOCTYPE html>
    <html>
        <head>
            <meta charset="utf-8">
            <title>${t}</title>
            <style>
                * { box-sizing: border-box; }
                body { 
                    font-family: 'Times New Roman', serif; 
                    line-height: 1.5; 
                    color: #333; 
                    font-size: 12pt; 
                    margin: 0; 
                    padding: 40px; 
                }
                .text-center { text-align: center; }
                .uppercase { text-transform: uppercase; }
                .font-bold { font-weight: bold; }
                .text-sm { font-size: 10pt; }
                .text-xs { font-size: 9pt; }
                .text-justify { text-align: justify; }
                .mb-2 { margin-bottom: 0.5rem; }
                .mb-4 { margin-bottom: 1rem; }
                .mb-6 { margin-bottom: 1.5rem; }
                .mb-8 { margin-bottom: 2rem; }
                .mb-10 { margin-bottom: 2.5rem; }
                .pb-2 { padding-bottom: 0.5rem; }
                .mt-12 { margin-top: 3rem; }
                .border-b { border-bottom: 1px solid #000; }
                .border-b-2 { border-bottom: 2px solid #000; }
                
                @page { margin: 40px; }
                
                h1 { 
                    font-size: 16pt; 
                    text-transform: uppercase; 
                    border-bottom: 2px solid #000; 
                    padding-bottom: 10px; 
                    margin-bottom: 30px; 
                    text-align: center; 
                    font-weight: bold; 
                    letter-spacing: 2px; 
                }
                p { margin-bottom: 12px; }
                
                table { width: 100%; border-collapse: collapse; }
                td { vertical-align: top; }
            </style>
        </head>
        <body>
            ${r}
        </body>
    </html>
    `},ch=()=>Math.random().toString(36).substr(2,9),kT={fontFamily:"font-sans",fontSize:"text-[11pt]",lineHeight:"leading-relaxed",textColor:"#1e293b",headingColor:"#0f172a",accentColor:"#4f46e5",pageMargin:"p-[10mm]",paragraphSpacing:"mb-6"},Sg=(n={})=>{const[e,t]=_.useState({...kT,...n}),s=_.useCallback((r,o)=>{t(c=>({...c,[r]:o}))},[]),i=_.useCallback(()=>{t(kT)},[]);return{styles:e,updateStyle:s,resetStyles:i}},rP=n=>{const[e,t]=_.useState(OQ),[s,i]=_.useState(PQ),[r,o]=_.useState("Untitled NDA"),[c,u]=_.useState(null),[h,f]=_.useState(!!n),[g,x]=_.useState(!1),[y,N]=_.useState(!1),{styles:j,updateStyle:E,resetStyles:A}=Sg(),R=_.useRef(null);_.useEffect(()=>{(async()=>{if(n)try{f(!0);const ee=await yg(n);ee.data.name&&o(ee.data.name),ee.data.sent_at&&u(ee.data.sent_at);let ne=ee.data?.content||ee.content;if(typeof ne=="string")try{ne=JSON.parse(ne)}catch(V){console.error(V)}ne=ne||{},ne.blocks&&N(!0),ne.formData&&t(V=>({...V,...ne.formData})),ne.docContent&&i(ne.docContent),ne.signatures&&fe(ne.signatures),ne.styles&&Object.entries(ne.styles).forEach(([V,re])=>E(V,re))}catch(ee){console.error("Failed to load document",ee),Te.error("Failed to load document")}finally{f(!1)}else try{const ee=await Rr();ee&&t(ne=>({...ne,disclosingPartyName:ee.name||"",disclosingPartyAddress:[ee.address,ee.city,ee.state,ee.country].filter(Boolean).join(", ")}))}catch(ee){console.error("Failed to load business details",ee)}})()},[n]);const M=se=>{const{name:ee,value:ne}=se.target;t(V=>({...V,[ee]:ne}))},L=se=>{const{name:ee,value:ne}=se.target;i(V=>({...V,[ee]:ne}))},z=()=>{i(se=>({...se,sections:[...se.sections,{id:ch(),title:"New Section",content:"Enter the details of this new clause here..."}]}))},W=se=>{i(ee=>({...ee,sections:ee.sections.filter(ne=>ne.id!==se)}))},I=(se,ee,ne)=>{i(V=>({...V,sections:V.sections.map(re=>re.id===se?{...re,[ee]:ne}:re)}))},Y=se=>{i(ee=>({...ee,sections:se}))},U=async se=>{x(!0);try{const ee={name:r,type_slug:"nda",content:{formData:e,docContent:s,signatures:xe,styles:j},status:"draft"};if(n)return await vg(n,ee),Te.success("Document updated successfully"),n;{const ne=await dx(ee);return Te.success("Document created successfully"),se&&se(`/documents/nda/${ne.data.id}`,{replace:!0}),ne.data.id}}catch(ee){throw console.error("Failed to save",ee),(!ee.response||ee.response.status!==422)&&Te.error("Failed to save document"),ee}finally{setTimeout(()=>x(!1),500)}},Z=se=>{R.current||(R.current={formData:e,docContent:s});let ee=se.content;if(typeof ee=="string")try{ee=JSON.parse(ee)}catch{}return ee.formData&&t(ee.formData),ee.docContent&&i(ee.docContent),ee},$=()=>{R.current&&(t(R.current.formData),i(R.current.docContent),R.current=null)},ae=se=>{if(se&&se.content){let ee=se.content;if(typeof ee=="string")try{ee=JSON.parse(ee)}catch{}ee.formData&&t(ee.formData),ee.docContent&&i(ee.docContent),ee.styles&&Object.entries(ee.styles).forEach(([ne,V])=>E(ne,V))}R.current=null},[xe,fe]=_.useState([]);return{formData:e,docContent:s,signatures:xe,documentName:r,setDocumentName:o,sentAt:c,setSentAt:u,isLoading:h,isSaving:g,handleFormChange:M,handleContentChange:L,addSection:z,removeSection:W,updateSection:I,reorderSections:Y,addSignature:se=>{fe(ee=>[...ee,se])},updateSignature:(se,ee)=>{fe(ne=>ne.map(V=>V.id===se?{...V,...ee}:V))},removeSignature:se=>{fe(ee=>ee.filter(ne=>ne.id!==se))},saveDocument:U,enterPreviewMode:Z,exitPreviewMode:$,restoreVersion:ae,styles:j,updateStyle:E,resetStyles:A,isNewEngine:y}},IQ=()=>`
    /* ===============================
       RESET + PRINT SAFETY
    ================================ */
    * {
        box-sizing: border-box;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
    }

    /* ===============================
       PAGE SETUP (CRITICAL)
    ================================ */
    @page {
        size: A4;
        margin: 15mm 12mm 22mm 12mm; /* bottom space reserved for footer */
    }

    body {
        font-family: Helvetica, Arial, sans-serif;
        font-size: 10pt;
        line-height: 1.5;
        color: #1e293b;
        margin: 0;
        padding: 0;
        min-height: 100%;
    }

    /* ===============================
       UTILITIES
    ================================ */
    .text-center { text-align: center; }
    .text-right { text-align: right; }
    .text-left { text-align: left; }
    .text-justify { text-align: justify; }

    .uppercase { text-transform: uppercase; }
    .italic { font-style: italic; }

    .font-bold { font-weight: bold; }
    .font-semibold { font-weight: 600; }
    .font-medium { font-weight: 500; }

    /* ===============================
       TEXT SIZES
    ================================ */
    .text-2xl { font-size: 24pt; line-height: 1.2; }
    .text-lg  { font-size: 14pt; }
    .text-base { font-size: 11pt; }
    .text-sm { font-size: 9pt; }
    .text-xs { font-size: 8pt; }

    /* ===============================
       COLORS
    ================================ */
    .text-slate-900 { color: #0f172a; }
    .text-slate-800 { color: #1e293b; }
    .text-slate-600 { color: #475569; }
    .text-slate-400 { color: #94a3b8; }

    .bg-slate-50 { background-color: #f8fafc; }
    .bg-slate-100 { background-color: #f1f5f9; }
    .bg-slate-800 { background-color: #1e293b; }

    /* ===============================
       SPACING
    ================================ */
    .p-1 { padding: 4px; }
    .p-2 { padding: 8px; }
    .p-3 { padding: 12px; }
    .p-4 { padding: 16px; }

    .mt-2 { margin-top: 8px; }
    .mt-4 { margin-top: 16px; }
    .mb-1 { margin-bottom: 4px; }
    .mb-2 { margin-bottom: 8px; }
    .mb-4 { margin-bottom: 16px; }
    .mb-6 { margin-bottom: 24px; }
    .mb-8 { margin-bottom: 32px; }
    .mb-10 { margin-bottom: 40px; }
    .mb-12 { margin-bottom: 48px; }
    .mb-20 { margin-bottom: 80px; }

    /* ===============================
       BORDERS
    ================================ */
    .rounded { border-radius: 4px; }
    .border { border: 1px solid #e2e8f0; }
    .border-b { border-bottom: 1px solid #e2e8f0; }
    .border-b-2 { border-bottom: 2px solid #1e293b; }

    /* ===============================
       TABLES (PDF SAFE)
    ================================ */
    table {
        width: 100%;
        border-collapse: collapse;
        page-break-inside: auto;
    }

    thead {
        display: table-header-group;
    }

    tr {
        page-break-inside: avoid;
    }

    th {
        text-align: left;
        font-weight: bold;
    }

    td {
        vertical-align: top;
    }

    /* ===============================
       PAGE BREAK HELPERS
    ================================ */
    .page-break {
        page-break-before: always;
    }

    .avoid-break {
        page-break-inside: avoid;
    }

    /* ===============================
       WATERMARK
    ================================ */
    .watermark {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) rotate(-30deg);
        font-size: 60pt;
        color: rgba(15, 23, 42, 0.08);
        z-index: -1;
        pointer-events: none;
        user-select: none;
        white-space: nowrap;
    }

    /* ===============================
       FOOTER
    ================================ */
    .footer {
        position: fixed;
        bottom: 8mm;
        left: 0;
        right: 0;
        text-align: center;
        font-size: 9pt;
        color: #94a3b8;
        letter-spacing: 2px;
        text-transform: uppercase;
    }
`,PN=(n,e,t=null)=>`
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>${e}</title>
    <style>
        ${IQ()}
    </style>
</head>
<body>
    ${t?`<div class="watermark">${t}</div>`:""}

    ${n}

    <div class="footer">POWERED BY DOCFORGE</div>
</body>
</html>
`,ir=async(n,e,t,s=null)=>{const i=PN(e,t,s);return _Q(n,i)};function ON(n,e,t){const s=n.slice();return s.splice(t<0?s.length+t:t,0,s.splice(e,1)[0]),s}function BQ(n,e){return n.reduce((t,s,i)=>{const r=e.get(s);return r&&(t[i]=r),t},Array(n.length))}function Ob(n){return n!==null&&n>=0}function HQ(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function UQ(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const oP=n=>{let{rects:e,activeIndex:t,overIndex:s,index:i}=n;const r=ON(e,s,t),o=e[i],c=r[i];return!c||!o?null:{x:c.left-o.left,y:c.top-o.top,scaleX:c.width/o.width,scaleY:c.height/o.height}},Lb={scaleX:1,scaleY:1},lP=n=>{var e;let{activeIndex:t,activeNodeRect:s,index:i,rects:r,overIndex:o}=n;const c=(e=r[t])!=null?e:s;if(!c)return null;if(i===t){const h=r[o];return h?{x:0,y:t<o?h.top+h.height-(c.top+c.height):h.top-c.top,...Lb}:null}const u=VQ(r,i,t);return i>t&&i<=o?{x:0,y:-c.height-u,...Lb}:i<t&&i>=o?{x:0,y:c.height+u,...Lb}:{x:0,y:0,...Lb}};function VQ(n,e,t){const s=n[e],i=n[e-1],r=n[e+1];return s?t<e?i?s.top-(i.top+i.height):r?r.top-(s.top+s.height):0:r?r.top-(s.top+s.height):i?s.top-(i.top+i.height):0:0}const cP="Sortable",dP=ht.createContext({activeIndex:-1,containerId:cP,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:oP,disabled:{draggable:!1,droppable:!1}});function uP(n){let{children:e,id:t,items:s,strategy:i=oP,disabled:r=!1}=n;const{active:o,dragOverlay:c,droppableRects:u,over:h,measureDroppableContainers:f}=eP(),g=ox(cP,t),x=c.rect!==null,y=_.useMemo(()=>s.map(W=>typeof W=="object"&&"id"in W?W.id:W),[s]),N=o!=null,j=o?y.indexOf(o.id):-1,E=h?y.indexOf(h.id):-1,A=_.useRef(y),R=!HQ(y,A.current),M=E!==-1&&j===-1||R,L=UQ(r);Ll(()=>{R&&N&&f(y)},[R,y,N,f]),_.useEffect(()=>{A.current=y},[y]);const z=_.useMemo(()=>({activeIndex:j,containerId:g,disabled:L,disableTransforms:M,items:y,overIndex:E,useDragOverlay:x,sortedRects:BQ(y,u),strategy:i}),[j,g,L.draggable,L.droppable,M,y,E,u,x,i]);return ht.createElement(dP.Provider,{value:z},e)}const WQ=n=>{let{id:e,items:t,activeIndex:s,overIndex:i}=n;return ON(t,s,i).indexOf(e)},GQ=n=>{let{containerId:e,isSorting:t,wasDragging:s,index:i,items:r,newIndex:o,previousItems:c,previousContainerId:u,transition:h}=n;return!h||!s||c!==r&&i===o?!1:t?!0:o!==i&&e===u},YQ={duration:200,easing:"ease"},hP="transform",XQ=Oc.Transition.toString({property:hP,duration:0,easing:"linear"}),KQ={roleDescription:"sortable"};function ZQ(n){let{disabled:e,index:t,node:s,rect:i}=n;const[r,o]=_.useState(null),c=_.useRef(t);return Ll(()=>{if(!e&&t!==c.current&&s.current){const u=i.current;if(u){const h=xg(s.current,{ignoreTransform:!0}),f={x:u.left-h.left,y:u.top-h.top,scaleX:u.width/h.width,scaleY:u.height/h.height};(f.x||f.y)&&o(f)}}t!==c.current&&(c.current=t)},[e,t,s,i]),_.useEffect(()=>{r&&o(null)},[r]),r}function fP(n){let{animateLayoutChanges:e=GQ,attributes:t,disabled:s,data:i,getNewIndex:r=WQ,id:o,strategy:c,resizeObserverConfig:u,transition:h=YQ}=n;const{items:f,containerId:g,activeIndex:x,disabled:y,disableTransforms:N,sortedRects:j,overIndex:E,useDragOverlay:A,strategy:R}=_.useContext(dP),M=QQ(s,y),L=f.indexOf(o),z=_.useMemo(()=>({sortable:{containerId:g,index:L,items:f},...i}),[g,i,L,f]),W=_.useMemo(()=>f.slice(f.indexOf(o)),[f,o]),{rect:I,node:Y,isOver:U,setNodeRef:Z}=MN({id:o,data:z,disabled:M.droppable,resizeObserverConfig:{updateMeasurementsFor:W,...u}}),{active:$,activatorEvent:ae,activeNodeRect:xe,attributes:fe,setNodeRef:ke,listeners:G,isDragging:X,over:se,setActivatorNodeRef:ee,transform:ne}=kv({id:o,data:z,attributes:{...KQ,...t},disabled:M.draggable}),V=nZ(Z,ke),re=!!$,ge=re&&!N&&Ob(x)&&Ob(E),Ne=!A&&X,Ce=Ne&&ge?ne:null,Ge=ge?Ce??(c??R)({rects:j,activeNodeRect:xe,activeIndex:x,overIndex:E,index:L}):null,Oe=Ob(x)&&Ob(E)?r({id:o,items:f,activeIndex:x,overIndex:E}):L,$e=$?.id,Le=_.useRef({activeId:$e,items:f,newIndex:Oe,containerId:g}),pe=f!==Le.current.items,je=e({active:$,containerId:g,isDragging:X,isSorting:re,id:o,index:L,items:f,newIndex:Le.current.newIndex,previousItems:Le.current.items,previousContainerId:Le.current.containerId,transition:h,wasDragging:Le.current.activeId!=null}),Se=ZQ({disabled:!je,index:L,node:Y,rect:I});return _.useEffect(()=>{re&&Le.current.newIndex!==Oe&&(Le.current.newIndex=Oe),g!==Le.current.containerId&&(Le.current.containerId=g),f!==Le.current.items&&(Le.current.items=f)},[re,Oe,g,f]),_.useEffect(()=>{if($e===Le.current.activeId)return;if($e!=null&&Le.current.activeId==null){Le.current.activeId=$e;return}const lt=setTimeout(()=>{Le.current.activeId=$e},50);return()=>clearTimeout(lt)},[$e]),{active:$,activeIndex:x,attributes:fe,data:z,rect:I,index:L,newIndex:Oe,items:f,isOver:U,isSorting:re,isDragging:X,listeners:G,node:Y,overIndex:E,over:se,setNodeRef:V,setActivatorNodeRef:ee,setDroppableNodeRef:Z,setDraggableNodeRef:ke,transform:Se??Ge,transition:Je()};function Je(){if(Se||pe&&Le.current.newIndex===L)return XQ;if(!(Ne&&!Ev(ae)||!h)&&(re||je))return Oc.Transition.toString({...h,property:hP})}}function QQ(n,e){var t,s;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n?.draggable)!=null?t:e.draggable,droppable:(s=n?.droppable)!=null?s:e.droppable}}Hn.Down,Hn.Right,Hn.Up,Hn.Left;const ba=[];for(let n=0;n<256;++n)ba.push((n+256).toString(16).slice(1));function JQ(n,e=0){return(ba[n[e+0]]+ba[n[e+1]]+ba[n[e+2]]+ba[n[e+3]]+"-"+ba[n[e+4]]+ba[n[e+5]]+"-"+ba[n[e+6]]+ba[n[e+7]]+"-"+ba[n[e+8]]+ba[n[e+9]]+"-"+ba[n[e+10]]+ba[n[e+11]]+ba[n[e+12]]+ba[n[e+13]]+ba[n[e+14]]+ba[n[e+15]]).toLowerCase()}let zw;const qQ=new Uint8Array(16);function $Q(){if(!zw){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");zw=crypto.getRandomValues.bind(crypto)}return zw(qQ)}const eJ=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),DT={randomUUID:eJ};function tJ(n,e,t){n=n||{};const s=n.random??n.rng?.()??$Q();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,JQ(s)}function mP(n,e,t){return DT.randomUUID&&!n?DT.randomUUID():tJ(n)}const aa={ADD_BLOCK:"ADD_BLOCK",UPDATE_BLOCK:"UPDATE_BLOCK",REMOVE_BLOCK:"REMOVE_BLOCK",REORDER_BLOCKS:"REORDER_BLOCKS",SET_METADATA:"SET_METADATA",ADD_VARIABLE:"ADD_VARIABLE",UPDATE_VARIABLE:"UPDATE_VARIABLE",LOAD_DOCUMENT:"LOAD_DOCUMENT",SELECT_BLOCK:"SELECT_BLOCK"},Y2={metadata:{title:"Untitled Document",version:"1.0",theme:"default"},variables:{},blocks:[],selectedBlockId:null,history:{past:[],future:[]}};function nJ(n,e){switch(e.type){case aa.LOAD_DOCUMENT:return{...Y2,...e.payload,history:Y2.history};case aa.ADD_BLOCK:{const t={id:mP(),type:e.payload.type,data:e.payload.data||{}},s=[...n.blocks];return typeof e.payload.index=="number"?s.splice(e.payload.index,0,t):s.push(t),{...n,blocks:s,selectedBlockId:t.id}}case aa.UPDATE_BLOCK:{const t=n.blocks.map(s=>s.id===e.payload.id?{...s,data:{...s.data,...e.payload.data}}:s);return{...n,blocks:t}}case aa.REMOVE_BLOCK:return{...n,blocks:n.blocks.filter(t=>t.id!==e.payload.id),selectedBlockId:n.selectedBlockId===e.payload.id?null:n.selectedBlockId};case aa.REORDER_BLOCKS:return{...n,blocks:e.payload.blocks};case aa.SET_METADATA:return{...n,metadata:{...n.metadata,...e.payload}};case aa.ADD_VARIABLE:return{...n,variables:{...n.variables,[e.payload.key]:e.payload.config}};case aa.UPDATE_VARIABLE:return{...n,variables:{...n.variables,[e.payload.key]:{...n.variables[e.payload.key],...e.payload.config}}};case aa.SELECT_BLOCK:return{...n,selectedBlockId:e.payload.id};default:return n}}const gP=(n=null)=>{const[e,t]=_.useReducer(nJ,n||Y2),s=_.useCallback(x=>t({type:aa.LOAD_DOCUMENT,payload:x}),[]),i=_.useCallback((x,y={},N=null)=>t({type:aa.ADD_BLOCK,payload:{type:x,data:y,index:N}}),[]),r=_.useCallback((x,y)=>t({type:aa.UPDATE_BLOCK,payload:{id:x,data:y}}),[]),o=_.useCallback(x=>t({type:aa.REMOVE_BLOCK,payload:{id:x}}),[]),c=_.useCallback(x=>t({type:aa.REORDER_BLOCKS,payload:{blocks:x}}),[]),u=_.useCallback(x=>t({type:aa.SET_METADATA,payload:x}),[]),h=_.useCallback((x,y)=>t({type:aa.ADD_VARIABLE,payload:{key:x,config:y}}),[]),f=_.useCallback((x,y)=>t({type:aa.UPDATE_VARIABLE,payload:{key:x,config:y}}),[]),g=_.useCallback(x=>t({type:aa.SELECT_BLOCK,payload:{id:x}}),[]);return{documentState:e,actions:{loadDocument:s,addBlock:i,updateBlock:r,removeBlock:o,reorderBlocks:c,setMetadata:u,addVariable:h,updateVariable:f,selectBlock:g}}},sJ=({data:n,onChange:e})=>{const t=n.text||"",s=i=>{e({text:i.target.innerText})};return a.jsx("div",{contentEditable:!0,suppressContentEditableWarning:!0,onBlur:s,className:"outline-none text-base text-slate-700 leading-relaxed min-h-[24px] empty:before:content-[attr(placeholder)] empty:before:text-slate-300 relative",placeholder:"Type something...",children:t})},iJ=({data:n,onChange:e})=>{const t=n.level||1,s=n.text||"",i=n.align||"left",r=`h${Math.min(t,3)}`,o=c=>{e({text:c.target.innerText})};return a.jsx(r,{contentEditable:!0,suppressContentEditableWarning:!0,onBlur:o,className:`
                outline-none font-bold text-slate-900 leading-tight
                ${t===1?"text-3xl mb-4 mt-6":""}
                ${t===2?"text-2xl mb-3 mt-5":""}
                ${t===3?"text-xl mb-2 mt-4":""}
                text-${i}
            `,style:{minHeight:"1.2em"},children:s})},aJ=({data:n,onChange:e})=>{const t=n.src;return t?a.jsx("div",{className:"relative group",children:a.jsx("img",{src:t,alt:"Document Asset",className:"max-w-full rounded-lg"})}):a.jsxs("div",{className:"w-full h-32 bg-slate-50 border-2 border-dashed border-slate-200 rounded-lg flex flex-col items-center justify-center text-slate-400 cursor-pointer hover:bg-slate-100 hover:border-slate-300 transition-colors",children:[a.jsx(sN,{size:24,className:"mb-2"}),a.jsx("span",{className:"text-sm",children:"Click to upload image"})]})},rJ=({data:n,onChange:e})=>{const t=n.signee||"Client",s=n.required!==!1;return a.jsxs("div",{className:"my-4 p-4 border-2 border-dashed border-indigo-200 bg-indigo-50/50 rounded-lg flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-100 text-indigo-600 rounded-md",children:a.jsx(ar,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-indigo-900",children:"Signature Required"}),a.jsxs("p",{className:"text-xs text-indigo-600",children:["Assignee: ",t]})]})]}),s&&a.jsx("span",{className:"text-xs font-bold text-red-500 bg-red-50 px-2 py-1 rounded",children:"REQUIRED"})]})},oJ=({data:n,onChange:e,businessData:t})=>{const s=n.align||"left",i=n.width||150,r=n.src||(t?.logo?`undefined/storage/${t.logo}`:null),o={left:"justify-start",center:"justify-center",right:"justify-end"}[s];return a.jsx("div",{className:`flex w-full ${o} mb-6 mt-4 group`,children:r?a.jsx("img",{src:r,alt:"Business Logo",style:{width:`${i}px`},className:"object-contain"}):a.jsx("div",{className:"w-40 h-16 bg-slate-100 border-2 border-dashed border-slate-300 rounded flex items-center justify-center text-slate-400",children:a.jsx("span",{className:"text-xs font-semibold",children:"Business Logo"})})})},lJ=({data:n,onChange:e,businessData:t})=>{const s=n.align||"left",i={left:"text-left",center:"text-center",right:"text-right"}[s];return t?a.jsxs("div",{className:`w-full text-slate-600 text-sm leading-relaxed ${i} mb-4`,children:[a.jsx("p",{className:"font-bold text-slate-900",children:t.name}),t.address&&a.jsx("p",{children:t.address}),a.jsx("p",{children:[t.city,t.state,t.zip,t.country].filter(Boolean).join(", ")}),t.phone&&a.jsxs("p",{children:["Tel: ",t.phone]}),t.email&&a.jsxs("p",{children:["Email: ",t.email]}),t.tax_label&&t.tax_percentage&&a.jsxs("p",{className:"mt-1 text-xs text-slate-500 font-medium",children:[t.tax_label,": ",t.tax_percentage,"%"]})]}):a.jsxs("div",{className:"w-full p-2 border border-dashed border-amber-200 bg-amber-50 text-amber-600 text-xs rounded flex items-center gap-2",children:[a.jsx(Od,{size:14}),a.jsx("span",{children:"Business Info (Loading...)"})]})},cJ=({block:n,actions:e,businessData:t,isSelected:s,onSelect:i})=>{const{attributes:r,listeners:o,setNodeRef:c,transform:u,transition:h,isDragging:f}=fP({id:n.id}),g={transform:Oc.Transform.toString(u),transition:h,opacity:f?.5:1},x=()=>{switch(n.type){case"HEADING":return a.jsx(iJ,{data:n.data,onChange:y=>e.updateBlock(n.id,y)});case"TEXT":return a.jsx(sJ,{data:n.data,onChange:y=>e.updateBlock(n.id,y)});case"IMAGE":return a.jsx(aJ,{data:n.data,onChange:y=>e.updateBlock(n.id,y)});case"SIGNATURE":return a.jsx(rJ,{data:n.data,onChange:y=>e.updateBlock(n.id,y)});case"LOGO":return a.jsx(oJ,{data:n.data,onChange:y=>e.updateBlock(n.id,y),businessData:t});case"BUSINESS_INFO":return a.jsx(lJ,{data:n.data,onChange:y=>e.updateBlock(n.id,y),businessData:t});default:return a.jsxs("div",{className:"p-4 text-red-500",children:["Unknown Block Type: ",n.type]})}};return a.jsxs("div",{ref:c,style:g,className:"group relative flex items-start -ml-12 mb-2",children:[a.jsxs("div",{className:"w-10 h-full flex flex-col items-center pt-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{...r,...o,className:"p-1 text-slate-400 hover:text-slate-600 cursor-grab active:cursor-grabbing hover:bg-slate-100 rounded",children:a.jsx(fv,{size:16})}),a.jsx("button",{onClick:()=>e.removeBlock(n.id),className:"p-1 mt-1 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded",children:a.jsx(Ki,{size:16})})]}),a.jsx("div",{className:`flex-1 min-h-[40px] border rounded-md transition-colors cursor-pointer ${s?"border-2 border-indigo-500 ring-2 ring-indigo-50/50":"border-transparent group-hover:border-slate-100"}`,onClick:y=>{y.stopPropagation(),i(n.id)},children:x()})]})},pP=({blocks:n,actions:e,readOnly:t,businessData:s,selectedBlockId:i,onSelectBlock:r})=>a.jsxs("div",{className:"w-full max-w-[850px] min-h-[1100px] bg-white shadow-sm border border-slate-200 lg:scale-[1] origin-top p-12 lg:p-16",id:"document-canvas",children:[n.length===0&&a.jsxs("div",{className:"text-center py-20 text-slate-400 border-2 border-dashed border-slate-200 rounded-lg",children:[a.jsx("p",{className:"mb-2 font-medium",children:"Empty Document"}),a.jsx("p",{className:"text-sm",children:"Drag blocks from the sidebar to start building."})]}),a.jsx(uP,{items:n.map(o=>o.id),strategy:lP,children:n.map(o=>a.jsx(cJ,{block:o,actions:e,businessData:s,isSelected:i===o.id,onSelect:r},o.id))})]}),Zh=({type:n,icon:e,label:t})=>{const{attributes:s,listeners:i,setNodeRef:r,isDragging:o}=kv({id:`tool-${n}`,data:{type:"TOOL",toolType:n}});return a.jsxs("button",{ref:r,...i,...s,className:`w-full flex items-center gap-3 p-3 rounded-lg hover:bg-slate-50 border border-transparent hover:border-slate-200 transition-all cursor-grab active:cursor-grabbing text-left ${o?"opacity-50":""}`,children:[a.jsx("div",{className:"p-2 bg-indigo-50 text-indigo-600 rounded-md",children:a.jsx(e,{size:20})}),a.jsx("span",{className:"text-sm font-medium text-slate-700",children:t})]})},xP=()=>a.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[a.jsx("h3",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-4",children:"Content Blocks"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Zh,{type:"HEADING",icon:lU,label:"Heading"}),a.jsx(Zh,{type:"TEXT",icon:Ol,label:"Text Paragraph"}),a.jsx(Zh,{type:"IMAGE",icon:sN,label:"Image"}),a.jsx(Zh,{type:"LOGO",icon:j7,label:"Smart Logo"})," ",a.jsx(Zh,{type:"BUSINESS_INFO",icon:Od,label:"Business Details"})," ",a.jsx(Zh,{type:"SIGNATURE",icon:ar,label:"Signature Field"})]}),a.jsx("div",{className:"h-px bg-slate-100 my-6"}),a.jsx("h3",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-4",children:"Layout"}),a.jsx("div",{className:"space-y-2",children:a.jsx("div",{className:"opacity-50 pointer-events-none",title:"Coming Soon",children:a.jsx(Zh,{type:"COLUMNS",icon:D9,label:"Columns (Soon)"})})})]}),dJ=({value:n,onChange:e})=>a.jsx("div",{className:"flex bg-slate-100 rounded-lg p-1 gap-1",children:["left","center","right"].map(t=>a.jsxs("button",{onClick:()=>e(t),className:`flex-1 p-1 rounded-md flex justify-center transition-all ${n===t?"bg-white shadow text-indigo-600":"text-slate-400 hover:text-slate-600"}`,children:[t==="left"&&a.jsx(M5,{size:16}),t==="center"&&a.jsx(D5,{size:16}),t==="right"&&a.jsx(R5,{size:16})]},t))}),bP=({selectedBlock:n,updateBlock:e,removeBlock:t})=>{if(!n)return a.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-6 text-center text-slate-400",children:[a.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mb-4",children:a.jsx(uJ,{size:24})}),a.jsx("p",{className:"font-semibold text-slate-600 mb-1",children:"No Block Selected"}),a.jsx("p",{className:"text-xs",children:"Click on any element in the document canvas to customize its properties."})]});const{type:s,data:i,id:r}=n,o=(c,u)=>{e(r,{[c]:u})};return a.jsxs("div",{className:"h-full flex flex-col bg-white",children:[a.jsxs("div",{className:"p-4 border-b border-slate-200 flex items-center justify-between bg-slate-50",children:[a.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:s.replace("_"," ")}),a.jsx("button",{onClick:()=>t(r),className:"text-red-400 hover:text-red-600 p-1 hover:bg-red-50 rounded",children:a.jsx(Ki,{size:16})})]}),a.jsxs("div",{className:"p-5 flex-1 overflow-y-auto form-control-group",children:[["HEADING","LOGO","BUSINESS_INFO","IMAGE"].includes(s)&&a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-2 block",children:"Alignment"}),a.jsx(dJ,{value:i.align||"left",onChange:c=>o("align",c)})]}),s==="HEADING"&&a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-2 block",children:"Heading Level"}),a.jsx("div",{className:"flex gap-2",children:[1,2,3].map(c=>a.jsxs("button",{onClick:()=>o("level",c),className:`flex-1 py-2 border rounded text-sm font-bold ${i.level===c?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-slate-200 text-slate-500 hover:border-slate-300"}`,children:["H",c]},c))})]}),s==="LOGO"&&a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-2 block",children:"Size (Width)"}),a.jsx("input",{type:"range",min:"50",max:"500",value:i.width||150,onChange:c=>o("width",parseInt(c.target.value)),className:"w-full accent-indigo-600"}),a.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mt-1",children:[a.jsx("span",{children:"Small"}),a.jsxs("span",{children:[i.width||150,"px"]}),a.jsx("span",{children:"Large"})]})]}),s==="SIGNATURE"&&a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-2 block",children:"Signee"}),a.jsxs("select",{value:i.signee||"client",onChange:c=>o("signee",c.target.value),className:"w-full text-sm border-slate-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",children:[a.jsx("option",{value:"client",children:"Client"}),a.jsx("option",{value:"me",children:"Me (Provider)"})]}),a.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:i.required!==!1,onChange:c=>o("required",c.target.checked),className:"rounded text-indigo-600 focus:ring-indigo-500"}),a.jsx("span",{className:"text-sm text-slate-700",children:"Required Field"})]})]})]})]})},uJ=({size:n})=>a.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),yP=({variables:n,onAdd:e})=>{const[t,s]=_.useState(!1),[i,r]=_.useState(""),[o,c]=_.useState(""),u=()=>{if(!i)return;const h=i.replace(/[^a-zA-Z0-9_]/g,"");e(h,{type:"text",value:o,label:h}),r(""),c(""),s(!1)};return a.jsxs("div",{className:"h-1/3 min-h-[250px] border-t border-slate-200 flex flex-col bg-slate-50",children:[a.jsxs("div",{className:"p-4 border-b border-slate-200 flex items-center justify-between bg-white",children:[a.jsxs("div",{className:"flex items-center gap-2 text-slate-700",children:[a.jsx(u9,{size:16}),a.jsx("span",{className:"font-semibold text-sm",children:"Variables"})]}),a.jsx("button",{onClick:()=>s(!t),className:"p-1 hover:bg-slate-100 rounded text-indigo-600",children:a.jsx(kd,{size:16})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[t&&a.jsxs("div",{className:"text-sm bg-white p-3 rounded-lg border border-indigo-100 shadow-sm",children:[a.jsx("input",{className:"w-full mb-2 p-1 border-b border-slate-200 text-xs focus:outline-none focus:border-indigo-500",placeholder:"Key (e.g. client_name)",value:i,onChange:h=>r(h.target.value),autoFocus:!0}),a.jsx("input",{className:"w-full mb-3 p-1 border-b border-slate-200 text-xs focus:outline-none focus:border-indigo-500",placeholder:"Default Value",value:o,onChange:h=>c(h.target.value)}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:u,className:"flex-1 py-1 bg-indigo-600 text-white text-xs rounded",children:"Add"}),a.jsx("button",{onClick:()=>s(!1),className:"flex-1 py-1 bg-slate-100 text-slate-600 text-xs rounded",children:"Cancel"})]})]}),Object.entries(n).length===0&&!t&&a.jsx("p",{className:"text-xs text-slate-400 italic text-center py-4",children:"No variables defined."}),Object.entries(n).map(([h,f])=>a.jsxs("div",{className:"bg-white p-2 rounded border border-slate-200 text-sm group",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"font-mono text-xs font-bold text-indigo-600 px-1 bg-indigo-50 rounded",children:`{{${h}}}`}),a.jsx("span",{className:"text-[10px] text-slate-400 capitalize",children:f.type})]}),a.jsx("p",{className:"text-slate-600 truncate text-xs pl-1",children:f.value})]},h))]})]})},R0=()=>{const{id:n}=Wo(),e=ts(),{documentState:t,actions:s}=gP(),[i,r]=ht.useState("edit"),[o,c]=ht.useState(!1),[u,h]=ht.useState(null);_.useEffect(()=>{(async()=>{try{const N=await Rr();if(h(N),n){const j=await yg(n);let E=j.data.content;if(typeof E=="string")try{E=JSON.parse(E)}catch{}E&&E.blocks?(s.loadDocument({blocks:E.blocks,variables:E.variables||{},metadata:E.metadata||{title:j.data.name},history:{past:[],future:[]}}),s.setMetadata({title:j.data.name})):s.setMetadata({title:j.data.name})}else t.variables&&Object.keys(t.variables).length===0&&(s.addVariable("client_name",{value:"",type:"text",label:"Client Name"}),s.addVariable("date",{value:new Date().toLocaleDateString(),type:"date",label:"Date"}))}catch(N){console.error("Failed to load context",N),Te.error("Failed to load document")}})()},[n]);const f=Id(Ha(Lc,{activationConstraint:{distance:8}})),g=y=>{const{active:N,over:j}=y;if(j){if(N.data.current?.type==="TOOL"){s.addBlock(N.data.current.toolType);return}if(N.id!==j.id){const E=t.blocks.findIndex(M=>M.id===N.id),A=t.blocks.findIndex(M=>M.id===j.id),R=ON(t.blocks,E,A);s.reorderBlocks(R)}}},x=async()=>{if(n){c(!0);try{const y={blocks:t.blocks,variables:t.variables,metadata:t.metadata},N={name:t.metadata.title,content:JSON.stringify(y)};await vg(n,N),Te.success("Document saved successfully")}catch(y){console.error("Save failed",y),Te.error("Failed to save changes")}finally{c(!1)}}};return a.jsx(Bd,{sensors:f,collisionDetection:EN,onDragEnd:g,children:a.jsxs("div",{className:"flex flex-col h-screen bg-slate-50 overflow-hidden",children:[a.jsxs("header",{className:"h-16 bg-white border-b border-slate-200 px-6 flex items-center justify-between z-30 flex-shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>e("/documents"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-500",children:a.jsx(Ia,{size:20})}),a.jsx("input",{type:"text",value:t.metadata.title,onChange:y=>s.setMetadata({title:y.target.value}),className:"text-lg font-bold text-slate-800 border-none focus:ring-0 bg-transparent p-0 placeholder-slate-400 focus:outline-none",placeholder:"Untitled Document"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 text-slate-600 font-medium hover:bg-slate-100 rounded-lg",children:[a.jsx(_r,{size:18})," Preview"]}),a.jsxs("button",{onClick:x,disabled:o,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 shadow-sm disabled:opacity-50",children:[o?a.jsx(Sn,{className:"animate-spin",size:18}):a.jsx(Xi,{size:18}),o?"Saving...":"Save"]})]})]}),a.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[a.jsxs("div",{className:"w-[300px] bg-white border-r border-slate-200 flex flex-col z-20",children:[a.jsx(xP,{}),a.jsx("div",{className:"h-px bg-slate-200 my-2"}),a.jsx(yP,{variables:t.variables,onAdd:s.addVariable})]}),a.jsx("div",{className:"flex-1 bg-slate-100 overflow-y-auto p-8 flex justify-center",children:a.jsx(pP,{blocks:t.blocks,actions:s,readOnly:!1,businessData:u,selectedBlockId:t.selectedBlockId,onSelectBlock:s.selectBlock})}),a.jsx("div",{className:"w-[280px] bg-white border-l border-slate-200 z-20",children:a.jsx(bP,{selectedBlock:t.blocks.find(y=>y.id===t.selectedBlockId),updateBlock:s.updateBlock,removeBlock:s.removeBlock})})]})]})})},hJ=()=>a.jsx(R0,{}),RT=()=>{const n=ts(),{id:e}=Wo(),t=zd("(min-width: 1024px)"),[s,i]=_.useState("edit"),[r,o]=_.useState(1),[c,u]=_.useState(!1),[h,f]=_.useState(!1),[g,x]=_.useState(!1),[y,N]=_.useState(!1),[j,E]=_.useState(!1),[A,R]=_.useState(null),[M,L]=_.useState(null),[z,W]=_.useState(null),[I,Y]=_.useState(null),{formData:U,docContent:Z,signatures:$,documentName:ae,setDocumentName:xe,sentAt:fe,setSentAt:ke,isLoading:G,isSaving:X,handleFormChange:se,handleContentChange:ee,addSection:ne,removeSection:V,updateSection:re,reorderSections:ge,addSignature:Ne,updateSignature:Ce,removeSignature:We,saveDocument:Ge,enterPreviewMode:Oe,exitPreviewMode:$e,restoreVersion:Le,styles:pe,updateStyle:je,resetStyles:Se,isNewEngine:Je}=rP(e);if(Je)return a.jsx(hJ,{});const[lt,ct]=_.useState({isOpen:!1,data:null}),Fe=ht.useDeferredValue(U),nt=ht.useDeferredValue(Z),Ye=Id(Ha(Lc,{activationConstraint:{distance:8}}),Ha(Mf,{activationConstraint:{delay:250,tolerance:5}})),ot=ht.useRef(null),St=()=>n("/documents"),Pt=()=>o(le=>Math.min(le+.1,1.5)),qe=()=>o(le=>Math.max(le-.1,.5)),Ze=()=>{const le=U.receivingPartyName?.trim();le?(xe(`NDA - ${le}`),L(null),W(null),Te.success("Generated smart name!")):Te.error("Enter 'Receiving Party Name' in the form first.")},Xe=async le=>{try{if(le&&le.includes("/storage/")){const ut=`http://localhost:8000/api/v1/file-proxy?path=${encodeURIComponent(le)}`,Dt=await(await fetch(ut)).blob();return new Promise((hn,en)=>{const Rt=new FileReader;Rt.onloadend=()=>hn(Rt.result),Rt.onerror=en,Rt.readAsDataURL(Dt)})}const at=await(await fetch(le)).blob();return new Promise((ut,gt)=>{const Dt=new FileReader;Dt.onloadend=()=>ut(Dt.result),Dt.onerror=gt,Dt.readAsDataURL(at)})}catch(Ke){return console.error("Failed to convert image to base64",Ke),null}};ht.useEffect(()=>{(async()=>{try{const Ke=await Rr();Ke&&Ke.logo&&Y(Ke.logo)}catch(Ke){console.error("Failed to fetch business logo",Ke)}})()},[]);const yt=async()=>{try{await Ge(n)}catch(le){console.error("Failed to save",le)}},[Et,Ot]=_.useState(null),Kt=le=>{Ot(le.active)},Fn=le=>{const{active:Ke,over:at}=le;if(Ot(null),!!at&&at.id==="document-canvas"){const ut=document.getElementById("printable-document");if(ut&&Ke.rect.current.translated){const gt=ut.getBoundingClientRect(),Dt=(Ke.rect.current.translated.left-gt.left)/r,hn=(Ke.rect.current.translated.top-gt.top)/r;if(Ke.data.current?.type==="toolbar-item")ct({isOpen:!0,data:{id:null,position:{x:Dt,y:hn},type:"all",required:!0,order:$.length+1}});else if(Ke.data.current?.type==="signature-field"){const en=Ke.id;Ce(en,{position:{x:Dt,y:hn}})}}}},un=le=>{if(le.id)Ce(le.id,{metadata:{signeeName:le.signeeName,signeeEmail:le.signeeEmail,type:le.type,required:le.required,order:le.order}});else{const Ke={id:ch(),position:lt.data.position,metadata:{signeeName:le.signeeName,signeeEmail:le.signeeEmail,type:le.type,required:le.required,order:le.order}};Ne(Ke)}},qs=le=>{ct({isOpen:!0,data:{id:le.id,...le.metadata}})},Os=()=>{ct({isOpen:!0,data:{id:null,position:{x:50,y:100},type:"all",required:!0,order:$.length+1}})},An=async()=>{if(!e){Te.error("Please save the document before printing.");return}x(!0);try{let le=I;if(I&&!I.startsWith("data:")){const ut=await Xe(I);ut&&(le=ut)}const Ke=renderToStaticMarkup(a.jsx(By,{data:U,content:Z,zoom:1,printing:!0,styles:pe,signatures:$,businessLogo:le})),at=await ir(e,Ke,ae);at.url&&window.open(at.url,"_blank")}catch(le){console.error("PDF Generation failed",le),Te.error("Failed to generate PDF. Please try again.")}finally{x(!1)}},ye=async()=>{if(!e){Te.error("Please save the document before exporting.");return}N(!0),N(!0);try{let le=I;if(I&&!I.startsWith("data:")){const gt=await Xe(I);gt&&(le=gt)}const at=Fw(U,Z,ae,$,le),ut=await ir(e,at,ae);if(ut.url){const gt=document.createElement("a");gt.href=ut.url,gt.download=`${ae.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.pdf`,document.body.appendChild(gt),gt.click(),document.body.removeChild(gt),Te.success("Document exported successfully")}}catch(le){console.error("Export failed",le),Te.error("Failed to export document")}finally{N(!1)}},Qe=()=>{if(!e){Te.error("Please save the document before sending.");return}E(!0)},rt=le=>{le&&le.sent_at&&ke(le.sent_at)},Nt=le=>{Oe(le),R(le),u(!1),Te.success(`Previewing Version ${le.version_number}`)},mt=()=>{$e(),R(null),Te.success("Exited preview mode")},It=le=>{Le(le),R(null)},et=async le=>{const Ke=Te.loading("Preparing version PDF...");try{let at=le.content;if(typeof at=="string")try{at=JSON.parse(at)}catch{}const ut=at.formData||U,gt=at.docContent||Z;let Dt=I;if(I&&!I.startsWith("data:")){const Rt=await Xe(I);Rt&&(Dt=Rt)}const hn=Fw(ut,gt,`${ae} - v${le.version_number}`,[],Dt),en=await ir(e,hn,`${ae} - v${le.version_number}`);if(en.url){const Rt=document.createElement("a");Rt.href=en.url,Rt.download=`${ae.replace(/[^a-z0-9]/gi,"_")}_v${le.version_number}.pdf`,document.body.appendChild(Rt),Rt.click(),document.body.removeChild(Rt),Te.success(`Version ${le.version_number} downloaded`,{id:Ke})}}catch(at){console.error("Version download failed",at),Te.error("Failed to download version PDF",{id:Ke})}};return G?a.jsx("div",{className:"flex h-screen items-center justify-center bg-slate-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Sn,{size:40,className:"animate-spin text-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 font-medium",children:"Loading Document..."})]})}):a.jsx(Bd,{sensors:Ye,onDragStart:Kt,onDragEnd:Fn,children:a.jsxs("div",{className:"flex flex-col h-screen bg-slate-100 overflow-hidden",children:[a.jsx(wg,{isOpen:lt.isOpen,onClose:()=>ct({isOpen:!1,data:null}),onSave:un,initialData:lt.data,parties:{disclosingPartyName:U.disclosingPartyName,receivingPartyName:U.receivingPartyName,disclosingSignatoryName:U.disclosingSignatoryName,receivingSignatoryName:U.receivingSignatoryName}}),a.jsx(bg,{dropAnimation:{sideEffects:({active:le})=>(document.body.style.cursor="grabbing",()=>{document.body.style.cursor=""})},children:Et?Et.data.current?.type==="toolbar-item"?a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-indigo-500 bg-white shadow-xl opacity-90 cursor-grabbing ring-2 ring-indigo-500/20 w-48",children:[a.jsx("div",{className:"p-2 rounded-md bg-indigo-100 text-indigo-600",children:a.jsx("div",{className:"w-5 h-5 flex items-center justify-center font-bold",children:"+"})}),a.jsx("span",{className:"text-sm font-medium text-slate-900",children:"Placing Field..."})]}):Et.data.current?.type==="signature-field"?a.jsxs("div",{className:"w-64 bg-white/95 backdrop-blur-sm border-2 border-indigo-500 rounded-lg shadow-2xl p-3 flex flex-col cursor-grabbing",children:[a.jsx("div",{className:"flex items-center gap-2 text-indigo-700 font-semibold border-b pb-2 mb-2",children:a.jsx("span",{children:Et.data.current.signeeName||"Signature"})}),a.jsx("div",{className:"h-10 flex items-center justify-center text-indigo-200",children:"Sign Here"})]}):null:null}),A&&a.jsxs("div",{className:"bg-amber-100 border-b border-amber-200 px-4 py-2 flex items-center justify-between text-amber-800 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_r,{size:16}),a.jsxs("span",{className:"font-medium",children:["Previewing Version ",A.version_number]}),a.jsxs("span",{className:"text-amber-600 hidden md:inline",children:["(",new Date(A.created_at).toLocaleString(),")"]})]}),a.jsxs("button",{onClick:mt,className:"text-amber-700 hover:text-amber-900 font-medium hover:underline flex items-center gap-1",children:[a.jsx(bs,{size:14})," Exit Preview"]})]}),a.jsx(hx,{isOpen:j,onClose:()=>E(!1),documentId:e,documentName:ae,isReminder:!!fe,onSuccess:rt,getHtmlContent:async()=>{let le=I;if(I&&!I.startsWith("data:")){const Ke=await Xe(I);Ke&&(le=Ke)}return Fw(U,Z,ae,$,le)},signatures:$}),a.jsxs("header",{className:"no-print h-14 md:h-16 bg-white/80 backdrop-blur-md border-b border-slate-200/60 px-4 md:px-6 flex items-center justify-between flex-shrink-0 z-30 shadow-sm relative transition-all duration-300",children:[a.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[a.jsx("button",{onClick:St,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors flex-shrink-0",title:"Back to Documents",children:a.jsx(Ia,{size:20})}),a.jsxs("div",{className:"min-w-0 relative group/input",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{ref:ot,type:"text",value:ae,onChange:le=>{xe(le.target.value),M&&L(null)},className:`font-bold text-sm md:text-lg bg-transparent border-b-2 focus:ring-0 p-0 m-0 w-auto min-w-[150px] max-w-[300px] placeholder-slate-400 truncate transition-colors ${M?"border-red-500 text-slate-800 ring-4 ring-red-500/10 rounded-sm px-1 -mx-1":"border-transparent hover:border-slate-200 text-slate-800"}`,placeholder:"Enter Document Name"}),M&&a.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 bg-white rounded-lg shadow-xl border border-red-100 z-50 p-3 animate-in fade-in slide-in-from-top-2",children:[a.jsxs("div",{className:"flex items-start gap-2 text-red-600 mb-2",children:[a.jsx(wa,{size:16,className:"mt-0.5 flex-shrink-0"}),a.jsx("p",{className:"text-xs font-semibold leading-tight",children:M})]}),z&&a.jsxs("div",{className:"bg-slate-50 rounded p-2 border border-slate-100",children:[a.jsx("p",{className:"text-[10px] text-slate-500 mb-1 uppercase tracking-wide font-bold",children:"Suggestion:"}),a.jsx("button",{onClick:()=>{xe(z),L(null),W(null)},className:"w-full text-left text-sm font-bold text-indigo-600 hover:text-indigo-700 hover:underline truncate",title:"Click to use this name",children:z})]})]})]}),a.jsx("button",{onClick:Ze,className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-md transition-colors",title:"Auto-generate name from Form Data",children:a.jsx(hg,{size:16})}),fe&&a.jsxs("span",{className:"hidden lg:inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-emerald-50 text-emerald-600 text-[10px] font-medium border border-emerald-100",children:[a.jsx(fi,{size:10})," Sent"]})]}),a.jsx("p",{className:"text-[10px] md:text-xs text-slate-400 font-medium whitespace-nowrap hidden sm:block mt-0.5",children:e?"Autosaved locally":"Draft"})]})]}),a.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[a.jsxs("div",{className:"hidden lg:flex items-center bg-slate-100 rounded-lg p-1 mr-4",children:[a.jsx("button",{onClick:qe,className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-slate-500 transition-all",children:a.jsx(Yo,{size:16})}),a.jsxs("span",{className:"text-xs font-semibold text-slate-600 w-12 text-center",children:[Math.round(r*100),"%"]}),a.jsx("button",{onClick:Pt,className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-slate-500 transition-all",children:a.jsx(Go,{size:16})})]}),a.jsxs("button",{onClick:()=>u(!0),className:"hidden lg:flex items-center gap-2 px-4 py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all",title:"Version History",children:[a.jsx(la,{size:18}),a.jsx("span",{children:"History"})]}),a.jsxs("button",{onClick:An,disabled:g,className:"hidden lg:flex items-center gap-2 px-4 py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all disabled:opacity-50",children:[g?a.jsx(Sn,{size:18,className:"animate-spin"}):a.jsx(yf,{size:18}),a.jsx("span",{children:g?"Generating...":"Print"})]}),a.jsxs("button",{onClick:Qe,className:`hidden lg:flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg border border-transparent transition-all ${fe?"text-amber-600 hover:bg-amber-50 hover:border-amber-200":"text-slate-600 hover:bg-slate-50 hover:border-slate-200"}`,children:[fe?a.jsx(Pl,{size:18}):a.jsx(Js,{size:18}),a.jsx("span",{children:fe?"Remind":"Send"})]}),a.jsxs("button",{onClick:ye,disabled:y,className:"hidden lg:flex items-center gap-2 px-4 py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all disabled:opacity-50",children:[y?a.jsx(Sn,{size:18,className:"animate-spin"}):a.jsx(Yi,{size:18}),a.jsx("span",{children:y?"Exporting...":"Export"})]}),a.jsxs("button",{onClick:yt,className:`hidden lg:flex items-center gap-2 px-5 py-2 rounded-lg text-white font-medium shadow-md transition-all ${X?"bg-emerald-500":"bg-indigo-600 hover:bg-indigo-700"}`,children:[X?a.jsx(fi,{size:18}):a.jsx(Xi,{size:18}),a.jsx("span",{children:X?"Saved!":"Save"})]})]})]}),a.jsxs("div",{className:"flex flex-col lg:flex-row flex-1 overflow-hidden relative pb-[70px] lg:pb-0",children:[a.jsx("div",{className:`
                        no-print w-full lg:w-[400px] h-full bg-white border-b lg:border-b-0 lg:border-r border-slate-200 
                        overflow-y-auto z-20 shadow-sm flex-shrink-0 lg:order-1
                        ${t||s==="edit"?"block":"hidden"}
                    `,children:a.jsx(tP,{formData:U,onChange:se,docContent:Z,onContentChange:ee,addSection:ne,removeSection:V,updateSection:re,reorderSections:ge,styles:pe,onStyleUpdate:je,onStyleReset:Se})}),a.jsxs("div",{className:`
                        flex-1 h-full overflow-y-auto bg-slate-50/50 p-4 md:p-8 sm:p-12 
                        flex justify-center items-start scrollbar-thin scrollbar-thumb-slate-300 lg:order-2
                        ${t||s==="preview"?"flex":"hidden"}
                    `,style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"20px 20px"},children:[a.jsx(By,{data:Fe,content:nt,zoom:r,signatures:$,onUpdateSignature:Ce,onRemoveSignature:We,onEditSignature:qs,businessLogo:I,styles:pe}),!t&&s==="preview"&&a.jsx("button",{onClick:Os,className:"fixed bottom-24 right-6 w-14 h-14 bg-indigo-600 text-white rounded-full shadow-lg shadow-indigo-600/30 flex items-center justify-center hover:bg-indigo-700 transition-transform active:scale-95 z-30",title:"Add Signature",children:a.jsx("span",{className:"text-2xl font-bold",children:"+"})})]})]}),a.jsx(ux,{documentId:e,isOpen:c,onClose:()=>u(!1),onPreview:Nt,onDownload:et,onRestore:It}),!t&&a.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 flex justify-between items-center px-6 py-3 pb-safe z-40 safe-area-bottom",children:[a.jsxs("button",{onClick:()=>i("edit"),className:`flex flex-col items-center gap-1 ${s==="edit"?"text-indigo-600":"text-slate-400"}`,children:[a.jsx(wn,{size:24,strokeWidth:s==="edit"?2.5:2}),a.jsx("span",{className:"text-[10px] font-medium",children:"Editor"})]}),a.jsxs("button",{onClick:()=>i("preview"),className:`flex flex-col items-center gap-1 ${s==="preview"?"text-indigo-600":"text-slate-400"}`,children:[a.jsx(_r,{size:24,strokeWidth:s==="preview"?2.5:2}),a.jsx("span",{className:"text-[10px] font-medium",children:"Preview"})]}),a.jsxs("button",{onClick:yt,className:`flex flex-col items-center gap-1 ${X?"text-emerald-500":"text-slate-400 transition-colors active:text-indigo-600"}`,children:[X?a.jsx(fi,{size:24,strokeWidth:2.5}):a.jsx(Xi,{size:24}),a.jsx("span",{className:"text-[10px] font-medium",children:X?"Saved":"Save"})]}),a.jsxs("button",{onClick:()=>f(!0),className:`flex flex-col items-center gap-1 ${h?"text-indigo-600":"text-slate-400"}`,children:[a.jsx(tN,{size:24}),a.jsx("span",{className:"text-[10px] font-medium",children:"More"})]})]}),!t&&h&&a.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col justify-end",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm animate-in fade-in",onClick:()=>f(!1)}),a.jsxs("div",{className:"relative bg-white rounded-t-2xl p-6 pb-safe animate-in slide-in-from-bottom shadow-2xl space-y-2",children:[a.jsx("div",{className:"w-12 h-1.5 bg-slate-200 rounded-full mx-auto mb-6"}),a.jsx("h3",{className:"text-sm font-semibold text-slate-400 uppercase tracking-wider mb-2 px-2",children:"Actions"}),a.jsxs("button",{onClick:()=>{f(!1),u(!0)},className:"w-full flex items-center gap-3 p-3 text-slate-700 font-medium hover:bg-slate-50 rounded-xl transition-colors",children:[a.jsx("div",{className:"p-2 bg-indigo-50 text-indigo-600 rounded-lg",children:a.jsx(la,{size:20})}),"Version History"]}),a.jsxs("button",{onClick:()=>{f(!1),Qe()},className:"w-full flex items-center gap-3 p-3 text-slate-700 font-medium hover:bg-slate-50 rounded-xl transition-colors",children:[a.jsx("div",{className:"p-2 bg-amber-50 text-amber-600 rounded-lg",children:fe?a.jsx(Pl,{size:20}):a.jsx(Js,{size:20})}),fe?"Send Reminder":"Send to Client"]}),a.jsxs("button",{onClick:()=>{f(!1),An()},disabled:g,className:"w-full flex items-center gap-3 p-3 text-slate-700 font-medium hover:bg-slate-50 rounded-xl transition-colors disabled:opacity-50",children:[a.jsx("div",{className:"p-2 bg-sky-50 text-sky-600 rounded-lg",children:g?a.jsx(Sn,{size:20,className:"animate-spin"}):a.jsx(yf,{size:20})}),g?"Generating PDF...":"Print / Download PDF"]}),a.jsxs("button",{onClick:()=>{f(!1),ye()},disabled:y,className:"w-full flex items-center gap-3 p-3 text-slate-700 font-medium hover:bg-slate-50 rounded-xl transition-colors disabled:opacity-50",children:[a.jsx("div",{className:"p-2 bg-emerald-50 text-emerald-600 rounded-lg",children:y?a.jsx(Sn,{size:20,className:"animate-spin"}):a.jsx(Yi,{size:20})}),y?"Exporting...":"Export"]}),a.jsx("button",{onClick:()=>f(!1),className:"w-full mt-4 p-3 bg-slate-100 text-slate-600 font-semibold rounded-xl",children:"Cancel"})]})]})]})})},Yu=({title:n,icon:e,isOpen:t,onClick:s,children:i})=>a.jsxs("div",{className:"border-b border-slate-100 last:border-none",children:[a.jsxs("button",{onClick:s,className:`w-full flex items-center justify-between p-4 transition-colors ${t?"bg-slate-50 text-indigo-600":"text-slate-700 hover:bg-slate-50"}`,children:[a.jsxs("div",{className:"flex items-center gap-3 font-semibold text-sm",children:[e&&a.jsx(e,{size:18,className:t?"text-indigo-500":"text-slate-400"}),a.jsx("span",{children:n})]}),a.jsx(Ie.div,{animate:{rotate:t?180:0},transition:{duration:.2},children:a.jsx(kf,{size:16})})]}),a.jsx(dn,{initial:!1,children:t&&a.jsx(Ie.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:a.jsx("div",{className:"p-4 pt-0 space-y-4",children:i})})})]}),$a=({label:n,name:e,value:t,onChange:s,placeholder:i,type:r="text",rows:o})=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5",children:n}),o?a.jsx("textarea",{name:e,value:t||"",onChange:s,placeholder:i,rows:o,className:"w-full px-3 py-2.5 bg-white border border-slate-200 rounded-lg text-sm text-slate-700 shadow-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all placeholder-slate-400 resize-y"}):a.jsx("input",{type:r,name:e,value:t||"",onChange:s,placeholder:i,className:"w-full px-3 py-2.5 bg-white border border-slate-200 rounded-lg text-sm text-slate-700 shadow-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all placeholder-slate-400"})]}),vP=({formData:n,onChange:e,docContent:t,onContentChange:s,addSection:i,removeSection:r,updateSection:o,reorderSections:c,updateTimeline:u,addTimelineRow:h,removeTimelineRow:f,styles:g,onStyleUpdate:x,onStyleReset:y,addListItem:N,removeListItem:j,updateListItem:E})=>{const[A,R]=_.useState("cover"),[M,L]=_.useState("fill"),z=Y=>{R(A===Y?null:Y)},W=({title:Y,items:U,onAdd:Z,onRemove:$,onUpdate:ae,placeholder:xe})=>a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wide",children:Y}),a.jsx("div",{className:"space-y-2",children:U&&U.map((fe,ke)=>a.jsxs("div",{className:"flex gap-2 group relative",children:[a.jsx("input",{type:"text",value:fe,onChange:G=>ae(ke,G.target.value),placeholder:xe,className:"w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm text-slate-700 focus:bg-white transition-all outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500"}),a.jsx("button",{onClick:()=>$(ke),className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",title:"Remove item",children:a.jsx(Ki,{size:16})})]},ke))}),a.jsxs("button",{onClick:Z,className:"w-full py-2 border border-dashed border-slate-300 text-slate-500 hover:text-indigo-600 hover:border-indigo-300 rounded-lg text-xs font-medium transition-colors flex items-center justify-center gap-2",children:[a.jsx(kd,{size:14})," Add Item"]})]}),I=({title:Y,label:U,placeholder:Z,rows:$=6})=>{const ae=t.sections.find(xe=>xe.title===Y)||t.sections.find(xe=>xe.title.includes(Y));return ae?a.jsx($a,{label:U||Y,name:`section_${ae.id}`,value:ae.content,onChange:xe=>o(ae.id,"content",xe.target.value),placeholder:Z,rows:$}):null};return a.jsxs("div",{className:"bg-white min-h-full pb-20",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 sticky top-0 z-10 backdrop-blur-sm",children:[a.jsxs("div",{className:"flex gap-1 bg-slate-200/50 p-1 rounded-lg mb-4",children:[a.jsxs("button",{onClick:()=>L("fill"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${M==="fill"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,children:[a.jsx($0,{size:16}),"Fill Details"]}),a.jsxs("button",{onClick:()=>L("edit"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${M==="edit"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,children:[a.jsx(ex,{size:16}),"Builder"]}),a.jsxs("button",{onClick:()=>L("style"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${M==="style"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,children:[a.jsx(Ol,{size:16}),"Style"]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-slate-900",children:M==="fill"?"Proposal Details":M==="edit"?"Structure Builder":"Styling & Appearance"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:M==="fill"?"Enter project specifics and pricing":M==="edit"?"Customize layout and clauses":"Fonts, colors and spacing"})]})]}),M==="fill"&&a.jsxs(a.Fragment,{children:[a.jsxs(Yu,{title:"Cover Page",icon:wn,isOpen:A==="cover",onClick:()=>z("cover"),children:[a.jsx($a,{label:"Proposal Title",name:"proposalTitle",value:n.proposalTitle,onChange:e,placeholder:"e.g. Mobile App Development"}),a.jsx($a,{label:"Project Description (Short)",name:"projectDescription",value:n.projectDescription,onChange:e,placeholder:"Brief summary...",rows:2}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx($a,{label:"Date",name:"proposalDate",value:n.proposalDate,onChange:e,placeholder:"DD/MM/YYYY"}),a.jsx($a,{label:"Ref No.",name:"referenceNo",value:n.referenceNo,onChange:e,placeholder:"Optional"})]})]}),a.jsx(Yu,{title:"Document Branding",icon:Df,isOpen:A==="branding",onClick:()=>z("branding"),children:a.jsx(cx,{formData:n,onChange:e})}),a.jsx(Yu,{title:"Introduction & Goals",icon:E7,isOpen:A==="intro",onClick:()=>z("intro"),children:a.jsxs("div",{className:"space-y-6",children:[a.jsx(I,{title:"Introduction",placeholder:"Executive summary and intro...",rows:4}),a.jsx(W,{title:"Client Objectives",items:n.objectivesList,onAdd:()=>N("objectivesList"),onRemove:Y=>j("objectivesList",Y),onUpdate:(Y,U)=>E("objectivesList",Y,U),placeholder:"E.g. Increase revenue by 20%"})]})}),a.jsx(Yu,{title:"Scope & Deliverables",icon:ug,isOpen:A==="scope",onClick:()=>z("scope"),children:a.jsxs("div",{className:"space-y-8",children:[a.jsx(W,{title:"Services Included",items:n.scopeIncludedList,onAdd:()=>N("scopeIncludedList"),onRemove:Y=>j("scopeIncludedList",Y),onUpdate:(Y,U)=>E("scopeIncludedList",Y,U),placeholder:"Service description..."}),a.jsx(W,{title:"Services Excluded",items:n.scopeExcludedList,onAdd:()=>N("scopeExcludedList"),onRemove:Y=>j("scopeExcludedList",Y),onUpdate:(Y,U)=>E("scopeExcludedList",Y,U),placeholder:"Excluded service..."}),a.jsx("div",{className:"h-px bg-slate-100"}),a.jsx(W,{title:"Deliverables",items:n.deliverablesList,onAdd:()=>N("deliverablesList"),onRemove:Y=>j("deliverablesList",Y),onUpdate:(Y,U)=>E("deliverablesList",Y,U),placeholder:"E.g. Final Report PDF"})]})}),a.jsx(Yu,{title:"Parties Involved",icon:Ai,isOpen:A==="parties",onClick:()=>z("parties"),children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-3 bg-indigo-50 rounded-lg border border-indigo-100",children:[a.jsx("h4",{className:"text-xs font-bold text-indigo-900 uppercase mb-3",children:"Prepared For (Client)"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx($a,{label:"Client Name",name:"clientName",value:n.clientName,onChange:e,placeholder:"Contact Person"}),a.jsx($a,{label:"Company",name:"clientCompany",value:n.clientCompany,onChange:e,placeholder:"Client Company"}),a.jsx($a,{label:"Address",name:"clientAddress",value:n.clientAddress,onChange:e,placeholder:"Full Address",rows:2})]})]}),a.jsxs("div",{className:"p-3 bg-emerald-50 rounded-lg border border-emerald-100",children:[a.jsx("h4",{className:"text-xs font-bold text-emerald-900 uppercase mb-3",children:"Prepared By (Provider)"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx($a,{label:"Your Name",name:"providerName",value:n.providerName,onChange:e,placeholder:"Your Name"}),a.jsx($a,{label:"Company",name:"providerCompany",value:n.providerCompany,onChange:e,placeholder:"Your Company"}),a.jsx($a,{label:"Address",name:"providerAddress",value:n.providerAddress,onChange:e,placeholder:"Full Address",rows:2})]})]})]})}),a.jsx(Yu,{title:"Project Timeline",icon:mv,isOpen:A==="timeline",onClick:()=>z("timeline"),children:a.jsxs("div",{className:"space-y-4",children:[n.timeline.map((Y,U)=>a.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-3 relative group",children:[a.jsxs("div",{className:"grid grid-cols-[1fr_80px] gap-2 mb-2",children:[a.jsx("input",{value:Y.phase||"",onChange:Z=>u(U,"phase",Z.target.value),className:"bg-white border border-slate-200 rounded px-2 py-1 text-xs font-bold text-slate-700",placeholder:"Phase"}),a.jsx("input",{value:Y.duration||"",onChange:Z=>u(U,"duration",Z.target.value),className:"bg-white border border-slate-200 rounded px-2 py-1 text-xs text-slate-500 text-right",placeholder:"Duration"})]}),a.jsx("textarea",{value:Y.description||"",onChange:Z=>u(U,"description",Z.target.value),rows:2,className:"w-full bg-white border border-slate-200 rounded px-2 py-1 text-xs text-slate-600 resize-none",placeholder:"Phase Description..."}),a.jsx("button",{onClick:()=>f(U),className:"absolute -top-2 -right-2 bg-white text-slate-400 hover:text-red-500 rounded-full p-1 shadow-sm border border-slate-100 opacity-0 group-hover:opacity-100 transition-all",children:a.jsx(Ki,{size:12})})]},U)),a.jsxs("button",{onClick:h,className:"w-full py-2 border border-dashed border-slate-300 text-slate-500 hover:text-indigo-600 hover:border-indigo-300 rounded-lg text-xs font-medium transition-colors flex items-center justify-center gap-2",children:[a.jsx(kd,{size:14})," Add Phase"]})]})}),a.jsxs(Yu,{title:"Commercials",icon:eN,isOpen:A==="commercials",onClick:()=>z("commercials"),children:[a.jsx($a,{label:"Total Project Cost",name:"totalProjectCost",value:n.totalProjectCost,onChange:e,placeholder:"e.g. $5,000 USD"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[a.jsx($a,{label:"Payment Days",name:"paymentDays",value:n.paymentDays,onChange:e,placeholder:"15"}),a.jsx($a,{label:"Validity (Days)",name:"validityDays",value:n.validityDays,onChange:e,placeholder:"30"})]}),a.jsx("div",{className:"h-px bg-slate-100 my-3"}),a.jsx($a,{label:"Jurisdiction",name:"jurisdiction",value:n.jurisdiction,onChange:e,placeholder:"State/Country"})]}),a.jsx(Yu,{title:"Legal Terms",icon:Tr,isOpen:A==="legal",onClick:()=>z("legal"),children:a.jsxs("div",{className:"space-y-4",children:[a.jsx(I,{title:"Client Responsibilities",rows:3}),a.jsx(I,{title:"Confidentiality",rows:3}),a.jsx(I,{title:"Intellectual Property Rights",rows:3}),a.jsx(I,{title:"Limitation of Liability",rows:3}),a.jsx(I,{title:"Term & Termination",rows:3}),a.jsx(I,{title:"Governing Law",rows:2})]})})]}),M==="edit"&&a.jsx("div",{className:"p-4 space-y-4 pb-20",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-[7px] top-4 bottom-0 w-[2px] bg-slate-100"}),a.jsx("p",{className:"font-bold text-[10px] uppercase tracking-widest text-slate-400 pl-8 mb-4",children:"Proposal Structure"}),a.jsx(dv,{axis:"y",values:t.sections,onReorder:c,className:"space-y-0",children:t.sections.map((Y,U)=>a.jsx(uv,{value:Y,className:"relative mb-2",children:a.jsx(jf,{section:Y,onUpdate:(Z,$)=>o(Y.id,Z,$),onRemove:()=>r(Y.id),placeholderTitle:"Section Title",placeholderContent:"Section content..."})},Y.id))}),a.jsx(Dv,{onClick:i})]})})]})};function ef({data:n,content:e,zoom:t=1,printing:s=!1,readOnly:i=!1,styles:r}){const o=r||{fontFamily:"font-serif",fontSize:"text-[11pt]",lineHeight:"leading-relaxed",textColor:"#1e293b",headingColor:"#0f172a",accentColor:"#4f46e5",pageMargin:"p-[25mm]"},c=x=>{if(!x)return"bg-slate-100 text-slate-600 border-slate-200";const y=["bg-indigo-50 text-indigo-700 border-indigo-200","bg-emerald-50 text-emerald-700 border-emerald-200","bg-amber-50 text-amber-700 border-amber-200","bg-rose-50 text-rose-700 border-rose-200","bg-violet-50 text-violet-700 border-violet-200","bg-sky-50 text-sky-700 border-sky-200"];let N=0;for(let j=0;j<x.length;j++)N=x.charCodeAt(j)+((N<<5)-N);return y[Math.abs(N)%y.length]},u=({value:x,placeholder:y,name:N,className:j=""})=>{const E=c(N);return x?i||s?a.jsx("span",{className:`font-medium text-slate-900 ${j}`,children:x}):a.jsx("span",{className:`px-1.5 py-0.5 rounded border ${E} font-medium mx-0.5 transition-all hover:brightness-95 ${j}`,children:x}):i||s?a.jsx("span",{className:`text-slate-500 italic ${j}`,children:y}):a.jsx("span",{className:`px-1.5 py-0.5 rounded border border-dashed ${E} bg-opacity-50 font-medium text-xs mx-0.5 ${j}`,children:y})},h=({template:x,values:y})=>{if(!x)return null;const N=x.split(/(\*\*[^*]+\*\*)/g);return a.jsx("span",{children:N.map((j,E)=>{if(j.startsWith("**")&&j.endsWith("**"))return a.jsx("strong",{children:j.slice(2,-2)},E);const A=j.split(/(\{\{[^}]+\}\})/g);return a.jsx("span",{children:A.map((R,M)=>{if(R.startsWith("{{")&&R.endsWith("}}")){const L=R.slice(2,-2).trim();return Array.isArray(y[L])?a.jsx("ul",{className:"list-disc pl-5 my-2 space-y-1",children:y[L].map((z,W)=>a.jsx("li",{children:a.jsx(u,{value:z,name:`${L}_${W}`})},W))},M):a.jsx(u,{value:y[L],name:L,placeholder:`[${L}]`},M)}return R.split(`
`).map((L,z)=>a.jsxs(ht.Fragment,{children:[z>0&&a.jsx("br",{}),L]},z))})},E)})})},f=s?"div":Ie.div,g=s?"div":Ie.section;return a.jsxs(f,{id:"printable-document",...s?{}:{initial:{opacity:0,y:20},animate:{opacity:1,y:0}},style:{transform:s?"none":`scale(${t})`,transformOrigin:"top center",color:o.textColor},className:`w-[210mm] min-h-[297mm] bg-white relative mb-20 origin-top
                ${s?"":"shadow-[0_8px_30px_rgb(0,0,0,0.12)] border border-slate-200/60"}
                ${o.fontFamily} ${o.fontSize} ${o.lineHeight} ${o.pageMargin}
            `,children:[a.jsx("div",{className:"no-print absolute inset-0 shadow-[0_2px_4px_rgba(0,0,0,0.05),0_12px_24px_rgba(0,0,0,0.1)] rounded-sm pointer-events-none"}),a.jsxs("div",{className:"p-[10mm] h-full flex flex-col relative z-10 min-h-[297mm]",children:[a.jsxs("div",{className:`flex-1 flex flex-col justify-center ${n.logoAlignment==="left"?"items-start text-left":n.logoAlignment==="right"?"items-end text-right":"items-center text-center"} border-b-2 border-slate-900 mb-12 pb-12 break-after-page`,style:s?{textAlign:n.logoAlignment||"center"}:{},children:[n.businessLogo&&n.brandingEnabled!==!1&&n.brandingEnabled!=="false"&&a.jsx("div",{className:"mb-8 w-full",children:a.jsx("img",{src:n.businessLogo,alt:"Company Logo",style:{height:`${n.logoSize||80}px`,objectFit:"contain",marginLeft:n.logoAlignment==="right"||n.logoAlignment==="center"?"auto":"0",marginRight:n.logoAlignment==="left"||n.logoAlignment==="center"?"auto":"0",display:"block"},className:`object-contain ${n.logoAlignment==="left"?"":n.logoAlignment==="right"?"ml-auto":"mx-auto"}`})}),a.jsx("div",{className:"mb-4",children:a.jsx("span",{className:"uppercase tracking-[0.2em] text-slate-400 text-sm font-sans",children:"Project Proposal"})}),a.jsx("h1",{className:"text-4xl font-bold mb-2 max-w-lg leading-tight",style:{color:o.headingColor},children:a.jsx(u,{value:n.proposalTitle,placeholder:"[Project Name]"})}),a.jsx("div",{className:"w-16 h-1 bg-indigo-500 my-8"}),a.jsxs("div",{className:`grid grid-cols-1 gap-12 w-full max-w-md mt-8 ${n.logoAlignment==="right"?"text-right":"text-left"}`,children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase font-bold text-slate-400 mb-2 font-sans",children:"Prepared For"}),a.jsx("div",{className:"text-lg font-medium",children:a.jsx(u,{value:n.clientName,placeholder:"[Client Name]"})}),a.jsx("div",{className:"text-slate-600",children:a.jsx(u,{value:n.clientCompany,placeholder:"[Client Company]"})}),a.jsx("div",{className:"text-slate-500 text-sm mt-1 whitespace-pre-wrap",children:a.jsx(u,{value:n.clientAddress,placeholder:"[Client Address]"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase font-bold text-slate-400 mb-2 font-sans",children:"Prepared By"}),a.jsx("div",{className:"text-lg font-medium",children:a.jsx(u,{value:n.providerName,placeholder:"[Your Name]"})}),a.jsx("div",{className:"text-slate-600",children:a.jsx(u,{value:n.providerCompany,placeholder:"[Your Company]"})}),a.jsx("div",{className:"text-slate-500 text-sm mt-1 whitespace-pre-wrap",children:a.jsx(u,{value:n.providerAddress,placeholder:"[Your Address]"})})]})]}),a.jsxs("div",{className:"mt-auto grid grid-cols-2 gap-8 w-full max-w-md text-sm border-t border-slate-100 pt-8",children:[a.jsxs("div",{className:n.logoAlignment==="right"?"text-right order-2":"",children:[a.jsx("span",{className:"text-slate-400",children:"Date:"})," ",a.jsx(u,{value:n.proposalDate,placeholder:"DD/MM/YYYY"})]}),a.jsxs("div",{className:n.logoAlignment==="right"?"text-left order-1":"text-right",children:[a.jsx("span",{className:"text-slate-400",children:"Ref:"})," ",a.jsx(u,{value:n.referenceNo,placeholder:"-"})]})]})]}),a.jsx("div",{className:"space-y-8",children:a.jsx(dn,{children:e.sections&&e.sections.map((x,y)=>a.jsxs(g,{...s?{}:{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95}},children:[a.jsxs("h2",{className:"font-bold text-lg uppercase mb-3 border-l-4 pl-3",style:{color:o.headingColor,borderColor:o.accentColor},children:[y+2,". ",x.title]}),a.jsx("div",{className:"text-justify text-slate-700",children:a.jsx(h,{template:x.content,values:n})}),x.title.includes("Timeline")&&a.jsx("div",{className:"mt-6 mb-8 overflow-hidden rounded-lg border border-slate-200",children:a.jsxs("table",{className:"w-full text-sm text-left",children:[a.jsx("thead",{className:"bg-slate-100 text-slate-700 font-bold uppercase text-xs",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3",children:"Phase"}),a.jsx("th",{className:"px-4 py-3",children:"Description"}),a.jsx("th",{className:"px-4 py-3 text-right",children:"Duration"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-100",children:n.timeline.map((N,j)=>a.jsxs("tr",{className:"bg-white",children:[a.jsx("td",{className:"px-4 py-3 font-medium text-slate-900",children:N.phase}),a.jsx("td",{className:"px-4 py-3 text-slate-600",children:N.description}),a.jsx("td",{className:"px-4 py-3 text-right text-slate-500",children:N.duration})]},j))})]})})]},x.id))})}),a.jsxs("section",{className:"mt-16 break-inside-avoid border-t-2 border-slate-900 pt-8",children:[a.jsxs("h2",{className:"font-bold text-lg uppercase mb-6 text-slate-900 pl-3 border-l-4 border-indigo-500",children:[e.sections.length+2,". Acceptance"]}),a.jsx("p",{className:"mb-8",children:"By signing below, both parties agree to the terms and conditions outlined in this proposal."}),s?a.jsx("table",{style:{width:"100%",marginTop:"20px"},children:a.jsx("tbody",{children:a.jsxs("tr",{children:[a.jsxs("td",{style:{width:"48%",verticalAlign:"top",paddingRight:"2%"},children:[a.jsx("p",{style:{fontWeight:"bold",textTransform:"uppercase",fontSize:"10pt",marginBottom:"20px",backgroundColor:"#f1f5f9",padding:"5px"},children:"For Client"}),a.jsx("table",{style:{width:"100%"},children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{style:{width:"80px",paddingBottom:"15px"},children:"Name:"}),a.jsx("td",{style:{borderBottom:"1px solid #ccc"}})]}),a.jsxs("tr",{children:[a.jsx("td",{style:{width:"80px",paddingBottom:"15px"},children:"Designation:"}),a.jsx("td",{style:{borderBottom:"1px solid #ccc"}})]}),a.jsxs("tr",{children:[a.jsx("td",{style:{width:"80px",paddingBottom:"15px"},children:"Signature:"}),a.jsx("td",{style:{borderBottom:"1px solid #ccc",height:"40px"}})]}),a.jsxs("tr",{children:[a.jsx("td",{style:{width:"80px"},children:"Date:"}),a.jsx("td",{style:{borderBottom:"1px solid #ccc"}})]})]})})]}),a.jsx("td",{style:{width:"4%"}}),a.jsxs("td",{style:{width:"48%",verticalAlign:"top"},children:[a.jsx("p",{style:{fontWeight:"bold",textTransform:"uppercase",fontSize:"10pt",marginBottom:"20px",backgroundColor:"#f1f5f9",padding:"5px"},children:"For Service Provider"}),a.jsx("table",{style:{width:"100%"},children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{style:{width:"80px",paddingBottom:"15px"},children:"Name:"}),a.jsx("td",{style:{borderBottom:"1px solid #ccc"},children:n.providerName})]}),a.jsxs("tr",{children:[a.jsx("td",{style:{width:"80px",paddingBottom:"15px"},children:"Designation:"}),a.jsx("td",{style:{borderBottom:"1px solid #ccc"}})]}),a.jsxs("tr",{children:[a.jsx("td",{style:{width:"80px",paddingBottom:"15px"},children:"Signature:"}),a.jsx("td",{style:{borderBottom:"1px solid #ccc",height:"40px"}})]}),a.jsxs("tr",{children:[a.jsx("td",{style:{width:"80px"},children:"Date:"}),a.jsx("td",{style:{borderBottom:"1px solid #ccc"}})]})]})})]})]})})}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-16",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"font-bold uppercase text-xs tracking-wider mb-8 bg-slate-100 p-2 inline-block rounded",children:"For Client"}),a.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-x-2 gap-y-4 items-baseline text-sm",children:[a.jsx("span",{className:"font-medium text-slate-500",children:"Name:"}),a.jsx("div",{className:"border-b border-slate-300 h-6"}),a.jsx("span",{className:"font-medium text-slate-500",children:"Designation:"}),a.jsx("div",{className:"border-b border-slate-300 h-6"}),a.jsx("span",{className:"font-medium text-slate-500",children:"Signature:"}),a.jsx("div",{className:"border-b border-slate-300 h-10"}),a.jsx("span",{className:"font-medium text-slate-500",children:"Date:"}),a.jsx("div",{className:"border-b border-slate-300 h-6"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"font-bold uppercase text-xs tracking-wider mb-8 bg-slate-100 p-2 inline-block rounded",children:"For Service Provider"}),a.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-x-2 gap-y-4 items-baseline text-sm",children:[a.jsx("span",{className:"font-medium text-slate-500",children:"Name:"}),a.jsx("div",{className:"border-b border-slate-300 h-6 text-slate-900",children:n.providerName}),a.jsx("span",{className:"font-medium text-slate-500",children:"Designation:"}),a.jsx("div",{className:"border-b border-slate-300 h-6"}),a.jsx("span",{className:"font-medium text-slate-500",children:"Signature:"}),a.jsx("div",{className:"border-b border-slate-300 h-10"}),a.jsx("span",{className:"font-medium text-slate-500",children:"Date:"}),a.jsx("div",{className:"border-b border-slate-300 h-6"})]})]})]})]}),!s&&a.jsx("div",{className:"mt-auto pt-12 text-center",children:a.jsx("p",{className:"text-[9px] text-slate-300 uppercase tracking-widest font-sans",children:"Generated by DocForge"})})]})]})}const wP=({children:n})=>{const[e,t]=_.useState(null);return _.useEffect(()=>{const s=document.getElementById("print-root");if(s)t(s);else{const i=document.createElement("div");i.id="print-root",document.body.appendChild(i),t(i)}},[]),e?p6.createPortal(n,e):null},fJ=()=>a.jsx(R0,{}),mJ=()=>Math.random().toString(36).substr(2,9),gJ={title:"Business / Project Proposal",sections:[{id:"1",title:"Introduction",content:"This proposal is submitted by {{providerCompany}} to {{clientName}} to outline the scope, deliverables, timelines, and commercial terms for {{projectDescription}}. This document is intended to present a clear understanding of the proposed engagement and to serve as a basis for mutual agreement."},{id:"2",title:"Client Objectives",content:`The objective of this proposal is to assist {{clientCompany}} in achieving the following goals:

1. [Objective 1]
2. [Objective 2]
3. [Objective 3]`},{id:"3",title:"Scope of Work",content:`The scope of work under this proposal shall include, but is not limited to, the following services:

**4.1 Services Included**
[Service 1]
[Service 2]

**4.2 Services Excluded**
Any services not explicitly mentioned above shall be considered outside the scope and may be provided under a separate agreement or change request.`},{id:"4",title:"Deliverables",content:`The following deliverables shall be provided as part of this engagement:

1. [Deliverable 1]
2. [Deliverable 2]

All deliverables shall be submitted in the agreed format and within the defined timeline.`},{id:"5",title:"Project Timeline",content:"The estimated timeline for completion of the project is as follows (see table below). Timelines are indicative and subject to client approvals and dependencies."},{id:"6",title:"Commercials & Pricing",content:`The total professional fees for the services described in this proposal shall be: {{totalProjectCost}}.

**Payment Terms**
- [Percentage] payable upon acceptance
- [Percentage] payable upon milestone completion
- [Percentage] payable upon final delivery

All payments shall be made within {{paymentDays}} days from the date of invoice.`},{id:"7",title:"Client Responsibilities",content:`The Client agrees to:
- Provide accurate and timely information
- Share necessary access, approvals, and feedback
- Assign a single point of contact for communication

Delays caused due to client dependencies may impact project timelines.`},{id:"8",title:"Confidentiality",content:"Both parties agree to maintain strict confidentiality of all proprietary, technical, commercial, and business information exchanged during the course of this engagement. Confidential information shall not be disclosed to any third party without prior written consent."},{id:"9",title:"Intellectual Property Rights",content:`Unless otherwise agreed in writing:
- All intellectual property developed during the project shall remain the property of {{providerCompany}} until full payment is received.
- Upon full payment, ownership or license rights shall be transferred as mutually agreed.`},{id:"10",title:"Limitation of Liability",content:"In no event shall either party be liable for indirect, incidental, or consequential damages. The total liability of {{providerCompany}} shall not exceed the total fees paid under this proposal."},{id:"11",title:"Term & Termination",content:"This proposal shall remain valid for {{validityDays}} days from the proposal date. Either party may terminate the engagement by providing {{noticeDays}} days written notice. Fees for work completed up to the termination date shall be payable."},{id:"12",title:"Governing Law",content:"This proposal shall be governed by and construed in accordance with the laws of {{jurisdiction}}, and courts of {{courtCity}} shall have exclusive jurisdiction."}]},MT=()=>{const n=ts(),{id:e}=Wo(),t=zd("(min-width: 1024px)"),[s,i]=_.useState("edit"),[r,o]=_.useState(1),[c,u]=_.useState(!1),[h,f]=_.useState("Untitled Proposal"),[g,x]=_.useState(!1),[y,N]=_.useState(null),j=ht.useRef(null),[E,A]=_.useState({proposalTitle:"Website Redesign Project",proposalDate:new Date().toLocaleDateString(),logoSize:80,logoAlignment:"center",brandingEnabled:!0,referenceNo:"",clientName:"",clientCompany:"",clientAddress:"",providerName:"",providerCompany:"",providerAddress:"",projectDescription:"",totalProjectCost:"",paymentDays:"15",validityDays:"30",noticeDays:"30",jurisdiction:"",courtCity:"",timeline:[{phase:"Phase 1",description:"Requirement Analysis",duration:"5 days"},{phase:"Phase 2",description:"Execution / Development",duration:"15 days"},{phase:"Phase 3",description:"Review & Final Delivery",duration:"5 days"}]}),[R,M]=_.useState(gJ),{styles:L,updateStyle:z,resetStyles:W}=Sg(),I=ht.useDeferredValue(E),Y=ht.useDeferredValue(R);_.useEffect(()=>{e&&$(e)},[e]);const[U,Z]=_.useState(!1),$=async qe=>{try{const Ze=await yg(qe);Ze.data.name&&f(Ze.data.name);let Xe=Ze.data.content||{};if(typeof Xe=="string")try{Xe=JSON.parse(Xe)}catch(yt){console.error(yt)}if(Xe.blocks){Z(!0);return}Xe.formData&&A(yt=>({...yt,...Xe.formData})),Xe.docContent&&M(Xe.docContent),Xe.styles&&Object.entries(Xe.styles).forEach(([yt,Et])=>z(yt,Et))}catch(Ze){console.error("Failed to load",Ze)}};if(U)return a.jsx(fJ,{});_.useEffect(()=>{e||(async()=>{try{const Ze=await Rr();Ze&&A(Xe=>({...Xe,providerName:Ze.name||"",providerCompany:Ze.name||"",providerAddress:[Ze.address,Ze.city,Ze.state,Ze.country].filter(Boolean).join(", "),businessLogo:Ze.logo||null}))}catch(Ze){console.error("Failed to load business details",Ze)}})()},[e]);const ae=qe=>{const{name:Ze,value:Xe}=qe.target;A(yt=>({...yt,[Ze]:Xe}))},xe=qe=>{const{name:Ze,value:Xe}=qe.target;M(yt=>({...yt,[Ze]:Xe}))},fe=(qe,Ze,Xe)=>{const yt=[...E.timeline];yt[qe][Ze]=Xe,A(Et=>({...Et,timeline:yt}))},ke=()=>{A(qe=>({...qe,timeline:[...qe.timeline,{phase:"New Phase",description:"",duration:""}]}))},G=qe=>{E.timeline.length<=1||A(Ze=>({...Ze,timeline:Ze.timeline.filter((Xe,yt)=>yt!==qe)}))},X=()=>{const qe={id:mJ(),title:"New Section",content:"Enter the details of this new clause here..."};M(Ze=>({...Ze,sections:[...Ze.sections,qe]}))},se=qe=>{M(Ze=>({...Ze,sections:Ze.sections.filter(Xe=>Xe.id!==qe)}))},ee=(qe,Ze,Xe)=>{M(yt=>({...yt,sections:yt.sections.map(Et=>Et.id===qe?{...Et,[Ze]:Xe}:Et)}))},ne=qe=>{M(Ze=>({...Ze,sections:qe}))},V=()=>n("/documents"),re=()=>o(qe=>Math.min(qe+.1,1.5)),ge=()=>o(qe=>Math.max(qe-.1,.5)),Ne=async()=>{u(!0);try{const qe={name:h,type_slug:"proposal",content:{formData:E,docContent:R,styles:L},status:"draft"};if(e)await vg(e,qe),Te.success("Proposal updated successfully");else{const Ze=await dx(qe);Te.success("Proposal created successfully"),n(`/documents/proposal/${Ze.data.id}`,{replace:!0})}}catch(qe){console.error("Failed to save",qe),Te.error("Failed to save proposal")}finally{setTimeout(()=>u(!1),500)}},Ce=async qe=>{try{if(qe&&qe.includes("/storage/")){const yt=`http://localhost:8000/api/v1/file-proxy?path=${encodeURIComponent(qe)}`,Ot=await(await fetch(yt)).blob();return new Promise((Kt,Fn)=>{const un=new FileReader;un.onloadend=()=>Kt(un.result),un.onerror=Fn,un.readAsDataURL(Ot)})}const Xe=await(await fetch(qe)).blob();return new Promise((yt,Et)=>{const Ot=new FileReader;Ot.onloadend=()=>yt(Ot.result),Ot.onerror=Et,Ot.readAsDataURL(Xe)})}catch(Ze){return console.error("Failed to convert image to base64",Ze),null}},[We,Ge]=_.useState(!1);ht.useRef(null);const[Oe,$e]=_.useState(null),Le=async()=>{if(!e){Te.error("Please save the document before printing.");return}Ge(!0);try{let qe=E.businessLogo;if(E.businessLogo&&!E.businessLogo.startsWith("data:")){const Et=await Ce(E.businessLogo);Et&&(qe=Et)}const Ze={...E,businessLogo:qe},Xe=_l.renderToStaticMarkup(a.jsx(ef,{data:Ze,content:R,zoom:1,printing:!0,styles:L})),yt=await ir(e,Xe,h);yt.url&&window.open(yt.url,"_blank")}catch(qe){console.error("PDF Generation failed",qe),Te.error("Failed to generate PDF")}finally{Ge(!1)}},[pe,je]=_.useState(!1),[Se,Je]=_.useState(null),lt=()=>{if(!e){Te.error("Please save the document before sending.");return}je(!0)},ct=qe=>{qe&&qe.sent_at&&Je(qe.sent_at)},[Fe,nt]=_.useState(!1),Ye=async()=>{if(!e){Te.error("Please save the document before exporting.");return}nt(!0);try{const qe=_l.renderToStaticMarkup(a.jsx(ef,{data:E,content:R,zoom:1,printing:!0})),Ze=await ir(e,qe,h);if(Ze.url){const Xe=document.createElement("a");Xe.href=Ze.url,Xe.download=`${h.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.pdf`,document.body.appendChild(Xe),Xe.click(),document.body.removeChild(Xe),Te.success("Proposal exported successfully")}}catch(qe){console.error("Export failed",qe),Te.error("Failed to export proposal")}finally{nt(!1)}},ot=qe=>{j.current||(j.current={formData:E,docContent:R});let Ze=qe.content;if(typeof Ze=="string")try{Ze=JSON.parse(Ze)}catch{}Ze.formData&&A(Ze.formData),Ze.docContent&&M(Ze.docContent),N(qe),x(!1),Te.success(`Previewing Version ${qe.version_number}`)},St=()=>{j.current&&(A(j.current.formData),M(j.current.docContent),j.current=null),N(null),Te.success("Exited preview mode")},Pt=async qe=>{const Ze=Te.loading("Preparing version PDF...");try{let Xe=qe.content;if(typeof Xe=="string")try{Xe=JSON.parse(Xe)}catch{}const yt=_l.renderToStaticMarkup(a.jsx(ef,{data:Xe.formData||E,content:Xe.docContent||R,zoom:1,printing:!0})),Et=await ir(e,yt,`${h} - v${qe.version_number}`);if(Et.url){const Ot=document.createElement("a");Ot.href=Et.url,Ot.download=`${h.replace(/[^a-z0-9]/gi,"_")}_v${qe.version_number}.pdf`,document.body.appendChild(Ot),Ot.click(),document.body.removeChild(Ot),Te.success(`Version ${qe.version_number} downloaded`,{id:Ze})}}catch(Xe){console.error("Version download failed",Xe),Te.error("Failed to download version PDF",{id:Ze})}};return a.jsxs("div",{className:"flex flex-col h-screen bg-slate-100 overflow-hidden",children:[y&&a.jsxs("div",{className:"bg-amber-100 border-b border-amber-200 px-4 py-2 flex items-center justify-between text-amber-800 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_r,{size:16}),a.jsxs("span",{className:"font-medium",children:["Previewing Version ",y.version_number]}),a.jsxs("span",{className:"text-amber-600 hidden md:inline",children:["(",new Date(y.created_at).toLocaleString(),")"]})]}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("button",{onClick:St,className:"text-amber-700 hover:text-amber-900 font-medium hover:underline flex items-center gap-1",children:[a.jsx(bs,{size:14})," Exit Preview"]})})]}),We&&a.jsx(wP,{children:a.jsx(ef,{data:E,content:R,zoom:1})}),a.jsx(hx,{isOpen:pe,onClose:()=>je(!1),documentId:e,documentName:h,isReminder:!!Se,onSuccess:ct,getHtmlContent:async()=>{const qe=_l.renderToStaticMarkup(a.jsx(ef,{data:E,content:R,zoom:1,printing:!0}));return PN(qe,h)}}),a.jsxs("header",{className:"no-print h-16 bg-white/80 backdrop-blur-md border-b border-slate-200/60 px-4 md:px-6 flex items-center justify-between flex-shrink-0 z-30 shadow-sm transition-all duration-300",children:[a.jsxs("div",{className:"flex items-center gap-2 md:gap-4 overflow-hidden",children:[a.jsx("button",{onClick:V,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors flex-shrink-0",title:"Back to Documents",children:a.jsx(Ia,{size:20})}),a.jsxs("div",{className:"min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:h,onChange:qe=>f(qe.target.value),className:"font-bold text-slate-800 text-sm md:text-lg bg-transparent border-none focus:ring-0 p-0 m-0 w-auto min-w-[120px] max-w-[200px] placeholder-slate-400 truncate",placeholder:"Enter Document Name"}),Se&&a.jsxs("span",{className:"hidden lg:inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-emerald-50 text-emerald-600 text-[10px] font-medium border border-emerald-100",children:[a.jsx(fi,{size:10})," Sent"]})]}),a.jsx("p",{className:"text-[10px] md:text-xs text-slate-400 font-medium whitespace-nowrap hidden sm:block",children:"Last saved: Just now"})]})]}),a.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[a.jsxs("div",{className:"hidden lg:flex items-center bg-slate-100 rounded-lg p-1 mr-4",children:[a.jsx("button",{onClick:ge,className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-slate-500 transition-all",children:a.jsx(Yo,{size:16})}),a.jsxs("span",{className:"text-xs font-semibold text-slate-600 w-12 text-center",children:[Math.round(r*100),"%"]}),a.jsx("button",{onClick:re,className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-slate-500 transition-all",children:a.jsx(Go,{size:16})})]}),a.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 p-2 md:px-4 md:py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all",children:[a.jsx(la,{size:18}),a.jsx("span",{className:"hidden lg:inline",children:"History"})]}),a.jsxs("button",{onClick:Le,className:"hidden md:flex items-center gap-2 p-2 md:px-4 md:py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all",children:[a.jsx(yf,{size:18}),a.jsx("span",{className:"hidden lg:inline",children:"Print"})]}),a.jsxs("button",{onClick:lt,className:`flex items-center gap-2 px-2 md:px-4 py-2 text-sm font-medium rounded-lg border border-transparent transition-all ${Se?"text-amber-600 hover:bg-amber-50 hover:border-amber-200":"text-slate-600 hover:bg-slate-50 hover:border-slate-200"}`,children:[Se?a.jsx(Pl,{size:18}):a.jsx(Js,{size:18}),a.jsx("span",{className:"hidden lg:inline",children:Se?"Remind":"Send"})]}),a.jsxs("button",{onClick:Ye,disabled:Fe,className:"flex items-center gap-2 px-2 md:px-4 py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all disabled:opacity-50",children:[Fe?a.jsx(Sn,{size:18,className:"animate-spin"}):a.jsx(Yi,{size:18}),a.jsx("span",{className:"hidden lg:inline",children:Fe?"Exporting...":"Export"})]}),a.jsxs("button",{onClick:Ne,className:`flex items-center gap-2 px-3 md:px-5 py-2 rounded-lg text-white font-medium shadow-md transition-all ${c?"bg-emerald-500":"bg-indigo-600 hover:bg-indigo-700"}`,children:[c?a.jsx(fi,{size:18}):a.jsx(Xi,{size:18}),a.jsx("span",{className:"hidden md:inline",children:c?"Saved!":"Save"})]})]})]}),!t&&a.jsxs("div",{className:"flex bg-white border-b border-slate-200 px-4",children:[a.jsx("button",{onClick:()=>i("edit"),className:`flex-1 py-3 text-sm font-medium border-b-2 transition-colors ${s==="edit"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Edit"}),a.jsx("button",{onClick:()=>i("preview"),className:`flex-1 py-3 text-sm font-medium border-b-2 transition-colors ${s==="preview"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Preview"})]}),a.jsxs("div",{className:"flex flex-col lg:flex-row flex-1 overflow-hidden relative",children:[a.jsx("div",{className:`
                    no-print w-full lg:w-[400px] h-full bg-white border-b lg:border-b-0 lg:border-r border-slate-200 
                    overflow-y-auto z-20 shadow-sm flex-shrink-0 lg:order-1
                    ${t||s==="edit"?"block":"hidden"}
                `,children:a.jsx(vP,{formData:E,onChange:ae,docContent:R,onContentChange:xe,addSection:X,removeSection:se,updateSection:ee,reorderSections:ne,updateTimeline:fe,addTimelineRow:ke,removeTimelineRow:G,styles:L,onStyleUpdate:z,onStyleReset:W})}),a.jsx("div",{className:`
                    flex-1 h-full overflow-y-auto bg-slate-50/50 p-4 md:p-8 sm:p-12 
                    flex justify-center items-start scrollbar-thin scrollbar-thumb-slate-300 lg:order-2
                    ${t||s==="preview"?"flex":"hidden"}
                `,style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"20px 20px"},children:a.jsx(ef,{data:I,content:Y,zoom:r,styles:L})})]}),a.jsx(ux,{documentId:e,isOpen:g,onClose:()=>x(!1),onPreview:ot,onDownload:Pt,onRestore:qe=>{if(qe&&qe.content){let Ze=qe.content;if(typeof Ze=="string")try{Ze=JSON.parse(Ze)}catch{}Ze.formData&&A(Ze.formData),Ze.docContent&&M(Ze.docContent)}N(null),j.current=null}})]})},pJ=({formData:n,onChange:e,updateItem:t,addItem:s,removeItem:i,totals:r,styles:o,onStyleUpdate:c,onStyleReset:u})=>{const[h,f]=_.useState("details"),[g,x]=_.useState("fill"),y=N=>{f(h===N?null:N)};return a.jsxs("div",{className:"bg-white min-h-full pb-20",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 sticky top-0 z-10 backdrop-blur-sm",children:[a.jsxs("div",{className:"flex gap-1 bg-slate-200/50 p-1 rounded-lg mb-4",children:[a.jsxs("button",{onClick:()=>x("fill"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${g==="fill"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,children:[a.jsx(wn,{size:16}),"Invoice Details"]}),a.jsxs("button",{onClick:()=>x("style"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${g==="style"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,children:[a.jsx(Ol,{size:16}),"Appearance"]})]}),a.jsx("h2",{className:"text-lg font-bold text-slate-900",children:g==="fill"?"Invoice Details":"Styling & Appearance"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:g==="fill"?"Configure invoice data and line items":"Fonts, colors and spacing"}),g==="fill"&&a.jsxs("div",{className:"mt-4 bg-emerald-50 border border-emerald-100 p-3 rounded-lg flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-bold text-emerald-800 uppercase",children:"Grand Total"}),a.jsx("span",{className:"text-lg font-bold text-emerald-600",children:r.grandTotal.toLocaleString()})]})]}),g==="fill"?a.jsxs(a.Fragment,{children:[a.jsxs(AccordionItem,{title:"Invoice Basics",icon:wn,isOpen:h==="details",onClick:()=>y("details"),children:[a.jsx(InputGroup,{label:"Invoice Title",name:"invoiceTitle",value:n.invoiceTitle,onChange:e,placeholder:"INVOICE"}),a.jsx(InputGroup,{label:"Invoice Number",name:"invoiceNumber",value:n.invoiceNumber,onChange:e,placeholder:"INV-001"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(InputGroup,{label:"Date",name:"invoiceDate",value:n.invoiceDate,onChange:e,placeholder:"DD/MM/YYYY"}),a.jsx(InputGroup,{label:"Due Date",name:"dueDate",value:n.dueDate,onChange:e,placeholder:"DD/MM/YYYY"})]}),a.jsx(InputGroup,{label:"Place of Supply",name:"placeOfSupply",value:n.placeOfSupply,onChange:e,placeholder:"State/Country"})]}),a.jsx(AccordionItem,{title:"Document Branding",icon:Df,isOpen:h==="branding",onClick:()=>y("branding"),children:a.jsx(cx,{formData:n,onChange:e})}),a.jsx(AccordionItem,{title:"Parties Involved",icon:Ai,isOpen:h==="parties",onClick:()=>y("parties"),children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-3 bg-indigo-50 rounded-lg border border-indigo-100",children:[a.jsx("h4",{className:"text-xs font-bold text-indigo-900 uppercase mb-3",children:"Seller (You)"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(InputGroup,{label:"Name",name:"sellerName",value:n.sellerName,onChange:e,placeholder:"Your Company"}),a.jsx(InputGroup,{label:"Address",name:"sellerAddress",value:n.sellerAddress,onChange:e,placeholder:"Address",rows:2}),a.jsx(InputGroup,{label:"Tax ID (GST/PAN)",name:"sellerTaxId",value:n.sellerTaxId,onChange:e,placeholder:"Optional"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx(InputGroup,{label:"Email",name:"sellerEmail",value:n.sellerEmail,onChange:e,placeholder:"Email"}),a.jsx(InputGroup,{label:"Phone",name:"sellerPhone",value:n.sellerPhone,onChange:e,placeholder:"Phone"})]})]})]}),a.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border border-slate-200",children:[a.jsx("h4",{className:"text-xs font-bold text-slate-700 uppercase mb-3",children:"Bill To (Client)"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(InputGroup,{label:"Client Name",name:"clientName",value:n.clientName,onChange:e,placeholder:"Client Name"}),a.jsx(InputGroup,{label:"Address",name:"clientAddress",value:n.clientAddress,onChange:e,placeholder:"Client Address",rows:2}),a.jsx(InputGroup,{label:"Tax ID (GSTIN)",name:"clientTaxId",value:n.clientTaxId,onChange:e,placeholder:"Optional"})]})]})]})}),a.jsx(AccordionItem,{title:"Line Items",icon:b7,isOpen:h==="items",onClick:()=>y("items"),children:a.jsxs("div",{className:"space-y-4",children:[n.items.map((N,j)=>a.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-3 relative group shadow-sm",children:[a.jsxs("div",{className:"mb-2",children:[a.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-wide mb-1",children:"Description"}),a.jsx("input",{value:N.description,onChange:E=>t(j,"description",E.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm outline-none focus:border-indigo-400 transition-colors",placeholder:"Item Name"})]}),a.jsxs("div",{className:"grid grid-cols-[1fr_1fr_1fr] gap-2 items-end",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-wide mb-1",children:"Qty"}),a.jsx("input",{type:"number",value:N.quantity,onChange:E=>t(j,"quantity",E.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm text-center font-mono"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-wide mb-1",children:"Rate"}),a.jsx("input",{type:"number",value:N.rate,onChange:E=>t(j,"rate",E.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm text-right font-mono"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-wide mb-1",children:"Amount"}),a.jsx("div",{className:"w-full bg-slate-100 border border-slate-200 rounded px-2 py-1.5 text-sm text-right font-bold text-slate-600 font-mono",children:N.amount})]})]}),a.jsx("button",{onClick:()=>i(j),className:"absolute top-2 right-2 text-slate-300 hover:text-red-500 p-1 transition-colors",children:a.jsx(Ki,{size:14})})]},j)),a.jsxs("button",{onClick:s,className:"w-full py-2 border border-dashed border-slate-300 text-slate-500 hover:text-indigo-600 hover:border-indigo-300 rounded-lg text-xs font-medium transition-colors flex items-center justify-center gap-2",children:[a.jsx(kd,{size:14})," Add Item"]})]})}),a.jsx(AccordionItem,{title:"Tax Details",icon:WU,isOpen:h==="tax",onClick:()=>y("tax"),children:a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(InputGroup,{label:"Tax Type",name:"taxType",value:n.taxType,onChange:e,placeholder:"GST"}),a.jsx(InputGroup,{label:"Tax Rate (%)",name:"taxRate",value:n.taxRate,onChange:e,placeholder:"18",type:"number"})]})}),a.jsx(AccordionItem,{title:"Bank & Payment",icon:pU,isOpen:h==="bank",onClick:()=>y("bank"),children:a.jsxs("div",{className:"space-y-3",children:[a.jsx(InputGroup,{label:"Account Name",name:"accountName",value:n.accountName,onChange:e,placeholder:"Account Holder"}),a.jsx(InputGroup,{label:"Bank Name",name:"bankName",value:n.bankName,onChange:e,placeholder:"Bank Name"}),a.jsx(InputGroup,{label:"Account Number",name:"accountNumber",value:n.accountNumber,onChange:e,placeholder:"XXXX XXXX XXXX"}),a.jsx(InputGroup,{label:"IFSC / SWIFT",name:"ifscCode",value:n.ifscCode,onChange:e,placeholder:"Code"})]})}),a.jsxs(AccordionItem,{title:"Notes & Signatory",icon:mU,isOpen:h==="notes",onClick:()=>y("notes"),children:[a.jsx(InputGroup,{label:"Authorized Signatory Name",name:"signatoryName",value:n.signatoryName,onChange:e,placeholder:"Name"}),a.jsx("div",{className:"h-2"}),a.jsx(InputGroup,{label:"Notes / Terms",name:"notes",value:n.notes,onChange:e,placeholder:"Terms...",rows:3})]})]}):a.jsx("div",{className:"p-4 pb-20",children:a.jsx(Rv,{styles:o,onUpdate:c,onReset:u})})]})};function bm({data:n,totals:e,zoom:t=1,printing:s=!1,readOnly:i=!1,styles:r}){const o=r||{fontFamily:"font-sans",fontSize:"text-[10pt]",lineHeight:"leading-relaxed",textColor:"#1e293b",headingColor:"#0f172a"},c=n.logoSize||60,u=n.logoAlignment||"left",h=({className:x="",style:y={}})=>n.businessLogo&&n.brandingEnabled!==!1&&n.brandingEnabled!=="false"?a.jsx("img",{src:n.businessLogo,alt:"Business Logo",className:`${x}`,style:{height:`${c}px`,objectFit:"contain",...y}}):null,f=({value:x,placeholder:y,className:N=""})=>x?i||s?a.jsx("span",{className:`font-medium text-slate-900 ${N}`,children:x}):a.jsx("span",{className:`font-medium text-slate-900 border-b border-transparent hover:border-indigo-200 hover:bg-indigo-50 transition-all px-0.5 rounded ${N}`,children:x}):i||s?a.jsx("span",{className:`text-slate-500 italic ${N}`,children:y}):a.jsx("span",{className:`bg-blue-50/50 px-1 border-b border-blue-200 text-slate-400 italic transition-colors hover:bg-blue-100 ${N}`,children:y}),g=s?"div":Ie.div;return a.jsxs(g,{id:"printable-document",...s?{}:{initial:{opacity:0,y:20},animate:{opacity:1,y:0}},style:{transform:s?"none":`scale(${t})`,transformOrigin:"top center",color:o.textColor},className:`w-[210mm] min-h-[297mm] bg-white relative mb-20 origin-top
                ${s?"":"shadow-[0_8px_30px_rgb(0,0,0,0.12)] border border-slate-200/60"}
                ${o.fontFamily} ${o.fontSize} ${o.lineHeight}
            `,children:[!s&&a.jsx("div",{className:"no-print absolute inset-0 rounded-sm pointer-events-none bg-gradient-to-b from-white to-slate-50/20"}),a.jsxs("div",{className:`p-[10mm] ${s?"block h-auto":"flex flex-col h-full"} relative z-10`,children:[s?a.jsx("table",{style:{width:"100%",marginBottom:"20px",borderBottom:"2px solid #000",paddingBottom:"20px"},children:a.jsxs("tbody",{children:[u==="center"&&n.businessLogo&&a.jsx("tr",{children:a.jsx("td",{colSpan:"2",style:{textAlign:"center",paddingBottom:"20px"},children:a.jsx(h,{style:{marginBottom:"15px"}})})}),a.jsxs("tr",{children:[a.jsxs("td",{style:{verticalAlign:"top",width:"50%"},children:[u==="left"&&a.jsx("div",{style:{marginBottom:"15px"},children:a.jsx(h,{})}),a.jsx("h1",{className:"text-2xl font-bold uppercase tracking-wider mb-2",style:{color:o.headingColor},children:n.invoiceTitle||"Invoice"}),a.jsxs("div",{className:"mt-4 text-sm",children:[a.jsx("h2",{className:"font-bold text-lg",children:a.jsx(f,{value:n.sellerName,placeholder:"[Your Company Name]"})}),a.jsx("div",{className:"text-slate-600 max-w-[250px] whitespace-pre-wrap",children:a.jsx(f,{value:n.sellerAddress,placeholder:"[Full Address]"})}),n.sellerTaxId&&a.jsxs("div",{className:"mt-1",children:[a.jsx("span",{className:"font-bold text-xs uppercase",children:"GSTIN/Tax ID:"})," ",n.sellerTaxId]}),a.jsxs("div",{className:"mt-1 text-xs",children:[n.sellerEmail&&a.jsx("div",{children:n.sellerEmail}),n.sellerPhone&&a.jsx("div",{children:n.sellerPhone})]})]})]}),a.jsxs("td",{style:{verticalAlign:"top",width:"50%",textAlign:"right"},children:[u==="right"&&a.jsx("div",{style:{marginBottom:"15px",display:"flex",justifyContent:"flex-end"},children:a.jsx(h,{})}),a.jsx("table",{style:{float:"right",width:"auto",padding:"10px"},children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{style:{fontWeight:"bold",color:"#64748b",paddingRight:"10px"},children:"Invoice #:"}),a.jsx("td",{className:"font-mono",children:a.jsx(f,{value:n.invoiceNumber,placeholder:"INV-0001"})})]}),a.jsxs("tr",{children:[a.jsx("td",{style:{fontWeight:"bold",color:"#64748b",paddingRight:"10px"},children:"Date:"}),a.jsx("td",{children:a.jsx(f,{value:n.invoiceDate,placeholder:"DD/MM/YYYY"})})]}),a.jsxs("tr",{children:[a.jsx("td",{style:{fontWeight:"bold",color:"#64748b",paddingRight:"10px"},children:"Due Date:"}),a.jsx("td",{children:a.jsx(f,{value:n.dueDate,placeholder:"DD/MM/YYYY"})})]}),a.jsxs("tr",{children:[a.jsx("td",{style:{fontWeight:"bold",color:"#64748b",paddingRight:"10px"},children:"Place of Supply:"}),a.jsx("td",{children:a.jsx(f,{value:n.placeOfSupply,placeholder:"State"})})]})]})})]})]})]})}):a.jsxs("div",{className:"flex flex-col gap-6 mb-8 border-b-2 border-slate-900 pb-6",children:[u==="center"&&a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx(h,{})}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-6 md:gap-0",children:[a.jsxs("div",{children:[u==="left"&&a.jsx("div",{className:"mb-4",children:a.jsx(h,{})}),a.jsx("h1",{className:"text-2xl font-bold uppercase tracking-wider mb-4",style:{color:o.headingColor},children:n.invoiceTitle||"Invoice"}),a.jsxs("div",{className:"mt-4 text-sm",children:[a.jsx("h2",{className:"font-bold text-lg",children:a.jsx(f,{value:n.sellerName,placeholder:"[Your Company Name]"})}),a.jsx("div",{className:"text-slate-600 max-w-[250px] whitespace-pre-wrap",children:a.jsx(f,{value:n.sellerAddress,placeholder:"[Full Address]"})}),n.sellerTaxId&&a.jsxs("div",{className:"mt-1",children:[a.jsx("span",{className:"font-bold text-xs uppercase",children:"GSTIN/Tax ID:"})," ",n.sellerTaxId]}),a.jsxs("div",{className:"mt-1 text-xs",children:[n.sellerEmail&&a.jsx("div",{children:n.sellerEmail}),n.sellerPhone&&a.jsx("div",{children:n.sellerPhone})]})]})]}),a.jsxs("div",{className:"text-right flex flex-col items-end",children:[u==="right"&&a.jsx("div",{className:"mb-4",children:a.jsx(h,{})}),a.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-100 text-sm min-w-[200px]",children:[a.jsxs("div",{className:"flex justify-between mb-1 gap-4",children:[a.jsx("span",{className:"text-slate-500 font-bold",children:"Invoice #:"}),a.jsx(f,{value:n.invoiceNumber,placeholder:"INV-0001",className:"font-mono"})]}),a.jsxs("div",{className:"flex justify-between mb-1 gap-4",children:[a.jsx("span",{className:"text-slate-500 font-bold",children:"Date:"}),a.jsx(f,{value:n.invoiceDate,placeholder:"DD/MM/YYYY"})]}),a.jsxs("div",{className:"flex justify-between mb-1 gap-4",children:[a.jsx("span",{className:"text-slate-500 font-bold",children:"Due Date:"}),a.jsx(f,{value:n.dueDate,placeholder:"DD/MM/YYYY"})]}),a.jsxs("div",{className:"flex justify-between gap-4",children:[a.jsx("span",{className:"text-slate-500 font-bold",children:"Place of Supply:"}),a.jsx(f,{value:n.placeOfSupply,placeholder:"State"})]})]})]})]})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("p",{className:"text-xs uppercase font-bold text-slate-400 mb-1",children:"Bill To"}),a.jsx("div",{className:"text-lg font-bold",children:a.jsx(f,{value:n.clientName,placeholder:"[Client Name]"})}),a.jsx("div",{className:"text-slate-600 max-w-[300px] whitespace-pre-wrap",children:a.jsx(f,{value:n.clientAddress,placeholder:"[Client Address]"})}),n.clientTaxId&&a.jsxs("div",{className:"mt-1 text-sm",children:[a.jsx("span",{className:"font-semibold",children:"GSTIN/Tax ID:"})," ",n.clientTaxId]})]}),a.jsx("div",{className:"mb-8",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{className:"bg-slate-800 text-white uppercase text-xs",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left w-12",children:"Sr."}),a.jsx("th",{className:"px-3 py-2 text-left",children:"Description"}),a.jsx("th",{className:"px-3 py-2 text-center w-20",children:"Qty"}),a.jsx("th",{className:"px-3 py-2 text-right w-24",children:"Rate"}),a.jsx("th",{className:"px-3 py-2 text-right w-32",children:"Amount"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-200 border-b border-slate-200",children:n.items.map((x,y)=>a.jsxs("tr",{className:"even:bg-slate-50",children:[a.jsx("td",{className:"px-3 py-2 text-slate-500",children:y+1}),a.jsx("td",{className:"px-3 py-2 font-medium",children:x.description}),a.jsx("td",{className:"px-3 py-2 text-center",children:x.quantity}),a.jsx("td",{className:"px-3 py-2 text-right",children:Number(x.rate).toLocaleString()}),a.jsx("td",{className:"px-3 py-2 text-right font-bold",children:Number(x.amount).toLocaleString()})]},y))})]})}),s?a.jsx("table",{style:{width:"100%",marginBottom:"20px"},children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{style:{width:"50%"}})," ",a.jsx("td",{style:{width:"50%"},children:a.jsx("table",{className:"w-full text-sm",children:a.jsxs("tbody",{className:"divide-y divide-slate-100",children:[a.jsxs("tr",{children:[a.jsx("td",{className:"py-2 text-slate-600 font-medium",children:"Subtotal"}),a.jsx("td",{className:"py-2 text-right font-bold",children:e.subtotal.toLocaleString()})]}),n.taxType&&Number(n.taxRate)>0&&a.jsxs("tr",{children:[a.jsxs("td",{className:"py-2 text-slate-600 font-medium",children:[n.taxType," (",n.taxRate,"%)"]}),a.jsx("td",{className:"py-2 text-right font-bold",children:e.taxAmount.toLocaleString()})]}),a.jsxs("tr",{className:"border-t-2 border-slate-800 text-base",children:[a.jsx("td",{className:"py-2 font-extrabold text-slate-900",children:"Total"}),a.jsx("td",{className:"py-2 text-right font-extrabold text-indigo-700",children:e.grandTotal.toLocaleString()})]})]})})})]}),a.jsxs("tr",{children:[a.jsx("td",{style:{width:"50%"}}),a.jsxs("td",{style:{width:"50%",textAlign:"right",fontSize:"10px",fontStyle:"italic",color:"#64748b"},children:["Amount in Words: ",a.jsx("span",{className:"font-semibold text-slate-700",children:e.amountInWords})]})]})]})}):a.jsx("div",{className:"flex justify-end mb-8 break-inside-avoid",children:a.jsxs("div",{className:"w-[300px]",children:[a.jsx("table",{className:"w-full text-sm",children:a.jsxs("tbody",{className:"divide-y divide-slate-100",children:[a.jsxs("tr",{children:[a.jsx("td",{className:"py-2 text-slate-600 font-medium",children:"Subtotal"}),a.jsx("td",{className:"py-2 text-right font-bold",children:e.subtotal.toLocaleString()})]}),n.taxType&&Number(n.taxRate)>0&&a.jsxs("tr",{children:[a.jsxs("td",{className:"py-2 text-slate-600 font-medium",children:[n.taxType," (",n.taxRate,"%)"]}),a.jsx("td",{className:"py-2 text-right font-bold",children:e.taxAmount.toLocaleString()})]}),a.jsxs("tr",{className:"border-t-2 border-slate-800 text-base",children:[a.jsx("td",{className:"py-2 font-extrabold text-slate-900",children:"Total"}),a.jsx("td",{className:"py-2 text-right font-extrabold text-indigo-700",children:e.grandTotal.toLocaleString()})]})]})}),a.jsxs("div",{className:"mt-2 text-right text-xs text-slate-500 italic border-t border-slate-100 pt-1",children:["Amount in Words: ",a.jsx("span",{className:"font-semibold text-slate-700",children:e.amountInWords})]})]})}),s?a.jsx("div",{className:"mt-4 pt-4 border-t border-slate-200",style:{breakInside:"avoid"},children:a.jsx("table",{style:{width:"100%"},children:a.jsx("tbody",{children:a.jsxs("tr",{children:[a.jsxs("td",{style:{verticalAlign:"top",width:"60%"},children:[a.jsx("p",{className:"font-bold uppercase text-xs text-slate-400 mb-2",children:"Bank Details"}),a.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-100",style:{fontSize:"12px"},children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Account Name:"})," ",n.accountName||"-"]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Bank Name:"})," ",n.bankName||"-"]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Account No.:"})," ",n.accountNumber||"-"]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"IFSC/SWIFT:"})," ",n.ifscCode||"-"]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("p",{className:"font-bold uppercase text-xs text-slate-400 mb-1",children:"Terms"}),a.jsx("p",{className:"text-xs text-slate-500",children:n.notes})]})]}),a.jsxs("td",{style:{verticalAlign:"bottom",width:"40%",textAlign:"right"},children:[a.jsxs("p",{className:"font-bold text-sm text-slate-900 mb-4",children:["For ",n.sellerName||"[Company Name]"]}),a.jsx("table",{style:{width:"100%"},children:a.jsx("tbody",{children:a.jsx("tr",{children:a.jsxs("td",{style:{borderTop:"1px solid #94a3b8",paddingTop:"8px",textAlign:"center"},children:[a.jsx("p",{className:"font-bold",children:n.signatoryName||"Authorized Signatory"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Authorized Signature"})]})})})})]})]})})})}):a.jsxs("div",{className:"mt-auto grid grid-cols-2 gap-12 border-t border-slate-200 pt-8 break-inside-avoid",children:[a.jsxs("div",{className:"text-sm",children:[a.jsx("p",{className:"font-bold uppercase text-xs text-slate-400 mb-2",children:"Bank Details"}),a.jsx("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-100",children:a.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-1 text-slate-700",children:[a.jsx("span",{className:"font-semibold",children:"Account Name:"})," ",a.jsx("span",{children:n.accountName||"-"}),a.jsx("span",{className:"font-semibold",children:"Bank Name:"})," ",a.jsx("span",{children:n.bankName||"-"}),a.jsx("span",{className:"font-semibold",children:"Account No.:"})," ",a.jsx("span",{className:"font-mono",children:n.accountNumber||"-"}),a.jsx("span",{className:"font-semibold",children:"IFSC/SWIFT:"})," ",a.jsx("span",{className:"font-mono",children:n.ifscCode||"-"})]})}),a.jsxs("div",{className:"mt-4",children:[a.jsx("p",{className:"font-bold uppercase text-xs text-slate-400 mb-1",children:"Terms"}),a.jsx("p",{className:"text-xs text-slate-500",children:n.notes})]})]}),a.jsxs("div",{className:"text-right flex flex-col items-end",children:[a.jsxs("p",{className:"font-bold text-sm text-slate-900 mb-16",children:["For ",n.sellerName||"[Company Name]"]}),a.jsxs("div",{className:"border-t border-slate-400 w-48 pt-2 text-center",children:[a.jsx("p",{className:"font-bold",children:n.signatoryName||"Authorized Signatory"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Authorized Signature"})]})]})]}),!s&&a.jsx("div",{className:"mt-8 pt-4 text-center border-t border-transparent",children:a.jsx("p",{className:"text-[9px] text-slate-300 uppercase tracking-widest font-sans",children:"Powered by DocForge"})})]})]})}const PT=()=>{const n=ts(),{id:e}=Wo(),t=zd("(min-width: 1024px)"),[s,i]=_.useState("edit"),[r,o]=_.useState(1),[c,u]=_.useState(!1),[h,f]=_.useState("Untitled Invoice"),[g,x]=_.useState(!1),[y,N]=_.useState(null),j=ht.useRef(null),[E,A]=_.useState({invoiceTitle:"INVOICE",invoiceNumber:"",invoiceDate:new Date().toLocaleDateString(),dueDate:new Date(Date.now()+360*60*60*1e3).toLocaleDateString(),placeOfSupply:"State/Country",logoSize:60,logoAlignment:"left",brandingEnabled:!0,sellerName:"",sellerAddress:"",sellerTaxId:"",sellerEmail:"",sellerPhone:"",clientName:"",clientAddress:"",clientTaxId:"",items:[{description:"Web Development Services",quantity:1,rate:5e3,amount:5e3}],taxType:"GST",taxRate:18,accountName:"",bankName:"",accountNumber:"",ifscCode:"",notes:"This invoice is generated electronically and does not require a physical signature.",disputeDays:"7",signatoryName:""}),[R,M]=_.useState({subtotal:0,taxAmount:0,grandTotal:0,amountInWords:"Zero Only"}),{styles:L,updateStyle:z,resetStyles:W}=Sg(),I=ht.useDeferredValue(E),Y=ht.useDeferredValue(R);_.useEffect(()=>{e&&U(e)},[e]);const U=async Fe=>{try{const nt=await yg(Fe);nt.data.name&&f(nt.data.name),nt.data.sent_at&&Oe(nt.data.sent_at);let Ye=nt.data.content||{};if(typeof Ye=="string")try{Ye=JSON.parse(Ye)}catch(ot){console.error(ot)}Ye.formData&&A(ot=>({...ot,...Ye.formData})),Ye.styles&&Object.entries(Ye.styles).forEach(([ot,St])=>z(ot,St))}catch(nt){console.error("Failed to load invoice",nt)}};_.useEffect(()=>{if(!e){const Fe=async()=>{try{const Ye=await Rr();Ye&&A(ot=>({...ot,sellerName:Ye.name||"",sellerAddress:[Ye.address,Ye.city,Ye.state,Ye.country,Ye.zip].filter(Boolean).join(", "),sellerEmail:Ye.email||"",sellerPhone:Ye.phone||"",taxType:Ye.tax_label||"Tax",taxRate:Ye.tax_percentage||0,businessLogo:Ye.logo||null,currencySymbol:Ye.currency_symbol||"$"}))}catch(Ye){console.error("Failed to load business details",Ye)}},nt=async()=>{try{const Ye=await TQ();Ye&&Ye.next_number&&(A(ot=>({...ot,invoiceNumber:Ye.next_number})),f(`Invoice #${Ye.next_number}`))}catch(Ye){console.error("Failed to fetch next invoice number",Ye),A(ot=>({...ot,invoiceNumber:"INV-0001"})),f("Invoice #INV-0001")}};Fe(),nt()}},[e]),_.useEffect(()=>{const Fe=E.items.reduce((ot,St)=>ot+(Number(St.amount)||0),0),nt=Fe*Number(E.taxRate)/100,Ye=Fe+nt;M({subtotal:Fe,taxAmount:nt,grandTotal:Ye,amountInWords:`${Ye.toLocaleString()} Only`})},[E.items,E.taxRate]);const Z=Fe=>{const{name:nt,value:Ye}=Fe.target;A(ot=>({...ot,[nt]:Ye})),nt==="invoiceNumber"&&f(`Invoice #${Ye}`)},$=(Fe,nt,Ye)=>{const ot=[...E.items];if(ot[Fe][nt]=Ye,nt==="quantity"||nt==="rate"){const St=Number(nt==="quantity"?Ye:ot[Fe].quantity)||0,Pt=Number(nt==="rate"?Ye:ot[Fe].rate)||0;ot[Fe].amount=St*Pt}A(St=>({...St,items:ot}))},ae=()=>{A(Fe=>({...Fe,items:[...Fe.items,{description:"",quantity:1,rate:0,amount:0}]}))},xe=Fe=>{E.items.length<=1||A(nt=>({...nt,items:nt.items.filter((Ye,ot)=>ot!==Fe)}))},fe=()=>n("/documents"),ke=()=>o(Fe=>Math.min(Fe+.1,1.5)),G=()=>o(Fe=>Math.max(Fe-.1,.5)),X=async()=>{u(!0);try{const Fe={name:`Invoice #${E.invoiceNumber}`||"Untitled Invoice",type_slug:"invoice",content:{formData:E,styles:L},status:"draft"};if(e)await vg(e,Fe),Te.success("Invoice updated successfully");else{const nt=await dx(Fe);Te.success("Invoice created successfully"),n(`/documents/invoice/${nt.data.id}`,{replace:!0})}}catch(Fe){console.error("Failed to save",Fe),Te.error("Failed to save invoice")}finally{setTimeout(()=>u(!1),500)}},[se,ee]=_.useState(!1),ne=ht.useRef(null),[V,re]=_.useState(null),ge=async Fe=>{try{if(Fe&&Fe.includes("/storage/")){const ot=`http://localhost:8000/api/v1/file-proxy?path=${encodeURIComponent(Fe)}`,Pt=await(await fetch(ot)).blob();return new Promise((qe,Ze)=>{const Xe=new FileReader;Xe.onloadend=()=>qe(Xe.result),Xe.onerror=Ze,Xe.readAsDataURL(Pt)})}const Ye=await(await fetch(Fe)).blob();return new Promise((ot,St)=>{const Pt=new FileReader;Pt.onloadend=()=>ot(Pt.result),Pt.onerror=St,Pt.readAsDataURL(Ye)})}catch(nt){return console.error("Failed to convert image to base64",nt),null}},Ne=async()=>{if(!e){Te.error("Please save the document before printing.");return}const Fe=JSON.stringify({formData:E,totals:R});if(V&&ne.current===Fe){window.open(V,"_blank");return}ee(!0);try{let nt=E.businessLogo;if(E.businessLogo&&!E.businessLogo.startsWith("data:")){const Pt=await ge(E.businessLogo);Pt&&(nt=Pt)}const Ye={...E,businessLogo:nt},ot=_l.renderToStaticMarkup(a.jsx(bm,{data:Ye,totals:R,zoom:1,printing:!0,styles:L})),St=await ir(e,ot,E.invoiceNumber?`Invoice #${E.invoiceNumber}`:"Invoice");St.url&&(re(St.url),ne.current=Fe,window.open(St.url,"_blank"))}catch(nt){console.error("PDF Generation failed",nt),Te.error("Failed to generate PDF")}finally{ee(!1)}},[Ce,We]=_.useState(!1),[Ge,Oe]=_.useState(null),$e=()=>{if(!e){Te.error("Please save the document before sending.");return}We(!0)},Le=Fe=>{Fe&&Fe.sent_at&&Oe(Fe.sent_at)},[pe,je]=_.useState(!1),Se=async()=>{if(!e){Te.error("Please save the document before exporting.");return}je(!0);try{let Fe=E.businessLogo;if(E.businessLogo&&!E.businessLogo.startsWith("data:")){const St=await ge(E.businessLogo);St&&(Fe=St)}const nt={...E,businessLogo:Fe},Ye=_l.renderToStaticMarkup(a.jsx(bm,{data:nt,totals:R,zoom:1,printing:!0})),ot=await ir(e,Ye,E.invoiceNumber?`Invoice #${E.invoiceNumber}`:"Invoice");if(ot.url){const St=document.createElement("a");St.href=ot.url,St.download=`${(E.invoiceNumber?`Invoice_${E.invoiceNumber}`:"Invoice").replace(/[^a-z0-9]/gi,"_")}.pdf`,document.body.appendChild(St),St.click(),document.body.removeChild(St),Te.success("Invoice exported successfully")}}catch(Fe){console.error("Export failed",Fe),Te.error("Failed to export invoice")}finally{je(!1)}},Je=Fe=>{j.current||(j.current={formData:E});let nt=Fe.content;if(typeof nt=="string")try{nt=JSON.parse(nt)}catch{}nt.formData&&A(nt.formData),N(Fe),x(!1),Te.success(`Previewing Version ${Fe.version_number}`)},lt=()=>{j.current&&(A(j.current.formData),j.current=null),N(null),Te.success("Exited preview mode")},ct=async Fe=>{const nt=Te.loading("Preparing version PDF...");try{let Ye=Fe.content;if(typeof Ye=="string")try{Ye=JSON.parse(Ye)}catch{}const ot=Ye.formData||E,St=(ot.items||[]).reduce((Et,Ot)=>Et+(Number(Ot.amount)||0),0),Pt=St*Number(ot.taxRate)/100,qe=St+Pt,Ze={subtotal:St,taxAmount:Pt,grandTotal:qe,amountInWords:`${qe.toLocaleString()} Only`},Xe=_l.renderToStaticMarkup(a.jsx(bm,{data:ot,totals:Ze,zoom:1,printing:!0})),yt=await ir(e,Xe,`${h} - v${Fe.version_number}`);if(yt.url){const Et=document.createElement("a");Et.href=yt.url,Et.download=`${h.replace(/[^a-z0-9]/gi,"_")}_v${Fe.version_number}.pdf`,document.body.appendChild(Et),Et.click(),document.body.removeChild(Et),Te.success(`Version ${Fe.version_number} downloaded`,{id:nt})}}catch(Ye){console.error("Version download failed",Ye),Te.error("Failed to download version PDF",{id:nt})}};return a.jsxs("div",{className:"flex flex-col h-screen bg-slate-50",children:[y&&a.jsxs("div",{className:"bg-amber-100 border-b border-amber-200 px-4 py-2 flex items-center justify-between text-amber-800 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_r,{size:16}),a.jsxs("span",{className:"font-medium",children:["Previewing Version ",y.version_number]}),a.jsxs("span",{className:"text-amber-600 hidden md:inline",children:["(",new Date(y.created_at).toLocaleString(),")"]})]}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("button",{onClick:lt,className:"text-amber-700 hover:text-amber-900 font-medium hover:underline flex items-center gap-1",children:[a.jsx(bs,{size:14})," Exit Preview"]})})]}),se&&a.jsx(wP,{children:a.jsx(bm,{data:E,totals:R,zoom:1})}),a.jsx(hx,{isOpen:Ce,onClose:()=>We(!1),documentId:e,documentName:`Invoice #${E.invoiceNumber}`,isReminder:!!Ge,onSuccess:Le,getHtmlContent:async()=>{let Fe=E.businessLogo;if(E.businessLogo&&!E.businessLogo.startsWith("data:")){const ot=await ge(E.businessLogo);ot&&(Fe=ot)}const nt={...E,businessLogo:Fe},Ye=_l.renderToStaticMarkup(a.jsx(bm,{data:nt,totals:R,zoom:1,printing:!0}));return PN(Ye,`Invoice #${E.invoiceNumber}`)}}),a.jsxs("header",{className:"no-print h-16 bg-white/80 backdrop-blur-md border-b border-slate-200/60 px-4 md:px-6 flex items-center justify-between sticky top-0 z-30 shadow-sm transition-all duration-300",children:[a.jsxs("div",{className:"flex items-center gap-2 md:gap-4 overflow-hidden",children:[a.jsx("button",{onClick:fe,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors flex-shrink-0",title:"Back to Documents",children:a.jsx(Ia,{size:20})}),a.jsxs("div",{className:"min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h1",{className:"font-bold text-slate-800 text-sm md:text-lg truncate",children:"Service Invoice"}),Ge&&a.jsxs("span",{className:"hidden lg:inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-emerald-50 text-emerald-600 text-[10px] font-medium border border-emerald-100",children:[a.jsx(fi,{size:10})," Sent"]})]}),a.jsxs("p",{className:"text-[10px] md:text-xs text-slate-400 font-medium whitespace-nowrap hidden sm:block",children:["#",E.invoiceNumber]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[a.jsxs("div",{className:"hidden lg:flex items-center bg-slate-100 rounded-lg p-1 mr-4",children:[a.jsx("button",{onClick:G,className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-slate-500 transition-all",children:a.jsx(Yo,{size:16})}),a.jsxs("span",{className:"text-xs font-semibold text-slate-600 w-12 text-center",children:[Math.round(r*100),"%"]}),a.jsx("button",{onClick:ke,className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-slate-500 transition-all",children:a.jsx(Go,{size:16})})]}),a.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 p-2 md:px-4 md:py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all",children:[a.jsx(la,{size:18}),a.jsx("span",{className:"hidden lg:inline",children:"History"})]}),a.jsxs("button",{onClick:Ne,className:"hidden md:flex items-center gap-2 p-2 md:px-4 md:py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all",children:[a.jsx(yf,{size:18}),a.jsx("span",{className:"hidden lg:inline",children:"Print"})]}),a.jsxs("button",{onClick:$e,className:`flex items-center gap-2 px-2 md:px-4 py-2 text-sm font-medium rounded-lg border border-transparent transition-all ${Ge?"text-amber-600 hover:bg-amber-50 hover:border-amber-200":"text-slate-600 hover:bg-slate-50 hover:border-slate-200"}`,children:[Ge?a.jsx(Pl,{size:18}):a.jsx(Js,{size:18}),a.jsx("span",{className:"hidden lg:inline",children:Ge?"Remind":"Send"})]}),a.jsxs("button",{onClick:Se,disabled:pe,className:"flex items-center gap-2 px-2 md:px-4 py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all disabled:opacity-50",children:[pe?a.jsx(Sn,{size:18,className:"animate-spin"}):a.jsx(Yi,{size:18}),a.jsx("span",{className:"hidden lg:inline",children:pe?"Exporting...":"Export"})]}),a.jsxs("button",{onClick:X,className:`flex items-center gap-2 px-3 md:px-5 py-2 rounded-lg text-white font-medium shadow-md transition-all ${c?"bg-emerald-500":"bg-indigo-600 hover:bg-indigo-700"}`,children:[c?a.jsx(fi,{size:18}):a.jsx(Xi,{size:18}),a.jsx("span",{className:"hidden md:inline",children:c?"Saved!":"Save"})]})]})]}),!t&&a.jsxs("div",{className:"flex bg-white border-b border-slate-200 px-4",children:[a.jsx("button",{onClick:()=>i("edit"),className:`flex-1 py-3 text-sm font-medium border-b-2 transition-colors ${s==="edit"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Edit"}),a.jsx("button",{onClick:()=>i("preview"),className:`flex-1 py-3 text-sm font-medium border-b-2 transition-colors ${s==="preview"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Preview"})]}),a.jsxs("div",{className:"flex flex-col lg:flex-row flex-1 overflow-hidden relative",children:[a.jsx("div",{className:`
                    no-print w-full lg:w-[400px] h-full bg-white border-b lg:border-b-0 lg:border-r border-slate-200 
                    overflow-y-auto z-20 shadow-sm flex-shrink-0 lg:order-1
                    ${t||s==="edit"?"block":"hidden"}
                `,children:a.jsx(pJ,{formData:E,onChange:Z,updateItem:$,addItem:ae,removeItem:xe,totals:R,styles:L,onStyleUpdate:z,onStyleReset:W})}),a.jsx("div",{className:`
                    flex-1 h-full overflow-y-auto bg-slate-50/50 p-4 md:p-8 sm:p-12 
                    flex justify-center items-start scrollbar-thin scrollbar-thumb-slate-300 lg:order-2
                    ${t||s==="preview"?"flex":"hidden"}
                `,style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"20px 20px"},children:a.jsx(bm,{data:I,totals:Y,zoom:r,styles:L})})]}),a.jsx(ux,{documentId:e,isOpen:g,onClose:()=>x(!1),onPreview:Je,onDownload:ct,onRestore:Fe=>{if(Fe&&Fe.content){let nt=Fe.content;if(typeof nt=="string")try{nt=JSON.parse(nt)}catch{}nt.formData&&A(nt.formData)}N(null),j.current=null}})]})},xJ=({formData:n,onChange:e,docContent:t,onContentChange:s,addSection:i,removeSection:r,updateSection:o,reorderSections:c,styles:u,onStyleUpdate:h,onStyleReset:f})=>{const[g,x]=_.useState("parties"),[y,N]=_.useState("fill"),[j,E]=_.useState({isOpen:!1,sectionId:null}),A=U=>{x(g===U?null:U)},R=n.effectiveDateDay&&n.effectiveDateMonth&&n.effectiveDateYear,M=n.employerName&&n.candidateName,L=n.position&&n.startDate&&n.salary,z=n.employerSignatoryName,W=U=>{E({isOpen:!0,sectionId:U})},I=()=>{j.sectionId&&(r(j.sectionId),E({isOpen:!1,sectionId:null}))},Y=async()=>{try{const U=await Rr();if(U){e({target:{name:"employerName",value:U.name||""}});const Z=[U.address,U.city,U.state,U.country].filter(Boolean).join(", ");e({target:{name:"employerAddress",value:Z||""}}),Te.success("Business details populated")}else Te.error("No business profile found")}catch(U){console.error("Failed to fetch business info",U),Te.error("Failed to load business info")}};return a.jsxs("div",{className:"bg-white min-h-full pb-20 relative",children:[a.jsx(Mv,{isOpen:j.isOpen,onClose:()=>E({isOpen:!1,sectionId:null}),onConfirm:I,title:"Delete Section",message:"Are you sure you want to remove this section? This action cannot be undone.",confirmText:"Delete Section",isDestructive:!0}),a.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 sticky top-0 z-10 backdrop-blur-sm",children:[a.jsxs("div",{className:"flex gap-1 bg-slate-200/50 p-1 rounded-lg mb-4",children:[a.jsx("button",{onClick:()=>N("fill"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${y==="fill"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,children:a.jsx($0,{size:16})}),a.jsx("button",{onClick:()=>N("edit"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${y==="edit"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,title:"Structure",children:a.jsx(ex,{size:16})}),a.jsx("button",{onClick:()=>N("style"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${y==="style"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,title:"Appearance",children:a.jsx(Ol,{size:16})})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-slate-900",children:y==="fill"?"Offer Letter Details":y==="edit"?"Structure Builder":"Styling & Appearance"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:y==="fill"?"Enter candidate and job details":y==="edit"?"Customize letter layout":"Fonts, colors and spacing"})]})]}),y==="fill"&&a.jsxs(a.Fragment,{children:[a.jsx(Pa,{title:"Letter Date",icon:Ld,isOpen:g==="date",isComplete:R,onClick:()=>A("date"),children:a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsx(Yt,{label:"Day",name:"effectiveDateDay",value:n.effectiveDateDay,onChange:e,placeholder:"DD"}),a.jsx(Yt,{label:"Month",name:"effectiveDateMonth",value:n.effectiveDateMonth,onChange:e,placeholder:"Month"}),a.jsx(Yt,{label:"Year",name:"effectiveDateYear",value:n.effectiveDateYear,onChange:e,placeholder:"YY"})]})}),a.jsx(Pa,{title:"Parties Involved",icon:Ai,isOpen:g==="parties",isComplete:M,onClick:()=>A("parties"),children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-3 bg-indigo-50 rounded-lg border border-indigo-100",children:[a.jsxs("h4",{className:"text-xs font-bold text-indigo-900 uppercase mb-3 flex items-center justify-between",children:[a.jsx("span",{className:"flex items-center gap-2",children:"Employer"}),a.jsxs("button",{onClick:Y,className:"text-[10px] bg-white border border-indigo-200 text-indigo-600 px-2 py-1 rounded hover:bg-indigo-50 transition-colors flex items-center gap-1",children:[a.jsx(Od,{size:10})," Use Profile"]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Yt,{label:"Company Name",name:"employerName",value:n.employerName,onChange:e,placeholder:"Acme Inc."}),a.jsx(Yt,{label:"Full Address",name:"employerAddress",value:n.employerAddress,onChange:e,placeholder:"Standard Address",rows:2})]})]}),a.jsxs("div",{className:"p-3 bg-emerald-50 rounded-lg border border-emerald-100",children:[a.jsx("h4",{className:"text-xs font-bold text-emerald-900 uppercase mb-3",children:"Candidate"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Yt,{label:"Candidate Name",name:"candidateName",value:n.candidateName,onChange:e,placeholder:"John Doe"}),a.jsx(Yt,{label:"Current Address",name:"candidateAddress",value:n.candidateAddress,onChange:e,placeholder:"Candidate Address",rows:2})]})]})]})}),a.jsx(Pa,{title:"Position Details",icon:ug,isOpen:g==="position",isComplete:L,onClick:()=>A("position"),children:a.jsxs("div",{className:"space-y-3",children:[a.jsx(Yt,{label:"Job Title",name:"position",value:n.position,onChange:e,placeholder:"Senior Developer"}),a.jsx(Yt,{label:"Reports To",name:"managerName",value:n.managerName,onChange:e,placeholder:"CTO"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(Yt,{label:"Start Date",name:"startDate",value:n.startDate,onChange:e,placeholder:"Jan 1, 2026"}),a.jsx(Yt,{label:"Salary",name:"salary",value:n.salary,onChange:e,placeholder:"$120,000"})]})]})}),a.jsx(Pa,{title:"Document Branding",icon:Df,isOpen:g==="branding",isComplete:!0,onClick:()=>A("branding"),children:a.jsx(cx,{formData:n,onChange:e})}),a.jsx(Pa,{title:"Signatories",icon:ar,isOpen:g==="signatures",isComplete:z,onClick:()=>A("signatures"),children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-400 mb-2 uppercase",children:"For Employer"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(Yt,{label:"Name",name:"employerSignatoryName",value:n.employerSignatoryName,onChange:e,placeholder:"Hiring Manager"}),a.jsx(Yt,{label:"Title",name:"employerSignatoryTitle",value:n.employerSignatoryTitle,onChange:e,placeholder:"HR Director"})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-400 mb-2 uppercase",children:"For Candidate"}),a.jsxs("div",{className:"p-2 bg-slate-50 text-slate-500 text-xs rounded border border-slate-100",children:["Candidate Name will be used for signature block: ",a.jsx("strong",{children:n.candidateName||"(Enter Candidate Name)"})]})]})]})})]}),y==="edit"&&a.jsxs("div",{className:"p-4 space-y-6 pb-20",children:[a.jsx(jf,{isFixed:!0,section:{title:"Letter Header"},onUpdate:()=>{},children:a.jsx("div",{className:"space-y-3 mt-3",children:a.jsx("textarea",{name:"partiesDisclosing",value:t.partiesDisclosing||"",onChange:s,rows:3,className:"w-full text-xs p-3 rounded-lg border border-slate-200 bg-slate-50 resize-y",placeholder:"Recipient Address Block..."})})}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-[7px] top-[-24px] bottom-0 w-[2px] bg-slate-100"}),a.jsx("p",{className:"font-bold text-[10px] uppercase tracking-widest text-slate-400 pl-8 mb-4",children:"Body Sections"}),a.jsx(dv,{axis:"y",values:t.sections,onReorder:c,className:"space-y-0",children:t.sections.map(U=>a.jsx(uv,{value:U,className:"relative mb-2",children:a.jsx(jf,{section:U,onUpdate:(Z,$)=>o(U.id,Z,$),onRemove:()=>W(U.id),placeholderTitle:"Section Title",placeholderContent:"Body text..."})},U.id))}),a.jsx(Dv,{onClick:i})]})]}),y==="style"&&a.jsx("div",{className:"p-4 pb-20",children:a.jsx(Rv,{styles:u,onUpdate:h,onReset:f})})]})};function X2({data:n,content:e,zoom:t=1,printing:s=!1,readOnly:i=!1,signatures:r=[],onUpdateSignature:o,onRemoveSignature:c,onEditSignature:u,businessLogo:h,styles:f}){const g=A=>{if(!A)return"bg-slate-100 text-slate-600 border-slate-200";const R=["bg-indigo-50 text-indigo-700 border-indigo-200","bg-emerald-50 text-emerald-700 border-emerald-200","bg-amber-50 text-amber-700 border-amber-200","bg-rose-50 text-rose-700 border-rose-200","bg-violet-50 text-violet-700 border-violet-200","bg-sky-50 text-sky-700 border-sky-200"];let M=0;for(let L=0;L<A.length;L++)M=A.charCodeAt(L)+((M<<5)-M);return R[Math.abs(M)%R.length]},x=({value:A,placeholder:R,name:M,className:L=""})=>{const z=g(M);return A?i||s?a.jsx("span",{className:`font-medium text-slate-900 ${L}`,children:A}):a.jsx("span",{className:`px-1.5 py-0.5 rounded border ${z} font-medium mx-0.5 transition-all hover:brightness-95 ${L}`,children:A}):i||s?a.jsx("span",{className:`text-slate-500 italic ${L}`,children:R}):a.jsx("span",{className:`px-1.5 py-0.5 rounded border border-dashed ${z} bg-opacity-50 font-medium text-xs mx-0.5 ${L}`,children:R})},y=({template:A,values:R})=>{if(!A)return null;const M=A.split(/(\{\{[^}]+\}\})/g);return a.jsx("span",{children:M.map((L,z)=>{if(L.startsWith("{{")&&L.endsWith("}}")){const W=L.slice(2,-2).trim(),I=R[W];return W.toLowerCase().includes("address")&&I?a.jsx("span",{className:"whitespace-pre-line",children:a.jsx(x,{value:I,name:W,placeholder:`[${W}]`})},z):a.jsx(x,{value:R[W],name:W,placeholder:`[${W}]`},z)}return a.jsx("span",{children:L},z)})})},N=s?"div":Ie.div,j=s?"div":Ie.section,E=f||{fontFamily:"font-sans",fontSize:"text-[11pt]",lineHeight:"leading-relaxed",textColor:"#1e293b",headingColor:"#0f172a",pageMargin:"p-[10mm]",paragraphSpacing:"mb-6"};return a.jsxs(N,{id:"printable-document",...s?{}:{initial:{opacity:0,y:20},animate:{opacity:1,y:0}},style:{transform:s?"none":`scale(${t})`,transformOrigin:"top center",color:E.textColor},className:`
                w-[210mm] min-h-[297mm] bg-white relative mb-20 origin-top 
                ${s?"":"shadow-[0_8px_30px_rgb(0,0,0,0.12)] border border-slate-200/60"}
                ${E.fontFamily} ${E.fontSize} ${E.lineHeight}
            `,children:[!s&&a.jsx("div",{className:"no-print absolute inset-0 rounded-sm pointer-events-none bg-gradient-to-b from-white to-slate-50/20"}),a.jsxs("div",{className:`${E.pageMargin} relative z-10`,children:[h&&n.brandingEnabled!==!1&&n.brandingEnabled!=="false"&&a.jsx("div",{className:`flex mb-8 ${n.logoAlignment==="left"?"justify-start":n.logoAlignment==="right"?"justify-end":"justify-center"}`,style:s?{textAlign:n.logoAlignment||"center"}:{},children:a.jsx("img",{src:h,alt:"Company Logo",style:{height:`${n.logoSize||70}px`,objectFit:"contain"}})})," ",a.jsxs("div",{className:"mb-8",children:[a.jsx("p",{className:`font-medium ${E.paragraphSpacing}`,children:a.jsx(y,{template:e.preamble,values:n})}),a.jsx("div",{className:`whitespace-pre-line ${E.paragraphSpacing}`,children:a.jsx(y,{template:e.partiesDisclosing,values:n})}),a.jsx("p",{className:`${E.paragraphSpacing}`,children:a.jsx(y,{template:e.partiesFooter,values:n})})]}),a.jsx("div",{className:`text-justify ${E.paragraphSpacing}`}),a.jsx("div",{className:"space-y-6 min-h-[100px]",children:a.jsx(dn,{mode:"popLayout",children:e.sections&&e.sections.map((A,R)=>a.jsxs(j,{className:E.paragraphSpacing,...s?{}:{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95}},children:[a.jsx("h2",{className:"font-bold text-sm uppercase mb-2",style:{color:E.headingColor},children:A.title}),a.jsx("p",{className:"text-justify",children:a.jsx(y,{template:A.content,values:n})})]},A.id))})}),a.jsxs("div",{className:"mt-12 break-inside-avoid",children:[a.jsx("p",{className:"mb-8",children:"Sincerely,"}),s?a.jsx("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"20px"},children:a.jsx("tbody",{children:a.jsxs("tr",{children:[a.jsxs("td",{style:{width:"48%",verticalAlign:"top",paddingRight:"2%"},children:[a.jsxs("p",{className:"font-bold uppercase text-xs tracking-wider mb-8",children:["For ",n.employerName||"The Company"]}),a.jsx("div",{className:"relative border-b border-slate-800 h-8 mb-2",style:{borderBottom:"1px solid #000",height:"40px",marginBottom:"10px"},children:n.employerSignatoryName&&a.jsx("span",{style:{fontFamily:"cursive",fontSize:"16pt",color:"#1e3a8a"},children:n.employerSignatoryName})}),a.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Authorized Signature"}),a.jsx("table",{style:{width:"100%",marginTop:"15px"},children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{style:{width:"60px",fontWeight:"bold",fontSize:"10pt"},children:"Name:"}),a.jsx("td",{style:{borderBottom:"1px solid #ccc"},children:n.employerSignatoryName})]}),a.jsxs("tr",{children:[a.jsx("td",{style:{paddingBottom:"5px"}}),a.jsx("td",{})]}),a.jsxs("tr",{children:[a.jsx("td",{style:{width:"60px",fontWeight:"bold",fontSize:"10pt"},children:"Title:"}),a.jsx("td",{style:{borderBottom:"1px solid #ccc"},children:n.employerSignatoryTitle})]})]})})]}),a.jsx("td",{style:{width:"4%"}}),a.jsxs("td",{style:{width:"48%",verticalAlign:"top"},children:[a.jsx("p",{className:"font-bold uppercase text-xs tracking-wider mb-8",children:"Accepted By"}),a.jsx("div",{className:"relative border-b border-slate-800 h-8 mb-2",style:{borderBottom:"1px solid #000",height:"40px",marginBottom:"10px"},children:n.candidateSignatoryName&&a.jsx("span",{style:{fontFamily:"cursive",fontSize:"16pt",color:"#1e3a8a"},children:n.candidateSignatoryName})}),a.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Candidate Signature"}),a.jsx("table",{style:{width:"100%",marginTop:"15px"},children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{style:{width:"60px",fontWeight:"bold",fontSize:"10pt"},children:"Name:"}),a.jsx("td",{style:{borderBottom:"1px solid #ccc"},children:n.candidateName})]}),a.jsxs("tr",{children:[a.jsx("td",{style:{paddingBottom:"5px"}}),a.jsx("td",{})]}),a.jsxs("tr",{children:[a.jsx("td",{style:{width:"60px",fontWeight:"bold",fontSize:"10pt"},children:"Date:"}),a.jsx("td",{style:{borderBottom:"1px solid #ccc"}})]})]})})]})]})})}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-16",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"font-bold uppercase text-xs tracking-wider mb-8",children:["For ",n.employerName||"The Company"]}),a.jsx("div",{className:"relative border-b border-slate-800 h-8 mb-2",children:n.employerSignatoryName&&a.jsx("span",{className:"absolute bottom-1 left-2 font-cursive text-xl text-blue-900 opacity-80 rotate-[-2deg]",children:n.employerSignatoryName})}),a.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Authorized Signature"}),a.jsxs("div",{className:"pt-4 grid grid-cols-[60px_1fr] gap-x-2 gap-y-1 items-baseline",children:[a.jsx("span",{className:"text-sm font-medium",children:"Name:"}),a.jsx("span",{className:"border-b border-slate-300 w-full inline-block h-5 pl-1",children:n.employerSignatoryName}),a.jsx("span",{className:"text-sm font-medium",children:"Title:"}),a.jsx("span",{className:"border-b border-slate-300 w-full inline-block h-5 pl-1",children:n.employerSignatoryTitle})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"font-bold uppercase text-xs tracking-wider mb-8",children:"Accepted By"}),a.jsx("div",{className:"relative border-b border-slate-800 h-8 mb-2",children:n.candidateSignatoryName&&a.jsx("span",{className:"absolute bottom-1 left-2 font-cursive text-xl text-blue-900 opacity-80 rotate-[-2deg]",children:n.candidateSignatoryName})}),a.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Candidate Signature"}),a.jsxs("div",{className:"pt-4 grid grid-cols-[60px_1fr] gap-x-2 gap-y-1 items-baseline",children:[a.jsx("span",{className:"text-sm font-medium",children:"Name:"}),a.jsx("span",{className:"border-b border-slate-300 w-full inline-block h-5 pl-1",children:n.candidateName}),a.jsx("span",{className:"text-sm font-medium",children:"Date:"}),a.jsx("span",{className:"border-b border-slate-300 w-full inline-block h-5 pl-1"})]})]})]})]}),!s&&a.jsx("div",{className:"absolute bottom-4 left-0 right-0 text-center",children:a.jsx("p",{className:"text-[9px] text-slate-300 uppercase tracking-widest font-sans",children:"Powered by DocForge"})})]})]})}const OT={title:"Employment Offer Letter",preamble:"{{effectiveDateDay}} {{effectiveDateMonth}}, 20{{effectiveDateYear}}",partiesDisclosing:`To,
{{candidateName}}
{{candidateAddress}}`,partiesReceiving:"",partiesFooter:"Dear {{candidateName}},",sections:[{id:"1",title:"Welcome",content:'We are pleased to offer you the position of {{position}} at {{employerName}} ("Company"). We believe your skills and experience are an excellent match for our company.'},{id:"2",title:"Position and Duties",content:"You will be working as {{position}}, reporting to {{managerName}}. Your start date will be {{startDate}}. Your primary duties will be those consistent with this position and as assigned by your manager."},{id:"3",title:"Compensation",content:"Your starting salary will be {{salary}} per year, payable in accordance with the Company's standard payroll schedule. This salary is subject to adjustment pursuant to the Company's employee compensation policies."},{id:"4",title:"Benefits",content:"You will be eligible to participate in the Company's standard employee benefit plans, including health insurance, vacation, and 401(k), provided to employees at your level."},{id:"5",title:"At-Will Employment",content:'Your employment with the Company is for no specified period and constitutes "at-will" employment. This means that either you or the Company may terminate the employment relationship at any time, with or without cause or notice.'},{id:"6",title:"Acceptance",content:"To accept this offer, please sign and date this letter below and return it to us by {{expirationDate}}."}]},LT={effectiveDateDay:"",effectiveDateMonth:"",effectiveDateYear:"",logoSize:80,logoAlignment:"left",brandingEnabled:!0,employerName:"",employerAddress:"",candidateName:"",candidateAddress:"",position:"",managerName:"",startDate:"",salary:"",expirationDate:"",employerSignatoryName:"",employerSignatoryTitle:"",candidateSignatoryName:""},bJ=n=>{const[e,t]=_.useState(LT),[s,i]=_.useState(OT),[r,o]=_.useState("Untitled Offer Letter"),[c,u]=_.useState(null),[h,f]=_.useState(!!n),[g,x]=_.useState(!1),{styles:y,updateStyle:N,resetStyles:j}=Sg(),E=_.useRef(null);_.useEffect(()=>{(async()=>{if(n)try{f(!0);const X=await yg(n);X.data.name&&o(X.data.name),X.data.sent_at&&u(X.data.sent_at);let se=X.data?.content||X.content;if(se){let ee=se;if(typeof ee=="string")try{ee=JSON.parse(ee)}catch(ne){console.error("Failed to parse document content JSON",ne)}ee=ee||{},t(ne=>({...ne,...ee.formData||LT})),i(ee.docContent||OT),ee.styles&&Object.entries(ee.styles).forEach(([ne,V])=>N(ne,V)),ee.signatures&&ae(ee.signatures)}}catch(X){console.error("Failed to load document",X),Te.error("Failed to load document")}finally{f(!1)}else try{const X=await Rr();X&&t(se=>({...se,employerName:X.name||"",employerAddress:[X.address,X.city,X.state,X.country].filter(Boolean).join(", ")}))}catch(X){console.error("Failed to load business details",X)}})()},[n]);const A=G=>{const{name:X,value:se}=G.target;t(ee=>({...ee,[X]:se}))},R=G=>{const{name:X,value:se}=G.target;i(ee=>({...ee,[X]:se}))},M=()=>{i(G=>({...G,sections:[...G.sections,{id:ch(),title:"New Section",content:"Enter the details of this new clause here..."}]}))},L=G=>{i(X=>({...X,sections:X.sections.filter(se=>se.id!==G)}))},z=(G,X,se)=>{i(ee=>({...ee,sections:ee.sections.map(ne=>ne.id===G?{...ne,[X]:se}:ne)}))},W=G=>{i(X=>({...X,sections:G}))},I=async G=>{x(!0);try{const se={name:r,type_slug:"offer-letter",content:{formData:e,docContent:s,styles:y,signatures:$},status:"draft"};if(n)return await vg(n,se),Te.success("Document updated successfully"),n;{const ee=await dx(se);return Te.success("Document created successfully"),G&&G(`/documents/offer-letter/${ee.data.id}`,{replace:!0}),ee.data.id}}catch(X){throw console.error("Failed to save",X),(!X.response||X.response.status!==422)&&Te.error("Failed to save document"),X}finally{setTimeout(()=>x(!1),500)}},Y=G=>{E.current||(E.current={formData:e,docContent:s});let X=G.content;if(typeof X=="string")try{X=JSON.parse(X)}catch{}return X.formData&&t(X.formData),X.docContent&&i(X.docContent),X},U=()=>{E.current&&(t(E.current.formData),i(E.current.docContent),E.current=null)},Z=G=>{if(G&&G.content){let X=G.content;if(typeof X=="string")try{X=JSON.parse(X)}catch{}X.formData&&t(X.formData),X.docContent&&i(X.docContent)}E.current=null},[$,ae]=_.useState([]);return{formData:e,docContent:s,signatures:$,documentName:r,setDocumentName:o,sentAt:c,setSentAt:u,isLoading:h,isSaving:g,handleFormChange:A,handleContentChange:R,addSection:M,removeSection:L,updateSection:z,reorderSections:W,addSignature:G=>{ae(X=>[...X,G])},updateSignature:(G,X)=>{ae(se=>se.map(ee=>ee.id===G?{...ee,...X}:ee))},removeSignature:G=>{ae(X=>X.filter(se=>se.id!==G))},saveDocument:I,enterPreviewMode:Y,exitPreviewMode:U,restoreVersion:Z,styles:y,updateStyle:N,resetStyles:j}},Iw=(n,e,t="Document",s=[],i=null)=>{const r=_l.renderToStaticMarkup(a.jsx(X2,{data:n,content:e,zoom:1,printing:!0,signatures:s,businessLogo:i}));return`
    <!DOCTYPE html>
    <html>
        <head>
            <meta charset="utf-8">
            <title>${t}</title>
            <style>
                * { box-sizing: border-box; }
                body { 
                    font-family: 'Times New Roman', serif; 
                    line-height: 1.5; 
                    color: #333; 
                    font-size: 11pt; 
                    margin: 0; 
                    padding: 40px; 
                }
                .text-center { text-align: center; }
                .uppercase { text-transform: uppercase; }
                .font-bold { font-weight: bold; }
                .text-sm { font-size: 10pt; }
                .text-xs { font-size: 9pt; }
                .text-justify { text-align: justify; }
                .mb-2 { margin-bottom: 0.5rem; }
                .mb-4 { margin-bottom: 1rem; }
                .mb-6 { margin-bottom: 1.5rem; }
                .mb-8 { margin-bottom: 2rem; }
                .mb-10 { margin-bottom: 2.5rem; }
                .pb-2 { padding-bottom: 0.5rem; }
                .mt-12 { margin-top: 3rem; }
                .border-b { border-bottom: 1px solid #000; }
                .border-b-2 { border-bottom: 2px solid #000; }
                
                @page { margin: 40px; }
                
                h1 { 
                    font-size: 16pt; 
                    text-transform: uppercase; 
                    border-bottom: 2px solid #000; 
                    padding-bottom: 10px; 
                    margin-bottom: 30px; 
                    text-align: center; 
                    font-weight: bold; 
                    letter-spacing: 2px; 
                }
                p { margin-bottom: 12px; }
                
                table { width: 100%; border-collapse: collapse; }
                td { vertical-align: top; }
                
                .font-cursive { font-family: cursive; font-style: italic; }
            </style>
        </head>
        <body>
            ${r}
        </body>
    </html>
    `},FT=()=>{const n=ts(),{id:e}=Wo(),t=zd("(min-width: 1024px)"),[s,i]=_.useState("edit"),[r,o]=_.useState(1),[c,u]=_.useState(!1),[h,f]=_.useState(!1),[g,x]=_.useState(!1),[y,N]=_.useState(!1),[j,E]=_.useState(!1),[A,R]=_.useState(null),[M,L]=_.useState(null),[z,W]=_.useState(null),[I,Y]=_.useState(null),{formData:U,docContent:Z,signatures:$,documentName:ae,setDocumentName:xe,sentAt:fe,setSentAt:ke,isLoading:G,isSaving:X,handleFormChange:se,handleContentChange:ee,addSection:ne,removeSection:V,updateSection:re,reorderSections:ge,addSignature:Ne,updateSignature:Ce,removeSignature:We,saveDocument:Ge,enterPreviewMode:Oe,exitPreviewMode:$e,restoreVersion:Le,styles:pe,updateStyle:je,resetStyles:Se}=bJ(e),[Je,lt]=_.useState({isOpen:!1,data:null}),ct=ht.useDeferredValue(U),Fe=ht.useDeferredValue(Z),nt=Id(Ha(Lc,{activationConstraint:{distance:8}}),Ha(Mf,{activationConstraint:{delay:250,tolerance:5}})),Ye=ht.useRef(null),ot=()=>n("/documents"),St=()=>o(et=>Math.min(et+.1,1.5)),Pt=()=>o(et=>Math.max(et-.1,.5)),qe=()=>{const et=U.candidateName?.trim();et?(xe(`Offer Letter - ${et}`),L(null),W(null),Te.success("Generated smart name!")):Te.error("Enter 'Candidate Name' in the form first.")},Ze=async et=>{try{if(et&&et.includes("/storage/")){const at=`http://127.0.0.1:8000/api/v1/file-proxy?path=${encodeURIComponent(et)}`,gt=await(await fetch(at)).blob();return new Promise((Dt,hn)=>{const en=new FileReader;en.onloadend=()=>Dt(en.result),en.onerror=hn,en.readAsDataURL(gt)})}const Ke=await(await fetch(et)).blob();return new Promise((at,ut)=>{const gt=new FileReader;gt.onloadend=()=>at(gt.result),gt.onerror=ut,gt.readAsDataURL(Ke)})}catch(le){return console.error("Failed to convert image to base64",le),null}};ht.useEffect(()=>{(async()=>{try{const le=await Rr();le&&le.logo&&Y(le.logo)}catch(le){console.error("Failed to fetch business logo",le)}})()},[]);const Xe=async()=>{const et=ae?.trim();if(!et||["Untitled Offer Letter"].includes(et)){L("Please enter a valid document name."),Ye.current&&Ye.current.focus();return}try{await Ge(n)}catch(le){console.error("Failed to save",le)}},[yt,Et]=_.useState(null),Ot=et=>{Et(et.active)},Kt=et=>{const{active:le,over:Ke}=et;if(Et(null),!!Ke&&Ke.id==="document-canvas"){const at=document.getElementById("printable-document");if(at&&le.rect.current.translated){const ut=at.getBoundingClientRect(),gt=(le.rect.current.translated.left-ut.left)/r,Dt=(le.rect.current.translated.top-ut.top)/r;le.data.current?.type==="toolbar-item"?lt({isOpen:!0,data:{id:null,position:{x:gt,y:Dt},type:"all",required:!0,order:$.length+1}}):le.data.current?.type==="signature-field"&&Ce(le.id,{position:{x:gt,y:Dt}})}}},Fn=et=>{if(et.id)Ce(et.id,{metadata:{signeeName:et.signeeName,signeeEmail:et.signeeEmail,type:et.type,required:et.required,order:et.order}});else{const le={id:ch(),position:Je.data.position,metadata:{signeeName:et.signeeName,signeeEmail:et.signeeEmail,type:et.type,required:et.required,order:et.order}};Ne(le)}},un=et=>{lt({isOpen:!0,data:{id:et.id,...et.metadata}})},qs=()=>{lt({isOpen:!0,data:{id:null,position:{x:50,y:100},type:"all",required:!0,order:$.length+1}})},Os=async()=>{if(!e){Te.error("Please save the document before printing.");return}x(!0);try{let et=I;if(I&&!I.startsWith("data:")){const ut=await Ze(I);ut&&(et=ut)}const le={...U,brandingEnabled:U.brandingEnabled!==!1&&U.brandingEnabled!=="false",logoAlignment:U.logoAlignment||"center",logoSize:U.logoSize||70,businessLogo:et},Ke=renderToStaticMarkup(a.jsx(X2,{data:le,content:Z,signatures:$,zoom:1,printing:!0,styles:pe,businessLogo:et})),at=await ir(e,Ke,ae);at.url&&window.open(at.url,"_blank")}catch(et){console.error("PDF Generation failed",et),Te.error("Failed to generate PDF. Please try again.")}finally{x(!1)}},An=async()=>{if(!e){Te.error("Please save the document before exporting.");return}N(!0);try{let et=I;if(I&&!I.startsWith("data:")){const at=await Ze(I);at&&(et=at)}const le=Iw(U,Z,ae,$,et),Ke=await ir(e,le,ae);if(Ke.url){const at=document.createElement("a");at.href=Ke.url,at.download=`${ae.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.pdf`,document.body.appendChild(at),at.click(),document.body.removeChild(at),Te.success("Document exported successfully")}}catch(et){console.error("Export failed",et),Te.error("Failed to export document")}finally{N(!1)}},ye=()=>{if(!e){Te.error("Please save the document before sending.");return}E(!0)},Qe=et=>{et&&et.sent_at&&ke(et.sent_at)},rt=et=>{Oe(et),R(et),u(!1),Te.success(`Previewing Version ${et.version_number}`)},Nt=()=>{$e(),R(null),Te.success("Exited preview mode")},mt=et=>{Le(et),R(null)},It=async et=>{const le=Te.loading("Preparing version PDF...");try{let Ke=et.content;if(typeof Ke=="string")try{Ke=JSON.parse(Ke)}catch{}const at=Ke.formData||U,ut=Ke.docContent||Z;let gt=I;if(I&&!I.startsWith("data:")){const en=await Ze(I);en&&(gt=en)}const Dt=Iw(at,ut,`${ae} - v${et.version_number}`,[],gt),hn=await ir(e,Dt,`${ae} - v${et.version_number}`);if(hn.url){const en=document.createElement("a");en.href=hn.url,en.download=`${ae.replace(/[^a-z0-9]/gi,"_")}_v${et.version_number}.pdf`,document.body.appendChild(en),en.click(),document.body.removeChild(en),Te.success(`Version ${et.version_number} downloaded`,{id:le})}}catch(Ke){console.error("Version download failed",Ke),Te.error("Failed to download version PDF",{id:le})}};return G?a.jsx("div",{className:"flex h-screen items-center justify-center bg-slate-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Sn,{size:40,className:"animate-spin text-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 font-medium",children:"Loading Document..."})]})}):a.jsx(Bd,{sensors:nt,onDragStart:Ot,onDragEnd:Kt,children:a.jsxs("div",{className:"flex flex-col h-screen bg-slate-100 overflow-hidden",children:[a.jsx(wg,{isOpen:Je.isOpen,onClose:()=>lt({isOpen:!1,data:null}),onSave:Fn,initialData:Je.data,parties:{disclosingPartyName:U.employerName,receivingPartyName:U.candidateName,disclosingSignatoryName:U.employerSignatoryName,receivingSignatoryName:U.candidateName}}),a.jsx(bg,{dropAnimation:{sideEffects:({active:et})=>(document.body.style.cursor="grabbing",()=>{document.body.style.cursor=""})},children:yt?yt.data.current?.type==="toolbar-item"?a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-indigo-500 bg-white shadow-xl opacity-90 cursor-grabbing ring-2 ring-indigo-500/20 w-48",children:[a.jsx("div",{className:"p-2 rounded-md bg-indigo-100 text-indigo-600",children:a.jsx("div",{className:"w-5 h-5 flex items-center justify-center font-bold",children:"+"})}),a.jsx("span",{className:"text-sm font-medium text-slate-900",children:"Placing Field..."})]}):yt.data.current?.type==="signature-field"?a.jsxs("div",{className:"w-64 bg-white/95 backdrop-blur-sm border-2 border-indigo-500 rounded-lg shadow-2xl p-3 flex flex-col cursor-grabbing",children:[a.jsx("div",{className:"flex items-center gap-2 text-indigo-700 font-semibold border-b pb-2 mb-2",children:a.jsx("span",{children:yt.data.current.signeeName||"Signature"})}),a.jsx("div",{className:"h-10 flex items-center justify-center text-indigo-200",children:"Sign Here"})]}):null:null}),A&&a.jsxs("div",{className:"bg-amber-100 border-b border-amber-200 px-4 py-2 flex items-center justify-between text-amber-800 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_r,{size:16}),a.jsxs("span",{className:"font-medium",children:["Previewing Version ",A.version_number]})]}),a.jsxs("button",{onClick:Nt,className:"text-amber-700 hover:text-amber-900 font-medium hover:underline flex items-center gap-1",children:[a.jsx(bs,{size:14})," Exit Preview"]})]}),a.jsx(hx,{isOpen:j,onClose:()=>E(!1),documentId:e,documentName:ae,isReminder:!!fe,onSuccess:Qe,getHtmlContent:async()=>{let et=I;if(I&&!I.startsWith("data:")){const le=await Ze(I);le&&(et=le)}return Iw(U,Z,ae,$,et)},signatures:$}),a.jsxs("header",{className:"no-print h-14 md:h-16 bg-white/80 backdrop-blur-md border-b border-slate-200/60 px-4 md:px-6 flex items-center justify-between flex-shrink-0 z-30 shadow-sm relative transition-all duration-300",children:[a.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[a.jsx("button",{onClick:ot,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors flex-shrink-0",children:a.jsx(Ia,{size:20})}),a.jsxs("div",{className:"min-w-0 relative group/input",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{ref:Ye,type:"text",value:ae,onChange:et=>{xe(et.target.value),M&&L(null)},className:`font-bold text-sm md:text-lg bg-transparent border-b-2 focus:ring-0 p-0 m-0 w-auto min-w-[150px] max-w-[300px] placeholder-slate-400 truncate transition-colors ${M?"border-red-500 text-slate-800 ring-4 ring-red-500/10 rounded-sm px-1 -mx-1":"border-transparent hover:border-slate-200 text-slate-800"}`,placeholder:"Enter Document Name"}),M&&a.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 bg-white rounded-lg shadow-xl border border-red-100 z-50 p-3 animate-in fade-in slide-in-from-top-2",children:[a.jsxs("div",{className:"flex items-start gap-2 text-red-600 mb-2",children:[a.jsx(wa,{size:16}),a.jsx("p",{className:"text-xs font-semibold",children:M})]}),z&&a.jsxs("div",{className:"bg-slate-50 rounded p-2 border border-slate-100",children:[a.jsx("p",{className:"text-[10px] text-slate-500 mb-1 uppercase font-bold",children:"Suggestion:"}),a.jsx("button",{onClick:()=>{xe(z),L(null)},className:"text-sm font-bold text-indigo-600 hover:text-indigo-700 hover:underline",children:z})]})]})]}),a.jsx("button",{onClick:qe,className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-md transition-colors",children:a.jsx(hg,{size:16})}),fe&&a.jsxs("span",{className:"hidden lg:inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-emerald-50 text-emerald-600 text-[10px] font-medium border border-emerald-100",children:[a.jsx(fi,{size:10})," Sent"]})]}),a.jsx("p",{className:"text-[10px] md:text-xs text-slate-400 font-medium whitespace-nowrap hidden sm:block mt-0.5",children:e?"Autosaved locally":"Draft"})]})]}),a.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[a.jsxs("div",{className:"hidden lg:flex items-center bg-slate-100 rounded-lg p-1 mr-4",children:[a.jsx("button",{onClick:Pt,className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-slate-500 transition-all",children:a.jsx(Yo,{size:16})}),a.jsxs("span",{className:"text-xs font-semibold text-slate-600 w-12 text-center",children:[Math.round(r*100),"%"]}),a.jsx("button",{onClick:St,className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-slate-500 transition-all",children:a.jsx(Go,{size:16})})]}),a.jsxs("button",{onClick:()=>u(!0),className:"hidden lg:flex items-center gap-2 px-4 py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all",children:[a.jsx(la,{size:18}),a.jsx("span",{children:"History"})]}),a.jsxs("button",{onClick:Os,disabled:g,className:"hidden lg:flex items-center gap-2 px-4 py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all disabled:opacity-50",children:[g?a.jsx(Sn,{size:18,className:"animate-spin"}):a.jsx(yf,{size:18}),a.jsx("span",{children:"Print"})]}),a.jsxs("button",{onClick:ye,className:`hidden lg:flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg border border-transparent transition-all ${fe?"text-amber-600 hover:bg-amber-50 hover:border-amber-200":"text-slate-600 hover:bg-slate-50 hover:border-slate-200"}`,children:[fe?a.jsx(Pl,{size:18}):a.jsx(Js,{size:18}),a.jsx("span",{children:fe?"Remind":"Send"})]}),a.jsxs("button",{onClick:An,disabled:y,className:"hidden lg:flex items-center gap-2 px-4 py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all disabled:opacity-50",children:[y?a.jsx(Sn,{size:18,className:"animate-spin"}):a.jsx(Yi,{size:18}),a.jsx("span",{children:"Export"})]}),a.jsxs("button",{onClick:Xe,className:`hidden lg:flex items-center gap-2 px-5 py-2 rounded-lg text-white font-medium shadow-md transition-all ${X?"bg-emerald-500":"bg-indigo-600 hover:bg-indigo-700"}`,children:[X?a.jsx(fi,{size:18}):a.jsx(Xi,{size:18}),a.jsx("span",{children:X?"Saved!":"Save"})]})]})]}),a.jsxs("div",{className:"flex flex-col lg:flex-row flex-1 overflow-hidden relative pb-[70px] lg:pb-0",children:[a.jsx("div",{className:`
                        no-print w-full lg:w-[400px] h-full bg-white border-b lg:border-b-0 lg:border-r border-slate-200 
                        overflow-y-auto z-20 shadow-sm flex-shrink-0 lg:order-1
                        ${t||s==="edit"?"block":"hidden"}
                    `,children:a.jsx(xJ,{formData:U,onChange:se,docContent:Z,onContentChange:ee,addSection:ne,removeSection:V,updateSection:re,reorderSections:ge,styles:pe,onStyleUpdate:je,onStyleReset:Se})}),a.jsxs("div",{className:`
                        flex-1 h-full overflow-y-auto bg-slate-50/50 p-4 md:p-8 sm:p-12 
                        flex justify-center items-start scrollbar-thin scrollbar-thumb-slate-300 lg:order-2
                        ${t||s==="preview"?"flex":"hidden"}
                    `,style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"20px 20px"},children:[a.jsx(X2,{data:ct,content:Fe,zoom:r,signatures:$,onUpdateSignature:Ce,onRemoveSignature:We,onEditSignature:un,businessLogo:I,styles:pe}),!t&&s==="preview"&&a.jsx("button",{onClick:qs,className:"fixed bottom-24 right-6 w-14 h-14 bg-indigo-600 text-white rounded-full shadow-lg shadow-indigo-600/30 flex items-center justify-center hover:bg-indigo-700 transition-transform active:scale-95 z-30",children:a.jsx("span",{className:"text-2xl font-bold",children:"+"})})]})]}),a.jsx(ux,{documentId:e,isOpen:c,onClose:()=>u(!1),onPreview:rt,onDownload:It,onRestore:mt}),!t&&a.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 flex justify-between items-center px-6 py-3 pb-safe z-40 safe-area-bottom",children:[a.jsxs("button",{onClick:()=>i("edit"),className:`flex flex-col items-center gap-1 ${s==="edit"?"text-indigo-600":"text-slate-400"}`,children:[a.jsx(wn,{size:24,strokeWidth:s==="edit"?2.5:2}),a.jsx("span",{className:"text-[10px] font-medium",children:"Editor"})]}),a.jsxs("button",{onClick:()=>i("preview"),className:`flex flex-col items-center gap-1 ${s==="preview"?"text-indigo-600":"text-slate-400"}`,children:[a.jsx(_r,{size:24,strokeWidth:s==="preview"?2.5:2}),a.jsx("span",{className:"text-[10px] font-medium",children:"Preview"})]}),a.jsxs("button",{onClick:Xe,className:`flex flex-col items-center gap-1 ${X?"text-emerald-500":"text-slate-400 transition-colors active:text-indigo-600"}`,children:[X?a.jsx(fi,{size:24,strokeWidth:2.5}):a.jsx(Xi,{size:24}),a.jsx("span",{className:"text-[10px] font-medium",children:X?"Saved":"Save"})]}),a.jsxs("button",{onClick:()=>f(!0),className:`flex flex-col items-center gap-1 ${h?"text-indigo-600":"text-slate-400"}`,children:[a.jsx(tN,{size:24}),a.jsx("span",{className:"text-[10px] font-medium",children:"More"})]})]}),!t&&h&&a.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col justify-end",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm animate-in fade-in",onClick:()=>f(!1)}),a.jsxs("div",{className:"relative bg-white rounded-t-2xl p-6 pb-safe animate-in slide-in-from-bottom shadow-2xl space-y-2",children:[a.jsx("div",{className:"w-12 h-1.5 bg-slate-200 rounded-full mx-auto mb-6"}),a.jsx("h3",{className:"text-sm font-semibold text-slate-400 uppercase tracking-wider mb-2 px-2",children:"Actions"}),a.jsxs("button",{onClick:()=>{f(!1),u(!0)},className:"w-full flex items-center gap-3 p-3 text-slate-700 font-medium hover:bg-slate-50 rounded-xl transition-colors",children:[a.jsx("div",{className:"p-2 bg-indigo-50 text-indigo-600 rounded-lg",children:a.jsx(la,{size:20})}),"Version History"]}),a.jsxs("button",{onClick:()=>{f(!1),ye()},className:"w-full flex items-center gap-3 p-3 text-slate-700 font-medium hover:bg-slate-50 rounded-xl transition-colors",children:[a.jsx("div",{className:"p-2 bg-amber-50 text-amber-600 rounded-lg",children:fe?a.jsx(Pl,{size:20}):a.jsx(Js,{size:20})}),fe?"Send Reminder":"Send to Client"]}),a.jsxs("button",{onClick:()=>{f(!1),Os()},disabled:g,className:"w-full flex items-center gap-3 p-3 text-slate-700 font-medium hover:bg-slate-50 rounded-xl transition-colors disabled:opacity-50",children:[a.jsx("div",{className:"p-2 bg-sky-50 text-sky-600 rounded-lg",children:g?a.jsx(Sn,{size:20,className:"animate-spin"}):a.jsx(yf,{size:20})}),g?"Generating PDF...":"Print / Download PDF"]}),a.jsxs("button",{onClick:()=>{f(!1),An()},disabled:y,className:"w-full flex items-center gap-3 p-3 text-slate-700 font-medium hover:bg-slate-50 rounded-xl transition-colors disabled:opacity-50",children:[a.jsx("div",{className:"p-2 bg-emerald-50 text-emerald-600 rounded-lg",children:y?a.jsx(Sn,{size:20,className:"animate-spin"}):a.jsx(Yi,{size:20})}),y?"Exporting...":"Export"]}),a.jsx("button",{onClick:()=>f(!1),className:"w-full mt-4 p-3 bg-slate-100 text-slate-600 font-semibold rounded-xl",children:"Cancel"})]})]})]})})},SP=({formData:n,onChange:e,docContent:t,onContentChange:s,addSection:i,removeSection:r,updateSection:o,reorderSections:c,styles:u,onStyleUpdate:h,onStyleReset:f})=>{const[g,x]=_.useState("parties"),[y,N]=_.useState("fill"),[j,E]=_.useState({isOpen:!1,sectionId:null}),A=U=>{x(g===U?null:U)},R=n.effectiveDateDay&&n.effectiveDateMonth&&n.effectiveDateYear,M=n.clientName&&n.consultantName,L=n.startDate&&n.endDate&&n.feeAmount,z=n.clientSignatoryName&&n.consultantSignatoryName,W=U=>{E({isOpen:!0,sectionId:U})},I=()=>{j.sectionId&&(r(j.sectionId),E({isOpen:!1,sectionId:null}))},Y=async()=>{try{const U=await Rr();if(U){e({target:{name:"clientName",value:U.name||""}});const Z=[U.address,U.city,U.state,U.country].filter(Boolean).join(", ");e({target:{name:"clientAddress",value:Z||""}}),Te.success("Business details populated")}else Te.error("No business profile found")}catch(U){console.error("Failed to fetch business info",U),Te.error("Failed to load business info")}};return a.jsxs("div",{className:"bg-white min-h-full pb-20 relative",children:[a.jsx(Mv,{isOpen:j.isOpen,onClose:()=>E({isOpen:!1,sectionId:null}),onConfirm:I,title:"Delete Section",message:"Are you sure you want to remove this section? This action cannot be undone.",confirmText:"Delete Section",isDestructive:!0}),a.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 sticky top-0 z-10 backdrop-blur-sm",children:[a.jsxs("div",{className:"flex gap-1 bg-slate-200/50 p-1 rounded-lg mb-4",children:[a.jsx("button",{onClick:()=>N("fill"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${y==="fill"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,children:a.jsx($0,{size:16})}),a.jsx("button",{onClick:()=>N("edit"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${y==="edit"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,title:"Structure",children:a.jsx(ex,{size:16})}),a.jsx("button",{onClick:()=>N("style"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${y==="style"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,title:"Appearance",children:a.jsx(Ol,{size:16})})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-slate-900",children:y==="fill"?"Contract Details":y==="edit"?"Structure Builder":"Styling & Appearance"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:y==="fill"?"Enter contract terms":y==="edit"?"Customize layout":"Fonts, colors and spacing"})]})]}),y==="fill"&&a.jsxs(a.Fragment,{children:[a.jsx(Pa,{title:"Effective Date",icon:Ld,isOpen:g==="date",isComplete:R,onClick:()=>A("date"),children:a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsx(Yt,{label:"Day",name:"effectiveDateDay",value:n.effectiveDateDay,onChange:e,placeholder:"DD"}),a.jsx(Yt,{label:"Month",name:"effectiveDateMonth",value:n.effectiveDateMonth,onChange:e,placeholder:"Month"}),a.jsx(Yt,{label:"Year",name:"effectiveDateYear",value:n.effectiveDateYear,onChange:e,placeholder:"YY"})]})}),a.jsx(Pa,{title:"Parties Involved",icon:Ai,isOpen:g==="parties",isComplete:M,onClick:()=>A("parties"),children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-3 bg-indigo-50 rounded-lg border border-indigo-100",children:[a.jsxs("h4",{className:"text-xs font-bold text-indigo-900 uppercase mb-3 flex items-center justify-between",children:[a.jsx("span",{className:"flex items-center gap-2",children:"Client"}),a.jsxs("button",{onClick:Y,className:"text-[10px] bg-white border border-indigo-200 text-indigo-600 px-2 py-1 rounded hover:bg-indigo-50 transition-colors flex items-center gap-1",children:[a.jsx(Od,{size:10})," Use Profile"]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Yt,{label:"Client",name:"clientName",value:n.clientName,onChange:e,placeholder:"Company A"}),a.jsx(Yt,{label:"Full Address",name:"clientAddress",value:n.clientAddress,onChange:e,placeholder:"Address",rows:2})]})]}),a.jsxs("div",{className:"p-3 bg-emerald-50 rounded-lg border border-emerald-100",children:[a.jsx("h4",{className:"text-xs font-bold text-emerald-900 uppercase mb-3",children:"Consultant"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Yt,{label:"Consultant",name:"consultantName",value:n.consultantName,onChange:e,placeholder:"Jane Doe"}),a.jsx(Yt,{label:"Full Address",name:"consultantAddress",value:n.consultantAddress,onChange:e,placeholder:"Address",rows:2})]})]})]})}),a.jsx(Pa,{title:"Terms & Payment",icon:eN,isOpen:g==="terms",isComplete:L,onClick:()=>A("terms"),children:a.jsxs("div",{className:"space-y-3",children:[a.jsx(Yt,{label:"Services Description",name:"servicesDescription",value:n.servicesDescription,onChange:e,placeholder:"Describe services...",rows:3}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(Yt,{label:"Start Date",name:"startDate",value:n.startDate,onChange:e,placeholder:"Date"}),a.jsx(Yt,{label:"End Date",name:"endDate",value:n.endDate,onChange:e,placeholder:"Date"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(Yt,{label:"Fee Amount",name:"feeAmount",value:n.feeAmount,onChange:e,placeholder:"$5,000"}),a.jsx(Yt,{label:"Notice (Days)",name:"noticePeriod",value:n.noticePeriod,onChange:e,placeholder:"30"})]}),a.jsx(Yt,{label:"Payment Terms",name:"paymentTerms",value:n.paymentTerms,onChange:e,placeholder:"Net 30, Upon Completion, etc."})]})}),a.jsx(Pa,{title:"Document Branding",icon:Df,isOpen:g==="branding",isComplete:!0,onClick:()=>A("branding"),children:a.jsx(cx,{formData:n,onChange:e})}),a.jsx(Pa,{title:"Signatories",icon:ar,isOpen:g==="signatures",isComplete:z,onClick:()=>A("signatures"),children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-400 mb-2 uppercase",children:"For Client"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(Yt,{label:"Name",name:"clientSignatoryName",value:n.clientSignatoryName,onChange:e,placeholder:"Client Rep"}),a.jsx(Yt,{label:"Title",name:"clientSignatoryTitle",value:n.clientSignatoryTitle,onChange:e,placeholder:"Director"})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-400 mb-2 uppercase",children:"For Consultant"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(Yt,{label:"Name",name:"consultantSignatoryName",value:n.consultantSignatoryName,onChange:e,placeholder:"Consultant Name"}),a.jsx(Yt,{label:"Title",name:"consultantSignatoryTitle",value:n.consultantSignatoryTitle,onChange:e,placeholder:"Title"})]})]})]})})]}),y==="edit"&&a.jsxs("div",{className:"p-4 space-y-6 pb-20",children:[a.jsx(jf,{isFixed:!0,section:{title:"Preamble & Parties"},onUpdate:()=>{},children:a.jsxs("div",{className:"space-y-3 mt-3",children:[a.jsx("textarea",{name:"preamble",value:t.preamble||"",onChange:s,rows:3,className:"w-full text-xs p-3 rounded-lg border border-slate-200 bg-slate-50 resize-y",placeholder:"Preamble..."}),a.jsxs("div",{className:"grid gap-3",children:[a.jsx("textarea",{name:"partiesDisclosing",value:t.partiesDisclosing||"",onChange:s,rows:2,className:"w-full text-xs p-3 rounded-lg border border-slate-200 bg-slate-50 resize-y",placeholder:"Client Clause..."}),a.jsx("textarea",{name:"partiesReceiving",value:t.partiesReceiving||"",onChange:s,rows:2,className:"w-full text-xs p-3 rounded-lg border border-slate-200 bg-slate-50 resize-y",placeholder:"Consultant Clause..."})]})]})}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-[7px] top-[-24px] bottom-0 w-[2px] bg-slate-100"}),a.jsx("p",{className:"font-bold text-[10px] uppercase tracking-widest text-slate-400 pl-8 mb-4",children:"Contract Sections"}),a.jsx(dv,{axis:"y",values:t.sections,onReorder:c,className:"space-y-0",children:t.sections.map(U=>a.jsx(uv,{value:U,className:"relative mb-2",children:a.jsx(jf,{section:U,onUpdate:(Z,$)=>o(U.id,Z,$),onRemove:()=>W(U.id),placeholderTitle:"Section Title",placeholderContent:"Body text..."})},U.id))}),a.jsx(Dv,{onClick:i})]})]}),y==="style"&&a.jsx("div",{className:"p-4 pb-20",children:a.jsx(Rv,{styles:u,onUpdate:h,onReset:f})})]})};function Hy({data:n,content:e,zoom:t=1,printing:s=!1,readOnly:i=!1,signatures:r=[],onUpdateSignature:o,onRemoveSignature:c,onEditSignature:u,businessLogo:h,styles:f}){const g=A=>{if(!A)return"bg-slate-100 text-slate-600 border-slate-200";const R=["bg-indigo-50 text-indigo-700 border-indigo-200","bg-emerald-50 text-emerald-700 border-emerald-200","bg-amber-50 text-amber-700 border-amber-200","bg-rose-50 text-rose-700 border-rose-200","bg-violet-50 text-violet-700 border-violet-200","bg-sky-50 text-sky-700 border-sky-200"];let M=0;for(let L=0;L<A.length;L++)M=A.charCodeAt(L)+((M<<5)-M);return R[Math.abs(M)%R.length]},x=({value:A,placeholder:R,name:M,className:L=""})=>{const z=g(M);return A?i||s?a.jsx("span",{className:`font-medium text-slate-900 ${L}`,children:A}):a.jsx("span",{className:`px-1.5 py-0.5 rounded border ${z} font-medium mx-0.5 transition-all hover:brightness-95 ${L}`,children:A}):i||s?a.jsx("span",{className:`text-slate-500 italic ${L}`,children:R}):a.jsx("span",{className:`px-1.5 py-0.5 rounded border border-dashed ${z} bg-opacity-50 font-medium text-xs mx-0.5 ${L}`,children:R})},y=({template:A,values:R})=>{if(!A)return null;const M=A.split(/(\{\{[^}]+\}\})/g);return a.jsx("span",{children:M.map((L,z)=>{if(L.startsWith("{{")&&L.endsWith("}}")){const W=L.slice(2,-2).trim();return a.jsx(x,{value:R[W],name:W,placeholder:`[${W}]`},z)}return a.jsx("span",{children:L},z)})})},N=s?"div":Ie.div,j=s?"div":Ie.section,E=f||{fontFamily:"font-serif",fontSize:"text-[11pt]",lineHeight:"leading-relaxed",textColor:"#1e293b",headingColor:"#0f172a",pageMargin:"p-[10mm]",paragraphSpacing:"mb-6"};return a.jsxs(N,{id:"printable-document",...s?{}:{initial:{opacity:0,y:20},animate:{opacity:1,y:0}},style:{transform:s?"none":`scale(${t})`,transformOrigin:"top center",color:E.textColor},className:`
                w-[210mm] min-h-[297mm] bg-white relative mb-20 origin-top 
                ${s?"":"shadow-[0_8px_30px_rgb(0,0,0,0.12)] border border-slate-200/60"}
                ${E.fontFamily} ${E.fontSize} ${E.lineHeight}
            `,children:[!s&&a.jsx("div",{className:"no-print absolute inset-0 rounded-sm pointer-events-none bg-gradient-to-b from-white to-slate-50/20"}),!s&&!i&&a.jsx(iP,{signatures:r,onUpdateSignature:o,onRemoveSignature:c,onEditSignature:u}),(s||i)&&r.length>0&&a.jsx("div",{className:"absolute inset-0 z-50 pointer-events-none",children:r.map(A=>a.jsxs("div",{style:{position:"absolute",left:`${A.position.x}px`,top:`${A.position.y}px`,width:"200px",height:"60px",borderBottom:"1px solid #000",display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:[a.jsx("div",{style:{fontFamily:"cursive",fontSize:"14pt",color:"#1e3a8a",marginBottom:"4px"},children:A.metadata.signeeName||"Sign Here"}),a.jsx("div",{style:{fontSize:"8pt",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:A.metadata.type==="date"?"Date":"Authorized Signature"})]},A.id))}),a.jsxs("div",{className:`${E.pageMargin} relative z-10`,children:[h&&n.brandingEnabled!==!1&&n.brandingEnabled!=="false"&&a.jsx("div",{className:`flex mb-8 ${n.logoAlignment==="left"?"justify-start":n.logoAlignment==="right"?"justify-end":"justify-center"}`,style:s?{textAlign:n.logoAlignment||"center"}:{},children:a.jsx("img",{src:h,alt:"Company Logo",style:{height:`${n.logoSize||70}px`,objectFit:"contain"}})}),a.jsx("h1",{className:"text-xl font-bold text-center mb-10 uppercase tracking-widest border-b-2 border-slate-900 pb-2",style:{borderColor:E.headingColor,color:E.headingColor},children:e.title}),a.jsx("p",{className:`text-justify ${E.paragraphSpacing}`,children:a.jsx(y,{template:e.preamble,values:n})}),a.jsxs("div",{className:"mb-8 pl-4 border-l-4 border-slate-100",children:[a.jsx("p",{className:"font-bold text-xs uppercase text-slate-400 mb-1",children:"BY AND BETWEEN"}),a.jsx("p",{className:`text-justify ${E.paragraphSpacing}`,children:a.jsx(y,{template:e.partiesDisclosing,values:n})}),a.jsx("p",{className:"font-bold text-xs uppercase text-slate-400 mb-1",children:"AND"}),a.jsx("p",{className:`text-justify ${E.paragraphSpacing}`,children:a.jsx(y,{template:e.partiesReceiving,values:n})})]}),a.jsx("p",{className:`text-justify ${E.paragraphSpacing}`,children:a.jsx(y,{template:e.partiesFooter,values:n})}),a.jsx("div",{className:"space-y-6 min-h-[100px]",children:a.jsx(dn,{mode:"popLayout",children:e.sections&&e.sections.map((A,R)=>a.jsxs(j,{className:E.paragraphSpacing,...s?{}:{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95}},children:[a.jsx("h2",{className:"font-bold text-sm uppercase mb-2",style:{color:E.headingColor},children:A.title}),a.jsx("p",{className:"text-justify",children:a.jsx(y,{template:A.content,values:n})})]},A.id))})}),a.jsxs("div",{className:"mt-12 break-inside-avoid",children:[a.jsxs("h2",{className:"font-bold text-sm uppercase mb-6 border-b border-slate-900 pb-1",style:{borderColor:E.headingColor,color:E.headingColor},children:[e.sections.length+1,". Signatures"]}),a.jsx("p",{className:"mb-8",children:"IN WITNESS WHEREOF, the Parties have executed this Agreement as of the date first written above."}),s?a.jsx("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"20px"},children:a.jsx("tbody",{children:a.jsxs("tr",{children:[a.jsxs("td",{style:{width:"48%",verticalAlign:"top",paddingRight:"2%"},children:[a.jsx("p",{className:"font-bold uppercase text-xs tracking-wider mb-8",children:"For Client"}),a.jsx("div",{className:"relative border-b border-slate-800 h-8 mb-2",style:{borderBottom:"1px solid #000",height:"40px",marginBottom:"10px"},children:n.clientSignatoryName&&a.jsx("span",{style:{fontFamily:"cursive",fontSize:"16pt",color:"#1e3a8a"},children:n.clientSignatoryName})}),a.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Authorized Signature"}),a.jsx("table",{style:{width:"100%",marginTop:"15px"},children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{style:{width:"60px",fontWeight:"bold",fontSize:"10pt"},children:"Name:"}),a.jsx("td",{style:{borderBottom:"1px solid #ccc"},children:n.clientSignatoryName})]}),a.jsxs("tr",{children:[a.jsx("td",{style:{paddingBottom:"5px"}}),a.jsx("td",{})]}),a.jsxs("tr",{children:[a.jsx("td",{style:{width:"60px",fontWeight:"bold",fontSize:"10pt"},children:"Title:"}),a.jsx("td",{style:{borderBottom:"1px solid #ccc"},children:n.clientSignatoryTitle})]})]})})]}),a.jsx("td",{style:{width:"4%"}}),a.jsxs("td",{style:{width:"48%",verticalAlign:"top"},children:[a.jsx("p",{className:"font-bold uppercase text-xs tracking-wider mb-8",children:"For Consultant"}),a.jsx("div",{className:"relative border-b border-slate-800 h-8 mb-2",style:{borderBottom:"1px solid #000",height:"40px",marginBottom:"10px"},children:n.consultantSignatoryName&&a.jsx("span",{style:{fontFamily:"cursive",fontSize:"16pt",color:"#1e3a8a"},children:n.consultantSignatoryName})}),a.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Authorized Signature"}),a.jsx("table",{style:{width:"100%",marginTop:"15px"},children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{style:{width:"60px",fontWeight:"bold",fontSize:"10pt"},children:"Name:"}),a.jsx("td",{style:{borderBottom:"1px solid #ccc"},children:n.consultantSignatoryName})]}),a.jsxs("tr",{children:[a.jsx("td",{style:{paddingBottom:"5px"}}),a.jsx("td",{})]}),a.jsxs("tr",{children:[a.jsx("td",{style:{width:"60px",fontWeight:"bold",fontSize:"10pt"},children:"Title:"}),a.jsx("td",{style:{borderBottom:"1px solid #ccc"},children:n.consultantSignatoryTitle})]})]})})]})]})})}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-16",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"font-bold uppercase text-xs tracking-wider mb-8",children:"For Client"}),a.jsx("div",{className:"relative border-b border-slate-800 h-8 mb-2",children:n.clientSignatoryName&&a.jsx("span",{className:"absolute bottom-1 left-2 font-cursive text-xl text-blue-900 opacity-80 rotate-[-2deg]",children:n.clientSignatoryName})}),a.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Authorized Signature"}),a.jsxs("div",{className:"pt-4 grid grid-cols-[60px_1fr] gap-x-2 gap-y-1 items-baseline",children:[a.jsx("span",{className:"text-sm font-medium",children:"Name:"}),a.jsx("span",{className:"border-b border-slate-300 w-full inline-block h-5 pl-1",children:n.clientSignatoryName}),a.jsx("span",{className:"text-sm font-medium",children:"Title:"}),a.jsx("span",{className:"border-b border-slate-300 w-full inline-block h-5 pl-1",children:n.clientSignatoryTitle})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"font-bold uppercase text-xs tracking-wider mb-8",children:"For Consultant"}),a.jsx("div",{className:"relative border-b border-slate-800 h-8 mb-2",children:n.consultantSignatoryName&&a.jsx("span",{className:"absolute bottom-1 left-2 font-cursive text-xl text-blue-900 opacity-80 rotate-[-2deg]",children:n.consultantSignatoryName})}),a.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Authorized Signature"}),a.jsxs("div",{className:"pt-4 grid grid-cols-[60px_1fr] gap-x-2 gap-y-1 items-baseline",children:[a.jsx("span",{className:"text-sm font-medium",children:"Name:"}),a.jsx("span",{className:"border-b border-slate-300 w-full inline-block h-5 pl-1",children:n.consultantSignatoryName}),a.jsx("span",{className:"text-sm font-medium",children:"Title:"}),a.jsx("span",{className:"border-b border-slate-300 w-full inline-block h-5 pl-1",children:n.consultantSignatoryTitle})]})]})]})]}),!s&&a.jsx("div",{className:"absolute bottom-4 left-0 right-0 text-center",children:a.jsx("p",{className:"text-[9px] text-slate-300 uppercase tracking-widest font-sans",children:"Powered by DocForge"})})]})]})}const yJ={title:"Consulting Services Agreement",preamble:"This Consulting Services Agreement (Agreement) is made and entered into on this {{effectiveDateDay}} day of {{effectiveDateMonth}}, 20{{effectiveDateYear}} (Effective Date),",partiesDisclosing:'{{clientName}}, having its principal place of business at {{clientAddress}} (hereinafter referred to as the "Client"),',partiesReceiving:'{{consultantName}}, having its principal place of business at {{consultantAddress}} (hereinafter referred to as the "Consultant").',partiesFooter:'The Client and the Consultant may hereinafter be collectively referred to as the "Parties" and individually as a "Party".',sections:[{id:"1",title:"Services",content:"The Consultant agrees to perform the following services for the Client: {{servicesDescription}} (Services). The Consultant shall perform the Services in a professional and workmanlike manner."},{id:"2",title:"Term",content:"The term of this Agreement shall commence on {{startDate}} and shall continue until {{endDate}}, unless earlier terminated in accordance with this Agreement."},{id:"3",title:"Compensation",content:"In consideration for the Services, the Client shall pay the Consultant a fee of {{feeAmount}}. Payment shall be made according to the following terms: {{paymentTerms}}."},{id:"4",title:"Independent Contractor",content:"The Consultant is an independent contractor and not an employee of the Client. The Consultant shall be solely responsible for all taxes, withholdings, and other statutory obligations."},{id:"5",title:"Confidentiality",content:"The Consultant agrees to keep confidential all non-public information obtained from the Client during the course of providing Services and shall not disclose it to any third party without prior written consent."},{id:"6",title:"Intellectual Property",content:'Any work product created by the Consultant specifically for the Client under this Agreement shall be considered "work made for hire" and shall be the sole property of the Client.'},{id:"7",title:"Termination",content:"Either party may terminate this Agreement upon {{noticePeriod}} days' written notice to the other party."}]},vJ={effectiveDateDay:"",effectiveDateMonth:"",effectiveDateYear:"",logoSize:70,logoAlignment:"center",brandingEnabled:!0,clientName:"",clientAddress:"",consultantName:"",consultantAddress:"",servicesDescription:"",startDate:"",endDate:"",feeAmount:"",paymentTerms:"",noticePeriod:"30",clientSignatoryName:"",clientSignatoryTitle:"",consultantSignatoryName:"",consultantSignatoryTitle:""},NP=n=>{const[e,t]=_.useState(vJ),[s,i]=_.useState(yJ),[r,o]=_.useState("Untitled Consulting Agreement"),[c,u]=_.useState(null),[h,f]=_.useState(!!n),[g,x]=_.useState(!1),[y,N]=_.useState(!1),{styles:j,updateStyle:E,resetStyles:A}=Sg(),R=_.useRef(null);_.useEffect(()=>{(async()=>{if(n)try{f(!0);const ee=await yg(n);ee.data.name&&o(ee.data.name),ee.data.sent_at&&u(ee.data.sent_at);let ne=ee.data?.content||ee.content;if(typeof ne=="string")try{ne=JSON.parse(ne)}catch(V){console.error(V)}ne=ne||{},ne.blocks&&N(!0),ne.formData&&t(V=>({...V,...ne.formData})),ne.docContent&&i(ne.docContent),ne.signatures&&fe(ne.signatures),ne.styles&&Object.entries(ne.styles).forEach(([V,re])=>E(V,re))}catch(ee){console.error("Failed to load document",ee),Te.error("Failed to load document")}finally{f(!1)}else try{const ee=await Rr();ee&&t(ne=>({...ne,clientName:ee.name||"",clientAddress:[ee.address,ee.city,ee.state,ee.country].filter(Boolean).join(", ")}))}catch(ee){console.error("Failed to load business details",ee)}})()},[n]);const M=se=>{const{name:ee,value:ne}=se.target;t(V=>({...V,[ee]:ne}))},L=se=>{const{name:ee,value:ne}=se.target;i(V=>({...V,[ee]:ne}))},z=()=>{i(se=>({...se,sections:[...se.sections,{id:ch(),title:"New Section",content:"Enter the details of this new clause here..."}]}))},W=se=>{i(ee=>({...ee,sections:ee.sections.filter(ne=>ne.id!==se)}))},I=(se,ee,ne)=>{i(V=>({...V,sections:V.sections.map(re=>re.id===se?{...re,[ee]:ne}:re)}))},Y=se=>{i(ee=>({...ee,sections:se}))},U=async se=>{x(!0);try{const ee={name:r,type_slug:"consulting-agreement",content:{formData:e,docContent:s,signatures:xe,styles:j},status:"draft"};if(n)return await vg(n,ee),Te.success("Document updated successfully"),n;{const ne=await dx(ee);return Te.success("Document created successfully"),se&&se(`/documents/consulting-agreement/${ne.data.id}`,{replace:!0}),ne.data.id}}catch(ee){throw console.error("Failed to save",ee),(!ee.response||ee.response.status!==422)&&Te.error("Failed to save document"),ee}finally{setTimeout(()=>x(!1),500)}},Z=se=>{R.current||(R.current={formData:e,docContent:s});let ee=se.content;if(typeof ee=="string")try{ee=JSON.parse(ee)}catch{}return ee.formData&&t(ee.formData),ee.docContent&&i(ee.docContent),ee},$=()=>{R.current&&(t(R.current.formData),i(R.current.docContent),R.current=null)},ae=se=>{if(se&&se.content){let ee=se.content;if(typeof ee=="string")try{ee=JSON.parse(ee)}catch{}ee.formData&&t(ee.formData),ee.docContent&&i(ee.docContent)}R.current=null},[xe,fe]=_.useState([]);return{formData:e,docContent:s,signatures:xe,documentName:r,setDocumentName:o,sentAt:c,setSentAt:u,isLoading:h,isSaving:g,handleFormChange:M,handleContentChange:L,addSection:z,removeSection:W,updateSection:I,reorderSections:Y,addSignature:se=>{fe(ee=>[...ee,se])},updateSignature:(se,ee)=>{fe(ne=>ne.map(V=>V.id===se?{...V,...ee}:V))},removeSignature:se=>{fe(ee=>ee.filter(ne=>ne.id!==se))},saveDocument:U,enterPreviewMode:Z,exitPreviewMode:$,restoreVersion:ae,styles:j,updateStyle:E,resetStyles:A,isNewEngine:y}},Bw=(n,e,t="Document",s=[],i=null)=>{const r=_l.renderToStaticMarkup(a.jsx(Hy,{data:n,content:e,zoom:1,printing:!0,signatures:s,businessLogo:i}));return`
    <!DOCTYPE html>
    <html>
        <head>
            <meta charset="utf-8">
            <title>${t}</title>
            <style>
                * { box-sizing: border-box; }
                body { 
                    font-family: 'Times New Roman', serif; 
                    line-height: 1.5; 
                    color: #333; 
                    font-size: 11pt; 
                    margin: 0; 
                    padding: 40px; 
                }
                .text-center { text-align: center; }
                .uppercase { text-transform: uppercase; }
                .font-bold { font-weight: bold; }
                .text-sm { font-size: 10pt; }
                .text-xs { font-size: 9pt; }
                .text-justify { text-align: justify; }
                .mb-2 { margin-bottom: 0.5rem; }
                .mb-4 { margin-bottom: 1rem; }
                .mb-6 { margin-bottom: 1.5rem; }
                .mb-8 { margin-bottom: 2rem; }
                .mb-10 { margin-bottom: 2.5rem; }
                .pb-2 { padding-bottom: 0.5rem; }
                .mt-12 { margin-top: 3rem; }
                .border-b { border-bottom: 1px solid #000; }
                .border-b-2 { border-bottom: 2px solid #000; }
                
                @page { margin: 40px; }
                
                h1 { 
                    font-size: 16pt; 
                    text-transform: uppercase; 
                    border-bottom: 2px solid #000; 
                    padding-bottom: 10px; 
                    margin-bottom: 30px; 
                    text-align: center; 
                    font-weight: bold; 
                    letter-spacing: 2px; 
                }
                p { margin-bottom: 12px; }
                
                table { width: 100%; border-collapse: collapse; }
                td { vertical-align: top; }
                
                .font-cursive { font-family: cursive; font-style: italic; }
            </style>
        </head>
        <body>
            ${r}
        </body>
    </html>
    `},wJ=()=>a.jsx(R0,{}),zT=()=>{const n=ts(),{id:e}=Wo(),t=zd("(min-width: 1024px)"),[s,i]=_.useState("edit"),[r,o]=_.useState(1),[c,u]=_.useState(!1),[h,f]=_.useState(!1),[g,x]=_.useState(!1),[y,N]=_.useState(!1),[j,E]=_.useState(!1),[A,R]=_.useState(null),[M,L]=_.useState(null),[z,W]=_.useState(null),[I,Y]=_.useState(null),{formData:U,docContent:Z,signatures:$,documentName:ae,setDocumentName:xe,sentAt:fe,setSentAt:ke,isLoading:G,isSaving:X,handleFormChange:se,handleContentChange:ee,addSection:ne,removeSection:V,updateSection:re,reorderSections:ge,addSignature:Ne,updateSignature:Ce,removeSignature:We,saveDocument:Ge,enterPreviewMode:Oe,exitPreviewMode:$e,restoreVersion:Le,styles:pe,updateStyle:je,resetStyles:Se,isNewEngine:Je}=NP(e);if(Je)return a.jsx(wJ,{});const[lt,ct]=_.useState({isOpen:!1,data:null}),Fe=ht.useDeferredValue(U),nt=ht.useDeferredValue(Z),Ye=Id(Ha(Lc,{activationConstraint:{distance:8}}),Ha(Mf,{activationConstraint:{delay:250,tolerance:5}})),ot=ht.useRef(null),St=()=>n("/documents"),Pt=()=>o(le=>Math.min(le+.1,1.5)),qe=()=>o(le=>Math.max(le-.1,.5)),Ze=()=>{const le=U.clientName?.trim(),Ke=U.consultantName?.trim();le&&Ke?(xe(`Consulting Agreement - ${le} & ${Ke}`),L(null),W(null),Te.success("Generated smart name!")):Te.error("Enter Client and Consultant names first.")},Xe=async le=>{try{if(le&&le.includes("/storage/")){const ut=`http://localhost:8000/api/v1/file-proxy?path=${encodeURIComponent(le)}`,Dt=await(await fetch(ut)).blob();return new Promise((hn,en)=>{const Rt=new FileReader;Rt.onloadend=()=>hn(Rt.result),Rt.onerror=en,Rt.readAsDataURL(Dt)})}const at=await(await fetch(le)).blob();return new Promise((ut,gt)=>{const Dt=new FileReader;Dt.onloadend=()=>ut(Dt.result),Dt.onerror=gt,Dt.readAsDataURL(at)})}catch(Ke){return console.error("Failed to convert image to base64",Ke),null}};ht.useEffect(()=>{(async()=>{try{const Ke=await Rr();Ke&&Ke.logo&&Y(Ke.logo)}catch(Ke){console.error("Failed to fetch business logo",Ke)}})()},[]);const yt=async()=>{try{await Ge(n)}catch(le){console.error("Failed to save",le)}},[Et,Ot]=_.useState(null),Kt=le=>{Ot(le.active)},Fn=le=>{const{active:Ke,over:at}=le;if(Ot(null),!!at&&at.id==="document-canvas"){const ut=document.getElementById("printable-document");if(ut&&Ke.rect.current.translated){const gt=ut.getBoundingClientRect(),Dt=(Ke.rect.current.translated.left-gt.left)/r,hn=(Ke.rect.current.translated.top-gt.top)/r;Ke.data.current?.type==="toolbar-item"?ct({isOpen:!0,data:{id:null,position:{x:Dt,y:hn},type:"all",required:!0,order:$.length+1}}):Ke.data.current?.type==="signature-field"&&Ce(Ke.id,{position:{x:Dt,y:hn}})}}},un=le=>{if(le.id)Ce(le.id,{metadata:{signeeName:le.signeeName,signeeEmail:le.signeeEmail,type:le.type,required:le.required,order:le.order}});else{const Ke={id:ch(),position:lt.data.position,metadata:{signeeName:le.signeeName,signeeEmail:le.signeeEmail,type:le.type,required:le.required,order:le.order}};Ne(Ke)}},qs=le=>{ct({isOpen:!0,data:{id:le.id,...le.metadata}})},Os=()=>{ct({isOpen:!0,data:{id:null,position:{x:50,y:100},type:"all",required:!0,order:$.length+1}})},An=async()=>{if(!e){Te.error("Please save the document before printing.");return}x(!0);try{let le=I;if(I&&!I.startsWith("data:")){const ut=await Xe(I);ut&&(le=ut)}const Ke=renderToStaticMarkup(a.jsx(Hy,{data:U,content:Z,zoom:1,printing:!0,styles:pe,signatures:$,businessLogo:le})),at=await ir(e,Ke,ae);at.url&&window.open(at.url,"_blank")}catch(le){console.error("PDF Generation failed",le),Te.error("Failed to generate PDF. Please try again.")}finally{x(!1)}},ye=async()=>{if(!e){Te.error("Please save the document before exporting.");return}N(!0);try{let le=I;if(I&&!I.startsWith("data:")){const ut=await Xe(I);ut&&(le=ut)}const Ke=Bw(U,Z,ae,$,le),at=await ir(e,Ke,ae);if(at.url){const ut=document.createElement("a");ut.href=at.url,ut.download=`${ae.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.pdf`,document.body.appendChild(ut),ut.click(),document.body.removeChild(ut),Te.success("Document exported successfully")}}catch(le){console.error("Export failed",le),Te.error("Failed to export document")}finally{N(!1)}},Qe=()=>{if(!e){Te.error("Please save the document before sending.");return}E(!0)},rt=le=>{le&&le.sent_at&&ke(le.sent_at)},Nt=le=>{Oe(le),R(le),u(!1),Te.success(`Previewing Version ${le.version_number}`)},mt=()=>{$e(),R(null),Te.success("Exited preview mode")},It=le=>{Le(le),R(null)},et=async le=>{const Ke=Te.loading("Preparing version PDF...");try{let at=le.content;if(typeof at=="string")try{at=JSON.parse(at)}catch{}const ut=at.formData||U,gt=at.docContent||Z;let Dt=I;if(I&&!I.startsWith("data:")){const Rt=await Xe(I);Rt&&(Dt=Rt)}const hn=Bw(ut,gt,`${ae} - v${le.version_number}`,[],Dt),en=await ir(e,hn,`${ae} - v${le.version_number}`);if(en.url){const Rt=document.createElement("a");Rt.href=en.url,Rt.download=`${ae.replace(/[^a-z0-9]/gi,"_")}_v${le.version_number}.pdf`,document.body.appendChild(Rt),Rt.click(),document.body.removeChild(Rt),Te.success(`Version ${le.version_number} downloaded`,{id:Ke})}}catch(at){console.error("Version download failed",at),Te.error("Failed to download version PDF",{id:Ke})}};return G?a.jsx("div",{className:"flex h-screen items-center justify-center bg-slate-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Sn,{size:40,className:"animate-spin text-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 font-medium",children:"Loading Document..."})]})}):a.jsx(Bd,{sensors:Ye,onDragStart:Kt,onDragEnd:Fn,children:a.jsxs("div",{className:"flex flex-col h-screen bg-slate-100 overflow-hidden",children:[a.jsx(wg,{isOpen:lt.isOpen,onClose:()=>ct({isOpen:!1,data:null}),onSave:un,initialData:lt.data,parties:{disclosingPartyName:U.clientName,receivingPartyName:U.consultantName,disclosingSignatoryName:U.clientSignatoryName,receivingSignatoryName:U.consultantSignatoryName}}),a.jsx(bg,{dropAnimation:{sideEffects:({active:le})=>(document.body.style.cursor="grabbing",()=>{document.body.style.cursor=""})},children:Et?Et.data.current?.type==="toolbar-item"?a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-indigo-500 bg-white shadow-xl opacity-90 cursor-grabbing ring-2 ring-indigo-500/20 w-48",children:[a.jsx("div",{className:"p-2 rounded-md bg-indigo-100 text-indigo-600",children:a.jsx("div",{className:"w-5 h-5 flex items-center justify-center font-bold",children:"+"})}),a.jsx("span",{className:"text-sm font-medium text-slate-900",children:"Placing Field..."})]}):Et.data.current?.type==="signature-field"?a.jsxs("div",{className:"w-64 bg-white/95 backdrop-blur-sm border-2 border-indigo-500 rounded-lg shadow-2xl p-3 flex flex-col cursor-grabbing",children:[a.jsx("div",{className:"flex items-center gap-2 text-indigo-700 font-semibold border-b pb-2 mb-2",children:a.jsx("span",{children:Et.data.current.signeeName||"Signature"})}),a.jsx("div",{className:"h-10 flex items-center justify-center text-indigo-200",children:"Sign Here"})]}):null:null}),A&&a.jsxs("div",{className:"bg-amber-100 border-b border-amber-200 px-4 py-2 flex items-center justify-between text-amber-800 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_r,{size:16}),a.jsxs("span",{className:"font-medium",children:["Previewing Version ",A.version_number]})]}),a.jsxs("button",{onClick:mt,className:"text-amber-700 hover:text-amber-900 font-medium hover:underline flex items-center gap-1",children:[a.jsx(bs,{size:14})," Exit Preview"]})]}),a.jsx(hx,{isOpen:j,onClose:()=>E(!1),documentId:e,documentName:ae,isReminder:!!fe,onSuccess:rt,getHtmlContent:async()=>{let le=I;if(I&&!I.startsWith("data:")){const Ke=await Xe(I);Ke&&(le=Ke)}return Bw(U,Z,ae,$,le)},signatures:$}),a.jsxs("header",{className:"no-print h-14 md:h-16 bg-white/80 backdrop-blur-md border-b border-slate-200/60 px-4 md:px-6 flex items-center justify-between flex-shrink-0 z-30 shadow-sm relative transition-all duration-300",children:[a.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[a.jsx("button",{onClick:St,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors flex-shrink-0",children:a.jsx(Ia,{size:20})}),a.jsxs("div",{className:"min-w-0 relative",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{ref:ot,type:"text",value:ae,onChange:le=>{xe(le.target.value),M&&L(null)},className:`font-bold text-sm md:text-lg bg-transparent border-b-2 focus:ring-0 p-0 m-0 w-auto min-w-[150px] max-w-[300px] placeholder-slate-400 truncate transition-colors ${M?"border-red-500 text-slate-800 ring-4 ring-red-500/10 rounded-sm px-1 -mx-1":"border-transparent hover:border-slate-200 text-slate-800"}`,placeholder:"Enter Document Name"}),M&&a.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 bg-white rounded-lg shadow-xl border border-red-100 z-50 p-3",children:[a.jsxs("div",{className:"flex items-start gap-2 text-red-600 mb-2",children:[a.jsx(wa,{size:16}),a.jsx("p",{className:"text-xs font-semibold",children:M})]}),z&&a.jsxs("div",{className:"bg-slate-50 rounded p-2",children:[a.jsx("p",{className:"text-[10px] text-slate-500 mb-1 uppercase font-bold",children:"Suggestion:"}),a.jsx("button",{onClick:()=>{xe(z),L(null)},className:"text-sm font-bold text-indigo-600 hover:underline",children:z})]})]})]}),a.jsx("button",{onClick:Ze,className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-md transition-colors",children:a.jsx(hg,{size:16})}),fe&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-emerald-50 text-emerald-600 text-[10px] font-medium border border-emerald-100",children:[a.jsx(fi,{size:10})," Sent"]})]}),a.jsx("p",{className:"text-[10px] md:text-xs text-slate-400 font-medium whitespace-nowrap hidden sm:block mt-0.5",children:e?"Autosaved locally":"Draft"})]})]}),a.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[a.jsxs("div",{className:"hidden lg:flex items-center bg-slate-100 rounded-lg p-1 mr-4",children:[a.jsx("button",{onClick:qe,className:"p-1.5 hover:bg-white rounded-md text-slate-500",children:a.jsx(Yo,{size:16})}),a.jsxs("span",{className:"text-xs font-semibold text-slate-600 w-12 text-center",children:[Math.round(r*100),"%"]}),a.jsx("button",{onClick:Pt,className:"p-1.5 hover:bg-white rounded-md text-slate-500",children:a.jsx(Go,{size:16})})]}),a.jsxs("button",{onClick:()=>u(!0),className:"hidden lg:flex items-center gap-2 px-4 py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all",children:[a.jsx(la,{size:18}),a.jsx("span",{children:"History"})]}),a.jsxs("button",{onClick:An,disabled:g,className:"hidden lg:flex items-center gap-2 px-4 py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all disabled:opacity-50",children:[g?a.jsx(Sn,{size:18,className:"animate-spin"}):a.jsx(yf,{size:18}),a.jsx("span",{children:"Print"})]}),a.jsxs("button",{onClick:Qe,className:`hidden lg:flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg border border-transparent transition-all ${fe?"text-amber-600 hover:bg-amber-50 hover:border-amber-200":"text-slate-600 hover:bg-slate-50 hover:border-slate-200"}`,children:[fe?a.jsx(Pl,{size:18}):a.jsx(Js,{size:18}),a.jsx("span",{children:fe?"Remind":"Send"})]}),a.jsxs("button",{onClick:ye,disabled:y,className:"hidden lg:flex items-center gap-2 px-4 py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all disabled:opacity-50",children:[y?a.jsx(Sn,{size:18,className:"animate-spin"}):a.jsx(Yi,{size:18}),a.jsx("span",{children:"Export"})]}),a.jsxs("button",{onClick:yt,className:`hidden lg:flex items-center gap-2 px-5 py-2 rounded-lg text-white font-medium shadow-md transition-all ${X?"bg-emerald-500":"bg-indigo-600 hover:bg-indigo-700"}`,children:[X?a.jsx(fi,{size:18}):a.jsx(Xi,{size:18}),a.jsx("span",{children:X?"Saved!":"Save"})]})]})]}),a.jsxs("div",{className:"flex flex-col lg:flex-row flex-1 overflow-hidden relative pb-[70px] lg:pb-0",children:[a.jsx("div",{className:`no-print w-full lg:w-[400px] h-full bg-white border-r border-slate-200 overflow-y-auto z-20 shadow-sm flex-shrink-0 lg:order-1 ${t||s==="edit"?"block":"hidden"}`,children:a.jsx(SP,{formData:U,onChange:se,docContent:Z,onContentChange:ee,addSection:ne,removeSection:V,updateSection:re,reorderSections:ge,styles:pe,onStyleUpdate:je,onStyleReset:Se})}),a.jsxs("div",{className:`flex-1 h-full overflow-y-auto bg-slate-50/50 p-4 md:p-8 sm:p-12 flex justify-center items-start scrollbar-thin scrollbar-thumb-slate-300 lg:order-2 ${t||s==="preview"?"flex":"hidden"}`,style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"20px 20px"},children:[a.jsx(Hy,{data:Fe,content:nt,zoom:r,signatures:$,onRemoveSignature:We,onEditSignature:qs,businessLogo:I,styles:pe}),!t&&s==="preview"&&a.jsx("button",{onClick:Os,className:"fixed bottom-24 right-6 w-14 h-14 bg-indigo-600 text-white rounded-full shadow-lg flex items-center justify-center z-30",children:"+"})]})]}),a.jsx(ux,{documentId:e,isOpen:c,onClose:()=>u(!1),onPreview:Nt,onDownload:et,onRestore:It}),!t&&a.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 flex justify-between items-center px-6 py-3 pb-safe z-40 safe-area-bottom",children:[a.jsxs("button",{onClick:()=>i("edit"),className:`flex flex-col items-center gap-1 ${s==="edit"?"text-indigo-600":"text-slate-400"}`,children:[a.jsx(wn,{size:24}),a.jsx("span",{className:"text-[10px]",children:"Editor"})]}),a.jsxs("button",{onClick:()=>i("preview"),className:`flex flex-col items-center gap-1 ${s==="preview"?"text-indigo-600":"text-slate-400"}`,children:[a.jsx(_r,{size:24}),a.jsx("span",{className:"text-[10px]",children:"Preview"})]}),a.jsxs("button",{onClick:yt,className:`flex flex-col items-center gap-1 ${X?"text-emerald-500":"text-slate-400"}`,children:[a.jsx(Xi,{size:24}),a.jsx("span",{className:"text-[10px]",children:"Save"})]}),a.jsxs("button",{onClick:()=>f(!0),className:`flex flex-col items-center gap-1 ${h?"text-indigo-600":"text-slate-400"}`,children:[a.jsx(tN,{size:24}),a.jsx("span",{className:"text-[10px]",children:"More"})]})]})]})})},SJ=[{id:"nda",title:"Non-Disclosure Agreement",description:"Standard confidentiality agreement for business partnerships.",icon:Y9,color:"bg-indigo-500",available:!0,route:"/documents/nda"},{id:"offer-letter",title:"Employment Offer Letter",description:"Formal job offer with compensation and benefits details.",icon:ug,color:"bg-blue-500",available:!0,route:"/documents/offer-letter"},{id:"consulting-agreement",title:"Consulting Agreement",description:"Contract defining scope, services, and payment terms.",icon:rU,color:"bg-violet-500",available:!0,route:"/documents/consulting-agreement"},{id:"proposal",title:"Business Proposal",description:"Comprehensive proposal with timeline, scope, and pricing.",icon:wn,color:"bg-emerald-500",available:!0,route:"/documents/proposal"},{id:"invoice",title:"Service Invoice",description:"Professional invoice template with tax calculations.",icon:C5,color:"bg-orange-500",available:!0,route:"/documents/invoice"}],NJ=({isOpen:n,onClose:e})=>{const t=ts(),[s,i]=_.useState("grid"),r=o=>{o.available&&(t(o.route),e())};return sf.createPortal(a.jsx(dn,{children:n&&a.jsxs(a.Fragment,{children:[a.jsx(Ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-[9998]",onClick:e},"backdrop"),a.jsx(Ie.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-0 m-auto max-w-4xl h-fit max-h-[90vh] z-[9999] p-4 pointer-events-none flex items-center justify-center",children:a.jsxs("div",{className:"bg-white/95 backdrop-blur-md w-full rounded-2xl shadow-2xl overflow-hidden border border-white/20 relative pointer-events-auto flex flex-col max-h-full",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-start bg-gradient-to-br from-slate-50 to-white/50",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-900 tracking-tight",children:"Create New Document"}),a.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Select a premium template to get started with your document."})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-lg border border-slate-200",children:[a.jsx("button",{onClick:()=>i("grid"),className:`p-1.5 rounded-md transition-all ${s==="grid"?"bg-white shadow text-indigo-600":"text-slate-400 hover:text-slate-600"}`,title:"Grid View",children:a.jsx(iN,{size:18})}),a.jsx("button",{onClick:()=>i("list"),className:`p-1.5 rounded-md transition-all ${s==="list"?"bg-white shadow text-indigo-600":"text-slate-400 hover:text-slate-600"}`,title:"List View",children:a.jsx(mv,{size:18})})]}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-full transition-colors text-slate-400 hover:text-slate-600",children:a.jsx(bs,{size:24})})]})]}),a.jsx("div",{className:`p-6 overflow-y-auto ${s==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"flex flex-col gap-3"}`,children:SJ.map(o=>a.jsxs("button",{onClick:()=>r(o),disabled:!o.available,className:`group relative transition-all text-left outline-none focus:ring-2 ring-indigo-500/20 rounded-xl
                                            ${s==="grid"?"p-6 border border-slate-200 hover:border-indigo-300 hover:shadow-lg hover:-translate-y-1 bg-white flex flex-col items-start gap-4":"p-4 border border-slate-200 hover:border-indigo-300 hover:bg-indigo-50/30 flex items-center gap-4 bg-white"}
                                            ${!o.available&&"opacity-60 cursor-not-allowed grayscale"}
                                        `,children:[a.jsx("div",{className:`
                                            flex items-center justify-center text-white shadow-lg rounded-xl transition-transform group-hover:scale-110 duration-300
                                            ${s==="grid"?"w-14 h-14 mb-2":"w-12 h-12"}
                                            ${o.color}
                                        `,children:a.jsx(o.icon,{size:s==="grid"?28:24})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h3",{className:`font-bold text-slate-800 flex items-center gap-2 ${s==="grid"?"text-lg":"text-base"}`,children:[o.title,!o.available&&a.jsx("span",{className:"text-[10px] uppercase tracking-wider font-bold bg-slate-200 text-slate-500 px-2 py-0.5 rounded-full",children:"Soon"})]}),a.jsx("p",{className:`text-slate-500 leading-relaxed ${s==="grid"?"text-sm mt-2 line-clamp-3":"text-sm mt-0.5 line-clamp-1"}`,children:o.description})]}),o.available&&a.jsx("div",{className:`
                                                text-slate-300 group-hover:text-indigo-500 transition-colors
                                                ${s==="grid"?"absolute top-6 right-6 opacity-0 group-hover:opacity-100 -translate-x-2 group-hover:translate-x-0 transition-all duration-300":""}
                                            `,children:a.jsx(Ml,{size:20})})]},o.id))}),a.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-100 text-center text-xs text-slate-400 font-medium",children:["Can't find what you're looking for? ",a.jsx("button",{className:"text-indigo-600 hover:underline",children:"Request a template"})]})]})},"modal")]})}),document.body)},jJ=({isOpen:n,onClose:e,history:t,loading:s})=>n?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/20 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[80vh] flex flex-col overflow-hidden",children:[a.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between bg-slate-50",children:[a.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[a.jsx(Js,{size:18,className:"text-slate-500"})," Share History"]}),a.jsx("button",{onClick:e,className:"p-1 hover:bg-slate-200 rounded text-slate-500 transition-colors",children:a.jsx(bs,{size:20})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:s?a.jsx("div",{className:"text-center py-8 text-slate-500",children:"Loading history..."}):t.length===0?a.jsxs("div",{className:"text-center py-12 text-slate-400",children:[a.jsx(Js,{size:48,className:"mx-auto mb-2 opacity-20"}),a.jsx("p",{children:"No share history found for this document."})]}):t.map(i=>a.jsxs("div",{className:"bg-white border border-slate-100 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4 mb-3",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 flex-shrink-0",children:a.jsx(Ai,{size:20})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-slate-900",children:i.recipient_email}),a.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-2 mt-1",children:[a.jsx(Ld,{size:12}),new Date(i.sent_at).toLocaleString()]})]})]}),a.jsxs("div",{className:"text-xs text-slate-400 bg-slate-50 px-2 py-1 rounded h-fit whitespace-nowrap",children:["Sent by: ",i.sender?.name||"System"]})]}),i.message&&a.jsxs("div",{className:"bg-slate-50 rounded-md p-3 text-sm text-slate-600 mt-2 flex gap-2",children:[a.jsx(OU,{size:16,className:"text-slate-400 flex-shrink-0 mt-0.5"}),a.jsxs("p",{className:"italic",children:['"',i.message,'"']})]})]},i.id))})]})}):null,fx=({title:n,subtitle:e,children:t})=>a.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900 tracking-tight",children:n}),e&&a.jsx("p",{className:"text-slate-500 mt-1 text-sm",children:e})]}),a.jsx("div",{className:"flex items-center gap-3",children:t})]}),Pv=({children:n,className:e=""})=>a.jsx("div",{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 ${e}`,children:a.jsx(Ie.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},children:n})}),CJ=({viewMode:n})=>n==="list"?a.jsxs("div",{className:"flex items-center gap-6 py-4 px-6 border-b border-slate-100 last:border-0 animate-pulse",children:[a.jsx("div",{className:"w-5 h-5 bg-slate-100 rounded"}),a.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-lg"}),a.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-4 gap-4 w-full",children:[a.jsx("div",{className:"h-4 bg-slate-100 rounded w-3/4"}),a.jsx("div",{className:"hidden md:block h-4 bg-slate-100 rounded w-1/2"}),a.jsx("div",{className:"hidden md:block h-4 bg-slate-100 rounded w-1/3"}),a.jsx("div",{className:"hidden md:block h-4 bg-slate-100 rounded w-1/2"})]}),a.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded ml-auto"})]}):a.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-5 animate-pulse flex flex-col h-[280px]",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-lg"}),a.jsx("div",{className:"w-16 h-6 bg-slate-100 rounded-full"})]}),a.jsxs("div",{className:"space-y-3 flex-1",children:[a.jsx("div",{className:"h-5 bg-slate-100 rounded w-3/4"}),a.jsx("div",{className:"h-4 bg-slate-50 rounded w-1/2"})]}),a.jsxs("div",{className:"mt-auto pt-4 border-t border-slate-50 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-100"}),a.jsx("div",{className:"w-20 h-3 bg-slate-100 rounded"})]}),a.jsx("div",{className:"w-16 h-3 bg-slate-100 rounded"})]})]}),jP=6048e5,AJ=864e5,Fb=43200,IT=1440,BT=Symbol.for("constructDateFrom");function Rd(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&BT in n?n[BT](e):n instanceof Date?new n.constructor(e):new Date(e)}function ca(n,e){return Rd(e||n,n)}let EJ={};function mx(){return EJ}function M0(n,e){const t=mx(),s=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=ca(n,e?.in),r=i.getDay(),o=(r<s?7:0)+r-s;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Uy(n,e){return M0(n,{...e,weekStartsOn:1})}function CP(n,e){const t=ca(n,e?.in),s=t.getFullYear(),i=Rd(t,0);i.setFullYear(s+1,0,4),i.setHours(0,0,0,0);const r=Uy(i),o=Rd(t,0);o.setFullYear(s,0,4),o.setHours(0,0,0,0);const c=Uy(o);return t.getTime()>=r.getTime()?s+1:t.getTime()>=c.getTime()?s:s-1}function Vy(n){const e=ca(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function Ov(n,...e){const t=Rd.bind(null,n||e.find(s=>typeof s=="object"));return e.map(t)}function HT(n,e){const t=ca(n,e?.in);return t.setHours(0,0,0,0),t}function _J(n,e,t){const[s,i]=Ov(t?.in,n,e),r=HT(s),o=HT(i),c=+r-Vy(r),u=+o-Vy(o);return Math.round((c-u)/AJ)}function TJ(n,e){const t=CP(n,e),s=Rd(n,0);return s.setFullYear(t,0,4),s.setHours(0,0,0,0),Uy(s)}function hy(n,e){const t=+ca(n)-+ca(e);return t<0?-1:t>0?1:t}function kJ(n){return Rd(n,Date.now())}function DJ(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function RJ(n){return!(!DJ(n)&&typeof n!="number"||isNaN(+ca(n)))}function MJ(n,e,t){const[s,i]=Ov(t?.in,n,e),r=s.getFullYear()-i.getFullYear(),o=s.getMonth()-i.getMonth();return r*12+o}function PJ(n){return e=>{const s=(n?Math[n]:Math.trunc)(e);return s===0?0:s}}function OJ(n,e){return+ca(n)-+ca(e)}function LJ(n,e){const t=ca(n,e?.in);return t.setHours(23,59,59,999),t}function FJ(n,e){const t=ca(n,e?.in),s=t.getMonth();return t.setFullYear(t.getFullYear(),s+1,0),t.setHours(23,59,59,999),t}function zJ(n,e){const t=ca(n,e?.in);return+LJ(t,e)==+FJ(t,e)}function IJ(n,e,t){const[s,i,r]=Ov(t?.in,n,n,e),o=hy(i,r),c=Math.abs(MJ(i,r));if(c<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*c);let u=hy(i,r)===-o;zJ(s)&&c===1&&hy(s,r)===1&&(u=!1);const h=o*(c-+u);return h===0?0:h}function BJ(n,e,t){const s=OJ(n,e)/1e3;return PJ(t?.roundingMethod)(s)}function HJ(n,e){const t=ca(n,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const UJ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},VJ=(n,e,t)=>{let s;const i=UJ[n];return typeof i=="string"?s=i:e===1?s=i.one:s=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+s:s+" ago":s};function Hw(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const WJ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},GJ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},YJ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},XJ={date:Hw({formats:WJ,defaultWidth:"full"}),time:Hw({formats:GJ,defaultWidth:"full"}),dateTime:Hw({formats:YJ,defaultWidth:"full"})},KJ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ZJ=(n,e,t,s)=>KJ[n];function Lp(n){return(e,t)=>{const s=t?.context?String(t.context):"standalone";let i;if(s==="formatting"&&n.formattingValues){const o=n.defaultFormattingWidth||n.defaultWidth,c=t?.width?String(t.width):o;i=n.formattingValues[c]||n.formattingValues[o]}else{const o=n.defaultWidth,c=t?.width?String(t.width):n.defaultWidth;i=n.values[c]||n.values[o]}const r=n.argumentCallback?n.argumentCallback(e):e;return i[r]}}const QJ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},JJ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},qJ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$J={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},tq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},nq=(n,e)=>{const t=Number(n),s=t%100;if(s>20||s<10)switch(s%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},sq={ordinalNumber:nq,era:Lp({values:QJ,defaultWidth:"wide"}),quarter:Lp({values:JJ,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Lp({values:qJ,defaultWidth:"wide"}),day:Lp({values:$J,defaultWidth:"wide"}),dayPeriod:Lp({values:eq,defaultWidth:"wide",formattingValues:tq,defaultFormattingWidth:"wide"})};function Fp(n){return(e,t={})=>{const s=t.width,i=s&&n.matchPatterns[s]||n.matchPatterns[n.defaultMatchWidth],r=e.match(i);if(!r)return null;const o=r[0],c=s&&n.parsePatterns[s]||n.parsePatterns[n.defaultParseWidth],u=Array.isArray(c)?aq(c,g=>g.test(o)):iq(c,g=>g.test(o));let h;h=n.valueCallback?n.valueCallback(u):u,h=t.valueCallback?t.valueCallback(h):h;const f=e.slice(o.length);return{value:h,rest:f}}}function iq(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function aq(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function rq(n){return(e,t={})=>{const s=e.match(n.matchPattern);if(!s)return null;const i=s[0],r=e.match(n.parsePattern);if(!r)return null;let o=n.valueCallback?n.valueCallback(r[0]):r[0];o=t.valueCallback?t.valueCallback(o):o;const c=e.slice(i.length);return{value:o,rest:c}}}const oq=/^(\d+)(th|st|nd|rd)?/i,lq=/\d+/i,cq={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},dq={any:[/^b/i,/^(a|c)/i]},uq={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},hq={any:[/1/i,/2/i,/3/i,/4/i]},fq={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},mq={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},gq={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},pq={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},xq={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},bq={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},yq={ordinalNumber:rq({matchPattern:oq,parsePattern:lq,valueCallback:n=>parseInt(n,10)}),era:Fp({matchPatterns:cq,defaultMatchWidth:"wide",parsePatterns:dq,defaultParseWidth:"any"}),quarter:Fp({matchPatterns:uq,defaultMatchWidth:"wide",parsePatterns:hq,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Fp({matchPatterns:fq,defaultMatchWidth:"wide",parsePatterns:mq,defaultParseWidth:"any"}),day:Fp({matchPatterns:gq,defaultMatchWidth:"wide",parsePatterns:pq,defaultParseWidth:"any"}),dayPeriod:Fp({matchPatterns:xq,defaultMatchWidth:"any",parsePatterns:bq,defaultParseWidth:"any"})},AP={code:"en-US",formatDistance:VJ,formatLong:XJ,formatRelative:ZJ,localize:sq,match:yq,options:{weekStartsOn:0,firstWeekContainsDate:1}};function vq(n,e){const t=ca(n,e?.in);return _J(t,HJ(t))+1}function wq(n,e){const t=ca(n,e?.in),s=+Uy(t)-+TJ(t);return Math.round(s/jP)+1}function EP(n,e){const t=ca(n,e?.in),s=t.getFullYear(),i=mx(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,o=Rd(e?.in||n,0);o.setFullYear(s+1,0,r),o.setHours(0,0,0,0);const c=M0(o,e),u=Rd(e?.in||n,0);u.setFullYear(s,0,r),u.setHours(0,0,0,0);const h=M0(u,e);return+t>=+c?s+1:+t>=+h?s:s-1}function Sq(n,e){const t=mx(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,i=EP(n,e),r=Rd(e?.in||n,0);return r.setFullYear(i,0,s),r.setHours(0,0,0,0),M0(r,e)}function Nq(n,e){const t=ca(n,e?.in),s=+M0(t,e)-+Sq(t,e);return Math.round(s/jP)+1}function qn(n,e){const t=n<0?"-":"",s=Math.abs(n).toString().padStart(e,"0");return t+s}const Xu={y(n,e){const t=n.getFullYear(),s=t>0?t:1-t;return qn(e==="yy"?s%100:s,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):qn(t+1,2)},d(n,e){return qn(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];default:return t==="am"?"a.m.":"p.m."}},h(n,e){return qn(n.getHours()%12||12,e.length)},H(n,e){return qn(n.getHours(),e.length)},m(n,e){return qn(n.getMinutes(),e.length)},s(n,e){return qn(n.getSeconds(),e.length)},S(n,e){const t=e.length,s=n.getMilliseconds(),i=Math.trunc(s*Math.pow(10,t-3));return qn(i,e.length)}},ym={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},UT={G:function(n,e,t){const s=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(s,{width:"abbreviated"});case"GGGGG":return t.era(s,{width:"narrow"});default:return t.era(s,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const s=n.getFullYear(),i=s>0?s:1-s;return t.ordinalNumber(i,{unit:"year"})}return Xu.y(n,e)},Y:function(n,e,t,s){const i=EP(n,s),r=i>0?i:1-i;if(e==="YY"){const o=r%100;return qn(o,2)}return e==="Yo"?t.ordinalNumber(r,{unit:"year"}):qn(r,e.length)},R:function(n,e){const t=CP(n);return qn(t,e.length)},u:function(n,e){const t=n.getFullYear();return qn(t,e.length)},Q:function(n,e,t){const s=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return qn(s,2);case"Qo":return t.ordinalNumber(s,{unit:"quarter"});case"QQQ":return t.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(s,{width:"narrow",context:"formatting"});default:return t.quarter(s,{width:"wide",context:"formatting"})}},q:function(n,e,t){const s=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return qn(s,2);case"qo":return t.ordinalNumber(s,{unit:"quarter"});case"qqq":return t.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(s,{width:"narrow",context:"standalone"});default:return t.quarter(s,{width:"wide",context:"standalone"})}},M:function(n,e,t){const s=n.getMonth();switch(e){case"M":case"MM":return Xu.M(n,e);case"Mo":return t.ordinalNumber(s+1,{unit:"month"});case"MMM":return t.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(s,{width:"narrow",context:"formatting"});default:return t.month(s,{width:"wide",context:"formatting"})}},L:function(n,e,t){const s=n.getMonth();switch(e){case"L":return String(s+1);case"LL":return qn(s+1,2);case"Lo":return t.ordinalNumber(s+1,{unit:"month"});case"LLL":return t.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(s,{width:"narrow",context:"standalone"});default:return t.month(s,{width:"wide",context:"standalone"})}},w:function(n,e,t,s){const i=Nq(n,s);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):qn(i,e.length)},I:function(n,e,t){const s=wq(n);return e==="Io"?t.ordinalNumber(s,{unit:"week"}):qn(s,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Xu.d(n,e)},D:function(n,e,t){const s=vq(n);return e==="Do"?t.ordinalNumber(s,{unit:"dayOfYear"}):qn(s,e.length)},E:function(n,e,t){const s=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(s,{width:"short",context:"formatting"});default:return t.day(s,{width:"wide",context:"formatting"})}},e:function(n,e,t,s){const i=n.getDay(),r=(i-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(r);case"ee":return qn(r,2);case"eo":return t.ordinalNumber(r,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,s){const i=n.getDay(),r=(i-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(r);case"cc":return qn(r,e.length);case"co":return t.ordinalNumber(r,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const s=n.getDay(),i=s===0?7:s;switch(e){case"i":return String(i);case"ii":return qn(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(s,{width:"short",context:"formatting"});default:return t.day(s,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const s=n.getHours();let i;switch(s===12?i=ym.noon:s===0?i=ym.midnight:i=s/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const s=n.getHours();let i;switch(s>=17?i=ym.evening:s>=12?i=ym.afternoon:s>=4?i=ym.morning:i=ym.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let s=n.getHours()%12;return s===0&&(s=12),t.ordinalNumber(s,{unit:"hour"})}return Xu.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Xu.H(n,e)},K:function(n,e,t){const s=n.getHours()%12;return e==="Ko"?t.ordinalNumber(s,{unit:"hour"}):qn(s,e.length)},k:function(n,e,t){let s=n.getHours();return s===0&&(s=24),e==="ko"?t.ordinalNumber(s,{unit:"hour"}):qn(s,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Xu.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Xu.s(n,e)},S:function(n,e){return Xu.S(n,e)},X:function(n,e,t){const s=n.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return WT(s);case"XXXX":case"XX":return tf(s);default:return tf(s,":")}},x:function(n,e,t){const s=n.getTimezoneOffset();switch(e){case"x":return WT(s);case"xxxx":case"xx":return tf(s);default:return tf(s,":")}},O:function(n,e,t){const s=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+VT(s,":");default:return"GMT"+tf(s,":")}},z:function(n,e,t){const s=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+VT(s,":");default:return"GMT"+tf(s,":")}},t:function(n,e,t){const s=Math.trunc(+n/1e3);return qn(s,e.length)},T:function(n,e,t){return qn(+n,e.length)}};function VT(n,e=""){const t=n>0?"-":"+",s=Math.abs(n),i=Math.trunc(s/60),r=s%60;return r===0?t+String(i):t+String(i)+e+qn(r,2)}function WT(n,e){return n%60===0?(n>0?"-":"+")+qn(Math.abs(n)/60,2):tf(n,e)}function tf(n,e=""){const t=n>0?"-":"+",s=Math.abs(n),i=qn(Math.trunc(s/60),2),r=qn(s%60,2);return t+i+e+r}const GT=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},_P=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},jq=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],s=t[1],i=t[2];if(!i)return GT(n,e);let r;switch(s){case"P":r=e.dateTime({width:"short"});break;case"PP":r=e.dateTime({width:"medium"});break;case"PPP":r=e.dateTime({width:"long"});break;default:r=e.dateTime({width:"full"});break}return r.replace("{{date}}",GT(s,e)).replace("{{time}}",_P(i,e))},Cq={p:_P,P:jq},Aq=/^D+$/,Eq=/^Y+$/,_q=["D","DD","YY","YYYY"];function Tq(n){return Aq.test(n)}function kq(n){return Eq.test(n)}function Dq(n,e,t){const s=Rq(n,e,t);if(console.warn(s),_q.includes(n))throw new RangeError(s)}function Rq(n,e,t){const s=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${s} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Mq=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Pq=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Oq=/^'([^]*?)'?$/,Lq=/''/g,Fq=/[a-zA-Z]/;function K2(n,e,t){const s=mx(),i=s.locale??AP,r=s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=s.weekStartsOn??s.locale?.options?.weekStartsOn??0,c=ca(n,t?.in);if(!RJ(c))throw new RangeError("Invalid time value");let u=e.match(Pq).map(f=>{const g=f[0];if(g==="p"||g==="P"){const x=Cq[g];return x(f,i.formatLong)}return f}).join("").match(Mq).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const g=f[0];if(g==="'")return{isToken:!1,value:zq(f)};if(UT[g])return{isToken:!0,value:f};if(g.match(Fq))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:f}});i.localize.preprocessor&&(u=i.localize.preprocessor(c,u));const h={firstWeekContainsDate:r,weekStartsOn:o,locale:i};return u.map(f=>{if(!f.isToken)return f.value;const g=f.value;(kq(g)||Tq(g))&&Dq(g,e,String(n));const x=UT[g[0]];return x(c,g,i.localize,h)}).join("")}function zq(n){const e=n.match(Oq);return e?e[1].replace(Lq,"'"):n}function Iq(n,e,t){const s=mx(),i=t?.locale??s.locale??AP,r=2520,o=hy(n,e);if(isNaN(o))throw new RangeError("Invalid time value");const c=Object.assign({},t,{addSuffix:t?.addSuffix,comparison:o}),[u,h]=Ov(t?.in,...o>0?[e,n]:[n,e]),f=BJ(h,u),g=(Vy(h)-Vy(u))/1e3,x=Math.round((f-g)/60);let y;if(x<2)return t?.includeSeconds?f<5?i.formatDistance("lessThanXSeconds",5,c):f<10?i.formatDistance("lessThanXSeconds",10,c):f<20?i.formatDistance("lessThanXSeconds",20,c):f<40?i.formatDistance("halfAMinute",0,c):f<60?i.formatDistance("lessThanXMinutes",1,c):i.formatDistance("xMinutes",1,c):x===0?i.formatDistance("lessThanXMinutes",1,c):i.formatDistance("xMinutes",x,c);if(x<45)return i.formatDistance("xMinutes",x,c);if(x<90)return i.formatDistance("aboutXHours",1,c);if(x<IT){const N=Math.round(x/60);return i.formatDistance("aboutXHours",N,c)}else{if(x<r)return i.formatDistance("xDays",1,c);if(x<Fb){const N=Math.round(x/IT);return i.formatDistance("xDays",N,c)}else if(x<Fb*2)return y=Math.round(x/Fb),i.formatDistance("aboutXMonths",y,c)}if(y=IJ(h,u),y<12){const N=Math.round(x/Fb);return i.formatDistance("xMonths",N,c)}else{const N=y%12,j=Math.trunc(y/12);return N<3?i.formatDistance("aboutXYears",j,c):N<9?i.formatDistance("overXYears",j,c):i.formatDistance("almostXYears",j+1,c)}}function Z2(n,e){return Iq(n,kJ(n),e)}const Bq=_.memo(({doc:n,getStatusStyle:e,variants:t,onViewHistory:s,handleView:i})=>a.jsxs(Ie.div,{variants:t,className:"group relative bg-white rounded-xl border border-slate-200 p-5 cursor-pointer hover:shadow-lg hover:border-indigo-200 transition-all duration-200 flex flex-col justify-between h-full",onClick:()=>i(n),children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("div",{className:`p-2.5 rounded-lg transition-colors ${n.signers_count>0?"bg-purple-50 text-purple-600 group-hover:bg-purple-100":"bg-indigo-50 text-indigo-600 group-hover:bg-indigo-100"}`,children:n.signers_count>0?a.jsx(ar,{size:20}):a.jsx(wn,{size:20})}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsx("button",{onClick:r=>s(r,n.id),className:"p-1.5 rounded-md text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 transition-colors",title:"View Share History",children:a.jsx(Js,{size:14})}),a.jsx("span",{className:`px-2.5 py-1 rounded-md text-[10px] font-bold uppercase tracking-wider border ${e(n.status)}`,children:n.status})]})]}),a.jsx("h3",{className:"font-semibold text-slate-800 mb-1.5 group-hover:text-indigo-600 transition-colors line-clamp-1 text-base",children:n.title||n.name}),a.jsx("p",{className:"text-xs font-medium text-slate-500 mb-4 uppercase tracking-wider",children:n.type?.name||n.type})]}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100 mt-auto",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[n.creator?.avatar_url?a.jsx("img",{src:n.creator.avatar_url,alt:n.creator.name,className:"w-6 h-6 rounded-full object-cover border border-slate-200"}):a.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-100 flex items-center justify-center text-[10px] font-bold text-slate-600 border border-slate-200",children:n.creator?.name?n.creator.name.substring(0,2).toUpperCase():"NA"}),a.jsx("span",{className:"text-xs font-medium text-slate-600 truncate max-w-[100px]",title:n.creator?.name,children:n.creator?.name||"Unknown"})]}),a.jsxs("span",{className:"text-[11px] font-medium text-slate-400 flex items-center gap-1",children:[a.jsx(la,{size:12})," ",Z2(new Date(n.updated_at),{addSuffix:!0})]})]})]})),Hq=_.memo(({doc:n,getStatusStyle:e,variants:t,isSelected:s,toggleSelect:i,onViewHistory:r,activeMenuId:o,setActiveMenuId:c,handleView:u,handleDelete:h,handleRestore:f,viewMode:g})=>a.jsxs(Ie.div,{variants:t,className:`relative group bg-white hover:bg-slate-50 transition-colors border-b border-slate-100 last:border-b-0 ${s?"bg-indigo-50/50":""}`,onClick:()=>u(n),children:[a.jsx("div",{className:"md:hidden p-4 flex flex-col gap-3",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{onClick:x=>{x.stopPropagation(),i(n.id)},children:s?a.jsx(wf,{size:20,className:"text-indigo-600"}):a.jsx(jy,{size:20,className:"text-slate-300"})}),a.jsx("div",{className:`p-2 rounded-lg ${n.signers_count>0?"bg-purple-100 text-purple-600":"bg-indigo-100 text-indigo-600"}`,children:n.signers_count>0?a.jsx(ar,{size:16}):a.jsx(wn,{size:16})}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold text-sm text-slate-900 line-clamp-1",children:n.title||n.name}),a.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[a.jsx("span",{className:"text-xs text-slate-500 capitalize",children:n.type?.name||n.type}),a.jsx("span",{className:"text-[10px] text-slate-400",children:""}),a.jsxs("span",{className:"text-xs text-slate-500",children:[Z2(new Date(n.updated_at))," ago"]})]})]})]}),a.jsx("button",{onClick:x=>{x.stopPropagation(),c(o===n.id?null:n.id)},className:"p-1 text-slate-400 hover:text-slate-600 relative z-10",children:a.jsx(bf,{size:20})})]})}),a.jsxs("div",{className:"hidden md:grid px-6 py-4 grid-cols-[auto_3fr_1fr_1fr_1fr_1fr_auto] gap-6 items-center",children:[a.jsx("div",{onClick:x=>{x.stopPropagation(),i(n.id)},className:"cursor-pointer",children:s?a.jsx(wf,{size:18,className:"text-indigo-600"}):a.jsx(jy,{size:18,className:"text-slate-300 group-hover:text-slate-400"})}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`p-2 rounded-lg transition-colors ${n.signers_count>0?"bg-purple-50 text-purple-600":"bg-slate-100 text-slate-500 group-hover:bg-indigo-50 group-hover:text-indigo-600"}`,children:n.signers_count>0?a.jsx(ar,{size:18}):a.jsx(wn,{size:18})}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold text-sm text-slate-700 block group-hover:text-indigo-600 transition-colors",children:n.title||n.name}),n.signers_count>0&&a.jsx("span",{className:"text-[10px] bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded font-medium mt-1 inline-block",children:"Signature Required"})]})]}),a.jsx("div",{className:"text-sm text-slate-500 font-medium capitalize",children:n.type?.name||n.type}),a.jsx("div",{children:a.jsx("span",{className:`px-2.5 py-1 rounded-full text-[11px] font-bold border ${e(n.status)}`,children:n.status})}),a.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1.5",children:[a.jsx(la,{size:13,className:"text-slate-400"}),Z2(new Date(n.updated_at),{addSuffix:!0})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[n.creator?.avatar_url?a.jsx("img",{src:n.creator.avatar_url,alt:n.creator.name,className:"w-6 h-6 rounded-full object-cover border border-slate-200"}):a.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-100 flex items-center justify-center text-[10px] font-bold text-slate-600 border border-slate-200",children:n.creator?.name?n.creator.name.substring(0,2).toUpperCase():"NA"}),a.jsx("span",{className:"text-xs font-medium text-slate-600 truncate max-w-[80px]",children:n.creator?.name||"Unknown"})]}),a.jsxs("div",{className:"flex justify-end gap-1 relative",children:[a.jsx("button",{onClick:x=>r(x,n.id),className:"p-1.5 rounded-lg text-slate-400 hover:text-indigo-600 hover:bg-slate-100 transition-colors",title:"View History",children:a.jsx(Js,{size:16})}),a.jsx("button",{onClick:x=>{x.stopPropagation(),c(o===n.id?null:n.id)},className:"p-1.5 rounded-lg text-slate-400 hover:text-indigo-600 hover:bg-slate-100 transition-colors",children:a.jsx(bf,{size:16})})]})]}),a.jsx(dn,{children:o===n.id&&a.jsx(Ie.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.1},className:"absolute right-4 md:right-8 top-12 md:top-10 w-48 bg-white border border-slate-100 rounded-xl shadow-xl z-50 p-1.5 flex flex-col gap-0.5 origin-top-right",onClick:x=>x.stopPropagation(),children:g==="active"?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{u(n),c(null)},className:"w-full text-left flex items-center gap-2.5 px-3 py-2 text-sm font-medium text-slate-600 hover:bg-slate-50 hover:text-indigo-600 rounded-lg transition-colors",children:[a.jsx(_r,{size:16})," View/Edit"]}),a.jsxs("button",{onClick:()=>{h(n.id),c(null)},className:"w-full text-left flex items-center gap-2.5 px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[a.jsx(Ki,{size:16})," Delete"]})]}):a.jsxs("button",{onClick:()=>{f(n.id),c(null)},className:"w-full text-left flex items-center gap-2.5 px-3 py-2 text-sm font-medium text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors",children:[a.jsx(tx,{size:16})," Restore"]})})})]})),Uq={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},YT={hidden:{opacity:0,y:5},show:{opacity:1,y:0}},Vq=()=>{const n=ts(),{can:e}=mg(),[t,s]=_.useState(!1),[i,r]=_.useState(()=>localStorage.getItem("documentViewMode")||"list"),[o,c]=_.useState(!0),[u,h]=_.useState([]),[f,g]=_.useState(!1),[x,y]=_.useState([]),[N,j]=_.useState({current_page:1,last_page:1,per_page:10,total:0,from:0,to:0}),[E,A]=_.useState(null),[R,M]=_.useState(null),[L,z]=_.useState(null),[W,I]=_.useState({search:"",status:"all",type:"all",category:"all"}),[Y,U]=_.useState(!1),[Z,$]=_.useState([]),[ae,xe]=_.useState(!1),fe=ht.useMemo(()=>({canEdit:e("document.edit"),canDelete:e("document.delete"),canCreate:e("document.create")}),[e]),ke=_.useCallback(Oe=>{r(Oe),localStorage.setItem("documentViewMode",Oe)},[]),G=_.useCallback(async(Oe=1)=>{try{c(!0);const $e={page:Oe,per_page:N.per_page,search:W.search,status:W.status,type:W.type,category:W.category,view_mode:f?"trash":"active"},Le=await wt.get("/documents",{params:$e});h(Le.data.data||[]),Le.data.meta&&j(pe=>({...pe,current_page:Le.data.meta.current_page,last_page:Le.data.meta.last_page,total:Le.data.meta.total,from:Le.data.meta.from,to:Le.data.meta.to}))}catch($e){console.error("Failed to fetch documents",$e),h([])}finally{c(!1)}},[W,f,N.per_page]);_.useEffect(()=>{const Oe=setTimeout(()=>{G(1)},300);return()=>clearTimeout(Oe)},[G]),_.useEffect(()=>{const Oe=()=>A(null);return document.addEventListener("click",Oe),()=>document.removeEventListener("click",Oe)},[]);const X=_.useCallback((Oe,$e)=>{I(Le=>({...Le,[Oe]:$e}))},[]),se=_.useCallback(Oe=>{switch(Oe){case"draft":return"bg-slate-100 text-slate-700 border-slate-200";case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"signed":return"bg-emerald-50 text-emerald-700 border-emerald-200";case"completed":return"bg-emerald-100 text-emerald-700 border-emerald-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}},[]),ee=_.useCallback(async(Oe,$e)=>{Oe.stopPropagation(),U(!0),xe(!0);try{const Le=await aP($e);$(Le.data||[])}catch(Le){console.error("Failed to load history",Le),Te.error("Could not load history")}finally{xe(!1)}},[]),ne=_.useCallback(async(Oe,$e="preview")=>{try{const Le=await wt.get(`/documents/${Oe}`);z(Le.data.data),M($e)}catch{Te.error("Failed to load document details")}},[]),V=_.useCallback(Oe=>{if(Oe.signers_count>0||Oe.type?.slug==="general"&&Oe.signers_count>0)ne(Oe.id);else{const $e=Oe.type?.slug||"general";n(`/documents/${$e}/${Oe.id}`)}},[ne,n]),re=_.useCallback(async Oe=>{if(window.confirm("Are you sure you want to move this document to trash?"))try{await wt.delete(`/documents/${Oe}`),Te.success("Document moved to trash",{id:"doc-delete"}),G(N.current_page)}catch{Te.error("Failed to delete document",{id:"doc-delete-error"})}},[G,N.current_page]),ge=_.useCallback(async Oe=>{try{await wt.post(`/documents/${Oe}/restore`),Te.success("Document restored",{id:"doc-restore"}),G(N.current_page)}catch{Te.error("Failed to restore document",{id:"doc-restore-error"})}},[G,N.current_page]),Ne=_.useCallback(Oe=>{y($e=>$e.includes(Oe)?$e.filter(Le=>Le!==Oe):[...$e,Oe])},[]),Ce=_.useCallback(()=>{x.length===u.length&&u.length>0?y([]):y(u.map(Oe=>Oe.id))},[x.length,u]),We=async()=>{if(window.confirm(`Delete ${x.length} documents?`))try{await wt.post("/documents/bulk-delete",{ids:x}),Te.success(`${x.length} documents moved to trash`,{id:"bulk-delete"}),y([]),G(N.current_page)}catch{Te.error("Failed to bulk delete",{id:"bulk-delete-error"})}},Ge=async Oe=>{Te.promise(wt.post(`/documents/${Oe}/remind`,{email:L?.signers?.find($e=>$e.status!=="signed")?.email}),{loading:"Sending reminder...",success:"Reminder sent!",error:"Failed to send reminder"})};return a.jsxs(Pv,{children:[a.jsx(fx,{title:"Documents",subtitle:"Manage, organize, and track your legal documents.",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>{g(Oe=>!Oe),j(Oe=>({...Oe,current_page:1})),y([])},className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${f?"bg-red-50 text-red-700 border border-red-200":"bg-white text-slate-600 border border-slate-200 hover:bg-slate-50"}`,children:[f?a.jsx(tx,{size:16}):a.jsx(Ki,{size:16}),f?"Back to All":"Trash"]}),fe.canCreate&&!f&&a.jsxs("button",{onClick:()=>s(!0),className:"px-4 py-2 bg-slate-900 text-white rounded-lg font-semibold flex items-center gap-2 hover:bg-slate-800 transition-all shadow-lg shadow-slate-900/20 text-sm",children:[a.jsx(kd,{size:18,strokeWidth:2.5}),a.jsx("span",{children:"New Document"})]})]})}),a.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex flex-col xl:flex-row gap-4 justify-between items-center mb-6",children:[a.jsxs("div",{className:"relative flex-1 w-full xl:max-w-lg group",children:[a.jsx(Xm,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-slate-600 transition-colors",size:18}),a.jsx("input",{type:"text",value:W.search,onChange:Oe=>X("search",Oe.target.value),placeholder:"Search documents...",className:"w-full pl-10 pr-4 py-2 bg-slate-50 border-transparent rounded-lg text-sm focus:bg-white focus:ring-2 focus:ring-slate-100 focus:border-slate-300 transition-all placeholder-slate-400 text-slate-900 outline-none"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full xl:w-auto items-center",children:[a.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[a.jsx(nU,{size:16,className:"text-slate-400"}),a.jsxs("select",{value:W.type,onChange:Oe=>X("type",Oe.target.value),className:"px-3 py-2 bg-slate-50 border-transparent hover:bg-slate-100 rounded-lg text-sm text-slate-600 font-medium outline-none focus:ring-2 focus:ring-slate-100 cursor-pointer transition-colors w-full sm:w-auto",children:[a.jsx("option",{value:"all",children:"All Types"}),a.jsx("option",{value:"nda",children:"NDA"}),a.jsx("option",{value:"proposal",children:"Proposal"}),a.jsx("option",{value:"invoice",children:"Invoice"})]})]}),a.jsx("div",{className:"w-px h-6 bg-slate-200 hidden sm:block"}),a.jsxs("select",{value:W.category,onChange:Oe=>X("category",Oe.target.value),className:"px-3 py-2 bg-slate-50 border-transparent hover:bg-slate-100 rounded-lg text-sm text-slate-600 font-medium outline-none focus:ring-2 focus:ring-slate-100 cursor-pointer transition-colors w-full sm:w-auto",children:[a.jsx("option",{value:"all",children:"All Categories"}),a.jsx("option",{value:"generated",children:"Generated Docs"}),a.jsx("option",{value:"signature",children:"Signature Requests"})]}),a.jsx("div",{className:"w-px h-6 bg-slate-200 hidden sm:block"}),a.jsxs("select",{value:W.status,onChange:Oe=>X("status",Oe.target.value),className:"px-3 py-2 bg-slate-50 border-transparent hover:bg-slate-100 rounded-lg text-sm text-slate-600 font-medium outline-none focus:ring-2 focus:ring-slate-100 cursor-pointer transition-colors w-full sm:w-auto",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"draft",children:"Draft"}),a.jsx("option",{value:"sent",children:"Sent"}),a.jsx("option",{value:"signed",children:"Signed"})]}),a.jsx("div",{className:"w-px h-6 bg-slate-200 hidden sm:block"}),a.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-lg border border-slate-200",children:[a.jsx("button",{onClick:()=>ke("list"),className:`p-1.5 rounded-md transition-all ${i==="list"?"bg-white shadow-sm text-slate-700":"text-slate-400 hover:text-slate-600"}`,children:a.jsx(mv,{size:16})}),a.jsx("button",{onClick:()=>ke("grid"),className:`p-1.5 rounded-md transition-all ${i==="grid"?"bg-white shadow-sm text-slate-700":"text-slate-400 hover:text-slate-600"}`,children:a.jsx(iN,{size:16})})]})]})]}),x.length>0&&a.jsxs("div",{className:"flex items-center gap-4 w-full bg-slate-50 p-2 rounded-lg border border-slate-200 animate-in fade-in slide-in-from-top-2 mb-4",children:[a.jsxs("span",{className:"text-sm font-semibold text-slate-700 ml-2",children:[x.length," selected"]}),a.jsx("div",{className:"h-6 w-px bg-slate-300"}),a.jsxs("button",{onClick:We,className:"flex items-center gap-2 text-red-600 hover:bg-red-50 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[a.jsx(Ki,{size:16})," Delete Selected"]})]}),a.jsxs("div",{className:`${i==="list"?"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden":""}`,children:[o?a.jsx("div",{className:`p-6 ${i==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4"}`,children:[1,2,3,4,5,6].map(Oe=>a.jsx(CJ,{viewMode:i},Oe))}):a.jsx(Ie.div,{variants:Uq,initial:"hidden",animate:"show",className:i==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"overflow-x-auto",children:i==="list"?a.jsxs("div",{className:"w-full",children:[a.jsxs("div",{className:"hidden md:grid bg-slate-50/50 border-b border-slate-200 px-6 py-3 grid-cols-[auto_3fr_1fr_1fr_1fr_1fr_auto] gap-6 text-xs font-bold text-slate-500 uppercase tracking-wider",children:[a.jsx("div",{className:"w-6 flex items-center justify-center",children:a.jsx("button",{onClick:Ce,children:u.length>0&&x.length===u.length?a.jsx(wf,{size:18,className:"text-slate-900"}):a.jsx("div",{className:"w-[18px] h-[18px] border-2 border-slate-300 rounded mx-auto"})})}),a.jsx("div",{children:"Document Name"}),a.jsx("div",{children:"Type"}),a.jsx("div",{children:"Status"}),a.jsx("div",{children:"Updated"}),a.jsx("div",{children:"Owner"}),a.jsx("div",{className:"text-right",children:"Action"})]}),a.jsx("div",{children:u.map(Oe=>a.jsx(Hq,{doc:Oe,getStatusStyle:se,variants:YT,onViewHistory:ee,isSelected:x.includes(Oe.id),toggleSelect:Ne,activeMenuId:E,setActiveMenuId:A,handleView:V,handleDelete:re,handleRestore:ge,viewMode:f?"trash":"active"},Oe.id))})]}):u.map(Oe=>a.jsx(Bq,{doc:Oe,getStatusStyle:se,variants:YT,onViewHistory:ee,handleView:V},Oe.id))},i),!o&&u.length===0&&a.jsxs("div",{className:"text-center py-24 col-span-full flex flex-col items-center justify-center",children:[a.jsx("div",{className:"p-4 bg-slate-50 rounded-full mb-4 border border-slate-100",children:a.jsx(wn,{size:40,className:"text-slate-300",strokeWidth:1})}),a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No documents found"}),a.jsx("p",{className:"text-slate-500 max-w-sm mx-auto mb-6 text-sm",children:f?"Trash is empty.":"Create a new document to get started."}),fe.canCreate&&!f&&a.jsxs("button",{onClick:()=>s(!0),className:"px-4 py-2 bg-slate-900 text-white rounded-lg font-semibold flex items-center gap-2 hover:bg-slate-800 transition-all text-sm",children:[a.jsx(kd,{size:16}),a.jsx("span",{children:"Create Document"})]})]})]}),N.total>0&&a.jsxs("div",{className:"border-t border-slate-200 p-4 bg-slate-50 flex flex-col sm:flex-row items-center justify-between gap-4 text-sm mt-8 rounded-xl border border-t-0",children:[a.jsxs("div",{className:"text-slate-500 font-medium",children:["Showing ",a.jsx("span",{className:"text-slate-900 font-bold",children:N.from})," to ",a.jsx("span",{className:"text-slate-900 font-bold",children:N.to})," of ",a.jsx("span",{className:"text-slate-900 font-bold",children:N.total})," results"]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("select",{value:N.per_page,onChange:Oe=>j($e=>({...$e,per_page:Number(Oe.target.value),current_page:1})),className:"border border-slate-200 rounded-lg text-sm py-1.5 pl-2 pr-8 bg-white focus:outline-none focus:ring-2 focus:ring-slate-200 cursor-pointer font-medium text-slate-600",children:[a.jsx("option",{value:10,children:"10 per page"}),a.jsx("option",{value:20,children:"20 per page"}),a.jsx("option",{value:50,children:"50 per page"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>G(N.current_page-1),disabled:N.current_page<=1,className:"p-2 rounded-lg border border-slate-200 bg-white text-slate-600 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a.jsx(hv,{size:16})}),a.jsx("span",{className:"px-2 font-bold text-slate-700 min-w-[20px] text-center",children:N.current_page}),a.jsx("button",{onClick:()=>G(N.current_page+1),disabled:N.current_page>=N.last_page,className:"p-2 rounded-lg border border-slate-200 bg-white text-slate-600 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a.jsx(fo,{size:16})})]})]})]}),a.jsx(NJ,{isOpen:t,onClose:()=>s(!1)}),a.jsx(jJ,{isOpen:Y,onClose:()=>U(!1),history:Z,loading:ae}),a.jsx(dn,{children:R&&L&&a.jsxs(a.Fragment,{children:[a.jsx(Ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-slate-900/20 backdrop-blur-sm z-40",onClick:()=>M(null)}),a.jsxs(Ie.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},className:"fixed inset-y-0 right-0 w-full max-w-lg bg-white shadow-2xl z-50 flex flex-col border-l border-slate-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between bg-white",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-slate-800",children:R==="audit"?"Audit Trail":"Document Details"}),a.jsx("p",{className:"text-sm text-slate-500 mt-0.5 max-w-[300px] truncate",children:L.name})]}),a.jsx("button",{onClick:()=>M(null),className:"p-2 rounded-full hover:bg-slate-100 transition-all text-slate-400 hover:text-slate-700",children:a.jsx(bs,{size:20})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:R==="preview"?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[L.status==="completed"&&a.jsxs("button",{onClick:()=>n(`/signatures/${L.id}/view-signed`),className:"col-span-2 flex items-center justify-center gap-2 p-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-semibold transition-colors shadow-lg shadow-emerald-600/10",children:[a.jsx(_r,{size:18})," View Signed Document"]}),L.pdf_url&&a.jsxs("a",{href:L.pdf_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 p-3 bg-white border border-slate-200 hover:border-slate-300 text-slate-700 rounded-xl font-medium transition-all",children:[a.jsx(wn,{size:18})," Original PDF"]}),L.final_pdf_url&&a.jsxs("a",{href:L.final_pdf_url,download:!0,className:"flex items-center justify-center gap-2 p-3 bg-white border border-slate-200 hover:border-slate-300 text-slate-700 rounded-xl font-medium transition-all",children:[a.jsx(Yi,{size:18})," Signed PDF"]})]}),a.jsxs("div",{className:"bg-slate-50 rounded-2xl p-5 border border-slate-100 space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-slate-500 font-medium",children:"Status"}),a.jsx("span",{className:"px-2 py-1 rounded-md text-xs font-bold uppercase tracking-wider bg-white border border-slate-200 text-slate-700",children:L.status})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-slate-500 font-medium",children:"Created On"}),a.jsx("span",{className:"text-sm font-semibold text-slate-700",children:new Date(L.created_at).toLocaleString()})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-slate-500 font-medium",children:"Last Activity"}),a.jsx("span",{className:"text-sm font-semibold text-slate-700",children:new Date(L.updated_at).toLocaleString()})]})]}),L.signers&&L.signers.length>0&&a.jsxs("div",{children:[a.jsxs("h4",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[a.jsx(Ai,{size:18,className:"text-slate-500"}),"Signers (",L.signers.length,")"]}),a.jsx("div",{className:"space-y-3",children:L.signers.map((Oe,$e)=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-xl shadow-sm",children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold ${Oe.status==="signed"?"bg-emerald-500":"bg-slate-400"}`,children:Oe.name.charAt(0)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-slate-800 text-sm",children:Oe.name}),a.jsx("p",{className:"text-xs text-slate-400",children:Oe.email})]}),Oe.status==="signed"?a.jsx(us,{size:18,className:"text-emerald-500"}):a.jsx("button",{onClick:()=>Ge(L.id),className:"text-xs text-slate-600 hover:text-slate-900 font-medium bg-slate-100 px-2 py-1 rounded transition-colors",children:"Resend"})]},$e))})]})]}):a.jsxs("div",{className:"text-center py-10 text-slate-500",children:[a.jsx(la,{size:40,className:"mx-auto mb-4 text-slate-300"}),a.jsx("p",{children:"Audit Trail details not fully loaded."})]})})]})]})})]})},Tl=({title:n,description:e,children:t,className:s=""})=>a.jsxs("div",{className:`p-0 md:p-0 ${s} mb-8`,children:[a.jsxs("div",{className:"mb-5 pb-4 border-b border-slate-200",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-800 tracking-tight",children:n}),e&&a.jsx("p",{className:"text-sm text-slate-500 mt-1",children:e})]}),a.jsx("div",{className:"space-y-5",children:t})]}),Ns=({label:n,error:e,className:t="",...s})=>a.jsxs("div",{className:t,children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:n}),a.jsx("div",{className:"relative",children:a.jsx("input",{className:`block w-full rounded-lg border-slate-300 bg-white shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 sm:text-sm px-3.5 py-2.5 border transition-all duration-200 outline-none placeholder-slate-400 text-slate-900 ${e?"border-red-300 focus:border-red-500 focus:ring-red-200":"hover:border-slate-400"}`,...s})}),e&&a.jsxs("p",{className:"mt-1.5 text-xs font-medium text-red-600 flex items-center gap-1",children:[a.jsx(wa,{size:12})," ",e]})]}),XT=({label:n,error:e,className:t="",...s})=>a.jsxs("div",{className:t,children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:n}),a.jsx("textarea",{className:`block w-full rounded-lg border-slate-300 bg-white shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 sm:text-sm px-3.5 py-2.5 border transition-all duration-200 outline-none placeholder-slate-400 text-slate-900 ${e?"border-red-300 focus:border-red-500 focus:ring-red-200":"hover:border-slate-400"}`,...s}),e&&a.jsxs("p",{className:"mt-1.5 text-xs font-medium text-red-600 flex items-center gap-1",children:[a.jsx(wa,{size:12})," ",e]})]}),Ng=({loading:n,saved:e,onClick:t,label:s="Save Changes"})=>a.jsx("div",{className:"flex justify-end pt-6 border-t border-slate-200 mt-8",children:a.jsxs(Ie.button,{whileHover:{scale:1.01},whileTap:{scale:.99},type:"submit",disabled:n,onClick:t,className:`inline-flex justify-center items-center py-2.5 px-6 border border-transparent shadow-sm text-sm font-semibold rounded-lg text-white transition-all duration-200 
                ${e?"bg-emerald-600 hover:bg-emerald-700":"bg-indigo-600 hover:bg-indigo-700"} 
                disabled:opacity-70 disabled:cursor-not-allowed`,children:[n?a.jsx(Ym,{className:"animate-spin mr-2",size:16,strokeWidth:2.5}):e?a.jsx(fi,{className:"mr-2",size:16,strokeWidth:3}):a.jsx(Xi,{className:"mr-2",size:16,strokeWidth:2.5}),e?"Changes Saved":s]})}),jg=({message:n})=>a.jsxs(Ie.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0},className:"flex items-center gap-3 text-emerald-700 text-sm font-medium bg-emerald-50 px-4 py-3 rounded-lg border border-emerald-200 mb-6",children:[a.jsx(fi,{size:16,strokeWidth:2.5,className:"text-emerald-600"}),n]}),Cg=({message:n})=>a.jsxs(Ie.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0},className:"flex items-center gap-3 text-red-700 text-sm font-medium bg-red-50 px-4 py-3 rounded-lg border border-red-200 mb-6",children:[a.jsx(wa,{size:16,strokeWidth:2.5,className:"text-red-500"}),n]}),Wq=({business:n,onUpdate:e})=>{const[t,s]=_.useState({name:"",email:"",phone:"",website:"",address:"",city:"",state:"",zip:"",country:"",industry:"",social_links:{linkedin:"",twitter:"",facebook:"",instagram:""}}),[i,r]=_.useState(!1),[o,c]=_.useState(!1),[u,h]=_.useState(null);_.useEffect(()=>{n&&s({name:n.name||"",email:n.email||"",phone:n.phone||"",website:n.website||"",address:n.address||"",city:n.city||"",state:n.state||"",zip:n.zip||"",country:n.country||"",industry:n.industry||"",social_links:n.social_links||{linkedin:"",twitter:"",facebook:"",instagram:""}})},[n]);const f=x=>{const{name:y,value:N}=x.target;if(y.startsWith("social_")){const j=y.replace("social_","");s(E=>({...E,social_links:{...E.social_links,[j]:N}}))}else s({...t,[y]:N});c(!1)},g=async x=>{x.preventDefault(),r(!0),h(null);try{const y=await ix(t);e(y.data),c(!0),setTimeout(()=>c(!1),3e3)}catch(y){console.error(y),h(y.response?.data?.message||"Failed to update settings")}finally{r(!1)}};return a.jsxs("form",{onSubmit:g,className:"max-w-3xl",children:[u&&a.jsx(Cg,{message:u}),o&&a.jsx("div",{className:"mb-4",children:a.jsx(jg,{message:"Settings updated successfully."})}),a.jsx(Tl,{title:"Business Information",description:"Basic contact information for your business.",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(Ns,{label:"Business Name",name:"name",value:t.name,onChange:f,required:!0})}),a.jsx(Ns,{label:"Email",type:"email",name:"email",value:t.email,onChange:f}),a.jsx(Ns,{label:"Phone",name:"phone",value:t.phone,onChange:f}),a.jsx("div",{className:"md:col-span-2",children:a.jsx(Ns,{label:"Website",type:"url",name:"website",value:t.website,onChange:f,placeholder:"https://example.com"})})]})}),a.jsx(Tl,{title:"Address Details",description:"Your business physical location.",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(Ns,{label:"Address",name:"address",value:t.address,onChange:f})}),a.jsx(Ns,{label:"City",name:"city",value:t.city,onChange:f}),a.jsx(Ns,{label:"State",name:"state",value:t.state,onChange:f}),a.jsx(Ns,{label:"Zip / Postal Code",name:"zip",value:t.zip,onChange:f}),a.jsx(Ns,{label:"Country",name:"country",value:t.country,onChange:f})]})}),a.jsx(Tl,{title:"Social Profiles",description:"Connect your social media accounts.",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(Ns,{label:"LinkedIn",type:"url",name:"social_linkedin",value:t.social_links?.linkedin||"",onChange:f,placeholder:"https://linkedin.com/in/..."}),a.jsx(Ns,{label:"Twitter (X)",type:"url",name:"social_twitter",value:t.social_links?.twitter||"",onChange:f,placeholder:"https://twitter.com/..."}),a.jsx(Ns,{label:"Facebook",type:"url",name:"social_facebook",value:t.social_links?.facebook||"",onChange:f,placeholder:"https://facebook.com/..."}),a.jsx(Ns,{label:"Instagram",type:"url",name:"social_instagram",value:t.social_links?.instagram||"",onChange:f,placeholder:"https://instagram.com/..."})]})}),a.jsx("div",{className:"flex justify-end pt-2",children:a.jsx(Ng,{loading:i,saved:o})})]})},Gq=({business:n,onUpdate:e})=>{const[t,s]=_.useState({invoice_prefix:"",invoice_terms:"",default_invoice_notes:"",bank_details:{account_name:"",bank_name:"",account_number:"",ifsc_code:"",swift_code:""}}),[i,r]=_.useState(!1),[o,c]=_.useState(!1),[u,h]=_.useState(null);_.useEffect(()=>{n&&s({invoice_prefix:n.invoice_prefix||"",invoice_terms:n.invoice_terms||"",default_invoice_notes:n.default_invoice_notes||"",bank_details:n.bank_details||{account_name:"",bank_name:"",account_number:"",ifsc_code:"",swift_code:""}})},[n]);const f=x=>{const{name:y,value:N}=x.target;if(y.startsWith("bank_")){const j=y.replace("bank_","");s(E=>({...E,bank_details:{...E.bank_details,[j]:N}}))}else s(j=>({...j,[y]:N}));c(!1)},g=async x=>{x.preventDefault(),r(!0),h(null);try{const y=await ix(t);e(y.data),c(!0),setTimeout(()=>c(!1),3e3)}catch(y){console.error(y),h(y.response?.data?.message||"Failed to update settings")}finally{r(!1)}};return a.jsxs("form",{onSubmit:g,className:"max-w-3xl",children:[u&&a.jsx(Cg,{message:u}),o&&a.jsx("div",{className:"mb-4",children:a.jsx(jg,{message:"Invoice settings updated successfully."})}),a.jsx(Tl,{title:"General Configuration",description:"Set your invoice number prefix.",children:a.jsxs("div",{children:[a.jsx(Ns,{label:"Invoice Prefix",name:"invoice_prefix",value:t.invoice_prefix,onChange:f,placeholder:"INV-"}),a.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Prefix for invoice numbers (e.g., INV-0001)"})]})}),a.jsx(Tl,{title:"Bank Account Details",description:"These details will be displayed on invoices for payments.",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(Ns,{label:"Account Name / Beneficiary Name",name:"bank_account_name",value:t.bank_details?.account_name||"",onChange:f})}),a.jsx("div",{className:"md:col-span-2",children:a.jsx(Ns,{label:"Bank Name",name:"bank_bank_name",value:t.bank_details?.bank_name||"",onChange:f})}),a.jsx(Ns,{label:"Account Number / IBAN",name:"bank_account_number",value:t.bank_details?.account_number||"",onChange:f}),a.jsx(Ns,{label:"IFSC / SWIFT Code",name:"bank_ifsc_code",value:t.bank_details?.ifsc_code||"",onChange:f})]})}),a.jsx(Tl,{title:"Defaults",description:"Default texts for new invoices.",children:a.jsxs("div",{className:"space-y-6",children:[a.jsx(XT,{label:"Default Terms & Conditions",name:"invoice_terms",rows:4,value:t.invoice_terms,onChange:f,placeholder:"e.g. Payment due within 30 days..."}),a.jsx(XT,{label:"Default Invoice Notes",name:"default_invoice_notes",rows:2,value:t.default_invoice_notes,onChange:f,placeholder:"e.g. Thank you for your business!"})]})}),a.jsx("div",{className:"flex justify-end pt-2",children:a.jsx(Ng,{loading:i,saved:o})})]})},Yq=({business:n,onUpdate:e})=>{const[t,s]=_.useState({tax_label:"",tax_percentage:""}),[i,r]=_.useState(!1),[o,c]=_.useState(!1),[u,h]=_.useState(null),[f,g]=_.useState([]),[x,y]=_.useState(!0);_.useEffect(()=>{(async()=>{try{const R=await wt.get("/tax-rates");g(R.data.data)}catch(R){console.error("Failed to load tax rates",R)}finally{y(!1)}})(),n&&s({tax_label:n.tax_label||"",tax_percentage:n.tax_percentage||""})},[n]);const N=A=>{const R=A.target.value,M=f.find(L=>L.name===R);M&&s({...t,tax_label:M.name,tax_percentage:M.rate}),c(!1)},j=A=>{s({...t,[A.target.name]:A.target.value}),c(!1)},E=async A=>{A.preventDefault(),r(!0),h(null);try{const R=await ix(t);e(R.data),c(!0),setTimeout(()=>c(!1),3e3)}catch(R){console.error(R),h(R.response?.data?.message||"Failed to update settings")}finally{r(!1)}};return a.jsxs("form",{onSubmit:E,className:"max-w-3xl",children:[u&&a.jsx(Cg,{message:u}),o&&a.jsx("div",{className:"mb-4",children:a.jsx(jg,{message:"Tax settings updated successfully."})}),a.jsx(Tl,{title:"Tax Configuration",description:"Configure your tax settings for invoices.",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Tax Type"}),a.jsxs("select",{name:"tax_label",value:t.tax_label,onChange:N,className:"w-full rounded-md border border-slate-300 bg-white py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 sm:text-sm",disabled:x,children:[a.jsx("option",{value:"",children:"Select Tax"}),f.map(A=>a.jsxs("option",{value:A.name,children:[A.name," (",Number(A.rate).toFixed(2),"%)"]},A.id))]})]}),a.jsx(Ns,{label:"Tax Percentage (%)",type:"number",step:"0.01",name:"tax_percentage",value:t.tax_percentage,onChange:j,placeholder:"0.00",disabled:!0})]})}),a.jsx("div",{className:"flex justify-end pt-2",children:a.jsx(Ng,{loading:i,saved:o})})]})},Xq=({business:n,onUpdate:e})=>{const[t,s]=_.useState({currency_symbol:"",currency_code:"",currency_country:""}),[i,r]=_.useState(!1),[o,c]=_.useState(!1),[u,h]=_.useState(null),[f,g]=_.useState([]),[x,y]=_.useState(!0);_.useEffect(()=>{(async()=>{try{const R=await wt.get("/currencies");g(R.data.data)}catch(R){console.error("Failed to load currencies",R)}finally{y(!1)}})(),n&&s({currency_symbol:n.currency_symbol||"",currency_code:n.currency_code||"",currency_country:n.currency_country||""})},[n]);const N=A=>{const R=A.target.value,M=f.find(L=>L.code===R);M&&s({...t,currency_code:M.code,currency_symbol:M.symbol,currency_country:M.name}),c(!1)},j=A=>{s({...t,[A.target.name]:A.target.value}),c(!1)},E=async A=>{A.preventDefault(),r(!0),h(null);try{const R=await ix(t);e(R.data),c(!0),setTimeout(()=>c(!1),3e3)}catch(R){console.error(R),h(R.response?.data?.message||"Failed to update settings")}finally{r(!1)}};return a.jsxs("form",{onSubmit:E,className:"max-w-3xl",children:[u&&a.jsx(Cg,{message:u}),o&&a.jsx("div",{className:"mb-4",children:a.jsx(jg,{message:"Currency settings updated successfully."})}),a.jsx(Tl,{title:"Currency & Region",description:"Set your preferred currency for invoices and financial reports.",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Currency"}),a.jsxs("select",{name:"currency_code",value:t.currency_code,onChange:N,className:"w-full rounded-md border border-slate-300 bg-white py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 sm:text-sm",disabled:x,children:[a.jsx("option",{value:"",children:"Select Currency"}),f.map(A=>a.jsxs("option",{value:A.code,children:[A.code," - ",A.name," (",A.symbol,")"]},A.id))]})]}),a.jsx(Ns,{label:"Symbol",name:"currency_symbol",value:t.currency_symbol,onChange:j,placeholder:"$",disabled:!0}),a.jsx(Ns,{label:"Country",name:"currency_country",value:t.currency_country,onChange:j,placeholder:"United States",disabled:!0})]})}),a.jsx("div",{className:"flex justify-end pt-2",children:a.jsx(Ng,{loading:i,saved:o})})]})},Kq=({business:n,onUpdate:e})=>{const[t,s]=_.useState(null),[i,r]=_.useState(null),[o,c]=_.useState(null),[u,h]=_.useState(null),[f,g]=_.useState(!1),[x,y]=_.useState(!1),[N,j]=_.useState(null);_.useEffect(()=>{n&&(n.logo&&r(n.logo),n.favicon&&h(n.favicon))},[n]);const E=(M,L,z)=>{const W=M.target.files[0];if(W){L(W);const I=new FileReader;I.onloadend=()=>{z(I.result)},I.readAsDataURL(W),y(!1)}},A=async M=>{M.preventDefault(),g(!0),j(null);const L=new FormData;if(t&&L.append("logo",t),o&&L.append("favicon",o),!t&&!o){g(!1);return}try{const z=await ix(L);e(z.data),y(!0),setTimeout(()=>y(!1),3e3),s(null),c(null)}catch(z){console.error(z),j("Failed to update branding settings")}finally{g(!1)}},R=M=>M?M.startsWith("http")||M.startsWith("data:")?M:`http://127.0.0.1:8000/api/v1${M}`:null;return a.jsxs("form",{onSubmit:A,className:"max-w-3xl",children:[N&&a.jsx(Cg,{message:N}),x&&a.jsx("div",{className:"mb-4",children:a.jsx(jg,{message:"Branding settings updated successfully."})}),a.jsx(Tl,{title:"Brand Assets",description:"Upload your business logo and favicon.",children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Business Logo"}),a.jsxs("div",{className:"flex items-start gap-6",children:[a.jsx("div",{className:"w-32 h-32 border-2 border-dashed border-slate-300 rounded-lg flex items-center justify-center overflow-hidden bg-slate-50 relative group transition-all hover:border-indigo-400",children:i?a.jsx("img",{src:R(i),alt:"Logo Preview",className:"w-full h-full object-contain p-2"}):a.jsx("span",{className:"text-slate-400 text-xs font-medium",children:"No Logo"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("input",{type:"file",accept:"image/*",id:"logo-upload",className:"hidden",onChange:M=>E(M,s,r)}),a.jsxs("label",{htmlFor:"logo-upload",className:"inline-flex items-center px-4 py-2 border border-slate-300 shadow-sm text-sm font-medium rounded-lg text-slate-700 bg-white hover:bg-slate-50 cursor-pointer transition-colors",children:[a.jsx(Sf,{className:"mr-2 h-4 w-4"}),"Upload Logo"]}),a.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Recommended size: 512x512px. Max file size: 2MB."})]})]})]}),a.jsx("div",{className:"border-t border-slate-100 my-6"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Favicon"}),a.jsxs("div",{className:"flex items-start gap-6",children:[a.jsx("div",{className:"w-16 h-16 border-2 border-dashed border-slate-300 rounded-lg flex items-center justify-center overflow-hidden bg-slate-50 transition-all hover:border-indigo-400",children:u?a.jsx("img",{src:R(u),alt:"Favicon Preview",className:"w-8 h-8 object-contain"}):a.jsx("span",{className:"text-slate-400 text-xs font-medium",children:"No Icon"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("input",{type:"file",accept:"image/x-icon,image/png,image/jpeg,image/svg+xml",id:"favicon-upload",className:"hidden",onChange:M=>E(M,c,h)}),a.jsxs("label",{htmlFor:"favicon-upload",className:"inline-flex items-center px-4 py-2 border border-slate-300 shadow-sm text-sm font-medium rounded-lg text-slate-700 bg-white hover:bg-slate-50 cursor-pointer transition-colors",children:[a.jsx(Sf,{className:"mr-2 h-4 w-4"}),"Upload Favicon"]}),a.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Recommended size: 32x32px or 16x16px. Formats: .ico, .png, .svg."})]})]})]})]})}),a.jsx("div",{className:"flex justify-end pt-2",children:a.jsx(Ng,{loading:f,saved:x,disabled:!t&&!o,label:"Save Branding"})})]})},Zq=()=>{const{user:n,setUser:e}=Dr(),[t,s]=_.useState({name:"",email:"",password:"",password_confirmation:""}),[i,r]=_.useState(!1),[o,c]=_.useState(!1),[u,h]=_.useState(null),[f,g]=_.useState(null),[x,y]=_.useState(null);_.useEffect(()=>{n&&(s(A=>({...A,name:n.name||"",email:n.email||""})),n.avatar_url&&y(n.avatar_url))},[n]);const N=A=>{s({...t,[A.target.name]:A.target.value}),c(!1)},j=A=>{const R=A.target.files[0];R&&(g(R),y(URL.createObjectURL(R)),c(!1))},E=async A=>{A.preventDefault(),r(!0),h(null);const R=new FormData;R.append("name",t.name),R.append("email",t.email),t.password&&(R.append("password",t.password),R.append("password_confirmation",t.password_confirmation)),f&&R.append("avatar",f);try{const M=await jF(R);c(!0),e(M.data),s(L=>({...L,password:"",password_confirmation:""})),g(null),setTimeout(()=>c(!1),3e3)}catch(M){console.error(M),h(M.response?.data?.message||"Failed to update profile")}finally{r(!1)}};return a.jsxs("form",{onSubmit:E,className:"max-w-3xl",children:[u&&a.jsx(Cg,{message:u}),o&&a.jsx("div",{className:"mb-4",children:a.jsx(jg,{message:"Profile updated successfully."})}),a.jsx(Tl,{title:"Personal Information",description:"Manage your personal account details.",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"md:col-span-2 flex items-center gap-6",children:[a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"h-20 w-20 rounded-full overflow-hidden bg-slate-100 border border-slate-200",children:x?a.jsx("img",{src:x,alt:"Profile",className:"h-full w-full object-cover"}):a.jsx("div",{className:"h-full w-full flex items-center justify-center text-slate-400 font-bold text-2xl",children:t.name.charAt(0)})}),a.jsx("label",{htmlFor:"avatar-upload",className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer rounded-full text-white text-xs font-medium",children:"Change"}),a.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:j,className:"hidden"})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-sm font-medium text-slate-800",children:"Profile Picture"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Upload a JPG or PNG. Max size 2MB."})]})]}),a.jsx("div",{className:"md:col-span-2",children:a.jsx(Ns,{label:"Full Name",name:"name",value:t.name,onChange:N,required:!0})}),a.jsx("div",{className:"md:col-span-2",children:a.jsx(Ns,{label:"Email Address",type:"email",name:"email",value:t.email,onChange:N,required:!0})})]})}),a.jsx(Tl,{title:"Security",description:"Update your password (leave blank to keep current).",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(Ns,{label:"New Password",type:"password",name:"password",value:t.password,onChange:N,placeholder:"Min. 8 characters"}),a.jsx(Ns,{label:"Confirm Password",type:"password",name:"password_confirmation",value:t.password_confirmation,onChange:N,placeholder:"Re-enter password"})]})}),a.jsx("div",{className:"flex justify-end pt-2",children:a.jsx(Ng,{loading:i,saved:o,label:"Update Profile"})})]})},Qq=()=>{const[n,e]=_.useState("profile"),[t,s]=_.useState(null),[i,r]=_.useState(!0);_.useEffect(()=>{o()},[]);const o=async()=>{try{const h=await Rr();s(h)}catch(h){console.error("Failed to load business settings",h)}finally{r(!1)}},c=h=>{s(h)},u=[{id:"profile",label:"My Profile",icon:Ai,desc:"Personal & Security"},{id:"general",label:"Business Info",icon:Od,desc:"Organization Details"},{id:"branding",label:"Branding",icon:Df,desc:"Logos & Colors"},{id:"invoice",label:"Invoicing",icon:wn,desc:"Prefix & Terms"},{id:"tax",label:"Taxation",icon:QU,desc:"VAT/GST Setup"},{id:"currency",label:"Currency",icon:eN,desc:"Region & Symbol"}];return i?a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx(Ym,{className:"animate-spin text-indigo-600",size:32})}):a.jsxs(Pv,{className:"max-w-6xl",children:[a.jsx(fx,{title:"Settings",subtitle:"Manage your personal and workspace preferences."}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-start",children:[a.jsx("div",{className:"w-full md:w-64 flex-shrink-0 overflow-x-auto md:overflow-visible pb-4 md:pb-0",children:a.jsx("nav",{className:"flex md:flex-col space-x-2 md:space-x-0 md:space-y-0.5 min-w-max md:min-w-0",children:u.map(h=>{const f=h.icon,g=n===h.id;return a.jsxs("button",{onClick:()=>e(h.id),className:`flex items-center gap-3 px-3 py-2 text-left rounded-md transition-colors whitespace-nowrap ${g?"bg-slate-100 text-slate-900 font-medium":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"}`,children:[a.jsx(f,{size:18,className:g?"text-indigo-600":"text-slate-400"}),a.jsx("span",{className:"text-sm",children:h.label})]},h.id)})})}),a.jsx("div",{className:"flex-1 min-w-0 bg-white rounded-lg border border-slate-200 shadow-sm p-6 md:p-8",children:a.jsx(dn,{mode:"wait",children:a.jsxs(Ie.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[n==="profile"&&a.jsx(Zq,{}),n==="general"&&a.jsx(Wq,{business:t,onUpdate:c}),n==="branding"&&a.jsx(Kq,{business:t,onUpdate:c}),n==="invoice"&&a.jsx(Gq,{business:t,onUpdate:c}),n==="tax"&&a.jsx(Yq,{business:t,onUpdate:c}),n==="currency"&&a.jsx(Xq,{business:t,onUpdate:c})]},n)})})]})]})},Jq=({isOpen:n,onClose:e,onInvite:t})=>{const{matrix:s}=mg(),[i,r]=_.useState(""),[o,c]=_.useState("member"),[u,h]=_.useState([]),[f,g]=_.useState(!1),[x,y]=_.useState(!1),N=ht.useMemo(()=>s.permissions?s.permissions.reduce((M,L)=>{const z=L.key.split(".")[0];return M[z]||(M[z]=[]),M[z].push(L),M},{}):{},[s.permissions]);_.useEffect(()=>{},[n]),_.useEffect(()=>{if(!s.permissions)return;const M=s.permissions.filter(L=>L.roles.includes(o)).map(L=>L.key);h(M)},[o,s]);const j=M=>{h(L=>L.includes(M)?L.filter(z=>z!==M):[...L,M])},E=M=>{switch(M){case"admin":return a.jsx(Tr,{className:"text-purple-600",size:24});case"editor":return a.jsx(wn,{className:"text-blue-600",size:24});case"member":return a.jsx(Pc,{className:"text-slate-600",size:24});case"viewer":return a.jsx(fi,{className:"text-emerald-600",size:24});default:return a.jsx(Pc,{className:"text-slate-600",size:24})}},A=async M=>{M.preventDefault(),g(!0);try{await t({email:i,role:o,permissions:u}),R()}catch(L){console.error(L)}finally{g(!1)}},R=()=>{r(""),c("member"),y(!1)};return n?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx(Ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm"}),a.jsxs(Ie.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"relative px-8 py-6 bg-slate-900 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 opacity-10 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-indigo-500 via-slate-900 to-slate-900"}),a.jsxs("div",{className:"relative flex items-center justify-between z-10",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:"Invite Team Member"}),a.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Send an invitation to join your workspace."})]}),a.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white transition-colors bg-white/10 hover:bg-white/20 rounded-full p-2 backdrop-blur-sm",children:a.jsx(bs,{size:20})})]})]}),a.jsx("div",{className:"p-8 overflow-y-auto custom-scrollbar",children:a.jsxs("form",{id:"inviteForm",onSubmit:A,className:"space-y-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Email Address"}),a.jsxs("div",{className:"relative group",children:[a.jsx(Js,{className:"absolute left-4 top-3.5 text-slate-400 group-focus-within:text-indigo-600 transition-colors",size:20}),a.jsx("input",{type:"email",required:!0,value:i,onChange:M=>r(M.target.value),placeholder:"colleague@company.com",className:"w-full pl-12 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all placeholder:text-slate-400 text-slate-700 bg-slate-50 focus:bg-white"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Select Role"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:["admin","editor","member","viewer"].map(M=>a.jsxs("label",{className:`
                                            relative flex items-start gap-4 p-4 border rounded-xl cursor-pointer transition-all duration-200
                                            ${o===M?"border-indigo-600 bg-indigo-50/50 ring-1 ring-indigo-600 shadow-sm":"border-slate-200 hover:border-indigo-200 hover:bg-slate-50"}
                                        `,children:[a.jsx("input",{type:"radio",name:"role",value:M,checked:o===M,onChange:L=>c(L.target.value),className:"sr-only"}),a.jsx("div",{className:`mt-1 p-2 rounded-lg ${o===M?"bg-indigo-100":"bg-slate-100"}`,children:E(M)}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:`font-semibold capitalize ${o===M?"text-indigo-900":"text-slate-900"}`,children:M}),o===M&&a.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-600"})]}),a.jsxs("div",{className:"text-xs text-slate-500 mt-1 leading-relaxed",children:[M==="admin"&&"Full workspace access. Can manage settings & team.",M==="editor"&&"Can create, edit, and delete content.",M==="member"&&"Can view and comment on shared documents.",M==="viewer"&&"Read-only access to specific items."]})]})]},M))})]}),a.jsxs("div",{className:"border-t border-slate-100 pt-6",children:[a.jsxs("button",{type:"button",onClick:()=>y(!x),className:"flex items-center gap-2 text-sm font-medium text-slate-600 hover:text-indigo-600 transition-colors",children:[x?a.jsx(kf,{size:16}):a.jsx(fo,{size:16}),a.jsx(Ho,{size:16}),a.jsx("span",{children:"Advanced Permission Settings"}),!x&&a.jsxs("span",{className:"ml-auto text-xs text-slate-400 bg-slate-100 px-2 py-1 rounded-full",children:[u.length," selected"]})]}),a.jsx(dn,{children:x&&a.jsx(Ie.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:a.jsx("div",{className:"pt-4 space-y-6",children:Object.entries(N).map(([M,L])=>a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider flex items-center gap-2",children:[M==="document"&&a.jsx(wn,{size:12}),M==="team"&&a.jsx(Pc,{size:12}),M==="settings"&&a.jsx(vf,{size:12}),M," Permissions"]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:L.map(z=>{const W=u.includes(z.key);return a.jsxs("label",{className:`
                                                                    flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all
                                                                    ${W?"bg-indigo-50 border-indigo-200":"bg-white border-slate-200 hover:border-slate-300"}
                                                                `,children:[a.jsxs("div",{className:`
                                                                        w-5 h-5 rounded border flex items-center justify-center transition-colors
                                                                        ${W?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300"}
                                                                    `,children:[W&&a.jsx(fi,{size:12,className:"text-white"}),a.jsx("input",{type:"checkbox",checked:W,onChange:()=>j(z.key),className:"hidden"})]}),a.jsx("div",{className:"flex-1",children:a.jsx("div",{className:`text-sm font-medium ${W?"text-indigo-900":"text-slate-700"}`,children:z.label})})]},z.key)})})]},M))})})})]})]})}),a.jsxs("div",{className:"px-8 py-5 border-t border-slate-200 bg-slate-50 flex justify-end gap-3 sticky bottom-0 z-20",children:[a.jsx("button",{type:"button",onClick:e,className:"px-5 py-2.5 text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-200/50 rounded-xl transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",form:"inviteForm",disabled:f,className:"px-8 py-2.5 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-xl shadow-lg shadow-indigo-200 transition-all hover:-translate-y-0.5 disabled:opacity-70 disabled:cursor-not-allowed flex items-center gap-2",children:f?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Sending Invitation..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Js,{size:18}),"Send Invitation"]})})]})]})]}):null},qq=({isOpen:n,onClose:e,member:t,onUpdate:s})=>{const{matrix:i}=mg(),[r,o]=_.useState("member"),[c,u]=_.useState([]),[h,f]=_.useState(!1),[g,x]=_.useState(!1),y=ht.useMemo(()=>i.permissions?i.permissions.reduce((R,M)=>{const L=M.key.split(".")[0];return R[L]||(R[L]=[]),R[L].push(M),R},{}):{},[i.permissions]);_.useEffect(()=>{if(t){if(o(t.role),t.permissions&&Array.isArray(t.permissions))u(t.permissions);else if(i.permissions){const R=i.permissions.filter(M=>M.roles.includes(t.role)).map(M=>M.key);u(R)}}},[t,n,i]);const N=R=>{if(o(R),i.permissions){const M=i.permissions.filter(L=>L.roles.includes(R)).map(L=>L.key);u(M)}},j=R=>{u(M=>M.includes(R)?M.filter(L=>L!==R):[...M,R])},E=async R=>{R.preventDefault(),f(!0);try{await s(t.id,{role:r,permissions:c}),e()}catch(M){console.error(M)}finally{f(!1)}},A=R=>{switch(R){case"admin":return a.jsx(Tr,{className:"text-purple-600",size:20});case"editor":return a.jsx(wn,{className:"text-blue-600",size:20});case"member":return a.jsx(Pc,{className:"text-slate-600",size:20});case"viewer":return a.jsx(fi,{className:"text-emerald-600",size:20});default:return a.jsx(Ai,{className:"text-slate-600",size:20})}};return!n||!t?null:a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx(Ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm"}),a.jsxs(Ie.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"relative px-8 py-6 bg-slate-900",children:[a.jsx("div",{className:"absolute inset-0 opacity-10 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-indigo-500 via-slate-900 to-slate-900"}),a.jsxs("div",{className:"relative flex items-center justify-between z-10",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-500/20 flex items-center justify-center text-white font-bold border-2 border-indigo-500/30",children:t.child?.name?.charAt(0).toUpperCase()||"?"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:t.child?.name}),a.jsx("p",{className:"text-slate-400 text-sm mt-0.5",children:t.child?.email})]})]}),a.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white transition-colors bg-white/10 hover:bg-white/20 rounded-full p-2 backdrop-blur-sm",children:a.jsx(bs,{size:20})})]})]}),a.jsx("div",{className:"p-8 overflow-y-auto custom-scrollbar",children:a.jsxs("form",{id:"editForm",onSubmit:E,className:"space-y-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Role Allocation"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:["admin","editor","member","viewer"].map(R=>a.jsxs("label",{className:`
                                            relative flex items-center gap-4 p-4 border rounded-xl cursor-pointer transition-all duration-200
                                            ${r===R?"border-indigo-600 bg-indigo-50/50 ring-1 ring-indigo-600 shadow-sm":"border-slate-200 hover:border-indigo-200 hover:bg-slate-50"}
                                        `,children:[a.jsx("input",{type:"radio",name:"role",value:R,checked:r===R,onChange:M=>N(M.target.value),className:"sr-only"}),a.jsx("div",{className:`p-2 rounded-lg ${r===R?"bg-indigo-100":"bg-slate-100"}`,children:A(R)}),a.jsx("div",{children:a.jsx("span",{className:`font-semibold capitalize ${r===R?"text-indigo-900":"text-slate-900"}`,children:R})}),r===R&&a.jsx(fi,{size:16,className:"text-indigo-600 ml-auto"})]},R))})]}),a.jsxs("div",{className:"border-t border-slate-100 pt-6",children:[a.jsxs("button",{type:"button",onClick:()=>x(!g),className:"flex items-center gap-2 text-sm font-medium text-slate-600 hover:text-indigo-600 transition-colors",children:[g?a.jsx(kf,{size:16}):a.jsx(fo,{size:16}),a.jsx(Ho,{size:16}),a.jsx("span",{children:"Advanced Access Control"}),!g&&a.jsxs("span",{className:"ml-auto text-xs text-slate-400 bg-slate-100 px-2 py-1 rounded-full",children:[c.length," selected"]})]}),a.jsx(dn,{children:g&&a.jsx(Ie.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:a.jsx("div",{className:"pt-4 space-y-6",children:Object.entries(y).map(([R,M])=>a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider flex items-center gap-2",children:[R==="document"&&a.jsx(wn,{size:12}),R==="team"&&a.jsx(Pc,{size:12}),R==="settings"&&a.jsx(vf,{size:12}),R," Permissions"]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:M.map(L=>{const z=c.includes(L.key);return a.jsxs("label",{className:`
                                                                    flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all
                                                                    ${z?"bg-indigo-50 border-indigo-200":"bg-white border-slate-200 hover:border-slate-300"}
                                                                `,children:[a.jsxs("div",{className:`
                                                                        w-5 h-5 rounded border flex items-center justify-center transition-colors
                                                                        ${z?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300"}
                                                                    `,children:[z&&a.jsx(fi,{size:12,className:"text-white"}),a.jsx("input",{type:"checkbox",checked:z,onChange:()=>j(L.key),className:"hidden"})]}),a.jsx("div",{className:"flex-1",children:a.jsx("div",{className:`text-sm font-medium ${z?"text-indigo-900":"text-slate-700"}`,children:L.label})})]},L.key)})})]},R))})})})]})]})}),a.jsxs("div",{className:"px-8 py-5 border-t border-slate-200 bg-slate-50 flex justify-end gap-3 sticky bottom-0 z-20",children:[a.jsx("button",{type:"button",onClick:e,className:"px-5 py-2.5 text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-200/50 rounded-xl transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",form:"editForm",disabled:h,className:"px-8 py-2.5 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-xl shadow-lg shadow-indigo-200 transition-all hover:-translate-y-0.5 disabled:opacity-70 disabled:cursor-not-allowed flex items-center gap-2",children:h?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Xi,{size:18}),"Save Changes"]})})]})]})]})},$q=()=>{const{user:n}=Dr(),{matrix:e}=mg(),[t,s]=_.useState([]),[i,r]=_.useState(!0),[o,c]=_.useState(""),[u,h]=_.useState(!1),[f,g]=_.useState(null),[x,y]=_.useState("members"),[N,j]=_.useState(null);_.useEffect(()=>{E()},[]);const E=async()=>{try{r(!0);const I=await ZV();s(I.data)}catch(I){console.error("Failed to fetch team",I)}finally{r(!1)}},A=async(I,Y)=>{try{await JV(I,Y),E(),Te.success("Member updated successfully")}catch(U){console.error("Failed to update member",U),Te.error("Failed to update member: "+(U.response?.data?.message||U.message))}},R=async I=>{if(confirm("Are you sure you want to remove this member?")){try{await qV(I),s(t.filter(Y=>Y.id!==I)),Te.success("Member removed successfully")}catch(Y){console.error("Failed to remove member",Y),Te.error("Failed to remove member")}j(null)}},M=async I=>{try{await QV(I),E(),h(!1),Te.success("Invitation sent successfully")}catch(Y){console.error("Failed to invite member",Y),Te.error("Failed to invite member: "+(Y.response?.data?.message||Y.message))}},L=t.filter(I=>I.child?.name?.toLowerCase().includes(o.toLowerCase())||I.child?.email?.toLowerCase().includes(o.toLowerCase())),z=I=>{switch(I){case"admin":return"bg-purple-100 text-purple-700 border-purple-200";case"editor":return"bg-blue-100 text-blue-700 border-blue-200";case"member":return"bg-slate-100 text-slate-700 border-slate-200";case"viewer":return"bg-emerald-100 text-emerald-700 border-emerald-200";default:return"bg-slate-100 text-slate-700"}},W=I=>{switch(I){case"active":return"bg-emerald-50 text-emerald-700 border-emerald-100";case"pending":return"bg-amber-50 text-amber-700 border-amber-100";default:return"bg-slate-100 text-slate-500"}};return a.jsxs(Pv,{children:[a.jsx(fx,{title:"Team Management",subtitle:"Manage your team members and their roles.",children:a.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors shadow-md shadow-indigo-600/20 text-sm",children:[a.jsx(kd,{size:18,strokeWidth:2.5}),"Invite Member"]})}),a.jsx("div",{className:"border-b border-slate-200 mb-6",children:a.jsxs("div",{className:"flex gap-6",children:[a.jsxs("button",{onClick:()=>y("members"),className:`pb-3 text-sm font-medium transition-colors relative ${x==="members"?"text-indigo-600":"text-slate-500 hover:text-slate-700"}`,children:["Members",x==="members"&&a.jsx(Ie.div,{layoutId:"tab-underline",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-600"})]}),a.jsxs("button",{onClick:()=>y("roles"),className:`pb-3 text-sm font-medium transition-colors relative ${x==="roles"?"text-indigo-600":"text-slate-500 hover:text-slate-700"}`,children:["Roles & Permissions",x==="roles"&&a.jsx(Ie.div,{layoutId:"tab-underline",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-600"})]})]})}),a.jsx(dn,{mode:"wait",children:x==="members"?a.jsxs(Ie.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[a.jsxs("div",{className:"bg-white p-4 rounded-lg border border-slate-200 shadow-sm mb-6 flex items-center gap-3",children:[a.jsx(Xm,{className:"text-slate-400",size:20}),a.jsx("input",{type:"text",placeholder:"Search members by name or email...",className:"flex-1 outline-none text-slate-700 placeholder:text-slate-400",value:o,onChange:I=>c(I.target.value)})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden min-h-[400px]",children:[a.jsx("div",{className:"hidden md:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200",children:[a.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider text-right",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-100",children:i?a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-slate-500",children:a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})})})}):L.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-slate-500",children:a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[a.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mb-4",children:a.jsx(Tr,{className:"text-slate-300",size:32})}),a.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-1",children:"No team members yet"}),a.jsx("p",{className:"text-slate-500 text-sm max-w-sm",children:"Invite your colleagues to collaborate on documents and manage your business together."})]})})}):L.map(I=>a.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-700 font-bold border-2 border-white shadow-sm",children:I.child?.name?.charAt(0).toUpperCase()||"?"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-slate-900",children:I.child?.name||"Unknown User"}),a.jsx("div",{className:"text-sm text-slate-500",children:I.child?.email})]})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex flex-col items-start gap-1",children:[a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${z(I.role)} capitalize`,children:I.role||"Member"}),I.permissions&&a.jsxs("span",{className:"text-[10px] text-slate-400 flex items-center gap-0.5",children:[a.jsx(Ho,{size:10}),"Custom Access"]})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-medium border ${W(I.status)}`,children:[a.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${I.status==="active"?"bg-emerald-500":"bg-amber-500"}`}),I.status==="active"?"Active":"Pending"]})}),a.jsx("td",{className:"px-6 py-4 text-right",children:a.jsx("div",{className:"relative group inline-block text-left",children:a.jsx("button",{onClick:Y=>{Y.stopPropagation();const U=Y.currentTarget.getBoundingClientRect();j(N===I.id?null:{id:I.id,top:U.bottom+window.scrollY,left:U.right-192})},className:"p-1.5 hover:bg-slate-100 rounded-md text-slate-400 hover:text-slate-600 transition-colors",children:a.jsx(bf,{size:16})})})})]},I.id))})]})}),a.jsx("div",{className:"md:hidden divide-y divide-slate-100",children:i?a.jsx("div",{className:"p-8 text-center text-slate-500",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"})}):L.length===0?a.jsxs("div",{className:"p-8 text-center flex flex-col items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-full flex items-center justify-center mb-3",children:a.jsx(Tr,{className:"text-slate-300",size:24})}),a.jsx("p",{className:"text-slate-500 text-sm",children:"No members found."})]}):L.map(I=>a.jsxs("div",{className:"p-4 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-700 font-bold border-2 border-white shadow-sm",children:I.child?.name?.charAt(0).toUpperCase()||"?"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-slate-900",children:I.child?.name||"Unknown User"}),a.jsx("div",{className:"text-sm text-slate-500",children:I.child?.email})]})]}),a.jsx("button",{onClick:Y=>{Y.stopPropagation();const U=Y.currentTarget.getBoundingClientRect();j(N===I.id?null:{id:I.id,top:U.bottom+window.scrollY,left:U.right-192})},className:"p-1 text-slate-400",children:a.jsx(bf,{size:20})})]}),a.jsxs("div",{className:"flex items-center gap-3 pl-13",children:[a.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium border ${z(I.role)} capitalize`,children:I.role||"Member"}),a.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-0.5 rounded-full text-xs font-medium border ${W(I.status)}`,children:[a.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${I.status==="active"?"bg-emerald-500":"bg-amber-500"}`}),I.status==="active"?"Active":"Pending"]})]})]},I.id))})]})]},"members"):a.jsx(Ie.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:a.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 bg-slate-50",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Role Permissions"}),a.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"View access levels for each role. (Read-only reference)"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-white border-b border-slate-200",children:[a.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider w-1/3 border-r border-slate-100",children:"Permission"}),e.roles&&Object.keys(e.roles).map(I=>a.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-center text-slate-500 uppercase tracking-wider w-1/6",children:e.roles[I]},I))]})}),a.jsx("tbody",{className:"divide-y divide-slate-100",children:e.permissions&&e.permissions.map(I=>a.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[a.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-slate-700 border-r border-slate-100",children:[I.label,a.jsx("div",{className:"text-xs text-slate-400 font-normal mt-0.5",children:I.key})]}),Object.keys(e.roles).map(Y=>{const U=I.roles.includes(Y);return a.jsx("td",{className:"px-6 py-4 text-center",children:U?a.jsx(us,{size:18,className:"mx-auto text-emerald-500"}):a.jsx("div",{className:"w-1.5 h-1.5 bg-slate-200 rounded-full mx-auto"})},Y)})]},I.key))})]})})]})},"roles")}),N&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>j(null)}),a.jsxs("div",{className:"fixed z-50 w-48 bg-white rounded-lg shadow-xl border border-slate-200 py-1 overflow-hidden animate-in fade-in zoom-in duration-200 origin-top-right",style:{top:N.top+5,left:N.left},children:[a.jsxs("button",{onClick:()=>{const I=t.find(Y=>Y.id===N.id);I&&g(I),j(null)},className:"w-full text-left px-4 py-2.5 text-sm text-slate-700 hover:bg-slate-50 flex items-center gap-2 border-b border-slate-100",children:[a.jsx(ex,{size:14}),"Edit Access"]}),a.jsxs("button",{onClick:()=>{R(N.id),j(null)},className:"w-full text-left px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2 mt-1",children:[a.jsx(Ki,{size:14}),"Remove Member"]})]})]}),a.jsx(Jq,{isOpen:u,onClose:()=>h(!1),onInvite:M}),a.jsx(qq,{isOpen:!!f,onClose:()=>g(null),member:f,onUpdate:A})]})},e$=({onFileUpload:n})=>{const[e,t]=_.useState(!1),[s,i]=_.useState(null),[r,o]=_.useState(null),[c,u]=_.useState(!1),h=10*1024*1024,f=A=>(o(null),A.type!=="application/pdf"?(o("Please upload a valid PDF document."),!1):A.size>h?(o("File size must be under 10MB."),!1):!0),g=_.useCallback(A=>{A.preventDefault(),A.stopPropagation(),A.type==="dragenter"||A.type==="dragover"?t(!0):A.type==="dragleave"&&t(!1)},[]),x=_.useCallback(A=>{A.preventDefault(),A.stopPropagation(),t(!1),A.dataTransfer.files&&A.dataTransfer.files[0]&&y(A.dataTransfer.files[0])},[]),y=A=>{u(!0),setTimeout(()=>{f(A)?(i(A),o(null),setTimeout(()=>n(A),1500)):i(null),u(!1)},1e3)},N=A=>{A.target.files&&A.target.files[0]&&y(A.target.files[0])},j=()=>{i(null),o(null)},E=A=>{if(A===0)return"0 Bytes";const R=1024,M=Math.floor(Math.log(A)/Math.log(R));return parseFloat((A/Math.pow(R,M)).toFixed(2))+" "+["Bytes","KB","MB"][M]};return a.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center p-4 lg:p-12 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 z-0 opacity-40 pointer-events-none",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-indigo-200/30 rounded-full blur-[100px]"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-purple-200/30 rounded-full blur-[100px]"})]}),a.jsxs(Ie.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{duration:.6,ease:"easeOut"},className:"relative z-10 w-full max-w-5xl bg-white/60 backdrop-blur-xl rounded-[2.5rem] shadow-[0_32px_64px_-12px_rgba(0,0,0,0.08)] border border-white/50 flex flex-col md:flex-row overflow-hidden min-h-[550px]",children:[a.jsxs("div",{className:"hidden md:flex w-full md:w-5/12 bg-white/40 p-10 lg:p-14 flex-col justify-between border-r border-slate-100/50",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-indigo-50 border border-indigo-100 text-indigo-700 text-xs font-bold uppercase tracking-wider rounded-full mb-8",children:[a.jsx(Tr,{size:12,className:"fill-indigo-700"}),"Secure Environment"]}),a.jsxs("h1",{className:"text-3xl lg:text-4xl font-extrabold text-slate-800 leading-tight mb-4",children:["Upload your ",a.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600",children:"Document"})]}),a.jsx("p",{className:"text-slate-500 text-base leading-relaxed",children:"Drag and drop your PDF to get started. We use banking-grade encryption to ensure your documents remain private and secure throughout the signing workflow."})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[a.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-2xl bg-white/50 border border-white/60 shadow-sm hover:shadow-md transition-shadow",children:[a.jsx("div",{className:"p-2.5 bg-indigo-100 text-indigo-600 rounded-xl",children:a.jsx(Km,{size:20})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-slate-700 text-sm",children:"Lightning Fast"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Instant processing and rendering."})]})]}),a.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-2xl bg-white/50 border border-white/60 shadow-sm hover:shadow-md transition-shadow",children:[a.jsx("div",{className:"p-2.5 bg-emerald-100 text-emerald-600 rounded-xl",children:a.jsx(Tr,{size:20})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-slate-700 text-sm",children:"Encrypted Storage"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Your data never leaves our secure loop."})]})]})]})]}),a.jsxs("div",{className:"w-full md:w-7/12 p-6 lg:p-12 flex flex-col items-center justify-center bg-gradient-to-br from-white to-slate-50/50 relative",children:[a.jsx("div",{onDragEnter:g,onDragLeave:g,onDragOver:g,onDrop:x,onClick:()=>!s&&document.getElementById("file-upload").click(),className:`
                            relative w-full h-full min-h-[350px] border-[3px] border-dashed rounded-[2rem] flex flex-col items-center justify-center text-center transition-all duration-300 cursor-pointer group
                            ${e?"border-indigo-500 bg-indigo-50/50 scale-[0.98]":s?"border-emerald-400 bg-emerald-50/30":r?"border-red-300 bg-red-50/50":"border-slate-200 hover:border-indigo-300 hover:bg-slate-50"}
                        `,children:a.jsx(dn,{mode:"wait",children:c?a.jsxs(Ie.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"flex flex-col items-center p-8",children:[a.jsxs("div",{className:"relative w-24 h-24 mb-6",children:[a.jsx("div",{className:"absolute inset-0 border-4 border-indigo-100 rounded-full"}),a.jsx("div",{className:"absolute inset-0 border-4 border-t-indigo-600 rounded-full animate-spin"}),a.jsx(wn,{className:"absolute inset-0 m-auto text-indigo-600",size:32})]}),a.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Verifying..."}),a.jsx("p",{className:"text-slate-500 mt-2",children:"Checking file integrity"})]},"validating"):s?a.jsxs(Ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center p-8 w-full max-w-sm",children:[a.jsx("div",{className:"w-24 h-24 bg-emerald-100 rounded-full flex items-center justify-center mb-6 shadow-sm",children:a.jsx(us,{size:48,className:"text-emerald-600"})}),a.jsx("h3",{className:"text-xl font-bold text-slate-800 break-words w-full px-4",children:s.name}),a.jsx("p",{className:"text-sm font-mono text-slate-500 mt-2 mb-6 bg-white px-3 py-1 rounded-lg border border-slate-100 shadow-sm",children:E(s.size)}),a.jsxs("button",{onClick:A=>{A.stopPropagation(),j()},className:"text-rose-500 hover:text-rose-700 text-sm font-semibold flex items-center gap-2 px-4 py-2 hover:bg-rose-50 rounded-lg transition-colors",children:[a.jsx(bs,{size:16})," Cancel"]})]},"success"):r?a.jsxs(Ie.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center p-8",children:[a.jsx("div",{className:"w-20 h-20 bg-red-100 text-red-500 rounded-full flex items-center justify-center mb-4",children:a.jsx(wa,{size:40})}),a.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Upload Failed"}),a.jsx("p",{className:"text-red-500 mt-1 text-center max-w-xs",children:r}),a.jsx("button",{onClick:A=>{A.stopPropagation(),o(null)},className:"mt-6 text-slate-500 hover:text-slate-800 underline underline-offset-4",children:"Try again"})]},"error"):a.jsxs(Ie.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center p-8",children:[a.jsx("div",{className:"w-28 h-28 bg-indigo-50/80 rounded-full flex items-center justify-center mb-8 group-hover:scale-110 transition-transform duration-300 shadow-sm group-hover:shadow-md",children:a.jsx(j5,{size:48,className:"text-indigo-600 transition-colors group-hover:text-indigo-700",strokeWidth:1.5})}),a.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2 group-hover:text-indigo-700 transition-colors",children:"Drag & Drop PDF"}),a.jsxs("p",{className:"text-slate-500 mb-8 max-w-xs leading-relaxed",children:["Drop your file here or click to browse. ",a.jsx("br",{}),a.jsx("span",{className:"text-xs text-slate-400 mt-1 block",children:"Supports PDF up to 10MB"})]}),a.jsxs("button",{className:"px-8 py-3.5 bg-slate-900 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300 flex items-center gap-2 group-hover:bg-indigo-600",children:[a.jsx(wn,{size:18}),a.jsx("span",{children:"Choose Local File"})]})]},"idle")})}),a.jsx("input",{id:"file-upload",type:"file",accept:".pdf,application/pdf",onChange:N,className:"hidden"})]})]}),a.jsxs("p",{className:"mt-8 text-center text-xs text-slate-400 font-medium",children:["By uploading, you agree to our ",a.jsx("span",{className:"underline cursor-pointer hover:text-slate-600",children:"Terms of Service"})," and ",a.jsx("span",{className:"underline cursor-pointer hover:text-slate-600",children:"Privacy Policy"}),"."]})]})},er=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Q2=[.001,0,0,.001,0,0],Uw=1.35,lo={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},kc={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},P0="pdfjs_internal_editor_",Jt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},vn={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},TP={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ya={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},f0={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},di={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Sm={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},gx={ERRORS:0,WARNINGS:1,INFOS:5},$m={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},zb={moveTo:0,lineTo:1,curveTo:2,closePath:3},kP={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Lv=gx.WARNINGS;function t$(n){Number.isInteger(n)&&(Lv=n)}function n$(){return Lv}function Fv(n){Lv>=gx.INFOS&&console.info(`Info: ${n}`)}function $t(n){Lv>=gx.WARNINGS&&console.warn(`Warning: ${n}`)}function hs(n){throw new Error(n)}function Cn(n,e){n||hs(e)}function s$(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function LN(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"&&(t.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),t.tryConvertEncoding))try{n=l$(n)}catch{}const s=e?URL.parse(n,e):URL.parse(n);return s$(s)?s:null}function FN(n,e,t=!1){const s=URL.parse(n);return s?(s.hash=e,s.href):t&&LN(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function an(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const Pf=(function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e})();class KT extends Pf{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Vw extends Pf{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Wy extends Pf{constructor(e){super(e,"InvalidPDFException")}}class O0 extends Pf{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class i$ extends Pf{constructor(e){super(e,"FormatError")}}class Md extends Pf{constructor(e){super(e,"AbortException")}}function DP(n){(typeof n!="object"||n?.length===void 0)&&hs("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let i=0;i<e;i+=t){const r=Math.min(i+t,e),o=n.subarray(i,r);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function px(n){typeof n!="string"&&hs("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function a$(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function r$(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function o$(){try{return new Function(""),!0}catch{return!1}}class oa{static get isLittleEndian(){return an(this,"isLittleEndian",r$())}static get isEvalSupported(){return an(this,"isEvalSupported",o$())}static get isOffscreenCanvasSupported(){return an(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return an(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return an(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return an(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Ww=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class bt{static makeHexColor(e,t,s){return`#${Ww[e]}${Ww[t]}${Ww[s]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,s=0){const i=e[s],r=e[s+1];e[s]=i*t[0]+r*t[2]+t[4],e[s+1]=i*t[1]+r*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const i=t[0],r=t[1],o=t[2],c=t[3],u=t[4],h=t[5];for(let f=0;f<6;f+=2){const g=e[s+f],x=e[s+f+1];e[s+f]=g*i+x*o+u,e[s+f+1]=g*r+x*c+h}}static applyInverseTransform(e,t){const s=e[0],i=e[1],r=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/r,e[1]=(-s*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/r}static axialAlignedBoundingBox(e,t,s){const i=t[0],r=t[1],o=t[2],c=t[3],u=t[4],h=t[5],f=e[0],g=e[1],x=e[2],y=e[3];let N=i*f+u,j=N,E=i*x+u,A=E,R=c*g+h,M=R,L=c*y+h,z=L;if(r!==0||o!==0){const W=r*f,I=r*x,Y=o*g,U=o*y;N+=Y,A+=Y,E+=U,j+=U,R+=W,z+=W,L+=I,M+=I}s[0]=Math.min(s[0],N,E,j,A),s[1]=Math.min(s[1],R,L,M,z),s[2]=Math.max(s[2],N,E,j,A),s[3]=Math.max(s[3],R,L,M,z)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],i=e[1],r=e[2],o=e[3],c=s**2+i**2,u=s*r+i*o,h=r**2+o**2,f=(c+h)/2,g=Math.sqrt(f**2-(c*h-u**2));t[0]=Math.sqrt(f+g||1),t[1]=Math.sqrt(f-g||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>i)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>o?null:[s,r,i,o]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,i,r){r[0]=Math.min(r[0],e,s),r[1]=Math.min(r[1],t,i),r[2]=Math.max(r[2],e,s),r[3]=Math.max(r[3],t,i)}static#e(e,t,s,i,r,o,c,u,h,f){if(h<=0||h>=1)return;const g=1-h,x=h*h,y=x*h,N=g*(g*(g*e+3*h*t)+3*x*s)+y*i,j=g*(g*(g*r+3*h*o)+3*x*c)+y*u;f[0]=Math.min(f[0],N),f[1]=Math.min(f[1],j),f[2]=Math.max(f[2],N),f[3]=Math.max(f[3],j)}static#t(e,t,s,i,r,o,c,u,h,f,g,x){if(Math.abs(h)<1e-12){Math.abs(f)>=1e-12&&this.#e(e,t,s,i,r,o,c,u,-g/f,x);return}const y=f**2-4*g*h;if(y<0)return;const N=Math.sqrt(y),j=2*h;this.#e(e,t,s,i,r,o,c,u,(-f+N)/j,x),this.#e(e,t,s,i,r,o,c,u,(-f-N)/j,x)}static bezierBoundingBox(e,t,s,i,r,o,c,u,h){h[0]=Math.min(h[0],e,c),h[1]=Math.min(h[1],t,u),h[2]=Math.max(h[2],e,c),h[3]=Math.max(h[3],t,u),this.#t(e,s,r,c,t,i,o,u,3*(-e+3*(s-r)+c),6*(e-2*s+r),3*(s-e),h),this.#t(e,s,r,c,t,i,o,u,3*(-t+3*(i-o)+u),6*(t-2*i+o),3*(i-t),h)}}function l$(n){return decodeURIComponent(escape(n))}let Gw=null,ZT=null;function RP(n){return Gw||(Gw=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ZT=new Map([["","t"]])),n.replaceAll(Gw,(e,t,s)=>t?t.normalize("NFKC"):ZT.get(s))}function zN(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),DP(n)}const IN="pdfjs_internal_id_";function c$(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,i,...r]=t;if(!n(s)&&!Number.isInteger(s)||!e(i))return!1;const o=r.length;let c=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;c=!1;break;default:return!1}for(const u of r)if(!(typeof u=="number"||c&&u===null))return!1;return!0}function Ma(n,e,t){return Math.min(Math.max(n,e),t)}function MP(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(DP(n))}function d$(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):px(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class L0{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function i(r){if(!r)return;let o=null;const c=r.name;if(c==="#text")o=r.value;else if(L0.shouldBuildText(c))r?.attributes?.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&t.push({str:o}),!!r.children)for(const u of r.children)i(u)}return i(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class BN{static setupStorage(e,t,s,i,r){const o=i.getValue(t,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),r==="print")break;e.addEventListener("input",c=>{i.setValue(t,{value:c.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?e.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",c=>{i.setValue(t,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),r==="print")break;e.addEventListener("input",c=>{i.setValue(t,{value:c.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const c of s.children)c.attributes.value===o.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}e.addEventListener("input",c=>{const u=c.target.options,h=u.selectedIndex===-1?"":u[u.selectedIndex].value;i.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:i,linkService:r}){const{attributes:o}=t,c=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[u,h]of Object.entries(o))if(h!=null)switch(u){case"class":h.length&&e.setAttribute(u,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!c||u!=="href"&&u!=="newWindow")&&e.setAttribute(u,h)}c&&r.addLinkAttributes(e,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(e,o.dataId,t,s)}static render(e){const t=e.annotationStorage,s=e.linkService,i=e.xfaHtml,r=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:r,linkService:s});const c=r!=="richText",u=e.div;if(u.append(o),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;u.style.transform=g}c&&u.setAttribute("class","xfaLayer xfaFont");const h=[];if(i.children.length===0){if(i.value){const g=document.createTextNode(i.value);o.append(g),c&&L0.shouldBuildText(i.name)&&h.push(g)}return{textDivs:h}}const f=[[i,-1,o]];for(;f.length>0;){const[g,x,y]=f.at(-1);if(x+1===g.children.length){f.pop();continue}const N=g.children[++f.at(-1)[1]];if(N===null)continue;const{name:j}=N;if(j==="#text"){const A=document.createTextNode(N.value);h.push(A),y.append(A);continue}const E=N?.attributes?.xmlns?document.createElementNS(N.attributes.xmlns,j):document.createElement(j);if(y.append(E),N.attributes&&this.setAttributes({html:E,element:N,storage:t,intent:r,linkService:s}),N.children?.length>0)f.push([N,-1,E]);else if(N.value){const A=document.createTextNode(N.value);c&&L0.shouldBuildText(j)&&h.push(A),E.append(A)}}for(const g of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const wd="http://www.w3.org/2000/svg";class Cf{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Ag(n,e="text"){if(Qp(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class xx{constructor({viewBox:e,userUnit:t,scale:s,rotation:i,offsetX:r=0,offsetY:o=0,dontFlip:c=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=i,this.offsetX=r,this.offsetY=o,s*=t;const u=(e[2]+e[0])/2,h=(e[3]+e[1])/2;let f,g,x,y;switch(i%=360,i<0&&(i+=360),i){case 180:f=-1,g=0,x=0,y=1;break;case 90:f=0,g=1,x=1,y=0;break;case 270:f=0,g=-1,x=-1,y=0;break;case 0:f=1,g=0,x=0,y=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(x=-x,y=-y);let N,j,E,A;f===0?(N=Math.abs(h-e[1])*s+r,j=Math.abs(u-e[0])*s+o,E=(e[3]-e[1])*s,A=(e[2]-e[0])*s):(N=Math.abs(u-e[0])*s+r,j=Math.abs(h-e[1])*s+o,E=(e[2]-e[0])*s,A=(e[3]-e[1])*s),this.transform=[f*s,g*s,x*s,y*s,N-f*s*u-x*s*h,j-g*s*u-y*s*h],this.width=E,this.height=A}get rawDims(){const e=this.viewBox;return an(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new xx({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}convertToViewportPoint(e,t){const s=[e,t];return bt.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];bt.applyTransform(t,this.transform);const s=[e[2],e[3]];return bt.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return bt.applyInverseTransform(s,this.transform),s}}class zv extends Pf{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function bx(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function Iv(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function PP(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function OP(n,e="document.pdf"){if(typeof n!="string")return e;if(bx(n))return $t('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(c=>{try{return new URL(c)}catch{try{return new URL(decodeURIComponent(c))}catch{try{return new URL(c,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(c),"https://foo.bar")}catch{return null}}}}})(n);if(!s)return e;const i=c=>{try{let u=decodeURIComponent(c);return u.includes("/")?(u=u.split("/").at(-1),u.test(/^\.pdf$/i)?u:c):u}catch{return c}},r=/\.pdf$/i,o=s.pathname.split("/").at(-1);if(r.test(o))return i(o);if(s.searchParams.size>0){const c=Array.from(s.searchParams.values()).reverse();for(const h of c)if(r.test(h))return i(h);const u=Array.from(s.searchParams.keys()).reverse();for(const h of u)if(r.test(h))return i(h)}if(s.hash){const u=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(u)return i(u[0])}return e}class QT{started=Object.create(null);times=[];time(e){e in this.started&&$t(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||$t(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:i,end:r}of this.times)e.push(`${s.padEnd(t)} ${r-i}ms
`);return e.join("")}}function Qp(n,e){const t=e?URL.parse(n,e):URL.parse(n);return t?.protocol==="http:"||t?.protocol==="https:"}function go(n){n.preventDefault()}function Bs(n){n.preventDefault(),n.stopPropagation()}function u$(n){console.log("Deprecated API usage: "+n)}class Gy{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const s=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let c=parseInt(t[5],10);c=c>=0&&c<=59?c:0;let u=parseInt(t[6],10);u=u>=0&&u<=59?u:0;const h=t[7]||"Z";let f=parseInt(t[8],10);f=f>=0&&f<=23?f:0;let g=parseInt(t[9],10)||0;return g=g>=0&&g<=59?g:0,h==="-"?(o+=f,c+=g):h==="+"&&(o-=f,c-=g),new Date(Date.UTC(s,i,r,o,c,u))}}function LP(n,{scale:e=1,rotation:t=0}){const{width:s,height:i}=n.attributes.style,r=[0,0,parseInt(s),parseInt(i)];return new xx({viewBox:r,userUnit:1,scale:e,rotation:t})}function Eg(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):($t(`Not a valid color format: "${n}"`),[0,0,0])}function h$(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,Eg(s))}e.remove()}function Is(n){const{a:e,b:t,c:s,d:i,e:r,f:o}=n.getTransform();return[e,t,s,i,r,o]}function Nc(n){const{a:e,b:t,c:s,d:i,e:r,f:o}=n.getTransform().invertSelf();return[e,t,s,i,r,o]}function ah(n,e,t=!1,s=!0){if(e instanceof xx){const{pageWidth:i,pageHeight:r}=e.rawDims,{style:o}=n,c=oa.isCSSRoundSupported,u=`var(--total-scale-factor) * ${i}px`,h=`var(--total-scale-factor) * ${r}px`,f=c?`round(down, ${u}, var(--scale-round-x))`:`calc(${u})`,g=c?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!t||e.rotation%180===0?(o.width=f,o.height=g):(o.width=g,o.height=f)}s&&n.setAttribute("data-main-rotation",e.rotation)}class zl{constructor(){const{pixelRatio:e}=zl;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,i,r=-1){let o=1/0,c=1/0,u=1/0;s=zl.capPixels(s,r),s>0&&(o=Math.sqrt(s/(e*t))),i!==-1&&(c=i/e,u=i/t);const h=Math.min(o,c,u);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const Yy=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class f${static get isDarkMode(){return an(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class FP{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:s}=window.getComputedStyle(e);return e.remove(),an(this,"commentForegroundColor",Eg(s))}}function zP(n,e,t,s){s=Math.min(Math.max(s??1,0),1);const i=255*(1-s);return n=Math.round(n*s+i),e=Math.round(e*s+i),t=Math.round(t*s+i),[n,e,t]}function JT(n,e){const t=n[0]/255,s=n[1]/255,i=n[2]/255,r=Math.max(t,s,i),o=Math.min(t,s,i),c=(r+o)/2;if(r===o)e[0]=e[1]=0;else{const u=r-o;switch(e[1]=c<.5?u/(r+o):u/(2-r-o),r){case t:e[0]=((s-i)/u+(s<i?6:0))*60;break;case s:e[0]=((i-t)/u+2)*60;break;case i:e[0]=((t-s)/u+4)*60;break}}e[2]=c}function J2(n,e){const t=n[0],s=n[1],i=n[2],r=(1-Math.abs(2*i-1))*s,o=r*(1-Math.abs(t/60%2-1)),c=i-r/2;switch(Math.floor(t/60)){case 0:e[0]=r+c,e[1]=o+c,e[2]=c;break;case 1:e[0]=o+c,e[1]=r+c,e[2]=c;break;case 2:e[0]=c,e[1]=r+c,e[2]=o+c;break;case 3:e[0]=c,e[1]=o+c,e[2]=r+c;break;case 4:e[0]=o+c,e[1]=c,e[2]=r+c;break;case 5:case 6:e[0]=r+c,e[1]=c,e[2]=o+c;break}}function qT(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function $T(n,e,t){J2(n,t),t.map(qT);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];J2(e,t),t.map(qT);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];return s>i?(s+.05)/(i+.05):(i+.05)/(s+.05)}const ek=new Map;function IP(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let s=ek.get(t);if(s)return s;const i=new Float32Array(9),r=i.subarray(0,3),o=i.subarray(3,6);JT(n,o);const c=i.subarray(6,9);JT(e,c);const u=c[2]<.5,h=u?12:4.5;if(o[2]=u?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),$T(o,c,r)<h){let f,g;u?(f=o[2],g=1):(f=0,g=o[2]);const x=.005;for(;g-f>x;){const y=o[2]=(f+g)/2;u===$T(o,c,r)<h?f=y:g=y}o[2]=u?g:f}return J2(o,r),s=bt.makeHexColor(Math.round(r[0]*255),Math.round(r[1]*255),Math.round(r[2]*255)),ek.set(t,s),s}function HN({html:n,dir:e,className:t},s){const i=document.createDocumentFragment();if(typeof n=="string"){const r=document.createElement("p");r.dir=e||"auto";const o=n.split(/(?:\r\n?|\n)/);for(let c=0,u=o.length;c<u;++c){const h=o[c];r.append(document.createTextNode(h)),c<u-1&&r.append(document.createElement("br"))}i.append(r)}else BN.render({xfaHtml:n,div:i,intent:"richText"});i.firstChild.classList.add("richText",t),s.append(i)}class m0{#e=null;#t=null;#s;#n=null;#r=null;#i=null;#a=null;#o=null;static#c=null;constructor(e){this.#s=e,m0.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#s._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",go,{signal:t}),e.addEventListener("pointerdown",m0.#l,{signal:t}));const s=this.#n=document.createElement("div");s.className="buttons",e.append(s);const i=this.#s.toolbarPosition;if(i){const{style:r}=e,o=this.#s._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#h(e){this.#s._focusEventsAllowed=!1,Bs(e)}#u(e){this.#s._focusEventsAllowed=!0,Bs(e)}#f(e){const t=this.#s._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",go,{signal:t}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#r?.shown(),this.#i?.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=this.#s,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",m0.#c[e]),this.#f(s)&&s.addEventListener("click",i=>{t.delete()},{signal:t._signal}),this.#n.append(s)}get#p(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#f(t),this.#n.append(t,this.#p),this.#r=e}addComment(e,t=null){if(this.#i)return;const s=e.renderForToolbar();if(!s)return;this.#f(s);const i=this.#a=this.#p;t?(this.#n.insertBefore(s,t),this.#n.insertBefore(i,t)):this.#n.append(s,i),this.#i=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;const t=e.renderButton();this.#f(t),this.#n.append(t,this.#p)}async addEditSignatureButton(e){const t=this.#o=await e.renderEditButton(this.#s);this.#f(t),this.#n.append(t,this.#p)}removeButton(e){e==="comment"&&(this.#i?.removeToolbarCommentButton(),this.#i=null,this.#a?.remove(),this.#a=null)}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,s){const i=this.#n.querySelector(s);i&&e==="comment"&&this.addComment(t,i)}updateEditSignatureButton(e){this.#o&&(this.#o.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class m${#e=null;#t=null;#s;constructor(e){this.#s=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const t=this.#s._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",go,{signal:t});const s=this.#e=document.createElement("div");return s.className="buttons",e.append(s),this.#s.hasCommentManager()&&this.#i("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#s.commentSelection("floating_button")}),this.#i("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#s.highlightSelection("floating_button")}),e}#r(e,t){let s=0,i=0;for(const r of e){const o=r.y+r.height;if(o<s)continue;const c=r.x+(t?r.width:0);if(o>s){i=c,s=o;continue}t?c>i&&(i=c):c<i&&(i=c)}return[t?1-i:i,s]}show(e,t,s){const[i,r]=this.#r(t,s),{style:o}=this.#t||=this.#n();e.append(this.#t),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#i(e,t,s,i){const r=document.createElement("button");r.classList.add("basic",e),r.tabIndex=0,r.setAttribute("data-l10n-id",t);const o=document.createElement("span");r.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",s);const c=this.#s._signal;c instanceof AbortSignal&&!c.aborted&&(r.addEventListener("contextmenu",go,{signal:c}),r.addEventListener("click",i,{signal:c})),this.#e.append(r)}}function BP(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}class g${#e=0;get id(){return`${P0}${this.#e++}`}}class UN{#e=zN();#t=0;#s=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const r=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return an(this,"_isSVGFittingCanvas",r)}async#n(e,t){this.#s||=new Map;let s=this.#s.get(e);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let i;if(typeof t=="string"?(s.url=t,i=await Ag(t,"blob")):t instanceof File?i=s.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const r=UN._isSVGFittingCanvas,o=new FileReader,c=new Image,u=new Promise((h,f)=>{c.onload=()=>{s.bitmap=c,s.isSvg=!0,h()},o.onload=async()=>{const g=s.svgUrl=o.result;c.src=await r?`${g}#svgView(preserveAspectRatio(none))`:g},c.onerror=o.onerror=f});o.readAsDataURL(i),await u}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){$t(i),s=null}return this.#s.set(e,s),s&&this.#s.set(s.id,s),s}async getFromFile(e){const{lastModified:t,name:s,size:i,type:r}=e;return this.#n(`${t}_${s}_${i}_${r}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,t){const s=await t;return this.#n(e,s)}async getFromId(e){this.#s||=new Map;const t=this.#s.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#s||=new Map;let s=this.#s.get(e);if(s?.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#s.set(e,s),this.#s.set(s.id,s),s}getSvgUrl(e){const t=this.#s.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#s||=new Map;const t=this.#s.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(s.width,s.height);i.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=i.convertToBlob()}s.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class p${#e=[];#t=!1;#s;#n=-1;constructor(e=128){this.#s=e}add({cmd:e,undo:t,post:s,mustExec:i,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:c=!1}){if(i&&e(),this.#t)return;const u={cmd:e,undo:t,post:s,type:r};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(u);return}if(o&&this.#e[this.#n].type===r){c&&(u.undo=this.#e[this.#n].undo),this.#e[this.#n]=u;return}const h=this.#n+1;h===this.#s?this.#e.splice(0,1):(this.#n=h,h<this.#e.length&&this.#e.splice(h)),this.#e.push(u)}undo(){if(this.#n===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(this.#n!==-1){for(let t=this.#n;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#n-t),this.#n=t;return}this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}}class yx{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=oa.platform;for(const[s,i,r={}]of e)for(const o of s){const c=o.startsWith("mac+");t&&c?(this.callbacks.set(o.slice(4),{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1))):!t&&!c&&(this.callbacks.set(o,{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(this.#e(t));if(!s)return;const{callback:i,options:{bubbles:r=!1,args:o=[],checker:c=null}}=s;c&&!c(e,t)||(i.bind(e,...o,t)(),r||Bs(t))}}class VN{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return h$(e),an(this,"_colors",e)}convert(e){const t=Eg(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,i]of this._colors)if(i.every((r,o)=>r===t[o]))return VN._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?bt.makeHexColor(...t):e}}class Pd{#e=new AbortController;#t=null;#s=null;#n=new Map;#r=new Map;#i=null;#a=null;#o=null;#c=new p$;#l=null;#h=null;#u=null;#f=0;#p=new Set;#m=null;#d=null;#g=new Set;_editorUndoBar=null;#x=!1;#y=!1;#b=!1;#C=null;#N=null;#v=null;#E=null;#S=!1;#j=null;#k=new g$;#_=!1;#T=!1;#F=!1;#R=null;#P=null;#z=null;#O=null;#W=null;#A=Jt.NONE;#w=new Set;#M=null;#I=null;#H=null;#X=null;#Y=null;#K={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#U=[0,0];#L=null;#G=null;#q=null;#$=null;#B=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=Pd.prototype,t=o=>o.#G.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:c})=>{if(c instanceof HTMLInputElement){const{type:u}=c;return u!=="text"&&u!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return an(this,"_keyboardManager",new yx([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&o.#G.contains(c)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&o.#G.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}constructor(e,t,s,i,r,o,c,u,h,f,g,x,y,N,j,E){const A=this._signal=this.#e.signal;this.#G=e,this.#q=t,this.#$=s,this.#i=i,this.#l=r,this.#I=o,this.#Y=u,this._eventBus=c,c._on("editingaction",this.onEditingAction.bind(this),{signal:A}),c._on("pagechanging",this.onPageChanging.bind(this),{signal:A}),c._on("scalechanging",this.onScaleChanging.bind(this),{signal:A}),c._on("rotationchanging",this.onRotationChanging.bind(this),{signal:A}),c._on("setpreference",this.onSetPreference.bind(this),{signal:A}),c._on("switchannotationeditorparams",R=>this.updateParams(R.type,R.value),{signal:A}),window.addEventListener("pointerdown",()=>{this.#T=!0},{capture:!0,signal:A}),window.addEventListener("pointerup",()=>{this.#T=!1},{capture:!0,signal:A}),this.#le(),this.#he(),this.#te(),this.#a=u.annotationStorage,this.#C=u.filterFactory,this.#H=h,this.#E=f||null,this.#x=g,this.#y=x,this.#b=y,this.#W=N||null,this.viewParameters={realScale:Cf.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=j||null,this._supportsPinchToZoom=E!==!1,r?.setSidebarUiManager(this)}destroy(){this.#B?.resolve(),this.#B=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#r.values())e.destroy();this.#r.clear(),this.#n.clear(),this.#g.clear(),this.#O?.clear(),this.#t=null,this.#w.clear(),this.#c.destroy(),this.#i?.destroy(),this.#l?.destroy(),this.#I?.destroy(),this.#j?.hide(),this.#j=null,this.#z?.destroy(),this.#z=null,this.#s=null,this.#N&&(clearTimeout(this.#N),this.#N=null),this.#L&&(clearTimeout(this.#L),this.#L=null),this._editorUndoBar?.destroy(),this.#Y=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#W}get useNewAltTextFlow(){return this.#y}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return an(this,"hcmFilter",this.#H?this.#C.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return an(this,"direction",getComputedStyle(this.#G).direction)}get _highlightColors(){return an(this,"_highlightColors",this.#E?new Map(this.#E.split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return an(this,"highlightColors",null);const t=new Map,s=!!this.#H;for(const[i,r]of e){const o=i.endsWith("_HCM");if(s&&o){t.set(i.replace("_HCM",""),r);continue}!s&&!o&&t.set(i,r)}return an(this,"highlightColors",t)}get highlightColorNames(){return an(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#u=e}setMainHighlightColorPicker(e){this.#z=e}editAltText(e,t=!1){this.#i?.editAltText(this,e,t)}hasCommentManager(){return!!this.#l}editComment(e,t,s,i){this.#l?.showDialog(this,e,t,s,i)}selectComment(e,t){this.#r.get(e)?.getEditorByUID(t)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}toggleComment(e,t,s=void 0){this.#l?.toggleCommentPopup(e,t,s)}makeCommentColor(e,t){return e&&this.#l?.makeCommentColor(e,t)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#r.has(e-1))return;const{resolve:t,promise:s}=Promise.withResolvers(),i=r=>{r.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await s}getSignature(e){this.#I?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#I}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){e==="enableNewAltTextWhenAddingImage"&&(this.#b=t)}onPageChanging({pageNumber:e}){this.#f=e-1}focusMainContainer(){this.#G.focus()}findParent(e,t){for(const s of this.#r.values()){const{x:i,y:r,width:o,height:c}=s.div.getBoundingClientRect();if(e>=i&&e<=i+o&&t>=r&&t<=r+c)return s}return null}disableUserSelect(e=!1){this.#q.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#g.add(e)}removeShouldRescale(e){this.#g.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Cf.PDF_TO_CSS_UNITS;for(const t of this.#g)t.onScaleChanging();this.#u?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#J({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of this.#r.values())if(s.hasTextLayer(e))return s;return null}highlightSelection(e="",t=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:c}=s,u=s.toString(),f=this.#J(s).closest(".textLayer"),g=this.getSelectionBoxes(f);if(!g)return;s.empty();const x=this.#ee(f),y=this.#A===Jt.NONE,N=()=>{const j=x?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:c,text:u});y&&this.showAllEditors("highlight",!0,!0),t&&j?.editComment()};if(y){this.switchToMode(Jt.HIGHLIGHT,N);return}N()}commentSelection(e=""){this.highlightSelection(e,!0)}#re(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=this.#J(e).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(this.#j||=new m$(this),this.#j.show(s,i,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#a)return null;const t=`${P0}${e}`,s=this.#a.getRawValue(t);return s&&this.#a.remove(t),s}addToAnnotationStorage(e){!e.isEmpty()&&this.#a&&!this.#a.has(e.id)&&this.#a.setValue(e.id,e)}a11yAlert(e,t=null){const s=this.#$;s&&(s.setAttribute("data-l10n-id",e),t?s.setAttribute("data-l10n-args",JSON.stringify(t)):s.removeAttribute("data-l10n-args"))}#oe(){const e=document.getSelection();if(!e||e.isCollapsed){this.#M&&(this.#j?.hide(),this.#M=null,this.#D({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#M)return;const i=this.#J(e).closest(".textLayer");if(!i){this.#M&&(this.#j?.hide(),this.#M=null,this.#D({hasSelectedText:!1}));return}if(this.#j?.hide(),this.#M=t,this.#D({hasSelectedText:!0}),!(this.#A!==Jt.HIGHLIGHT&&this.#A!==Jt.NONE)&&(this.#A===Jt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const r=this.#A===Jt.HIGHLIGHT?this.#ee(i):null;if(r?.toggleDrawing(),this.#T){const o=new AbortController,c=this.combinedSignal(o),u=h=>{h.type==="pointerup"&&h.button!==0||(o.abort(),r?.toggleDrawing(!0),h.type==="pointerup"&&this.#Z("main_toolbar"))};window.addEventListener("pointerup",u,{signal:c}),window.addEventListener("blur",u,{signal:c})}else r?.toggleDrawing(!0),this.#Z("main_toolbar")}}#Z(e=""){this.#A===Jt.HIGHLIGHT?this.highlightSelection(e):this.#x&&this.#re()}#le(){document.addEventListener("selectionchange",this.#oe.bind(this),{signal:this._signal})}#ce(){if(this.#v)return;this.#v=new AbortController;const e=this.combinedSignal(this.#v);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#de(){this.#v?.abort(),this.#v=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#Z("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#w)if(t.div.contains(e)){this.#P=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#P)return;const[e,t]=this.#P;this.#P=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#te(){if(this.#R)return;this.#R=new AbortController;const e=this.combinedSignal(this.#R);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#ue(){this.#R?.abort(),this.#R=null}#ne(){if(this.#h)return;this.#h=new AbortController;const e=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#se(){this.#h?.abort(),this.#h=null}#he(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.#ne()}removeEditListeners(){this.#ue(),this.#se()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of this.#d)if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of this.#d)if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of this.#w){const i=s.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const o of this.#d)if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){$t(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const u of s){const h=await i.deserialize(u);if(!h)return;r.push(h)}const o=()=>{for(const u of r)this.#ie(u);this.#ae(r)},c=()=>{for(const u of r)u.remove()};this.addCommands({cmd:o,undo:c,mustExec:!0})}catch(r){$t(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#A!==Jt.NONE&&!this.isEditorHandlingKeyboard&&Pd._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#Z("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#D(e){Object.entries(e).some(([s,i])=>this.#K[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#K,e)}),this.#A===Jt.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#V([[vn.HIGHLIGHT_FREE,!0]]))}#V(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ce(),this.#ne(),this.#D({isEditing:this.#A!==Jt.NONE,isEmpty:this.#Q(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#de(),this.#se(),this.#D({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#d){this.#d=e;for(const t of this.#d)this.#V(t.defaultPropertiesToUpdate)}}getId(){return this.#k.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(e){return this.#r.get(e)}get currentPageIndex(){return this.#f}addLayer(e){this.#r.set(e.pageIndex,e),this.#_?e.enable():e.disable()}removeLayer(e){this.#r.delete(e.pageIndex)}async updateMode(e,t=null,s=!1,i=!1,r=!1){if(this.#A!==e&&!(this.#B&&(await this.#B.promise,!this.#B))){if(this.#B=Promise.withResolvers(),this.#u?.commitOrRemove(),this.#A===Jt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#A=e,e===Jt.NONE){this.setEditingState(!1),this.#me();for(const o of this.#n.values())o.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#B.resolve();return}for(const o of this.#n.values())o.addStandaloneCommentButton();e===Jt.SIGNATURE&&await this.#I?.loadSignatures(),this.setEditingState(!0),await this.#fe(),this.unselectAll();for(const o of this.#r.values())o.updateMode(e);if(e===Jt.POPUP){this.#s||=await this.#Y.getAnnotationsByType(new Set(this.#d.map(u=>u._editorType)));const o=new Set,c=[];for(const u of this.#n.values()){const{annotationElementId:h,hasComment:f,deleted:g}=u;h&&o.add(h),f&&!g&&c.push(u.getData())}for(const u of this.#s){const{id:h,popupRef:f,contentsObj:g}=u;f&&g?.str&&!o.has(h)&&!this.#p.has(h)&&c.push(u)}this.#l?.showSidebar(c)}if(!t){s&&this.addNewEditorFromKeyboard(),this.#B.resolve();return}for(const o of this.#n.values())o.uid===t?(this.setSelected(o),r?o.editComment():i?o.enterInEditMode():o.focus()):o.unselect();this.#B.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#A&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(this.#d){switch(e){case vn.CREATE:this.currentLayer.addNewEditor(t);return;case vn.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#X||=new Map).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const s of this.#w)s.updateParams(e,t);else for(const s of this.#d)s.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){for(const r of this.#n.values())r.editorType===e&&r.show(t);(this.#X?.get(vn.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#V([[vn.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#F!==e){this.#F=e;for(const t of this.#r.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#fe(){if(!this.#_){this.#_=!0;const e=[];for(const t of this.#r.values())e.push(t.enable());await Promise.all(e);for(const t of this.#n.values())t.enable()}}#me(){if(this.unselectAll(),this.#_){this.#_=!1;for(const e of this.#r.values())e.disable();for(const e of this.#n.values())e.disable()}}*getEditors(e){for(const t of this.#n.values())t.pageIndex===e&&(yield t)}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#N&&clearTimeout(this.#N),this.#N=setTimeout(()=>{this.focusMainContainer(),this.#N=null},0)),this.#n.delete(e.id),e.annotationElementId&&this.#O?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#p.has(e.annotationElementId))&&this.#a?.remove(e.id)}addDeletedAnnotationElement(e){this.#p.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#p.has(e)}removeDeletedAnnotationElement(e){this.#p.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ie(e){const t=this.#r.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#V(e.propertiesToUpdate))}get#ge(){let e=null;for(e of this.#w);return e}updateUI(e){this.#ge===e&&this.#V(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#V(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#w.has(e)){this.#w.delete(e),e.unselect(),this.#D({hasSelectedEditor:this.hasSelection});return}this.#w.add(e),e.select(),this.#V(e.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.id}),this.#u?.commitOrRemove();for(const t of this.#w)t!==e&&t.unselect();this.#w.clear(),this.#w.add(e),e.select(),this.#V(e.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}isSelected(e){return this.#w.has(e)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(e){e.unselect(),this.#w.delete(e),this.#D({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#D({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Q()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#Q()})}addCommands(e){this.#c.add(e),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Q()})}cleanUndoStack(e){this.#c.cleanType(e)}#Q(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#w],s=()=>{this._editorUndoBar?.show(i,t.length===1?t[0].editorType:t.length);for(const r of t)r.remove()},i=()=>{for(const r of t)this.#ie(r)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#ae(e){for(const t of this.#w)t.unselect();this.#w.clear();for(const t of e)t.isEmpty()||(this.#w.add(t),t.select());this.#D({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#w)e.commit();this.#ae(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#A!==Jt.NONE))&&!this.#u?.commitOrRemove()&&this.hasSelection){for(const e of this.#w)e.unselect();this.#w.clear(),this.#D({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#U[0]+=e,this.#U[1]+=t;const[i,r]=this.#U,o=[...this.#w],c=1e3;this.#L&&clearTimeout(this.#L),this.#L=setTimeout(()=>{this.#L=null,this.#U[0]=this.#U[1]=0,this.addCommands({cmd:()=>{for(const u of o)this.#n.has(u.id)&&(u.translateInPage(i,r),u.translationDone())},undo:()=>{for(const u of o)this.#n.has(u.id)&&(u.translateInPage(-i,-r),u.translationDone())},mustExec:!1})},c);for(const u of o)u.translateInPage(e,t),u.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(const e of this.#w)this.#m.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);const e=this.#m;this.#m=null;let t=!1;for(const[{x:i,y:r,pageIndex:o},c]of e)c.newX=i,c.newY=r,c.newPageIndex=o,t||=i!==c.savedX||r!==c.savedY||o!==c.savedPageIndex;if(!t)return!1;const s=(i,r,o,c)=>{if(this.#n.has(i.id)){const u=this.#r.get(c);u?i._setParentAndPosition(u,r,o):(i.pageIndex=c,i.x=r,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:o,newPageIndex:c}]of e)s(i,r,o,c)},undo:()=>{for(const[i,{savedX:r,savedY:o,savedPageIndex:c}]of e)s(i,r,o,c)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#m)for(const s of this.#m.keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#A}isEditingMode(){return this.#A!==Jt.NONE}get imageManager(){return an(this,"imageManager",new UN)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,f=t.rangeCount;h<f;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:s,y:i,width:r,height:o}=e.getBoundingClientRect();let c;switch(e.getAttribute("data-main-rotation")){case"90":c=(h,f,g,x)=>({x:(f-i)/o,y:1-(h+g-s)/r,width:x/o,height:g/r});break;case"180":c=(h,f,g,x)=>({x:1-(h+g-s)/r,y:1-(f+x-i)/o,width:g/r,height:x/o});break;case"270":c=(h,f,g,x)=>({x:1-(f+x-i)/o,y:(h-s)/r,width:x/o,height:g/r});break;default:c=(h,f,g,x)=>({x:(h-s)/r,y:(f-i)/o,width:g/r,height:x/o});break}const u=[];for(let h=0,f=t.rangeCount;h<f;h++){const g=t.getRangeAt(h);if(!g.collapsed)for(const{x,y,width:N,height:j}of g.getClientRects())N===0||j===0||u.push(c(x,y,N,j))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#o||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#o?.delete(e)}renderAnnotationElement(e){const t=this.#o?.get(e.data.id);if(!t)return;const s=this.#a.getRawValue(t);s&&(this.#A===Jt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){const i=this.#O?.get(e);i&&(i.setCanvas(t,s),this.#O.delete(e))}addMissingCanvas(e,t){(this.#O||=new Map).set(e,t)}}class _c{#e=null;#t=!1;#s=null;#n=null;#r=null;#i=null;#a=!1;#o=null;#c=null;#l=null;#h=null;#u=!1;static#f=null;static _l10n=null;constructor(e){this.#c=e,this.#u=e._uiManager.useNewAltTextFlow,_c.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){_c._l10n??=e}async render(){const e=this.#s=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#n=document.createElement("span");e.append(t),this.#u?(e.classList.add("new"),e.setAttribute("data-l10n-id",_c.#f.missing),t.setAttribute("data-l10n-id",_c.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;e.addEventListener("contextmenu",go,{signal:s}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#u&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#p}})};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(this.#a=!0,i(r))},{signal:s}),await this.#m(),e}get#p(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#s&&(this.#s.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#u?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#u?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#h=await _c._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#m())}toggleAltTextBadge(e=!1){if(!this.#u||this.#e){this.#o?.remove(),this.#o=null;return}if(!this.#o){const t=this.#o=document.createElement("div");t.className="noAltTextBadge",this.#c.div.append(t)}this.#o.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#l===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:i,cancel:r=!1}){s&&(this.#l=s,this.#h=i),!(this.#e===e&&this.#t===t)&&(r||(this.#e=e,this.#t=t),this.#m())}toggle(e=!1){this.#s&&(!e&&this.#i&&(clearTimeout(this.#i),this.#i=null),this.#s.disabled=!e)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#s?.remove(),this.#s=null,this.#n=null,this.#r=null,this.#o?.remove(),this.#o=null}async#m(){const e=this.#s;if(!e)return;if(this.#u){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",_c.#f[this.#p]),this.#n?.setAttribute("data-l10n-id",_c.#f[`${this.#p}-label`]),!this.#e){this.#r?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#r?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#r;if(!t){this.#r=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#c.id}`;const i=100,r=this.#c._uiManager._signal;r.addEventListener("abort",()=>{clearTimeout(this.#i),this.#i=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#i=setTimeout(()=>{this.#i=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:r}),e.addEventListener("mouseleave",()=>{this.#i&&(clearTimeout(this.#i),this.#i=null),this.#r?.classList.remove("show")},{signal:r})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#c.getElementForAltText()?.setAttribute("aria-describedby",t.id)}}class Ib{#e=null;#t=null;#s=!1;#n=null;#r=null;#i=null;#a=null;#o=null;#c=!1;#l=null;constructor(e){this.#n=e}renderForToolbar(){const e=this.#t=document.createElement("button");return e.className="comment",this.#h(e,!1)}renderForStandalone(){const e=this.#e=document.createElement("button");e.className="annotationCommentButton";const t=this.#n.commentButtonPosition;if(t){const{style:s}=e;s.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const i=this.#n.commentButtonColor;i&&(s.backgroundColor=i)}return this.#h(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;const e=this.#n.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;const{x:e,y:t,height:s}=this.#e.getBoundingClientRect(),{x:i,y:r,width:o,height:c}=this.#n.parent.boundingClientRect;return[(e-i)/o,(t+s-r)/c]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:t}){this.#e&&(this.#e.classList.toggle("selected",e),this.#e.ariaExpanded=t)}#h(e,t){if(!this.#n._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const s=this.#n._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return e;e.addEventListener("contextmenu",go,{signal:s}),t&&(e.addEventListener("focusin",r=>{this.#n._focusEventsAllowed=!1,Bs(r)},{capture:!0,signal:s}),e.addEventListener("focusout",r=>{this.#n._focusEventsAllowed=!0,Bs(r)},{capture:!0,signal:s})),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),e===this.#t?this.edit():this.#n.toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(this.#s=!0,i(r))},{signal:s}),e.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:s}),e.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:s}),e}edit(e){const t=this.commentPopupPositionInLayer;let s,i;if(t)[s,i]=t;else{[s,i]=this.#n.commentButtonPosition;const{width:f,height:g,x,y}=this.#n;s=x+s*f,i=y+i*g}const r=this.#n.parent.boundingClientRect,{x:o,y:c,width:u,height:h}=r;this.#n._uiManager.editComment(this.#n,o+s*u,c+i*h,{...e,parentDimensions:r})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#s}),this.#s=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#r}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#i,date:this.#o,deleted:this.isDeleted()}}set data(e){if(e!==this.#a&&(this.#i=null),e===null){this.#a="",this.#c=!0;return}this.#a=e,this.#o=new Date,this.#c=!1}setInitialText(e,t=null){this.#r=e,this.data=e,this.#o=null,this.#i=t}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#a="",this.#i=null,this.#o=null,this.#n=null,this.#s=!1,this.#c=!1}}class vx{#e;#t=!1;#s=null;#n;#r;#i;#a;#o=null;#c;#l=null;#h;#u=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:o=null,signal:c}){this.#e=e,this.#s=s,this.#n=t,this.#r=i,this.#i=r,this.#a=o,this.#h=new AbortController,this.#c=AbortSignal.any([c,this.#h.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/zl.pixelRatio}#f(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#o)return;const i=this.#o=new AbortController,r=AbortSignal.any([this.#c,i.signal]),o=this.#e,c={capture:!0,signal:r,passive:!1},u=h=>{h.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};o.addEventListener("pointerdown",h=>{h.pointerType==="touch"&&(Bs(h),u(h))},c),o.addEventListener("pointerup",u,c),o.addEventListener("pointercancel",u,c);return}if(!this.#u){this.#u=new AbortController;const i=AbortSignal.any([this.#c,this.#u.signal]),r=this.#e,o={signal:i,capture:!1,passive:!1};r.addEventListener("touchmove",this.#p.bind(this),o);const c=this.#m.bind(this);r.addEventListener("touchend",c,o),r.addEventListener("touchcancel",c,o),o.capture=!0,r.addEventListener("pointerdown",Bs,o),r.addEventListener("pointermove",Bs,o),r.addEventListener("pointercancel",Bs,o),r.addEventListener("pointerup",Bs,o),this.#r?.()}if(Bs(e),e.touches.length!==2||this.#s?.()){this.#l=null;return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),this.#l={touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#p(e){if(!this.#l||e.touches.length!==2)return;Bs(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:i,screenY:r}=t,{screenX:o,screenY:c}=s,u=this.#l,{touch0X:h,touch0Y:f,touch1X:g,touch1Y:x}=u,y=g-h,N=x-f,j=o-i,E=c-r,A=Math.hypot(j,E)||1,R=Math.hypot(y,N)||1;if(!this.#t&&Math.abs(R-A)<=vx.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(u.touch0X=i,u.touch0Y=r,u.touch1X=o,u.touch1Y=c,!this.#t){this.#t=!0;return}const M=[(i+o)/2,(r+c)/2];this.#i?.(M,R,A)}#m(e){e.touches.length>=2||(this.#u&&(this.#u.abort(),this.#u=null,this.#a?.()),this.#l&&(Bs(e),this.#l=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#o?.abort(),this.#o=null}}class kt{#e=null;#t=null;#s=null;#n=null;#r=null;#i=!1;#a=null;#o="";#c=null;#l=null;#h=null;#u=null;#f=null;#p="";#m=!1;#d=null;#g=!1;#x=!1;#y=!1;#b=null;#C=0;#N=0;#v=null;#E=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#S=!1;#j=kt._zIndex++;static _borderLineWidth=-1;static _colorManager=new VN;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=kt.prototype._resizeWithKeyboard,t=Pd.TRANSLATE_SMALL,s=Pd.TRANSLATE_BIG;return an(this,"_resizerKeyboardManager",new yx([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],kt.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[r,o];const[c,u]=this.parentDimensions;this.x=e.x/c,this.y=e.y/u,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return an(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new x$({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(kt._l10n??=e,kt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),kt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);kt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){hs("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#S}set _isDraggable(e){this.#S=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#j}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#L(),this.#u?.remove(),this.#u=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,i){const[r,o]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(e+s)/r,this.y=(t+i)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,i]=this.parentDimensions;this.setAt(e*s,t*i,this.width*s,this.height*i),this._onTranslated()}#k([e,t],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#k(this.parentDimensions,e,t)}translateInPage(e,t){this.#d||=[this.x,this.y,this.width,this.height],this.#k(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#d||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[i,r]}=this;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y:x}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,x)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:c}=this;const[u,h]=this.getBaseTranslation();o+=u,c+=h;const{style:f}=s;f.left=`${(100*o).toFixed(2)}%`,f.top=`${(100*c).toFixed(2)}%`,this._onTranslating(o,c),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#d&&(this.#d[0]!==this.x||this.#d[1]!==this.y)}get _hasBeenResized(){return!!this.#d&&(this.#d[2]!==this.width||this.#d[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=kt,i=s/e,r=s/t;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,i]}=this;let{x:r,y:o,width:c,height:u}=this;if(c*=s,u*=i,r*=s,o*=i,this._mustFixPosition)switch(e){case 0:r=Ma(r,0,s-c),o=Ma(o,0,i-u);break;case 90:r=Ma(r,0,s-u),o=Ma(o,c,i);break;case 180:r=Ma(r,c,s),o=Ma(o,u,i);break;case 270:r=Ma(r,u,s),o=Ma(o,0,i-c);break}this.x=r/=s,this.y=o/=i;const[h,f]=this.getBaseTranslation();r+=h,o+=f,t.left=`${(100*r).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#_(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return kt.#_(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return kt.#_(e,t,360-this.parentRotation)}#T(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(){const{div:{style:e},width:t,height:s}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#F(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const i=document.createElement("div");this.#c.append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",this.#R.bind(this,s),{signal:t}),i.addEventListener("contextmenu",go,{signal:t}),i.tabIndex=-1}this.div.prepend(this.#c)}#R(e,t){t.preventDefault();const{isMac:s}=oa.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#s?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,this.#l=[t.screenX,t.screenY];const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#O.bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Bs,{passive:!1,signal:o}),window.addEventListener("contextmenu",go,{signal:o}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const c=this.parent.div.style.cursor,u=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const h=()=>{r.abort(),this.parent.togglePointerEvents(!0),this.#s?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=c,this.div.style.cursor=u,this.#z()};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})}#P(e,t,s,i){this.width=s,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#z(){if(!this.#h)return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:i}=this.#h;this.#h=null;const r=this.x,o=this.y,c=this.width,u=this.height;r===e&&o===t&&c===s&&u===i||this.addCommands({cmd:this.#P.bind(this,r,o,c,u),undo:this.#P.bind(this,e,t,s,i),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#O(e,t){const[s,i]=this.parentDimensions,r=this.x,o=this.y,c=this.width,u=this.height,h=kt.MIN_SIZE/s,f=kt.MIN_SIZE/i,g=this.#T(this.rotation),x=(G,X)=>[g[0]*G+g[2]*X,g[1]*G+g[3]*X],y=this.#T(360-this.rotation),N=(G,X)=>[y[0]*G+y[2]*X,y[1]*G+y[3]*X];let j,E,A=!1,R=!1;switch(e){case"topLeft":A=!0,j=(G,X)=>[0,0],E=(G,X)=>[G,X];break;case"topMiddle":j=(G,X)=>[G/2,0],E=(G,X)=>[G/2,X];break;case"topRight":A=!0,j=(G,X)=>[G,0],E=(G,X)=>[0,X];break;case"middleRight":R=!0,j=(G,X)=>[G,X/2],E=(G,X)=>[0,X/2];break;case"bottomRight":A=!0,j=(G,X)=>[G,X],E=(G,X)=>[0,0];break;case"bottomMiddle":j=(G,X)=>[G/2,X],E=(G,X)=>[G/2,0];break;case"bottomLeft":A=!0,j=(G,X)=>[0,X],E=(G,X)=>[G,0];break;case"middleLeft":R=!0,j=(G,X)=>[0,X/2],E=(G,X)=>[G,X/2];break}const M=j(c,u),L=E(c,u);let z=x(...L);const W=kt._round(r+z[0]),I=kt._round(o+z[1]);let Y=1,U=1,Z,$;if(t.fromKeyboard)({deltaX:Z,deltaY:$}=t);else{const{screenX:G,screenY:X}=t,[se,ee]=this.#l;[Z,$]=this.screenToPageTranslation(G-se,X-ee),this.#l[0]=G,this.#l[1]=X}if([Z,$]=N(Z/s,$/i),A){const G=Math.hypot(c,u);Y=U=Math.max(Math.min(Math.hypot(L[0]-M[0]-Z,L[1]-M[1]-$)/G,1/c,1/u),h/c,f/u)}else R?Y=Ma(Math.abs(L[0]-M[0]-Z),h,1)/c:U=Ma(Math.abs(L[1]-M[1]-$),f,1)/u;const ae=kt._round(c*Y),xe=kt._round(u*U);z=x(...E(ae,xe));const fe=W-z[0],ke=I-z[1];this.#d||=[this.x,this.y,this.width,this.height],this.width=ae,this.height=xe,this.x=fe,this.y=ke,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#s?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#x)return this._editToolbar;this._editToolbar=new m0(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,s]of e)await this._editToolbar.addButton(t,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#s?.destroy()}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#s||(_c.initialize(kt._l10n),this.#s=new _c(this),this.#e&&(this.#s.data=this.#e,this.#e=null)),this.#s}get altTextData(){return this.#s?.data}set altTextData(e){this.#s&&(this.#s.data=e)}get guessedAltText(){return this.#s?.guessedText}async setGuessedAltText(e){await this.#s?.setGuessedText(e)}serializeAltText(e){return this.#s?.serialize(e)}hasAltText(){return!!this.#s&&!this.#s.isEmpty()}hasAltTextData(){return this.#s?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new Ib(this)}addStandaloneCommentButton(){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#n.renderForStandalone(),this.div.append(this.#r))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:s,deleted:i}}=this.#n;return{text:t,richText:e,date:s,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#n||=new Ib(this),this.#n.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:s}){if(!t||(this.#n||=new Ib(this),this.#n.setInitialText(e,s),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(e){this.#n||=new Ib(this),this.#n.edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){this.#n.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[r]=this.pageDimensions,[o]=this.pageTranslation,c=o+r+1,u=i-100,h=c+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[c,u,h,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){this.#n.data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#i?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#H();const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),BP(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#E||=new vx({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#W.bind(this),onPinching:this.#A.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#W(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#s?.toggle(!1),this.parent.togglePointerEvents(!1)}#A(e,t,s){let r=.7*(s/t)+1-.7;if(r===1)return;const o=this.#T(this.rotation),c=(W,I)=>[o[0]*W+o[2]*I,o[1]*W+o[3]*I],[u,h]=this.parentDimensions,f=this.x,g=this.y,x=this.width,y=this.height,N=kt.MIN_SIZE/u,j=kt.MIN_SIZE/h;r=Math.max(Math.min(r,1/x,1/y),N/x,j/y);const E=kt._round(x*r),A=kt._round(y*r);if(E===x&&A===y)return;this.#d||=[f,g,x,y];const R=c(x/2,y/2),M=kt._round(f+R[0]),L=kt._round(g+R[1]),z=c(E/2,A/2);this.x=M-z[0],this.y=L-z[1],this.width=E,this.height=A,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#s?.toggle(!0),this.parent.togglePointerEvents(!0),this.#z()}pointerdown(e){const{isMac:t}=oa.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#I(e);return}this.#M(e)}#M(e){const{isMac:t}=oa.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#I(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:r},c=h=>{i.abort(),this.#a=null,this.#m=!1,this._uiManager.endDragSession()||this.#M(h),s&&this._onStopDragging()};t&&(this.#C=e.clientX,this.#N=e.clientY,this.#a=e.pointerId,this.#o=e.pointerType,window.addEventListener("pointermove",h=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:f,clientY:g,pointerId:x}=h;if(x!==this.#a){Bs(h);return}const[y,N]=this.screenToPageTranslation(f-this.#C,g-this.#N);this.#C=f,this.#N=g,this._uiManager.dragSelectedEditors(y,N)},o),window.addEventListener("touchmove",Bs,o),window.addEventListener("pointerdown",h=>{h.pointerType===this.#o&&(this.#E||h.isPrimary)&&c(h),Bs(h)},o));const u=h=>{if(!this.#a||this.#a===h.pointerId){c(h);return}Bs(h)};window.addEventListener("pointerup",u,{signal:r}),window.addEventListener("blur",u,{signal:r})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const i=this.parentScale,[r,o]=this.pageDimensions,[c,u]=this.pageTranslation,h=e/i,f=t/i,g=this.x*r,x=this.y*o,y=this.width*r,N=this.height*o;switch(s){case 0:return[g+h+c,o-x-f-N+u,g+h+y+c,o-x-f+u];case 90:return[g+f+c,o-x+h+u,g+f+N+c,o-x+h+y+u];case 180:return[g-h-y+c,o-x+f+u,g-h+c,o-x+f+N+u];case 270:return[g-f-N+c,o-x-h-y+u,g-f+c,o-x-h+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,i,r,o]=e,c=r-s,u=o-i;switch(this.rotation){case 0:return[s,t-o,c,u];case 90:return[s,t-i,u,c];case 180:return[r,t-i,c,u];case 270:return[r,t-o,u,c];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&kt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:s,opacity:i,deleted:r,richText:o},uid:c,pageIndex:u,creationDate:h,modificationDate:f}=this;return{id:c,pageIndex:u,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:h,modificationDate:s||f,popupRef:!r,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#x=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#x=!1,!0):!1}isInEditMode(){return this.#x}shouldGetKeyboardEvents(){return this.#y}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return t<o&&i>0&&e<r&&s>0}#H(){if(this.#f||!this.div)return;this.#f=new AbortController;const e=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#H()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,t,s){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,i.#e=e.accessibilityData,i._isCopy=e.isCopy||!1;const[r,o]=i.pageDimensions,[c,u,h,f]=i.getRectInCurrentCoords(e.rect,o);return i.x=c/r,i.y=u/o,i.width=h/r,i.height=f/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#L(),this.removeEditToolbar(),this.#v){for(const e of this.#v.values())clearTimeout(e);this.#v=null}this.parent=null,this.#E?.destroy(),this.#E=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#F(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[s,i,r,o]=this.getPDFRect();return[kt._round(s+(r-s)*e),kt._round(i+(o-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(e){this.#n.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#n.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#c.children;if(!this.#t){this.#t=Array.from(t);const o=this.#X.bind(this),c=this.#Y.bind(this),u=this._uiManager._signal;for(const h of this.#t){const f=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",o,{signal:u}),h.addEventListener("blur",c,{signal:u}),h.addEventListener("focus",this.#K.bind(this,f),{signal:u}),h.setAttribute("data-l10n-id",kt._l10nResizer[f])}}const s=this.#t[0];let i=0;for(const o of t){if(o===s)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(r!==i){if(r<i)for(let c=0;c<i-r;c++)this.#c.append(this.#c.firstChild);else if(r>i)for(let c=0;c<r-i;c++)this.#c.firstChild.before(this.#c.lastChild);let o=0;for(const c of t){const h=this.#t[o++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",kt._l10nResizer[h])}}this.#U(0),this.#y=!0,this.#c.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#X(e){kt._resizerKeyboardManager.exec(this,e)}#Y(e){this.#y&&e.relatedTarget?.parentNode!==this.#c&&this.#L()}#K(e){this.#p=this.#y?e:""}#U(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#y&&this.#O(this.#p,{deltaX:e,deltaY:t,fromKeyboard:!0})}#L(){this.#y=!1,this.#U(-1),this.#z()}_stopResizingWithKeyboard(){this.#L(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#s?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#s?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#g}set isEditing(e){this.#g=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#v||=new Map;const{action:s}=e;let i=this.#v.get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),this.#v.delete(s),this.#v.size===0&&(this.#v=null)},kt._telemetryTimeout),this.#v.set(s,i);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}updateFakeAnnotationElement(e){if(!this.#u&&!this.deleted){this.#u=e.addFakeAnnotation(this);return}if(this.deleted){this.#u.remove(),this.#u=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#u.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class x$ extends kt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const tk=3285377520,Mo=4294901760,jc=65535;class HP{constructor(e){this.h1=e?e&4294967295:tk,this.h2=e?e&4294967295:tk}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let j=0,E=e.length;j<E;j++){const A=e.charCodeAt(j);A<=255?t[s++]=A:(t[s++]=A>>>8,t[s++]=A&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,r=s-i*4,o=new Uint32Array(t.buffer,0,i);let c=0,u=0,h=this.h1,f=this.h2;const g=3432918353,x=461845907,y=g&jc,N=x&jc;for(let j=0;j<i;j++)j&1?(c=o[j],c=c*g&Mo|c*y&jc,c=c<<15|c>>>17,c=c*x&Mo|c*N&jc,h^=c,h=h<<13|h>>>19,h=h*5+3864292196):(u=o[j],u=u*g&Mo|u*y&jc,u=u<<15|u>>>17,u=u*x&Mo|u*N&jc,f^=u,f=f<<13|f>>>19,f=f*5+3864292196);switch(c=0,r){case 3:c^=t[i*4+2]<<16;case 2:c^=t[i*4+1]<<8;case 1:c^=t[i*4],c=c*g&Mo|c*y&jc,c=c<<15|c>>>17,c=c*x&Mo|c*N&jc,i&1?h^=c:f^=c}this.h1=h,this.h2=f}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Mo|e*36045&jc,t=t*4283543511&Mo|((t<<16|e>>>16)*2950163797&Mo)>>>16,e^=t>>>1,e=e*444984403&Mo|e*60499&jc,t=t*3301882366&Mo|((t<<16|e>>>16)*3120437893&Mo)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const q2=Object.freeze({map:null,hash:"",transfer:void 0});class WN{#e=!1;#t=null;#s=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=this.#n.get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return this.#n.get(e)}remove(e){const t=this.#n.get(e);if(t!==void 0&&(t instanceof kt&&this.#s.delete(t.annotationElementId),this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#n.values())if(s instanceof kt)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=this.#n.get(e);let i=!1;if(s!==void 0)for(const[r,o]of Object.entries(t))s[r]!==o&&(i=!0,s[r]=o);else i=!0,this.#n.set(e,t);i&&this.#r(),t instanceof kt&&((this.#s||=new Map).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return this.#n.has(e)}get size(){return this.#n.size}#r(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new UP(this)}get serializable(){if(this.#n.size===0)return q2;const e=new Map,t=new HP,s=[],i=Object.create(null);let r=!1;for(const[o,c]of this.#n){const u=c instanceof kt?c.serialize(!1,i):c;u&&(e.set(o,u),t.update(`${o}:${JSON.stringify(u)}`),r||=!!u.bitmap)}if(r)for(const o of e.values())o.bitmap&&s.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:q2}get editorStats(){let e=null;const t=new Map;let s=0,i=0;for(const r of this.#n.values()){if(!(r instanceof kt)){r.popup&&(r.popup.deleted?i+=1:s+=1);continue}r.isCommentDeleted?i+=1:r.hasEditedComment&&(s+=1);const o=r.telemetryFinalData;if(!o)continue;const{type:c}=o;t.has(c)||t.set(c,Object.getPrototypeOf(r).constructor),e||=Object.create(null);const u=e[c]||=new Map;for(const[h,f]of Object.entries(o)){if(h==="type")continue;let g=u.get(h);g||(g=new Map,u.set(h,g));const x=g.get(f)??0;g.set(f,x+1)}}if((i>0||s>0)&&(e||=Object.create(null),e.comments={deleted:i,edited:s}),!e)return null;for(const[r,o]of t)e[r]=o.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,t){const s=this.#s?.get(e);return s?(s.updateFromAnnotationLayer(t),!0):!1}getEditor(e){return this.#s?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;const e=[];if(this.#s)for(const t of this.#s.values())t.serialize()&&e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class UP extends WN{#e;constructor(e){super();const{map:t,hash:s,transfer:i}=e.serializable,r=structuredClone(t,i?{transfer:i}:null);this.#e={map:r,hash:s,transfer:i}}get print(){hs("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return an(this,"modifiedIds",{ids:new Set,hash:""})}}class b${#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||this.#e.has(e.loadedName))){if(Cn(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:o}=e,c=new FontFace(i,r,o);this.addNativeFontFace(c);try{await c.load(),this.#e.add(i),s?.(e)}catch{$t(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}hs("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw $t(`Failed to load font '${s.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return an(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return an(this,"isSyncFontLoadingSupported",er||oa.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Cn(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:t,callback:e};return s.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return an(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(L,z){return L.charCodeAt(z)<<24|L.charCodeAt(z+1)<<16|L.charCodeAt(z+2)<<8|L.charCodeAt(z+3)&255}function i(L,z,W,I){const Y=L.substring(0,z),U=L.substring(z+W);return Y+I+U}let r,o;const c=this._document.createElement("canvas");c.width=1,c.height=1;const u=c.getContext("2d");let h=0;function f(L,z){if(++h>30){$t("Load test font never loaded."),z();return}if(u.font="30px "+L,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){z();return}setTimeout(f.bind(null,L,z))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let x=this._loadTestFont;x=i(x,976,g.length,g);const N=16,j=1482184792;let E=s(x,N);for(r=0,o=g.length-3;r<o;r+=4)E=E-j+s(g,r)|0;r<g.length&&(E=E-j+s(g+"XXX",r)|0),x=i(x,N,4,a$(E));const A=`url(data:font/opentype;base64,${btoa(x)});`,R=`@font-face {font-family:"${g}";src:${A}}`;this.insertRule(R);const M=this._document.createElement("div");M.style.visibility="hidden",M.style.width=M.style.height="10px",M.style.position="absolute",M.style.top=M.style.left="0px";for(const L of[e.loadedName,g]){const z=this._document.createElement("span");z.textContent="Hi",z.style.fontFamily=L,M.append(z)}this._document.body.append(M),f(g,()=>{M.remove(),t.complete()})}}class y${#e;constructor(e,t=null,s,i){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=t,s&&Object.assign(this,s),i&&(this.charProcOperatorList=i)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${MP(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let i;try{i=e.get(s)}catch(o){$t(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(i||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=r}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}}function v$(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(er)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function w$(n){if(er&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return px(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Bb(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const $2=n=>typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0,S$=n=>typeof n=="object"&&typeof n?.name=="string",VP=c$.bind(null,$2,S$);class N${#e=new Map;#t=Promise.resolve();postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[i]of this.#e)i.call(this,s)})}addEventListener(e,t,s=null){let i=null;if(s?.signal instanceof AbortSignal){const{signal:r}=s;if(r.aborted){$t("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);i=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}this.#e.set(t,i)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const Hb={DATA:1,ERROR:2},ji={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function nk(){}function Sr(n){if(n instanceof Md||n instanceof Wy||n instanceof KT||n instanceof O0||n instanceof Vw)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||hs('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Md(n.message);case"InvalidPDFException":return new Wy(n.message);case"PasswordException":return new KT(n.message,n.code);case"ResponseException":return new O0(n.message,n.status,n.missing);case"UnknownErrorException":return new Vw(n.message,n.details)}return new Vw(n.message,n.toString())}class Jp{#e=new AbortController;constructor(e,t,s){this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const s=e.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===Hb.DATA)i.resolve(e.data);else if(e.callback===Hb.ERROR)i.reject(Sr(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,i=e.sourceName,r=this.comObj;Promise.try(t,e.data).then(function(o){r.postMessage({sourceName:s,targetName:i,callback:Hb.DATA,callbackId:e.callbackId,data:o})},function(o){r.postMessage({sourceName:s,targetName:i,callback:Hb.ERROR,callbackId:e.callbackId,reason:Sr(o)})});return}if(e.streamId){this.#s(e);return}t(e.data)}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},s)}catch(o){r.reject(o)}return r.promise}sendWithStream(e,t,s,i){const r=this.streamId++,o=this.sourceName,c=this.targetName,u=this.comObj;return new ReadableStream({start:h=>{const f=Promise.withResolvers();return this.streamControllers[r]={controller:h,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:o,targetName:c,action:e,streamId:r,data:t,desiredSize:h.desiredSize},i),f.promise},pull:h=>{const f=Promise.withResolvers();return this.streamControllers[r].pullCall=f,u.postMessage({sourceName:o,targetName:c,stream:ji.PULL,streamId:r,desiredSize:h.desiredSize}),f.promise},cancel:h=>{Cn(h instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[r].cancelCall=f,this.streamControllers[r].isClosed=!0,u.postMessage({sourceName:o,targetName:c,stream:ji.CANCEL,streamId:r,reason:Sr(h)}),f.promise}},s)}#s(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,o=this,c=this.actionHandler[e.action],u={enqueue(h,f=1,g){if(this.isCancelled)return;const x=this.desiredSize;this.desiredSize-=f,x>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:i,stream:ji.ENQUEUE,streamId:t,chunk:h},g)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:ji.CLOSE,streamId:t}),delete o.streamSinks[t])},error(h){Cn(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:ji.ERROR,streamId:t,reason:Sr(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[t]=u,Promise.try(c,e.data,u).then(function(){r.postMessage({sourceName:s,targetName:i,stream:ji.START_COMPLETE,streamId:t,success:!0})},function(h){r.postMessage({sourceName:s,targetName:i,stream:ji.START_COMPLETE,streamId:t,reason:Sr(h)})})}#n(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,o=this.streamControllers[t],c=this.streamSinks[t];switch(e.stream){case ji.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Sr(e.reason));break;case ji.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Sr(e.reason));break;case ji.PULL:if(!c){r.postMessage({sourceName:s,targetName:i,stream:ji.PULL_COMPLETE,streamId:t,success:!0});break}c.desiredSize<=0&&e.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=e.desiredSize,Promise.try(c.onPull||nk).then(function(){r.postMessage({sourceName:s,targetName:i,stream:ji.PULL_COMPLETE,streamId:t,success:!0})},function(h){r.postMessage({sourceName:s,targetName:i,stream:ji.PULL_COMPLETE,streamId:t,reason:Sr(h)})});break;case ji.ENQUEUE:if(Cn(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case ji.CLOSE:if(Cn(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#r(o,t);break;case ji.ERROR:Cn(o,"error should have stream controller"),o.controller.error(Sr(e.reason)),this.#r(o,t);break;case ji.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Sr(e.reason)),this.#r(o,t);break;case ji.CANCEL:if(!c)break;const u=Sr(e.reason);Promise.try(c.onCancel||nk,u).then(function(){r.postMessage({sourceName:s,targetName:i,stream:ji.CANCEL_COMPLETE,streamId:t,success:!0})},function(h){r.postMessage({sourceName:s,targetName:i,stream:ji.CANCEL_COMPLETE,streamId:t,reason:Sr(h)})}),c.sinkCapability.reject(u),c.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#r(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class WP{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){hs("Abstract method `_createCanvas` called.")}}class j$ extends WP{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class GP{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){hs("Abstract method `_fetch` called.")}}class sk extends GP{async _fetch(e){const t=await Ag(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):px(t)}}class YP{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,i,r){return"none"}destroy(e=!1){}}class C$ extends YP{#e;#t;#s;#n;#r;#i;#a=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#n=e,this.#r=t}get#o(){return this.#t||=new Map}get#c(){return this.#i||=new Map}get#l(){if(!this.#s){const e=this.#r.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const s=this.#r.createElementNS(wd,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#s=this.#r.createElementNS(wd,"defs"),e.append(s),s.append(this.#s),this.#r.body.append(e)}return this.#s}#h(e){if(e.length===1){const u=e[0],h=new Array(256);for(let g=0;g<256;g++)h[g]=u[g]/255;const f=h.join(",");return[f,f,f]}const[t,s,i]=e,r=new Array(256),o=new Array(256),c=new Array(256);for(let u=0;u<256;u++)r[u]=t[u]/255,o[u]=s[u]/255,c[u]=i[u]/255;return[r.join(","),o.join(","),c.join(",")]}#u(e){if(this.#e===void 0){this.#e="";const t=this.#r.URL;t!==this.#r.baseURI&&(bx(t)?$t('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=FN(t,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#o.get(e);if(t)return t;const[s,i,r]=this.#h(e),o=e.length===1?s:`${s}${i}${r}`;if(t=this.#o.get(o),t)return this.#o.set(e,t),t;const c=`g_${this.#n}_transfer_map_${this.#a++}`,u=this.#u(c);this.#o.set(e,u),this.#o.set(o,u);const h=this.#m(c);return this.#g(s,i,r,h),u}addHCMFilter(e,t){const s=`${e}-${t}`,i="base";let r=this.#c.get(i);if(r?.key===s||(r?(r.filter?.remove(),r.key=s,r.url="none",r.filter=null):(r={key:s,url:"none",filter:null},this.#c.set(i,r)),!e||!t))return r.url;const o=this.#y(e);e=bt.makeHexColor(...o);const c=this.#y(t);if(t=bt.makeHexColor(...c),this.#l.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return r.url;const u=new Array(256);for(let y=0;y<=255;y++){const N=y/255;u[y]=N<=.03928?N/12.92:((N+.055)/1.055)**2.4}const h=u.join(","),f=`g_${this.#n}_hcm_filter`,g=r.filter=this.#m(f);this.#g(h,h,h,g),this.#p(g);const x=(y,N)=>{const j=o[y]/255,E=c[y]/255,A=new Array(N+1);for(let R=0;R<=N;R++)A[R]=j+R/N*(E-j);return A.join(",")};return this.#g(x(0,5),x(1,5),x(2,5),g),r.url=this.#u(f),r.url}addAlphaFilter(e){let t=this.#o.get(e);if(t)return t;const[s]=this.#h([e]),i=`alpha_${s}`;if(t=this.#o.get(i),t)return this.#o.set(e,t),t;const r=`g_${this.#n}_alpha_map_${this.#a++}`,o=this.#u(r);this.#o.set(e,o),this.#o.set(i,o);const c=this.#m(r);return this.#x(s,c),o}addLuminosityFilter(e){let t=this.#o.get(e||"luminosity");if(t)return t;let s,i;if(e?([s]=this.#h([e]),i=`luminosity_${s}`):i="luminosity",t=this.#o.get(i),t)return this.#o.set(e,t),t;const r=`g_${this.#n}_luminosity_map_${this.#a++}`,o=this.#u(r);this.#o.set(e,o),this.#o.set(i,o);const c=this.#m(r);return this.#f(c),e&&this.#x(s,c),o}addHighlightHCMFilter(e,t,s,i,r){const o=`${t}-${s}-${i}-${r}`;let c=this.#c.get(e);if(c?.key===o||(c?(c.filter?.remove(),c.key=o,c.url="none",c.filter=null):(c={key:o,url:"none",filter:null},this.#c.set(e,c)),!t||!s))return c.url;const[u,h]=[t,s].map(this.#y.bind(this));let f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),g=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[x,y]=[i,r].map(this.#y.bind(this));g<f&&([f,g,x,y]=[g,f,y,x]),this.#l.style.color="";const N=(A,R,M)=>{const L=new Array(256),z=(g-f)/M,W=A/255,I=(R-A)/(255*M);let Y=0;for(let U=0;U<=M;U++){const Z=Math.round(f+U*z),$=W+U*I;for(let ae=Y;ae<=Z;ae++)L[ae]=$;Y=Z+1}for(let U=Y;U<256;U++)L[U]=L[Y-1];return L.join(",")},j=`g_${this.#n}_hcm_${e}_filter`,E=c.filter=this.#m(j);return this.#p(E),this.#g(N(x[0],y[0],5),N(x[1],y[1],5),N(x[2],y[2],5),E),c.url=this.#u(j),c.url}destroy(e=!1){e&&this.#i?.size||(this.#s?.parentNode.parentNode.remove(),this.#s=null,this.#t?.clear(),this.#t=null,this.#i?.clear(),this.#i=null,this.#a=0)}#f(e){const t=this.#r.createElementNS(wd,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#p(e){const t=this.#r.createElementNS(wd,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#m(e){const t=this.#r.createElementNS(wd,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#l.append(t),t}#d(e,t,s){const i=this.#r.createElementNS(wd,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),e.append(i)}#g(e,t,s,i){const r=this.#r.createElementNS(wd,"feComponentTransfer");i.append(r),this.#d(r,"feFuncR",e),this.#d(r,"feFuncG",t),this.#d(r,"feFuncB",s)}#x(e,t){const s=this.#r.createElementNS(wd,"feComponentTransfer");t.append(s),this.#d(s,"feFuncA",e)}#y(e){return this.#l.style.color=e,Eg(getComputedStyle(this.#l).getPropertyValue("color"))}}class XP{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){hs("Abstract method `_fetch` called.")}}class ik extends XP{async _fetch(e){const t=await Ag(e,"arraybuffer");return new Uint8Array(t)}}class KP{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){hs("Abstract method `_fetch` called.")}}class ak extends KP{async _fetch(e){const t=await Ag(e,"arraybuffer");return new Uint8Array(t)}}er&&$t("Please use the `legacy` build in Node.js environments.");async function GN(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class A$ extends YP{}class E$ extends WP{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class _$ extends GP{async _fetch(e){return GN(e)}}class T$ extends XP{async _fetch(e){return GN(e)}}class k$ extends KP{async _fetch(e){return GN(e)}}const vm="__forcedDependency",{floor:rk,ceil:ok}=Math;function Ub(n,e,t,s,i,r){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],s),n[e*4+2]=Math.max(n[e*4+2],i),n[e*4+3]=Math.max(n[e*4+3],r)}const eS=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class D${#e;#t;constructor(e,t){this.#e=e,this.#t=t}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===eS}minX(e){return this.#t[e*4+0]/256}minY(e){return this.#t[e*4+1]/256}maxX(e){return(this.#t[e*4+2]+1)/256}maxY(e){return(this.#t[e*4+3]+1)/256}}const Vb=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};class R${#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[vm]:[]};#s=new Map;#n=[];#r=[];#i=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#h=new Map;#u=new Map;#f;#p;#m;#d;#g;constructor(e,t,s=!1){this.#f=e.width,this.#p=e.height,this.#x(t),s&&(this.#g=new Map)}growOperationsCount(e){e>=this.#d.length&&this.#x(e,this.#d)}#x(e,t){const s=new ArrayBuffer(e*4);this.#m=new Uint8ClampedArray(s),this.#d=new Uint32Array(s),t&&t.length>0?(this.#d.set(t),this.#d.fill(eS,t.length)):this.#d.fill(eS)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[vm]:{__proto__:this.#t[vm]}},this.#a={__proto__:this.#a},this.#n.push(e),this}restore(e){const t=Object.getPrototypeOf(this.#e);if(t===null)return this;this.#e=t,this.#t=Object.getPrototypeOf(this.#t),this.#a=Object.getPrototypeOf(this.#a);const s=this.#n.pop();return s!==void 0&&(Vb(this.#g,e)?.dependencies.add(s),this.#d[e]=this.#d[s]),this}recordOpenMarker(e){return this.#n.push(e),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(e){const t=this.#n.pop();return t!==void 0&&(Vb(this.#g,e)?.dependencies.add(t),this.#d[e]=this.#d[t]),this}beginMarkedContent(e){return this.#r.push(e),this}endMarkedContent(e){const t=this.#r.pop();return t!==void 0&&(Vb(this.#g,e)?.dependencies.add(t),this.#d[e]=this.#d[t]),this}pushBaseTransform(e){return this.#i.push(bt.multiplyByDOMMatrix(this.#i.at(-1),e.getTransform())),this}popBaseTransform(){return this.#i.length>1&&this.#i.pop(),this}recordSimpleData(e,t){return this.#e[e]=t,this}recordIncrementalData(e,t){return this.#t[e].push(t),this}resetIncrementalData(e,t){return this.#t[e].length=0,this}recordNamedData(e,t){return this.#s.set(e,t),this}recordSimpleDataFromNamed(e,t,s){this.#e[e]=this.#s.get(t)??s}recordFutureForcedDependency(e,t){return this.recordIncrementalData(vm,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in this.#e&&this.recordFutureForcedDependency(t,this.#e[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(vm,e);return this}resetBBox(e){return this.#c!==e&&(this.#c=e,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(e,t,s,i,r,o){const c=bt.multiplyByDOMMatrix(this.#i.at(-1),t.getTransform()),u=[1/0,1/0,-1/0,-1/0];bt.axialAlignedBoundingBox([s,r,i,o],c,u);const h=bt.intersect(this.#a,u);return h?(this.#a[0]=h[0],this.#a[1]=h[1],this.#a[2]=h[2],this.#a[3]=h[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(e,t,s,i,r,o){const c=this.#a;if(c[0]===1/0)return this;const u=bt.multiplyByDOMMatrix(this.#i.at(-1),t.getTransform());if(c[0]===-1/0)return bt.axialAlignedBoundingBox([s,r,i,o],u,this.#o),this;const h=[1/0,1/0,-1/0,-1/0];return bt.axialAlignedBoundingBox([s,r,i,o],u,h),this.#o[0]=Math.min(this.#o[0],Math.max(h[0],c[0])),this.#o[1]=Math.min(this.#o[1],Math.max(h[1],c[1])),this.#o[2]=Math.max(this.#o[2],Math.min(h[2],c[2])),this.#o[3]=Math.max(this.#o[3],Math.min(h[3],c[3])),this}recordCharacterBBox(e,t,s,i=1,r=0,o=0,c){const u=s.bbox;let h,f;if(u&&(h=u[2]!==u[0]&&u[3]!==u[1]&&this.#u.get(s),h!==!1&&(f=[0,0,0,0],bt.axialAlignedBoundingBox(u,s.fontMatrix,f),(i!==1||r!==0||o!==0)&&bt.scaleMinMax([i,0,0,-i,r,o],f),h)))return this.recordBBox(e,t,f[0],f[2],f[1],f[3]);if(!c)return this.recordFullPageBBox(e);const g=c();return u&&f&&h===void 0&&(h=f[0]<=r-g.actualBoundingBoxLeft&&f[2]>=r+g.actualBoundingBoxRight&&f[1]<=o-g.actualBoundingBoxAscent&&f[3]>=o+g.actualBoundingBoxDescent,this.#u.set(s,h),h)?this.recordBBox(e,t,f[0],f[2],f[1],f[3]):this.recordBBox(e,t,r-g.actualBoundingBoxLeft,r+g.actualBoundingBoxRight,o-g.actualBoundingBoxAscent,o+g.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#p,this.#a[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,t){const s=this.#l,i=this.#e,r=this.#t;for(const o of t)o in this.#e?s.add(i[o]):o in r&&r[o].forEach(s.add,s);return this}recordNamedDependency(e,t){return this.#s.has(t)&&this.#l.add(this.#s.get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[vm]),this.#g){const s=Vb(this.#g,e),{dependencies:i}=s;this.#l.forEach(i.add,i),this.#n.forEach(i.add,i),this.#r.forEach(i.add,i),i.delete(e),s.isRenderingOperation=!0}if(this.#c===e){const s=rk(this.#o[0]*256/this.#f),i=rk(this.#o[1]*256/this.#p),r=ok(this.#o[2]*256/this.#f),o=ok(this.#o[3]*256/this.#p);Ub(this.#m,e,s,i,r,o);for(const c of this.#l)c!==e&&Ub(this.#m,c,s,i,r,o);for(const c of this.#n)c!==e&&Ub(this.#m,c,s,i,r,o);for(const c of this.#r)c!==e&&Ub(this.#m,c,s,i,r,o);t||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(e,t=!1){const s=Array.from(this.#l);this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const i of s)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,t=!1){return this.#c===e&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),t||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const t=this.#h.get(e);return this.#h.delete(e),t}_pushPendingDependencies(e){for(const t of e)this.#l.add(t)}take(){return this.#u.clear(),new D$(this.#d,this.#m)}takeDebugMetadata(){return this.#g}}class Xy{#e;#t;#s;#n=0;#r=0;constructor(e,t,s){if(e instanceof Xy&&e.#s===!!s)return e;this.#e=e,this.#t=t,this.#s=!!s}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#r++,this.#e.save(this.#t),this}restore(e){return this.#r>0&&(this.#e.restore(this.#t),this.#r--),this}recordOpenMarker(e){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#n--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,t){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,t){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,t){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,s){return this.#e.recordSimpleDataFromNamed(e,t,this.#t),this}recordFutureForcedDependency(e,t){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#s||this.#e.resetBBox(this.#t),this}recordClipBox(e,t,s,i,r,o){return this.#s||this.#e.recordClipBox(this.#t,t,s,i,r,o),this}recordBBox(e,t,s,i,r,o){return this.#s||this.#e.recordBBox(this.#t,t,s,i,r,o),this}recordCharacterBBox(e,t,s,i,r,o,c){return this.#s||this.#e.recordCharacterBBox(this.#t,t,s,i,r,o,c),this}recordFullPageBBox(e){return this.#s||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,t){return this.#e.recordDependencies(this.#t,t),this}recordNamedDependency(e,t){return this.#e.recordNamedDependency(this.#t,t),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#s||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const Po={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},va={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function tS(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,s),n.clip(i)}class YN{isModifyingCurrentTransform(){return!1}getPattern(){hs("Abstract method `getPattern` called.")}}class M$ extends YN{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,i){let r;if(i===va.STROKE||i===va.FILL){const o=t.current.getClippedPathBoundingBox(i,Is(e))||[0,0,0,0],c=Math.ceil(o[2]-o[0])||1,u=Math.ceil(o[3]-o[1])||1,h=t.cachedCanvases.getCanvas("pattern",c,u),f=h.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-o[0],-o[1]),s=bt.transform(s,[1,0,0,1,o[0],o[1]]),f.transform(...t.baseTransform),this.matrix&&f.transform(...this.matrix),tS(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),r=e.createPattern(h.canvas,"no-repeat");const g=new DOMMatrix(s);r.setTransform(g)}else tS(e,this._bbox),r=this._createGradient(e);return r}}function Yw(n,e,t,s,i,r,o,c){const u=e.coords,h=e.colors,f=n.data,g=n.width*4;let x;u[t+1]>u[s+1]&&(x=t,t=s,s=x,x=r,r=o,o=x),u[s+1]>u[i+1]&&(x=s,s=i,i=x,x=o,o=c,c=x),u[t+1]>u[s+1]&&(x=t,t=s,s=x,x=r,r=o,o=x);const y=(u[t]+e.offsetX)*e.scaleX,N=(u[t+1]+e.offsetY)*e.scaleY,j=(u[s]+e.offsetX)*e.scaleX,E=(u[s+1]+e.offsetY)*e.scaleY,A=(u[i]+e.offsetX)*e.scaleX,R=(u[i+1]+e.offsetY)*e.scaleY;if(N>=R)return;const M=h[r],L=h[r+1],z=h[r+2],W=h[o],I=h[o+1],Y=h[o+2],U=h[c],Z=h[c+1],$=h[c+2],ae=Math.round(N),xe=Math.round(R);let fe,ke,G,X,se,ee,ne,V;for(let re=ae;re<=xe;re++){if(re<E){const Ge=re<N?0:(N-re)/(N-E);fe=y-(y-j)*Ge,ke=M-(M-W)*Ge,G=L-(L-I)*Ge,X=z-(z-Y)*Ge}else{let Ge;re>R?Ge=1:E===R?Ge=0:Ge=(E-re)/(E-R),fe=j-(j-A)*Ge,ke=W-(W-U)*Ge,G=I-(I-Z)*Ge,X=Y-(Y-$)*Ge}let ge;re<N?ge=0:re>R?ge=1:ge=(N-re)/(N-R),se=y-(y-A)*ge,ee=M-(M-U)*ge,ne=L-(L-Z)*ge,V=z-(z-$)*ge;const Ne=Math.round(Math.min(fe,se)),Ce=Math.round(Math.max(fe,se));let We=g*re+Ne*4;for(let Ge=Ne;Ge<=Ce;Ge++)ge=(fe-Ge)/(fe-se),ge<0?ge=0:ge>1&&(ge=1),f[We++]=ke-(ke-ee)*ge|0,f[We++]=G-(G-ne)*ge|0,f[We++]=X-(X-V)*ge|0,f[We++]=255}}function P$(n,e,t){const s=e.coords,i=e.colors;let r,o;switch(e.type){case"lattice":const c=e.verticesPerRow,u=Math.floor(s.length/c)-1,h=c-1;for(r=0;r<u;r++){let f=r*c;for(let g=0;g<h;g++,f++)Yw(n,t,s[f],s[f+1],s[f+c],i[f],i[f+1],i[f+c]),Yw(n,t,s[f+c+1],s[f+1],s[f+c],i[f+c+1],i[f+1],i[f+c])}break;case"triangles":for(r=0,o=s.length;r<o;r+=3)Yw(n,t,s[r],s[r+1],s[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class O$ extends YN{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const c=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-c,f=Math.ceil(this._bounds[3])-u,g=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),x=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),y=h/g,N=f/x,j={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-u,scaleX:1/y,scaleY:1/N},E=g+4,A=x+4,R=s.getCanvas("mesh",E,A),M=R.context,L=M.createImageData(g,x);if(t){const W=L.data;for(let I=0,Y=W.length;I<Y;I+=4)W[I]=t[0],W[I+1]=t[1],W[I+2]=t[2],W[I+3]=255}for(const W of this._figures)P$(L,W,j);return M.putImageData(L,2,2),{canvas:R.canvas,offsetX:c-2*y,offsetY:u-2*N,scaleX:y,scaleY:N}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,i){tS(e,this._bbox);const r=new Float32Array(2);if(i===va.SHADING)bt.singularValueDecompose2dScale(Is(e),r);else if(this.matrix){bt.singularValueDecompose2dScale(this.matrix,r);const[c,u]=r;bt.singularValueDecompose2dScale(t.baseTransform,r),r[0]*=c,r[1]*=u}else bt.singularValueDecompose2dScale(t.baseTransform,r);const o=this._createMeshCanvas(r,i===va.SHADING?null:this._background,t.cachedCanvases);return i!==va.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class L$ extends YN{getPattern(){return"hotpink"}}function F$(n){switch(n[0]){case"RadialAxial":return new M$(n);case"Mesh":return new O$(n);case"Dummy":return new L$}throw new Error(`Unknown IR type: ${n[0]}`)}const lk={COLORED:1,UNCOLORED:2};class XN{static MAX_PATTERN_SIZE=3e3;constructor(e,t,s,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(e,t){const{bbox:s,operatorList:i,paintType:r,tilingType:o,color:c,canvasGraphicsFactory:u}=this;let{xstep:h,ystep:f}=this;h=Math.abs(h),f=Math.abs(f),Fv("TilingType: "+o);const g=s[0],x=s[1],y=s[2],N=s[3],j=y-g,E=N-x,A=new Float32Array(2);bt.singularValueDecompose2dScale(this.matrix,A);const[R,M]=A;bt.singularValueDecompose2dScale(this.baseTransform,A);const L=R*A[0],z=M*A[1];let W=j,I=E,Y=!1,U=!1;const Z=Math.ceil(h*L),$=Math.ceil(f*z),ae=Math.ceil(j*L),xe=Math.ceil(E*z);Z>=ae?W=h:Y=!0,$>=xe?I=f:U=!0;const fe=this.getSizeAndScale(W,this.ctx.canvas.width,L),ke=this.getSizeAndScale(I,this.ctx.canvas.height,z),G=e.cachedCanvases.getCanvas("pattern",fe.size,ke.size),X=G.context,se=u.createCanvasGraphics(X,t);if(se.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(se,r,c),X.translate(-fe.scale*g,-ke.scale*x),se.transform(0,fe.scale,0,0,ke.scale,0,0),X.save(),se.dependencyTracker?.save(),this.clipBbox(se,g,x,y,N),se.baseTransform=Is(se.ctx),se.executeOperatorList(i),se.endDrawing(),se.dependencyTracker?.restore(),X.restore(),Y||U){const ee=G.canvas;Y&&(W=h),U&&(I=f);const ne=this.getSizeAndScale(W,this.ctx.canvas.width,L),V=this.getSizeAndScale(I,this.ctx.canvas.height,z),re=ne.size,ge=V.size,Ne=e.cachedCanvases.getCanvas("pattern-workaround",re,ge),Ce=Ne.context,We=Y?Math.floor(j/h):0,Ge=U?Math.floor(E/f):0;for(let Oe=0;Oe<=We;Oe++)for(let $e=0;$e<=Ge;$e++)Ce.drawImage(ee,re*Oe,ge*$e,re,ge,0,0,re,ge);return{canvas:Ne.canvas,scaleX:ne.scale,scaleY:V.scale,offsetX:g,offsetY:x}}return{canvas:G.canvas,scaleX:fe.scale,scaleY:ke.scale,offsetX:g,offsetY:x}}getSizeAndScale(e,t,s){const i=Math.max(XN.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*s);return r>=i?r=i:s=r/e,{scale:s,size:r}}clipBbox(e,t,s,i,r){const o=i-t,c=r-s;e.ctx.rect(t,s,o,c),bt.axialAlignedBoundingBox([t,s,i,r],Is(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const i=e.ctx,r=e.current;switch(t){case lk.COLORED:const{fillStyle:o,strokeStyle:c}=this.ctx;i.fillStyle=r.fillColor=o,i.strokeStyle=r.strokeColor=c;break;case lk.UNCOLORED:i.fillStyle=i.strokeStyle=s,r.fillColor=r.strokeColor=s;break;default:throw new i$(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,i,r){let o=s;i!==va.SHADING&&(o=bt.transform(o,t.baseTransform),this.matrix&&(o=bt.transform(o,this.matrix)));const c=this.createPatternCanvas(t,r);let u=new DOMMatrix(o);u=u.translate(c.offsetX,c.offsetY),u=u.scale(1/c.scaleX,1/c.scaleY);const h=e.createPattern(c.canvas,"repeat");return h.setTransform(u),h}}function z$({src:n,srcPos:e=0,dest:t,width:s,height:i,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const c=oa.isLittleEndian?4278190080:255,[u,h]=o?[r,c]:[c,r],f=s>>3,g=s&7,x=n.length;t=new Uint32Array(t.buffer);let y=0;for(let N=0;N<i;N++){for(const E=e+f;e<E;e++){const A=e<x?n[e]:255;t[y++]=A&128?h:u,t[y++]=A&64?h:u,t[y++]=A&32?h:u,t[y++]=A&16?h:u,t[y++]=A&8?h:u,t[y++]=A&4?h:u,t[y++]=A&2?h:u,t[y++]=A&1?h:u}if(g===0)continue;const j=e<x?n[e++]:255;for(let E=0;E<g;E++)t[y++]=j&1<<7-E?h:u}return{srcPos:e,destPos:y}}const ck=16,dk=100,I$=15,uk=10,Nr=16,Xw=new DOMMatrix,ho=new Float32Array(2),Tm=new Float32Array([1/0,1/0,-1/0,-1/0]);function B$(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},n.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},n.transform=function(t,s,i,r,o,c){e.transform(t,s,i,r,o,c),this.__originalTransform(t,s,i,r,o,c)},n.setTransform=function(t,s,i,r,o,c){e.setTransform(t,s,i,r,o,c),this.__originalSetTransform(t,s,i,r,o,c)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,i,r,o,c){e.bezierCurveTo(t,s,i,r,o,c),this.__originalBezierCurveTo(t,s,i,r,o,c)},n.rect=function(t,s,i,r){e.rect(t,s,i,r),this.__originalRect(t,s,i,r)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class H${constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,s)):(i=this.canvasFactory.create(t,s),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Wb(n,e,t,s,i,r,o,c,u,h){const[f,g,x,y,N,j]=Is(n);if(g===0&&x===0){const R=o*f+N,M=Math.round(R),L=c*y+j,z=Math.round(L),W=(o+u)*f+N,I=Math.abs(Math.round(W)-M)||1,Y=(c+h)*y+j,U=Math.abs(Math.round(Y)-z)||1;return n.setTransform(Math.sign(f),0,0,Math.sign(y),M,z),n.drawImage(e,t,s,i,r,0,0,I,U),n.setTransform(f,g,x,y,N,j),[I,U]}if(f===0&&y===0){const R=c*x+N,M=Math.round(R),L=o*g+j,z=Math.round(L),W=(c+h)*x+N,I=Math.abs(Math.round(W)-M)||1,Y=(o+u)*g+j,U=Math.abs(Math.round(Y)-z)||1;return n.setTransform(0,Math.sign(g),Math.sign(x),0,M,z),n.drawImage(e,t,s,i,r,0,0,U,I),n.setTransform(f,g,x,y,N,j),[U,I]}n.drawImage(e,t,s,i,r,o,c,u,h);const E=Math.hypot(f,g),A=Math.hypot(x,y);return[E*u,A*h]}class hk{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Q2;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=ya.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,t,s){s?.(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Tm.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=va.FILL,t=null){const s=this.minMax.slice();if(e===va.STROKE){t||hs("Stroke bounding box must include transform."),bt.singularValueDecompose2dScale(t,ho);const i=ho[0]*this.lineWidth/2,r=ho[1]*this.lineWidth/2;s[0]-=i,s[1]-=r,s[2]+=i,s[3]+=r}return s}updateClipFromPath(){const e=bt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Tm,0)}getClippedPathBoundingBox(e=va.FILL,t=null){return bt.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function fk(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,i=t%Nr,r=(t-i)/Nr,o=i===0?r:r+1,c=n.createImageData(s,Nr);let u=0,h;const f=e.data,g=c.data;let x,y,N,j;if(e.kind===f0.GRAYSCALE_1BPP){const E=f.byteLength,A=new Uint32Array(g.buffer,0,g.byteLength>>2),R=A.length,M=s+7>>3,L=4294967295,z=oa.isLittleEndian?4278190080:255;for(x=0;x<o;x++){for(N=x<r?Nr:i,h=0,y=0;y<N;y++){const W=E-u;let I=0;const Y=W>M?s:W*8-7,U=Y&-8;let Z=0,$=0;for(;I<U;I+=8)$=f[u++],A[h++]=$&128?L:z,A[h++]=$&64?L:z,A[h++]=$&32?L:z,A[h++]=$&16?L:z,A[h++]=$&8?L:z,A[h++]=$&4?L:z,A[h++]=$&2?L:z,A[h++]=$&1?L:z;for(;I<Y;I++)Z===0&&($=f[u++],Z=128),A[h++]=$&Z?L:z,Z>>=1}for(;h<R;)A[h++]=0;n.putImageData(c,0,x*Nr)}}else if(e.kind===f0.RGBA_32BPP){for(y=0,j=s*Nr*4,x=0;x<r;x++)g.set(f.subarray(u,u+j)),u+=j,n.putImageData(c,0,y),y+=Nr;x<o&&(j=s*i*4,g.set(f.subarray(u,u+j)),n.putImageData(c,0,y))}else if(e.kind===f0.RGB_24BPP)for(N=Nr,j=s*N,x=0;x<o;x++){for(x>=r&&(N=i,j=s*N),h=0,y=j;y--;)g[h++]=f[u++],g[h++]=f[u++],g[h++]=f[u++],g[h++]=255;n.putImageData(c,0,x*Nr)}else throw new Error(`bad image kind: ${e.kind}`)}function mk(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,i=t%Nr,r=(t-i)/Nr,o=i===0?r:r+1,c=n.createImageData(s,Nr);let u=0;const h=e.data,f=c.data;for(let g=0;g<o;g++){const x=g<r?Nr:i;({srcPos:u}=z$({src:h,srcPos:u,dest:f,width:s,height:x,nonBlackColor:0})),n.putImageData(c,0,g*Nr)}}function zp(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Gb(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function gk(n,e){if(e)return!0;bt.singularValueDecompose2dScale(n,ho);const t=Math.fround(zl.pixelRatio*Cf.PDF_TO_CSS_UNITS);return ho[0]<=t&&ho[1]<=t}const U$=["butt","round","square"],V$=["miter","round","bevel"],W$={},pk={};class zm{constructor(e,t,s,i,r,{optionalContentConfig:o,markedContentStack:c=null},u,h,f){this.ctx=e,this.current=new hk(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=o,this.cachedCanvases=new H$(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(e,t,s=null){return typeof t=="string"?(this.dependencyTracker?.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):s}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:i=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=c,s){const u=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform(...Is(this.compositeCtx))}this.ctx.save(),Gb(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Is(this.ctx)}executeOperatorList(e,t,s,i,r){const o=e.argsArray,c=e.fnArray;let u=t||0;const h=o.length;if(h===u)return u;const f=h-u>uk&&typeof s=="function",g=f?Date.now()+I$:0;let x=0;const y=this.commonObjs,N=this.objs;let j,E;for(;;){if(i!==void 0&&u===i.nextBreakPoint)return i.breakIt(u,s),u;if(!r||r(u))if(j=c[u],E=o[u]??null,j!==$m.dependency)E===null?this[j](u):this[j](u,...E);else for(const A of E){this.dependencyTracker?.recordNamedData(A,u);const R=A.startsWith("g_")?y:N;if(!R.has(A))return R.get(A,s),u}if(u++,u===h)return u;if(f&&++x>uk){if(Date.now()>g)return s(),u;x=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const s=e.width??e.displayWidth,i=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),c=s,u=i,h="prescale1",f,g;for(;r>2&&c>1||o>2&&u>1;){let x=c,y=u;r>2&&c>1&&(x=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),r/=c/x),o>2&&u>1&&(y=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,o/=u/y),f=this.cachedCanvases.getCanvas(h,x,y),g=f.context,g.clearRect(0,0,x,y),g.drawImage(e,0,0,c,u,0,0,x,y),e=f.canvas,c=x,u=y,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:c,paintHeight:u}}_createMaskCanvas(e,t){const s=this.ctx,{width:i,height:r}=t,o=this.current.fillColor,c=this.current.patternFill,u=Is(s);let h,f,g,x;if((t.bitmap||t.data)&&t.count>1){const Z=t.bitmap||t.data.buffer;f=JSON.stringify(c?u:[u.slice(0,4),o]),h=this._cachedBitmapsMap.get(Z),h||(h=new Map,this._cachedBitmapsMap.set(Z,h));const $=h.get(f);if($&&!c){const ae=Math.round(Math.min(u[0],u[2])+u[4]),xe=Math.round(Math.min(u[1],u[3])+u[5]);return this.dependencyTracker?.recordDependencies(e,Po.transformAndFill),{canvas:$,offsetX:ae,offsetY:xe}}g=$}g||(x=this.cachedCanvases.getCanvas("maskCanvas",i,r),mk(x.context,t));let y=bt.transform(u,[1/i,0,0,-1/r,0,0]);y=bt.transform(y,[1,0,0,1,0,-r]);const N=Tm.slice();bt.axialAlignedBoundingBox([0,0,i,r],y,N);const[j,E,A,R]=N,M=Math.round(A-j)||1,L=Math.round(R-E)||1,z=this.cachedCanvases.getCanvas("fillCanvas",M,L),W=z.context,I=j,Y=E;W.translate(-I,-Y),W.transform(...y),g||(g=this._scaleImage(x.canvas,Nc(W)),g=g.img,h&&c&&h.set(f,g)),W.imageSmoothingEnabled=gk(Is(W),t.interpolate),Wb(W,g,0,0,g.width,g.height,0,0,i,r),W.globalCompositeOperation="source-in";const U=bt.transform(Nc(W),[1,0,0,1,-I,-Y]);return W.fillStyle=c?o.getPattern(s,this,U,va.FILL,e):o,W.fillRect(0,0,i,r),h&&!c&&(this.cachedCanvases.delete("fillCanvas"),h.set(f,z.canvas)),this.dependencyTracker?.recordDependencies(e,Po.transformAndFill),{canvas:z.canvas,offsetX:Math.round(I),offsetY:Math.round(Y)}}setLineWidth(e,t){this.dependencyTracker?.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=U$[t]}setLineJoin(e,t){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=V$[t]}setMiterLimit(e,t){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,s){this.dependencyTracker?.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=s)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){for(const[s,i]of t)switch(s){case"LW":this.setLineWidth(e,i);break;case"LC":this.setLineCap(e,i);break;case"LJ":this.setLineJoin(e,i);break;case"ML":this.setMiterLimit(e,i);break;case"D":this.setDash(e,i[0],i[1]);break;case"RI":this.setRenderingIntent(e,i);break;case"FL":this.setFlatness(e,i);break;case"Font":this.setFont(e,i[0],i[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=i;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=i;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,s=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,t,s);this.suspendedCtx=this.ctx;const o=this.ctx=r.context;o.setTransform(this.suspendedCtx.getTransform()),zp(this.suspendedCtx,o),B$(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),zp(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,i){const r=i[0],o=i[1],c=i[2]-r,u=i[3]-o;c===0||u===0||(this.genericComposeSMask(t.context,s,c,u,t.subtype,t.backdrop,t.transferMap,r,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,i,r,o,c,u,h,f,g){let x=e.canvas,y=u-f,N=h-g;if(o)if(y<0||N<0||y+s>x.width||N+i>x.height){const E=this.cachedCanvases.getCanvas("maskExtension",s,i),A=E.context;A.drawImage(x,-y,-N),A.globalCompositeOperation="destination-atop",A.fillStyle=o,A.fillRect(0,0,s,i),A.globalCompositeOperation="source-over",x=E.canvas,y=N=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(y,N,s,i),e.clip(E),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(y,N,s,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&c?t.filter=this.filterFactory.addAlphaFilter(c):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(c));const j=new Path2D;j.rect(u,h,s,i),t.clip(j),t.globalCompositeOperation="destination-in",t.drawImage(x,y,N,s,i,u,h,s,i),t.restore()}save(e){this.inSMaskMode&&zp(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&zp(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,i,r,o,c){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(t,s,i,r,o,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s,i){let[r]=s;if(!i){r||=s[0]=new Path2D,this[t](e,r);return}if(this.dependencyTracker!==null){const o=t===$m.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-o,i[2]+o,i[1]-o,i[3]+o).recordDependencies(e,["transform"])}if(!(r instanceof Path2D)){const o=s[0]=new Path2D;for(let c=0,u=r.length;c<u;)switch(r[c++]){case zb.moveTo:o.moveTo(r[c++],r[c++]);break;case zb.lineTo:o.lineTo(r[c++],r[c++]);break;case zb.curveTo:o.bezierCurveTo(r[c++],r[c++],r[c++],r[c++],r[c++],r[c++]);break;case zb.closePath:o.closePath();break;default:$t(`Unrecognized drawing path operator: ${r[c-1]}`);break}r=o}bt.axialAlignedBoundingBox(i,Is(this.ctx),this.current.minMax),this[t](e,r),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,s=!0){const i=this.ctx,r=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&r?.getPattern){const o=r.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=r.getPattern(i,this,Nc(i),va.STROKE,e),o){const c=new Path2D;c.addPath(t,i.getTransform().invertSelf().multiplySelf(o)),t=c}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);this.dependencyTracker?.recordDependencies(e,Po.stroke),s&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(va.STROKE,Is(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,s=!0){const i=this.ctx,r=this.current.fillColor,o=this.current.patternFill;let c=!1;if(o){const h=r.isModifyingCurrentTransform()?i.getTransform():null;if(this.dependencyTracker?.save(e),i.save(),i.fillStyle=r.getPattern(i,this,Nc(i),va.FILL,e),h){const f=new Path2D;f.addPath(t,i.getTransform().invertSelf().multiplySelf(h)),t=f}c=!0}const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),this.dependencyTracker?.recordDependencies(e,Po.fill),c&&(i.restore(),this.dependencyTracker?.restore(e)),s&&this.consumePath(e,t,u)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){this.ctx.fill(t),this.dependencyTracker?.recordDependencies(e,Po.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=W$}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=pk}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){const i=new Path2D,r=s.getTransform().invertSelf();for(const{transform:o,x:c,y:u,fontSize:h,path:f}of t)f&&i.addPath(f,new DOMMatrix(o).preMultiplySelf(r).translate(c,u).scale(h,-h));s.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,s){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const i=this.commonObjs.get(t),r=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=i.fontMatrix||Q2,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&$t("Invalid font matrix for font "+t),s<0?(s=-s,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=s,i.isType3Font)return;const o=i.loadedName||"sans-serif",c=i.systemFontInfo?.css||`"${o}", ${i.fallbackName}`;let u="normal";i.black?u="900":i.bold&&(u="bold");const h=i.italic?"italic":"normal";let f=s;s<ck?f=ck:s>dk&&(f=dk),this.current.fontSizeScale=s/f,this.ctx.font=`${h} ${u} ${f}px ${c}`}setTextRenderingMode(e,t){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=s}setLeadingMoveText(e,t,s){this.setLeading(e,-s),this.moveText(e,t,s)}setTextMatrix(e,t){this.dependencyTracker?.recordSimpleData("textMatrix",e);const{current:s}=this;s.textMatrix=t,s.textMatrixScale=Math.hypot(t[0],t[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#s(e,t,s){const i=new Path2D;return i.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),i}paintChar(e,t,s,i,r,o){const c=this.ctx,u=this.current,h=u.font,f=u.textRenderingMode,g=u.fontSize/u.fontSizeScale,x=f&ya.FILL_STROKE_MASK,y=!!(f&ya.ADD_TO_PATH_FLAG),N=u.patternFill&&!h.missingFile,j=u.patternStroke&&!h.missingFile;let E;if((h.disableFontFace||y||N||j)&&!h.missingFile&&(E=h.getPathGenerator(this.commonObjs,t)),E&&(h.disableFontFace||N||j)){c.save(),c.translate(s,i),c.scale(g,-g),this.dependencyTracker?.recordCharacterBBox(e,c,h);let A;if(x===ya.FILL||x===ya.FILL_STROKE)if(r){A=c.getTransform(),c.setTransform(...r);const R=this.#s(E,A,r);c.fill(R)}else c.fill(E);if(x===ya.STROKE||x===ya.FILL_STROKE)if(o){A||=c.getTransform(),c.setTransform(...o);const{a:R,b:M,c:L,d:z}=A,W=bt.inverseTransform(o),I=bt.transform([R,M,L,z,0,0],W);bt.singularValueDecompose2dScale(I,ho),c.lineWidth*=Math.max(ho[0],ho[1])/g,c.stroke(this.#s(E,A,o))}else c.lineWidth/=g,c.stroke(E);c.restore()}else(x===ya.FILL||x===ya.FILL_STROKE)&&(c.fillText(t,s,i),this.dependencyTracker?.recordCharacterBBox(e,c,h,g,s,i,()=>c.measureText(t))),(x===ya.STROKE||x===ya.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,c,h,g,s,i,()=>c.measureText(t)).recordDependencies(e,Po.stroke),c.strokeText(t,s,i));y&&((this.pendingTextPaths||=[]).push({transform:Is(c),x:s,y:i,fontSize:g,path:E}),this.dependencyTracker?.recordCharacterBBox(e,c,h,g,s,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){s=!0;break}return an(this,"isFontSubpixelAAEnabled",s)}showText(e,t){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Po.showText).resetBBox(e),this.current.textRenderingMode&ya.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,i=s.font;if(i.isType3Font){this.showType3Text(e,t),this.dependencyTracker?.recordShowTextOperation(e);return}const r=s.fontSize;if(r===0){this.dependencyTracker?.recordOperation(e);return}const o=this.ctx,c=s.fontSizeScale,u=s.charSpacing,h=s.wordSpacing,f=s.fontDirection,g=s.textHScale*f,x=t.length,y=i.vertical,N=y?1:-1,j=i.defaultVMetrics,E=r*s.fontMatrix[0],A=s.textRenderingMode===ya.FILL&&!i.disableFontFace&&!s.patternFill;o.save(),s.textMatrix&&o.transform(...s.textMatrix),o.translate(s.x,s.y+s.textRise),f>0?o.scale(g,-1):o.scale(g,1);let R,M;if(s.patternFill){o.save();const Y=s.fillColor.getPattern(o,this,Nc(o),va.FILL,e);R=Is(o),o.restore(),o.fillStyle=Y}if(s.patternStroke){o.save();const Y=s.strokeColor.getPattern(o,this,Nc(o),va.STROKE,e);M=Is(o),o.restore(),o.strokeStyle=Y}let L=s.lineWidth;const z=s.textMatrixScale;if(z===0||L===0){const Y=s.textRenderingMode&ya.FILL_STROKE_MASK;(Y===ya.STROKE||Y===ya.FILL_STROKE)&&(L=this.getSinglePixelWidth())}else L/=z;if(c!==1&&(o.scale(c,c),L/=c),o.lineWidth=L,i.isInvalidPDFjsFont){const Y=[];let U=0;for(const $ of t)Y.push($.unicode),U+=$.width;const Z=Y.join("");if(o.fillText(Z,0,0),this.dependencyTracker!==null){const $=o.measureText(Z);this.dependencyTracker.recordBBox(e,this.ctx,-$.actualBoundingBoxLeft,$.actualBoundingBoxRight,-$.actualBoundingBoxAscent,$.actualBoundingBoxDescent).recordShowTextOperation(e)}s.x+=U*E*g,o.restore(),this.compose();return}let W=0,I;for(I=0;I<x;++I){const Y=t[I];if(typeof Y=="number"){W+=N*Y*r/1e3;continue}let U=!1;const Z=(Y.isSpace?h:0)+u,$=Y.fontChar,ae=Y.accent;let xe,fe,ke=Y.width;if(y){const se=Y.vmetric||j,ee=-(Y.vmetric?se[1]:ke*.5)*E,ne=se[2]*E;ke=se?-se[0]:ke,xe=ee/c,fe=(W+ne)/c}else xe=W/c,fe=0;let G;if(i.remeasure&&ke>0){G=o.measureText($);const se=G.width*1e3/r*c;if(ke<se&&this.isFontSubpixelAAEnabled){const ee=ke/se;U=!0,o.save(),o.scale(ee,1),xe/=ee}else ke!==se&&(xe+=(ke-se)/2e3*r/c)}if(this.contentVisible&&(Y.isInFont||i.missingFile)){if(A&&!ae)o.fillText($,xe,fe),this.dependencyTracker?.recordCharacterBBox(e,o,G?{bbox:null}:i,r/c,xe,fe,()=>G??o.measureText($));else if(this.paintChar(e,$,xe,fe,R,M),ae){const se=xe+r*ae.offset.x/c,ee=fe-r*ae.offset.y/c;this.paintChar(e,ae.fontChar,se,ee,R,M)}}const X=y?ke*E-Z*f:ke*E+Z*f;W+=X,U&&o.restore()}y?s.y-=W:s.x+=W*g,o.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,t){const s=this.ctx,i=this.current,r=i.font,o=i.fontSize,c=i.fontDirection,u=r.vertical?1:-1,h=i.charSpacing,f=i.wordSpacing,g=i.textHScale*c,x=i.fontMatrix||Q2,y=t.length,N=i.textRenderingMode===ya.INVISIBLE;let j,E,A,R;if(N||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),i.textMatrix&&s.transform(...i.textMatrix),s.translate(i.x,i.y+i.textRise),s.scale(g,c);const M=this.dependencyTracker;for(this.dependencyTracker=M?new Xy(M,e):null,j=0;j<y;++j){if(E=t[j],typeof E=="number"){R=u*E*o/1e3,this.ctx.translate(R,0),i.x+=R*g;continue}const L=(E.isSpace?f:0)+h,z=r.charProcOperatorList[E.operatorListId];z?this.contentVisible&&(this.save(),s.scale(o,o),s.transform(...x),this.executeOperatorList(z),this.restore()):$t(`Type3 character "${E.operatorListId}" is not available.`);const W=[E.width,0];bt.applyTransform(W,x),A=W[0]*o+L,s.translate(A,0),i.x+=A*g}s.restore(),M&&(this.dependencyTracker=M)}setCharWidth(e,t,s){}setCharWidthAndBounds(e,t,s,i,r,o,c){const u=new Path2D;u.rect(i,r,o-i,c-r),this.ctx.clip(u),this.dependencyTracker?.recordBBox(e,this.ctx,i,o,r,c).recordClipBox(e,this.ctx,i,o,r,c),this.endPath(e)}getColorN_Pattern(e,t){let s;if(t[0]==="TilingPattern"){const i=this.baseTransform||Is(this.ctx),r={createCanvasGraphics:(o,c)=>new zm(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Xy(this.dependencyTracker,c,!0):null)};s=new XN(t,this.ctx,r,i)}else s=this._getPattern(e,t[1],t[2]);return s}setStrokeColorN(e,...t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,s=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=F$(this.getObject(e,t)),this.cachedPatterns.set(t,i)),s&&(i.matrix=s),i}shadingFill(e,t){if(!this.contentVisible)return;const s=this.ctx;this.save(e);const i=this._getPattern(e,t);s.fillStyle=i.getPattern(s,this,Nc(s),va.SHADING,e);const r=Nc(s);if(r){const{width:o,height:c}=s.canvas,u=Tm.slice();bt.axialAlignedBoundingBox([0,0,o,c],r,u);const[h,f,g,x]=u;this.ctx.fillRect(h,f,g-h,x-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Po.transform).recordDependencies(e,Po.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){hs("Should not call beginInlineImage")}beginImageData(){hs("Should not call beginImageData")}paintFormXObjectBegin(e,t,s){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Is(this.ctx),s)){bt.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[i,r,o,c]=s,u=new Path2D;u.rect(i,r,o-i,c-r),this.ctx.clip(u),this.dependencyTracker?.recordClipBox(e,this.ctx,i,o,r,c),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;t.isolated||Fv("TODO: Support non-isolated groups."),t.knockout&&$t("Knockout groups not supported.");const i=Is(s);if(t.matrix&&s.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=Tm.slice();bt.axialAlignedBoundingBox(t.bbox,Is(s),r);const o=[0,0,s.canvas.width,s.canvas.height];r=bt.intersect(r,o)||[0,0,0,0];const c=Math.floor(r[0]),u=Math.floor(r[1]),h=Math.max(Math.ceil(r[2])-c,1),f=Math.max(Math.ceil(r[3])-u,1);this.current.startNewPathAndClipBox([0,0,h,f]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const x=this.cachedCanvases.getCanvas(g,h,f),y=x.context;y.translate(-c,-u),y.transform(...i);let N=new Path2D;const[j,E,A,R]=t.bbox;if(N.rect(j,E,A-j,R-E),t.matrix){const M=new Path2D;M.addPath(N,new DOMMatrix(t.matrix)),N=M}y.clip(N),t.smask&&this.smaskStack.push({canvas:x.canvas,context:y,offsetX:c,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(c,u),s.save()),zp(s,y),this.ctx=y,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(e,t){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const r=Is(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...r);const o=Tm.slice();bt.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],r,o),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,s,i,r,o){if(this.#e(),Gb(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const c=s[2]-s[0],u=s[3]-s[1];if(o&&this.annotationCanvasMap){i=i.slice(),i[4]-=s[0],i[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=c,s[3]=u,bt.singularValueDecompose2dScale(Is(this.ctx),ho);const{viewportScale:h}=this,f=Math.ceil(c*this.outputScaleX*h),g=Math.ceil(u*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(f,g);const{canvas:x,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(t,x),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(ho[0],0,0,-ho[1],0,u*ho[1]),Gb(this.ctx)}else{Gb(this.ctx),this.endPath(e);const h=new Path2D;h.rect(s[0],s[1],c,u),this.ctx.clip(h)}}this.current=new hk(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...r)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){if(!this.contentVisible)return;const s=t.count;t=this.getObject(e,t.data,t),t.count=s;const i=this.ctx,r=this._createMaskCanvas(e,t),o=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,r.offsetX,r.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,r.offsetX,r.offsetX+o.width,r.offsetY,r.offsetY+o.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s,i=0,r=0,o,c){if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const u=this.ctx;u.save();const h=Is(u);u.transform(s,i,r,o,0,0);const f=this._createMaskCanvas(e,t);u.setTransform(1,0,0,1,f.offsetX-h[4],f.offsetY-h[5]),this.dependencyTracker?.resetBBox(e);for(let g=0,x=c.length;g<x;g+=2){const y=bt.transform(h,[s,i,r,o,c[g],c[g+1]]);u.drawImage(f.canvas,y[4],y[5]),this.dependencyTracker?.recordBBox(e,this.ctx,y[4],y[4]+f.canvas.width,y[5],y[5]+f.canvas.height)}u.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,t){if(!this.contentVisible)return;const s=this.ctx,i=this.current.fillColor,r=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,Po.transformAndFill);for(const o of t){const{data:c,width:u,height:h,transform:f}=o,g=this.cachedCanvases.getCanvas("maskCanvas",u,h),x=g.context;x.save();const y=this.getObject(e,c,o);mk(x,y),x.globalCompositeOperation="source-in",x.fillStyle=r?i.getPattern(x,this,Nc(s),va.FILL,e):i,x.fillRect(0,0,u,h),x.restore(),s.save(),s.transform(...f),s.scale(1,-1),Wb(s,g.canvas,0,0,u,h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,s,0,u,0,h),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s){$t("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,s)}paintImageXObjectRepeat(e,t,s,i,r){if(!this.contentVisible)return;const o=this.getObject(e,t);if(!o){$t("Dependent image isn't ready yet");return}const c=o.width,u=o.height,h=[];for(let f=0,g=r.length;f<g;f+=2)h.push({transform:[s,0,0,i,r[f],r[f+1]],x:0,y:0,w:c,h:u});this.paintInlineImageXObjectGroup(e,o,h)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:i}=e,r=this.cachedCanvases.getCanvas("inlineImage",s,i),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",r.canvas}paintInlineImageXObject(e,t){if(!this.contentVisible)return;const s=t.width,i=t.height,r=this.ctx;this.save(e);const{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none"),r.scale(1/s,-1/i);let c;if(t.bitmap)c=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)c=t;else{const f=this.cachedCanvases.getCanvas("inlineImage",s,i).context;fk(f,t),c=this.applyTransferMapsToCanvas(f)}const u=this._scaleImage(c,Nc(r));r.imageSmoothingEnabled=gk(Is(r),t.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,r,0,s,-i,0).recordDependencies(e,Po.imageXObject).recordOperation(e),Wb(r,u.img,0,0,u.paintWidth,u.paintHeight,0,-i,s,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,s){if(!this.contentVisible)return;const i=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const o=t.width,c=t.height,h=this.cachedCanvases.getCanvas("inlineImage",o,c).context;fk(h,t),r=this.applyTransferMapsToCanvas(h)}this.dependencyTracker?.resetBBox(e);for(const o of s)i.save(),i.transform(...o.transform),i.scale(1,-1),Wb(i,r,o.x,o.y,o.w,o.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,i,0,1,-1,0),i.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Po.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,s){}beginMarkedContent(e,t){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,s){this.dependencyTracker?.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,s){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const r=this.ctx;this.pendingClip?(i||(this.pendingClip===pk?r.clip(t,"evenodd"):r.clip(t)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Is(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:i,d:r}=this.ctx.getTransform();let o,c;if(s===0&&i===0){const u=Math.abs(t),h=Math.abs(r);if(u===h)if(e===0)o=c=1/u;else{const f=u*e;o=c=f<1?1/f:1}else if(e===0)o=1/u,c=1/h;else{const f=u*e,g=h*e;o=f<1?1/f:1,c=g<1?1/g:1}}else{const u=Math.abs(t*r-s*i),h=Math.hypot(t,s),f=Math.hypot(i,r);if(e===0)o=f/u,c=h/u;else{const g=e*u;o=f>g?f/g:1,c=h>g?h/g:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:i}}=this,[r,o]=this.getScaleForStroking();if(r===o){s.lineWidth=(i||1)*r,s.stroke(e);return}const c=s.getLineDash();t&&s.save(),s.scale(r,o),Xw.a=1/r,Xw.d=1/o;const u=new Path2D;if(u.addPath(e,Xw),c.length>0){const h=Math.max(r,o);s.setLineDash(c.map(f=>f/h)),s.lineDashOffset/=h}s.lineWidth=i||1,s.stroke(u),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const n in $m)zm.prototype[n]!==void 0&&(zm.prototype[$m[n]]=zm.prototype[n]);class Im{#e;#t;#s;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){const t=new TextEncoder,s={};let i=0;for(const h of Im.strings){const f=t.encode(e[h]);s[h]=f,i+=4+f.length}const r=new ArrayBuffer(i),o=new Uint8Array(r),c=new DataView(r);let u=0;for(const h of Im.strings){const f=s[h],g=f.length;c.setUint32(u,g),o.set(f,u+4),u+=4+g}return Cn(u===r.byteLength,"CssFontInfo.write: Buffer overflow"),r}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#s=new TextDecoder}#n(e){Cn(e<Im.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=this.#t.getUint32(t)+4;const s=this.#t.getUint32(t);return this.#s.decode(new Uint8Array(this.#e,t+4,s))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class Bm{#e;#t;#s;static strings=["css","loadedName","baseFontName","src"];static write(e){const t=new TextEncoder,s={};let i=0;for(const x of Bm.strings){const y=t.encode(e[x]);s[x]=y,i+=4+y.length}i+=4;let r,o,c=1+i;e.style&&(r=t.encode(e.style.style),o=t.encode(e.style.weight),c+=4+r.length+4+o.length);const u=new ArrayBuffer(c),h=new Uint8Array(u),f=new DataView(u);let g=0;f.setUint8(g++,e.guessFallback?1:0),f.setUint32(g,0),g+=4,i=0;for(const x of Bm.strings){const y=s[x],N=y.length;i+=4+N,f.setUint32(g,N),h.set(y,g+4),g+=4+N}return f.setUint32(g-i-4,i),e.style&&(f.setUint32(g,r.length),h.set(r,g+4),g+=4+r.length,f.setUint32(g,o.length),h.set(o,g+4),g+=4+o.length),Cn(g<=u.byteLength,"SubstitionInfo.write: Buffer overflow"),u.transferToFixedLength(g)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#s=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#n(e){Cn(e<Bm.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=this.#t.getUint32(t)+4;const s=this.#t.getUint32(t);return this.#s.decode(new Uint8Array(this.#e,t+4,s))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);const t=this.#t.getUint32(e),s=this.#s.decode(new Uint8Array(this.#e,e+4,t));e+=4+t;const i=this.#t.getUint32(e),r=this.#s.decode(new Uint8Array(this.#e,e+4,i));return{style:s,weight:r}}}class rs{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#s=this.#t+1+8;static#n=this.#s+1+48;static#r=this.#n+1+6;#i;#a;#o;constructor({data:e,extra:t}){this.#i=e,this.#a=new TextDecoder,this.#o=new DataView(this.#i),t&&Object.assign(this,t)}#c(e){Cn(e<rs.bools.length,"Invalid boolean index");const t=Math.floor(e/4),s=e*2%8,i=this.#o.getUint8(t)>>s&3;return i===0?void 0:i===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(e){return Cn(e<rs.numbers.length,"Invalid number index"),this.#o.getFloat64(rs.#e+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=rs.#t;if(this.#o.getUint8(e)===0)return;e+=1;const s=[];for(let i=0;i<4;i++)s.push(this.#o.getInt16(e,!0)),e+=2;return s}get fontMatrix(){let e=rs.#s;if(this.#o.getUint8(e)===0)return;e+=1;const s=[];for(let i=0;i<6;i++)s.push(this.#o.getFloat64(e,!0)),e+=8;return s}get defaultVMetrics(){let e=rs.#n;if(this.#o.getUint8(e)===0)return;e+=1;const s=[];for(let i=0;i<3;i++)s.push(this.#o.getInt16(e,!0)),e+=2;return s}#h(e){Cn(e<rs.strings.length,"Invalid string index");let t=rs.#r+4;for(let r=0;r<e;r++)t+=this.#o.getUint32(t)+4;const s=this.#o.getUint32(t),i=new Uint8Array(s);return i.set(new Uint8Array(this.#i,t+4,s)),this.#a.decode(i)}get fallbackName(){return this.#h(0)}get loadedName(){return this.#h(1)}get mimetype(){return this.#h(2)}get name(){return this.#h(3)}get data(){let e=rs.#r;const t=this.#o.getUint32(e);e+=4+t;const s=this.#o.getUint32(e);e+=4+s;const i=this.#o.getUint32(e);e+=4+i;const r=this.#o.getUint32(e);if(r!==0)return new Uint8Array(this.#i,e+4,r)}clearData(){let e=rs.#r;const t=this.#o.getUint32(e);e+=4+t;const s=this.#o.getUint32(e);e+=4+s;const i=this.#o.getUint32(e);e+=4+i;const r=this.#o.getUint32(e);new Uint8Array(this.#i,e+4,r).fill(0),this.#o.setUint32(e,0)}get cssFontInfo(){let e=rs.#r;const t=this.#o.getUint32(e);e+=4+t;const s=this.#o.getUint32(e);e+=4+s;const i=this.#o.getUint32(e);if(i===0)return null;const r=new Uint8Array(i);return r.set(new Uint8Array(this.#i,e+4,i)),new Im(r.buffer)}get systemFontInfo(){let e=rs.#r;const t=this.#o.getUint32(e);e+=4+t;const s=this.#o.getUint32(e);if(s===0)return null;const i=new Uint8Array(s);return i.set(new Uint8Array(this.#i,e+4,s)),new Bm(i.buffer)}static write(e){const t=e.systemFontInfo?Bm.write(e.systemFontInfo):null,s=e.cssFontInfo?Im.write(e.cssFontInfo):null,i=new TextEncoder,r={};let o=0;for(const j of rs.strings)r[j]=i.encode(e[j]),o+=4+r[j].length;const c=rs.#r+4+o+4+(t?t.byteLength:0)+4+(s?s.byteLength:0)+4+(e.data?e.data.length:0),u=new ArrayBuffer(c),h=new Uint8Array(u),f=new DataView(u);let g=0;const x=rs.bools.length;let y=0,N=0;for(let j=0;j<x;j++){const E=e[rs.bools[j]];y|=(E===void 0?0:E?2:1)<<N,N+=2,(N===8||j===x-1)&&(f.setUint8(g++,y),y=0,N=0)}Cn(g===rs.#e,"FontInfo.write: Boolean properties offset mismatch");for(const j of rs.numbers)f.setFloat64(g,e[j]),g+=8;if(Cn(g===rs.#t,"FontInfo.write: Number properties offset mismatch"),e.bbox){f.setUint8(g++,4);for(const j of e.bbox)f.setInt16(g,j,!0),g+=2}else f.setUint8(g++,0),g+=8;if(Cn(g===rs.#s,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){f.setUint8(g++,6);for(const j of e.fontMatrix)f.setFloat64(g,j,!0),g+=8}else f.setUint8(g++,0),g+=48;if(Cn(g===rs.#n,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){f.setUint8(g++,1);for(const j of e.defaultVMetrics)f.setInt16(g,j,!0),g+=2}else f.setUint8(g++,0),g+=6;Cn(g===rs.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),f.setUint32(rs.#r,0),g+=4;for(const j of rs.strings){const E=r[j],A=E.length;f.setUint32(g,A),h.set(E,g+4),g+=4+A}if(f.setUint32(rs.#r,g-rs.#r-4),!t)f.setUint32(g,0),g+=4;else{const j=t.byteLength;f.setUint32(g,j),Cn(g+4+j<=u.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),h.set(new Uint8Array(t),g+4),g+=4+j}if(!s)f.setUint32(g,0),g+=4;else{const j=s.byteLength;f.setUint32(g,j),Cn(g+4+j<=u.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),h.set(new Uint8Array(s),g+4),g+=4+j}return e.data===void 0?(f.setUint32(g,0),g+=4):(f.setUint32(g,e.data.length),h.set(e.data,g+4),g+=4+e.data.length),Cn(g<=u.byteLength,"FontInfo.write: Buffer overflow"),u.transferToFixedLength(g)}}class kl{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class G${#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const Nm=Symbol("INTERNAL");class Y${#e=!1;#t=!1;#s=!1;#n=!0;constructor(e,{name:t,intent:s,usage:i,rbGroups:r}){this.#e=!!(e&lo.DISPLAY),this.#t=!!(e&lo.PRINT),this.name=t,this.intent=s,this.usage=i,this.rbGroups=r}get visible(){if(this.#s)return this.#n;if(!this.#n)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,s=!1){e!==Nm&&hs("Internal method `_setVisible` called."),this.#s=s,this.#n=t}}class X${#e=null;#t=new Map;#s=null;#n=null;constructor(e,t=lo.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const s of e.groups)this.#t.set(s.id,new Y$(t,s));if(e.baseState==="OFF")for(const s of this.#t.values())s._setVisible(Nm,!1);for(const s of e.on)this.#t.get(s)._setVisible(Nm,!0);for(const s of e.off)this.#t.get(s)._setVisible(Nm,!1);this.#s=this.getHash()}}#r(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let i=1;i<t;i++){const r=e[i];let o;if(Array.isArray(r))o=this.#r(r);else if(this.#t.has(r))o=this.#t.get(r).visible;else return $t(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return Fv("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:($t(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#r(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return $t(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return $t(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return $t(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return $t(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return $t(`Unknown optional content policy ${e.policy}.`),!0}return $t(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){const i=this.#t.get(e);if(!i){$t(`Optional content group not found: ${e}`);return}if(s&&t&&i.rbGroups.length)for(const r of i.rbGroups)for(const o of r)o!==e&&this.#t.get(o)?._setVisible(Nm,!1,!0);i._setVisible(Nm,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let s;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const r=this.#t.get(i);if(r)switch(s){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!r.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#s===null||this.getHash()===this.#s}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new HP;for(const[t,s]of this.#t)e.update(`${t}:${s.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class K${constructor(e,{disableRange:t=!1,disableStream:s=!1}){Cn(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:o,contentDispositionFilename:c}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=c,r?.length>0){const u=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((u,h)=>{this._onReceiveData({begin:u,chunk:h})}),e.addProgressListener((u,h)=>{this._onProgress({loaded:u,total:h})}),e.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(s),!0)});Cn(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Cn(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new Z$(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new Q$(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class Z${constructor(e,t,s=!1,i=null){this._stream=e,this._done=s||!1,this._filename=Iv(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Q${constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function J$(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let f=c(t);return f=unescape(f),f=u(f),f=h(f),r(f)}if(t=o(n),t){const f=h(t);return r(f)}if(t=s("filename","i").exec(n),t){t=t[1];let f=c(t);return f=h(f),r(f)}function s(f,g){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function i(f,g){if(f){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const x=new TextDecoder(f,{fatal:!0}),y=px(g);g=x.decode(y),e=!1}catch{}}return g}function r(f){return e&&/[\x80-\xff]/.test(f)&&(f=i("utf-8",f),e&&(f=i("iso-8859-1",f))),f}function o(f){const g=[];let x;const y=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(x=y.exec(f))!==null;){let[,j,E,A]=x;if(j=parseInt(j,10),j in g){if(j===0)break;continue}g[j]=[E,A]}const N=[];for(let j=0;j<g.length&&j in g;++j){let[E,A]=g[j];A=c(A),E&&(A=unescape(A),j===0&&(A=u(A))),N.push(A)}return N.join("")}function c(f){if(f.startsWith('"')){const g=f.slice(1).split('\\"');for(let x=0;x<g.length;++x){const y=g[x].indexOf('"');y!==-1&&(g[x]=g[x].slice(0,y),g.length=x+1),g[x]=g[x].replaceAll(/\\(.)/g,"$1")}f=g.join('"')}return f}function u(f){const g=f.indexOf("'");if(g===-1)return f;const x=f.slice(0,g),N=f.slice(g+1).replace(/^[^']*'/,"");return i(x,N)}function h(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,x,y,N){if(y==="q"||y==="Q")return N=N.replaceAll("_"," "),N=N.replaceAll(/=([0-9a-fA-F]{2})/g,function(j,E){return String.fromCharCode(parseInt(E,16))}),i(x,N);try{N=atob(N)}catch{}return i(x,N)})}return""}function ZP(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const i=e[s];i!==void 0&&t.append(s,i)}return t}function Bv(n){return URL.parse(n)?.origin??null}function QP({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function JP(n){const e=n.get("Content-Disposition");if(e){let t=J$(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Iv(t))return t}return null}function wx(n,e){return new O0(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function qP(n){return n===200||n===206}function $P(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function e3(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:($t(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class q${_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=ZP(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Cn(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new $$(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new eee(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class $${constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),i=t.url;fetch(i,$P(s,this._withCredentials,this._abortController)).then(r=>{if(e._responseOrigin=Bv(r.url),!qP(r.status))throw wx(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:c,suggestedLength:u}=QP({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=u||this._contentLength,this._filename=JP(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Md("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:e3(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class eee{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${s-1}`);const o=i.url;fetch(o,$P(r,this._withCredentials,this._abortController)).then(c=>{const u=Bv(c.url);if(u!==e._responseOrigin)throw new Error(`Expected range response-origin "${u}" to match "${e._responseOrigin}".`);if(!qP(c.status))throw wx(c.status,o);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:e3(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const Kw=200,Zw=206;function tee(n){const e=n.response;return typeof e!="string"?e:px(e).buffer}class nee{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:s}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=ZP(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,o]of this.headers)t.setRequestHeader(r,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=Zw):i.expectedStatus=Kw,t.responseType="arraybuffer",Cn(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){const s=this.pendingRequests[e];s&&s.onProgress?.(t)}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){s.onError(i.status);return}const r=i.status||Kw;if(!(r===Kw&&s.expectedStatus===Zw)&&r!==s.expectedStatus){s.onError(i.status);return}const c=tee(i);if(r===Zw){const u=i.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);h?s.onDone({begin:parseInt(h[1],10),chunk:c}):($t('Missing or invalid "Content-Range" header.'),s.onError(0))}else c?s.onDone({begin:0,chunk:c}):s.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class see{constructor(e){this._source=e,this._manager=new nee(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Cn(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new iee(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new aee(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class iee{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Bv(t.responseURL);const s=t.getAllResponseHeaders(),i=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[u,...h]=c.split(": ");return[u,h.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=QP({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=JP(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=wx(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class aee{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=Bv(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=wx(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const ree=/^[a-z][a-z0-9\-+.]+:/i;function oee(n){if(ree.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class lee{constructor(e){this.source=e,this.url=oee(e.url),Cn(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Cn(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new cee(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new dee(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class cee{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=wx(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Md("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class dee{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Ip=Symbol("INITIAL_DATA");class t3{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:Ip}}get(e,t=null){if(t){const i=this.#t(e);return i.promise.then(()=>t(i.data)),null}const s=this.#e[e];if(!s||s.data===Ip)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=this.#e[e];return!!t&&t.data!==Ip}delete(e){const t=this.#e[e];return!t||t.data===Ip?!1:(delete this.#e[e],!0)}resolve(e,t=null){const s=this.#t(e);s.data=t,s.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==Ip&&(yield[e,t])}}}const uee=1e5,xk=30;let F0=class Oo{#e=Promise.withResolvers();#t=null;#s=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#i=null;#a=0;#o=0;#c=null;#l=null;#h=0;#u=0;#f=Object.create(null);#p=[];#m=null;#d=[];#g=new WeakMap;#x=null;static#y=new Map;static#b=new Map;static#C=new WeakMap;static#N=null;static#v=new Set;constructor({textContentSource:e,container:t,viewport:s}){if(e instanceof ReadableStream)this.#m=e;else if(typeof e=="object")this.#m=new ReadableStream({start(u){u.enqueue(e),u.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=t,this.#u=s.scale*zl.pixelRatio,this.#h=s.rotation,this.#i={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:r,pageX:o,pageY:c}=s.rawDims;this.#x=[1,0,0,-1,-o,c+r],this.#o=i,this.#a=r,Oo.#T(),ah(t,s),this.#e.promise.finally(()=>{Oo.#v.delete(this),this.#i=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=oa.platform;return an(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#c.read().then(({value:t,done:s})=>{if(s){this.#e.resolve();return}this.#r??=t.lang,Object.assign(this.#f,t.styles),this.#E(t.items),e()},this.#e.reject)};return this.#c=this.#m.getReader(),Oo.#v.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const s=e.scale*zl.pixelRatio,i=e.rotation;if(i!==this.#h&&(t?.(),this.#h=i,ah(this.#l,{rotation:i})),s!==this.#u){t?.(),this.#u=s;const r={div:null,properties:null,ctx:Oo.#k(this.#r)};for(const o of this.#d)r.properties=this.#g.get(o),r.div=o,this.#j(r)}}cancel(){const e=new Md("TextLayer task cancelled.");this.#c?.cancel(e).catch(()=>{}),this.#c=null,this.#e.reject(e)}get textDivs(){return this.#d}get textContentItemsStr(){return this.#p}#E(e){if(this.#s)return;this.#i.ctx??=Oo.#k(this.#r);const t=this.#d,s=this.#p;for(const i of e){if(t.length>uee){$t("Ignoring additional textDivs for performance reasons."),this.#s=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const r=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),i.id&&this.#t.setAttribute("id",`${i.id}`),r.append(this.#t)}else i.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}s.push(i.str),this.#S(i)}}#S(e){const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#d.push(t);const i=bt.transform(this.#x,e.transform);let r=Math.atan2(i[1],i[0]);const o=this.#f[e.fontName];o.vertical&&(r+=Math.PI/2);let c=this.#n&&o.fontSubstitution||o.fontFamily;c=Oo.fontFamilyMap.get(c)||c;const u=Math.hypot(i[2],i[3]),h=u*Oo.#F(c,o,this.#r);let f,g;r===0?(f=i[4],g=i[5]-h):(f=i[4]+h*Math.sin(r),g=i[5]-h*Math.cos(r));const x="calc(var(--total-scale-factor) *",y=t.style;this.#t===this.#l?(y.left=`${(100*f/this.#o).toFixed(2)}%`,y.top=`${(100*g/this.#a).toFixed(2)}%`):(y.left=`${x}${f.toFixed(2)}px)`,y.top=`${x}${g.toFixed(2)}px)`),y.fontSize=`${x}${(Oo.#N*u).toFixed(2)}px)`,y.fontFamily=c,s.fontSize=u,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#n&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),r!==0&&(s.angle=r*(180/Math.PI));let N=!1;if(e.str.length>1)N=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const j=Math.abs(e.transform[0]),E=Math.abs(e.transform[3]);j!==E&&Math.max(j,E)/Math.min(j,E)>1.5&&(N=!0)}if(N&&(s.canvasWidth=o.vertical?e.height:e.width),this.#g.set(t,s),this.#i.div=t,this.#i.properties=s,this.#j(this.#i),s.hasText&&this.#t.append(t),s.hasEOL){const j=document.createElement("br");j.setAttribute("role","presentation"),this.#t.append(j)}}#j(e){const{div:t,properties:s,ctx:i}=e,{style:r}=t;let o="";if(Oo.#N>1&&(o=`scale(${1/Oo.#N})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=r,{canvasWidth:u,fontSize:h}=s;Oo.#_(i,h*this.#u,c);const{width:f}=i.measureText(t.textContent);f>0&&(o=`scaleX(${u*this.#u/f}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(r.transform=o)}static cleanup(){if(!(this.#v.size>0)){this.#y.clear();for(const{canvas:e}of this.#b.values())e.remove();this.#b.clear()}}static#k(e=null){let t=this.#b.get(e||="");if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(e,t),this.#C.set(t,{size:0,family:""})}return t}static#_(e,t,s){const i=this.#C.get(e);t===i.size&&s===i.family||(e.font=`${t}px ${s}`,i.size=t,i.family=s)}static#T(){if(this.#N!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#N=e.getBoundingClientRect().height,e.remove()}static#F(e,t,s){const i=this.#y.get(e);if(i)return i;const r=this.#k(s);r.canvas.width=r.canvas.height=xk,this.#_(r,xk,e);const o=r.measureText(""),c=o.fontBoundingBoxAscent,u=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let h=.8;return c?h=c/(c+u):(oa.platform.isFirefox&&$t("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?h=t.ascent:t.descent&&(h=1+t.descent)),this.#y.set(e,h),h}};const hee=100;function KN(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new ZN,{docId:t}=e,s=n.url?v$(n.url):null,i=n.data?w$(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,c=n.password??null,u=n.range instanceof QN?n.range:null,h=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let f=n.worker instanceof eg?n.worker:null;const g=n.verbosity,x=typeof n.docBaseUrl=="string"&&!bx(n.docBaseUrl)?n.docBaseUrl:null,y=Bb(n.cMapUrl),N=n.cMapPacked!==!1,j=n.CMapReaderFactory||(er?_$:sk),E=Bb(n.iccUrl),A=Bb(n.standardFontDataUrl),R=n.StandardFontDataFactory||(er?T$:ik),M=Bb(n.wasmUrl),L=n.WasmFactory||(er?k$:ak),z=n.stopAtErrors!==!0,W=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,I=n.isEvalSupported!==!1,Y=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!er,U=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!er&&(oa.platform.isFirefox||!globalThis.chrome),Z=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,$=typeof n.disableFontFace=="boolean"?n.disableFontFace:er,ae=n.fontExtraProperties===!0,xe=n.enableXfa===!0,fe=n.ownerDocument||globalThis.document,ke=n.disableRange===!0,G=n.disableStream===!0,X=n.disableAutoFetch===!0,se=n.pdfBug===!0,ee=n.CanvasFactory||(er?E$:j$),ne=n.FilterFactory||(er?A$:C$),V=n.enableHWA===!0,re=n.useWasm!==!1,ge=u?u.length:n.length??NaN,Ne=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!er&&!$,Ce=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(j===sk&&R===ik&&L===ak&&y&&A&&M&&Qp(y,document.baseURI)&&Qp(A,document.baseURI)&&Qp(M,document.baseURI)),We=null;t$(g);const Ge={canvasFactory:new ee({ownerDocument:fe,enableHWA:V}),filterFactory:new ne({docId:t,ownerDocument:fe}),cMapReaderFactory:Ce?null:new j({baseUrl:y,isCompressed:N}),standardFontDataFactory:Ce?null:new R({baseUrl:A}),wasmFactory:Ce?null:new L({baseUrl:M})};f||(f=eg.create({verbosity:g,port:kl.workerPort}),e._worker=f);const Oe={docId:t,apiVersion:"5.4.296",data:i,password:c,disableAutoFetch:X,rangeChunkSize:h,length:ge,docBaseUrl:x,enableXfa:xe,evaluatorOptions:{maxImageSize:W,disableFontFace:$,ignoreErrors:z,isEvalSupported:I,isOffscreenCanvasSupported:Y,isImageDecoderSupported:U,canvasMaxAreaInBytes:Z,fontExtraProperties:ae,useSystemFonts:Ne,useWasm:re,useWorkerFetch:Ce,cMapUrl:y,iccUrl:E,standardFontDataUrl:A,wasmUrl:M}},$e={ownerDocument:fe,pdfBug:se,styleElement:We,loadingParams:{disableAutoFetch:X,enableXfa:xe}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Le=f.messageHandler.sendWithPromise("GetDocRequest",Oe,i?[i.buffer]:null);let pe;if(u)pe=new K$(u,{disableRange:ke,disableStream:G});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");const je=Qp(s)?q$:er?lee:see;pe=new je({url:s,length:ge,httpHeaders:r,withCredentials:o,rangeChunkSize:h,disableRange:ke,disableStream:G})}return Le.then(je=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Se=new Jp(t,je,f.port),Je=new gee(Se,e,pe,$e,Ge,V);e._transport=Je,Se.send("Ready",null)})}).catch(e._capability.reject),e}class ZN{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${ZN.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let QN=class{#e=Promise.withResolvers();#t=[];#s=[];#n=[];#r=[];constructor(e,t,s=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=i}addRangeListener(e){this.#r.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#s.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(const s of this.#r)s(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(const s of this.#n)s(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const t of this.#s)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){hs("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class fee{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return an(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class mee{#e=!1;constructor(e,t,s,i=!1){this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=i?new QT:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new t3,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:r=!1}={}){return new xx({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return an(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:t=e.canvas,viewport:s,intent:i="display",annotationMode:r=kc.ENABLE,transform:o=null,background:c=null,optionalContentConfigPromise:u=null,annotationCanvasMap:h=null,pageColors:f=null,printAnnotationStorage:g=null,isEditing:x=!1,recordOperations:y=!1,operationsFilter:N=null}){this._stats?.time("Overall");const j=this._transport.getRenderingIntent(i,r,g,x),{renderingIntent:E,cacheKey:A}=j;this.#e=!1,u||=this._transport.getOptionalContentConfig(E);let R=this._intentStates.get(A);R||(R=Object.create(null),this._intentStates.set(A,R)),R.streamReaderCancelTimeout&&(clearTimeout(R.streamReaderCancelTimeout),R.streamReaderCancelTimeout=null);const M=!!(E&lo.PRINT);R.displayReadyCapability||(R.displayReadyCapability=Promise.withResolvers(),R.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(j));const L=!!(this._pdfBug&&globalThis.StepperManager?.enabled),z=!this.recordedBBoxes&&(y||L),W=U=>{if(R.renderTasks.delete(I),z){const Z=I.gfx?.dependencyTracker.take();Z&&(I.stepper&&I.stepper.setOperatorBBoxes(Z,I.gfx.dependencyTracker.takeDebugMetadata()),y&&(this.recordedBBoxes=Z))}M&&(this.#e=!0),this.#t(),U?(I.capability.reject(U),this._abortOperatorList({intentState:R,reason:U instanceof Error?U:new Error(U)})):I.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},I=new km({callback:W,params:{canvas:t,canvasContext:e,dependencyTracker:z?new R$(t,R.operatorList.length,L):null,viewport:s,transform:o,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:R.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!M,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,operationsFilter:N});(R.renderTasks||=new Set).add(I);const Y=I.task;return Promise.all([R.displayReadyCapability.promise,u]).then(([U,Z])=>{if(this.destroyed){W();return}if(this._stats?.time("Rendering"),!(Z.renderingIntent&E))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");I.initializeGraphics({transparency:U,optionalContentConfig:Z}),I.operatorListChanged()}).catch(W),Y}getOperatorList({intent:e="display",annotationMode:t=kc.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){function r(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(u))}const o=this._transport.getRenderingIntent(e,t,s,i,!0);let c=this._intentStates.get(o.cacheKey);c||(c=Object.create(null),this._intentStates.set(o.cacheKey,c));let u;return c.opListReadCapability||(u=Object.create(null),u.operatorListChanged=r,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||=new Set).add(u),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>L0.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,i){function r(){o.read().then(function({value:u,done:h}){if(h){s(c);return}c.lang??=u.lang,Object.assign(c.styles,u.styles),c.items.push(...u.items),r()},i)}const o=t.getReader(),c={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const t=this.#t();return e&&t&&(this._stats&&=new QT),t}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){const s=this._intentStates.get(t);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let s=0,i=e.length;s<i;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:i}){const{map:r,transfer:o}=s,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:i},o).getReader(),h=this._intentStates.get(t);h.streamReader=u;const f=()=>{u.read().then(({value:g,done:x})=>{if(x){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,h),f())},g=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const x of h.renderTasks)x.operatorListChanged();this.#t()}if(h.displayReadyCapability)h.displayReadyCapability.reject(g);else if(h.opListReadCapability)h.opListReadCapability.reject(g);else throw g}})};f()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof zv){let i=hee;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new Md(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}var Ju,Cl,Nd,uf,Ky,hf,ff,sr,fy,n3,s3,qp,Vm,my;const Rs=class Rs{constructor({name:e=null,port:t=null,verbosity:s=n$()}={}){yc(this,sr);yc(this,Ju,Promise.withResolvers());yc(this,Cl,null);yc(this,Nd,null);yc(this,uf,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(Ds(Rs,ff).has(t))throw new Error("Cannot use more than one PDFWorker per port.");Ds(Rs,ff).set(t,this),vc(this,sr,n3).call(this,t)}else vc(this,sr,s3).call(this)}get promise(){return Ds(this,Ju).promise}get port(){return Ds(this,Nd)}get messageHandler(){return Ds(this,Cl)}destroy(){this.destroyed=!0,Ds(this,uf)?.terminate(),vr(this,uf,null),Ds(Rs,ff).delete(Ds(this,Nd)),vr(this,Nd,null),Ds(this,Cl)?.destroy(),vr(this,Cl,null)}static create(e){const t=Ds(this,ff).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Rs(e)}static get workerSrc(){if(kl.workerSrc)return kl.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return an(this,"_setupFakeWorkerGlobal",(async()=>Ds(this,Vm,my)?Ds(this,Vm,my):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ju=new WeakMap,Cl=new WeakMap,Nd=new WeakMap,uf=new WeakMap,Ky=new WeakMap,hf=new WeakMap,ff=new WeakMap,sr=new WeakSet,fy=function(){Ds(this,Ju).resolve(),Ds(this,Cl).send("configure",{verbosity:this.verbosity})},n3=function(e){vr(this,Nd,e),vr(this,Cl,new Jp("main","worker",e)),Ds(this,Cl).on("ready",()=>{}),vc(this,sr,fy).call(this)},s3=function(){if(Ds(Rs,hf)||Ds(Rs,Vm,my)){vc(this,sr,qp).call(this);return}let{workerSrc:e}=Rs;try{Rs._isSameOrigin(window.location,e)||(e=Rs._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new Jp("main","worker",t),i=()=>{r.abort(),s.destroy(),t.terminate(),this.destroyed?Ds(this,Ju).reject(new Error("Worker was destroyed")):vc(this,sr,qp).call(this)},r=new AbortController;t.addEventListener("error",()=>{Ds(this,uf)||i()},{signal:r.signal}),s.on("test",c=>{if(r.abort(),this.destroyed||!c){i();return}vr(this,Cl,s),vr(this,Nd,t),vr(this,uf,t),vc(this,sr,fy).call(this)}),s.on("ready",c=>{if(r.abort(),this.destroyed){i();return}try{o()}catch{vc(this,sr,qp).call(this)}});const o=()=>{const c=new Uint8Array;s.send("test",c,[c.buffer])};o();return}catch{Fv("The worker has been disabled.")}vc(this,sr,qp).call(this)},qp=function(){Ds(Rs,hf)||($t("Setting up fake worker."),vr(Rs,hf,!0)),Rs._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){Ds(this,Ju).reject(new Error("Worker was destroyed"));return}const t=new N$;vr(this,Nd,t);const s=`fake${PC(Rs,Ky)._++}`,i=new Jp(s+"_worker",s,t);e.setup(i,t),vr(this,Cl,new Jp(s,s+"_worker",t)),vc(this,sr,fy).call(this)}).catch(e=>{Ds(this,Ju).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Vm=new WeakSet,my=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},yc(Rs,Vm),yc(Rs,Ky,0),yc(Rs,hf,!1),yc(Rs,ff,new WeakMap),er&&(vr(Rs,hf,!0),kl.workerSrc||="./pdf.worker.mjs"),Rs._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!s?.origin||s.origin==="null")return!1;const i=new URL(t,s);return s.origin===i.origin},Rs._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Rs.fromPort=e=>{if(u$("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Rs.create(e)};let eg=Rs;class gee{#e=new Map;#t=new Map;#s=new Map;#n=new Map;#r=null;constructor(e,t,s,i,r,o){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new t3,this.fontLoader=new b$({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}#i(e,t=null){const s=this.#e.get(e);if(s)return s;const i=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,i),i}get annotationStorage(){return an(this,"annotationStorage",new WN)}getRenderingIntent(e,t=kc.ENABLE,s=null,i=!1,r=!1){let o=lo.DISPLAY,c=q2;switch(e){case"any":o=lo.ANY;break;case"display":break;case"print":o=lo.PRINT;break;default:$t(`getRenderingIntent - invalid intent: ${e}`)}const u=o&lo.PRINT&&s instanceof UP?s:this.annotationStorage;switch(t){case kc.DISABLE:o+=lo.ANNOTATIONS_DISABLE;break;case kc.ENABLE:break;case kc.ENABLE_FORMS:o+=lo.ANNOTATIONS_FORMS;break;case kc.ENABLE_STORAGE:o+=lo.ANNOTATIONS_STORAGE,c=u.serializable;break;default:$t(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(o+=lo.IS_EDITING),r&&(o+=lo.OPLIST);const{ids:h,hash:f}=u.modifiedIds,g=[o,c.hash,f];return{renderingIntent:o,cacheKey:g.join("_"),annotationStorageSerializable:c,modifiedIds:h}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of this.#t.values())e.push(s._destroy());this.#t.clear(),this.#s.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),F0.cleanup(),this._networkStream?.cancelAllRequests(new Md("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,i)=>{Cn(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){i.close();return}Cn(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:o}=this._fullReader;return(!i||!r)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=c=>{t.onProgress?.({loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:o}}),e.on("GetRangeReader",(s,i)=>{Cn(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:o,done:c}){if(c){i.close();return}Cn(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{r.cancel(o),i.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new fee(s,this))}),e.on("DocException",s=>{t._capability.reject(Sr(s))}),e.on("PasswordRequest",s=>{this.#r=Promise.withResolvers();try{if(!t.onPassword)throw Sr(s);const i=r=>{r instanceof Error?this.#r.reject(r):this.#r.resolve({password:r})};t.onPassword(i,s.code)}catch(i){this.#r.reject(i)}return this.#r.promise}),e.on("DataLoaded",s=>{t.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;this.#t.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,i,r])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":if("error"in r){const f=r.error;$t(`Error during font loading: ${f}`),this.commonObjs.resolve(s,f);break}const o=new rs(r),c=this._params.pdfBug&&globalThis.FontInspector?.enabled?(f,g)=>globalThis.FontInspector.fontAdded(f,g):null,u=new y$(o,c,r.extra,r.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(s,u)});break;case"CopyLocalImage":const{imageRef:h}=r;Cn(h,"The imageRef must be defined.");for(const f of this.#t.values())for(const[,g]of f.objs)if(g?.ref===h)return g.dataLen?(this.commonObjs.resolve(s,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([s,i,r,o])=>{if(this.destroyed)return;const c=this.#t.get(i);if(!c.objs.has(s)){if(c._intentStates.size===0){o?.bitmap?.close();return}switch(r){case"Image":case"Pattern":c.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",s=>{this.destroyed||t.onProgress?.({loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[s.type];if(!i)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&$t("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=this.#s.get(t);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&this.#n.set(r.refStr,e);const o=new mee(t,r,this,this._params.pdfBug);return this.#t.set(t,o),o});return this.#s.set(t,i),i}getPageIndex(e){return $2(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#i("GetFieldObjects")}hasJSActions(){return this.#i("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return this.#i("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#i("GetOptionalContentConfig").then(t=>new X$(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new G$(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),F0.cleanup()}}cachedPageNumber(e){if(!$2(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#n.get(t)??null}}class pee{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class km{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:s,commonObjs:i,annotationCanvasMap:r,operatorList:o,pageIndex:c,canvasFactory:u,filterFactory:h,useRequestAnimationFrame:f=!1,pdfBug:g=!1,pageColors:x=null,enableHWA:y=!1,operationsFilter:N=null}){this.callback=e,this.params=t,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=c,this.canvasFactory=u,this.filterFactory=h,this._pdfBug=g,this.pageColors=x,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new pee(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=y,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=N}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(km.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");km.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:i,background:r,dependencyTracker:o}=this.params,c=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new zm(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:i,viewport:s,transparency:e,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),km.#t.delete(this._canvas),e||=new zv(`Rendering cancelled, page ${this._pageIndex+1}`,t),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),km.#t.delete(this._canvas),this.callback())))}}const i3="5.4.296",a3="f56dc8601";class co{#e=null;#t=null;#s;#n=null;#r=!1;#i=!1;#a=null;#o;#c=null;#l=null;static#h=null;static get _keyboardManager(){return an(this,"_keyboardManager",new yx([[["Escape","mac+Escape"],co.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],co.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],co.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],co.prototype._moveToPrevious],[["Home","mac+Home"],co.prototype._moveToBeginning],[["End","mac+End"],co.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#i=!1,this.#a=e):this.#i=!0,this.#l=e?._uiManager||t,this.#o=this.#l._eventBus,this.#s=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",co.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#a&&(e.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const t=this.#l._signal;e.addEventListener("click",this.#m.bind(this),{signal:t}),e.addEventListener("keydown",this.#p.bind(this),{signal:t});const s=this.#t=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#s,e.append(s),e}renderMainDropdown(){const e=this.#n=this.#u();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#u(){const e=document.createElement("div"),t=this.#l._signal;e.addEventListener("contextmenu",go,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(e.id=`${this.#a.id}_colorpicker_dropdown`);for(const[s,i]of this.#l.highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=s,r.setAttribute("data-l10n-id",co.#h[s]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=i,r.ariaSelected=i===this.#s,r.addEventListener("click",this.#f.bind(this,i),{signal:t}),e.append(r)}return e.addEventListener("keydown",this.#p.bind(this),{signal:t}),e}#f(e,t){t.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:vn.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#m(e);return}const t=e.target.getAttribute("data-color");t&&this.#f(t,e)}_moveToNext(e){if(!this.#g){this.#m(e);return}if(e.target===this.#e){this.#n.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstChild||e.target===this.#e){this.#g&&this._hideDropdownFromKeyboard();return}this.#g||this.#m(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#g){this.#m(e);return}this.#n.firstChild?.focus()}_moveToEnd(e){if(!this.#g){this.#m(e);return}this.#n.lastChild?.focus()}#p(e){co._keyboardManager.exec(this,e)}#m(e){if(this.#g){this.hideDropdown();return}if(this.#r=e.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#d.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#e.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const t=this.#n=this.#u();this.#e.append(t)}#d(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#g(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#i){if(!this.#g){this.#a?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const t=this.#l.highlightColors.values();for(const s of this.#n.children)s.ariaSelected=t.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class z0{#e=null;#t=null;#s=null;static#n=null;constructor(e){this.#t=e,this.#s=e._uiManager,z0.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:t,colorValue:s}=this.#t,i=this.#e=document.createElement("input");return i.type="color",i.value=s||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",z0.#n[e]),i.addEventListener("input",()=>{this.#s.updateParams(t,i.value)},{signal:this.#s._signal}),i}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function bk(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Bp(n){return Math.max(0,Math.min(255,255*n))}class yk{static CMYK_G([e,t,s,i]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Bp(e),[e,e,e]}static G_HTML([e]){const t=bk(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(Bp)}static RGB_HTML(e){return`#${e.map(bk).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,s+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,s,i]){return[Bp(1-Math.min(1,e+i)),Bp(1-Math.min(1,s+i)),Bp(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const i=1-e,r=1-t,o=1-s,c=Math.min(i,r,o);return["CMYK",i,r,o,c]}}class xee{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){hs("Abstract method `_createSVG` called.")}}class I0 extends xee{_createSVG(e){return document.createElementNS(wd,e)}}const bee=9,Af=new WeakSet,yee=new Date().getTimezoneOffset()*60*1e3;class vk{static create(e){switch(e.data.annotationType){case di.LINK:return new JN(e);case di.TEXT:return new wee(e);case di.WIDGET:switch(e.data.fieldType){case"Tx":return new See(e);case"Btn":return e.data.radioButton?new r3(e):e.data.checkBox?new jee(e):new Cee(e);case"Ch":return new Aee(e);case"Sig":return new Nee(e)}return new Of(e);case di.POPUP:return new nS(e);case di.FREETEXT:return new o3(e);case di.LINE:return new _ee(e);case di.SQUARE:return new Tee(e);case di.CIRCLE:return new kee(e);case di.POLYLINE:return new l3(e);case di.CARET:return new Ree(e);case di.INK:return new qN(e);case di.POLYGON:return new Dee(e);case di.HIGHLIGHT:return new c3(e);case di.UNDERLINE:return new Mee(e);case di.SQUIGGLY:return new Pee(e);case di.STRIKEOUT:return new Oee(e);case di.STAMP:return new d3(e);case di.FILEATTACHMENT:return new Lee(e);default:return new Us(e)}}}class Us{#e=null;#t=!1;#s=null;constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Us._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,t=this.annotationStorage?.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:s,rect:i}=this.data;let r=-1/0,o=-1/0;if(t?.length>=8){for(let c=0;c<t.length;c+=8)t[c+1]>o?(o=t[c+1],r=t[c+2]):t[c+1]===o&&(r=Math.max(r,t[c+2]));return[r,o]}if(s?.length>=1){for(const c of s)for(let u=0,h=c.length;u<h;u+=2)c[u+1]>o?(o=c[u+1],r=c[u]):c[u+1]===o&&(r=Math.max(r,c[u]));if(r!==1/0)return[r,o]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:o}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-r)/s,e[1]=100*(e[1]-o)/i,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${P0}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:t}=this,s={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:s})||this.annotationStorage.setValue(`${P0}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#s?.popup||this.popup)?.remove(),this.#s=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:t,popup:s}=e;t&&this.#n(t);let i=this.#s?.popup||this.popup;!i&&s?.text&&(this._createPopup(s),i=this.#s.popup),i&&(i.updateEdited(e),s?.deleted&&(i.remove(),this.#s=null,this.popup=null))}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#s?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:t},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:c,pageY:u}}}}=this;s?.splice(0,4,...e),t.left=`${100*(e[0]-c)/r}%`,t.top=`${100*(o-e[3]+u)/o}%`,i===0?(t.width=`${100*(e[2]-e[0])/r}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(i)}_createContainer(e){const{data:t,parent:{page:s,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),!(this instanceof Of)&&!(this instanceof JN)&&(r.tabIndex=0);const{style:o}=r;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof nS){const{rotation:j}=t;return!t.hasOwnCanvas&&j!==0&&this.setRotation(j,r),r}const{width:c,height:u}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const j=t.borderStyle.horizontalCornerRadius,E=t.borderStyle.verticalCornerRadius;if(j>0||E>0){const R=`calc(${j}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;o.borderRadius=R}else if(this instanceof r3){const R=`calc(${c}px * var(--total-scale-factor)) / calc(${u}px * var(--total-scale-factor))`;o.borderRadius=R}switch(t.borderStyle.style){case Sm.SOLID:o.borderStyle="solid";break;case Sm.DASHED:o.borderStyle="dashed";break;case Sm.BEVELED:$t("Unimplemented border style: beveled");break;case Sm.INSET:$t("Unimplemented border style: inset");break;case Sm.UNDERLINE:o.borderBottomStyle="solid";break}const A=t.borderColor||null;A?(this.#t=!0,o.borderColor=bt.makeHexColor(A[0]|0,A[1]|0,A[2]|0)):o.borderWidth=0}const h=bt.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:f,pageHeight:g,pageX:x,pageY:y}=i.rawDims;o.left=`${100*(h[0]-x)/f}%`,o.top=`${100*(h[1]-y)/g}%`;const{rotation:N}=t;return t.hasOwnCanvas||N===0?(o.width=`${100*c/f}%`,o.height=`${100*u/g}%`):this.setRotation(N,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims;let{width:r,height:o}=this;e%180!==0&&([r,o]=[o,r]),t.style.width=`${100*r/s}%`,t.style.height=`${100*o/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,i)=>{const r=i.detail[t],o=r[0],c=r.slice(1);i.target.style[s]=yk[`${o}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[s]:yk[`${o}_rgb`](c)})};return an(this,"_commonActions",{display:t=>{const{display:s}=t.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const i of Object.keys(t.detail))(e[i]||s[i])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[i,r]of Object.entries(t)){const o=s[i];if(o){const c={detail:{[i]:r},target:e};o(c),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,i,r]=this.data.rect.map(j=>Math.fround(j));if(e.length===8){const[j,E,A,R]=e.subarray(2,6);if(i===j&&r===E&&t===A&&s===R)return}const{style:o}=this.container;let c;if(this.#t){const{borderColor:j,borderWidth:E}=o;o.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${j}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const u=i-t,h=r-s,{svgFactory:f}=this,g=f.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0),g.role="none";const x=f.createElement("defs");g.append(x);const y=f.createElement("clipPath"),N=`clippath_${this.data.id}`;y.setAttribute("id",N),y.setAttribute("clipPathUnits","objectBoundingBox"),x.append(y);for(let j=2,E=e.length;j<E;j+=8){const A=e[j],R=e[j+1],M=e[j+2],L=e[j+3],z=f.createElement("rect"),W=(M-t)/u,I=(r-R)/h,Y=(A-M)/u,U=(R-L)/h;z.setAttribute("x",W),z.setAttribute("y",I),z.setAttribute("width",Y),z.setAttribute("height",U),y.append(z),c?.push(`<rect vector-effect="non-scaling-stroke" x="${W}" y="${I}" width="${Y}" height="${U}"/>`)}this.#t&&(c.push("</g></svg>')"),o.backgroundImage=c.join("")),this.container.append(g),this.container.style.clipPath=`url(#${N})`}_createPopup(e=null){const{data:t}=this;let s,i;e?(s={str:e.text},i=e.date):(s=t.contentsObj,i=t.modificationDate);const r=this.#s=new nS({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:s,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(r.render())}get hasPopupElement(){return!!(this.#s||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#s}render(){hs("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:r,id:o,exportValues:c}of i){if(r===-1||o===t)continue;const u=typeof c=="string"?c:null,h=document.querySelector(`[data-element-id="${o}"]`);if(h&&!Af.has(h)){$t(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:u,domElement:h})}return s}for(const i of document.getElementsByName(e)){const{exportValue:r}=i,o=i.getAttribute("data-element-id");o!==t&&Af.has(i)&&s.push({id:o,exportValue:r,domElement:i})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class vee extends Us{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class JN extends Us{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(s,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(s,e.action,e.overlaidText),i=!0):e.attachment?(this.#t(s,e.attachment,e.overlaidText,e.attachmentDest),i=!0):e.setOCGState?(this.#s(s,e.setOCGState,e.overlaidText),i=!0):e.dest?(this._bindLink(s,e.dest,e.overlaidText),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),i=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(s),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t,s=""){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e(),s&&(e.title=s)}_bindNamedAction(e,t,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),s&&(e.title=s),this.#e()}#t(e,t,s="",i=null){e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:s&&(e.title=s),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,i),!1),this.#e()}#s(e,t,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),s&&(e.title=s),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const r=s.get(i);r&&(e[r]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1))}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){$t('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{s?.();const{fields:i,refs:r,include:o}=t,c=[];if(i.length!==0||r.length!==0){const f=new Set(r);for(const g of i){const x=this._fieldObjects[g]||[];for(const{id:y}of x)f.add(y)}for(const g of Object.values(this._fieldObjects))for(const x of g)f.has(x.id)===o&&c.push(x)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:g}=f;switch(h.push(g),f.type){case"text":{const y=f.defaultValue||"";u.setValue(g,{value:y});break}case"checkbox":case"radiobutton":{const y=f.defaultValue===f.exportValues;u.setValue(g,{value:y});break}case"combobox":case"listbox":{const y=f.defaultValue||"";u.setValue(g,{value:y});break}default:continue}const x=document.querySelector(`[data-element-id="${g}"]`);if(x){if(!Af.has(x)){$t(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;x.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}}),!1}}}class wee extends Us{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Of extends Us{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return oa.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,i,r){s.includes("mouse")?e.addEventListener(s,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(s,o=>{if(s==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}r&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o)}})})}_setEventListeners(e,t,s,i){for(const[r,o]of s)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,r,o,i),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":bt.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||bee,r=e.style;let o;const c=2,u=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-c),f=Math.round(h/(Uw*i))||1,g=h/f;o=Math.min(i,u(g/Uw))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-c);o=Math.min(i,u(h/Uw))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=bt.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class See extends Of{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,i){const r=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=s),r.setValue(o.id,{[i]:s})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const i=e.getValue(t,{value:this.data.fieldValue});let r=i.value||"";const o=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;o&&r.length>o&&(r=r.slice(0,o));let c=i.formattedValue||this.data.textContent?.join(`
`)||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const u={userValue:r,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=c??r,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",c??r),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Af.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:h,datetimeType:f,timeStep:g}=this.data,x=!!f&&this.enableScripting;h&&(s.title=h),this._setRequired(s,this.data.required),o&&(s.maxLength=o),s.addEventListener("input",N=>{e.setValue(t,{value:N.target.value}),this.setPropertyOnSiblings(s,"value",N.target.value,"value"),u.formattedValue=null}),s.addEventListener("resetform",N=>{const j=this.data.defaultFieldValue??"";s.value=u.userValue=j,u.formattedValue=null});let y=N=>{const{formattedValue:j}=u;j!=null&&(N.target.value=j),N.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",j=>{if(u.focused)return;const{target:E}=j;if(x&&(E.type=f,g&&(E.step=g)),u.userValue){const A=u.userValue;if(x)if(f==="time"){const R=new Date(A),M=[R.getHours(),R.getMinutes(),R.getSeconds()];E.value=M.map(L=>L.toString().padStart(2,"0")).join(":")}else E.value=new Date(A-yee).toISOString().split(f==="date"?"T":".",1)[0];else E.value=A}u.lastCommittedValue=E.value,u.commitKey=1,this.data.actions?.Focus||(u.focused=!0)}),s.addEventListener("updatefromsandbox",j=>{this.showElementAndHideCanvas(j.target);const E={value(A){u.userValue=A.detail.value??"",x||e.setValue(t,{value:u.userValue.toString()}),A.target.value=u.userValue},formattedValue(A){const{formattedValue:R}=A.detail;u.formattedValue=R,R!=null&&A.target!==document.activeElement&&(A.target.value=R);const M={formattedValue:R};x&&(M.value=R),e.setValue(t,M)},selRange(A){A.target.setSelectionRange(...A.detail.selRange)},charLimit:A=>{const{charLimit:R}=A.detail,{target:M}=A;if(R===0){M.removeAttribute("maxLength");return}M.setAttribute("maxLength",R);let L=u.userValue;!L||L.length<=R||(L=L.slice(0,R),M.value=u.userValue=L,e.setValue(t,{value:L}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:L,willCommit:!0,commitKey:1,selStart:M.selectionStart,selEnd:M.selectionEnd}}))}};this._dispatchEventFromSandbox(E,j)}),s.addEventListener("keydown",j=>{u.commitKey=1;let E=-1;if(j.key==="Escape"?E=0:j.key==="Enter"&&!this.data.multiLine?E=2:j.key==="Tab"&&(u.commitKey=3),E===-1)return;const{value:A}=j.target;u.lastCommittedValue!==A&&(u.lastCommittedValue=A,u.userValue=A,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:E,selStart:j.target.selectionStart,selEnd:j.target.selectionEnd}}))});const N=y;y=null,s.addEventListener("blur",j=>{if(!u.focused||!j.relatedTarget)return;this.data.actions?.Blur||(u.focused=!1);const{target:E}=j;let{value:A}=E;if(x){if(A&&f==="time"){const R=A.split(":").map(M=>parseInt(M,10));A=new Date(2e3,0,1,R[0],R[1],R[2]||0).valueOf(),E.step=""}else A.includes("T")||(A=`${A}T00:00`),A=new Date(A).valueOf();E.type="text"}u.userValue=A,u.lastCommittedValue!==A&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:u.commitKey,selStart:j.target.selectionStart,selEnd:j.target.selectionEnd}}),N(j)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",j=>{u.lastCommittedValue=null;const{data:E,target:A}=j,{value:R,selectionStart:M,selectionEnd:L}=A;let z=M,W=L;switch(j.inputType){case"deleteWordBackward":{const I=R.substring(0,M).match(/\w*[^\w]*$/);I&&(z-=I[0].length);break}case"deleteWordForward":{const I=R.substring(M).match(/^[^\w]*\w*/);I&&(W+=I[0].length);break}case"deleteContentBackward":M===L&&(z-=1);break;case"deleteContentForward":M===L&&(W+=1);break}j.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:R,change:E||"",willCommit:!1,selStart:z,selEnd:W}})}),this._setEventListeners(s,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],j=>j.target.value)}if(y&&s.addEventListener("blur",y),this.data.comb){const j=(this.data.rect[2]-this.data.rect[0])/o;s.classList.add("comb"),s.style.letterSpacing=`calc(${j}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Nee extends Of{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class jee extends Of{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Af.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=0,r.addEventListener("change",o=>{const{name:c,checked:u}=o.target;for(const h of this._getElementsByName(c,s)){const f=u&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}e.setValue(s,{value:u})}),r.addEventListener("resetform",o=>{const c=t.defaultFieldValue||"Off";o.target.checked=c===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const c={value(u){u.target.checked=u.detail.value!=="Off",e.setValue(s,{value:u.target.checked})}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class r3 extends Of{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(s,{value:i})),i)for(const o of this._getElementsByName(t.fieldName,s))e.setValue(o.id,{value:!1});const r=document.createElement("input");if(Af.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",o=>{const{name:c,checked:u}=o.target;for(const h of this._getElementsByName(c,s))e.setValue(h.id,{value:!1});e.setValue(s,{value:u})}),r.addEventListener("resetform",o=>{const c=t.defaultFieldValue;o.target.checked=c!=null&&c===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;r.addEventListener("updatefromsandbox",c=>{const u={value:h=>{const f=o===h.detail.value;for(const g of this._getElementsByName(h.target.name)){const x=f&&g.id===s;g.domElement&&(g.domElement.checked=x),e.setValue(g.id,{value:x})}}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Cee extends JN{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class Aee extends Of{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");Af.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",f=>{const g=this.data.defaultFieldValue;for(const x of i.options)x.selected=x.value===g});for(const f of this.data.options){const g=document.createElement("option");g.textContent=f.displayValue,g.value=f.exportValue,s.value.includes(f.exportValue)&&(g.setAttribute("selected",!0),r=!1),i.append(g)}let o=null;if(r){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),i.prepend(f),o=()=>{f.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const c=f=>{const g=f?"value":"textContent",{options:x,multiple:y}=i;return y?Array.prototype.filter.call(x,N=>N.selected).map(N=>N[g]):x.selectedIndex===-1?null:x[x.selectedIndex][g]};let u=c(!1);const h=f=>{const g=f.target.options;return Array.prototype.map.call(g,x=>({displayValue:x.textContent,exportValue:x.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",f=>{const g={value(x){o?.();const y=x.detail.value,N=new Set(Array.isArray(y)?y:[y]);for(const j of i.options)j.selected=N.has(j.value);e.setValue(t,{value:c(!0)}),u=c(!1)},multipleSelection(x){i.multiple=!0},remove(x){const y=i.options,N=x.detail.remove;y[N].selected=!1,i.remove(N),y.length>0&&Array.prototype.findIndex.call(y,E=>E.selected)===-1&&(y[0].selected=!0),e.setValue(t,{value:c(!0),items:h(x)}),u=c(!1)},clear(x){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),u=c(!1)},insert(x){const{index:y,displayValue:N,exportValue:j}=x.detail.insert,E=i.children[y],A=document.createElement("option");A.textContent=N,A.value=j,E?E.before(A):i.append(A),e.setValue(t,{value:c(!0),items:h(x)}),u=c(!1)},items(x){const{items:y}=x.detail;for(;i.length!==0;)i.remove(0);for(const N of y){const{displayValue:j,exportValue:E}=N,A=document.createElement("option");A.textContent=j,A.value=E,i.append(A)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:c(!0),items:h(x)}),u=c(!1)},indices(x){const y=new Set(x.detail.indices);for(const N of x.target.options)N.selected=y.has(N.index);e.setValue(t,{value:c(!0)}),u=c(!1)},editable(x){x.target.disabled=!x.detail.editable}};this._dispatchEventFromSandbox(g,f)}),i.addEventListener("input",f=>{const g=c(!0),x=c(!1);e.setValue(t,{value:g}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:u,change:x,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):i.addEventListener("input",function(f){e.setValue(t,{value:c(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class nS extends Us{constructor(e){const{data:t,elements:s,parent:i}=e,r=!!i._commentManager;if(super(e,{isRenderable:!r&&Us._hasPopupData(t)}),this.elements=s,r&&Us._hasPopupData(t)){const o=this.popup=this.#e();for(const c of s)c.popup=o}else this.popup=null}#e(){return new Eee({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=this.#e(),s=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",s.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(i=>`${IN}${i}`).join(",")),this.container}}class Eee{#e=null;#t=this.#W.bind(this);#s=this.#I.bind(this);#n=this.#M.bind(this);#r=this.#w.bind(this);#i=null;#a=null;#o=null;#c=null;#l=null;#h=null;#u=null;#f=!1;#p=null;#m=null;#d=null;#g=null;#x=null;#y=null;#b=null;#C=null;#N=null;#v=null;#E=!1;#S=null;#j=null;constructor({container:e,color:t,elements:s,titleObj:i,modificationDate:r,contentsObj:o,richText:c,parent:u,rect:h,parentRect:f,open:g,commentManager:x=null}){this.#a=e,this.#N=i,this.#o=o,this.#C=c,this.#h=u,this.#i=t,this.#b=h,this.#u=f,this.#l=s,this.#e=x,this.#S=s[0],this.#c=Gy.toDateObject(r),this.trigger=s.flatMap(y=>y.getElementsToTriggerPopup()),x?this.renderCommentButton():(this.#k(),this.#a.hidden=!0,g&&this.#w())}#k(){if(this.#m)return;this.#m=new AbortController;const{signal:e}=this.#m;for(const t of this.trigger)t.addEventListener("click",this.#r,{signal:e}),t.addEventListener("pointerenter",this.#n,{signal:e}),t.addEventListener("pointerleave",this.#s,{signal:e}),t.classList.add("popupTriggerArea");for(const t of this.#l)t.container?.addEventListener("keydown",this.#t,{signal:e})}#_(){const e=this.#l.find(t=>t.hasCommentButton);e&&(this.#x=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#g||(this.#x||this.#_(),!this.#x))return;const{signal:e}=this.#m=new AbortController,t=!!this.#S.extraPopupElement,s=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!t)},i=()=>{this.#e.toggleCommentPopup(this,!1,!0,!t)},r=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(t){this.#g=this.#S.container;for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",this.#t,{signal:e}),o.addEventListener("click",s,{signal:e}),o.addEventListener("pointerenter",i,{signal:e}),o.addEventListener("pointerleave",r,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=this.#g=document.createElement("button");o.className="annotationCommentButton";const c=this.#S.container;o.style.zIndex=c.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#F(),this.#T(),o.addEventListener("keydown",this.#t,{signal:e}),o.addEventListener("click",s,{signal:e}),o.addEventListener("pointerenter",i,{signal:e}),o.addEventListener("pointerleave",r,{signal:e}),c.after(o)}}#T(){if(this.#S.extraPopupElement&&!this.#S.editor)return;this.renderCommentButton();const[e,t]=this.#x,{style:s}=this.#g;s.left=`calc(${e}%)`,s.top=`calc(${t}% - var(--comment-button-dim))`}#F(){this.#S.extraPopupElement||(this.renderCommentButton(),this.#g.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:t}=this.#S.commentData;return e?this.#h._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{this.#g?.focus()},0)}getData(){const{richText:e,color:t,opacity:s,creationDate:i,modificationDate:r}=this.#S.commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:s,creationDate:i,modificationDate:r}}get elementBeforePopup(){return this.#g}get comment(){return this.#j||=this.#S.commentText,this.#j}set comment(e){e!==this.comment&&(this.#S.commentText=this.#j=e)}get parentBoundingClientRect(){return this.#S.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){this.#g&&(this.#g.classList.toggle("selected",e),this.#g.ariaExpanded=t)}setSelectedCommentButton(e){this.#g.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#y)return this.#y;const{x:e,y:t,height:s}=this.#g.getBoundingClientRect(),{x:i,y:r,width:o,height:c}=this.#S.layer.getBoundingClientRect();return[(e-i)/o,(t+s-r)/c]}set commentPopupPosition(e){this.#y=e}hasDefaultPopupPosition(){return this.#y===null}get commentButtonPosition(){return this.#x}get commentButtonWidth(){return this.#g.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,s]=this.#y||this.commentButtonPosition.map(h=>h/100),i=this.parentBoundingClientRect,{x:r,y:o,width:c,height:u}=i;this.#e.showDialog(null,this,r+t*c,o+s*u,{...e,parentDimensions:i})}render(){if(this.#p)return;const e=this.#p=document.createElement("div");if(e.className="popup",this.#i){const s=e.style.outlineColor=bt.makeHexColor(...this.#i);e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const t=document.createElement("span");if(t.className="header",this.#N?.str){const s=document.createElement("span");s.className="title",t.append(s),{dir:s.dir,str:s.textContent}=this.#N}if(e.append(t),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),t.append(s)}HN({html:this.#R||this.#o.str,dir:this.#o?.dir,className:"popupContent"},e),this.#a.append(e)}get#R(){const e=this.#C,t=this.#o;return e?.str&&(!t?.str||t.str===e.str)&&this.#C.html||null}get#P(){return this.#R?.attributes?.style?.fontSize||0}get#z(){return this.#R?.attributes?.style?.color||null}#O(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:this.#z,fontSize:this.#P?`calc(${this.#P}px * var(--total-scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:i});return s}#W(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:e,popup:t,deleted:s}){if(this.#e){s?(this.remove(),this.#j=null):t&&(t.deleted?this.remove():(this.#F(),this.#j=t.text)),e&&(this.#x=null,this.#_(),this.#T());return}if(s||t?.deleted){this.remove();return}this.#k(),this.#v||={contentsObj:this.#o,richText:this.#C},e&&(this.#d=null),t&&t.text&&(this.#C=this.#O(t.text),this.#c=Gy.toDateObject(t.date),this.#o=null),this.#p?.remove(),this.#p=null}resetEdited(){this.#v&&({contentsObj:this.#o,richText:this.#C}=this.#v,this.#v=null,this.#p?.remove(),this.#p=null,this.#d=null)}remove(){if(this.#m?.abort(),this.#m=null,this.#p?.remove(),this.#p=null,this.#E=!1,this.#f=!1,this.#g?.remove(),this.#g=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#A(){if(this.#d!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:i,pageY:r}}}=this.#h;let o=!!this.#u,c=o?this.#u:this.#b;for(const N of this.#l)if(!c||bt.intersect(N.data.rect,c)!==null){c=N.data.rect,o=!0;break}const u=bt.normalizeRect([c[0],e[3]-c[1]+e[1],c[2],e[3]-c[3]+e[1]]),f=o?c[2]-c[0]+5:0,g=u[0]+f,x=u[1];this.#d=[100*(g-i)/t,100*(x-r)/s];const{style:y}=this.#a;y.left=`${this.#d[0]}%`,y.top=`${this.#d[1]}%`}#w(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#M(),this.#a.addEventListener("click",this.#r),this.#a.addEventListener("keydown",this.#t)):(this.#I(),this.#a.removeEventListener("click",this.#r),this.#a.removeEventListener("keydown",this.#t))}#M(){this.#p||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#A(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#I(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#E=this.isVisible,this.#E&&(this.#a.hidden=!0)}maybeShow(){this.#e||(this.#k(),this.#E&&(this.#p||this.#M(),this.#E=!1,this.#a.hidden=!1))}get isVisible(){return this.#e?!1:this.#a.hidden===!1}}class o3 extends Us{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Jt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class _ee extends Us{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:s}=this,i=this.svgFactory.create(t,s,!0),r=this.#e=this.svgFactory.createElement("svg:line");return r.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),r.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),r.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),r.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),r.setAttribute("stroke-width",e.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Tee extends Us{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:s}=this,i=this.svgFactory.create(t,s,!0),r=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",r/2),o.setAttribute("y",r/2),o.setAttribute("width",t-r),o.setAttribute("height",s-r),o.setAttribute("stroke-width",r||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class kee extends Us{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:s}=this,i=this.svgFactory.create(t,s,!0),r=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",t/2),o.setAttribute("cy",s/2),o.setAttribute("rx",t/2-r/2),o.setAttribute("ry",s/2-r/2),o.setAttribute("stroke-width",r||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class l3 extends Us{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:s,popupRef:i},width:r,height:o}=this;if(!t)return this.container;const c=this.svgFactory.create(r,o,!0);let u=[];for(let f=0,g=t.length;f<g;f+=2){const x=t[f]-e[0],y=e[3]-t[f+1];u.push(`${x},${y}`)}u=u.join(" ");const h=this.#e=this.svgFactory.createElement(this.svgElementName);return h.setAttribute("points",u),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Dee extends l3{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Ree extends Us{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class qN extends Us{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Jt.HIGHLIGHT:Jt.INK}#s(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:s,borderStyle:i,popupRef:r}}=this,{transform:o,width:c,height:u}=this.#s(t,e),h=this.svgFactory.create(c,u,!0),f=this.#e=this.svgFactory.createElement("svg:g");h.append(f),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",o);for(let g=0,x=s.length;g<x;g++){const y=this.svgFactory.createElement(this.svgElementName);this.#t.push(y),y.setAttribute("points",s[g].join(",")),f.append(y)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:s,rect:i}=e,r=this.#e;if(t>=0&&r.setAttribute("stroke-width",t||1),s)for(let o=0,c=this.#t.length;o<c;o++)this.#t[o].setAttribute("points",s[o].join(","));if(i){const{transform:o,width:c,height:u}=this.#s(this.data.rotation,i);r.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),r.setAttribute("transform",o)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class c3 extends Us{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Jt.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class Mee extends Us{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class Pee extends Us{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class Oee extends Us{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class d3 extends Us{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Jt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class Lee extends Us{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let s;t.hasAppearance||t.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#t.bind(this)),this.#e=s;const{isMac:i}=oa.platform;return e.addEventListener("keydown",r=>{r.key==="Enter"&&(i?r.metaKey:r.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let $N=class u3{#e=null;#t=null;#s=null;#n=new Map;#r=null;#i=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:i,page:r,viewport:o,structTreeLayer:c,commentManager:u,linkService:h,annotationStorage:f}){this.div=e,this.#e=t,this.#t=s,this.#r=c||null,this.#i=h||null,this.#s=f||new WN,this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=u||null}hasEditableAnnotations(){return this.#n.size>0}async#a(e,t,s){const i=e.firstChild||e,r=i.id=`${IN}${t}`,o=await this.#r?.getAriaAttributes(r);if(o)for(const[c,u]of o)i.setAttribute(c,u);s?s.at(-1).container.after(e):(this.div.append(e),this.#e?.moveElementInDOM(this.div,e,i,!1))}async render(e){const{annotations:t}=e,s=this.div;ah(s,this.viewport);const i=new Map,r={data:null,layer:s,linkService:this.#i,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new I0,annotationStorage:this.#s,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const c=o.annotationType===di.POPUP;if(c){const f=i.get(o.id);if(!f)continue;r.elements=f}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;r.data=o;const u=vk.create(r);if(!u.isRenderable)continue;if(!c&&o.popupRef){const f=i.get(o.popupRef);f?f.push(u):i.set(o.popupRef,[u])}const h=u.render();o.hidden&&(h.style.visibility="hidden"),await this.#a(h,o.id,r.elements),u.extraPopupElement?.popup?.renderCommentButton(),u._isEditable&&(this.#n.set(u.data.id,u),this._annotationEditorUIManager?.renderAnnotationElement(u))}this.#o()}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:this.#i,svgFactory:new I0,parent:this};for(const s of e){s.borderStyle||=u3._defaultBorderStyle,t.data=s;const i=vk.create(t);if(!i.isRenderable)continue;const r=i.render();await this.#a(r,s.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,ah(t,{rotation:e.rotation}),this.#o(),t.hidden=!1}#o(){if(!this.#t)return;const e=this.div;for(const[t,s]of this.#t){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:r}=i;r?r.nodeName==="CANVAS"?r.replaceWith(s):r.classList.contains("annotationContent")?r.after(s):r.before(s):i.append(s);const o=this.#n.get(t);o&&(o._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,i.id,s),o._hasNoCanvas=!1):o.canvas=s)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}addFakeAnnotation(e){const{div:t}=this,{id:s,rotation:i}=e,r=new vee({data:{id:s,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:this.#i,annotationStorage:this.#s}),o=r.render();return t.append(o),this.#e?.moveElementInDOM(t,o,o,!1),r.createOrUpdatePopup(),r}static get _defaultBorderStyle(){return an(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Sm.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const Yb=/\r\n?|\n/g;class na extends kt{#e="";#t=`${this.id}-editor`;#s=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=na.prototype,t=r=>r.isEmpty(),s=Pd.TRANSLATE_SMALL,i=Pd.TRANSLATE_BIG;return an(this,"_keyboardManager",new yx([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}static _type="freetext";static _editorType=Jt.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||na._defaultColor||kt._defaultLineColor,this.#n=e.fontSize||na._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,t){kt.initialize(e,t);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case vn.FREETEXT_SIZE:na._defaultFontSize=t;break;case vn.FREETEXT_COLOR:na._defaultColor=t;break}}updateParams(e,t){switch(e){case vn.FREETEXT_SIZE:this.#r(t);break;case vn.FREETEXT_COLOR:this.#i(t);break}}static get defaultPropertiesToUpdate(){return[[vn.FREETEXT_SIZE,na._defaultFontSize],[vn.FREETEXT_COLOR,na._defaultColor||kt._defaultLineColor]]}get propertiesToUpdate(){return[[vn.FREETEXT_SIZE,this.#n],[vn.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new z0(this),[["colorPicker",this._colorPicker]]}get colorType(){return vn.FREETEXT_COLOR}#r(e){const t=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-this.#n)*this.parentScale),this.#n=i,this.#o()},s=this.#n;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vn.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#i(e){const t=i=>{this.color=i,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vn.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-na._internalPadding*e,-(na._internalPadding+this.#n)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#s=new AbortController;const e=this._uiManager.combinedSignal(this.#s);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#s?.abort(),this.#s=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const e=[];this.editorDiv.normalize();let t=null;for(const s of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(e.push(na.#c(s)),t=s);return e.join(`
`)}#o(){const[e,t]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:r}=this,o=r.style.display,c=r.classList.contains("hidden");r.classList.remove("hidden"),r.style.display="hidden",i.div.append(this.div),s=r.getBoundingClientRect(),r.remove(),r.style.display=o,r.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/t):(this.width=s.height/e,this.height=s.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#e,t=this.#e=this.#a().trimEnd();if(e===t)return;const s=i=>{if(this.#e=i,!i){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{s(t)},undo:()=>{s(e)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){na._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,r]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,f]=this.pageDimensions,[g,x]=this.pageTranslation;let y,N;switch(this.rotation){case 0:y=e+(o[0]-g)/h,N=t+this.height-(o[1]-x)/f;break;case 90:y=e+(o[0]-g)/h,N=t-(o[1]-x)/f,[c,u]=[u,-c];break;case 180:y=e-this.width+(o[0]-g)/h,N=t-(o[1]-x)/f,[c,u]=[-c,-u];break;case 270:y=e+(o[0]-g-this.height*f)/h,N=t+(o[1]-x-this.width*h)/f,[c,u]=[-u,c];break}this.setAt(y*i,N*r,c,u)}else this._moveAfterPaste(e,t);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Yb,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:s}=t;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const i=na.#u(t.getData("text")||"").replaceAll(Yb,`
`);if(!i)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const o=r.getRangeAt(0);if(!i.includes(`
`)){o.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),r.collapseToStart();return}const{startContainer:c,startOffset:u}=o,h=[],f=[];if(c.nodeType===Node.TEXT_NODE){const y=c.parentElement;if(f.push(c.nodeValue.slice(u).replaceAll(Yb,"")),y!==this.editorDiv){let N=h;for(const j of this.editorDiv.childNodes){if(j===y){N=f;continue}N.push(na.#c(j))}}h.push(c.nodeValue.slice(0,u).replaceAll(Yb,""))}else if(c===this.editorDiv){let y=h,N=0;for(const j of this.editorDiv.childNodes)N++===u&&(y=f),y.push(na.#c(j))}this.#e=`${h.join(`
`)}${i}${f.join(`
`)}`,this.#l();const g=new Range;let x=Math.sumPrecise(h.map(y=>y.length));for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const N=y.nodeValue.length;if(x<=N){g.setStart(y,x),g.setEnd(y,x);break}x-=N}r.removeAllRanges(),r.addRange(g)}#l(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const e of this.#e.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#h(){return this.#e.replaceAll(""," ")}static#u(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=na._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,t,s){let i=null;if(e instanceof o3){const{data:{defaultAppearanceData:{fontSize:o,fontColor:c},rect:u,rotation:h,id:f,popupRef:g,richText:x,contentsObj:y,creationDate:N,modificationDate:j},textContent:E,textPosition:A,parent:{page:{pageNumber:R}}}=e;if(!E||E.length===0)return null;i=e={annotationType:Jt.FREETEXT,color:Array.from(c),fontSize:o,value:E.join(`
`),position:A,pageIndex:R-1,rect:u.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:g,comment:y?.str||null,richText:x,creationDate:N,modificationDate:j}}const r=await super.deserialize(e,t,s);return r.#n=e.fontSize,r.color=bt.makeHexColor(...e.color),r.#e=na.#u(e.value),r._initialData=i,e.comment&&r.setCommentData(e),r}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=kt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(e),{color:t,fontSize:this.#n,value:this.#h()});return this.addComment(s),e?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(e){const{value:t,fontSize:s,color:i,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==s||e.color.some((o,c)=>o!==i[c])||e.pageIndex!==r}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:s}=t;s.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,s.color=this.color,t.replaceChildren();for(const i of this.#e.split(`
`)){const r=document.createElement("div");r.append(i?document.createTextNode(i):document.createElement("br")),t.append(r)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class xt{static PRECISION=1e-4;toSVGPath(){hs("Abstract method `toSVGPath` must be implemented.")}get box(){hs("Abstract getter `box` must be implemented.")}serialize(e,t){hs("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,i,r,o){o||=new Float32Array(e.length);for(let c=0,u=e.length;c<u;c+=2)o[c]=t+e[c]*i,o[c+1]=s+e[c+1]*r;return o}static _rescaleAndSwap(e,t,s,i,r,o){o||=new Float32Array(e.length);for(let c=0,u=e.length;c<u;c+=2)o[c]=t+e[c+1]*i,o[c+1]=s+e[c]*r;return o}static _translate(e,t,s,i){i||=new Float32Array(e.length);for(let r=0,o=e.length;r<o;r+=2)i[r]=t+e[r],i[r+1]=s+e[r+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,i,r){switch(r){case 90:return[1-t/s,e/i];case 180:return[1-e/s,1-t/i];case 270:return[t/s,1-e/i];default:return[e/s,t/i]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,i,r,o){return[(e+5*s)/6,(t+5*i)/6,(5*s+r)/6,(5*i+o)/6,(s+r)/2,(i+o)/2]}}class df{#e;#t=[];#s;#n;#r=[];#i=new Float32Array(18);#a;#o;#c;#l;#h;#u;#f=[];static#p=8;static#m=2;static#d=df.#p+df.#m;constructor({x:e,y:t},s,i,r,o,c=0){this.#e=s,this.#u=r*i,this.#n=o,this.#i.set([NaN,NaN,NaN,NaN,e,t],6),this.#s=c,this.#l=df.#p*i,this.#c=df.#d*i,this.#h=i,this.#f.push(e,t)}isEmpty(){return isNaN(this.#i[8])}#g(){const e=this.#i.subarray(4,6),t=this.#i.subarray(16,18),[s,i,r,o]=this.#e;return[(this.#a+(e[0]-t[0])/2-s)/r,(this.#o+(e[1]-t[1])/2-i)/o,(this.#a+(t[0]-e[0])/2-s)/r,(this.#o+(t[1]-e[1])/2-i)/o]}add({x:e,y:t}){this.#a=e,this.#o=t;const[s,i,r,o]=this.#e;let[c,u,h,f]=this.#i.subarray(8,12);const g=e-h,x=t-f,y=Math.hypot(g,x);if(y<this.#c)return!1;const N=y-this.#l,j=N/y,E=j*g,A=j*x;let R=c,M=u;c=h,u=f,h+=E,f+=A,this.#f?.push(e,t);const L=-A/N,z=E/N,W=L*this.#u,I=z*this.#u;return this.#i.set(this.#i.subarray(2,8),0),this.#i.set([h+W,f+I],4),this.#i.set(this.#i.subarray(14,18),12),this.#i.set([h-W,f-I],16),isNaN(this.#i[6])?(this.#r.length===0&&(this.#i.set([c+W,u+I],2),this.#r.push(NaN,NaN,NaN,NaN,(c+W-s)/r,(u+I-i)/o),this.#i.set([c-W,u-I],14),this.#t.push(NaN,NaN,NaN,NaN,(c-W-s)/r,(u-I-i)/o)),this.#i.set([R,M,c,u,h,f],6),!this.isEmpty()):(this.#i.set([R,M,c,u,h,f],6),Math.abs(Math.atan2(M-u,R-c)-Math.atan2(A,E))<Math.PI/2?([c,u,h,f]=this.#i.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((c+h)/2-s)/r,((u+f)/2-i)/o),[c,u,R,M]=this.#i.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((R+c)/2-s)/r,((M+u)/2-i)/o),!0):([R,M,c,u,h,f]=this.#i.subarray(0,6),this.#r.push(((R+5*c)/6-s)/r,((M+5*u)/6-i)/o,((5*c+h)/6-s)/r,((5*u+f)/6-i)/o,((c+h)/2-s)/r,((u+f)/2-i)/o),[h,f,c,u,R,M]=this.#i.subarray(12,18),this.#t.push(((R+5*c)/6-s)/r,((M+5*u)/6-i)/o,((5*c+h)/6-s)/r,((5*u+f)/6-i)/o,((c+h)/2-s)/r,((u+f)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#r,t=this.#t;if(isNaN(this.#i[6])&&!this.isEmpty())return this.#x();const s=[];s.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);this.#b(s);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?s.push(`L${t[i+4]} ${t[i+5]}`):s.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return this.#y(s),s.join(" ")}#x(){const[e,t,s,i]=this.#e,[r,o,c,u]=this.#g();return`M${(this.#i[2]-e)/s} ${(this.#i[3]-t)/i} L${(this.#i[4]-e)/s} ${(this.#i[5]-t)/i} L${r} ${o} L${c} ${u} L${(this.#i[16]-e)/s} ${(this.#i[17]-t)/i} L${(this.#i[14]-e)/s} ${(this.#i[15]-t)/i} Z`}#y(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#b(e){const[t,s,i,r]=this.#e,o=this.#i.subarray(4,6),c=this.#i.subarray(16,18),[u,h,f,g]=this.#g();e.push(`L${(o[0]-t)/i} ${(o[1]-s)/r} L${u} ${h} L${f} ${g} L${(c[0]-t)/i} ${(c[1]-s)/r}`)}newFreeDrawOutline(e,t,s,i,r,o){return new h3(e,t,s,i,r,o)}getOutlines(){const e=this.#r,t=this.#t,s=this.#i,[i,r,o,c]=this.#e,u=new Float32Array((this.#f?.length??0)+2);for(let g=0,x=u.length-2;g<x;g+=2)u[g]=(this.#f[g]-i)/o,u[g+1]=(this.#f[g+1]-r)/c;if(u[u.length-2]=(this.#a-i)/o,u[u.length-1]=(this.#o-r)/c,isNaN(s[6])&&!this.isEmpty())return this.#C(u);const h=new Float32Array(this.#r.length+24+this.#t.length);let f=e.length;for(let g=0;g<f;g+=2){if(isNaN(e[g])){h[g]=h[g+1]=NaN;continue}h[g]=e[g],h[g+1]=e[g+1]}f=this.#v(h,f);for(let g=t.length-6;g>=6;g-=6)for(let x=0;x<6;x+=2){if(isNaN(t[g+x])){h[f]=h[f+1]=NaN,f+=2;continue}h[f]=t[g+x],h[f+1]=t[g+x+1],f+=2}return this.#N(h,f),this.newFreeDrawOutline(h,u,this.#e,this.#h,this.#s,this.#n)}#C(e){const t=this.#i,[s,i,r,o]=this.#e,[c,u,h,f]=this.#g(),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(t[2]-s)/r,(t[3]-i)/o,NaN,NaN,NaN,NaN,(t[4]-s)/r,(t[5]-i)/o,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(t[16]-s)/r,(t[17]-i)/o,NaN,NaN,NaN,NaN,(t[14]-s)/r,(t[15]-i)/o],0),this.newFreeDrawOutline(g,e,this.#e,this.#h,this.#s,this.#n)}#N(e,t){const s=this.#t;return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6}#v(e,t){const s=this.#i.subarray(4,6),i=this.#i.subarray(16,18),[r,o,c,u]=this.#e,[h,f,g,x]=this.#g();return e.set([NaN,NaN,NaN,NaN,(s[0]-r)/c,(s[1]-o)/u,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,g,x,NaN,NaN,NaN,NaN,(i[0]-r)/c,(i[1]-o)/u],t),t+=24}}class h3 extends xt{#e;#t=new Float32Array(4);#s;#n;#r;#i;#a;constructor(e,t,s,i,r,o){super(),this.#a=e,this.#r=t,this.#e=s,this.#i=i,this.#s=r,this.#n=o,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(o);const[c,u,h,f]=this.#t;for(let g=0,x=e.length;g<x;g+=2)e[g]=(e[g]-c)/h,e[g+1]=(e[g+1]-u)/f;for(let g=0,x=t.length;g<x;g+=2)t[g]=(t[g]-c)/h,t[g+1]=(t[g+1]-u)/f}toSVGPath(){const e=[`M${this.#a[4]} ${this.#a[5]}`];for(let t=6,s=this.#a.length;t<s;t+=6){if(isNaN(this.#a[t])){e.push(`L${this.#a[t+4]} ${this.#a[t+5]}`);continue}e.push(`C${this.#a[t]} ${this.#a[t+1]} ${this.#a[t+2]} ${this.#a[t+3]} ${this.#a[t+4]} ${this.#a[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,s,i],r){const o=s-e,c=i-t;let u,h;switch(r){case 0:u=xt._rescale(this.#a,e,i,o,-c),h=xt._rescale(this.#r,e,i,o,-c);break;case 90:u=xt._rescaleAndSwap(this.#a,e,t,o,c),h=xt._rescaleAndSwap(this.#r,e,t,o,c);break;case 180:u=xt._rescale(this.#a,s,t,-o,c),h=xt._rescale(this.#r,s,t,-o,c);break;case 270:u=xt._rescaleAndSwap(this.#a,s,i,-o,-c),h=xt._rescaleAndSwap(this.#r,s,i,-o,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}#o(e){const t=this.#a;let s=t[4],i=t[5];const r=[s,i,s,i];let o=s,c=i,u=s,h=i;const f=e?Math.max:Math.min,g=new Float32Array(4);for(let y=6,N=t.length;y<N;y+=6){const j=t[y+4],E=t[y+5];isNaN(t[y])?(bt.pointBoundingBox(j,E,r),c>E?(o=j,c=E):c===E&&(o=f(o,j)),h<E?(u=j,h=E):h===E&&(u=f(u,j))):(g[0]=g[1]=1/0,g[2]=g[3]=-1/0,bt.bezierBoundingBox(s,i,...t.slice(y,y+6),g),bt.rectBoundingBox(g[0],g[1],g[2],g[3],r),c>g[1]?(o=g[0],c=g[1]):c===g[1]&&(o=f(o,g[0])),h<g[3]?(u=g[2],h=g[3]):h===g[3]&&(u=f(u,g[2]))),s=j,i=E}const x=this.#t;x[0]=r[0]-this.#s,x[1]=r[1]-this.#s,x[2]=r[2]-r[0]+2*this.#s,x[3]=r[3]-r[1]+2*this.#s,this.firstPoint=[o,c],this.lastPoint=[u,h]}get box(){return this.#t}newOutliner(e,t,s,i,r,o=0){return new df(e,t,s,i,r,o)}getNewOutline(e,t){const[s,i,r,o]=this.#t,[c,u,h,f]=this.#e,g=r*h,x=o*f,y=s*h+c,N=i*f+u,j=this.newOutliner({x:this.#r[0]*g+y,y:this.#r[1]*x+N},this.#e,this.#i,e,this.#n,t??this.#s);for(let E=2;E<this.#r.length;E+=2)j.add({x:this.#r[E]*g+y,y:this.#r[E+1]*x+N});return j.getOutlines()}}class sS{#e;#t;#s;#n=[];#r=[];constructor(e,t=0,s=0,i=!0){const r=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:j,y:E,width:A,height:R}of e){const M=Math.floor((j-t)/o)*o,L=Math.ceil((j+A+t)/o)*o,z=Math.floor((E-t)/o)*o,W=Math.ceil((E+R+t)/o)*o,I=[M,z,W,!0],Y=[L,z,W,!1];this.#n.push(I,Y),bt.rectBoundingBox(M,z,L,W,r)}const c=r[2]-r[0]+2*s,u=r[3]-r[1]+2*s,h=r[0]-s,f=r[1]-s;let g=i?-1/0:1/0,x=1/0;const y=this.#n.at(i?-1:-2),N=[y[0],y[2]];for(const j of this.#n){const[E,A,R,M]=j;!M&&i?A<x?(x=A,g=E):A===x&&(g=Math.max(g,E)):M&&!i&&(A<x?(x=A,g=E):A===x&&(g=Math.min(g,E))),j[0]=(E-h)/c,j[1]=(A-f)/u,j[2]=(R-f)/u}this.#e=new Float32Array([h,f,c,u]),this.#t=[g,x],this.#s=N}getOutlines(){this.#n.sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of this.#n)t[3]?(e.push(...this.#l(t)),this.#o(t)):(this.#c(t),e.push(...this.#l(t)));return this.#i(e)}#i(e){const t=[],s=new Set;for(const o of e){const[c,u,h]=o;t.push([c,u,o],[c,h,o])}t.sort((o,c)=>o[1]-c[1]||o[0]-c[0]);for(let o=0,c=t.length;o<c;o+=2){const u=t[o][2],h=t[o+1][2];u.push(h),h.push(u),s.add(u),s.add(h)}const i=[];let r;for(;s.size>0;){const o=s.values().next().value;let[c,u,h,f,g]=o;s.delete(o);let x=c,y=u;for(r=[c,h],i.push(r);;){let N;if(s.has(f))N=f;else if(s.has(g))N=g;else break;s.delete(N),[c,u,h,f,g]=N,x!==c&&(r.push(x,y,c,y===u?u:h),x=c),y=y===u?h:u}r.push(x,y)}return new Fee(i,this.#e,this.#t,this.#s)}#a(e){const t=this.#r;let s=0,i=t.length-1;for(;s<=i;){const r=s+i>>1,o=t[r][0];if(o===e)return r;o<e?s=r+1:i=r-1}return i+1}#o([,e,t]){const s=this.#a(e);this.#r.splice(s,0,[e,t])}#c([,e,t]){const s=this.#a(e);for(let i=s;i<this.#r.length;i++){const[r,o]=this.#r[i];if(r!==e)break;if(r===e&&o===t){this.#r.splice(i,1);return}}for(let i=s-1;i>=0;i--){const[r,o]=this.#r[i];if(r!==e)break;if(r===e&&o===t){this.#r.splice(i,1);return}}}#l(e){const[t,s,i]=e,r=[[t,s,i]],o=this.#a(i);for(let c=0;c<o;c++){const[u,h]=this.#r[c];for(let f=0,g=r.length;f<g;f++){const[,x,y]=r[f];if(!(h<=x||y<=u)){if(x>=u){if(y>h)r[f][1]=h;else{if(g===1)return[];r.splice(f,1),f--,g--}continue}r[f][2]=u,y>h&&r.push([t,h,y])}}}return r}}class Fee extends xt{#e;#t;constructor(e,t,s,i){super(),this.#t=e,this.#e=t,this.firstPoint=s,this.lastPoint=i}toSVGPath(){const e=[];for(const t of this.#t){let[s,i]=t;e.push(`M${s} ${i}`);for(let r=2;r<t.length;r+=2){const o=t[r],c=t[r+1];o===s?(e.push(`V${c}`),i=c):c===i&&(e.push(`H${o}`),s=o)}e.push("Z")}return e.join(" ")}serialize([e,t,s,i],r){const o=[],c=s-e,u=i-t;for(const h of this.#t){const f=new Array(h.length);for(let g=0;g<h.length;g+=2)f[g]=e+h[g]*c,f[g+1]=i-h[g+1]*u;o.push(f)}return o}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class iS extends df{newFreeDrawOutline(e,t,s,i,r,o){return new zee(e,t,s,i,r,o)}}class zee extends h3{newOutliner(e,t,s,i,r,o=0){return new iS(e,t,s,i,r,o)}}class ui extends kt{#e=null;#t=0;#s;#n=null;#r=null;#i=null;#a=null;#o=0;#c=null;#l=null;#h=null;#u=!1;#f=null;#p=null;#m=null;#d="";#g;#x="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Jt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=ui.prototype;return an(this,"_keyboardManager",new yx([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||ui._defaultColor,this.#g=e.thickness||ui._defaultThickness,this.opacity=e.opacity||ui._defaultOpacity,this.#s=e.boxes||null,this.#x=e.methodOfCreation||"",this.#d=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#u=!0,this.#b(e),this.#S()):this.#s&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#a=e.focusNode,this.#o=e.focusOffset,this.#y(),this.#S(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#u?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#g,methodOfCreation:this.#x}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#y(){const e=new sS(this.#s,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const t=new sS(this.#s,.0025,.001,this._uiManager.direction==="ltr");this.#i=t.getOutlines();const{firstPoint:s}=this.#l;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:i}=this.#i;this.#p=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#b({highlightOutlines:e,highlightId:t,clipPathId:s}){this.#l=e;const i=1.5;if(this.#i=e.getNewOutline(this.#g/2+i,.0025),t>=0)this.#h=t,this.#n=s,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},!0);else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:ui.#j(this.#l.box,(g-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:ui.#j(this.#i.box,g),path:{d:this.#i.toSVGPath()}})}const[r,o,c,u]=e.box;switch(this.rotation){case 0:this.x=r,this.y=o,this.width=c,this.height=u;break;case 90:{const[g,x]=this.parentDimensions;this.x=o,this.y=1-r,this.width=c*x/g,this.height=u*g/x;break}case 180:this.x=1-r,this.y=1-o,this.width=c,this.height=u;break;case 270:{const[g,x]=this.parentDimensions;this.x=1-o,this.y=r,this.width=c*x/g,this.height=u*g/x;break}}const{firstPoint:h}=e;this.#f=[(h[0]-r)/c,(h[1]-o)/u];const{lastPoint:f}=this.#i;this.#p=[(f[0]-r)/c,(f[1]-o)/u]}static initialize(e,t){kt.initialize(e,t),ui._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case vn.HIGHLIGHT_COLOR:ui._defaultColor=t;break;case vn.HIGHLIGHT_THICKNESS:ui._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#p}get commentButtonPosition(){return this.#f}updateParams(e,t){switch(e){case vn.HIGHLIGHT_COLOR:this.#C(t);break;case vn.HIGHLIGHT_THICKNESS:this.#N(t);break}}static get defaultPropertiesToUpdate(){return[[vn.HIGHLIGHT_COLOR,ui._defaultColor],[vn.HIGHLIGHT_THICKNESS,ui._defaultThickness]]}get propertiesToUpdate(){return[[vn.HIGHLIGHT_COLOR,this.color||ui._defaultColor],[vn.HIGHLIGHT_THICKNESS,this.#g||ui._defaultThickness],[vn.HIGHLIGHT_FREE,this.#u]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#C(e){const t=(r,o)=>{this.color=r,this.opacity=o,this.onUpdatedColor()},s=this.color,i=this.opacity;this.addCommands({cmd:t.bind(this,e,ui._defaultOpacity),undo:t.bind(this,s,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vn.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#N(e){const t=this.#g,s=i=>{this.#g=i,this.#v(i)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:vn.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new co({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#T())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#T())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#E(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#S(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#E():e&&(this.#S(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#v(e){this.#u&&(this.#b({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#E(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#S(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#u},path:{d:this.#l.toSVGPath()}},!1,!0),this.#m=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#u},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},this.#u),this.#c&&(this.#c.style.clipPath=this.#n))}static#j([e,t,s,i],r){switch(r){case 90:return[1-t-i,e,i,s];case 180:return[1-e-s,1-t-i,s,i];case 270:return[t,1-e-s,i,s]}return[e,t,s,i]}rotate(e){const{drawLayer:t}=this.parent;let s;this.#u?(e=(e-this.rotation+360)%360,s=ui.#j(this.#l.box,e)):s=ui.#j([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:s,root:{"data-main-rotation":e}}),t.updateProperties(this.#m,{bbox:ui.#j(this.#i.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#d&&(e.setAttribute("aria-label",this.#d),e.setAttribute("role","mark")),this.#u?e.classList.add("free"):this.div.addEventListener("keydown",this.#k.bind(this),{signal:this._uiManager._signal});const t=this.#c=document.createElement("div");return e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#n,this.setDims(this.width,this.height),BP(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#k(e){ui._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#_(!0);break;case 1:case 3:this.#_(!1);break}}#_(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#a,this.#o)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#u||this.#_(!1))}get _mustFixPosition(){return!this.#u}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!e}}))}#T(){return this.#u?this.rotation:0}#F(){if(this.#u)return null;const[e,t]=this.pageDimensions,[s,i]=this.pageTranslation,r=this.#s,o=new Float32Array(r.length*8);let c=0;for(const{x:u,y:h,width:f,height:g}of r){const x=u*e+s,y=(1-h)*t+i;o[c]=o[c+4]=x,o[c+1]=o[c+3]=y,o[c+2]=o[c+6]=x+f*e,o[c+5]=o[c+7]=y-g*t,c+=8}return o}#R(e){return this.#l.serialize(e,this.#T())}static startHighlighting(e,t,{target:s,x:i,y:r}){const{x:o,y:c,width:u,height:h}=s.getBoundingClientRect(),f=new AbortController,g=e.combinedSignal(f),x=y=>{f.abort(),this.#z(e,y)};window.addEventListener("blur",x,{signal:g}),window.addEventListener("pointerup",x,{signal:g}),window.addEventListener("pointerdown",Bs,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",go,{signal:g}),s.addEventListener("pointermove",this.#P.bind(this,e),{signal:g}),this._freeHighlight=new iS({x:i,y:r},[o,c,u,h],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#P(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#z(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,s){let i=null;if(e instanceof c3){const{data:{quadPoints:N,rect:j,rotation:E,id:A,color:R,opacity:M,popupRef:L,richText:z,contentsObj:W,creationDate:I,modificationDate:Y},parent:{page:{pageNumber:U}}}=e;i=e={annotationType:Jt.HIGHLIGHT,color:Array.from(R),opacity:M,quadPoints:N,boxes:null,pageIndex:U-1,rect:j.slice(0),rotation:E,annotationElementId:A,id:A,deleted:!1,popupRef:L,richText:z,comment:W?.str||null,creationDate:I,modificationDate:Y}}else if(e instanceof qN){const{data:{inkLists:N,rect:j,rotation:E,id:A,color:R,borderStyle:{rawWidth:M},popupRef:L,richText:z,contentsObj:W,creationDate:I,modificationDate:Y},parent:{page:{pageNumber:U}}}=e;i=e={annotationType:Jt.HIGHLIGHT,color:Array.from(R),thickness:M,inkLists:N,boxes:null,pageIndex:U-1,rect:j.slice(0),rotation:E,annotationElementId:A,id:A,deleted:!1,popupRef:L,richText:z,comment:W?.str||null,creationDate:I,modificationDate:Y}}const{color:r,quadPoints:o,inkLists:c,opacity:u}=e,h=await super.deserialize(e,t,s);h.color=bt.makeHexColor(...r),h.opacity=u||1,c&&(h.#g=e.thickness),h._initialData=i,e.comment&&h.setCommentData(e);const[f,g]=h.pageDimensions,[x,y]=h.pageTranslation;if(o){const N=h.#s=[];for(let j=0;j<o.length;j+=8)N.push({x:(o[j]-x)/f,y:1-(o[j+1]-y)/g,width:(o[j+2]-o[j])/f,height:(o[j+1]-o[j+5])/g});h.#y(),h.#S(),h.rotate(h.rotation)}else if(c){h.#u=!0;const N=c[0],j={x:N[0]-x,y:g-(N[1]-y)},E=new iS(j,[0,0,f,g],1,h.#g/2,!0,.001);for(let M=0,L=N.length;M<L;M+=2)j.x=N[M]-x,j.y=g-(N[M+1]-y),E.add(j);const{id:A,clipPathId:R}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);h.#b({highlightOutlines:E.getOutlines(),highlightId:A,clipPathId:R}),h.#S(),h.rotate(h.parentRotation)}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=kt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(e);return Object.assign(s,{color:t,opacity:this.opacity,thickness:this.#g,quadPoints:this.#F(),outlines:this.#R(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#O(s)?null:(s.id=this.annotationElementId,s)}#O(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((s,i)=>s!==t[i])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class f3{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){hs("Not implemented")}}class Ft extends kt{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#s=null;static#n=null;static#r=null;static#i=NaN;static#a=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#l(e),this.#f())}#l({drawOutlines:e,drawId:t,drawingOptions:s}){this.#e=e,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#h(e,this.parent),this.#d(e.box)}#h(e,t){const{id:s}=t.drawLayer.draw(Ft._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(e,t){const s=new Set(Object.keys(e));for(const[i,r]of Object.entries(t))s.has(i)?Object.assign(e[i],r):e[i]=r;return e}static getDefaultDrawingOptions(e){hs("Not implemented")}static get typesMap(){hs("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,t),this._currentParent&&(Ft.#s.updateProperty(s,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[s,i]of this.typesMap)e.push([s,t[i]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[s,i]of this.constructor.typesMap)e.push([s,t[i]]);return e}_updateProperty(e,t,s){const i=this._drawingOptions,r=i[t],o=c=>{i.updateProperty(t,c);const u=this.#e.updateProperty(t,c);u&&this.#d(u),this.parent?.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:o.bind(this,s),undo:o.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Ft._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#m()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Ft._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#m()),{bbox:this.#g()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Ft._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#m(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#u(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#d(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#u()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#u(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,e)}}#p([e,t,s,i]){const{parentDimensions:[r,o],rotation:c}=this;switch(c){case 90:return[t,1-e,s*(o/r),i*(r/o)];case 180:return[1-e,1-t,s,i];case 270:return[1-t,e,s*(o/r),i*(r/o)];default:return[e,t,s,i]}}#m(){const{x:e,y:t,width:s,height:i,parentDimensions:[r,o],rotation:c}=this;switch(c){case 90:return[1-t,e,s*(r/o),i*(o/r)];case 180:return[1-e,1-t,s,i];case 270:return[t,1-e,s*(r/o),i*(o/r)];default:return[e,t,s,i]}}#d(e){[this.x,this.y,this.width,this.height]=this.#p(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#g(){const{x:e,y:t,width:s,height:i,rotation:r,parentRotation:o,parentDimensions:[c,u]}=this;switch((r*4+o)/90){case 1:return[1-t-i,e,i,s];case 2:return[1-e-s,1-t-i,s,i];case 3:return[t,1-e-s,i,s];case 4:return[e,t-s*(c/u),i*(u/c),s*(c/u)];case 5:return[1-t,e,s*(c/u),i*(u/c)];case 6:return[1-e-i*(u/c),1-t,i*(u/c),s*(c/u)];case 7:return[t-s*(c/u),1-e-i*(u/c),s*(c/u),i*(u/c)];case 8:return[e-s,t-i,s,i];case 9:return[1-t,e-s,i,s];case 10:return[1-e,1-t,s,i];case 11:return[t-i,1-e,i,s];case 12:return[e-i*(u/c),t,i*(u/c),s*(c/u)];case 13:return[1-t-s*(c/u),e-i*(u/c),s*(c/u),i*(u/c)];case 14:return[1-e,1-t-s*(c/u),i*(u/c),s*(c/u)];case 15:return[t,1-e,s*(c/u),i*(u/c)];default:return[e,t,s,i]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ft._mergeSVGProperties({bbox:this.#g()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#d(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const s=super.render();s.classList.add("draw");const i=document.createElement("div");return s.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),s}static createDrawerInstance(e,t,s,i,r){hs("Not implemented")}static startDrawing(e,t,s,i){const{target:r,offsetX:o,offsetY:c,pointerId:u,pointerType:h}=i;if(Ft.#a&&Ft.#a!==h)return;const{viewport:{rotation:f}}=e,{width:g,height:x}=r.getBoundingClientRect(),y=Ft.#n=new AbortController,N=e.combinedSignal(y);if(Ft.#i||=u,Ft.#a??=h,window.addEventListener("pointerup",j=>{Ft.#i===j.pointerId?this._endDraw(j):Ft.#o?.delete(j.pointerId)},{signal:N}),window.addEventListener("pointercancel",j=>{Ft.#i===j.pointerId?this._currentParent.endDrawingSession():Ft.#o?.delete(j.pointerId)},{signal:N}),window.addEventListener("pointerdown",j=>{Ft.#a===j.pointerType&&((Ft.#o||=new Set).add(j.pointerId),Ft.#s.isCancellable()&&(Ft.#s.removeLastElement(),Ft.#s.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:N}),window.addEventListener("contextmenu",go,{signal:N}),r.addEventListener("pointermove",this._drawMove.bind(this),{signal:N}),r.addEventListener("touchmove",j=>{j.timeStamp===Ft.#c&&Bs(j)},{signal:N}),e.toggleDrawing(),t._editorUndoBar?.hide(),Ft.#s){e.drawLayer.updateProperties(this._currentDrawId,Ft.#s.startNew(o,c,g,x,f));return}t.updateUIForDefaultProperties(this),Ft.#s=this.createDrawerInstance(o,c,g,x,f),Ft.#r=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(Ft.#r.toSVGProperties(),Ft.#s.defaultSVGProperties),!0,!1)}static _drawMove(e){if(Ft.#c=-1,!Ft.#s)return;const{offsetX:t,offsetY:s,pointerId:i}=e;if(Ft.#i===i){if(Ft.#o?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Ft.#s.add(t,s)),Ft.#c=e.timeStamp,Bs(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,Ft.#s=null,Ft.#r=null,Ft.#a=null,Ft.#c=NaN),Ft.#n&&(Ft.#n.abort(),Ft.#n=null,Ft.#i=NaN,Ft.#o=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e?.target===t.div&&t.drawLayer.updateProperties(this._currentDrawId,Ft.#s.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=Ft.#s,i=this._currentDrawId,r=s.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(i,s.setLastElement(r))},undo:()=>{t.drawLayer.updateProperties(i,s.removeLastElement())},mustExec:!1,type:vn.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(vn.DRAW_STEP),!Ft.#s.isEmpty()){const{pageDimensions:[s,i],scale:r}=t,o=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Ft.#s.getOutlines(s*r,i*r,r,this._INNER_MARGIN),drawingOptions:Ft.#r,mustBeCommitted:!e});return this._cleanup(!0),o}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,s,i,r,o){hs("Not implemented")}static async deserialize(e,t,s){const{rawDims:{pageWidth:i,pageHeight:r,pageX:o,pageY:c}}=t.viewport,u=this.deserializeDraw(o,c,i,r,this._INNER_MARGIN,e),h=await super.deserialize(e,t,s);return h.createDrawingOptions(e),h.#l({drawOutlines:u}),h.#f(),h.onScaleChanging(),h.rotate(),h}serializeDraw(e){const[t,s]=this.pageTranslation,[i,r]=this.pageDimensions;return this.#e.serialize([t,s,i,r],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class Iee{#e=new Float64Array(6);#t;#s;#n;#r;#i;#a="";#o=0;#c=new Sx;#l;#h;constructor(e,t,s,i,r,o){this.#l=s,this.#h=i,this.#n=r,this.#r=o,[e,t]=this.#u(e,t);const c=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t],this.#s=[{line:c,points:this.#i}],this.#e.set(c,0)}updateProperty(e,t){e==="stroke-width"&&(this.#r=t)}#u(e,t){return xt._normalizePoint(e,t,this.#l,this.#h,this.#n)}isEmpty(){return!this.#s||this.#s.length===0}isCancellable(){return this.#i.length<=10}add(e,t){[e,t]=this.#u(e,t);const[s,i,r,o]=this.#e.subarray(2,6),c=e-r,u=t-o;return Math.hypot(this.#l*c,this.#h*u)<=2?null:(this.#i.push(e,t),isNaN(s)?(this.#e.set([r,o,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([s,i,r,o,e,t],0),this.#t.push(...xt.createBezierPoints(s,i,r,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(this.#i.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,i,r){this.#l=s,this.#h=i,this.#n=r,[e,t]=this.#u(e,t);const o=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t];const c=this.#s.at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),this.#s.push({line:o,points:this.#i}),this.#e.set(o,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#s.at(-1)}setLastElement(e){return this.#s?(this.#s.push(e),this.#t=e.line,this.#i=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(e)}removeLastElement(){if(!this.#s)return this.#c.removeLastElement();this.#s.pop(),this.#a="";for(let e=0,t=this.#s.length;e<t;e++){const{line:s,points:i}=this.#s[e];this.#t=s,this.#i=i,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const e=xt.svgRound(this.#t[4]),t=xt.svgRound(this.#t[5]);if(this.#i.length===2)return this.#a=`${this.#a} M ${e} ${t} Z`,this.#a;if(this.#i.length<=6){const i=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,i)} M ${e} ${t}`,this.#o=6}if(this.#i.length===4){const i=xt.svgRound(this.#t[10]),r=xt.svgRound(this.#t[11]);return this.#a=`${this.#a} L ${i} ${r}`,this.#o=12,this.#a}const s=[];this.#o===0&&(s.push(`M ${e} ${t}`),this.#o=6);for(let i=this.#o,r=this.#t.length;i<r;i+=6){const[o,c,u,h,f,g]=this.#t.slice(i,i+6).map(xt.svgRound);s.push(`C${o} ${c} ${u} ${h} ${f} ${g}`)}return this.#a+=s.join(" "),this.#o=this.#t.length,this.#a}getOutlines(e,t,s,i){const r=this.#s.at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),this.#c.build(this.#s,e,t,s,this.#n,this.#r,i),this.#e=null,this.#t=null,this.#s=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Sx extends xt{#e;#t=0;#s;#n;#r;#i;#a;#o;#c;build(e,t,s,i,r,o,c){this.#r=t,this.#i=s,this.#a=i,this.#o=r,this.#c=o,this.#s=c??0,this.#n=e,this.#u()}get thickness(){return this.#c}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#n){if(e.push(`M${xt.svgRound(t[4])} ${xt.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12&&isNaN(t[6])){e.push(`L${xt.svgRound(t[10])} ${xt.svgRound(t[11])}`);continue}for(let s=6,i=t.length;s<i;s+=6){const[r,o,c,u,h,f]=t.subarray(s,s+6).map(xt.svgRound);e.push(`C${r} ${o} ${c} ${u} ${h} ${f}`)}}return e.join("")}serialize([e,t,s,i],r){const o=[],c=[],[u,h,f,g]=this.#h();let x,y,N,j,E,A,R,M,L;switch(this.#o){case 0:L=xt._rescale,x=e,y=t+i,N=s,j=-i,E=e+u*s,A=t+(1-h-g)*i,R=e+(u+f)*s,M=t+(1-h)*i;break;case 90:L=xt._rescaleAndSwap,x=e,y=t,N=s,j=i,E=e+h*s,A=t+u*i,R=e+(h+g)*s,M=t+(u+f)*i;break;case 180:L=xt._rescale,x=e+s,y=t,N=-s,j=i,E=e+(1-u-f)*s,A=t+h*i,R=e+(1-u)*s,M=t+(h+g)*i;break;case 270:L=xt._rescaleAndSwap,x=e+s,y=t+i,N=-s,j=-i,E=e+(1-h-g)*s,A=t+(1-u-f)*i,R=e+(1-h)*s,M=t+(1-u)*i;break}for(const{line:z,points:W}of this.#n)o.push(L(z,x,y,N,j,r?new Array(z.length):null)),c.push(L(W,x,y,N,j,r?new Array(W.length):null));return{lines:o,points:c,rect:[E,A,R,M]}}static deserialize(e,t,s,i,r,{paths:{lines:o,points:c},rotation:u,thickness:h}){const f=[];let g,x,y,N,j;switch(u){case 0:j=xt._rescale,g=-e/s,x=t/i+1,y=1/s,N=-1/i;break;case 90:j=xt._rescaleAndSwap,g=-t/i,x=-e/s,y=1/i,N=1/s;break;case 180:j=xt._rescale,g=e/s+1,x=-t/i,y=-1/s,N=1/i;break;case 270:j=xt._rescaleAndSwap,g=t/i+1,x=e/s+1,y=-1/i,N=-1/s;break}if(!o){o=[];for(const A of c){const R=A.length;if(R===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,A[0],A[1]]));continue}if(R===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,A[0],A[1],NaN,NaN,NaN,NaN,A[2],A[3]]));continue}const M=new Float32Array(3*(R-2));o.push(M);let[L,z,W,I]=A.subarray(0,4);M.set([NaN,NaN,NaN,NaN,L,z],0);for(let Y=4;Y<R;Y+=2){const U=A[Y],Z=A[Y+1];M.set(xt.createBezierPoints(L,z,W,I,U,Z),(Y-2)*3),[L,z,W,I]=[W,I,U,Z]}}}for(let A=0,R=o.length;A<R;A++)f.push({line:j(o[A].map(M=>M??NaN),g,x,y,N),points:j(c[A].map(M=>M??NaN),g,x,y,N)});const E=new this.prototype.constructor;return E.build(f,s,i,1,u,h,r),E}#l(e=this.#c){const t=this.#s+e/2*this.#a;return this.#o%180===0?[t/this.#r,t/this.#i]:[t/this.#i,t/this.#r]}#h(){const[e,t,s,i]=this.#e,[r,o]=this.#l(0);return[e+r,t+o,s-2*r,i-2*o]}#u(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:i}of this.#n){if(i.length<=12){for(let c=4,u=i.length;c<u;c+=6)bt.pointBoundingBox(i[c],i[c+1],e);continue}let r=i[4],o=i[5];for(let c=6,u=i.length;c<u;c+=6){const[h,f,g,x,y,N]=i.subarray(c,c+6);bt.bezierBoundingBox(r,o,h,f,g,x,y,N,e),r=y,o=N}}const[t,s]=this.#l();e[0]=Ma(e[0]-t,0,1),e[1]=Ma(e[1]-s,0,1),e[2]=Ma(e[2]+t,0,1),e[3]=Ma(e[3]+s,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,s]=this.#l();this.#c=e;const[i,r]=this.#l(),[o,c]=[i-t,r-s],u=this.#e;return u[0]-=o,u[1]-=c,u[2]+=2*o,u[3]+=2*c,u}updateParentDimensions([e,t],s){const[i,r]=this.#l();this.#r=e,this.#i=t,this.#a=s;const[o,c]=this.#l(),u=o-i,h=c-r,f=this.#e;return f[0]-=u,f[1]-=h,f[2]+=2*u,f[3]+=2*h,f}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(xt.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${xt.svgRound(e)} ${xt.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let s=0,i=0,r=0,o=0,c=0,u=0;switch(this.#t){case 90:i=t/e,r=-e/t,c=e;break;case 180:s=-1,o=-1,c=e,u=t;break;case 270:i=-t/e,r=e/t,u=t;break;default:return""}return`matrix(${s} ${i} ${r} ${o} ${xt.svgRound(c)} ${xt.svgRound(u)})`}getPathResizingSVGProperties([e,t,s,i]){const[r,o]=this.#l(),[c,u,h,f]=this.#e;if(Math.abs(h-r)<=xt.PRECISION||Math.abs(f-o)<=xt.PRECISION){const j=e+s/2-(c+h/2),E=t+i/2-(u+f/2);return{path:{"transform-origin":`${xt.svgRound(e)} ${xt.svgRound(t)}`,transform:`${this.rotationTransform} translate(${j} ${E})`}}}const g=(s-2*r)/(h-2*r),x=(i-2*o)/(f-2*o),y=h/s,N=f/i;return{path:{"transform-origin":`${xt.svgRound(c)} ${xt.svgRound(u)}`,transform:`${this.rotationTransform} scale(${y} ${N}) translate(${xt.svgRound(r)} ${xt.svgRound(o)}) scale(${g} ${x}) translate(${xt.svgRound(-r)} ${xt.svgRound(-o)})`}}}getPathResizedSVGProperties([e,t,s,i]){const[r,o]=this.#l(),c=this.#e,[u,h,f,g]=c;if(c[0]=e,c[1]=t,c[2]=s,c[3]=i,Math.abs(f-r)<=xt.PRECISION||Math.abs(g-o)<=xt.PRECISION){const E=e+s/2-(u+f/2),A=t+i/2-(h+g/2);for(const{line:R,points:M}of this.#n)xt._translate(R,E,A,R),xt._translate(M,E,A,M);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${xt.svgRound(e)} ${xt.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const x=(s-2*r)/(f-2*r),y=(i-2*o)/(g-2*o),N=-x*(u+r)+e+r,j=-y*(h+o)+t+o;if(x!==1||y!==1||N!==0||j!==0)for(const{line:E,points:A}of this.#n)xt._rescale(E,N,j,x,y,E),xt._rescale(A,N,j,x,y,A);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${xt.svgRound(e)} ${xt.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],s){const[i,r]=s,o=this.#e,c=e-o[0],u=t-o[1];if(this.#r===i&&this.#i===r)for(const{line:h,points:f}of this.#n)xt._translate(h,c,u,h),xt._translate(f,c,u,f);else{const h=this.#r/i,f=this.#i/r;this.#r=i,this.#i=r;for(const{line:g,points:x}of this.#n)xt._rescale(g,c,u,h,f,g),xt._rescale(x,c,u,h,f,x);o[2]*=h,o[3]*=f}return o[0]=e,o[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${xt.svgRound(e)} ${xt.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${xt.svgRound(e[0])} ${xt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class Hv extends f3{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:kt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Hv(this._viewParameters);return e.updateAll(this),e}}class ej extends Ft{static _type="ink";static _editorType=Jt.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){kt.initialize(e,t),this._defaultDrawingOptions=new Hv(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return an(this,"typesMap",new Map([[vn.INK_THICKNESS,"stroke-width"],[vn.INK_COLOR,"stroke"],[vn.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,s,i,r){return new Iee(e,t,s,i,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,s,i,r,o){return Sx.deserialize(e,t,s,i,r,o)}static async deserialize(e,t,s){let i=null;if(e instanceof qN){const{data:{inkLists:o,rect:c,rotation:u,id:h,color:f,opacity:g,borderStyle:{rawWidth:x},popupRef:y,richText:N,contentsObj:j,creationDate:E,modificationDate:A},parent:{page:{pageNumber:R}}}=e;i=e={annotationType:Jt.INK,color:Array.from(f),thickness:x,opacity:g,paths:{points:o},boxes:null,pageIndex:R-1,rect:c.slice(0),rotation:u,annotationElementId:h,id:h,deleted:!1,popupRef:y,richText:N,comment:j?.str||null,creationDate:E,modificationDate:A}}const r=await super.deserialize(e,t,s);return r._initialData=i,e.comment&&r.setCommentData(e),r}get toolbarButtons(){return this._colorPicker||=new z0(this),[["colorPicker",this._colorPicker]]}get colorType(){return vn.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:s}=this;t.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:s}){this._drawingOptions=ej.getDefaultDrawingOptions({stroke:bt.makeHexColor(...e),"stroke-width":t,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:s}=this.serializeDraw(e),{_drawingOptions:{stroke:i,"stroke-opacity":r,"stroke-width":o}}=this,c=Object.assign(super.serialize(e),{color:kt._colorManager.convert(i),opacity:r,thickness:o,paths:{lines:t,points:s}});return this.addComment(c),e?(c.isCopy=!0,c):this.annotationElementId&&!this.#e(c)?null:(c.id=this.annotationElementId,c)}#e(e){const{color:t,thickness:s,opacity:i,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((o,c)=>o!==t[c])||e.thickness!==s||e.opacity!==i||e.pageIndex!==r}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:t,popup:this.comment}),null}}class aS extends Sx{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Xb=8,Hp=3;class nf{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,s,i){return s-=e,i-=t,s===0?i>0?0:4:s===1?i+6:2-i}static#s=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,t,s,i,r,o,c){const u=this.#t(s,i,r,o);for(let h=0;h<8;h++){const f=(-h+u-c+16)%8,g=this.#s[2*f],x=this.#s[2*f+1];if(e[(s+g)*t+(i+x)]!==0)return f}return-1}static#r(e,t,s,i,r,o,c){const u=this.#t(s,i,r,o);for(let h=0;h<8;h++){const f=(h+u+c+16)%8,g=this.#s[2*f],x=this.#s[2*f+1];if(e[(s+g)*t+(i+x)]!==0)return f}return-1}static#i(e,t,s,i){const r=e.length,o=new Int32Array(r);for(let f=0;f<r;f++)o[f]=e[f]<=i?1:0;for(let f=1;f<s-1;f++)o[f*t]=o[f*t+t-1]=0;for(let f=0;f<t;f++)o[f]=o[t*s-1-f]=0;let c=1,u;const h=[];for(let f=1;f<s-1;f++){u=1;for(let g=1;g<t-1;g++){const x=f*t+g,y=o[x];if(y===0)continue;let N=f,j=g;if(y===1&&o[x-1]===0)c+=1,j-=1;else if(y>=1&&o[x+1]===0)c+=1,j+=1,y>1&&(u=y);else{y!==1&&(u=Math.abs(y));continue}const E=[g,f],A=j===g+1,R={isHole:A,points:E,id:c,parent:0};h.push(R);let M;for(const $ of h)if($.id===u){M=$;break}M?M.isHole?R.parent=A?M.parent:u:R.parent=A?u:M.parent:R.parent=A?u:0;const L=this.#n(o,t,f,g,N,j,0);if(L===-1){o[x]=-c,o[x]!==1&&(u=Math.abs(o[x]));continue}let z=this.#s[2*L],W=this.#s[2*L+1];const I=f+z,Y=g+W;N=I,j=Y;let U=f,Z=g;for(;;){const $=this.#r(o,t,U,Z,N,j,1);z=this.#s[2*$],W=this.#s[2*$+1];const ae=U+z,xe=Z+W;E.push(xe,ae);const fe=U*t+Z;if(o[fe+1]===0?o[fe]=-c:o[fe]===1&&(o[fe]=c),ae===f&&xe===g&&U===I&&Z===Y){o[x]!==1&&(u=Math.abs(o[x]));break}else N=U,j=Z,U=ae,Z=xe}}}return h}static#a(e,t,s,i){if(s-t<=4){for(let I=t;I<s-2;I+=2)i.push(e[I],e[I+1]);return}const r=e[t],o=e[t+1],c=e[s-4]-r,u=e[s-3]-o,h=Math.hypot(c,u),f=c/h,g=u/h,x=f*o-g*r,y=u/c,N=1/h,j=Math.atan(y),E=Math.cos(j),A=Math.sin(j),R=N*(Math.abs(E)+Math.abs(A)),M=N*(1-R+R**2),L=Math.max(Math.atan(Math.abs(A+E)*M),Math.atan(Math.abs(A-E)*M));let z=0,W=t;for(let I=t+2;I<s-2;I+=2){const Y=Math.abs(x-f*e[I+1]+g*e[I]);Y>z&&(W=I,z=Y)}z>(h*L)**2?(this.#a(e,t,W+2,i),this.#a(e,W,s,i)):i.push(r,o)}static#o(e){const t=[],s=e.length;return this.#a(e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t}static#c(e,t,s,i,r,o){const c=new Float32Array(o**2),u=-2*i**2,h=o>>1;for(let j=0;j<o;j++){const E=(j-h)**2;for(let A=0;A<o;A++)c[j*o+A]=Math.exp((E+(A-h)**2)/u)}const f=new Float32Array(256),g=-2*r**2;for(let j=0;j<256;j++)f[j]=Math.exp(j**2/g);const x=e.length,y=new Uint8Array(x),N=new Uint32Array(256);for(let j=0;j<s;j++)for(let E=0;E<t;E++){const A=j*t+E,R=e[A];let M=0,L=0;for(let W=0;W<o;W++){const I=j+W-h;if(!(I<0||I>=s))for(let Y=0;Y<o;Y++){const U=E+Y-h;if(U<0||U>=t)continue;const Z=e[I*t+U],$=c[W*o+Y]*f[Math.abs(Z-R)];M+=Z*$,L+=$}}const z=y[A]=Math.round(M/L);N[z]++}return[y,N]}static#l(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t}static#h(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let i=-1/0,r=1/0;for(let c=0,u=s.length;c<u;c++){const h=s[c]=e[c<<2];i=Math.max(i,h),r=Math.min(r,h)}const o=255/(i-r);for(let c=0,u=s.length;c<u;c++)s[c]=(s[c]-r)*o;return s}static#u(e){let t,s=-1/0,i=-1/0;const r=e.findIndex(u=>u!==0);let o=r,c=r;for(t=r;t<256;t++){const u=e[t];u>s&&(t-o>i&&(i=t-o,c=t-1),s=u,o=t)}for(t=c-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#f(e){const t=e,{width:s,height:i}=e,{maxDim:r}=this.#e;let o=s,c=i;if(s>r||i>r){let x=s,y=i,N=Math.log2(Math.max(s,i)/r);const j=Math.floor(N);N=N===j?j-1:j;for(let A=0;A<N;A++){o=Math.ceil(x/2),c=Math.ceil(y/2);const R=new OffscreenCanvas(o,c);R.getContext("2d").drawImage(e,0,0,x,y,0,0,o,c),x=o,y=c,e!==t&&e.close(),e=R.transferToImageBitmap()}const E=Math.min(r/o,r/c);o=Math.round(o*E),c=Math.round(c*E)}const h=new OffscreenCanvas(o,c).getContext("2d",{willReadFrequently:!0});h.fillStyle="white",h.fillRect(0,0,o,c),h.filter="grayscale(1)",h.drawImage(e,0,0,e.width,e.height,0,0,o,c);const f=h.getImageData(0,0,o,c).data;return[this.#h(f),o,c]}static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:i},r,o,c,u){let h=new OffscreenCanvas(1,1),f=h.getContext("2d",{alpha:!1});const g=200,x=f.font=`${s} ${i} ${g}px ${t}`,{actualBoundingBoxLeft:y,actualBoundingBoxRight:N,actualBoundingBoxAscent:j,actualBoundingBoxDescent:E,fontBoundingBoxAscent:A,fontBoundingBoxDescent:R,width:M}=f.measureText(e),L=1.5,z=Math.ceil(Math.max(Math.abs(y)+Math.abs(N)||0,M)*L),W=Math.ceil(Math.max(Math.abs(j)+Math.abs(E)||g,Math.abs(A)+Math.abs(R)||g)*L);h=new OffscreenCanvas(z,W),f=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=x,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,z,W),f.fillStyle="black",f.fillText(e,z*(L-1)/2,W*(3-L)/2);const I=this.#h(f.getImageData(0,0,z,W).data),Y=this.#l(I),U=this.#u(Y),Z=this.#i(I,z,W,U);return this.processDrawnLines({lines:{curves:Z,width:z,height:W},pageWidth:r,pageHeight:o,rotation:c,innerMargin:u,mustSmooth:!0,areContours:!0})}static process(e,t,s,i,r){const[o,c,u]=this.#f(e),[h,f]=this.#c(o,c,u,Math.hypot(c,u)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),g=this.#u(f),x=this.#i(h,c,u,g);return this.processDrawnLines({lines:{curves:x,width:c,height:u},pageWidth:t,pageHeight:s,rotation:i,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:i,innerMargin:r,mustSmooth:o,areContours:c}){i%180!==0&&([t,s]=[s,t]);const{curves:u,width:h,height:f}=e,g=e.thickness??0,x=[],y=Math.min(t/h,s/f),N=y/t,j=y/s,E=[];for(const{points:R}of u){const M=o?this.#o(R):R;if(!M)continue;E.push(M);const L=M.length,z=new Float32Array(L),W=new Float32Array(3*(L===2?2:L-2));if(x.push({line:W,points:z}),L===2){z[0]=M[0]*N,z[1]=M[1]*j,W.set([NaN,NaN,NaN,NaN,z[0],z[1]],0);continue}let[I,Y,U,Z]=M;I*=N,Y*=j,U*=N,Z*=j,z.set([I,Y,U,Z],0),W.set([NaN,NaN,NaN,NaN,I,Y],0);for(let $=4;$<L;$+=2){const ae=z[$]=M[$]*N,xe=z[$+1]=M[$+1]*j;W.set(xt.createBezierPoints(I,Y,U,Z,ae,xe),($-2)*3),[I,Y,U,Z]=[U,Z,ae,xe]}}if(x.length===0)return null;const A=c?new aS:new Sx;return A.build(x,t,s,1,i,c?0:g,r),{outline:A,newCurves:E,areContours:c,thickness:g,width:h,height:f}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:i,height:r}){let o=1/0,c=-1/0,u=0;for(const M of e){u+=M.length;for(let L=2,z=M.length;L<z;L++){const W=M[L]-M[L-2];o=Math.min(o,W),c=Math.max(c,W)}}let h;o>=-128&&c<=127?h=Int8Array:o>=-32768&&c<=32767?h=Int16Array:h=Int32Array;const f=e.length,g=Xb+Hp*f,x=new Uint32Array(g);let y=0;x[y++]=g*Uint32Array.BYTES_PER_ELEMENT+(u-2*f)*h.BYTES_PER_ELEMENT,x[y++]=0,x[y++]=i,x[y++]=r,x[y++]=t?0:1,x[y++]=Math.max(0,Math.floor(s??0)),x[y++]=f,x[y++]=h.BYTES_PER_ELEMENT;for(const M of e)x[y++]=M.length-2,x[y++]=M[0],x[y++]=M[1];const N=new CompressionStream("deflate-raw"),j=N.writable.getWriter();await j.ready,j.write(x);const E=h.prototype.constructor;for(const M of e){const L=new E(M.length-2);for(let z=2,W=M.length;z<W;z++)L[z-2]=M[z]-M[z-2];j.write(L)}j.close();const A=await new Response(N.readable).arrayBuffer(),R=new Uint8Array(A);return MP(R)}static async decompressSignature(e){try{const t=d$(e),{readable:s,writable:i}=new DecompressionStream("deflate-raw"),r=i.getWriter();await r.ready,r.write(t).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,c=0;for await(const M of s)o||=new Uint8Array(new Uint32Array(M.buffer,0,4)[0]),o.set(M,c),c+=M.length;const u=new Uint32Array(o.buffer,0,o.length>>2),h=u[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const f=u[2],g=u[3],x=u[4]===0,y=u[5],N=u[6],j=u[7],E=[],A=(Xb+Hp*N)*Uint32Array.BYTES_PER_ELEMENT;let R;switch(j){case Int8Array.BYTES_PER_ELEMENT:R=new Int8Array(o.buffer,A);break;case Int16Array.BYTES_PER_ELEMENT:R=new Int16Array(o.buffer,A);break;case Int32Array.BYTES_PER_ELEMENT:R=new Int32Array(o.buffer,A);break}c=0;for(let M=0;M<N;M++){const L=u[Hp*M+Xb],z=new Float32Array(L+2);E.push(z);for(let W=0;W<Hp-1;W++)z[W]=u[Hp*M+Xb+W+1];for(let W=0;W<L;W++)z[W+2]=z[W]+R[c++]}return{areContours:x,thickness:y,outlines:E,width:f,height:g}}catch(t){return $t(`decompressSignature: ${t}`),null}}}class tj extends f3{constructor(){super(),super.updateProperties({fill:kt._defaultLineColor,"stroke-width":0})}clone(){const e=new tj;return e.updateAll(this),e}}class nj extends Hv{constructor(e){super(e),super.updateProperties({stroke:kt._defaultLineColor,"stroke-width":1})}clone(){const e=new nj(this._viewParameters);return e.updateAll(this),e}}class Ec extends Ft{#e=!1;#t=null;#s=null;#n=null;static _type="signature";static _editorType=Jt.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#s=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){kt.initialize(e,t),this._defaultDrawingOptions=new tj,this._defaultDrawnSignatureOptions=new nj(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return an(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),this._drawId===null)if(this.#s){const{lines:i,mustSmooth:r,areContours:o,description:c,uuid:u,heightInPage:h}=this.#s,{rawDims:{pageWidth:f,pageHeight:g},rotation:x}=this.parent.viewport,y=nf.processDrawnLines({lines:i,pageWidth:f,pageHeight:g,rotation:x,innerMargin:Ec._INNER_MARGIN,mustSmooth:r,areContours:o});this.addSignature(y,h,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:s,width:i,height:r}=this.#s,o=Math.max(i,r),c=nf.processDrawnLines({lines:{curves:e.map(u=>({points:u})),thickness:s,width:i,height:r},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t});return{areContours:t,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,s,i){const{x:r,y:o}=this,{outline:c}=this.#s=e;this.#e=c instanceof aS,this.description=s;let u;this.#e?u=Ec.getDefaultDrawingOptions():(u=Ec._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});const[,h]=this.pageDimensions;let f=t/h;f=f>=1?.5:f,this.width*=f/this.height,this.width>=1&&(f*=.9/this.width,this.width=.9),this.height=f,this.setDims(),this.x=r,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:s},rotation:i}=this.parent.viewport;return nf.process(e,t,s,i,Ec._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:s,pageHeight:i},rotation:r}=this.parent.viewport;return nf.extractContoursFromText(e,t,s,i,r,Ec._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:s},rotation:i}=this.parent.viewport;return nf.processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:i,innerMargin:Ec._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:t}){e?this._drawingOptions=Ec.getDefaultDrawingOptions():(this._drawingOptions=Ec._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":t}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:t,points:s}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":i}}=this,r=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:i});return this.addComment(r),e?(r.paths={lines:t,points:s},r.uuid=this.#n,r.isCopy=!0):r.lines=t,this.#t&&(r.accessibilityData={type:"Figure",alt:this.#t}),r}static deserializeDraw(e,t,s,i,r,o){return o.areContours?aS.deserialize(e,t,s,i,r,o):Sx.deserialize(e,t,s,i,r,o)}static async deserialize(e,t,s){const i=await super.deserialize(e,t,s);return i.#e=e.areContours,i.description=e.accessibilityData?.alt||"",i.#n=e.uuid,i}}class Bee extends kt{#e=null;#t=null;#s=null;#n=null;#r=null;#i="";#a=null;#o=!1;#c=null;#l=!1;#h=!1;static _type="stamp";static _editorType=Jt.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#r=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){kt.initialize(e,t)}static isHandlingMimeForPasting(e){return Yy.includes(e)}static paste(e,t){t.pasteEditor({mode:Jt.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#u(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#i=e.file.name),this.#m()}#f(){if(this.#s=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:r,height:o}=e||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:i,width:r,height:o,channels:i.length/(r*o)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),t&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}#p(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(s=>this.#u(s,!0)).finally(()=>this.#f());return}if(this.#n){const s=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromUrl(s).then(i=>this.#u(i)).finally(()=>this.#f());return}if(this.#r){const s=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromFile(s).then(i=>this.#u(i)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=Yy.join(",");const t=this._uiManager._signal;this.#s=new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#u(i)}s()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:t})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#p();return}super.rebuild(),this.div!==null&&(this.#t&&this.#a===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#s||this.#e||this.#n||this.#r||this.#t||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#e?this.#m():this.#p()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:s,bitmap:i}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#t=s,i&&(this.#e=i),this.#o=!1,this.#m())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const e=200;this.#c=setTimeout(()=>{this.#c=null,this.#g()},e)}#m(){const{div:e}=this;let{width:t,height:s}=this.#e;const[i,r]=this.pageDimensions,o=.75;if(this.width)t=this.width*i,s=this.height*r;else if(t>o*i||s>o*r){const u=Math.min(o*i/t,o*r/s);t*=u,s*=u}this._uiManager.enableWaiting(!1);const c=this.#a=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),this.width=t/i,this.height=s/r,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#g(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#i&&this.div.setAttribute("aria-description",this.#i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,t,s=!1){e||(e=224);const{width:i,height:r}=this.#e,o=new zl;let c=this.#e,u=i,h=r,f=null;if(t){if(i>t||r>t){const W=Math.min(t/i,t/r);u=Math.floor(i*W),h=Math.floor(r*W)}f=document.createElement("canvas");const x=f.width=Math.ceil(u*o.sx),y=f.height=Math.ceil(h*o.sy);this.#l||(c=this.#d(x,y));const N=f.getContext("2d");N.filter=this._uiManager.hcmFilter;let j="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":f$.isDarkMode&&(j="#8f8f9d",E="#42414d");const A=15,R=A*o.sx,M=A*o.sy,L=new OffscreenCanvas(R*2,M*2),z=L.getContext("2d");z.fillStyle=j,z.fillRect(0,0,R*2,M*2),z.fillStyle=E,z.fillRect(0,0,R,M),z.fillRect(R,M,R,M),N.fillStyle=N.createPattern(L,"repeat"),N.fillRect(0,0,x,y),N.drawImage(c,0,0,c.width,c.height,0,0,x,y)}let g=null;if(s){let x,y;if(o.symmetric&&c.width<e&&c.height<e)x=c.width,y=c.height;else if(c=this.#e,i>e||r>e){const E=Math.min(e/i,e/r);x=Math.floor(i*E),y=Math.floor(r*E),this.#l||(c=this.#d(x,y))}const j=new OffscreenCanvas(x,y).getContext("2d",{willReadFrequently:!0});j.drawImage(c,0,0,c.width,c.height,0,0,x,y),g={width:x,height:y,data:j.getImageData(0,0,x,y).data}}return{canvas:f,width:u,height:h,imageData:g}}#d(e,t){const{width:s,height:i}=this.#e;let r=s,o=i,c=this.#e;for(;r>2*e||o>2*t;){const u=r,h=o;r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const f=new OffscreenCanvas(r,o);f.getContext("2d").drawImage(c,0,0,u,h,0,0,r,o),c=f.transferToImageBitmap()}return c}#g(){const[e,t]=this.parentDimensions,{width:s,height:i}=this,r=new zl,o=Math.ceil(s*e*r.sx),c=Math.ceil(i*t*r.sy),u=this.#a;if(!u||u.width===o&&u.height===c)return;u.width=o,u.height=c;const h=this.#l?this.#e:this.#d(o,c),f=u.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(h,0,0,h.width,h.height,0,0,o,c)}#x(e){if(e){if(this.#l){const i=this._uiManager.imageManager.getSvgUrl(this.#t);if(i)return i}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#l){const[t,s]=this.pageDimensions,i=Math.round(this.width*t*Cf.PDF_TO_CSS_UNITS),r=Math.round(this.height*s*Cf.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(i,r);return o.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,i,r),o.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,s){let i=null,r=!1;if(e instanceof d3){const{data:{rect:j,rotation:E,id:A,structParent:R,popupRef:M,richText:L,contentsObj:z,creationDate:W,modificationDate:I},container:Y,parent:{page:{pageNumber:U}},canvas:Z}=e;let $,ae;Z?(delete e.canvas,{id:$,bitmap:ae}=s.imageManager.getFromCanvas(Y.id,Z),Z.remove()):(r=!0,e._hasNoCanvas=!0);const xe=(await t._structTree.getAriaAttributes(`${IN}${A}`))?.get("aria-label")||"";i=e={annotationType:Jt.STAMP,bitmapId:$,bitmap:ae,pageIndex:U-1,rect:j.slice(0),rotation:E,annotationElementId:A,id:A,deleted:!1,accessibilityData:{decorative:!1,altText:xe},isSvg:!1,structParent:R,popupRef:M,richText:L,comment:z?.str||null,creationDate:W,modificationDate:I}}const o=await super.deserialize(e,t,s),{rect:c,bitmap:u,bitmapUrl:h,bitmapId:f,isSvg:g,accessibilityData:x}=e;r?(s.addMissingCanvas(e.id,o),o.#o=!0):f&&s.imageManager.isValidId(f)?(o.#t=f,u&&(o.#e=u)):o.#n=h,o.#l=g;const[y,N]=o.pageDimensions;return o.width=(c[2]-c[0])/y,o.height=(c[3]-c[1])/N,x&&(o.altTextData=x),o._initialData=i,e.comment&&o.setCommentData(e),o.#h=!!i,o}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(s),e)return s.bitmapUrl=this.#x(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:i,altText:r}=this.serializeAltText(!1);if(!i&&r&&(s.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const c=this.#y(s);return c.isSame?null:(c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(t===null)return s;t.stamps||=new Map;const o=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:o,serialized:s}),s.bitmap=this.#x(!1);else if(this.#l){const c=t.stamps.get(this.#t);o>c.area&&(c.area=o,c.serialized.bitmap.close(),c.serialized.bitmap=this.#x(!1))}return s}#y(e){const{pageIndex:t,accessibilityData:{altText:s}}=this._initialData,i=e.pageIndex===t,r=(e.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&r,isSameAltText:r}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Tc{#e;#t=!1;#s=null;#n=null;#r=null;#i=new Map;#a=!1;#o=!1;#c=!1;#l=null;#h=null;#u=null;#f=null;#p=null;#m=-1;#d;static _initialized=!1;static#g=new Map([na,ej,Bee,ui,Ec].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:i,accessibilityManager:r,annotationLayer:o,drawLayer:c,textLayer:u,viewport:h,l10n:f}){const g=[...Tc.#g.values()];if(!Tc._initialized){Tc._initialized=!0;for(const x of g)x.initialize(f,e)}e.registerEditorTypes(g),this.#d=e,this.pageIndex=t,this.div=s,this.#e=r,this.#s=o,this.viewport=h,this.#u=u,this.drawLayer=c,this._structTree=i,this.#d.addLayer(this)}get isEmpty(){return this.#i.size===0}get isInvisible(){return this.isEmpty&&this.#d.getMode()===Jt.NONE}updateToolbar(e){this.#d.updateToolbar(e)}updateMode(e=this.#d.getMode()){switch(this.#v(),e){case Jt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Jt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Jt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Jt.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const s of Tc.#g.values())t.toggle(`${s._type}Editing`,e===s._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#u?.div}setEditingState(e){this.#d.setEditingState(e)}addCommands(e){this.#d.addCommands(e)}cleanUndoStack(e){this.#d.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#s?.div.classList.toggle("disabled",!e)}get#x(){return this.#i.size!==0?this.#i.values():this.#d.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#p?.abort(),this.#p=null;const e=new Set;for(const s of this.#x)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#d.removeChangedExistingAnnotation(s),e.add(s.annotationElementId));const t=this.#s;if(t)for(const s of t.getEditableAnnotations()){if(s.hide(),this.#d.isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}this.#c=!1,this.#d._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#u&&!this.#p){this.#p=new AbortController;const s=this.#d.combinedSignal(this.#p);this.#u.div.addEventListener("pointerdown",i=>{const{clientX:o,clientY:c,timeStamp:u}=i,h=this.#m;if(u-h>500){this.#m=u;return}this.#m=-1;const{classList:f}=this.div;f.toggle("getElements",!0);const g=document.elementsFromPoint(o,c);if(f.toggle("getElements",!1),!this.div.contains(g[0]))return;let x;const y=new RegExp(`^${P0}[0-9]+$`);for(const j of g)if(y.test(j.id)){x=j.id;break}if(!x)return;const N=this.#i.get(x);N?.annotationElementId===null&&(i.stopPropagation(),i.preventDefault(),N.dblclick(i))},{signal:s,capture:!0})}const e=this.#s;if(e){const s=new Map,i=new Map;for(const o of this.#x){if(o.disableEditing(),!o.annotationElementId){o.updateFakeAnnotationElement(e);continue}if(o.serialize()!==null){s.set(o.annotationElementId,o);continue}else i.set(o.annotationElementId,o);this.getEditableAnnotation(o.annotationElementId)?.show(),o.remove()}const r=e.getEditableAnnotations();for(const o of r){const{id:c}=o.data;if(this.#d.isDeletedAnnotationElement(c)){o.updateEdited({deleted:!0});continue}let u=i.get(c);if(u){u.resetAnnotationElement(o),u.show(!1),o.show();continue}u=s.get(c),u&&(this.#d.addChangedExistingAnnotation(u),u.renderAnnotationElement(o)&&u.show(!1)),o.show()}}this.#v(),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const s of Tc.#g.values())t.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(e){return this.#s?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#d.getActive()!==e&&this.#d.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#u?.div&&!this.#f){this.#f=new AbortController;const e=this.#d.combinedSignal(this.#f);this.#u.div.addEventListener("pointerdown",this.#y.bind(this),{signal:e}),this.#u.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#u?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#u.div.classList.remove("highlighting"))}#y(e){this.#d.unselectAll();const{target:t}=e;if(t===this.#u.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#u.div.contains(t)){const{isMac:s}=oa.platform;if(e.button!==0||e.ctrlKey&&s)return;this.#d.showAllEditors("highlight",!0,!0),this.#u.div.classList.add("free"),this.toggleDrawing(),ui.startHighlighting(this,this.#d.direction==="ltr",{target:this.#u.div,x:e.x,y:e.y}),this.#u.div.addEventListener("pointerup",()=>{this.#u.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#d._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#d.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#i.set(e.id,e);const{annotationElementId:t}=e;t&&this.#d.isDeletedAnnotationElement(t)&&this.#d.removeDeletedAnnotationElement(e)}detach(e){this.#i.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#d.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#d.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#d.addDeletedAnnotationElement(e.annotationElementId),kt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#d.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#c),this.#d.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#r&&(e._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#d._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getEditorByUID(e){for(const t of this.#i.values())if(t.uid===e)return t;return null}getNextId(){return this.#d.getId()}get#b(){return Tc.#g.get(this.#d.getMode())}combinedSignal(e){return this.#d.combinedSignal(e)}#C(e){const t=this.#b;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await this.#d.updateMode(e.mode);const{offsetX:s,offsetY:i}=this.#N(),r=this.getNextId(),o=this.#C({parent:this,id:r,x:s,y:i,uiManager:this.#d,isCentered:!0,...t});o&&this.add(o)}async deserialize(e){return await Tc.#g.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#d)||null}createAndAddNewEditor(e,t,s={}){const i=this.getNextId(),r=this.#C({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:this.#d,isCentered:t,...s});return r&&this.add(r),r}get boundingClientRect(){return this.div.getBoundingClientRect()}#N(){const{x:e,y:t,width:s,height:i}=this.boundingClientRect,r=Math.max(0,e),o=Math.max(0,t),c=Math.min(window.innerWidth,e+s),u=Math.min(window.innerHeight,t+i),h=(r+c)/2-e,f=(o+u)/2-t,[g,x]=this.viewport.rotation%180===0?[h,f]:[f,h];return{offsetX:g,offsetY:x}}addNewEditor(e={}){this.createAndAddNewEditor(this.#N(),!0,e)}setSelected(e){this.#d.setSelected(e)}toggleSelected(e){this.#d.toggleSelected(e)}unselect(e){this.#d.unselect(e)}pointerup(e){const{isMac:t}=oa.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!this.#a||(this.#a=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const s=this.#d.getMode();if(s===Jt.STAMP||s===Jt.SIGNATURE){this.#d.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#d.getMode()===Jt.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:t}=oa.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#a=!0,this.#b?.isDrawer){this.startDrawingSession(e);return}const s=this.#d.getActive();this.#t=!s||s.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#d,!1,e);return}this.#d.setCurrentDrawingSession(this),this.#l=new AbortController;const t=this.#d.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#b.startDrawing(this,this.#d,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#l?(this.#d.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#b.endDrawing(e)):null}findNewParent(e,t,s){const i=this.#d.findParent(t,s);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#d.getActive()?.parent===this&&(this.#d.commitOrRemove(),this.#d.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const e of this.#i.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#i.clear(),this.#d.removeLayer(this)}#v(){for(const e of this.#i.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,ah(this.div,e);for(const t of this.#d.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#d.commitOrRemove(),this.#v();const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,ah(this.div,{rotation:s}),t!==s)for(const i of this.#i.values())i.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#d.viewParameters.realScale}}class sa{#e=null;#t=new Map;#s=new Map;static#n=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const t of this.#t.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return an(this,"_svgFactory",new I0)}static#r(e,[t,s,i,r]){const{style:o}=e;o.top=`${100*s}%`,o.left=`${100*t}%`,o.width=`${100*i}%`,o.height=`${100*r}%`}#i(){const e=sa._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#a(e,t){const s=sa._svgFactory.createElement("clipPath");e.append(s);const i=`clip_${t}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const r=sa._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),i}#o(e,t){for(const[s,i]of Object.entries(t))i===null?e.removeAttribute(s):e.setAttribute(s,i)}draw(e,t=!1,s=!1){const i=sa.#n++,r=this.#i(),o=sa._svgFactory.createElement("defs");r.append(o);const c=sa._svgFactory.createElement("path");o.append(c);const u=`path_p${this.pageIndex}_${i}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#s.set(i,c);const h=s?this.#a(o,u):null,f=sa._svgFactory.createElement("use");return r.append(f),f.setAttribute("href",`#${u}`),this.updateProperties(r,e),this.#t.set(i,r),{id:i,clipPathId:`url(#${h})`}}drawOutline(e,t){const s=sa.#n++,i=this.#i(),r=sa._svgFactory.createElement("defs");i.append(r);const o=sa._svgFactory.createElement("path");r.append(o);const c=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",c),o.setAttribute("vector-effect","non-scaling-stroke");let u;if(t){const g=sa._svgFactory.createElement("mask");r.append(g),u=`mask_p${this.pageIndex}_${s}`,g.setAttribute("id",u),g.setAttribute("maskUnits","objectBoundingBox");const x=sa._svgFactory.createElement("rect");g.append(x),x.setAttribute("width","1"),x.setAttribute("height","1"),x.setAttribute("fill","white");const y=sa._svgFactory.createElement("use");g.append(y),y.setAttribute("href",`#${c}`),y.setAttribute("stroke","none"),y.setAttribute("fill","black"),y.setAttribute("fill-rule","nonzero"),y.classList.add("mask")}const h=sa._svgFactory.createElement("use");i.append(h),h.setAttribute("href",`#${c}`),u&&h.setAttribute("mask",`url(#${u})`);const f=h.cloneNode();return i.append(f),h.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(i,e),this.#t.set(s,i),s}finalizeDraw(e,t){this.#s.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:s,bbox:i,rootClass:r,path:o}=t,c=typeof e=="number"?this.#t.get(e):e;if(c){if(s&&this.#o(c,s),i&&sa.#r(c,i),r){const{classList:u}=c;for(const[h,f]of Object.entries(r))u.toggle(h,f)}if(o){const h=c.firstChild.firstChild;this.#o(h,o)}}}updateParent(e,t){if(t===this)return;const s=this.#t.get(e);s&&(t.#e.append(s),this.#t.delete(e),t.#t.set(e,s))}remove(e){this.#s.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#s.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:sS};globalThis.pdfjsLib={AbortException:Md,AnnotationEditorLayer:Tc,AnnotationEditorParamsType:vn,AnnotationEditorType:Jt,AnnotationEditorUIManager:Pd,AnnotationLayer:$N,AnnotationMode:kc,AnnotationType:di,applyOpacity:zP,build:a3,ColorPicker:co,createValidAbsoluteUrl:LN,CSSConstants:FP,DOMSVGFactory:I0,DrawLayer:sa,FeatureTest:oa,fetchData:Ag,findContrastColor:IP,getDocument:KN,getFilenameFromUrl:PP,getPdfFilenameFromUrl:OP,getRGB:Eg,getUuid:zN,getXfaPageViewport:LP,GlobalWorkerOptions:kl,ImageKind:f0,InvalidPDFException:Wy,isDataScheme:bx,isPdfFile:Iv,isValidExplicitDest:VP,MathClamp:Ma,noContextMenu:go,normalizeUnicode:RP,OPS:$m,OutputScale:zl,PasswordResponses:kP,PDFDataRangeTransport:QN,PDFDateString:Gy,PDFWorker:eg,PermissionFlag:TP,PixelsPerInch:Cf,RenderingCancelledException:zv,renderRichText:HN,ResponseException:O0,setLayerDimensions:ah,shadow:an,SignatureExtractor:nf,stopEvent:Bs,SupportedImageMimeTypes:Yy,TextLayer:F0,TouchManager:vx,updateUrlHash:FN,Util:bt,VerbosityLevel:gx,version:i3,XfaLayer:BN};const Hee=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Md,AnnotationEditorLayer:Tc,AnnotationEditorParamsType:vn,AnnotationEditorType:Jt,AnnotationEditorUIManager:Pd,AnnotationLayer:$N,AnnotationMode:kc,AnnotationType:di,CSSConstants:FP,ColorPicker:co,DOMSVGFactory:I0,DrawLayer:sa,FeatureTest:oa,GlobalWorkerOptions:kl,ImageKind:f0,InvalidPDFException:Wy,MathClamp:Ma,OPS:$m,OutputScale:zl,PDFDataRangeTransport:QN,PDFDateString:Gy,PDFWorker:eg,PasswordResponses:kP,PermissionFlag:TP,PixelsPerInch:Cf,RenderingCancelledException:zv,ResponseException:O0,SignatureExtractor:nf,SupportedImageMimeTypes:Yy,TextLayer:F0,TouchManager:vx,Util:bt,VerbosityLevel:gx,XfaLayer:BN,applyOpacity:zP,build:a3,createValidAbsoluteUrl:LN,fetchData:Ag,findContrastColor:IP,getDocument:KN,getFilenameFromUrl:PP,getPdfFilenameFromUrl:OP,getRGB:Eg,getUuid:zN,getXfaPageViewport:LP,isDataScheme:bx,isPdfFile:Iv,isValidExplicitDest:VP,noContextMenu:go,normalizeUnicode:RP,renderRichText:HN,setLayerDimensions:ah,shadow:an,stopEvent:Bs,updateUrlHash:FN,version:i3},Symbol.toStringTag,{value:"Module"}));function m3(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=m3(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function Uv(){for(var n,e,t=0,s="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=m3(n))&&(s&&(s+=" "),s+=e);return s}var wk=Object.prototype.hasOwnProperty;function Sk(n,e,t){for(t of n.keys())if(Hm(t,e))return t}function Hm(n,e){var t,s,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((s=n.length)===e.length)for(;s--&&Hm(n[s],e[s]););return s===-1}if(t===Set){if(n.size!==e.size)return!1;for(s of n)if(i=s,i&&typeof i=="object"&&(i=Sk(e,i),!i)||!e.has(i))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(s of n)if(i=s[0],i&&typeof i=="object"&&(i=Sk(e,i),!i)||!Hm(s[1],e.get(i)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((s=n.byteLength)===e.byteLength)for(;s--&&n.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(n)){if((s=n.byteLength)===e.byteLength)for(;s--&&n[s]===e[s];);return s===-1}if(!t||typeof n=="object"){s=0;for(t in n)if(wk.call(n,t)&&++s&&!wk.call(e,t)||!(t in e)||!Hm(n[t],e[t]))return!1;return Object.keys(e).length===s}}return n!==n&&e!==e}function Nx(n){let e=!1;return{promise:new Promise((s,i)=>{n.then(r=>!e&&s(r)).catch(r=>!e&&i(r))}),cancel(){e=!0}}}const Uee=["onCopy","onCut","onPaste"],Vee=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],Wee=["onFocus","onBlur"],Gee=["onInput","onInvalid","onReset","onSubmit"],Yee=["onLoad","onError"],Xee=["onKeyDown","onKeyPress","onKeyUp"],Kee=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],Zee=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],Qee=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],Jee=["onSelect"],qee=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],$ee=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],ete=["onScroll"],tte=["onWheel"],nte=["onAnimationStart","onAnimationEnd","onAnimationIteration"],ste=["onTransitionEnd"],ite=["onToggle"],ate=["onChange"],rte=[...Uee,...Vee,...Wee,...Gee,...Yee,...Xee,...Kee,...Zee,...Qee,...Jee,...qee,...$ee,...ete,...tte,...nte,...ste,...ate,...ite];function g3(n,e){const t={};for(const s of rte){const i=n[s];i&&(e?t[s]=(r=>i(r,e(s))):t[s]=i)}return t}var ote="Invariant failed";function ds(n,e){if(!n)throw new Error(ote)}var Qw,Nk;function lte(){if(Nk)return Qw;Nk=1;var n=function(){};return Qw=n,Qw}var cte=lte();const La=ng(cte),p3=_.createContext(null),dte="noopener noreferrer nofollow";class ute{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return ds(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){ds(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,s){e.href=t,e.rel=this.externalLinkRel||dte,e.target=s?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{ds(this.pdfDocument),ds(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{ds(Array.isArray(t));const s=t[0];new Promise(i=>{ds(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(r=>{i(r)}).catch(()=>{ds(!1)}):typeof s=="number"?i(s):ds(!1)}).then(i=>{const r=i+1;ds(this.pdfViewer),ds(r>=1&&r<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:i,pageNumber:r})})})}goToPage(e){const t=e-1;ds(this.pdfViewer),ds(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function Um({children:n,type:e}){return a.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const jk={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function hte(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function tg(){return _.useReducer(hte,{value:void 0,error:void 0})}const Vv=typeof window<"u",x3=Vv&&window.location.protocol==="file:";function fte(n){return typeof n<"u"}function Qh(n){return fte(n)&&n!==null}function mte(n){return typeof n=="string"}function gte(n){return n instanceof ArrayBuffer}function pte(n){return ds(Vv),n instanceof Blob}function rS(n){return mte(n)&&/^data:/.test(n)}function Ck(n){ds(rS(n));const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function xte(){return Vv&&window.devicePixelRatio||1}const b3="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function Ak(){La(!x3,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${b3}`)}function bte(){La(!x3,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${b3}`)}function Ef(n){n?.cancel&&n.cancel()}function oS(n,e){return Object.defineProperty(n,"width",{get(){return this.getViewport({scale:e}).width},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.getViewport({scale:e}).height},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.getViewport({scale:1}).width},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.getViewport({scale:1}).height},configurable:!0}),n}function y3(n){return n.name==="AbortException"||n.name==="RenderingCancelledException"}function yte(n){return new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return t(new Error("Error while reading a file."));e(s.result)},s.onerror=i=>{if(!i.target)return t(new Error("Error while reading a file."));const{error:r}=i.target;if(!r)return t(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},s.readAsArrayBuffer(n)})}const{PDFDataRangeTransport:vte}=Hee,wte=(n,e)=>{switch(e){case jk.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case jk.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function Ek(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const _f=_.forwardRef(function({children:e,className:t,error:s="Failed to load PDF file.",externalLinkRel:i,externalLinkTarget:r,file:o,inputRef:c,imageResourcesPath:u,loading:h="Loading PDF",noData:f="No PDF file specified.",onItemClick:g,onLoadError:x,onLoadProgress:y,onLoadSuccess:N,onPassword:j=wte,onSourceError:E,onSourceSuccess:A,options:R,renderMode:M,rotate:L,scale:z,...W},I){const[Y,U]=tg(),{value:Z,error:$}=Y,[ae,xe]=tg(),{value:fe,error:ke}=ae,G=_.useRef(new ute),X=_.useRef([]),se=_.useRef(void 0),ee=_.useRef(void 0);o&&o!==se.current&&Ek(o)&&(La(!Hm(o,se.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),se.current=o),R&&R!==ee.current&&(La(!Hm(R,ee.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),ee.current=R);const ne=_.useRef({scrollPageIntoView:Se=>{const{dest:Je,pageNumber:lt,pageIndex:ct=lt-1}=Se;if(g){g({dest:Je,pageIndex:ct,pageNumber:lt});return}const Fe=X.current[ct];if(Fe){Fe.scrollIntoView();return}La(!1,`An internal link leading to page ${lt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});_.useImperativeHandle(I,()=>({linkService:G,pages:X,viewer:ne}),[]);function V(){A&&A()}function re(){$&&(La(!1,$.toString()),E&&E($))}function ge(){U({type:"RESET"})}_.useEffect(ge,[o,U]);const Ne=_.useCallback(async()=>{if(!o)return null;if(typeof o=="string")return rS(o)?{data:Ck(o)}:(Ak(),{url:o});if(o instanceof vte)return{range:o};if(gte(o))return{data:o};if(Vv&&pte(o))return{data:await yte(o)};if(ds(typeof o=="object"),ds(Ek(o)),"url"in o&&typeof o.url=="string"){if(rS(o.url)){const{url:Se,...Je}=o;return{data:Ck(Se),...Je}}Ak()}return o},[o]);_.useEffect(()=>{const Se=Nx(Ne());return Se.promise.then(Je=>{U({type:"RESOLVE",value:Je})}).catch(Je=>{U({type:"REJECT",error:Je})}),()=>{Ef(Se)}},[Ne,U]),_.useEffect(()=>{if(!(typeof Z>"u")){if(Z===!1){re();return}V()}},[Z]);function Ce(){fe&&(N&&N(fe),X.current=new Array(fe.numPages),G.current.setDocument(fe))}function We(){ke&&(La(!1,ke.toString()),x&&x(ke))}_.useEffect(function(){xe({type:"RESET"})},[xe,Z]),_.useEffect(function(){if(!Z)return;const Je=R?{...Z,...R}:Z,lt=KN(Je);y&&(lt.onProgress=y),j&&(lt.onPassword=j);const ct=lt;return ct.promise.then(Fe=>{ct.destroyed||xe({type:"RESOLVE",value:Fe})}).catch(Fe=>{ct.destroyed||xe({type:"REJECT",error:Fe})}),()=>{ct.destroy()}},[R,xe,Z]),_.useEffect(()=>{if(!(typeof fe>"u")){if(fe===!1){We();return}Ce()}},[fe]),_.useEffect(function(){G.current.setViewer(ne.current),G.current.setExternalLinkRel(i),G.current.setExternalLinkTarget(r)},[i,r]);const Ge=_.useCallback((Se,Je)=>{X.current[Se]=Je},[]),Oe=_.useCallback(Se=>{delete X.current[Se]},[]),$e=_.useMemo(()=>({imageResourcesPath:u,linkService:G.current,onItemClick:g,pdf:fe,registerPage:Ge,renderMode:M,rotate:L,scale:z,unregisterPage:Oe}),[u,g,fe,Ge,M,L,z,Oe]),Le=_.useMemo(()=>g3(W,()=>fe),[W,fe]);function pe(){function Se(lt){return!!lt?.pdf}if(!Se($e))throw new Error("pdf is undefined");const Je=typeof e=="function"?e($e):e;return a.jsx(p3.Provider,{value:$e,children:Je})}function je(){return o?fe==null?a.jsx(Um,{type:"loading",children:typeof h=="function"?h():h}):fe===!1?a.jsx(Um,{type:"error",children:typeof s=="function"?s():s}):pe():a.jsx(Um,{type:"no-data",children:typeof f=="function"?f():f})}return a.jsx("div",{className:Uv("react-pdf__Document",t),ref:c,...Le,children:je()})});function v3(){return _.useContext(p3)}function w3(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var s=t[0];return s||null}return function(r){for(var o=0,c=t;o<c.length;o++){var u=c[o];typeof u=="function"?u(r):u&&(u.current=r)}}}const S3=_.createContext(null);function Wv(){return _.useContext(S3)}function Ste(){const n=v3(),e=Wv();ds(e);const t={...n,...e},{filterAnnotations:s,imageResourcesPath:i,linkService:r,onGetAnnotationsError:o,onGetAnnotationsSuccess:c,onRenderAnnotationLayerError:u,onRenderAnnotationLayerSuccess:h,page:f,pdf:g,renderForms:x,rotate:y,scale:N=1}=t;ds(g),ds(f),ds(r);const[j,E]=tg(),{value:A,error:R}=j,M=_.useRef(null);La(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function L(){A&&c&&c(A)}function z(){R&&(La(!1,R.toString()),o&&o(R))}_.useEffect(function(){E({type:"RESET"})},[E,f]),_.useEffect(function(){if(!f)return;const Z=Nx(f.getAnnotations()),$=Z;return Z.promise.then(ae=>{E({type:"RESOLVE",value:ae})}).catch(ae=>{E({type:"REJECT",error:ae})}),()=>{Ef($)}},[E,f]),_.useEffect(()=>{if(A!==void 0){if(A===!1){z();return}L()}},[A]);function W(){h&&h()}function I(U){La(!1,`${U}`),u&&u(U)}const Y=_.useMemo(()=>f.getViewport({scale:N,rotation:y}),[f,y,N]);return _.useEffect(function(){if(!g||!f||!r||!A)return;const{current:Z}=M;if(!Z)return;const $=Y.clone({dontFlip:!0}),ae={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:g.annotationStorage,commentManager:null,div:Z,l10n:null,linkService:r,page:f,structTreeLayer:null,viewport:$},xe={annotations:s?s({annotations:A}):A,annotationStorage:g.annotationStorage,div:Z,imageResourcesPath:i,linkService:r,page:f,renderForms:x,viewport:$};Z.innerHTML="";try{new $N(ae).render(xe),W()}catch(fe){I(fe)}return()=>{}},[A,s,i,r,f,g,x,Y]),a.jsx("div",{className:Uv("react-pdf__Page__annotations","annotationLayer"),ref:M})}const N3={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Nte=/^H(\d+)$/;function jte(n){return n in N3}function Gv(n){return"children"in n}function j3(n){return Gv(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function Cte(n){const e={};if(Gv(n)){const{role:t}=n,s=t.match(Nte);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(jte(t)){const i=N3[t];i&&(e.role=i)}}return e}function C3(n){const e={};if(Gv(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),j3(n)){const[t]=n.children;if(t){const s=C3(t);return{...e,...s}}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function Ate(n){return n?{...Cte(n),...C3(n)}:null}function A3({className:n,node:e}){const t=_.useMemo(()=>Ate(e),[e]),s=_.useMemo(()=>!Gv(e)||j3(e)?null:e.children.map((i,r)=>a.jsx(A3,{node:i},r)),[e]);return a.jsx("span",{className:n,...t,children:s})}function Ete(){const n=Wv();ds(n);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[s,i]=tg(),{value:r,error:o}=s,{customTextRenderer:c,page:u}=n;function h(){r&&t&&t(r)}function f(){o&&(La(!1,o.toString()),e&&e(o))}return _.useEffect(function(){i({type:"RESET"})},[i,u]),_.useEffect(function(){if(c||!u)return;const x=Nx(u.getStructTree()),y=x;return x.promise.then(N=>{i({type:"RESOLVE",value:N})}).catch(N=>{i({type:"REJECT",error:N})}),()=>Ef(y)},[c,u,i]),_.useEffect(()=>{if(r!==void 0){if(r===!1){f();return}h()}},[r]),r?a.jsx(A3,{className:"react-pdf__Page__structTree structTree",node:r}):null}const _k=kc;function _te(n){const e=Wv();ds(e);const t={...e,...n},{_className:s,canvasBackground:i,devicePixelRatio:r=xte(),onRenderError:o,onRenderSuccess:c,page:u,renderForms:h,renderTextLayer:f,rotate:g,scale:x}=t,{canvasRef:y}=n;ds(u);const N=_.useRef(null);function j(){u&&c&&c(oS(u,x))}function E(L){y3(L)||(La(!1,L.toString()),o&&o(L))}const A=_.useMemo(()=>u.getViewport({scale:x*r,rotation:g}),[r,u,g,x]),R=_.useMemo(()=>u.getViewport({scale:x,rotation:g}),[u,g,x]);_.useEffect(function(){if(!u)return;u.cleanup();const{current:z}=N;if(!z)return;z.width=A.width,z.height=A.height,z.style.width=`${Math.floor(R.width)}px`,z.style.height=`${Math.floor(R.height)}px`,z.style.visibility="hidden";const W={annotationMode:h?_k.ENABLE_FORMS:_k.ENABLE,canvas:z,canvasContext:z.getContext("2d",{alpha:!1}),viewport:A};i&&(W.background=i);const I=u.render(W),Y=I;return I.promise.then(()=>{z.style.visibility="",j()}).catch(E),()=>Ef(Y)},[i,u,h,A,R]);const M=_.useCallback(()=>{const{current:L}=N;L&&(L.width=0,L.height=0)},[]);return _.useEffect(()=>M,[M]),a.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:w3(y,N),style:{display:"block",userSelect:"none"},children:f?a.jsx(Ete,{}):null})}function Tte(n){return"str"in n}function kte(){const n=Wv();ds(n);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:s,onRenderTextLayerError:i,onRenderTextLayerSuccess:r,page:o,pageIndex:c,pageNumber:u,rotate:h,scale:f}=n;ds(o);const[g,x]=tg(),{value:y,error:N}=g,j=_.useRef(null);La(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function E(){y&&s&&s(y)}function A(){N&&(La(!1,N.toString()),t&&t(N))}_.useEffect(function(){x({type:"RESET"})},[o,x]),_.useEffect(function(){if(!o)return;const Y=Nx(o.getTextContent()),U=Y;return Y.promise.then(Z=>{x({type:"RESOLVE",value:Z})}).catch(Z=>{x({type:"REJECT",error:Z})}),()=>Ef(U)},[o,x]),_.useEffect(()=>{if(y!==void 0){if(y===!1){A();return}E()}},[y]);const R=_.useCallback(()=>{r&&r()},[r]),M=_.useCallback(I=>{y3(I)||(La(!1,I.toString()),i&&i(I))},[i]);function L(){const I=j.current;I&&I.classList.add("selecting")}function z(){const I=j.current;I&&I.classList.remove("selecting")}const W=_.useMemo(()=>o.getViewport({scale:f,rotation:h}),[o,h,f]);return _.useLayoutEffect(function(){if(!o||!y)return;const{current:Y}=j;if(!Y)return;Y.innerHTML="";const U=o.streamTextContent({includeMarkedContent:!0}),Z={container:Y,textContentSource:U,viewport:W},$=new F0(Z),ae=$;return $.render().then(()=>{const xe=document.createElement("div");xe.className="endOfContent",Y.append(xe);const fe=Y.querySelectorAll('[role="presentation"]');if(e){let ke=0;y.items.forEach((G,X)=>{if(!Tte(G))return;const se=fe[ke];if(!se)return;const ee=e({pageIndex:c,pageNumber:u,itemIndex:X,...G});se.innerHTML=ee,ke+=G.str&&G.hasEOL?2:1})}R()}).catch(M),()=>Ef(ae)},[e,M,R,o,c,u,y,W]),a.jsx("div",{className:Uv("react-pdf__Page__textContent","textLayer"),onMouseUp:z,onMouseDown:L,ref:j})}const Tk=1;function Tf(n){const t={...v3(),...n},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:r,canvasRef:o,children:c,className:u,customRenderer:h,customTextRenderer:f,devicePixelRatio:g,error:x="Failed to load the page.",filterAnnotations:y,height:N,inputRef:j,loading:E="Loading page",noData:A="No page specified.",onGetAnnotationsError:R,onGetAnnotationsSuccess:M,onGetStructTreeError:L,onGetStructTreeSuccess:z,onGetTextError:W,onGetTextSuccess:I,onLoadError:Y,onLoadSuccess:U,onRenderAnnotationLayerError:Z,onRenderAnnotationLayerSuccess:$,onRenderError:ae,onRenderSuccess:xe,onRenderTextLayerError:fe,onRenderTextLayerSuccess:ke,pageIndex:G,pageNumber:X,pdf:se,registerPage:ee,renderAnnotationLayer:ne=!0,renderForms:V=!1,renderMode:re="canvas",renderTextLayer:ge=!0,rotate:Ne,scale:Ce=Tk,unregisterPage:We,width:Ge,...Oe}=t,[$e,Le]=tg(),{value:pe,error:je}=$e,Se=_.useRef(null);ds(se);const Je=Qh(X)?X-1:G??null,lt=X??(Qh(G)?G+1:null),ct=Ne??(pe?pe.rotate:null),Fe=_.useMemo(()=>{if(!pe)return null;let Ot=1;const Kt=Ce??Tk;if(Ge||N){const Fn=pe.getViewport({scale:1,rotation:ct});Ge?Ot=Ge/Fn.width:N&&(Ot=N/Fn.height)}return Kt*Ot},[N,pe,ct,Ce,Ge]);_.useEffect(function(){return()=>{Qh(Je)&&i&&We&&We(Je)}},[i,se,Je,We]);function nt(){if(U){if(!pe||!Fe)return;U(oS(pe,Fe))}if(i&&ee){if(!Qh(Je)||!Se.current)return;ee(Je,Se.current)}}function Ye(){je&&(La(!1,je.toString()),Y&&Y(je))}_.useEffect(function(){Le({type:"RESET"})},[Le,se,Je]),_.useEffect(function(){if(!se||!lt)return;const Kt=Nx(se.getPage(lt)),Fn=Kt;return Kt.promise.then(un=>{Le({type:"RESOLVE",value:un})}).catch(un=>{Le({type:"REJECT",error:un})}),()=>Ef(Fn)},[Le,se,lt]),_.useEffect(()=>{if(pe!==void 0){if(pe===!1){Ye();return}nt()}},[pe,Fe]);const ot=_.useMemo(()=>Qh(Je)&&lt&&Qh(ct)&&Qh(Fe)?{_className:s,canvasBackground:r,customTextRenderer:f,devicePixelRatio:g,filterAnnotations:y,onGetAnnotationsError:R,onGetAnnotationsSuccess:M,onGetStructTreeError:L,onGetStructTreeSuccess:z,onGetTextError:W,onGetTextSuccess:I,onRenderAnnotationLayerError:Z,onRenderAnnotationLayerSuccess:$,onRenderError:ae,onRenderSuccess:xe,onRenderTextLayerError:fe,onRenderTextLayerSuccess:ke,page:pe,pageIndex:Je,pageNumber:lt,renderForms:V,renderTextLayer:ge,rotate:ct,scale:Fe}:null,[s,r,f,g,y,R,M,L,z,W,I,Z,$,ae,xe,fe,ke,pe,Je,lt,V,ge,ct,Fe]),St=_.useMemo(()=>g3(Oe,()=>pe&&(Fe?oS(pe,Fe):void 0)),[Oe,pe,Fe]),Pt=`${Je}@${Fe}/${ct}`;function qe(){switch(re){case"custom":return ds(h),a.jsx(h,{},`${Pt}_custom`);case"none":return null;default:return a.jsx(_te,{canvasRef:o},`${Pt}_canvas`)}}function Ze(){return ge?a.jsx(kte,{},`${Pt}_text`):null}function Xe(){return ne?a.jsx(Ste,{},`${Pt}_annotations`):null}function yt(){function Ot(Fn){return!!Fn?.page}if(!Ot(ot))throw new Error("page is undefined");const Kt=typeof c=="function"?c(ot):c;return a.jsxs(S3.Provider,{value:ot,children:[qe(),Ze(),Xe(),Kt]})}function Et(){return lt?se===null||pe===void 0||pe===null?a.jsx(Um,{type:"loading",children:typeof E=="function"?E():E}):se===!1||pe===!1?a.jsx(Um,{type:"error",children:typeof x=="function"?x():x}):yt():a.jsx(Um,{type:"no-data",children:typeof A=="function"?A():A})}return a.jsx("div",{className:Uv(s,u),"data-page-number":lt,ref:w3(j,Se),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Fe}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...St,children:Et()})}bte();kl.workerSrc="pdf.worker.mjs";const Dte=({pageNumber:n,signatures:e,onUpdateSignature:t,onRemoveSignature:s,onEditSignature:i,readOnly:r,onFieldClick:o,scale:c=1,rotation:u=0})=>{const{setNodeRef:h,isOver:f}=MN({id:`page-${n}`});return a.jsxs("div",{ref:h,id:`pdf-page-${n}`,className:`relative mb-6 transition-colors ${f?"ring-2 ring-indigo-500 ring-offset-2":""}`,style:{width:"fit-content",margin:"0 auto 1.5rem auto"},children:[a.jsx(Tf,{pageNumber:n,className:"",renderTextLayer:!1,renderAnnotationLayer:!1,width:800,scale:c,rotate:u}),e.map(g=>r?a.jsx("div",{className:"absolute",style:{left:`${g.position.x}%`,top:`${g.position.y}%`,cursor:o&&g.metadata?.isMine&&!g.metadata?.value?"pointer":"default",pointerEvents:"auto"},onClick:x=>{x.stopPropagation(),o&&o(g)},children:a.jsx(nP,{data:g.metadata,isSelected:!1,isDragging:!1,readOnly:!0})},g.id):a.jsx(sP,{id:g.id,data:g.metadata,left:g.position.x,top:g.position.y,onUpdate:t,onRemove:s,onEdit:i},g.id))]})},Yv="/assets/pdf.worker.min-qwK7q_zL.mjs";kl.workerSrc=Yv;const kk=({pdfUrl:n,signatures:e=[],onUpdateSignature:t,onRemoveSignature:s,onEditSignature:i,readOnly:r=!1,onFieldClick:o,onLoadSuccess:c})=>{const[u,h]=_.useState(null),[f,g]=_.useState(1),[x,y]=_.useState(0),N=({numPages:R})=>{h(R),c&&c({numPages:R})},j=()=>g(R=>Math.min(R+.1,2)),E=()=>g(R=>Math.max(R-.1,.5)),A=_.useMemo(()=>e.reduce((R,M)=>{const L=M.pageNumber||1;return R[L]||(R[L]=[]),R[L].push(M),R},{}),[e]);return n?a.jsxs("div",{className:"relative flex flex-col items-center bg-slate-100/50 h-full w-full rounded-xl border border-slate-200 overflow-hidden",children:[a.jsxs("div",{className:"sticky top-0 z-30 w-full bg-white/80 backdrop-blur-md border-b border-slate-200 p-2 flex items-center justify-between px-4",children:[a.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:u?`${u} Pages`:"Loading Document..."}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:E,className:"p-1.5 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:"Zoom Out",children:a.jsx(Yo,{size:18})}),a.jsxs("span",{className:"text-xs font-mono font-medium text-slate-600 w-12 text-center",children:[Math.round(f*100),"%"]}),a.jsx("button",{onClick:j,className:"p-1.5 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:"Zoom In",children:a.jsx(Go,{size:18})}),a.jsx("div",{className:"w-px h-4 bg-slate-300 mx-1"}),a.jsx("button",{onClick:()=>y(R=>R+90),className:"p-1.5 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:"Rotate",children:a.jsx(s7,{size:18})})]})]}),a.jsxs("div",{className:"flex-1 w-full overflow-y-auto overflow-x-hidden p-8 flex flex-col items-center scrollbar-thin scrollbar-thumb-slate-300 scrollbar-track-transparent",children:[a.jsx(_f,{file:n,onLoadSuccess:N,className:"flex flex-col items-center gap-8",loading:a.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[a.jsx("div",{className:"w-10 h-10 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin mb-4"}),a.jsx("p",{className:"text-slate-500 font-medium",children:"Loading PDF..."})]}),error:a.jsxs("div",{className:"text-center py-20",children:[a.jsx("p",{className:"text-red-500 font-medium",children:"Failed to load PDF."}),a.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Please ensure it is a valid PDF file."})]}),children:u&&Array.from({length:u},(R,M)=>a.jsx(Dte,{pageNumber:M+1,signatures:A[M+1]||[],onUpdateSignature:t,onRemoveSignature:s,onEditSignature:i,readOnly:r,onFieldClick:o,scale:f,rotation:x},`page_${M+1}`))}),a.jsx("div",{className:"h-40 w-full flex-shrink-0"})]})]}):null},Rte=({signer:n,onRemove:e,onEdit:t,isEditing:s,onUpdate:i,readOnly:r})=>{const{attributes:o,listeners:c,setNodeRef:u,transform:h,transition:f,isDragging:g}=fP({id:n.id}),x={transform:Oc.Transform.toString(h),transition:f,opacity:g?.4:1};return a.jsx("div",{ref:u,style:x,className:`group p-4 bg-slate-50 hover:bg-white rounded-xl border border-slate-200 hover:border-indigo-200 hover:shadow-md transition-all ${g?"shadow-lg ring-2 ring-indigo-500/20":""} ${r?"opacity-70 cursor-default":""}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[!r&&a.jsx("div",{...o,...c,className:"cursor-move text-slate-400 hover:text-indigo-500 transition-colors p-1",children:a.jsx(fv,{size:18})}),a.jsx("div",{className:"w-8 h-8 bg-indigo-100 text-indigo-600 rounded-lg flex items-center justify-center font-bold text-sm flex-shrink-0",children:n.order}),a.jsx("div",{className:"flex-1 min-w-0",children:s&&!r?a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"text",defaultValue:n.name,onBlur:y=>i(n.id,{name:y.target.value}),className:"w-full px-2 py-1 text-sm border border-slate-200 rounded focus:border-indigo-500 outline-none",placeholder:"Name",autoFocus:!0,disabled:r}),a.jsx("input",{type:"email",defaultValue:n.email,onBlur:y=>i(n.id,{email:y.target.value}),className:"w-full px-2 py-1 text-sm border border-slate-200 rounded focus:border-indigo-500 outline-none",placeholder:"Email",disabled:r})]}):a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-slate-800 truncate",children:n.name||"Unnamed Signer"}),a.jsx("p",{className:"text-xs text-slate-500 truncate",children:n.email||"No email provided"})]})}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${n.role==="signer"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:n.role}),!r&&a.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>t(s?null:n.id),className:`p-1.5 rounded transition-colors ${s?"bg-indigo-100 text-indigo-600":"hover:bg-blue-50 text-slate-400 hover:text-blue-600"}`,title:"Edit",children:a.jsx(oN,{size:14})}),a.jsx("button",{onClick:()=>e(n.id),className:"p-1.5 hover:bg-red-50 text-slate-400 hover:text-red-600 rounded transition-colors",title:"Remove",children:a.jsx(Ki,{size:14})})]})]})})},E3=({signers:n,onUpdateSigners:e,readOnly:t=!1})=>{const[s,i]=ht.useState(null),r=Id(Ha(Lc),Ha(kN)),o=h=>{const{active:f,over:g}=h;if(f.id!==g.id){const x=n.findIndex(A=>A.id===f.id),y=n.findIndex(A=>A.id===g.id),N=[...n],[j]=N.splice(x,1);N.splice(y,0,j);const E=N.map((A,R)=>({...A,order:R+1}));e(E)}},c=(h,f)=>{e(n.map(g=>g.id===h?{...g,...f}:g))},u=h=>{const f=n.filter(g=>g.id!==h).map((g,x)=>({...g,order:x+1}));e(f)};return a.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Signers"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Drag to reorder signing sequence"})]}),a.jsxs("div",{className:"bg-indigo-50 text-indigo-600 px-3 py-1 rounded-full text-xs font-bold border border-indigo-100",children:[n.length," ",n.length===1?"Person":"People"]})]}),a.jsx("div",{className:"space-y-4",children:n.length===0?a.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-slate-200 rounded-xl bg-slate-50/50",children:[a.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center mx-auto mb-3 shadow-sm border border-slate-100",children:a.jsx(Ai,{size:20,className:"text-slate-400"})}),a.jsx("p",{className:"text-slate-600 font-medium text-sm",children:"No signers yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1 max-w-[200px] mx-auto",children:"Drag a signature field onto the document to add a signer automatically."})]}):a.jsx(Bd,{sensors:r,collisionDetection:EN,onDragEnd:o,children:a.jsx(uP,{items:n.map(h=>h.id),strategy:lP,children:a.jsx("div",{className:"space-y-3",children:n.map(h=>a.jsx(Rte,{signer:h,onRemove:u,onEdit:i,isEditing:s===h.id,onUpdate:c,readOnly:t},h.id))})})})}),n.length>0&&a.jsx("div",{className:"mt-6 p-4 bg-slate-50/50 rounded-xl border border-slate-200",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Tr,{size:16,className:"text-slate-400 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-xs text-slate-500 leading-relaxed",children:[a.jsx("span",{className:"font-semibold text-slate-700",children:"Sequential Signing:"})," Signers will receive the document in the order shown above (",1," to ",n.length,"). Drag items to change the sequence."]})]})})]})},Up=({type:n,icon:e,label:t})=>{const{attributes:s,listeners:i,setNodeRef:r,isDragging:o}=kv({id:`toolbar-${n}`,data:{type:"toolbar-item",fieldType:n}});return a.jsxs("div",{ref:r,...i,...s,className:`
                flex items-center gap-3 p-3 rounded-lg border border-slate-200 bg-white 
                cursor-grab active:cursor-grabbing hover:border-indigo-300 hover:shadow-sm transition-all
                ${o?"opacity-50 border-indigo-500 ring-2 ring-indigo-500/20":""}
            `,style:{touchAction:"none"},children:[a.jsx("div",{className:`p-2 rounded-md ${o?"bg-indigo-100 text-indigo-600":"bg-slate-100 text-slate-500"}`,children:a.jsx(e,{size:18})}),a.jsx("span",{className:"text-sm font-medium text-slate-700",children:t})]})},_3=()=>a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-4 px-1",children:"Signature Tools"}),a.jsx(Up,{type:"signature",icon:ar,label:"Signature Field"}),a.jsx(Up,{type:"initials",icon:Ai,label:"Initials"}),a.jsx(Up,{type:"date",icon:Ld,label:"Date Signed"}),a.jsx(Up,{type:"text",icon:Ol,label:"Text Box"}),a.jsx(Up,{type:"checkbox",icon:wf,label:"Checkbox"}),a.jsx("div",{className:"mt-4 p-3 bg-indigo-50 rounded-lg text-xs text-indigo-700 border border-indigo-100",children:a.jsx("p",{children:"Drag fields onto the document to request information."})})]}),Mte=_.memo(({show:n,onClose:e,signers:t,onProceed:s,canProceed:i})=>a.jsx(dn,{children:n&&a.jsxs(a.Fragment,{children:[a.jsx(Ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-40 lg:hidden",onClick:e}),a.jsxs(Ie.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-0 right-0 h-[60vh] bg-white rounded-t-2xl shadow-[0_-8px_30px_rgba(0,0,0,0.12)] z-50 lg:hidden flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between bg-slate-50/50 rounded-t-2xl",children:[a.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[a.jsx(ar,{size:18,className:"text-indigo-600"}),"Signature Tools"]}),a.jsx("button",{onClick:e,className:"p-2 bg-slate-100 rounded-full text-slate-500",children:a.jsx(bs,{size:20})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-white safe-area-bottom",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3",children:"Drag Fields to Canvas"}),a.jsx(_3,{})]}),a.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm mb-3",children:[a.jsx("span",{className:"text-slate-600 font-medium",children:"Signers Required"}),a.jsx("span",{className:"font-bold text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded text-xs",children:t.length})]}),a.jsxs("div",{className:"space-y-2 mb-4",children:[t.map(r=>a.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 bg-slate-50 p-2 rounded border border-slate-100",children:[a.jsx("div",{className:"w-5 h-5 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center font-bold text-[10px]",children:r.order}),a.jsx("span",{className:"truncate flex-1",children:r.name||r.email||"New Signer"})]},r.id)),t.length===0&&a.jsx("p",{className:"text-xs text-slate-400 italic",children:"No signers yet. Add a field to create one."})]})]})]}),a.jsx("div",{className:"p-4 border-t border-slate-200 bg-slate-50 pb-8",children:a.jsxs("button",{onClick:s,disabled:!i,className:"w-full flex items-center justify-center gap-2 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl shadow-lg hover:shadow-indigo-600/20 transition-all disabled:opacity-50 disabled:cursor-not-allowed active:scale-95",children:[a.jsx("span",{children:"Review & Send"}),a.jsx(Ml,{size:16})]})})]})]})})),Pte=_.memo(({show:n,onClose:e,signers:t,onUpdateSigners:s,onSend:i,onBack:r})=>a.jsx(dn,{children:n&&a.jsxs(a.Fragment,{children:[a.jsx(Ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-40 lg:hidden",onClick:e}),a.jsxs(Ie.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-0 right-0 h-[85vh] bg-white rounded-t-2xl shadow-[0_-8px_30px_rgba(0,0,0,0.12)] z-50 lg:hidden flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between bg-slate-50/50 rounded-t-2xl",children:[a.jsx("h3",{className:"font-bold text-slate-800",children:"Review Signers"}),a.jsx("button",{onClick:e,className:"p-2 bg-slate-100 rounded-full text-slate-500",children:a.jsx(bs,{size:20})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-white safe-area-bottom",children:[a.jsx("p",{className:"text-sm text-slate-500 mb-4 px-1",children:"Verify signer order and details before sending."}),a.jsx(E3,{signers:t,onUpdateSigners:s,readOnly:!0})]}),a.jsxs("div",{className:"p-4 border-t border-slate-200 bg-slate-50 space-y-3 pb-8",children:[a.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center gap-2 py-3.5 bg-emerald-600 hover:bg-emerald-700 text-white font-bold rounded-xl shadow-lg hover:shadow-emerald-600/20 transition-all active:scale-95",children:[a.jsx(Pm,{size:18}),a.jsx("span",{children:"Send Document"})]}),a.jsx("button",{onClick:r,className:"w-full py-3 text-slate-500 font-medium hover:text-slate-800 bg-white border border-slate-200 rounded-xl active:bg-slate-50",children:"Back to Edit"})]})]})]})})),Ote=_.memo(({pdfUrl:n,numPages:e,onPageClick:t,currentPage:s,signatures:i})=>{const r=o=>i.filter(c=>c.pageNumber===o);return!n||!e?null:a.jsxs("div",{className:"w-full flex flex-col h-full bg-slate-50 border-r border-slate-200",children:[a.jsx("div",{className:"p-4 border-b border-slate-200 bg-white sticky top-0 z-10 shadow-sm",children:a.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider flex items-center gap-2",children:[a.jsx($0,{size:14,className:"text-indigo-600"}),"Pages (",e,")"]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-thin scrollbar-thumb-slate-300",children:a.jsx(_f,{file:n,loading:a.jsx("div",{className:"text-xs text-slate-400 text-center py-4",children:"Loading thumbnails..."}),children:Array.from({length:e},(o,c)=>{const u=c+1,h=r(u),f=s===u;return a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"flex items-start gap-2 mb-1",children:a.jsx("span",{className:`text-[10px] font-bold w-4 ${f?"text-indigo-600":"text-slate-400"}`,children:u})}),a.jsxs("button",{onClick:()=>t(u),className:`w-full relative transition-all duration-200 group-hover:scale-[1.02] ${f?"ring-2 ring-indigo-500 rounded-sm shadow-md":"hover:ring-2 hover:ring-indigo-200 rounded-sm"}`,children:[a.jsxs("div",{className:"aspect-[3/4] bg-white border border-slate-200 rounded-sm overflow-hidden relative shadow-sm",children:[a.jsx(Tf,{pageNumber:u,width:180,renderTextLayer:!1,renderAnnotationLayer:!1,className:"pointer-events-none opacity-90"}),h.length>0&&a.jsx("div",{className:"absolute inset-0 bg-transparent",children:h.map((g,x)=>a.jsx("div",{className:"absolute w-4 h-4 bg-indigo-600 text-white text-[9px] font-bold rounded-full flex items-center justify-center shadow-sm border border-white z-10 transform -translate-x-1/2 -translate-y-1/2 transition-transform hover:scale-125",style:{left:`${g.position.x}%`,top:`${g.position.y}%`},title:`Signer ${g.metadata?.order||"?"}`,children:g.metadata?.order||x+1},g.id))})]}),h.length>0&&a.jsx("div",{className:"absolute top-1 rights-1 flex flex-col gap-1 items-end p-1",children:a.jsxs("div",{className:"bg-emerald-500 text-white text-[9px] px-1.5 py-0.5 rounded-full shadow-sm font-bold border border-white",children:[h.length," Fields"]})})]})]},`thumb-${u}`)})})})]})}),Lte=()=>{const n=ts(),e=Id(Ha(KM,{activationConstraint:{distance:10}}),Ha(Mf,{activationConstraint:{delay:250,tolerance:5}})),[t,s]=_.useState(1),[i,r]=_.useState(null),[o,c]=_.useState(null),[u,h]=_.useState([]),[f,g]=_.useState([]),[x,y]=_.useState(!1),[N,j]=_.useState(null),[E,A]=_.useState(null),[R,M]=_.useState(null),[L,z]=_.useState(0),[W,I]=_.useState("tools"),[Y,U]=_.useState(!1),[Z,$]=_.useState(!1),[ae,xe]=_.useState(!1),[fe,ke]=_.useState(!1),[G,X]=_.useState(null),[se,ee]=_.useState(0),ne=_.useRef(null),V=[{id:1,title:"Upload & Place",icon:Sf},{id:2,title:"Review & Send",icon:Pm}];_.useEffect(()=>{let Le;if(fe){ee(0);const pe=5e3,je=50,Se=pe/je;Le=setInterval(()=>{ee(Je=>{const lt=Je+100/Se;return lt>=100?(clearInterval(Le),qt.success("Document sent successfully!"),n("/signatures/list"),100):lt})},je)}return()=>clearInterval(Le)},[fe,n]);const re=Le=>{r(Le);const pe=URL.createObjectURL(Le);c(pe)},ge=Le=>{A(Le.active.id),M(Le.active.data.current)},Ne=Le=>{const{active:pe,over:je}=Le;if(je&&je.id.startsWith("page-")){const Se=parseInt(je.id.replace("page-","")),Je=pe.rect.current.translated,lt=je.rect;if(Je&&lt){const ct=Je.left-lt.left,Fe=Je.top-lt.top,nt=ct/lt.width*100,Ye=Fe/lt.height*100;if(pe.data.current.type==="toolbar-item"){const ot={id:`sig-${Date.now()}`,type:pe.data.current.fieldType,position:{x:nt,y:Ye},pageNumber:Se,metadata:{fieldType:pe.data.current.fieldType,signeeName:"",signeeEmail:"",type:"all",required:!0,order:f.length+1}};g([...f,ot]),j(ot),y(!0),U(!1)}else pe.data.current.type==="signature-field"&&g(f.map(ot=>ot.id===pe.id?{...ot,pageNumber:Se,position:{x:nt,y:Ye}}:ot))}}A(null)},Ce=Le=>{if(!N)return;g(f.map(Se=>Se.id===N.id?{...Se,metadata:Le}:Se));const{signeeName:pe,signeeEmail:je}=Le;pe&&je&&(u.find(Je=>Je.email.toLowerCase()===je.trim().toLowerCase())||h(Je=>[...Je,{id:`signer-${Date.now()}`,name:pe,email:je,role:"signer",order:u.length+1}]))},We=Le=>{g(f.filter(pe=>pe.id!==Le))},Ge=Le=>{j(Le),y(!0)},Oe=()=>{if(f.length===0){qt.error("Please add at least one signature field");return}const Le=new Set(f.map(Se=>Se.metadata?.signeeEmail?.toLowerCase()?.trim()).filter(Boolean)),je=u.filter(Se=>Se.email&&Le.has(Se.email.toLowerCase().trim())).map((Se,Je)=>({...Se,order:Je+1}));h(je),s(2),U(!1)},$e=async()=>{if(i){xe(!0),X(null);try{const Le=new FormData;Le.append("file",i),Le.append("name",i.name);const pe=await fetch("http://127.0.0.1:8000/api/v1/signatures/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:Le});if(!pe.ok)throw new Error("Failed to upload document");const je=(await pe.json()).data.id,Se=f.map(ct=>({signerId:u.find(Fe=>Fe.email===ct.metadata.signeeEmail)?.id,type:"signature",pageNumber:ct.pageNumber,x:ct.position.x,y:ct.position.y,width:200,height:60,metadata:ct.metadata})),Je=u.map(ct=>({id:ct.id,name:ct.name,email:ct.email,order:ct.order}));if(!(await fetch("http://127.0.0.1:8000/api/v1/signatures/send",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({document_id:je,signers:Je,fields:Se})})).ok)throw new Error("Failed to send signature request");ke(!0)}catch(Le){console.error("Sending Error:",Le),X(Le.message||"Failed to send.")}finally{xe(!1)}}};return a.jsxs("div",{className:"max-w-7xl mx-auto h-[calc(100vh-80px)] flex flex-col font-sans",children:[a.jsx(fx,{title:"E-Signature Module",subtitle:"Prepare and send documents",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex items-center bg-slate-100 p-1 rounded-lg",children:V.map(Le=>a.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-md text-xs md:text-sm font-medium transition-all ${t===Le.id?"bg-white text-indigo-600 shadow-sm":"text-slate-500"}`,children:[a.jsx(Le.icon,{size:14}),a.jsx("span",{className:"hidden md:inline",children:Le.title})]},Le.id))}),t===1&&i&&a.jsx("button",{onClick:()=>U(!0),className:"lg:hidden p-2 bg-indigo-600 text-white rounded-lg shadow-md active:scale-95 transition-transform",children:a.jsx(vf,{size:20})})]})}),a.jsx("div",{className:"flex-1 flex overflow-hidden bg-slate-50 border border-slate-200 rounded-xl shadow-sm mb-6 relative",children:a.jsxs(Bd,{sensors:e,onDragStart:ge,onDragEnd:Ne,children:[t===1&&a.jsxs(a.Fragment,{children:[i&&a.jsxs("div",{className:"w-80 bg-white border-r border-slate-200 hidden lg:flex flex-col z-20 h-full",children:[a.jsxs("div",{className:"flex items-center border-b border-slate-200",children:[a.jsx("button",{onClick:()=>I("tools"),className:`flex-1 py-3 text-xs font-bold uppercase tracking-wider transition-colors border-b-2 ${W==="tools"?"border-indigo-600 text-indigo-600 bg-indigo-50/50":"border-transparent text-slate-500 hover:text-slate-700 hover:bg-slate-50"}`,children:"Tools"}),a.jsx("button",{onClick:()=>I("pages"),className:`flex-1 py-3 text-xs font-bold uppercase tracking-wider transition-colors border-b-2 ${W==="pages"?"border-indigo-600 text-indigo-600 bg-indigo-50/50":"border-transparent text-slate-500 hover:text-slate-700 hover:bg-slate-50"}`,children:"Pages"})]}),W==="tools"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"p-4 border-b border-slate-100 bg-white sticky top-0 z-10",children:a.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider flex items-center gap-2",children:[a.jsx(vf,{size:14}),"Signature Tools"]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-6",children:[a.jsx(_3,{}),a.jsxs("div",{className:"pt-6 border-t border-slate-100",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm mb-3",children:[a.jsx("span",{className:"text-slate-600 font-medium",children:"Signers Required"}),a.jsx("span",{className:"font-bold text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded text-xs",children:u.length})]}),a.jsx("div",{className:"space-y-2",children:u.map(Le=>a.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 bg-slate-50 p-2 rounded border border-slate-100",children:[a.jsx("div",{className:"w-5 h-5 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center font-bold text-[10px]",children:Le.order}),a.jsx("span",{className:"truncate flex-1",children:Le.name||Le.email||"New Signer"})]},Le.id))})]})]}),a.jsx("div",{className:"p-4 border-t border-slate-200 bg-slate-50",children:a.jsxs("button",{onClick:Oe,disabled:f.length===0,className:"w-full flex items-center justify-center gap-2 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg shadow-lg hover:shadow-indigo-600/20 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx("span",{children:"Review & Send"}),a.jsx(Ml,{size:16})]})})]}):a.jsx(Ote,{pdfUrl:o,numPages:L,currentPage:1,onPageClick:Le=>{const pe=document.getElementById(`pdf-page-${Le}`);pe&&pe.scrollIntoView({behavior:"smooth"})},signatures:f})]}),a.jsx("div",{className:"flex-1 bg-slate-100/50 relative flex flex-col h-full overflow-hidden",children:i?a.jsx("div",{className:"w-full h-full p-4 md:p-8 flex justify-center bg-slate-200/50 relative overflow-hidden",children:a.jsx("div",{className:"w-full h-full bg-white border border-slate-200 relative rounded-xl overflow-hidden shadow-sm",children:a.jsx("div",{ref:ne,className:"h-full w-full relative",children:a.jsx(kk,{pdfUrl:o,signatures:f,onUpdateSignature:Ce,onRemoveSignature:We,onEditSignature:Ge,onLoadSuccess:({numPages:Le})=>z(Le)})})})}):a.jsx("div",{className:"w-full h-full p-6 flex items-center justify-center overflow-y-auto",children:a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx(e$,{onFileUpload:re})})})})]}),t===2&&a.jsxs("div",{className:"w-full h-full flex bg-slate-50",children:[a.jsxs("div",{className:"w-96 border-r border-slate-200 bg-white hidden lg:flex flex-col h-full shadow-lg z-10",children:[a.jsxs("div",{className:"p-5 border-b border-slate-100 bg-white",children:[a.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"Review Signers"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Verify details before sending."})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2 scrollbar-thin scrollbar-thumb-slate-200",children:a.jsx(E3,{signers:u,onUpdateSigners:h,readOnly:!0})}),a.jsxs("div",{className:"p-5 border-t border-slate-200 bg-slate-50 space-y-3",children:[a.jsxs("button",{onClick:$e,className:"w-full flex items-center justify-center gap-2 py-3 bg-emerald-600 hover:bg-emerald-700 text-white font-bold rounded-lg shadow-lg hover:shadow-emerald-600/20 transition-all",children:[a.jsx(Pm,{size:18}),a.jsx("span",{children:"Send Document"})]}),a.jsx("button",{onClick:()=>s(1),className:"w-full py-2.5 text-slate-500 font-medium hover:text-slate-800 bg-white border border-slate-200 rounded-lg",children:"Back to Edit"})]})]}),a.jsx("div",{className:"lg:hidden absolute bottom-6 w-full flex justify-center z-30 pointer-events-none",children:a.jsxs("button",{onClick:()=>$(!0),className:"pointer-events-auto px-6 py-3 bg-indigo-600 text-white font-bold rounded-full shadow-2xl flex items-center gap-2 animate-bounce",children:[a.jsx(Pm,{size:18}),a.jsx("span",{children:"Finalize & Send"})]})}),a.jsx("div",{className:"flex-1 bg-slate-100/50 relative flex flex-col h-full overflow-hidden",children:a.jsx("div",{className:"w-full h-full p-4 md:p-8 flex justify-center bg-slate-200/50 relative overflow-hidden",children:a.jsx("div",{className:"w-full h-full bg-white border border-slate-200 relative rounded-xl overflow-hidden shadow-sm",children:a.jsx(kk,{pdfUrl:o,signatures:f,readOnly:!0,onUpdateSignature:()=>{},onRemoveSignature:()=>{},onEditSignature:()=>{}})})})})]}),a.jsx(bg,{dropAnimation:null,children:E?a.jsxs("div",{className:"w-48 px-4 py-3 bg-indigo-600 text-white rounded-lg shadow-xl flex items-center gap-2 opacity-90 cursor-grabbing",children:[a.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),a.jsx("span",{className:"font-medium text-sm",children:"Place Field"})]}):null})]})}),a.jsx(Mte,{show:Y,onClose:()=>U(!1),signers:u,onProceed:Oe,canProceed:f.length>0}),a.jsx(Pte,{show:Z,onClose:()=>$(!1),signers:u,onUpdateSigners:h,onSend:$e,onBack:()=>{$(!1),s(1)}}),a.jsx(wg,{isOpen:x,onClose:()=>{y(!1),j(null)},onSave:Ce,initialData:N?.metadata}),a.jsx(dn,{children:(ae||fe||G)&&a.jsx(Ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4",children:a.jsx(Ie.div,{className:"bg-white rounded-2xl shadow-2xl p-0 w-full max-w-lg overflow-hidden border border-white/20",children:a.jsxs("div",{className:"p-8 pb-10 flex flex-col items-center text-center relative z-10",children:[ae&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-16 h-16 border-4 border-indigo-100 border-t-indigo-600 rounded-full animate-spin mb-6"}),a.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Sending Document..."}),a.jsx("p",{className:"text-slate-500",children:"Dispatching to all signers securely."})]}),fe&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-16 h-16 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mb-6",children:a.jsx(us,{size:32})}),a.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Sent Successfully!"}),a.jsx("div",{className:"w-full max-w-xs h-1.5 bg-slate-100 rounded-full overflow-hidden mb-4 mt-2",children:a.jsx(Ie.div,{className:"h-full bg-emerald-500",style:{width:`${se}%`}})}),a.jsx("button",{onClick:()=>n("/signatures/list"),className:"text-sm font-bold text-indigo-600",children:"Redirecting..."})]}),G&&a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-red-500 text-lg font-bold mb-4",children:G}),a.jsx("button",{onClick:()=>X(null),className:"px-6 py-2 bg-slate-900 text-white rounded-lg",children:"Try Again"})]})]})})})})]})},Fte=_.memo(({doc:n,isSelected:e,toggleSelect:t,getStatusInfo:s,getProgress:i,handleResendReminder:r,handleDelete:o,setSelectedDoc:c,setActiveDrawer:u})=>{const h=s(n),f=i(n.signers);return a.jsxs(Ie.tr,{initial:{opacity:0},animate:{opacity:1},whileHover:{backgroundColor:"rgba(248, 250, 252, 0.8)"},className:`group transition-colors ${e?"bg-indigo-50/50":""} border-b border-slate-50 last:border-0`,children:[a.jsx("td",{className:"px-6 py-4 w-12",children:a.jsx("button",{onClick:()=>t(n.id),className:`transition-colors ${e?"text-indigo-600":"text-slate-300 hover:text-slate-500"}`,children:e?a.jsx(wf,{size:18}):a.jsx(jy,{size:18})})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center border transition-colors ${n.status==="completed"?"bg-emerald-50 border-emerald-100 text-emerald-600":"bg-white border-slate-200 text-slate-400 group-hover:border-indigo-200 group-hover:text-indigo-600"}`,children:n.status==="completed"?a.jsx(us,{size:20}):a.jsx(wn,{size:20,strokeWidth:1.5})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-slate-700 text-sm hover:text-indigo-600 cursor-pointer transition-colors line-clamp-1",onClick:()=>{c(n),u("preview")},children:n.name||"Untitled Document"}),a.jsxs("span",{className:"text-[11px] text-slate-400 font-mono",children:["ID: #",n.id.toString().slice(-6)]})]})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2 py-0.5 rounded-full text-[11px] font-bold border ${h.color}`,children:[a.jsx(h.icon,{size:10}),h.label]}),n.signers?.length>0&&a.jsxs("div",{className:"w-32",children:[a.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 mb-1 font-medium",children:[a.jsx("span",{children:"Progress"}),a.jsxs("span",{children:[f,"%"]})]}),a.jsx("div",{className:"h-1.5 bg-slate-100 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${f===100?"bg-emerald-500":"bg-indigo-500"}`,style:{width:`${f}%`}})})]})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex -space-x-2",children:[n.signers?.slice(0,4).map((g,x)=>a.jsxs("div",{className:`w-8 h-8 rounded-full border-2 border-white flex items-center justify-center text-[10px] font-bold text-white shadow-sm ring-1 ring-slate-100 relative group/avatar ${g.status==="signed"?"bg-emerald-500":g.status==="viewed"?"bg-amber-400":"bg-indigo-300"}`,title:`${g.name} (${g.email}) - ${g.status}`,children:[g.name.charAt(0).toUpperCase(),a.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 bg-white rounded-full p-[1px]",children:g.status==="signed"&&a.jsx(us,{size:8,className:"text-emerald-500 fill-emerald-100"})})]},x)),n.signers?.length>4&&a.jsxs("div",{className:"w-8 h-8 rounded-full border-2 border-white bg-slate-100 flex items-center justify-center text-[10px] font-bold text-slate-500 shadow-sm",children:["+",n.signers.length-4]}),(!n.signers||n.signers.length===0)&&a.jsx("span",{className:"text-xs text-slate-400 italic",children:"No signers"})]})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm text-slate-600 font-medium",children:K2(new Date(n.updated_at),"MMM d, yyyy")}),a.jsxs("div",{className:"text-[11px] text-slate-400 mt-0.5 flex items-center gap-1",children:[a.jsx(la,{size:10}),K2(new Date(n.updated_at),"h:mm a")]})]}),a.jsx("td",{className:"px-6 py-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[n.status!=="completed"&&n.signers?.some(g=>g.status!=="signed")&&a.jsx("button",{onClick:()=>r(n.id),className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 hover:text-indigo-600 transition-colors",title:"Resend Signature Request",children:a.jsx(Js,{size:16})}),n.status==="completed"&&a.jsx(tn,{to:`/signatures/${n.id}/view-signed`,className:"p-1.5 hover:bg-emerald-50 rounded-lg text-emerald-600 transition-colors",title:"View Signed PDF",children:a.jsx(_r,{size:16})}),a.jsx("button",{onClick:()=>{c(n),u("audit")},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 hover:text-slate-700 transition-colors",title:"View History",children:a.jsx(w0,{size:16})}),a.jsx("div",{className:"h-4 w-px bg-slate-200 mx-1"}),a.jsx("button",{onClick:()=>o(n.id),className:"p-1.5 hover:bg-red-50 rounded-lg text-slate-300 hover:text-red-500 transition-colors",title:"Delete",children:a.jsx(Ki,{size:16})})]})})]})}),zte=_.memo(({doc:n,getStatusInfo:e,getProgress:t,setSelectedDoc:s,setActiveDrawer:i})=>{const r=e(n),o=t(n.signers);return a.jsxs("div",{className:"p-5 flex flex-col gap-4 active:bg-slate-50 border-b border-slate-100 last:border-0",onClick:()=>{s(n),i("preview")},children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`p-2.5 rounded-xl border ${n.status==="completed"?"bg-emerald-50 border-emerald-100 text-emerald-600":"bg-slate-50 border-slate-100 text-slate-500"}`,children:n.status==="completed"?a.jsx(us,{size:20}):a.jsx(wn,{size:20,strokeWidth:1.5})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-slate-800 text-sm line-clamp-1",children:n.name||"Untitled"}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("span",{className:`px-2 py-0.5 rounded-md text-[10px] font-bold border capitalize ${r.color}`,children:r.label}),a.jsx("span",{className:"text-[10px] text-slate-400",children:K2(new Date(n.updated_at),"M/d/yy")})]})]})]}),a.jsx("button",{onClick:c=>{c.stopPropagation(),s(n),i("preview")},className:"p-1 text-slate-300 hover:text-slate-600",children:a.jsx(bf,{size:20})})]}),n.signers?.length>0&&a.jsxs("div",{className:"bg-slate-50 rounded-xl p-3 border border-slate-100",children:[a.jsxs("div",{className:"flex justify-between text-xs mb-2",children:[a.jsx("span",{className:"text-slate-500 font-medium",children:"Signature Progress"}),a.jsxs("span",{className:"font-bold text-indigo-600",children:[o,"%"]})]}),a.jsx("div",{className:"h-1.5 bg-slate-200 rounded-full overflow-hidden mb-3",children:a.jsx("div",{className:`h-full rounded-full ${o===100?"bg-emerald-500":"bg-indigo-500"}`,style:{width:`${o}%`}})}),a.jsx("div",{className:"flex -space-x-2",children:n.signers.map((c,u)=>a.jsx("div",{className:`w-7 h-7 rounded-full border-2 border-white flex items-center justify-center text-[10px] text-white font-bold ${c.status==="signed"?"bg-emerald-500":"bg-indigo-400"}`,children:c.name.charAt(0)},u))})]})]})}),Ite=()=>{const[n,e]=_.useState([]),[t,s]=_.useState(!0),[i,r]=_.useState(""),[o,c]=_.useState("all"),[u,h]=_.useState("newest"),[f,g]=_.useState([]),[x,y]=_.useState(null),[N,j]=_.useState(null),E=_.useCallback(async()=>{s(!0);try{const U=await wt.get("/signatures"),Z=U.data.data||U.data;e(Array.isArray(Z)?Z:[])}catch(U){console.error("Error fetching documents:",U),Te.error("Failed to refresh documents")}finally{s(!1)}},[]);_.useEffect(()=>{E()},[E]);const A=_.useMemo(()=>{let U=[...n];if(o!=="all"&&(U=U.filter(Z=>{let $="draft";return Z.status==="completed"?$="completed":Z.signers?.length>0&&($="pending"),$===o})),i){const Z=i.toLowerCase();U=U.filter($=>($.name||"").toLowerCase().includes(Z)||$.signers?.some(ae=>ae.email.toLowerCase().includes(Z)))}return U.sort((Z,$)=>u==="newest"?new Date($.created_at)-new Date(Z.created_at):u==="oldest"?new Date(Z.created_at)-new Date($.created_at):u==="name"?(Z.name||"").localeCompare($.name||""):0),U},[n,o,i,u]),R=_.useCallback(U=>{g(Z=>Z.includes(U)?Z.filter($=>$!==U):[...Z,U])},[]),M=_.useCallback(()=>{f.length===A.length?g([]):g(A.map(U=>U.id))},[f.length,A]),L=_.useCallback(async U=>{if(confirm("Are you sure you want to delete this document?"))try{await wt.delete(`/documents/${U}`),e(Z=>Z.filter($=>$.id!==U)),g(Z=>Z.filter($=>$!==U)),Te.success("Document deleted")}catch{Te.error("Failed to delete document")}},[]),z=async()=>{if(confirm(`Delete ${f.length} documents?`))try{e(U=>U.filter(Z=>!f.includes(Z.id))),g([]),Te.success(`${f.length} Documents deleted`)}catch{Te.error("Bulk delete failed")}},W=_.useCallback(async U=>{Te.promise(new Promise(Z=>setTimeout(Z,1e3)),{loading:"Sending reminders...",success:"Reminders sent to pending signers!",error:"Failed to send"})},[]),I=_.useCallback(U=>U.status==="completed"?{label:"Completed",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:us}:U.signers?.length>0?{label:"In Progress",color:"bg-indigo-50 text-indigo-700 border-indigo-200",icon:la}:{label:"Draft",color:"bg-slate-100 text-slate-600 border-slate-200",icon:wn},[]),Y=_.useCallback(U=>{if(!U?.length)return 0;const Z=U.filter($=>$.status==="signed").length;return Math.round(Z/U.length*100)},[]);return a.jsxs(Pv,{children:[a.jsx(fx,{title:"Signature Requests",subtitle:"Manage your digital agreements and track progress",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:E,className:"p-2.5 bg-white border border-slate-200 text-slate-500 hover:text-indigo-600 hover:border-indigo-200 rounded-xl transition-all shadow-sm hover:shadow",title:"Refresh List",children:a.jsx(e7,{size:18,className:t?"animate-spin":""})}),a.jsxs(tn,{to:"/signatures",className:"flex items-center gap-2 px-6 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-xl transition-all shadow-lg shadow-indigo-600/20",children:[a.jsx(kd,{size:20}),"New Request"]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[{label:"Pending Signatures",value:n.filter(U=>U.signers?.length>0&&U.status!=="completed").length,color:"text-indigo-600",bg:"bg-indigo-50"},{label:"Completed",value:n.filter(U=>U.status==="completed").length,color:"text-emerald-600",bg:"bg-emerald-50"},{label:"Total Documents",value:n.length,color:"text-slate-600",bg:"bg-slate-50"}].map((U,Z)=>a.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-wide",children:U.label}),a.jsx("p",{className:"text-2xl font-bold text-slate-800 mt-1",children:U.value})]}),a.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${U.bg} ${U.color}`,children:a.jsx(wn,{size:20})})]},Z))}),a.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 bg-white p-2 rounded-xl shadow-sm border border-slate-200 mb-6",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Xm,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-slate-400",size:18}),a.jsx("input",{type:"text",placeholder:"Search by document name, signer email...",value:i,onChange:U=>r(U.target.value),className:"w-full pl-11 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-100 focus:border-slate-300 focus:bg-white outline-none transition-all placeholder:text-slate-400 font-medium text-slate-700"})]}),a.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 lg:pb-0",children:[a.jsx("div",{className:"bg-slate-100 p-1 rounded-lg flex",children:["all","pending","completed"].map(U=>a.jsx("button",{onClick:()=>c(U),className:`px-4 py-1.5 rounded-md text-sm font-semibold capitalize transition-all ${o===U?"bg-white text-slate-800 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:U},U))}),a.jsx("div",{className:"h-8 w-px bg-slate-200 mx-2 hidden lg:block"}),a.jsxs("select",{value:u,onChange:U=>h(U.target.value),className:"px-4 py-2.5 bg-white border border-slate-200 rounded-lg text-sm font-medium text-slate-700 outline-none focus:border-slate-300 hover:bg-slate-50 transition-colors cursor-pointer",children:[a.jsx("option",{value:"newest",children:"Newest First"}),a.jsx("option",{value:"oldest",children:"Oldest First"}),a.jsx("option",{value:"name",children:"Name (A-Z)"})]})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl shadow-sm overflow-hidden relative min-h-[400px]",children:[a.jsx(dn,{children:f.length>0&&a.jsxs(Ie.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},className:"absolute bottom-6 left-1/2 -translate-x-1/2 z-30 bg-slate-900 text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-6",children:[a.jsxs("span",{className:"text-sm font-semibold text-slate-300 border-r border-slate-700 pr-4",children:[f.length," Selected"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"p-2 hover:bg-slate-800 rounded-full transition-colorsAsync text-slate-300 hover:text-white",title:"Download All",children:a.jsx(Yi,{size:18})}),a.jsx("button",{className:"p-2 hover:bg-slate-800 rounded-full transition-colors text-slate-300 hover:text-white",title:"Archive",children:a.jsx(t9,{size:18})}),a.jsx("button",{onClick:z,className:"p-2 hover:bg-red-900/50 rounded-full transition-colors text-red-300 hover:text-red-200",title:"Delete Selected",children:a.jsx(Ki,{size:18})})]}),a.jsx("button",{onClick:()=>g([]),className:"ml-2 text-xs font-bold text-slate-400 hover:text-white",children:"Cancel"})]})}),a.jsx("div",{className:"hidden md:block overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-slate-50/50 border-b border-slate-200",children:[a.jsx("th",{className:"px-6 py-3 w-12 text-center",children:a.jsx("button",{onClick:M,className:"text-slate-400 hover:text-indigo-600 transition-colors flex justify-center",children:f.length>0&&f.length===A.length?a.jsx(wf,{size:18,className:"text-indigo-600"}):a.jsx(jy,{size:18})})}),a.jsx("th",{className:"px-6 py-3 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Document Name"}),a.jsx("th",{className:"px-6 py-3 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Status & Progress"}),a.jsx("th",{className:"px-6 py-3 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Signers"}),a.jsx("th",{className:"px-6 py-3 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Last Updated"}),a.jsx("th",{className:"px-6 py-3 w-32"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-100",children:t?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"p-32 text-center",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-8 h-8 border-2 border-slate-200 border-t-indigo-600 rounded-full animate-spin mb-4"}),a.jsx("p",{className:"text-slate-500 font-medium text-sm",children:"Loading documents..."})]})})}):A.length===0?a.jsx("tr",{children:a.jsxs("td",{colSpan:"6",className:"p-24 text-center",children:[a.jsx("div",{className:"bg-slate-50 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(wn,{size:32,className:"text-slate-300",strokeWidth:1})}),a.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"No documents found"}),a.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Try adjusting your search or filters."})]})}):A.map(U=>a.jsx(Fte,{doc:U,isSelected:f.includes(U.id),toggleSelect:R,getStatusInfo:I,getProgress:Y,handleResendReminder:W,handleDelete:L,setSelectedDoc:j,setActiveDrawer:y},U.id))})]})}),a.jsx("div",{className:"md:hidden",children:t?a.jsxs("div",{className:"p-12 text-center flex flex-col items-center",children:[a.jsx("div",{className:"w-8 h-8 border-2 border-slate-200 border-t-indigo-600 rounded-full animate-spin mb-4"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Loading documents..."})]}):A.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx("div",{className:"bg-slate-50 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(wn,{size:32,className:"text-slate-300",strokeWidth:1})}),a.jsx("p",{className:"text-slate-500 font-medium",children:"No documents found."})]}):A.map(U=>a.jsx(zte,{doc:U,getStatusInfo:I,getProgress:Y,setSelectedDoc:j,setActiveDrawer:y},U.id))})]}),a.jsx(dn,{children:x&&N&&a.jsxs(a.Fragment,{children:[a.jsx(Ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-slate-900/20 backdrop-blur-sm z-40",onClick:()=>y(null)}),a.jsxs(Ie.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},className:"fixed inset-y-0 right-0 w-full max-w-lg bg-white shadow-2xl z-50 flex flex-col border-l border-slate-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between bg-white",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-slate-800",children:x==="audit"?"Audit Trail":"Document Details"}),a.jsx("p",{className:"text-sm text-slate-500 mt-0.5 truncate max-w-[300px]",children:N.name})]}),a.jsx("button",{onClick:()=>y(null),className:"p-2 rounded-full hover:bg-slate-50 transition-all text-slate-400 hover:text-slate-700",children:a.jsx(bs,{size:20})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:x==="preview"?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[N.status==="completed"&&a.jsxs(tn,{to:`/signatures/${N.id}/view-signed`,className:"col-span-2 flex items-center justify-center gap-2 p-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-semibold transition-colors shadow-lg shadow-emerald-600/10",children:[a.jsx(_r,{size:18})," View Signed Document"]}),N.pdf_url&&a.jsxs("a",{href:N.pdf_url,target:"_blank",className:"flex items-center justify-center gap-2 p-3 bg-white border border-slate-200 hover:border-slate-300 text-slate-700 rounded-xl font-medium transition-all",children:[a.jsx(wn,{size:18})," Original PDF"]}),a.jsxs("div",{className:"relative group w-full",children:[N.final_pdf_url?a.jsxs("a",{href:N.final_pdf_url,download:!0,className:"flex items-center justify-center gap-2 p-3 bg-white border border-slate-200 hover:border-slate-300 text-slate-700 rounded-xl font-medium transition-all shadow-sm hover:shadow",children:[a.jsx(Yi,{size:18})," Signed PDF"]}):a.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-slate-50 border border-slate-200 text-slate-400 rounded-xl font-medium cursor-not-allowed select-none opacity-60",children:[a.jsx(Yi,{size:18})," Signed PDF"]}),!N.final_pdf_url&&a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 w-max max-w-[200px] hidden group-hover:block transition-all z-50",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-0 h-0 border-l-[6px] border-l-transparent border-r-[6px] border-r-transparent border-b-[6px] border-b-slate-800 absolute left-1/2 -translate-x-1/2 -top-[6px]"}),a.jsx("div",{className:"bg-slate-800 text-white text-xs font-medium px-3 py-2 rounded-lg shadow-xl text-center",children:N.status==="completed"?"Processing final document...":"Waiting for all parties to sign."})]})})]})]}),a.jsxs("div",{className:"bg-slate-50 rounded-2xl p-5 border border-slate-100 space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-slate-500 font-medium",children:"Status"}),a.jsx("span",{className:"px-2 py-1 rounded-md text-xs font-bold uppercase tracking-wider bg-white border border-slate-200 text-slate-700",children:N.status})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-slate-500 font-medium",children:"Created On"}),a.jsx("span",{className:"text-sm font-semibold text-slate-700",children:new Date(N.created_at).toLocaleString()})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-slate-500 font-medium",children:"Last Activity"}),a.jsx("span",{className:"text-sm font-semibold text-slate-700",children:new Date(N.updated_at).toLocaleString()})]})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[a.jsx(Ai,{size:18,className:"text-slate-500"}),"Signers (",N.signers?.length||0,")"]}),a.jsx("div",{className:"space-y-3",children:N.signers?.map((U,Z)=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-xl shadow-sm",children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold ${U.status==="signed"?"bg-emerald-500":"bg-slate-400"}`,children:U.name.charAt(0)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-slate-800 text-sm",children:U.name}),a.jsx("p",{className:"text-xs text-slate-400",children:U.email})]}),U.status==="signed"?a.jsx(us,{size:18,className:"text-emerald-500"}):a.jsx("button",{onClick:()=>W(N.id),className:"text-xs text-slate-600 hover:text-slate-900 font-medium bg-slate-100 px-2 py-1 rounded transition-colors",children:"Resend"})]},Z))})]})]}):a.jsxs("div",{className:"relative border-l-2 border-slate-200 ml-3 space-y-8 pb-10",children:[a.jsxs("div",{className:"relative pl-8",children:[a.jsx("div",{className:"absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-slate-200 ring-4 ring-white"}),a.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Created"}),a.jsx("p",{className:"text-sm font-medium text-slate-800 mt-0.5",children:"Document Created"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:new Date(N.created_at).toLocaleString()})]}),N.signers?.map((U,Z)=>a.jsxs("div",{className:"relative pl-8",children:[a.jsx("div",{className:`absolute -left-[9px] top-0 w-4 h-4 rounded-full ring-4 ring-white ${U.status==="signed"?"bg-emerald-500":"bg-slate-300"}`}),a.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:U.status==="signed"?"Signed":"Pending"}),a.jsxs("div",{className:"bg-slate-50 border border-slate-200 p-3 rounded-lg mt-2",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(Ai,{size:14,className:"text-slate-400"}),a.jsx("span",{className:"text-sm font-semibold text-slate-700",children:U.name})]}),a.jsx("p",{className:"text-xs text-slate-500",children:U.email}),U.status==="signed"&&a.jsxs("div",{className:"mt-2 text-[10px] text-emerald-600 bg-emerald-50 border border-emerald-100 px-2 py-1 rounded inline-flex items-center gap-1",children:[a.jsx(us,{size:10})," Verified & Timestamped"]})]}),a.jsx("p",{className:"text-xs text-slate-400 mt-2 ml-1",children:new Date(U.updated_at).toLocaleString()})]},Z))]})})]})]})})]})},Bte=_.memo(({show:n,onClose:e,auditLogs:t})=>a.jsx(dn,{children:n&&a.jsxs(a.Fragment,{children:[a.jsx(Ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-40 lg:hidden",onClick:e}),a.jsxs(Ie.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-0 right-0 h-[80vh] bg-white rounded-t-2xl shadow-[0_-8px_30px_rgba(0,0,0,0.12)] z-50 lg:hidden flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between bg-slate-50/50 rounded-t-2xl",children:[a.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[a.jsx(w0,{size:18,className:"text-indigo-600"}),"Audit Trail"]}),a.jsx("button",{onClick:e,className:"p-2 bg-slate-100 rounded-full text-slate-500",children:a.jsx(bs,{size:20})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-white",children:a.jsx("div",{className:"relative border-l-2 border-slate-100 ml-3 space-y-8 pb-8",children:t.map((s,i)=>{const r=c=>{switch(c){case"COMPLETED":return a.jsx(us,{size:14,className:"text-emerald-600"});case"SIGNED":return a.jsx(ar,{size:14,className:"text-indigo-600"});case"VIEWED":return a.jsx(Ai,{size:14,className:"text-amber-600"});default:return a.jsx(la,{size:14,className:"text-slate-500"})}},o=c=>{switch(c){case"COMPLETED":return"bg-emerald-100 ring-emerald-200";case"SIGNED":return"bg-indigo-100 ring-indigo-200";case"VIEWED":return"bg-amber-100 ring-amber-200";default:return"bg-slate-100 ring-slate-200"}};return a.jsxs("div",{className:"relative pl-8",children:[a.jsx("div",{className:`absolute -left-[9px] top-0 w-5 h-5 rounded-full flex items-center justify-center ring-4 ring-white shadow-sm z-10 ${o(s.action)}`,children:r(s.action)}),a.jsxs("div",{className:"bg-slate-50 rounded-xl p-3 border border-slate-100",children:[a.jsxs("div",{className:"flex justify-between items-start mb-1",children:[a.jsx("span",{className:"text-[10px] font-bold text-slate-700 uppercase tracking-wider",children:s.action}),a.jsx("span",{className:"text-[10px] text-slate-400",children:new Date(s.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Ai,{size:12,className:"text-slate-400"}),a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:s.metadata?.signer_name||s.user||"System"})]}),a.jsxs("div",{className:"text-[10px] text-slate-400 pt-2 border-t border-slate-200/50 flex justify-between",children:[a.jsx("span",{children:new Date(s.created_at).toLocaleDateString()}),s.ip_address&&a.jsx("span",{className:"font-mono bg-white px-1 rounded border border-slate-100",children:s.ip_address})]})]})]},i)})})}),a.jsx("div",{className:"p-3 bg-slate-50 text-center border-t border-slate-100",children:a.jsxs("p",{className:"text-[10px] text-slate-400 flex items-center justify-center gap-1",children:[a.jsx(Ho,{size:10})," End-to-End Encrypted Log"]})})]})]})})),Hte=_.memo(({show:n,auditLogs:e})=>a.jsxs(Ie.aside,{initial:{width:0,opacity:0},animate:{width:n?320:0,opacity:n?1:0},transition:{duration:.3,ease:"anticipate"},className:"bg-white border-l border-slate-200 overflow-hidden hidden lg:flex flex-col shadow-xl z-20 relative",children:[a.jsx("div",{className:"p-5 border-b border-slate-100 bg-slate-50/50",children:a.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2 text-sm uppercase tracking-wide",children:[a.jsx(w0,{size:16,className:"text-indigo-600"}),"Audit Log"]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-5 space-y-6",children:a.jsx("div",{className:"relative border-l-2 border-slate-100 ml-2.5",children:e.map((t,s)=>{const i=o=>{switch(o){case"COMPLETED":return a.jsx(us,{size:12,className:"text-emerald-600"});case"SIGNED":return a.jsx(ar,{size:12,className:"text-indigo-600"});case"VIEWED":return a.jsx(Ai,{size:12,className:"text-amber-600"});default:return a.jsx(la,{size:12,className:"text-slate-500"})}},r=o=>{switch(o){case"COMPLETED":return"bg-emerald-50 ring-emerald-100";case"SIGNED":return"bg-indigo-50 ring-indigo-100";case"VIEWED":return"bg-amber-50 ring-amber-100";default:return"bg-slate-50 ring-slate-100"}};return a.jsxs("div",{className:"relative pl-6 mb-6 last:mb-0",children:[a.jsx("div",{className:`absolute -left-[7px] top-0 w-4 h-4 rounded-full flex items-center justify-center ring-4 ring-white shadow-sm z-10 ${r(t.action)}`,children:i(t.action)}),a.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3 shadow-sm hover:shadow-md transition-all hover:border-indigo-100 group",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase",children:t.action}),a.jsx("span",{className:"text-[10px] text-slate-400",children:new Date(t.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),a.jsx("div",{className:"text-xs font-semibold text-slate-700 mb-1.5 line-clamp-1",title:t.metadata?.signer_name,children:t.metadata?.signer_name||t.user||"System Action"}),a.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-slate-50",children:[a.jsx("span",{className:"text-[10px] text-slate-400",children:new Date(t.created_at).toLocaleDateString()}),t.ip_address&&a.jsx("span",{className:"text-[9px] font-mono text-slate-300",children:t.ip_address})]})]})]},s)})})}),a.jsx("div",{className:"p-3 bg-slate-50 border-t border-slate-100 text-center",children:a.jsxs("p",{className:"text-[10px] text-slate-400 flex items-center justify-center gap-1",children:[a.jsx(Ho,{size:10})," Certified Immutable"]})})]}));kl.workerSrc=Yv;const Ute=()=>{const{documentId:n}=Wo(),e=ts(),t=_.useRef(null),[s,i]=_.useState(null),[r,o]=_.useState([]),[c,u]=_.useState(!0),[h,f]=_.useState(null),[g,x]=_.useState(null),[y,N]=_.useState(null),[j,E]=_.useState(1),[A,R]=_.useState(1),[M,L]=_.useState(!1),[z,W]=_.useState(!0),I="http://127.0.0.1:8000/api/v1".replace("/api/v1","")||"http://localhost:8000";_.useEffect(()=>{const $=()=>{window.innerWidth<768?(R(.6),W(!1)):(R(1),W(!0))};return $(),window.addEventListener("resize",$),Y(),()=>window.removeEventListener("resize",$)},[n]);const Y=async()=>{u(!0),f(null);try{const $=await wt.get(`/signatures/${n}/view-signed`),ae=$.data.document;i(ae),o($.data.audit_logs||[]);const xe=ae.final_pdf_url||ae.pdf_url;if(!xe){f("PDF URL not available. Document may not have been completed yet.");return}x(xe)}catch($){console.error("Failed to load signed document",$),f("Document not found or not completed yet.")}finally{u(!1)}},U=({numPages:$})=>{N($)},Z=()=>{if(s?.final_pdf_url){const $=s.final_pdf_url.startsWith("http")?s.final_pdf_url:`${I}${s.final_pdf_url}`;window.location.href=$}};return c?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(Sn,{size:48,className:"text-indigo-600 animate-spin mb-4"}),a.jsx("p",{className:"text-slate-600 font-medium",children:"Retrieving secure document..."})]})}):h||!s?a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-slate-50",children:a.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center border border-slate-100",children:[a.jsx(wa,{size:48,className:"text-red-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-2",children:"Unavailable"}),a.jsx("p",{className:"text-slate-500 mb-6",children:h||"Document not found."}),a.jsx("button",{onClick:()=>e("/signatures/list"),className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-semibold active:scale-95 transition-transform",children:"Go Back"})]})}):a.jsxs("div",{className:"h-[100dvh] bg-slate-100/50 flex flex-col font-sans overflow-hidden",children:[a.jsxs("header",{className:"bg-white/80 backdrop-blur-md h-14 md:h-16 border-b border-slate-200/60 px-4 md:px-6 flex items-center justify-between shadow-sm z-30 flex-shrink-0 relative",children:[a.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[a.jsx("button",{onClick:()=>e("/signatures/list"),className:"p-2 -ml-2 text-slate-500 hover:text-slate-800 hover:bg-slate-100 rounded-full transition-colors",children:a.jsx(Ia,{size:20})}),a.jsxs("div",{className:"flex flex-col min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h1",{className:"font-bold text-slate-800 text-sm md:text-lg truncate max-w-[150px] md:max-w-xs leading-tight",children:s.name}),a.jsxs("div",{className:"hidden md:flex items-center gap-1 px-2 py-0.5 bg-emerald-50 border border-emerald-100 text-emerald-700 rounded-full text-[10px] font-bold uppercase tracking-wide",children:[a.jsx(Tr,{size:10,className:"fill-emerald-700"})," Verified"]})]}),a.jsxs("p",{className:"text-[10px] text-slate-400 md:hidden flex items-center gap-1",children:[a.jsx(Tr,{size:8,className:"text-emerald-500"}),"Signed & Verified"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>L(!0),className:"md:hidden p-2 text-slate-500 active:bg-slate-100 rounded-xl",children:a.jsx(w0,{size:20})}),a.jsxs("button",{onClick:()=>W(!z),className:`hidden lg:flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${z?"bg-indigo-50 text-indigo-700 ring-1 ring-indigo-200":"text-slate-600 hover:bg-slate-50 border border-slate-200"}`,children:[a.jsx(w0,{size:16}),a.jsx("span",{className:"hidden xl:inline",children:z?"Hide Log":"Log"})]}),a.jsxs("button",{onClick:Z,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-xs md:text-sm font-semibold rounded-lg shadow-lg shadow-indigo-600/20 active:scale-95 transition-transform",children:[a.jsx(Yi,{size:16}),a.jsx("span",{className:"hidden md:inline",children:"Download"})]})]})]}),a.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[a.jsxs("div",{className:"w-64 bg-white border-r border-slate-200 overflow-y-auto hidden xl:block z-10 flex-col",children:[a.jsx("div",{className:"p-4 border-b border-slate-100 bg-slate-50/50 sticky top-0 backdrop-blur-sm z-10",children:a.jsxs("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:[y," Pages"]})}),a.jsx("div",{className:"p-4 space-y-4",children:y&&Array.from({length:y},($,ae)=>a.jsx("button",{onClick:()=>{E(ae+1),s.getElementById(`pdf-page-${ae+1}`)?.scrollIntoView({behavior:"smooth"})},className:`w-full relative group transition-all ${j===ae+1?"ring-2 ring-indigo-500 rounded-lg scale-[1.02]":"hover:opacity-80"}`,children:a.jsxs("div",{className:"aspect-[3/4] bg-slate-100 rounded-lg overflow-hidden relative border border-slate-200",children:[g&&a.jsx(_f,{file:g,className:"opacity-75 pointer-events-none",children:a.jsx(Tf,{pageNumber:ae+1,width:200,renderTextLayer:!1,renderAnnotationLayer:!1})}),a.jsx("div",{className:"absolute bottom-1 right-1 bg-black/50 text-white text-[10px] px-1.5 rounded font-medium backdrop-blur-sm",children:ae+1})]})},ae))})]}),a.jsx("div",{ref:t,className:"flex-1 w-full overflow-y-auto overflow-x-hidden p-4 md:p-8 flex flex-col items-center bg-slate-100 scroll-smooth",onScroll:$=>{const ae=$.target;ae.clientHeight,ae.scrollTop},children:g?a.jsx(_f,{file:g,onLoadSuccess:U,loading:a.jsx(Sn,{className:"animate-spin text-indigo-500 mt-20",size:32}),className:"flex flex-col items-center gap-4 md:gap-8 pb-32 w-full max-w-4xl mx-auto",children:y&&Array.from({length:y},($,ae)=>a.jsxs("div",{id:`pdf-page-${ae+1}`,className:"relative shadow-xl shadow-slate-200/60 transition-transform duration-200 origin-top",style:{width:"fit-content"},children:[a.jsx(Tf,{pageNumber:ae+1,scale:A,renderTextLayer:!0,renderAnnotationLayer:!1,className:"bg-white",width:window.innerWidth<768?window.innerWidth-32:800}),a.jsxs("div",{className:"absolute top-2 right-2 bg-black/30 text-white text-[10px] px-2 py-0.5 rounded-full backdrop-blur-md md:hidden",children:[ae+1," / ",y]})]},`page-${ae+1}`))}):a.jsx("div",{className:"text-slate-400 mt-20",children:"Document not loaded"})}),a.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 z-30 flex items-center gap-2",children:a.jsxs(Ie.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},className:"flex items-center gap-1 p-1.5 bg-slate-900/80 backdrop-blur-md text-white rounded-full shadow-2xl ring-1 ring-white/10",children:[a.jsx("button",{onClick:()=>R($=>Math.max(.4,$-.1)),className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:a.jsx(Yo,{size:18})}),a.jsxs("span",{className:"w-10 text-center text-xs font-mono font-bold",children:[Math.round(A*100),"%"]}),a.jsx("button",{onClick:()=>R($=>Math.min(2,$+.1)),className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:a.jsx(Go,{size:18})})]})}),a.jsx(Hte,{show:z,auditLogs:r})]}),a.jsx(Bte,{show:M,onClose:()=>L(!1),auditLogs:r})]})};function lS(n,e=2){if(!+n)return"0 Bytes";const t=1024,s=e<0?0:e,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(n)/Math.log(t));return`${parseFloat((n/Math.pow(t,r)).toFixed(s))} ${i[r]}`}const Vte=({node:n,viewMode:e,onNavigate:t,onPreview:s,onContextMenu:i,onDownload:r})=>{const o=()=>{if(n.type==="folder")return a.jsx(A5,{className:"text-indigo-500",size:e==="grid"?48:20});const g=n.mime_type||"";return g.startsWith("image/")?a.jsx(sN,{className:"text-green-500",size:e==="grid"?48:20}):g==="application/pdf"||g.includes("document")?a.jsx(wn,{className:"text-red-500",size:e==="grid"?48:20}):a.jsx(Q9,{className:"text-slate-400",size:e==="grid"?48:20})},c=()=>{n.type==="folder"?t(n):s(n)},u=g=>{g.preventDefault(),i(g,n)},h=g=>{g.stopPropagation(),r(n)},f=g=>{g.stopPropagation(),i(g,n)};return e==="grid"?a.jsxs("div",{onClick:c,onContextMenu:u,className:"group relative bg-white rounded-xl border border-slate-200 p-4 hover:shadow-lg hover:border-indigo-300 transition-all cursor-pointer",children:[a.jsxs("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[n.type==="file"&&a.jsx("button",{onClick:h,className:"p-1.5 bg-white hover:bg-indigo-50 rounded-lg shadow-md border border-slate-200 text-slate-600 hover:text-indigo-600 transition-colors",title:"Download",children:a.jsx(Yi,{size:14})}),a.jsx("button",{onClick:f,className:"p-1.5 bg-white hover:bg-indigo-50 rounded-lg shadow-md border border-slate-200 text-slate-600 hover:text-indigo-600 transition-colors",title:"More actions",children:a.jsx(bf,{size:14})})]}),a.jsxs("div",{className:"flex flex-col items-center text-center",children:[a.jsx("div",{className:"mb-3",children:o()}),a.jsx("p",{className:"text-sm font-medium text-slate-700 truncate w-full",title:n.name,children:n.name}),n.type==="file"&&a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:lS(n.size)})]})]}):a.jsxs("div",{onClick:c,onContextMenu:u,className:"group flex items-center justify-between px-6 py-3 hover:bg-slate-50 transition-colors cursor-pointer border-b border-slate-100 last:border-0",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[o(),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-slate-700 truncate",children:n.name}),a.jsx("p",{className:"text-xs text-slate-400 capitalize",children:n.type})]})]}),a.jsxs("div",{className:"flex items-center gap-6",children:[n.type==="file"&&a.jsx("span",{className:"text-sm text-slate-500 hidden md:block",children:lS(n.size)}),a.jsx("span",{className:"text-sm text-slate-500 hidden lg:block",children:new Date(n.updated_at).toLocaleDateString()}),a.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[n.type==="file"&&a.jsx("button",{onClick:h,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-600 hover:text-indigo-600 transition-colors",title:"Download",children:a.jsx(Yi,{size:16})}),a.jsx("button",{onClick:f,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-600 hover:text-indigo-600 transition-colors",title:"More actions",children:a.jsx(bf,{size:16})})]})]})]})},Wte=({items:n,onNavigate:e})=>a.jsxs("nav",{className:"flex items-center space-x-1 text-sm text-slate-500 overflow-x-auto scrollbar-none pb-2",children:[a.jsxs("button",{onClick:()=>e(null),className:`flex items-center hover:text-indigo-600 transition-colors ${n.length===0?"font-semibold text-slate-800":""}`,children:[a.jsx(uU,{size:16}),a.jsx("span",{className:"ml-1",children:"Home"})]}),n.map((t,s)=>{const i=s===n.length-1;return a.jsxs(ht.Fragment,{children:[a.jsx(fo,{size:14,className:"text-slate-400 shrink-0"}),a.jsx("button",{onClick:()=>!i&&e(t),disabled:i,className:`whitespace-nowrap hover:text-indigo-600 transition-colors ${i?"font-semibold text-slate-800 cursor-default hover:text-slate-800":""}`,children:t.name})]},t.id)})]}),Gte=({node:n,onClose:e})=>{if(!n)return null;const t=n.mime_type?.startsWith("image/"),s=n.mime_type==="application/pdf",i=`/api/v1/drive/nodes/${n.id}/preview`;return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] flex flex-col overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-200",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-800 truncate",children:n.name}),a.jsx("p",{className:"text-sm text-slate-500",children:n.mime_type||"Unknown type"})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[a.jsx("a",{href:i,download:!0,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-600 transition-colors",title:"Download",children:a.jsx(Yi,{size:20})}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-600 transition-colors",children:a.jsx(bs,{size:20})})]})]}),a.jsx("div",{className:"flex-1 overflow-auto bg-slate-50 flex items-center justify-center p-6",children:t?a.jsx("img",{src:i,alt:n.name,className:"max-w-full max-h-full object-contain rounded-lg shadow-lg"}):s?a.jsx("iframe",{src:i,className:"w-full h-full min-h-[600px] rounded-lg shadow-lg bg-white",title:n.name}):a.jsxs("div",{className:"text-center",children:[a.jsx(H9,{className:"mx-auto text-slate-300 mb-4",size:48}),a.jsx("p",{className:"text-slate-600 font-medium mb-2",children:"Preview not available"}),a.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"This file type cannot be previewed in the browser"}),a.jsxs("a",{href:i,download:!0,className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors",children:[a.jsx(Yi,{size:18}),"Download File"]})]})})]})})},Yte=({x:n,y:e,node:t,isBackground:s,onClose:i,onRename:r,onDownload:o,onDelete:c,onMove:u,onCut:h,onCopy:f,onPaste:g,clipboardState:x})=>{const y=_.useRef(null);if(_.useEffect(()=>{const j=A=>{y.current&&!y.current.contains(A.target)&&i()},E=A=>{A.key==="Escape"&&i()};return document.addEventListener("mousedown",j),document.addEventListener("keydown",E),()=>{document.removeEventListener("mousedown",j),document.removeEventListener("keydown",E)}},[i]),s)return a.jsx("div",{ref:y,className:"fixed bg-white rounded-lg shadow-2xl border border-slate-200 py-1 z-50 min-w-[200px]",style:{top:`${e}px`,left:`${n}px`},children:x&&a.jsxs("button",{onClick:()=>{g(null),i()},className:"w-full flex items-center justify-between gap-3 px-4 py-2.5 text-sm transition-colors text-indigo-600 hover:bg-indigo-50 font-medium",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ZE,{size:16}),a.jsxs("span",{className:"font-medium",children:["Paste ",x.operation==="cut"?"(Move)":"(Copy)"]})]}),a.jsx("span",{className:"text-xs text-slate-400",children:"Ctrl+V"})]})});const N=[...t.type==="file"?[{icon:Yi,label:"Download",action:()=>{o(t),i()}}]:[],{icon:oN,label:"Rename",action:()=>{r(t),i()}},{type:"separator"},{icon:l7,label:"Cut",action:()=>{h(t),i()},shortcut:"Ctrl+X"},{icon:O9,label:"Copy",action:()=>{f(t),i()},shortcut:"Ctrl+C"},...x?[{icon:ZE,label:`Paste ${x.operation==="cut"?"(Move)":"(Copy)"}`,action:()=>{g(t),i()},shortcut:"Ctrl+V",highlight:!0}]:[],{type:"separator"},{icon:q9,label:"Move to...",action:()=>{u(t),i()}},{icon:Ki,label:"Delete",action:()=>{c(t),i()},danger:!0}];return a.jsx("div",{ref:y,className:"fixed bg-white rounded-lg shadow-2xl border border-slate-200 py-1 z-50 min-w-[200px]",style:{top:`${e}px`,left:`${n}px`},children:N.map((j,E)=>j.type==="separator"?a.jsx("div",{className:"h-px bg-slate-200 my-1"},E):a.jsxs("button",{onClick:j.action,className:`w-full flex items-center justify-between gap-3 px-4 py-2.5 text-sm transition-colors ${j.danger?"text-red-600 hover:bg-red-50":j.highlight?"text-indigo-600 hover:bg-indigo-50 font-medium":"text-slate-700 hover:bg-slate-50"}`,children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(j.icon,{size:16}),a.jsx("span",{className:"font-medium",children:j.label})]}),j.shortcut&&a.jsx("span",{className:"text-xs text-slate-400",children:j.shortcut})]},E))})},Xte=({node:n,onClose:e,onConfirm:t})=>{const[s,i]=_.useState(n.name),r=o=>{o.preventDefault(),s.trim()&&s!==n.name&&t(n.id,s.trim()),e()};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-slate-800",children:["Rename ",n.type]}),a.jsx("button",{onClick:e,className:"p-1 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(bs,{size:20,className:"text-slate-500"})})]}),a.jsxs("form",{onSubmit:r,children:[a.jsx("input",{type:"text",value:s,onChange:o=>i(o.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Enter new name",autoFocus:!0,onFocus:o=>{const c=o.target.value.lastIndexOf(".");c>0&&n.type==="file"?o.target.setSelectionRange(0,c):o.target.select()}}),a.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[a.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg font-medium transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:!s.trim()||s===n.name,className:"flex-1 px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Rename"})]})]})]})})},Kte=({onClose:n,onConfirm:e,parentFolder:t=null})=>{const[s,i]=_.useState(""),[r,o]=_.useState(""),c=u=>{if(u.preventDefault(),!s.trim()){o("Folder name cannot be empty");return}if(s.includes("/")||s.includes("\\")){o("Folder name cannot contain / or \\");return}e(s.trim()),n()};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 animate-in fade-in zoom-in duration-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:a.jsx(R2,{className:"text-indigo-600",size:24})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Create New Folder"}),t&&a.jsxs("p",{className:"text-sm text-slate-500",children:["in ",t]})]})]}),a.jsx("button",{onClick:n,className:"p-1 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(bs,{size:20,className:"text-slate-500"})})]}),a.jsxs("form",{onSubmit:c,children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Folder Name"}),a.jsx("input",{type:"text",value:s,onChange:u=>{i(u.target.value),o("")},className:`w-full px-4 py-3 bg-slate-50 border ${r?"border-red-300 focus:ring-red-500":"border-slate-200 focus:ring-indigo-500"} rounded-lg focus:ring-2 focus:border-transparent transition-all`,placeholder:"Enter folder name",autoFocus:!0}),r&&a.jsx("p",{className:"mt-2 text-sm text-red-600",children:r})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg font-medium transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:!s.trim(),className:"flex-1 px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-indigo-500/20",children:"Create Folder"})]})]})]})})},Zte=()=>{const n=ts(),[e,t]=_.useState([]),[s,i]=_.useState([]),[r,o]=_.useState(!0),[c,u]=_.useState("grid"),[h,f]=_.useState(null),[g,x]=_.useState(""),[y,N]=_.useState(!1),[j,E]=_.useState(null),[A,R]=_.useState(null),[M,L]=_.useState(null),[z,W]=_.useState(!1),[I,Y]=_.useState(!1),[U,Z]=_.useState(null),$=_.useRef(null),ae=_.useRef(null),xe=async(je=null)=>{o(!0);try{const Se=je?`/drive/nodes?parent_id=${je}`:"/drive/nodes",Je=await wt.get(Se);t(Je.data.nodes),i(Je.data.breadcrumbs)}catch(Se){console.error("Failed to fetch nodes:",Se),qt.error("Failed to load files")}finally{o(!1)}};_.useEffect(()=>{xe(h)},[h]),_.useEffect(()=>{const je=Se=>{Se.ctrlKey&&Se.key==="x"&&A?.node&&(Se.preventDefault(),ge(A.node)),Se.ctrlKey&&Se.key==="c"&&A?.node&&(Se.preventDefault(),Ne(A.node)),Se.ctrlKey&&Se.key==="v"&&U&&(Se.preventDefault(),Ce(null)),Se.key==="Delete"&&A?.node&&(Se.preventDefault(),re(A.node))};return window.addEventListener("keydown",je),()=>window.removeEventListener("keydown",je)},[A,U]);const fe=je=>{f(je?je.id:null)},ke=je=>{f(je?je.id:null)},G=async je=>{if(!je||je.length===0)return;N(!0);const Se=Array.from(je).map(async Fe=>{const nt=new FormData;nt.append("file",Fe),nt.append("type","file"),h&&nt.append("parent_id",h);try{return await wt.post("/drive/nodes",nt,{headers:{"Content-Type":"multipart/form-data"}}),{success:!0,name:Fe.name}}catch(Ye){return console.error(`Upload failed for ${Fe.name}:`,Ye),{success:!1,name:Fe.name}}}),Je=await Promise.all(Se),lt=Je.filter(Fe=>Fe.success).length,ct=Je.filter(Fe=>!Fe.success).length;lt>0&&(qt.success(`${lt} file(s) uploaded successfully`),xe(h)),ct>0&&qt.error(`${ct} file(s) failed to upload`),N(!1),$.current&&($.current.value="")},X=async je=>{try{await wt.post("/drive/nodes",{type:"folder",name:je,parent_id:h}),qt.success("Folder created"),xe(h)}catch(Se){console.error("Create folder failed:",Se),qt.error("Failed to create folder")}},se=je=>{je.type==="file"&&E(je)},ee=(je,Se)=>{je.preventDefault(),R({x:je.clientX,y:je.clientY,node:Se})},ne=async(je,Se)=>{try{await wt.patch(`/drive/nodes/${je}/rename`,{name:Se}),qt.success("Item renamed"),xe(h)}catch(Je){console.error("Rename failed:",Je),qt.error("Failed to rename item")}},V=je=>{const Se=document.createElement("a");Se.href=`/api/v1/drive/nodes/${je.id}/preview`,Se.download=je.name,document.body.appendChild(Se),Se.click(),document.body.removeChild(Se),qt.success("Download started")},re=async je=>{if(confirm(`Move "${je.name}" to trash?`))try{await wt.delete(`/drive/nodes/${je.id}`),qt.success("Item moved to trash"),xe(h)}catch(Se){console.error("Delete failed:",Se),qt.error("Failed to delete item")}},ge=je=>{Z({node:je,operation:"cut"}),qt.success(`"${je.name}" ready to move`)},Ne=je=>{Z({node:je,operation:"copy"}),qt.success(`"${je.name}" copied to clipboard`)},Ce=async je=>{if(!U)return;const Se=je?.type==="folder"?je.id:h;try{U.operation==="cut"?(await wt.patch(`/drive/nodes/${U.node.id}/move`,{parent_id:Se}),qt.success(`"${U.node.name}" moved successfully`),Z(null)):(await wt.post(`/drive/nodes/${U.node.id}/copy`,{parent_id:Se}),qt.success(`"${U.node.name}" copied successfully`)),xe(h)}catch(Je){console.error("Paste failed:",Je),qt.error("Failed to paste item")}},We=je=>{qt("Select a destination folder by right-clicking and choosing Paste"),ge(je)},Ge=je=>{je.target.closest(".node-item")||(je.preventDefault(),U&&R({x:je.clientX,y:je.clientY,node:null,isBackground:!0}))},Oe=je=>{je.preventDefault(),je.stopPropagation(),je.type==="dragenter"||je.type==="dragover"?Y(!0):je.type==="dragleave"&&Y(!1)},$e=je=>{je.preventDefault(),je.stopPropagation(),Y(!1),je.dataTransfer.files&&je.dataTransfer.files.length>0&&G(je.dataTransfer.files)},Le=e.filter(je=>je.name.toLowerCase().includes(g.toLowerCase())),pe=()=>s.length>1?s[s.length-1].name:null;return a.jsxs("div",{className:"h-full flex flex-col bg-slate-50",onDragEnter:Oe,onDragLeave:Oe,onDragOver:Oe,onDrop:$e,children:[I&&a.jsx("div",{className:"fixed inset-0 z-40 bg-indigo-500/10 backdrop-blur-sm flex items-center justify-center",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-12 border-4 border-dashed border-indigo-500",children:[a.jsx(j5,{size:64,className:"mx-auto text-indigo-500 mb-4"}),a.jsx("p",{className:"text-2xl font-bold text-slate-800",children:"Drop files to upload"}),a.jsx("p",{className:"text-slate-500 mt-2",children:"Release to start uploading"})]})}),a.jsxs("div",{className:"bg-white border-b border-slate-200 px-6 py-4 flex flex-col sm:flex-row items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4 w-full sm:w-auto",children:[a.jsx("h1",{className:"text-xl font-bold text-slate-800",children:"My Drive"}),a.jsx(Wte,{items:s.slice(1),onNavigate:ke})]}),a.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[a.jsxs("div",{className:"relative flex-1 sm:w-64",children:[a.jsx(Xm,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),a.jsx("input",{type:"text",placeholder:"Search files...",value:g,onChange:je=>x(je.target.value),className:"w-full pl-9 pr-4 py-2 bg-slate-100 border-none rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 transition-all"})]}),a.jsxs("div",{className:"flex bg-slate-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>u("grid"),className:`p-1.5 rounded-md transition-all ${c==="grid"?"bg-white shadow text-indigo-600":"text-slate-500 hover:text-indigo-600"}`,children:a.jsx(iN,{size:18})}),a.jsx("button",{onClick:()=>u("list"),className:`p-1.5 rounded-md transition-all ${c==="list"?"bg-white shadow text-indigo-600":"text-slate-500 hover:text-indigo-600"}`,children:a.jsx(mv,{size:18})})]}),a.jsx("button",{onClick:()=>W(!0),className:"p-2 text-slate-500 hover:bg-slate-100 rounded-lg transition-colors tooltip",title:"New Folder",children:a.jsx(R2,{size:20})}),a.jsx("button",{onClick:()=>n("/drive/trash"),className:"p-2 text-slate-500 hover:bg-slate-100 rounded-lg transition-colors tooltip",title:"Trash",children:a.jsx(Ki,{size:20})}),a.jsx("input",{type:"file",ref:$,onChange:je=>G(je.target.files),className:"hidden",multiple:!0}),a.jsxs("button",{onClick:()=>$.current?.click(),disabled:y,className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-medium transition-colors shadow-lg shadow-indigo-500/20 disabled:opacity-50 disabled:cursor-not-allowed",children:[y?a.jsx(Sn,{size:18,className:"animate-spin"}):a.jsx(Sf,{size:18}),a.jsx("span",{children:"Upload"})]})]})]}),U&&a.jsxs("div",{className:"bg-indigo-50 border-b border-indigo-200 px-6 py-2 flex items-center justify-between",children:[a.jsxs("p",{className:"text-sm text-indigo-700",children:[a.jsx("span",{className:"font-medium",children:U.node.name})," ready to ",U.operation==="cut"?"move":"copy"]}),a.jsx("button",{onClick:()=>Z(null),className:"text-xs text-indigo-600 hover:text-indigo-800 font-medium",children:"Cancel"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",ref:ae,onContextMenu:Ge,children:r?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx(Sn,{className:"animate-spin text-indigo-500",size:32})}):Le.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[a.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mb-4",children:a.jsx(R2,{size:32,className:"text-slate-300"})}),a.jsx("p",{className:"text-lg font-medium text-slate-600",children:"This folder is empty"}),a.jsx("p",{className:"text-sm",children:"Upload files or create a new folder to get started"})]}):a.jsx("div",{className:c==="grid"?"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4":"flex flex-col bg-white rounded-xl border border-slate-200 shadow-sm",children:Le.map(je=>a.jsx("div",{className:"node-item",children:a.jsx(Vte,{node:je,viewMode:c,onNavigate:fe,onPreview:se,onContextMenu:ee,onDownload:V})},je.id))})}),j&&a.jsx(Gte,{node:j,onClose:()=>E(null)}),A&&a.jsx(Yte,{x:A.x,y:A.y,node:A.node,isBackground:A.isBackground,clipboardState:U,onClose:()=>R(null),onRename:je=>L(je),onDownload:V,onDelete:re,onMove:We,onCut:ge,onCopy:Ne,onPaste:Ce}),M&&a.jsx(Xte,{node:M,onClose:()=>L(null),onConfirm:ne}),z&&a.jsx(Kte,{parentFolder:pe(),onClose:()=>W(!1),onConfirm:X})]})},Qte=()=>{const[n,e]=_.useState([]),[t,s]=_.useState(!0),i=async()=>{s(!0);try{const c=await wt.get("/drive/trash");e(c.data.nodes)}catch(c){console.error("Failed to fetch trash:",c),qt.error("Failed to load trash")}finally{s(!1)}};_.useEffect(()=>{i()},[]);const r=async c=>{try{await wt.post(`/drive/nodes/${c}/restore`),qt.success("Item restored"),i()}catch(u){console.error("Restore failed:",u),qt.error("Failed to restore item")}},o=async c=>{if(confirm("Are you sure? This action cannot be undone."))try{await wt.delete(`/drive/nodes/${c}/force`),qt.success("Item permanently deleted"),i()}catch(u){console.error("Delete failed:",u),qt.error("Failed to delete item")}};return a.jsxs("div",{className:"h-full flex flex-col bg-slate-50",children:[a.jsxs("div",{className:"bg-white border-b border-slate-200 px-6 py-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ki,{className:"text-slate-600",size:24}),a.jsx("h1",{className:"text-xl font-bold text-slate-800",children:"Trash"})]}),a.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Items will be permanently deleted after 30 days"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:t?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx(Sn,{className:"animate-spin text-indigo-500",size:32})}):n.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[a.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mb-4",children:a.jsx(Ki,{size:32,className:"text-slate-300"})}),a.jsx("p",{className:"text-lg font-medium text-slate-600",children:"Trash is empty"}),a.jsx("p",{className:"text-sm",children:"Deleted items will appear here"})]}):a.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-slate-600 uppercase",children:"Name"}),a.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-slate-600 uppercase hidden md:table-cell",children:"Size"}),a.jsx("th",{className:"text-left px-6 py-3 text-xs font-semibold text-slate-600 uppercase hidden lg:table-cell",children:"Deleted"}),a.jsx("th",{className:"text-right px-6 py-3 text-xs font-semibold text-slate-600 uppercase",children:"Actions"})]})}),a.jsx("tbody",{children:n.map(c=>a.jsxs("tr",{className:"border-b border-slate-100 last:border-0 hover:bg-slate-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"text-sm font-medium text-slate-700",children:c.name}),a.jsx("span",{className:"text-xs text-slate-400 uppercase",children:c.type})]})}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-500 hidden md:table-cell",children:c.type==="folder"?"-":lS(c.size)}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-500 hidden lg:table-cell",children:new Date(c.deleted_at).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsxs("button",{onClick:()=>r(c.id),className:"flex items-center gap-1.5 px-3 py-1.5 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-lg text-sm font-medium transition-colors",title:"Restore",children:[a.jsx(tx,{size:14}),a.jsx("span",{className:"hidden sm:inline",children:"Restore"})]}),a.jsxs("button",{onClick:()=>o(c.id),className:"flex items-center gap-1.5 px-3 py-1.5 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-sm font-medium transition-colors",title:"Delete Forever",children:[a.jsx(N5,{size:14}),a.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})})]},c.id))})]})})})]})},wm=({permission:n,redirectPath:e="/dashboard",children:t})=>{const{user:s,loading:i}=Dr(),{can:r,loading:o}=mg(),c=kr();return i||n&&o?a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):s?s.email_verified_at?!s.business&&!s.parent_id&&c.pathname!=="/onboarding"?a.jsx(Vp,{to:"/onboarding",state:{message:"Please complete onboarding to access your dashboard."},replace:!0}):n&&!r(n)?a.jsx(Vp,{to:e,replace:!0}):t||a.jsx(V0,{}):a.jsx(Vp,{to:"/verify-email-message",replace:!0}):a.jsx(Vp,{to:"/login",state:{message:"Please log in to continue."},replace:!0})},Jte=()=>{const n={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6}}},e=[{icon:Tr,title:"Secure NDAs",description:"Generate rock-solid Non-Disclosure Agreements in seconds. Protect your intellectual property with legally sound templates."},{icon:wn,title:"Winning Proposals",description:"Create stunning business proposals that convert. Customize every detail to match your brand and impress clients."},{icon:Km,title:"Instant Invoicing",description:"Get paid faster with professional invoices. Automated calculations, tax handling, and sleek designs."},{icon:Pc,title:"Team Collaboration",description:"Invite your team, assign roles, and collaborate on documents in real-time. Streamline your workflow."},{icon:rN,title:"Custom Branding",description:"Your docs, your brand. Upload logos, set colors, and ensure every document reflects your company identity."},{icon:ug,title:"Client Management",description:"Keep track of client details and associate documents with specific projects easily."}];return a.jsxs("div",{className:"bg-white",children:[a.jsx(Dc,{title:"Features",description:"Explore DocForge features: Secure NDAs, Winning Proposals, Instant Invoicing, and Team Collaboration."}),a.jsxs("section",{className:"relative pt-32 pb-20 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-50 -skew-y-3 origin-top-left z-0 transform -translate-y-20"}),a.jsxs("div",{className:"max-w-7xl mx-auto px-6 relative z-10 text-center",children:[a.jsxs(Ie.h1,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:n,className:"text-4xl md:text-6xl font-bold text-slate-900 mb-6 tracking-tight",children:["Tools designed for ",a.jsx("span",{className:"text-indigo-600",children:"running your agency."})]}),a.jsx(Ie.p,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:n,className:"text-lg md:text-xl text-slate-600 max-w-2xl mx-auto mb-10 leading-relaxed",children:"DocForge isn't just a document editor. It's a complete operating system for your paperwork. From proposal to payment, we've got you covered."})]})]}),a.jsx("section",{className:"py-20 bg-white",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map((t,s)=>a.jsxs(Ie.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:s*.1,duration:.5},className:"p-8 rounded-2xl border border-slate-100 bg-white hover:border-indigo-100 hover:shadow-xl transition-all group",children:[a.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-xl flex items-center justify-center text-indigo-600 mb-6 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:a.jsx(t.icon,{size:24})}),a.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-3",children:t.title}),a.jsx("p",{className:"text-slate-500 leading-relaxed",children:t.description})]},s))})})}),a.jsx("section",{className:"py-24 bg-slate-50 overflow-hidden",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6",children:a.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-16",children:[a.jsxs("div",{className:"flex-1 w-full relative",children:[a.jsx("div",{className:"absolute -top-10 -left-10 w-72 h-72 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"}),a.jsx("div",{className:"absolute -bottom-10 -right-10 w-72 h-72 bg-indigo-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"}),a.jsxs(Ie.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.7},className:"relative z-10 rounded-2xl shadow-2xl bg-white p-2 border border-slate-100",children:[a.jsx("img",{src:"/images/dashboard-preview.png",alt:"Dashboard Preview",className:"w-full h-auto rounded-xl border border-slate-200/50"}),a.jsx("div",{className:"absolute inset-0 rounded-2xl ring-1 ring-inset ring-black/5 pointer-events-none"})]})]}),a.jsx("div",{className:"flex-1",children:a.jsxs(Ie.div,{initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.6},children:[a.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-indigo-50 text-indigo-600 text-sm font-medium mb-6",children:[a.jsx(Km,{size:16})," Power & Simplicity"]}),a.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-6 leading-tight",children:"Unrivaled Editing Experience"}),a.jsx("p",{className:"text-slate-600 mb-8 text-lg leading-relaxed",children:"Our purpose-built editors make customization intuitive. Forget complex formatting battlesjust fill, click, and generate documents that look professionally designed every time."}),a.jsx("ul",{className:"space-y-4",children:["Real-time preview updates","Version History & Restoration","Share Tracking & Analytics","One-click PDF export"].map((t,s)=>a.jsxs(Ie.li,{initial:{opacity:0,x:10},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:.2+s*.1},className:"flex items-center gap-3 text-slate-700 font-medium",children:[a.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-green-100 flex items-center justify-center text-green-600",children:a.jsx(us,{size:14,strokeWidth:3})}),t]},s))}),a.jsx("div",{className:"mt-10",children:a.jsxs(tn,{to:"/register",className:"text-indigo-600 font-semibold hover:text-indigo-700 flex items-center gap-2 group",children:["Experience the editor ",a.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:""})]})})]})})]})})}),a.jsx("section",{className:"py-20 bg-slate-900 text-white text-center",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[a.jsx("h2",{className:"text-3xl md:text-5xl font-bold mb-8",children:"Ready to streamline your workflow?"}),a.jsx("p",{className:"text-slate-400 text-lg mb-10 max-w-2xl mx-auto",children:"Join thousands of freelancers and agencies who rely on DocForge for their critical documentation."}),a.jsx(tn,{to:"/register",className:"inline-block px-8 py-4 bg-indigo-600 rounded-xl text-lg font-bold hover:bg-indigo-500 transition-colors shadow-lg hover:shadow-indigo-500/25",children:"Get Started for Free"})]})})]})},qte=()=>{const[n,e]=_.useState(!0),t=[{name:"Starter",price:0,description:"Perfect for freelancers just getting started.",features:["Up to 3 Documents/mo","Basic NDA Templates","Standard PDF Export","1 User Seat"],cta:"Start Free",popular:!1},{name:"Professional",price:n?19:25,description:"For growing agencies and serious professionals.",features:["Unlimited Documents","All Template Types (NDA, Proposal, Invoice)","Custom Branding & Logos","Team Management (Up to 5 seats)","Priority Support"],cta:"Start Trial",popular:!0},{name:"Enterprise",price:"Custom",description:"Tailored solutions for large organizations.",features:["Everything in Professional","Unlimited Team Seats","SSO & Advanced Security","Custom Contract Development","Dedicated Account Manager"],cta:"Contact Sales",popular:!1}];return a.jsxs("div",{className:"bg-white",children:[a.jsx(Dc,{title:"Pricing",description:"Simple, transparent pricing for freelancers and agencies. Get started for free."}),a.jsxs("section",{className:"pt-32 pb-16 px-6 text-center",children:[a.jsx(Ie.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-4xl md:text-5xl font-bold text-slate-900 mb-6",children:"Simple, transparent pricing"}),a.jsxs("div",{className:"flex items-center justify-center gap-4 mt-8",children:[a.jsx("span",{className:`text-sm font-medium ${n?"text-slate-500":"text-slate-900"}`,children:"Monthly"}),a.jsx("button",{onClick:()=>e(!n),className:"w-14 h-8 bg-slate-200 rounded-full p-1 transition-colors relative",children:a.jsx("div",{className:`w-6 h-6 bg-white rounded-full shadow-sm transition-transform ${n?"translate-x-6":"translate-x-0"}`})}),a.jsxs("span",{className:`text-sm font-medium ${n?"text-slate-900":"text-slate-500"}`,children:["Yearly ",a.jsx("span",{className:"text-emerald-500 text-xs font-bold ml-1",children:"(Save 20%)"})]})]})]}),a.jsx("section",{className:"pb-24 px-6 max-w-7xl mx-auto",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 items-start",children:t.map((s,i)=>a.jsxs(Ie.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:i*.1},className:`relative p-8 rounded-2xl border ${s.popular?"border-indigo-600 shadow-2xl shadow-indigo-200":"border-slate-200 shadow-sm"} bg-white`,children:[s.popular&&a.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-indigo-600 text-white px-4 py-1 rounded-full text-sm font-bold tracking-wide",children:"MOST POPULAR"}),a.jsx("h3",{className:"text-xl font-bold text-slate-900",children:s.name}),a.jsx("p",{className:"text-slate-500 text-sm mt-2 h-10",children:s.description}),a.jsxs("div",{className:"my-8",children:[a.jsx("span",{className:"text-4xl font-bold text-slate-900",children:typeof s.price=="number"?`$${s.price}`:s.price}),typeof s.price=="number"&&a.jsx("span",{className:"text-slate-500",children:"/mo"})]}),a.jsx(tn,{to:s.name==="Enterprise"?"/contact":"/register",className:`block w-full py-3 rounded-xl font-bold text-center transition-all ${s.popular?"bg-indigo-600 text-white hover:bg-indigo-700 hover:shadow-lg":"bg-slate-100 text-slate-900 hover:bg-slate-200"}`,children:s.cta}),a.jsx("ul",{className:"mt-8 space-y-4",children:s.features.map((r,o)=>a.jsxs("li",{className:"flex items-start gap-3 text-sm text-slate-600",children:[a.jsx(fi,{size:18,className:"text-emerald-500 flex-shrink-0 mt-0.5"}),r]},o))})]},i))})}),a.jsx("section",{className:"py-20 bg-slate-50 border-t border-slate-200",children:a.jsxs("div",{className:"max-w-3xl mx-auto px-6 text-center",children:[a.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-12",children:"Frequently Asked Questions"}),a.jsxs("div",{className:"space-y-8 text-left",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-slate-900 mb-2",children:"Can I cancel anytime?"}),a.jsx("p",{className:"text-slate-600",children:"Yes, you can cancel your subscription at any time. Your access will continue until the end of your billing period."})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-slate-900 mb-2",children:"Is there a free trial?"}),a.jsx("p",{className:"text-slate-600",children:"We offer a 14-day free trial for the Professional plan. No credit card required to start."})]})]})]})})]})},$te=()=>a.jsxs("div",{className:"bg-white",children:[a.jsx(Dc,{title:"About Us",description:"Empowering businesses to forge ahead. Learn more about DocForge's mission and team."}),a.jsxs("section",{className:"pt-32 pb-20 px-6 max-w-4xl mx-auto text-center",children:[a.jsxs(Ie.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-4xl md:text-6xl font-bold text-slate-900 mb-8",children:["Empowering businesses to ",a.jsx("span",{className:"text-indigo-600",children:"forge ahead."})]}),a.jsx("p",{className:"text-xl text-slate-600 leading-relaxed",children:"At DocForge, we believe that administrative friction shouldn't slow down innovation. Our mission is to provide intuitive, powerful tools that let you focus on what you do bestbuilding your business."})]}),a.jsx("section",{className:"py-12 bg-slate-900 text-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6 grid grid-cols-1 md:grid-cols-3 gap-8 text-center",children:[a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"text-4xl font-bold text-indigo-400 mb-2",children:"10k+"}),a.jsx("div",{className:"text-slate-400",children:"Documents Generated"})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"text-4xl font-bold text-indigo-400 mb-2",children:"99.9%"}),a.jsx("div",{className:"text-slate-400",children:"Uptime Reliability"})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"text-4xl font-bold text-indigo-400 mb-2",children:"24/7"}),a.jsx("div",{className:"text-slate-400",children:"Global Support"})]})]})}),a.jsx("section",{className:"py-20 px-6 max-w-5xl mx-auto",children:a.jsxs("div",{className:"bg-slate-50 p-8 md:p-12 rounded-3xl",children:[a.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-6",children:"Our Story"}),a.jsx("p",{className:"text-slate-600 mb-6 leading-relaxed",children:"Founded in 2024, DocForge started with a simple observation: small businesses and freelancers were wasting hours on paperwork that should take minutes. Clunky legacy software and expensive legal fees were barriers to entry."}),a.jsx("p",{className:"text-slate-600 leading-relaxed",children:"We built DocForge to be the solution we wanted for ourselvesfast, beautiful, and secure. Today, we're proud to support a growing community of entrepreneurs and teams worldwide."})]})}),a.jsxs("section",{className:"py-20 px-6 max-w-7xl mx-auto",children:[a.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-12 text-center",children:"Our Core Values"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Pc,{size:32})}),a.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-3",children:"Customer First"}),a.jsx("p",{className:"text-slate-500",children:"We build for you. Your feedback drives our roadmap and our innovations."})]}),a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-indigo-50 text-indigo-600 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(nN,{size:32})}),a.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-3",children:"Global Mindset"}),a.jsx("p",{className:"text-slate-500",children:"Business knows no borders. Our tools are designed for international collaboration."})]}),a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-purple-50 text-purple-600 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(l9,{size:32})}),a.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-3",children:"Excellence"}),a.jsx("p",{className:"text-slate-500",children:`We don't settle for "good enough". We strive for perfection in every pixel.`})]})]})]})]}),ene=()=>a.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-32",children:[a.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-8",children:"Privacy Policy"}),a.jsxs("div",{className:"prose prose-slate max-w-none",children:[a.jsx("p",{className:"text-slate-600 mb-6",children:"Last updated: January 1, 2026"}),a.jsx("h2",{className:"text-2xl font-bold text-slate-900 mt-8 mb-4",children:"1. Introduction"}),a.jsx("p",{className:"text-slate-600 mb-4",children:"Welcome to DocForge. We respect your privacy and are committed to protecting your personal data. This privacy policy will inform you as to how we look after your personal data when you visit our website and tell you about your privacy rights and how the law protects you."}),a.jsx("h2",{className:"text-2xl font-bold text-slate-900 mt-8 mb-4",children:"2. Data We Collect"}),a.jsx("p",{className:"text-slate-600 mb-4",children:"We may collect, use, store and transfer different kinds of personal data about you which we have grouped together follows:"}),a.jsxs("ul",{className:"list-disc pl-6 text-slate-600 mb-4 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Identity Data:"})," includes first name, last name, username or similar identifier."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Contact Data:"})," includes email address and telephone numbers."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Technical Data:"})," includes internet protocol (IP) address, your login data, browser type and version."]})]}),a.jsx("h2",{className:"text-2xl font-bold text-slate-900 mt-8 mb-4",children:"3. How We Use Your Data"}),a.jsx("p",{className:"text-slate-600 mb-4",children:"We will only use your personal data when the law allows us to. Most commonly, we will use your personal data in the following circumstances:"}),a.jsxs("ul",{className:"list-disc pl-6 text-slate-600 mb-4 space-y-2",children:[a.jsx("li",{children:"Where we need to perform the contract we are about to enter into or have entered into with you."}),a.jsx("li",{children:"Where it is necessary for our legitimate interests (or those of a third party) and your interests and fundamental rights do not override those interests."})]})]})]}),tne=()=>a.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-32",children:[a.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-8",children:"Terms of Service"}),a.jsxs("div",{className:"prose prose-slate max-w-none",children:[a.jsx("p",{className:"text-slate-600 mb-6",children:"Last updated: January 1, 2026"}),a.jsx("h2",{className:"text-2xl font-bold text-slate-900 mt-8 mb-4",children:"1. Agreement to Terms"}),a.jsx("p",{className:"text-slate-600 mb-4",children:"By accessing or using our website and services, you agree to be bound by these Terms of Service and our Privacy Policy. If you do not agree to these terms, please do not use our services."}),a.jsx("h2",{className:"text-2xl font-bold text-slate-900 mt-8 mb-4",children:"2. Use License"}),a.jsx("p",{className:"text-slate-600 mb-4",children:"Permission is granted to temporarily download one copy of the materials (information or software) on DocForge's website for personal, non-commercial transitory viewing only. This is the grant of a license, not a transfer of title."}),a.jsx("h2",{className:"text-2xl font-bold text-slate-900 mt-8 mb-4",children:"3. Disclaimer"}),a.jsx("p",{className:"text-slate-600 mb-4",children:"The materials on DocForge's website are provided on an 'as is' basis. DocForge makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights."})]})]}),nne=()=>{const[n,e]=_.useState(!1),[t,s]=_.useState(!1),[i,r]=_.useState({name:"",email:"",subject:"",message:""}),o=u=>{r({...i,[u.target.name]:u.target.value})},c=async u=>{u.preventDefault(),s(!0);try{await wt.post("/public/contact",i),e(!0),qt.success("Message sent successfully!"),r({name:"",email:"",subject:"",message:""})}catch(h){console.error("Failed to submit contact form",h),qt.error("Failed to send message. Please try again.")}finally{s(!1)}};return a.jsx("div",{className:"bg-white pt-32 pb-24",children:a.jsxs("div",{className:"max-w-3xl mx-auto px-6 text-center",children:[a.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-6",children:"Get in touch"}),a.jsx("p",{className:"text-slate-600 text-lg mb-12",children:"Have questions about our plans or need technical support? We're here to help."}),n?a.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-2xl p-8 text-emerald-800",children:[a.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Message Sent!"}),a.jsx("p",{children:"Thanks for reaching out. We'll get back to you within 24 hours."}),a.jsx("button",{onClick:()=>e(!1),className:"mt-6 text-emerald-600 font-medium hover:underline",children:"Send another message"})]}):a.jsxs("form",{onSubmit:c,className:"bg-white border border-slate-200 rounded-2xl p-8 md:p-10 shadow-xl text-left",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Name"}),a.jsx("input",{type:"text",name:"name",value:i.name,onChange:o,className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all outline-none",required:!0,placeholder:"John Doe"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Email"}),a.jsx("input",{type:"email",name:"email",value:i.email,onChange:o,className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all outline-none",required:!0,placeholder:"john@example.com"})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Subject"}),a.jsx("input",{type:"text",name:"subject",value:i.subject,onChange:o,className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all outline-none",required:!0,placeholder:"How can we help?"})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Message"}),a.jsx("textarea",{rows:"5",name:"message",value:i.message,onChange:o,className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all outline-none",required:!0,placeholder:"Tell us more..."})]}),a.jsx("button",{type:"submit",disabled:t,className:"w-full py-4 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition-all shadow-lg hover:shadow-indigo-500/25 flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:t?a.jsx("span",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(Pm,{size:20}),"Send Message"]})})]})]})})},sne=()=>a.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-32 text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-indigo-50 text-indigo-600 rounded-full flex items-center justify-center mx-auto mb-8",children:a.jsx(ug,{size:40})}),a.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-6",children:"Join the Team"}),a.jsx("p",{className:"text-xl text-slate-600 mb-12",children:"We're always looking for talented individuals to help us build the future of document management."}),a.jsxs("div",{className:"p-12 border border-slate-200 rounded-2xl bg-slate-50",children:[a.jsx("p",{className:"text-slate-500 font-medium",children:"There are currently no open positions."}),a.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"Check back later or follow us on social media for updates."})]})]}),ine=()=>{const n=[{version:"v1.0.0",date:"January 19, 2026",title:"Global Launch",description:"DocForge is officially live! Create NDAs, Proposals, and Invoices with ease.",type:"Major"},{version:"v0.9.5",date:"December 15, 2025",title:"Beta Release",description:"Initial beta release to select partners.",type:"Beta"}];return a.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-32",children:[a.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-12",children:"Product Updates"}),a.jsx("div",{className:"space-y-12 border-l border-slate-200 ml-4 pl-8 relative",children:n.map((e,t)=>a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute -left-[41px] top-1.5 w-5 h-5 rounded-full bg-white border-4 border-indigo-600"}),a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("span",{className:"font-mono text-sm font-bold text-indigo-600 bg-indigo-50 px-2 py-1 rounded",children:e.version}),a.jsx("span",{className:"text-slate-400 text-sm",children:e.date})]}),a.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:e.title}),a.jsx("p",{className:"text-slate-600",children:e.description})]},t))})]})},ane=async(n={})=>(await wt.get("/public/posts",{params:n})).data,rne=async n=>(await wt.get(`/public/posts/${n}`)).data,one=()=>{const[n,e]=_.useState([]),[t,s]=_.useState(!0),[i,r]=_.useState({}),[o,c]=_.useState(1);_.useEffect(()=>{u()},[o]);const u=async()=>{s(!0);try{const x=await ane({page:o});e(x.data),r({current_page:x.current_page,last_page:x.last_page,total:x.total})}catch(x){console.error("Failed to fetch blog posts",x)}finally{s(!1)}},h=n.length>0?n[0]:null,f=n.length>0?n.slice(1):[],g={"@context":"https://schema.org","@type":"Blog",name:"DocForge Blog",description:"Insights on document workflows, agency growth, and product updates.",url:"https://docforgedocs.com/blog",blogPost:n.map(x=>({"@type":"BlogPosting",headline:x.title,image:x.featured_image,datePublished:x.published_at,author:{"@type":"Person",name:x.author?.name||"DocForge Team"}}))};return a.jsxs("div",{className:"min-h-screen bg-slate-50",children:[a.jsx(Dc,{title:"Blog",description:"Latest updates, guides, and insights from the DocForge team.",url:"/blog",jsonLd:g}),a.jsx("div",{className:"bg-white pt-32 pb-20 border-b border-slate-200",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6 text-center",children:a.jsxs(Ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[a.jsx("span",{className:"inline-block py-1 px-3 rounded-full bg-indigo-50 text-indigo-600 text-xs font-bold uppercase tracking-wider mb-4 border border-indigo-100",children:"The DocForge Log"}),a.jsxs("h1",{className:"text-4xl md:text-6xl font-extrabold text-slate-900 mb-6 tracking-tight",children:["Insights for ",a.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-indigo-500",children:"Modern Agencies"})]}),a.jsx("p",{className:"text-xl text-slate-500 max-w-2xl mx-auto leading-relaxed",children:"Discover strategies for efficient document workflows, business growth, and product updates straight from our team."})]})})}),a.jsx("div",{className:"max-w-7xl mx-auto px-6 py-12",children:t?a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(x=>a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"bg-slate-200 h-64 rounded-2xl mb-4"}),a.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4 mb-2"}),a.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/2"})]},x))}):a.jsxs(a.Fragment,{children:[h&&o===1&&a.jsxs(Ie.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"mb-16 group relative rounded-3xl overflow-hidden shadow-2xl bg-white grid lg:grid-cols-2",children:[a.jsx("div",{className:"absolute top-4 left-4 z-10",children:a.jsxs("span",{className:"bg-white/90 backdrop-blur text-indigo-600 px-3 py-1 rounded-full text-xs font-bold shadow-sm flex items-center gap-1",children:[a.jsx(k5,{size:12,className:"fill-indigo-600"})," Featured"]})}),a.jsx("div",{className:"relative h-64 lg:h-full overflow-hidden",children:h.featured_image?a.jsx("img",{src:h.featured_image,alt:h.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"}):a.jsx("div",{className:"w-full h-full bg-indigo-50 flex items-center justify-center",children:a.jsx("span",{className:"text-indigo-200 font-bold text-6xl",children:"DocForge"})})}),a.jsxs("div",{className:"p-8 lg:p-12 flex flex-col justify-center",children:[a.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500 mb-4",children:[a.jsx("span",{className:"text-indigo-600 font-bold",children:h.category?.name||"Update"}),a.jsx("span",{className:"w-1 h-1 bg-slate-300 rounded-full"}),a.jsx("span",{children:new Date(h.published_at).toLocaleDateString()})]}),a.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-slate-900 mb-4 group-hover:text-indigo-600 transition-colors",children:a.jsx(tn,{to:`/blog/${h.slug}`,children:h.title})}),a.jsx("p",{className:"text-slate-600 text-lg mb-8 line-clamp-3",children:h.summary||"Read the full article to learn more regarding this topic..."}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold",children:h.author?.name?.[0]||"D"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:h.author?.name||"DocForge Team"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Author"})]})]}),a.jsxs(tn,{to:`/blog/${h.slug}`,className:"inline-flex items-center gap-2 bg-slate-900 text-white px-6 py-3 rounded-xl font-bold hover:bg-indigo-600 transition-colors",children:["Read Article ",a.jsx(Ml,{size:18})]})]})]})]}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16",children:(o===1?f:n).map((x,y)=>a.jsx(Ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:y*.1},children:a.jsxs(tn,{to:`/blog/${x.slug}`,className:"group flex flex-col h-full bg-white border border-slate-100 rounded-2xl overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300",children:[a.jsxs("div",{className:"aspect-[16/10] overflow-hidden bg-slate-100 relative",children:[x.featured_image?a.jsx("img",{src:x.featured_image,alt:x.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-indigo-50 text-indigo-300",children:a.jsx("span",{className:"text-4xl font-bold opacity-20",children:"DocForge"})}),x.category&&a.jsx("span",{className:"absolute top-4 left-4 bg-white/90 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-bold text-indigo-600 shadow-sm border border-indigo-50",children:x.category.name})]}),a.jsxs("div",{className:"p-6 flex flex-col flex-1",children:[a.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 mb-4",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Ld,{size:14}),new Date(x.published_at).toLocaleDateString()]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(la,{size:14}),"5 min read"]})]}),a.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-3 group-hover:text-indigo-600 transition-colors line-clamp-2",children:x.title}),a.jsx("p",{className:"text-slate-600 text-sm leading-relaxed mb-6 flex-1 line-clamp-3 break-words",children:x.summary?.replace(/&nbsp;/g," ")||"Read the full article to learn more..."}),a.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-slate-50 mt-auto",children:[a.jsxs("span",{className:"text-slate-700 text-xs font-medium flex items-center gap-2",children:["By ",x.author?.name||"DocForge"]}),a.jsxs("span",{className:"text-indigo-600 font-bold text-sm flex items-center gap-1 group-hover:gap-2 transition-all",children:["Read ",a.jsx(Ml,{size:16})]})]})]})]})},x.id))}),a.jsxs("div",{className:"mb-20 bg-slate-900 rounded-3xl p-8 md:p-12 relative overflow-hidden text-center md:text-left grid md:grid-cols-2 gap-8 items-center",children:[a.jsxs("div",{className:"relative z-10",children:[a.jsx("h3",{className:"text-3xl font-bold text-white mb-4",children:"Stay ahead of the curve"}),a.jsx("p",{className:"text-slate-400 mb-8 text-lg",children:"Join 5,000+ agency owners receiving our weekly insights on workflow optimization and growth."}),a.jsxs("form",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsx("input",{type:"email",placeholder:"Enter your work email",className:"bg-white/10 border border-white/20 text-white placeholder:text-slate-500 px-4 py-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 flex-1"}),a.jsxs("button",{className:"bg-indigo-600 hover:bg-indigo-500 text-white px-6 py-3 rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:[a.jsx(Js,{size:18})," Subscribe"]})]})]}),a.jsx("div",{className:"relative z-10 hidden md:block",children:a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/20 to-purple-500/20 rounded-full blur-3xl transform translate-x-1/2 -translate-y-1/2"})})]}),i.last_page>1&&a.jsxs("div",{className:"flex justify-center gap-2",children:[a.jsx("button",{onClick:()=>c(x=>Math.max(1,x-1)),disabled:o===1,className:"px-6 py-3 rounded-xl bg-white border border-slate-200 text-slate-600 font-medium hover:bg-indigo-50 hover:text-indigo-600 hover:border-indigo-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Previous"}),a.jsx("span",{className:"px-6 py-3 bg-white border border-slate-200 rounded-xl text-slate-900 font-bold min-w-[3rem] text-center",children:i.current_page}),a.jsx("button",{onClick:()=>c(x=>Math.min(i.last_page,x+1)),disabled:o===i.last_page,className:"px-6 py-3 rounded-xl bg-white border border-slate-200 text-slate-600 font-medium hover:bg-indigo-50 hover:text-indigo-600 hover:border-indigo-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Next"})]})]})})]})},lne=()=>{const{slug:n}=Wo(),[e,t]=_.useState(null),[s,i]=_.useState(!0),[r,o]=_.useState(null),{scrollYProgress:c}=OH(),u=FH(c,{stiffness:100,damping:30,restDelta:.001});_.useEffect(()=>{h(),window.scrollTo(0,0)},[n]);const h=async()=>{i(!0);try{const g=await rne(n);t(g)}catch(g){console.error("Failed to fetch blog post",g),o("Post not found")}finally{i(!1)}};if(s)return a.jsx("div",{className:"min-h-screen bg-white pt-32 pb-24 flex justify-center",children:a.jsx("div",{className:"w-8 h-8 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"})});if(r||!e)return a.jsxs("div",{className:"min-h-screen bg-white pt-32 pb-24 text-center",children:[a.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-4",children:"Post Not Found"}),a.jsx(tn,{to:"/blog",className:"text-indigo-600 font-bold hover:underline",children:"Return to Blog"})]});const f={"@context":"https://schema.org","@type":"BlogPosting",headline:e.title,image:e.featured_image?[e.featured_image]:[],datePublished:e.published_at,dateModified:e.updated_at||e.published_at,author:{"@type":"Person",name:e.author?.name||"DocForge Team"}};return a.jsxs("article",{className:"min-h-screen bg-white",children:[a.jsx(Dc,{title:e.seo_title||e.title,description:e.seo_description||e.summary,url:`/blog/${e.slug}`,image:e.featured_image,type:"article",keywords:e.meta_keywords,jsonLd:f}),a.jsx(Ie.div,{className:"fixed top-0 left-0 right-0 h-1 bg-indigo-600 origin-left z-50",style:{scaleX:u}}),a.jsx("div",{className:"bg-slate-50 pt-32 pb-12 border-b border-slate-200",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[a.jsxs(tn,{to:"/blog",className:"inline-flex items-center gap-2 text-slate-500 font-bold text-sm hover:text-indigo-600 mb-8 transition-colors",children:[a.jsx(Ia,{size:16})," Back to Blog"]}),a.jsxs("div",{className:"max-w-4xl",children:[e.category&&a.jsx("span",{className:"inline-block bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider mb-6",children:e.category.name}),a.jsx("h1",{className:"text-4xl md:text-6xl font-extrabold text-slate-900 mb-6 leading-tight",children:e.title}),a.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-slate-500",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-white border border-slate-200 flex items-center justify-center overflow-hidden",children:e.author?.avatar_url?a.jsx("img",{src:e.author.avatar_url,alt:e.author.name,className:"w-full h-full object-cover"}):a.jsx("span",{className:"font-bold text-xs text-slate-500",children:e.author?.name?.[0]||"D"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-slate-900 text-sm",children:e.author?.name||"DocForge Team"}),a.jsx("p",{className:"text-xs",children:"Author"})]})]}),a.jsx("span",{className:"w-px h-8 bg-slate-300 hidden sm:block"}),a.jsxs("div",{className:"flex items-center gap-4 text-sm font-medium",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Ld,{size:18,className:"text-slate-400"}),new Date(e.published_at).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]}),a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(la,{size:18,className:"text-slate-400"}),"5 min read"]})]})]})]})]})}),a.jsx("div",{className:"max-w-7xl mx-auto px-6 py-12",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-12",children:[a.jsxs("div",{className:"lg:col-span-8",children:[e.featured_image&&a.jsx("div",{className:"rounded-2xl overflow-hidden mb-12 shadow-lg border border-slate-100",children:a.jsx("img",{src:e.featured_image,alt:e.title,className:"w-full h-auto"})}),a.jsx("div",{className:"prose prose-lg prose-indigo prose-headings:font-bold prose-headings:text-slate-900 prose-p:text-slate-600 prose-p:leading-8 prose-li:text-slate-600 max-w-none break-words",dangerouslySetInnerHTML:{__html:e.content.replace(/&nbsp;/g," ")}}),a.jsxs("div",{className:"mt-16 pt-8 border-t border-slate-200",children:[a.jsxs("h3",{className:"font-bold text-slate-900 mb-4 flex items-center gap-2",children:[a.jsx(_5,{size:20})," Share this article"]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{className:"p-3 rounded-full bg-slate-100 text-slate-600 hover:bg-[#1877F2] hover:text-white transition-colors",children:a.jsx(W9,{size:20})}),a.jsx("button",{className:"p-3 rounded-full bg-slate-100 text-slate-600 hover:bg-[#1DA1F2] hover:text-white transition-colors",children:a.jsx(F7,{size:20})}),a.jsx("button",{className:"p-3 rounded-full bg-slate-100 text-slate-600 hover:bg-[#0A66C2] hover:text-white transition-colors",children:a.jsx(jU,{size:20})})]})]})]}),a.jsx("div",{className:"lg:col-span-4 space-y-8",children:a.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6 border border-slate-100 sticky top-32",children:[a.jsx("h3",{className:"font-bold text-slate-900 mb-4",children:"In this article"}),a.jsxs("ul",{className:"space-y-3 text-sm",children:[a.jsx("li",{children:a.jsxs("a",{href:"#",className:"flex items-center gap-2 text-indigo-600 font-medium",children:[a.jsx(fo,{size:14})," Introduction"]})}),a.jsx("li",{children:a.jsxs("a",{href:"#",className:"flex items-center gap-2 text-slate-600 hover:text-indigo-600 transition-colors",children:[a.jsx(fo,{size:14,className:"opacity-0"})," Key Takeaways"]})}),a.jsx("li",{children:a.jsxs("a",{href:"#",className:"flex items-center gap-2 text-slate-600 hover:text-indigo-600 transition-colors",children:[a.jsx(fo,{size:14,className:"opacity-0"})," Implementation Guide"]})}),a.jsx("li",{children:a.jsxs("a",{href:"#",className:"flex items-center gap-2 text-slate-600 hover:text-indigo-600 transition-colors",children:[a.jsx(fo,{size:14,className:"opacity-0"})," Conclusion"]})})]}),a.jsxs("div",{className:"mt-8 pt-8 border-t border-slate-200",children:[a.jsx("p",{className:"font-bold text-slate-900 mb-2",children:"Need help with documents?"}),a.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"DocForge streamlines your proposals and contracts."}),a.jsx(tn,{to:"/register",className:"block text-center bg-indigo-600 text-white font-bold py-3 rounded-xl hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200",children:"Get Started Free"})]})]})})]})})]})};kl.workerSrc=Yv;const cne=()=>{const{token:n}=Wo(),[e,t]=_.useState(null),[s,i]=_.useState(!0),[r,o]=_.useState(null),[c,u]=_.useState(null),[h,f]=_.useState(1),[g,x]=_.useState(1),y="http://localhost:8000/api/v1";_.useEffect(()=>{n&&(async()=>{try{const A=await wt.get(`/public/documents/${n}`);t(A.data.data)}catch(A){console.error("Failed to load public document",A),o("Document not found or access denied.")}finally{i(!1)}})()},[n]);const N=({numPages:E})=>{u(E)},j=()=>{window.location.href=`${y}/public/documents/${n}/download`};return s?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:a.jsx(Sn,{size:40,className:"text-indigo-600 animate-spin"})}):r||!e?a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 p-4",children:a.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg max-w-md w-full text-center border border-slate-100",children:[a.jsx(wa,{size:48,className:"text-red-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-2",children:"Unavailable"}),a.jsx("p",{className:"text-slate-500",children:r||"This document could not be found."})]})}):a.jsxs("div",{className:"min-h-screen bg-slate-100 flex flex-col font-sans text-slate-900",children:[a.jsxs("header",{className:"bg-white h-16 border-b border-slate-200 px-4 md:px-8 flex items-center justify-between shadow-sm sticky top-0 z-50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-9 h-9 bg-indigo-600 rounded-lg flex items-center justify-center text-white font-bold text-lg shadow-md shadow-indigo-200",children:"DF"}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-bold text-slate-800 text-lg leading-tight truncate max-w-[200px] md:max-w-md",children:e.name}),a.jsx("p",{className:"text-xs text-slate-500",children:"Shared via DocForge"})]})]}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-5 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-lg transition-all shadow-md shadow-indigo-100 active:scale-95",children:[a.jsx(Yi,{size:18}),a.jsx("span",{className:"hidden sm:inline",children:"Download PDF"})]})})]}),a.jsx("div",{className:"flex-1 overflow-auto bg-slate-100 p-4 md:p-8 flex flex-col items-center",children:e.pdf_url?a.jsxs("div",{className:"w-full max-w-4xl flex flex-col items-center",children:[a.jsxs("div",{className:"bg-white rounded-full shadow-lg border border-slate-200 px-6 py-2 mb-6 flex items-center gap-6 sticky top-20 z-40 transition-all opacity-90 hover:opacity-100",children:[a.jsxs("div",{className:"flex items-center gap-2 border-r border-slate-200 pr-4",children:[a.jsx("button",{onClick:()=>f(E=>Math.max(E-1,1)),disabled:h<=1,className:"p-1.5 hover:bg-slate-100 rounded-full disabled:opacity-30 transition-colors text-slate-700",children:a.jsx(hv,{size:20})}),a.jsxs("span",{className:"text-sm font-medium text-slate-600 min-w-[3rem] text-center",children:[h," / ",c||"--"]}),a.jsx("button",{onClick:()=>f(E=>Math.min(E+1,c||1)),disabled:h>=c,className:"p-1.5 hover:bg-slate-100 rounded-full disabled:opacity-30 transition-colors text-slate-700",children:a.jsx(fo,{size:20})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>x(E=>Math.max(E-.1,.5)),className:"p-1.5 hover:bg-slate-100 rounded-full text-slate-600 transition-colors",title:"Zoom Out",children:a.jsx(Yo,{size:18})}),a.jsxs("span",{className:"text-xs font-medium text-slate-500 w-12 text-center",children:[Math.round(g*100),"%"]}),a.jsx("button",{onClick:()=>x(E=>Math.min(E+.1,2)),className:"p-1.5 hover:bg-slate-100 rounded-full text-slate-600 transition-colors",title:"Zoom In",children:a.jsx(Go,{size:18})})]})]}),a.jsx("div",{className:"bg-white shadow-2xl rounded-sm overflow-hidden print:shadow-none transition-transform duration-200",children:a.jsx(_f,{file:`${y}/public/documents/${n}/preview`,onLoadSuccess:N,loading:a.jsx("div",{className:"h-96 w-full flex items-center justify-center bg-white",children:a.jsx(Sn,{className:"animate-spin text-indigo-600",size:32})}),error:a.jsxs("div",{className:"h-64 w-full flex flex-col items-center justify-center p-8 text-slate-400 bg-white",children:[a.jsx(wn,{size:48,className:"mb-2"}),a.jsx("p",{children:"Failed to load PDF preview."}),a.jsx("p",{className:"text-xs text-slate-300 mt-2",children:"Could not access the PDF file."})]}),className:"pdf-document",children:a.jsx(Tf,{pageNumber:h,scale:g,renderTextLayer:!0,renderAnnotationLayer:!0,className:"pdf-page"})})})]}):a.jsxs("div",{className:"w-full max-w-4xl bg-white shadow-2xl rounded-xl p-12 min-h-[400px] flex flex-col items-center justify-center text-center",children:[a.jsx(wa,{size:64,className:"text-slate-300 mb-6"}),a.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-3",children:"Preview Unavailable"}),a.jsx("p",{className:"text-slate-500 mb-8 max-w-md text-lg",children:"A PDF preview is not available for this document. You can download the file to view it."}),a.jsx("button",{onClick:j,className:"px-8 py-4 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-200 hover:shadow-indigo-300 transform hover:-translate-y-1",children:"Download Document"})]})})]})},dne=({field:n,onClick:e,pageWidth:t,pageHeight:s})=>{const{metadata:i,position:r,size:o}=n,{value:c,signeeName:u,isMine:h}=i||{},f=`${r.x}%`,g=`${r.y}%`,x=o?.width||200,y=o?.height||50,N=j=>{j.stopPropagation(),console.log("Signature field clicked:",n.id,{isMine:h,hasValue:!!c,position:`${r.x}%, ${r.y}%`,style:`${f}, ${g}`}),e&&e(n)};return a.jsx("div",{onClick:N,className:`absolute border rounded-lg flex items-center justify-center text-center overflow-hidden transition-all shadow-sm ${h&&!c?"cursor-pointer animate-pulse-subtle bg-indigo-50/90 border-indigo-400 active:scale-95":"cursor-default"} ${c?"border-emerald-500 bg-emerald-50/90":h?"hover:bg-indigo-100 hover:border-indigo-500 hover:shadow-md":"border-slate-300 bg-slate-50/50"}`,style:{left:f,top:g,width:`${x}px`,height:`${y}px`,zIndex:10},children:c?a.jsxs("div",{className:"w-full h-full flex items-center justify-center p-2",children:[i.fieldType==="checkbox"?a.jsx("div",{className:`w-6 h-6 border-2 rounded flex items-center justify-center transition-colors ${c==="true"?"bg-indigo-600 border-indigo-600":"border-slate-400 bg-white"}`,children:c==="true"&&a.jsx(us,{size:16,className:"text-white"})}):c.startsWith("data:image")?a.jsx("img",{src:c,alt:"Signature",className:"max-w-full max-h-full object-contain"}):a.jsx("span",{className:`${i.fieldType==="text"||i.fieldType==="date"?"font-sans text-sm font-medium":"font-handwriting text-xl"} text-slate-700`,children:c}),h&&a.jsx(us,{size:16,className:"absolute top-1 right-1 text-emerald-600"})]}):a.jsx("div",{className:"flex flex-col items-center justify-center h-full w-full",children:h?a.jsx("div",{className:"flex items-center gap-1.5 px-2",children:i.fieldType==="checkbox"?a.jsx("span",{className:"text-indigo-600 font-bold text-xs uppercase",children:"Tap to Toggle"}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-pulse"}),a.jsx("span",{className:"text-xs md:text-sm font-bold text-indigo-700 truncate",children:i.label||(i.fieldType==="date"?"Insert Date":"Tap to Sign")})]})}):a.jsx("span",{className:"text-xs text-slate-400 font-medium italic px-1 truncate",children:u||"Pending"})})})};kl.workerSrc=Yv;const une=()=>{const{token:n}=Wo(),e=ts(),[t,s]=_.useState(!0),[i,r]=_.useState(null),[o,c]=_.useState(null),[u,h]=_.useState(null),[f,g]=_.useState(null),[x,y]=_.useState(null),[N,j]=_.useState([]),[E,A]=_.useState({}),[R,M]=_.useState(1),[L,z]=_.useState(1),[W,I]=_.useState(null),[Y,U]=_.useState(null),[Z,$]=_.useState("text"),[ae,xe]=_.useState(""),[fe,ke]=_.useState(null),[G,X]=_.useState(null),se=_.useRef(null),ee=_.useRef(null),[ne,V]=_.useState(!1),[re,ge]=_.useState(-1),[Ne,Ce]=_.useState(!1),We=N.filter(ye=>ye.metadata?.isMine&&ye.metadata?.required&&!ye.metadata?.value).sort((ye,Qe)=>ye.pageNumber-Qe.pageNumber||ye.position.y-Qe.position.y),[Ge,Oe]=_.useState(!1);_.useEffect(()=>{n&&(async()=>{try{const Qe=await ps.get(`http://127.0.0.1:8000/api/v1/signatures/${n}`),{document:rt,current_signer:Nt,pdf_url:mt,compliance:It}=Qe.data;c(rt),h(Nt),g(mt),I(It);const et=(rt.fields||[]).map(le=>({id:le.id,type:le.type,pageNumber:le.page_number,position:{x:le.x_position,y:le.y_position},size:{width:le.width,height:le.height},metadata:{...le.metadata,isMine:le.signer_id===Nt.id,value:le.value,signeeName:le.signer_id===Nt.id?"You":rt.signers.find(Ke=>Ke.id===le.signer_id)?.name||"Other"},signerId:le.signer_id}));j(et),s(!1)}catch(Qe){console.error("Error fetching signature session:",Qe),r(Qe.response?.data?.message||"Failed to load document."),s(!1)}})()},[n]);const[$e,Le]=_.useState(800);_.useEffect(()=>{const ye=()=>{const rt=document.getElementById("pdf-wrapper");if(rt){const Nt=rt.clientWidth-32;Le(Math.min(Nt,800))}};ye(),window.addEventListener("resize",ye);const Qe=setTimeout(ye,500);return()=>{window.removeEventListener("resize",ye),clearTimeout(Qe)}},[]),_.useEffect(()=>{if(Y&&Z==="draw"&&se.current){const ye=se.current,Qe=window.devicePixelRatio||1;ye.width=ye.offsetWidth*Qe,ye.height=ye.offsetHeight*Qe;const rt=ye.getContext("2d");rt.scale(Qe,Qe),rt.lineCap="round",rt.strokeStyle="#1e293b",rt.lineWidth=2.5,ee.current=rt}},[Y,Z]);const pe=ye=>{V(!0);const{offsetX:Qe,offsetY:rt}=Se(ye),Nt=se.current;if(!Nt)return;const mt=Nt.getContext("2d");mt.beginPath(),mt.moveTo(Qe,rt),ee.current=mt},je=ye=>{if(!ne)return;ye.preventDefault();const{offsetX:Qe,offsetY:rt}=Se(ye);ee.current&&(ee.current.lineTo(Qe,rt),ee.current.stroke())},Se=ye=>{if(ye.touches&&ye.touches[0]){const Qe=se.current.getBoundingClientRect();return{offsetX:ye.touches[0].clientX-Qe.left,offsetY:ye.touches[0].clientY-Qe.top}}return{offsetX:ye.nativeEvent.offsetX,offsetY:ye.nativeEvent.offsetY}},Je=()=>{ee.current.closePath(),V(!1),se.current&&ke(se.current.toDataURL())},lt=()=>{const ye=se.current,Qe=ee.current;Qe.clearRect(0,0,ye.width,ye.height),ye.width=ye.width;const rt=window.devicePixelRatio||1;Qe.scale(rt,rt),Qe.lineCap="round",Qe.strokeStyle="#1e293b",Qe.lineWidth=2.5,ke(null)},ct=ye=>{const Qe=ye.target.files[0];if(Qe&&Qe.type.startsWith("image/")){const rt=new FileReader;rt.onload=Nt=>X(Nt.target.result),rt.readAsDataURL(Qe)}},Fe=()=>{const ye=We[0];if(ye){Ye(ye);const Qe=document.getElementById(`pdf-page-${ye.pageNumber}`);Qe&&Qe.scrollIntoView({behavior:"smooth",block:"center"})}else Te.success("All required fields completed!")},nt=({numPages:ye})=>{y(ye)},Ye=ye=>{if(ye.metadata.isMine){const{fieldType:Qe}=ye.metadata,rt=!!ye.metadata.value;if(Qe==="checkbox"){const It=ye.metadata.value==="true"?"":"true";ot(ye.id,It,"checkbox");return}if(Qe==="date"){if(!ye.metadata.value){const It=new Date().toLocaleDateString();ot(ye.id,It,"date"),Te.success("Date filled")}return}if(rt){Te("You have already signed this field.");return}if(U(ye),(Qe==="text"||Qe==="initials")&&Qe==="text"){$("text_input"),xe(ye.metadata.value||"");return}const Nt=ye.metadata.type||"all";let mt="text";Nt==="draw"&&(mt="draw"),Nt==="upload"&&(mt="upload"),$(mt),xe(""),ke(null),X(null)}},ot=(ye,Qe,rt)=>{j(Nt=>Nt.map(mt=>mt.id===ye?{...mt,metadata:{...mt.metadata,value:Qe,signatureType:rt}}:mt))},St=()=>Z==="text"||Z==="text_input"?ae.trim():Z==="draw"?fe:Z==="upload"?G:null,Pt=async()=>{const ye=St();if(!Y||!ye){Te.error("Please provide a signature.");return}try{j(Qe=>Qe.map(rt=>rt.id===Y.id?{...rt,metadata:{...rt.metadata,value:ye,signatureType:Z}}:rt)),U(null),Te.success("Signature saved locally. Click 'Finish Signing' when done.")}catch(Qe){console.error(Qe),Te.error("Error updating signature.")}},[qe,Ze]=_.useState(""),[Xe,yt]=_.useState(!1),Et=async()=>{try{await ps.post(`http://127.0.0.1:8000/api/v1/signatures/${n}/send-otp`),yt(!0),Te.success("OTP sent to your email.")}catch(ye){console.error("Error sending OTP:",ye),Te.error("Failed to send OTP.")}},Ot=async()=>{try{await ps.post(`http://127.0.0.1:8000/api/v1/signatures/${n}/verify-otp`,{otp:qe}),I(ye=>({...ye,is_verified:!0})),Te.success("Identity verified.")}catch(ye){console.error("Error verifying OTP:",ye),Te.error("Invalid OTP.")}},Kt=async()=>{try{await ps.post(`http://127.0.0.1:8000/api/v1/signatures/${n}/agree`),I(ye=>({...ye,consent_required:!1})),Te.success("Terms accepted.")}catch(ye){console.error("Error agreeing to terms:",ye),Te.error("Failed to accept terms.")}},Fn=async()=>{const ye=N.filter(rt=>rt.metadata.isMine),Qe=ye.filter(rt=>!rt.metadata.value);if(Qe.length>0){Te.error(`Please sign all ${Qe.length} remaining fields marked as "You".`);return}Oe(!0);try{const rt={fields:ye.map(Nt=>({id:Nt.id,value:Nt.metadata.value}))};console.log("=== SIGNATURE SUBMISSION DEBUG ==="),console.log("Token:",n),console.log("Payload:",JSON.stringify(rt,null,2)),console.log("Number of fields:",rt.fields.length),rt.fields.forEach((Nt,mt)=>{console.log(`Field ${mt}:`,{id:Nt.id,valueType:typeof Nt.value,valueLength:Nt.value?Nt.value.length:0,valuePreview:Nt.value?Nt.value.substring(0,100):"null"})}),console.log("==================================="),await ps.post(`http://127.0.0.1:8000/api/v1/signatures/${n}/sign`,rt),Te.success("Document signed successfully!"),setTimeout(()=>{c(Nt=>({...Nt,status:"completed"})),window.location.reload()},1e3)}catch(rt){console.error("Submission error:",rt),Te.error("Failed to submit signatures.")}finally{Oe(!1)}};if(t)return a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:a.jsx(Ym,{className:"animate-spin text-indigo-600",size:32})});if(i)return a.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-50 p-4",children:a.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg max-w-md w-full text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(wa,{className:"text-red-600",size:32})}),a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Access Denied"}),a.jsx("p",{className:"text-gray-600 mb-6",children:i}),a.jsx("button",{onClick:()=>e("/"),className:"px-6 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:"Go Home"})]})});if(u?.status==="signed"||o?.status==="completed")return a.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-50 p-4",children:a.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg max-w-md w-full text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(us,{className:"text-green-600",size:32})}),a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Document Signed!"}),a.jsxs("p",{className:"text-gray-600 mb-6",children:["Thank you for signing ",a.jsx("strong",{children:o?.name}),". A copy has been sent to all parties."]}),a.jsx("button",{onClick:()=>e("/"),className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Return Home"})]})});const un=Y?.metadata?.type||"all",qs=un==="all"||un==="text",Os=un==="all"||un==="draw",An=un==="all"||un==="upload";return a.jsxs("div",{className:"min-h-screen bg-slate-100 flex flex-col",children:[a.jsxs("header",{className:"bg-white shadow-sm border-b border-slate-100 flex items-center justify-between px-4 h-14 sticky top-0 z-50 md:hidden",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>Ce(!0),className:"p-2 -ml-2 text-slate-800 active:bg-slate-100 rounded-full transition-colors",children:a.jsx(aN,{size:24})}),a.jsx("h1",{className:"text-base font-semibold text-slate-900 truncate max-w-[200px]",children:o?.name})]}),a.jsxs("div",{className:"w-8 h-8 bg-indigo-50 rounded-full flex items-center justify-center text-indigo-700 font-bold text-xs ring-2 ring-indigo-100",children:[N.filter(ye=>ye.metadata?.value).length,"/",N.filter(ye=>ye.metadata?.isMine).length]})]}),a.jsxs("header",{className:"bg-white shadow px-6 py-4 hidden md:flex items-center justify-between sticky top-0 z-50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"bg-indigo-600 text-white p-2 rounded-lg",children:a.jsx(us,{size:20})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg font-bold text-slate-800 leading-tight",children:o?.name}),a.jsxs("p",{className:"text-xs text-slate-500",children:["Request from ",o?.creator?.name||"Sender"]})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("p",{className:"text-sm text-slate-600",children:["Signing as: ",a.jsx("span",{className:"font-semibold text-slate-900",children:u?.name})]}),a.jsx("button",{onClick:Fn,disabled:Ge,className:`flex items-center gap-2 px-6 py-2.5 rounded-lg font-medium text-white transition-all shadow-sm ${Ge?"bg-indigo-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 hover:shadow-md active:transform active:scale-95"}`,children:Ge?a.jsxs(a.Fragment,{children:[a.jsx(Ym,{size:18,className:"animate-spin"})," Submitting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Xi,{size:18})," Finish Signing"]})})]})]}),W?.access_code_required&&!W?.is_verified&&!t&&a.jsx("div",{className:"fixed inset-0 z-[100] bg-slate-900/80 backdrop-blur-sm flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6 animate-in zoom-in-95 duration-200",children:[a.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center mb-4 mx-auto",children:a.jsx(Ho,{className:"text-indigo-600",size:28})}),a.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2 text-center",children:"Identity Verification Required"}),a.jsx("p",{className:"text-slate-600 text-sm mb-6 text-center",children:"This document requires additional identity verification. Please enter the code sent to your email."}),Xe?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Enter Code"}),a.jsx("input",{type:"text",value:qe,onChange:ye=>Ze(ye.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center text-2xl tracking-widest font-mono",placeholder:"123456",maxLength:6})]}),a.jsx("button",{onClick:Ot,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg transition-colors",children:"Verify Code"}),a.jsx("button",{onClick:Et,className:"w-full py-2 text-indigo-600 text-sm font-medium hover:underline",children:"Resend Code"})]}):a.jsx("button",{onClick:Et,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg transition-colors",children:"Send Verification Code"})]})}),W?.consent_required&&!t&&a.jsx("div",{className:"fixed inset-0 z-[100] bg-slate-900/60 backdrop-blur-sm flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full p-6 animate-in zoom-in-95 duration-200",children:[a.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center mb-4",children:a.jsx(T5,{className:"text-indigo-600",size:28})}),a.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Electronic Records & Signature Disclosure"}),a.jsxs("div",{className:"text-slate-600 text-sm mb-6 space-y-3 max-h-[60vh] overflow-y-auto pr-2",children:[a.jsx("p",{children:"By continuing, you agree to receive documents electronically and sign them using an electronic signature."}),a.jsx("p",{children:"You acknowledge that your electronic signature is legally binding and equivalent to a handwritten signature."}),a.jsxs("p",{className:"text-xs text-slate-500 mt-4",children:["IP Address: ",W.ip_address||"Logged","  Timestamp: ",new Date().toLocaleString()]})]}),a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("button",{onClick:Kt,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg transition-colors flex items-center justify-center gap-2",children:[a.jsx(us,{size:18}),"I Agree & Continue"]}),a.jsx("button",{onClick:()=>e("/"),className:"w-full py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 font-medium rounded-lg transition-colors",children:"Decline"})]})]})}),a.jsx("main",{className:"flex-1 overflow-hidden flex justify-center p-4 md:p-8",children:a.jsxs("div",{className:"w-full max-w-7xl h-[calc(100vh-140px)] md:h-[calc(100vh-180px)] bg-white border border-slate-200 relative rounded-xl overflow-hidden shadow-2xl flex",children:[Ne&&a.jsxs("div",{className:"absolute inset-0 z-50 flex md:hidden",children:[a.jsxs("div",{className:"bg-white w-64 h-full shadow-2xl overflow-y-auto p-4 animate-in slide-in-from-left duration-200",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:"Menu"}),a.jsx("button",{onClick:()=>Ce(!1),className:"p-1 hover:bg-slate-100 rounded-lg",children:a.jsx(bs,{size:24,className:"text-slate-500"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-indigo-50 rounded-xl p-4 border border-indigo-100",children:[a.jsx("p",{className:"text-xs text-indigo-800 font-semibold uppercase tracking-wider mb-1",children:"Your Progress"}),a.jsxs("div",{className:"text-2xl font-bold text-indigo-600 mb-2",children:[N.filter(ye=>ye.metadata?.value).length,"/",N.filter(ye=>ye.metadata?.isMine).length]}),a.jsx("div",{className:"w-full bg-white rounded-full h-2 overflow-hidden border border-indigo-100",children:a.jsx("div",{className:"bg-indigo-500 h-2 rounded-full transition-all",style:{width:`${N.filter(ye=>ye.metadata?.isMine).length===0?0:N.filter(ye=>ye.metadata?.value).length/N.filter(ye=>ye.metadata?.isMine).length*100}%`}})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Pages"}),x&&Array.from({length:x},(ye,Qe)=>{const rt=Qe+1,Nt=L===rt;return a.jsxs("button",{onClick:()=>{const mt=document.getElementById(`pdf-page-${rt}`);mt&&mt.scrollIntoView({behavior:"smooth"}),z(rt),Ce(!1)},className:`w-full text-left px-4 py-3 rounded-lg text-sm font-medium transition-colors ${Nt?"bg-indigo-50 text-indigo-700":"text-slate-600 hover:bg-slate-50"}`,children:["Page ",rt]},`mob-nav-${rt}`)})]})]})]}),a.jsx("div",{className:"flex-1 bg-black/20 backdrop-blur-sm",onClick:()=>Ce(!1)})]}),a.jsxs("div",{className:"w-64 bg-gradient-to-b from-slate-50 to-slate-100/50 border-r border-slate-200 overflow-y-auto p-4 hidden md:block scrollbar-thin scrollbar-thumb-slate-400 scrollbar-track-slate-200",children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs("h3",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider mb-3 flex items-center gap-2",children:[a.jsx("div",{className:"w-1 h-4 bg-indigo-500 rounded-full"}),"Pages"]}),a.jsxs("div",{className:"bg-white rounded-xl p-3 mb-4 border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-xs font-semibold text-slate-600",children:"Signing Progress"}),a.jsxs("span",{className:"text-sm font-bold text-indigo-600",children:[N.filter(ye=>ye.metadata?.value).length,"/",N.filter(ye=>ye.metadata?.isMine).length]})]}),a.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2 overflow-hidden",children:a.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-indigo-600 h-2 rounded-full transition-all duration-500 ease-out",style:{width:`${N.filter(ye=>ye.metadata?.isMine).length===0?0:N.filter(ye=>ye.metadata?.value).length/N.filter(ye=>ye.metadata?.isMine).length*100}%`}})}),N.filter(ye=>ye.metadata?.isMine).length>0&&a.jsx("p",{className:"text-xs text-slate-500 mt-2",children:N.filter(ye=>ye.metadata?.value).length===N.filter(ye=>ye.metadata?.isMine).length?" All fields signed!":`${N.filter(ye=>ye.metadata?.isMine).length-N.filter(ye=>ye.metadata?.value).length} remaining`})]})]}),a.jsx("div",{className:"space-y-3",children:x&&Array.from({length:x},(ye,Qe)=>{const rt=Qe+1,Nt=N.filter(le=>le.pageNumber===rt&&le.metadata?.isMine),mt=Nt.filter(le=>le.metadata?.value),It=Nt.length>0&&mt.length===Nt.length,et=L===rt;return a.jsxs("button",{onClick:()=>{const le=document.getElementById(`pdf-page-${rt}`);le&&(le.scrollIntoView({behavior:"smooth",block:"start"}),z(rt))},className:`w-full rounded-xl border-2 transition-all duration-200 overflow-hidden group ${et?"border-indigo-500 bg-indigo-50 shadow-md ring-2 ring-indigo-200":"border-slate-200 bg-white hover:border-indigo-300 hover:shadow-md hover:bg-indigo-50/30"}`,children:[a.jsxs("div",{className:`relative bg-slate-100 border-b transition-all ${et?"border-indigo-200":"border-slate-200"}`,children:[a.jsx("div",{className:"aspect-[8.5/11] overflow-hidden",children:f&&a.jsx(_f,{file:f,children:a.jsx(Tf,{pageNumber:rt,width:220,renderTextLayer:!1,renderAnnotationLayer:!1,className:"pointer-events-none"})})}),It&&a.jsx("div",{className:"absolute top-2 right-2 bg-emerald-500 text-white rounded-full p-1.5 shadow-lg",children:a.jsx(us,{size:12})})]}),a.jsxs("div",{className:"p-2.5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[a.jsxs("span",{className:`text-sm font-semibold ${et?"text-indigo-700":"text-slate-700"}`,children:["Page ",rt]}),Nt.length>0&&a.jsxs("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${It?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:[mt.length,"/",Nt.length]})]}),Nt.length>0&&a.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5 overflow-hidden",children:a.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${It?"bg-emerald-500":"bg-amber-500"}`,style:{width:`${mt.length/Nt.length*100}%`}})})]})]},`nav-page-${rt}`)})})]}),a.jsxs("div",{className:"flex-1 relative flex flex-col items-center bg-slate-50 md:bg-gradient-to-br md:from-slate-50 md:to-slate-100/30 overflow-hidden",children:[a.jsxs("div",{className:"hidden md:flex w-full bg-white/90 backdrop-blur-xl border-b border-slate-200 p-3 items-center justify-between px-6 flex-shrink-0 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-sm font-bold text-slate-700",children:x?`${x} ${x===1?"Page":"Pages"}`:"Loading..."})]}),L&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-px h-4 bg-slate-300"}),a.jsxs("span",{className:"text-sm text-slate-500 font-medium",children:["Viewing Page ",L]})]})]}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>M(ye=>Math.max(ye-.1,.5)),disabled:R<=.5,className:"p-2 text-slate-600 hover:bg-white hover:text-indigo-600 rounded-md transition-all disabled:opacity-40 disabled:cursor-not-allowed",title:"Zoom Out",children:a.jsx(Yo,{size:18})}),a.jsxs("span",{className:"text-sm font-mono font-bold text-slate-700 w-14 text-center bg-white px-2 py-1 rounded",children:[Math.round(R*100),"%"]}),a.jsx("button",{onClick:()=>M(ye=>Math.min(ye+.1,2)),disabled:R>=2,className:"p-2 text-slate-600 hover:bg-white hover:text-indigo-600 rounded-md transition-all disabled:opacity-40 disabled:cursor-not-allowed",title:"Zoom In",children:a.jsx(Go,{size:18})})]})})]}),a.jsxs("div",{id:"pdf-wrapper",className:"flex-1 w-full overflow-y-auto overflow-x-hidden p-0 md:p-8 flex flex-col items-center scrollbar-thin scrollbar-thumb-slate-400 scrollbar-track-slate-200",onScroll:ye=>{const Qe=ye.target;Qe.querySelectorAll("[data-page-container]").forEach(Nt=>{const mt=Nt.getBoundingClientRect(),It=Qe.getBoundingClientRect();if(mt.top>=It.top&&mt.top<It.top+200){const et=parseInt(Nt.getAttribute("data-page-number"));z(et)}})},children:[f&&a.jsx(_f,{file:f,onLoadSuccess:nt,loading:a.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin mb-4"}),a.jsx("p",{className:"text-slate-600 font-semibold text-lg",children:"Loading PDF..."}),a.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Please wait while we prepare your document"})]}),error:a.jsx("div",{className:"text-center py-20 px-6",children:a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 inline-block",children:[a.jsx(wa,{className:"w-14 h-14 text-red-400 mx-auto mb-4"}),a.jsx("p",{className:"text-red-600 font-bold text-lg mb-2",children:"Failed to load PDF document"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Please ensure it is a valid PDF file."})]})}),className:"flex flex-col items-center gap-8 w-full",children:x&&Array.from({length:x},(ye,Qe)=>a.jsxs("div",{id:`pdf-page-${Qe+1}`,"data-page-container":!0,"data-page-number":Qe+1,className:"relative mb-2 md:mb-8 transition-all group",style:{width:"fit-content",margin:window.innerWidth<768?"0 auto 8px auto":"0 auto 2rem auto"},children:[a.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 z-10 hidden md:block",children:a.jsxs("div",{className:"bg-indigo-600 text-white text-xs font-bold px-3 py-1 rounded-full shadow-md",children:["Page ",Qe+1]})}),a.jsx("div",{className:"bg-white md:rounded-lg shadow-sm md:shadow-xl border-b md:border-2 border-slate-200 overflow-hidden",children:a.jsx(Tf,{pageNumber:Qe+1,renderTextLayer:!0,renderAnnotationLayer:!1,className:"md:rounded-lg",width:$e,scale:R,onLoadSuccess:rt=>{const Nt=rt.getViewport({scale:1});A(mt=>({...mt,[Qe+1]:{width:Nt.width,height:Nt.height}}))}})}),E[Qe+1]&&N.filter(rt=>rt.pageNumber===Qe+1).map(rt=>{const Nt=E[Qe+1],mt=Nt.height/Nt.width,It=$e*R,et=It*mt;return a.jsx(dne,{field:rt,onClick:Ye,pageWidth:It,pageHeight:et},rt.id)})]},`page_${Qe+1}`))}),a.jsx("div",{className:"h-40 w-full flex-shrink-0"})]})]})]})}),a.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 p-4 pb-safe z-[60] md:hidden flex items-center justify-between gap-4 shadow-[0_-4px_12px_-4px_rgba(0,0,0,0.1)]",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("span",{className:"text-xs text-slate-500 font-medium",children:[N.filter(ye=>ye.metadata?.value).length,"/",N.filter(ye=>ye.metadata?.isMine).length," Signed"]}),a.jsxs("span",{className:"text-xs text-indigo-600 font-bold",children:[x," Pages"]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:Fn,disabled:Ge,className:`px-4 py-2.5 rounded-lg font-bold text-sm transition-colors border-2 ${Ge?"border-slate-200 text-slate-400":"border-indigo-100 text-indigo-600 hover:bg-indigo-50"}`,children:Ge?"Saving...":"Finish"}),We.length>0?a.jsxs("button",{onClick:Fe,className:"bg-indigo-600 text-white px-6 py-2.5 rounded-lg font-bold shadow-lg shadow-indigo-600/20 active:scale-95 transition-all flex items-center gap-2 text-sm",children:[N.filter(ye=>ye.metadata.isMine&&ye.metadata.value).length===0?"Start":"Next",a.jsx(Ml,{size:16})]}):a.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 font-bold text-sm px-4",children:[a.jsx(us,{size:16})," All Set!"]})]})]}),a.jsx("div",{className:"hidden md:flex fixed bottom-10 right-10 z-[60] flex-col items-end gap-3 pointer-events-none",children:We.length>0&&a.jsxs("button",{onClick:Fe,className:"pointer-events-auto bg-indigo-600 text-white px-6 py-3 rounded-full font-bold shadow-lg shadow-indigo-600/30 hover:bg-indigo-700 hover:scale-105 active:scale-95 transition-all flex items-center gap-2 animate-bounce-subtle",children:[N.filter(ye=>ye.metadata.isMine&&ye.metadata.value).length===0?"Start Signing":"Next Field",a.jsx(Ml,{size:18})]})}),Y&&a.jsx("div",{className:"fixed inset-0 z-[100] flex items-end md:items-center justify-center bg-black/50 backdrop-blur-sm p-0 md:p-4",children:a.jsxs("div",{className:"bg-white w-full md:w-full md:max-w-md rounded-t-2xl md:rounded-2xl shadow-2xl overflow-hidden animate-in slide-in-from-bottom md:zoom-in duration-200 flex flex-col max-h-[85vh] md:max-h-[90vh]",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsx("h3",{className:"font-bold text-slate-800",children:"Sign Document"}),a.jsx("button",{onClick:()=>U(null),className:"text-slate-400 hover:text-slate-600",children:""})]}),a.jsxs("div",{className:"p-6 overflow-y-auto",children:[Z!=="text_input"&&a.jsxs("div",{className:"flex gap-2 p-1 bg-slate-100 rounded-xl mb-6",children:[qs&&a.jsxs("button",{onClick:()=>$("text"),className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-lg font-medium text-xs transition-all ${Z==="text"?"bg-white text-indigo-600 shadow-sm":"text-slate-600 hover:text-slate-800"}`,children:[a.jsx(Ol,{size:16})," Type"]}),Os&&a.jsxs("button",{onClick:()=>$("draw"),className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-lg font-medium text-xs transition-all ${Z==="draw"?"bg-white text-indigo-600 shadow-sm":"text-slate-600 hover:text-slate-800"}`,children:[a.jsx(ar,{size:16})," Draw"]}),An&&a.jsxs("button",{onClick:()=>$("upload"),className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-lg font-medium text-xs transition-all ${Z==="upload"?"bg-white text-indigo-600 shadow-sm":"text-slate-600 hover:text-slate-800"}`,children:[a.jsx(Sf,{size:16})," Upload"]})]}),Z==="text"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Type your name below. We'll convert it to a signature."}),a.jsx("input",{type:"text",autoFocus:!0,value:ae,onChange:ye=>xe(ye.target.value),placeholder:`Signed by ${u.name}`,className:"w-full text-xl font-handwriting px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all placeholder:text-slate-300",style:{fontFamily:"Dancing Script, cursive"}})]}),Z==="text_input"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Ol,{size:18,className:"text-indigo-600"}),a.jsx("h3",{className:"font-semibold text-slate-700",children:Y.metadata.label||"Enter Text"})]}),a.jsx("input",{type:"text",autoFocus:!0,value:ae,onChange:ye=>xe(ye.target.value),placeholder:Y.metadata.placeholder||"Type here...",className:"w-full text-base px-4 py-3 bg-white border border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all placeholder:text-slate-400"})]}),Z==="draw"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative border-2 border-dashed border-slate-300 rounded-xl bg-slate-50 touch-none",children:[a.jsx("canvas",{ref:se,onMouseDown:pe,onMouseMove:je,onMouseUp:Je,onMouseLeave:Je,onTouchStart:pe,onTouchMove:je,onTouchEnd:Je,className:"w-full h-48 cursor-crosshair block rounded-xl",style:{width:"100%",height:"192px"}}),a.jsx("button",{onClick:lt,className:"absolute top-2 right-2 p-1.5 bg-white rounded-lg shadow border border-slate-200 hover:bg-red-50 hover:text-red-500",title:"Clear",children:a.jsx(Ki,{size:16})}),!ne&&!fe&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-50",children:a.jsx("span",{className:"text-slate-400 text-sm",children:"Draw here"})})]}),a.jsxs("button",{onClick:lt,className:"flex items-center gap-2 text-xs text-slate-500 hover:text-slate-700",children:[a.jsx(tx,{size:14})," Clear Signature"]})]}),Z==="upload"&&a.jsx("div",{className:"space-y-4",children:a.jsx("div",{className:"border-2 border-dashed border-slate-300 rounded-xl p-8 text-center bg-slate-50",children:G?a.jsxs("div",{className:"space-y-4",children:[a.jsx("img",{src:G,alt:"Uploaded",className:"max-h-24 mx-auto"}),a.jsx("button",{onClick:()=>X(null),className:"text-xs font-medium text-red-600 hover:text-red-700",children:"Remove & Retry"})]}):a.jsxs(a.Fragment,{children:[a.jsx(Sf,{size:32,className:"text-slate-400 mx-auto mb-2"}),a.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"PNG, JPG (max 5MB)"}),a.jsxs("label",{className:"inline-block cursor-pointer",children:[a.jsx("span",{className:"px-4 py-2 bg-white border border-slate-300 rounded-lg text-xs font-medium text-slate-700 hover:bg-slate-50",children:"Choose Image"}),a.jsx("input",{type:"file",accept:"image/*",onChange:ct,className:"hidden"})]})]})})})]}),a.jsxs("div",{className:"px-6 py-4 bg-slate-50 border-t border-slate-100 flex justify-end gap-3 filter-none z-10 sticky bottom-0",children:[a.jsx("button",{onClick:()=>U(null),className:"px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-200 rounded-lg transition-colors",children:"Cancel"}),a.jsx("button",{onClick:Pt,disabled:!St(),className:"px-6 py-2 text-sm font-medium bg-indigo-600 text-white hover:bg-indigo-700 rounded-lg shadow-sm transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Apply Signature"})]})]})}),a.jsx("style",{children:`
                @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap');
                .font-handwriting { font-family: 'Dancing Script', cursive; }
            `})]})},Kb=({isOpen:n,onClose:e,onSignupSuccess:t,documentTitle:s,suggestedBusinessName:i})=>{const{setToken:r,setUser:o}=Dr(),[c,u]=_.useState(!1),[h,f]=_.useState({name:"",email:"",password:"",business_name:""});_.useEffect(()=>{i&&f(y=>({...y,business_name:i}))},[i]);const g=y=>{f(N=>({...N,[y.target.name]:y.target.value}))},x=async y=>{y.preventDefault(),u(!0);try{const N=await wt.post("/register",{name:h.name,email:h.email,password:h.password,password_confirmation:h.password,device_name:"web"}),{token:j,data:E}=N.data;r(j),o(E);try{const A=h.business_name||`${h.name}'s Business`;await wt.post("/businesses",{name:A,email:h.email,industry:"Other",size:"Freelancer",city:"Remote",country:"Global"})}catch(A){console.error("Failed to auto-create business:",A)}Te.success("Account created successfully!"),t(j)}catch(N){console.error("Signup failed",N),N.response?.data?.errors?Object.values(N.response.data.errors).flat().forEach(E=>Te.error(E)):Te.error("Signup failed. Please try again.")}finally{u(!1)}};return a.jsx(dn,{children:n&&a.jsxs(a.Fragment,{children:[a.jsx(Ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-50",onClick:e}),a.jsxs(Ie.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-md bg-white rounded-2xl shadow-2xl z-50 overflow-hidden",children:[a.jsxs("div",{className:"p-6 bg-slate-50 border-b border-slate-100 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Save Your Document"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Create a free account to save & export."})]}),a.jsx("button",{onClick:e,className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors",children:a.jsx(bs,{size:20})})]}),a.jsxs("form",{onSubmit:x,className:"p-6 space-y-4",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Full Name"}),a.jsx("input",{type:"text",name:"name",required:!0,className:"w-full px-4 py-2 bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all",placeholder:"John Doe",value:h.name,onChange:g})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Email Address"}),a.jsx("input",{type:"email",name:"email",required:!0,className:"w-full px-4 py-2 bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all",placeholder:"john@company.com",value:h.email,onChange:g})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{className:"text-sm font-semibold text-slate-700",children:["Business Name ",a.jsx("span",{className:"text-slate-400 font-normal",children:"(Optional)"})]}),a.jsx("input",{type:"text",name:"business_name",className:"w-full px-4 py-2 bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all",placeholder:"Acme Inc.",value:h.business_name,onChange:g})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Password"}),a.jsx("input",{type:"password",name:"password",required:!0,minLength:8,className:"w-full px-4 py-2 bg-white border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all",placeholder:"",value:h.password,onChange:g})]}),a.jsxs("div",{className:"pt-4",children:[a.jsx("button",{type:"submit",disabled:c,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl shadow-lg shadow-indigo-200 transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:c?a.jsx(Sn,{size:20,className:"animate-spin"}):a.jsxs(a.Fragment,{children:["Create Account & Save ",a.jsx(Ml,{size:20})]})}),a.jsx("p",{className:"text-xs text-center text-slate-400 mt-4",children:"By signing up, you agree to our Terms of Service and Privacy Policy."})]})]})]})]})})},hne=({onSaveRequest:n})=>{const e=ts(),{formData:t,docContent:s,signatures:i,documentName:r,setDocumentName:o,isLoading:c,handleFormChange:u,handleContentChange:h,addSection:f,removeSection:g,updateSection:x,reorderSections:y,addSignature:N,updateSignature:j,removeSignature:E,styles:A,updateStyle:R,resetStyles:M}=rP(null),L=zd("(min-width: 1024px)"),[z,W]=_.useState("edit"),[I,Y]=_.useState(1),[U,Z]=_.useState(null),[$,ae]=_.useState(null),[xe,fe]=_.useState(null),ke=ht.useRef(null),[G,X]=_.useState({isOpen:!1,data:null}),se=Id(Ha(Lc,{activationConstraint:{distance:8}}),Ha(Mf,{activationConstraint:{delay:250,tolerance:5}})),ee=ht.useDeferredValue(t),ne=ht.useDeferredValue(s),V=()=>e("/create-document"),re=()=>Y(pe=>Math.min(pe+.1,1.5)),ge=()=>Y(pe=>Math.max(pe-.1,.5)),Ne=()=>{const pe=t.receivingPartyName?.trim();pe?(o(`NDA - ${pe}`),ae(null),fe(null),Te.success("Generated smart name!")):Te.error("Enter 'Receiving Party Name' in the form first.")},Ce=()=>{const pe={name:r,type_slug:"nda",content:JSON.stringify({formData:t,docContent:s,signatures:i,styles:A}),status:"draft",suggestedBusinessName:t.disclosingPartyName};n(pe)},We=pe=>Z(pe.active),Ge=pe=>{const{active:je,over:Se}=pe;if(Z(null),!!Se&&Se.id==="document-canvas"){const Je=document.getElementById("printable-document");if(Je&&je.rect.current.translated){const lt=Je.getBoundingClientRect(),ct=(je.rect.current.translated.left-lt.left)/I,Fe=(je.rect.current.translated.top-lt.top)/I;if(je.data.current?.type==="toolbar-item")X({isOpen:!0,data:{id:null,position:{x:ct,y:Fe},type:"all",required:!0,order:i.length+1}});else if(je.data.current?.type==="signature-field"){const nt=je.id;j(nt,{position:{x:ct,y:Fe}})}}}},Oe=pe=>{if(pe.id)j(pe.id,{metadata:{signeeName:pe.signeeName,signeeEmail:pe.signeeEmail,type:pe.type,required:pe.required,order:pe.order}});else{const je={id:ch(),position:G.data.position,metadata:{signeeName:pe.signeeName,signeeEmail:pe.signeeEmail,type:pe.type,required:pe.required,order:pe.order}};N(je)}},$e=pe=>{X({isOpen:!0,data:{id:pe.id,...pe.metadata}})},Le=()=>{X({isOpen:!0,data:{id:null,position:{x:50,y:100},type:"all",required:!0,order:i.length+1}})};return c?a.jsx("div",{className:"flex h-screen items-center justify-center bg-slate-50",children:a.jsx(Sn,{size:40,className:"animate-spin text-indigo-600 mb-4"})}):a.jsx(Bd,{sensors:se,onDragStart:We,onDragEnd:Ge,children:a.jsxs("div",{className:"flex flex-col h-screen bg-slate-100 overflow-hidden",children:[a.jsx(wg,{isOpen:G.isOpen,onClose:()=>X({isOpen:!1,data:null}),onSave:Oe,initialData:G.data,parties:{disclosingPartyName:t.disclosingPartyName,receivingPartyName:t.receivingPartyName,disclosingSignatoryName:t.disclosingSignatoryName,receivingSignatoryName:t.receivingSignatoryName}}),a.jsx(bg,{dropAnimation:{sideEffects:({active:pe})=>(document.body.style.cursor="grabbing",()=>{document.body.style.cursor=""})},children:U?U.data.current?.type==="toolbar-item"?a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-indigo-500 bg-white shadow-xl opacity-90 cursor-grabbing ring-2 ring-indigo-500/20 w-48",children:[a.jsx("div",{className:"p-2 rounded-md bg-indigo-100 text-indigo-600",children:a.jsx("div",{className:"w-5 h-5 flex items-center justify-center font-bold",children:"+"})}),a.jsx("span",{className:"text-sm font-medium text-slate-900",children:"Placing Field..."})]}):U.data.current?.type==="signature-field"?a.jsxs("div",{className:"w-64 bg-white/95 backdrop-blur-sm border-2 border-indigo-500 rounded-lg shadow-2xl p-3 flex flex-col cursor-grabbing",children:[a.jsx("div",{className:"flex items-center gap-2 text-indigo-700 font-semibold border-b pb-2 mb-2",children:a.jsx("span",{children:U.data.current.signeeName||"Signature"})}),a.jsx("div",{className:"h-10 flex items-center justify-center text-indigo-200",children:"Sign Here"})]}):null:null}),a.jsxs("header",{className:"no-print h-14 md:h-16 bg-white/80 backdrop-blur-md border-b border-slate-200/60 px-4 md:px-6 flex items-center justify-between flex-shrink-0 z-30 shadow-sm relative transition-all duration-300",children:[a.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[a.jsx("button",{onClick:V,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors flex-shrink-0",title:"Back",children:a.jsx(Ia,{size:20})}),a.jsxs("div",{className:"min-w-0 relative",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{ref:ke,type:"text",value:r,onChange:pe=>{o(pe.target.value),$&&ae(null)},className:`font-bold text-sm md:text-lg bg-transparent border-b-2 focus:ring-0 p-0 m-0 w-auto min-w-[150px] max-w-[300px] placeholder-slate-400 truncate transition-colors ${$?"border-red-500 text-slate-800 ring-4 ring-red-500/10":"border-transparent hover:border-slate-200 text-slate-800"}`,placeholder:"Enter Document Name"}),a.jsx("button",{onClick:Ne,className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-md transition-colors",children:a.jsx(hg,{size:16})}),a.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 text-xs rounded-full uppercase tracking-wide",children:"Guest Mode"})]}),a.jsx("p",{className:"text-[10px] md:text-xs text-slate-400 font-medium whitespace-nowrap hidden sm:block mt-0.5",children:"Create your document and sign up to save."})]})]}),a.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[a.jsxs("div",{className:"hidden lg:flex items-center bg-slate-100 rounded-lg p-1 mr-4",children:[a.jsx("button",{onClick:ge,className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-slate-500 transition-all",children:a.jsx(Yo,{size:16})}),a.jsxs("span",{className:"text-xs font-semibold text-slate-600 w-12 text-center",children:[Math.round(I*100),"%"]}),a.jsx("button",{onClick:re,className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-slate-500 transition-all",children:a.jsx(Go,{size:16})})]}),a.jsxs("button",{onClick:Ce,className:"flex items-center gap-2 px-5 py-2 rounded-lg text-white font-medium shadow-md transition-all bg-indigo-600 hover:bg-indigo-700",children:[a.jsx(Xi,{size:18}),a.jsx("span",{children:"Save & Create Account"})]})]})]}),a.jsxs("div",{className:"flex flex-col lg:flex-row flex-1 overflow-hidden relative pb-[70px] lg:pb-0",children:[a.jsx("div",{className:`no-print w-full lg:w-[400px] h-full bg-white border-b lg:border-b-0 lg:border-r border-slate-200 overflow-y-auto z-20 shadow-sm flex-shrink-0 lg:order-1 ${L||z==="edit"?"block":"hidden"}`,children:a.jsx(tP,{formData:t,onChange:u,docContent:s,onContentChange:h,addSection:f,removeSection:g,updateSection:x,reorderSections:y,styles:A,onStyleUpdate:R,onStyleReset:M})}),a.jsxs("div",{className:`flex-1 h-full overflow-y-auto bg-slate-50/50 p-4 md:p-8 sm:p-12 flex justify-center items-start scrollbar-thin scrollbar-thumb-slate-300 lg:order-2 ${L||z==="preview"?"flex":"hidden"}`,style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"20px 20px"},children:[a.jsx(By,{data:ee,content:ne,zoom:I,signatures:i,onUpdateSignature:j,onRemoveSignature:E,onEditSignature:$e,styles:A}),!L&&z==="preview"&&a.jsx("button",{onClick:Le,className:"fixed bottom-24 right-6 w-14 h-14 bg-indigo-600 text-white rounded-full shadow-lg shadow-indigo-600/30 flex items-center justify-center hover:bg-indigo-700 transition-transform active:scale-95 z-30",children:a.jsx("span",{className:"text-2xl font-bold",children:"+"})})]})]}),!L&&a.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 flex justify-between items-center px-6 py-3 pb-safe z-40 safe-area-bottom",children:[a.jsx("button",{onClick:()=>W("edit"),className:`flex flex-col items-center gap-1 ${z==="edit"?"text-indigo-600":"text-slate-400"}`,children:a.jsx("span",{className:"text-[10px] font-medium",children:"Editor"})}),a.jsx("button",{onClick:()=>W("preview"),className:`flex flex-col items-center gap-1 ${z==="preview"?"text-indigo-600":"text-slate-400"}`,children:a.jsx("span",{className:"text-[10px] font-medium",children:"Preview"})}),a.jsxs("button",{onClick:Ce,className:"flex flex-col items-center gap-1 text-slate-400 active:text-indigo-600",children:[a.jsx(Xi,{size:24}),a.jsx("span",{className:"text-[10px] font-medium",children:"Save"})]})]})]})})},fne=()=>Math.random().toString(36).substr(2,9),mne={title:"Business / Project Proposal",sections:[{id:"1",title:"Introduction",content:"This proposal is submitted by {{providerCompany}} to {{clientName}} to outline the scope, deliverables, timelines, and commercial terms for {{projectDescription}}. This document is intended to present a clear understanding of the proposed engagement and to serve as a basis for mutual agreement."},{id:"2",title:"Client Objectives",content:`The objective of this proposal is to assist {{clientCompany}} in achieving the following goals:

{{objectivesList}}`},{id:"3",title:"Scope of Work",content:`The scope of work under this proposal shall include, but is not limited to, the following services:

**4.1 Services Included**
{{scopeIncludedList}}

**4.2 Services Excluded**
Any services not explicitly mentioned above shall be considered outside the scope and may be provided under a separate agreement or change request.`},{id:"4",title:"Deliverables",content:`The following deliverables shall be provided as part of this engagement:

{{deliverablesList}}

All deliverables shall be submitted in the agreed format and within the defined timeline.`},{id:"5",title:"Project Timeline",content:"The estimated timeline for completion of the project is as follows (see table below). Timelines are indicative and subject to client approvals and dependencies."},{id:"6",title:"Commercials & Pricing",content:`The total professional fees for the services described in this proposal shall be: {{totalProjectCost}}.

**Payment Terms**
- [Percentage] payable upon acceptance
- [Percentage] payable upon milestone completion
- [Percentage] payable upon final delivery

All payments shall be made within {{paymentDays}} days from the date of invoice.`},{id:"7",title:"Client Responsibilities",content:`The Client agrees to:
- Provide accurate and timely information
- Share necessary access, approvals, and feedback
- Assign a single point of contact for communication

Delays caused due to client dependencies may impact project timelines.`},{id:"8",title:"Confidentiality",content:"Both parties agree to maintain strict confidentiality of all proprietary, technical, commercial, and business information exchanged during the course of this engagement. Confidential information shall not be disclosed to any third party without prior written consent."},{id:"9",title:"Intellectual Property Rights",content:`Unless otherwise agreed in writing:
- All intellectual property developed during the project shall remain the property of {{providerCompany}} until full payment is received.
- Upon full payment, ownership or license rights shall be transferred as mutually agreed.`},{id:"10",title:"Limitation of Liability",content:"In no event shall either party be liable for indirect, incidental, or consequential damages. The total liability of {{providerCompany}} shall not exceed the total fees paid under this proposal."},{id:"11",title:"Term & Termination",content:"This proposal shall remain valid for {{validityDays}} days from the proposal date. Either party may terminate the engagement by providing {{noticeDays}} days written notice. Fees for work completed up to the termination date shall be payable."},{id:"12",title:"Governing Law",content:"This proposal shall be governed by and construed in accordance with the laws of {{jurisdiction}}, and courts of {{courtCity}} shall have exclusive jurisdiction."}]},gne=({onSaveRequest:n})=>{const e=ts(),t=zd("(min-width: 1024px)"),[s,i]=_.useState("edit"),[r,o]=_.useState(1),[c,u]=_.useState("Untitled Proposal"),[h,f]=_.useState(null),[g,x]=_.useState({proposalTitle:"Website Redesign Project",proposalDate:new Date().toLocaleDateString(),logoSize:80,logoAlignment:"center",brandingEnabled:!0,referenceNo:"",clientName:"",clientCompany:"",clientAddress:"",providerName:"",providerCompany:"",providerAddress:"",projectDescription:"",totalProjectCost:"",paymentDays:"15",validityDays:"30",noticeDays:"30",jurisdiction:"",courtCity:"",timeline:[{phase:"Phase 1",description:"Requirement Analysis",duration:"5 days"},{phase:"Phase 2",description:"Execution / Development",duration:"15 days"},{phase:"Phase 3",description:"Review & Final Delivery",duration:"5 days"}],objectivesList:["Increase website traffic by 30%","Improve conversion rates","Modernize brand identity"],scopeIncludedList:["UX/UI Design of 5 core pages","Frontend Development (React)","Mobile Responsiveness"],scopeExcludedList:["Content creation","Hosting setup","Ongoing maintenance"],deliverablesList:["High-fidelity mockups (Figma)","Production-ready code repository","Admin dashboard access"]}),[y,N]=_.useState(mne),{styles:j,updateStyle:E,resetStyles:A}=Sg(),R=ht.useDeferredValue(g),M=ht.useDeferredValue(y),L=()=>e("/create-document"),z=()=>o(V=>Math.min(V+.1,1.5)),W=()=>o(V=>Math.max(V-.1,.5)),I=()=>{const V=g.clientCompany||g.clientName;V&&V.trim()?(u(`Proposal - ${V.trim()}`),f(null),Te.success("Generated smart name!")):Te.error("Enter 'Client Company' or 'Client Name' first.")},Y=V=>{const{name:re,value:ge}=V.target;x(Ne=>({...Ne,[re]:ge}))},U=V=>{const{name:re,value:ge}=V.target;N(Ne=>({...Ne,[re]:ge}))},Z=(V,re,ge)=>{const Ne=[...g.timeline];Ne[V][re]=ge,x(Ce=>({...Ce,timeline:Ne}))},$=()=>{x(V=>({...V,timeline:[...V.timeline,{phase:"New Phase",description:"",duration:""}]}))},ae=V=>{g.timeline.length<=1||x(re=>({...re,timeline:re.timeline.filter((ge,Ne)=>Ne!==V)}))},xe=V=>{x(re=>({...re,[V]:[...re[V]||[],"New Item"]}))},fe=(V,re)=>{x(ge=>({...ge,[V]:ge[V].filter((Ne,Ce)=>Ce!==re)}))},ke=(V,re,ge)=>{const Ne=[...g[V]];Ne[re]=ge,x(Ce=>({...Ce,[V]:Ne}))},G=()=>{const V={id:fne(),title:"New Section",content:"Enter the details of this new clause here..."};N(re=>({...re,sections:[...re.sections,V]}))},X=V=>{N(re=>({...re,sections:re.sections.filter(ge=>ge.id!==V)}))},se=(V,re,ge)=>{N(Ne=>({...Ne,sections:Ne.sections.map(Ce=>Ce.id===V?{...Ce,[re]:ge}:Ce)}))},ee=V=>{N(re=>({...re,sections:V}))},ne=()=>{const V={name:c,type_slug:"proposal",content:JSON.stringify({formData:g,docContent:y,styles:j}),status:"draft",suggestedBusinessName:g.providerCompany};n(V)};return a.jsxs("div",{className:"flex flex-col h-screen bg-slate-100 overflow-hidden",children:[a.jsxs("header",{className:"no-print h-14 md:h-16 bg-white/80 backdrop-blur-md border-b border-slate-200/60 px-4 md:px-6 flex items-center justify-between flex-shrink-0 z-30 shadow-sm relative transition-all duration-300",children:[a.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[a.jsx("button",{onClick:L,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors flex-shrink-0",title:"Back",children:a.jsx(Ia,{size:20})}),a.jsxs("div",{className:"min-w-0 relative",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:c,onChange:V=>{u(V.target.value),h&&f(null)},className:`font-bold text-sm md:text-lg bg-transparent border-b-2 focus:ring-0 p-0 m-0 w-auto min-w-[150px] max-w-[300px] placeholder-slate-400 truncate transition-colors ${h?"border-red-500 text-slate-800 ring-4 ring-red-500/10":"border-transparent hover:border-slate-200 text-slate-800"}`,placeholder:"Enter Document Name"}),a.jsx("button",{onClick:I,className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-md transition-colors",children:a.jsx(hg,{size:16})}),a.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 text-xs rounded-full uppercase tracking-wide",children:"Guest Mode"})]}),a.jsx("p",{className:"text-[10px] md:text-xs text-slate-400 font-medium whitespace-nowrap hidden sm:block mt-0.5",children:"Create your document and sign up to save."})]})]}),a.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[a.jsxs("div",{className:"hidden lg:flex items-center bg-slate-100 rounded-lg p-1 mr-4",children:[a.jsx("button",{onClick:W,className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-slate-500 transition-all",children:a.jsx(Yo,{size:16})}),a.jsxs("span",{className:"text-xs font-semibold text-slate-600 w-12 text-center",children:[Math.round(r*100),"%"]}),a.jsx("button",{onClick:z,className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-slate-500 transition-all",children:a.jsx(Go,{size:16})})]}),a.jsxs("button",{onClick:ne,className:"flex items-center gap-2 px-5 py-2 rounded-lg text-white font-medium shadow-md transition-all bg-indigo-600 hover:bg-indigo-700",children:[a.jsx(Xi,{size:18}),a.jsx("span",{children:"Save & Create Account"})]})]})]}),a.jsxs("div",{className:"flex flex-col lg:flex-row flex-1 overflow-hidden relative pb-[70px] lg:pb-0",children:[a.jsx("div",{className:`no-print w-full lg:w-[400px] h-full bg-white border-b lg:border-b-0 lg:border-r border-slate-200 overflow-y-auto z-20 shadow-sm flex-shrink-0 lg:order-1 ${t||s==="edit"?"block":"hidden"}`,children:a.jsx(vP,{formData:g,onChange:Y,docContent:y,onContentChange:U,addSection:G,removeSection:X,updateSection:se,reorderSections:ee,updateTimeline:Z,addTimelineRow:$,removeTimelineRow:ae,addListItem:xe,removeListItem:fe,updateListItem:ke,styles:j,onStyleUpdate:E,onStyleReset:A})}),a.jsx("div",{className:`flex-1 h-full overflow-y-auto bg-slate-50/50 p-4 md:p-8 sm:p-12 flex justify-center items-start scrollbar-thin scrollbar-thumb-slate-300 lg:order-2 ${t||s==="preview"?"flex":"hidden"}`,style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"20px 20px"},children:a.jsx(ef,{data:R,content:M,zoom:r,styles:j})})]}),!t&&a.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 flex justify-between items-center px-6 py-3 pb-safe z-40 safe-area-bottom",children:[a.jsx("button",{onClick:()=>i("edit"),className:`flex flex-col items-center gap-1 ${s==="edit"?"text-indigo-600":"text-slate-400"}`,children:a.jsx("span",{className:"text-[10px] font-medium",children:"Editor"})}),a.jsx("button",{onClick:()=>i("preview"),className:`flex flex-col items-center gap-1 ${s==="preview"?"text-indigo-600":"text-slate-400"}`,children:a.jsx("span",{className:"text-[10px] font-medium",children:"Preview"})}),a.jsxs("button",{onClick:ne,className:"flex flex-col items-center gap-1 text-slate-400 active:text-indigo-600",children:[a.jsx(Xi,{size:24}),a.jsx("span",{className:"text-[10px] font-medium",children:"Save"})]})]})]})},pne=({onSaveRequest:n})=>{const e=ts(),{formData:t,docContent:s,signatures:i,documentName:r,setDocumentName:o,isLoading:c,handleFormChange:u,handleContentChange:h,addSection:f,removeSection:g,updateSection:x,reorderSections:y,addSignature:N,updateSignature:j,removeSignature:E,styles:A,updateStyle:R,resetStyles:M}=NP(null),L=zd("(min-width: 1024px)"),[z,W]=_.useState("edit"),[I,Y]=_.useState(1),[U,Z]=_.useState(null),[$,ae]=_.useState(null),[xe,fe]=_.useState(null),ke=ht.useRef(null),[G,X]=_.useState({isOpen:!1,data:null}),se=Id(Ha(Lc,{activationConstraint:{distance:8}}),Ha(Mf,{activationConstraint:{delay:250,tolerance:5}})),ee=ht.useDeferredValue(t),ne=ht.useDeferredValue(s),V=()=>e("/create-document"),re=()=>Y(pe=>Math.min(pe+.1,1.5)),ge=()=>Y(pe=>Math.max(pe-.1,.5)),Ne=()=>{const pe=t.clientName?.trim(),je=t.consultantName?.trim();pe&&je?(o(`Consulting Agreement - ${pe} & ${je}`),ae(null),fe(null),Te.success("Generated smart name!")):Te.error("Enter Client and Consultant names first.")},Ce=()=>{const pe={name:r,type_slug:"consulting-agreement",content:JSON.stringify({formData:t,docContent:s,signatures:i,styles:A}),status:"draft",suggestedBusinessName:t.clientName};n(pe)},We=pe=>Z(pe.active),Ge=pe=>{const{active:je,over:Se}=pe;if(Z(null),!!Se&&Se.id==="document-canvas"){const Je=document.getElementById("printable-document");if(Je&&je.rect.current.translated){const lt=Je.getBoundingClientRect(),ct=(je.rect.current.translated.left-lt.left)/I,Fe=(je.rect.current.translated.top-lt.top)/I;je.data.current?.type==="toolbar-item"?X({isOpen:!0,data:{id:null,position:{x:ct,y:Fe},type:"all",required:!0,order:i.length+1}}):je.data.current?.type==="signature-field"&&j(je.id,{position:{x:ct,y:Fe}})}}},Oe=pe=>{if(pe.id)j(pe.id,{metadata:{signeeName:pe.signeeName,signeeEmail:pe.signeeEmail,type:pe.type,required:pe.required,order:pe.order}});else{const je={id:ch(),position:G.data.position,metadata:{signeeName:pe.signeeName,signeeEmail:pe.signeeEmail,type:pe.type,required:pe.required,order:pe.order}};N(je)}},$e=pe=>{X({isOpen:!0,data:{id:pe.id,...pe.metadata}})},Le=()=>{X({isOpen:!0,data:{id:null,position:{x:50,y:100},type:"all",required:!0,order:i.length+1}})};return c?a.jsx("div",{className:"flex h-screen items-center justify-center bg-slate-50",children:a.jsx(Sn,{size:40,className:"animate-spin text-indigo-600 mb-4"})}):a.jsx(Bd,{sensors:se,onDragStart:We,onDragEnd:Ge,children:a.jsxs("div",{className:"flex flex-col h-screen bg-slate-100 overflow-hidden",children:[a.jsx(wg,{isOpen:G.isOpen,onClose:()=>X({isOpen:!1,data:null}),onSave:Oe,initialData:G.data,parties:{disclosingPartyName:t.clientName,receivingPartyName:t.consultantName,disclosingSignatoryName:t.clientSignatoryName,receivingSignatoryName:t.consultantSignatoryName}}),a.jsx(bg,{dropAnimation:{sideEffects:({active:pe})=>(document.body.style.cursor="grabbing",()=>{document.body.style.cursor=""})},children:U?U.data.current?.type==="toolbar-item"?a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-indigo-500 bg-white shadow-xl opacity-90 cursor-grabbing ring-2 ring-indigo-500/20 w-48",children:[a.jsx("div",{className:"p-2 rounded-md bg-indigo-100 text-indigo-600",children:a.jsx("div",{className:"w-5 h-5 flex items-center justify-center font-bold",children:"+"})}),a.jsx("span",{className:"text-sm font-medium text-slate-900",children:"Placing Field..."})]}):U.data.current?.type==="signature-field"?a.jsxs("div",{className:"w-64 bg-white/95 backdrop-blur-sm border-2 border-indigo-500 rounded-lg shadow-2xl p-3 flex flex-col cursor-grabbing",children:[a.jsx("div",{className:"flex items-center gap-2 text-indigo-700 font-semibold border-b pb-2 mb-2",children:a.jsx("span",{children:U.data.current.signeeName||"Signature"})}),a.jsx("div",{className:"h-10 flex items-center justify-center text-indigo-200",children:"Sign Here"})]}):null:null}),a.jsxs("header",{className:"no-print h-14 md:h-16 bg-white/80 backdrop-blur-md border-b border-slate-200/60 px-4 md:px-6 flex items-center justify-between flex-shrink-0 z-30 shadow-sm relative transition-all duration-300",children:[a.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[a.jsx("button",{onClick:V,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors flex-shrink-0",children:a.jsx(Ia,{size:20})}),a.jsxs("div",{className:"min-w-0 relative",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{ref:ke,type:"text",value:r,onChange:pe=>{o(pe.target.value),$&&ae(null)},className:`font-bold text-sm md:text-lg bg-transparent border-b-2 focus:ring-0 p-0 m-0 w-auto min-w-[150px] max-w-[300px] placeholder-slate-400 truncate transition-colors ${$?"border-red-500 text-slate-800 ring-4 ring-red-500/10":"border-transparent hover:border-slate-200 text-slate-800"}`,placeholder:"Enter Document Name"}),a.jsx("button",{onClick:Ne,className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-md transition-colors",children:a.jsx(hg,{size:16})}),a.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 text-xs rounded-full uppercase tracking-wide",children:"Guest Mode"})]}),a.jsx("p",{className:"text-[10px] md:text-xs text-slate-400 font-medium whitespace-nowrap hidden sm:block mt-0.5",children:"Create your document and sign up to save."})]})]}),a.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[a.jsxs("div",{className:"hidden lg:flex items-center bg-slate-100 rounded-lg p-1 mr-4",children:[a.jsx("button",{onClick:ge,className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-slate-500 transition-all",children:a.jsx(Yo,{size:16})}),a.jsxs("span",{className:"text-xs font-semibold text-slate-600 w-12 text-center",children:[Math.round(I*100),"%"]}),a.jsx("button",{onClick:re,className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-slate-500 transition-all",children:a.jsx(Go,{size:16})})]}),a.jsxs("button",{onClick:Ce,className:"flex items-center gap-2 px-5 py-2 rounded-lg text-white font-medium shadow-md transition-all bg-indigo-600 hover:bg-indigo-700",children:[a.jsx(Xi,{size:18}),a.jsx("span",{children:"Save & Create Account"})]})]})]}),a.jsxs("div",{className:"flex flex-col lg:flex-row flex-1 overflow-hidden relative pb-[70px] lg:pb-0",children:[a.jsx("div",{className:`no-print w-full lg:w-[400px] h-full bg-white border-b lg:border-b-0 lg:border-r border-slate-200 overflow-y-auto z-20 shadow-sm flex-shrink-0 lg:order-1 ${L||z==="edit"?"block":"hidden"}`,children:a.jsx(SP,{formData:t,onChange:u,docContent:s,onContentChange:h,addSection:f,removeSection:g,updateSection:x,reorderSections:y,styles:A,onStyleUpdate:R,onStyleReset:M})}),a.jsxs("div",{className:`flex-1 h-full overflow-y-auto bg-slate-50/50 p-4 md:p-8 sm:p-12 flex justify-center items-start scrollbar-thin scrollbar-thumb-slate-300 lg:order-2 ${L||z==="preview"?"flex":"hidden"}`,style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"20px 20px"},children:[a.jsx(Hy,{data:ee,content:ne,zoom:I,signatures:i,onRemoveSignature:E,onEditSignature:$e,styles:A,businessLogo:null}),!L&&z==="preview"&&a.jsx("button",{onClick:Le,className:"fixed bottom-24 right-6 w-14 h-14 bg-indigo-600 text-white rounded-full shadow-lg shadow-indigo-600/30 flex items-center justify-center hover:bg-indigo-700 transition-transform active:scale-95 z-30",children:a.jsx("span",{className:"text-2xl font-bold",children:"+"})})]})]}),!L&&a.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 flex justify-between items-center px-6 py-3 pb-safe z-40 safe-area-bottom",children:[a.jsx("button",{onClick:()=>W("edit"),className:`flex flex-col items-center gap-1 ${z==="edit"?"text-indigo-600":"text-slate-400"}`,children:a.jsx("span",{className:"text-[10px] font-medium",children:"Editor"})}),a.jsx("button",{onClick:()=>W("preview"),className:`flex flex-col items-center gap-1 ${z==="preview"?"text-indigo-600":"text-slate-400"}`,children:a.jsx("span",{className:"text-[10px] font-medium",children:"Preview"})}),a.jsxs("button",{onClick:Ce,className:"flex flex-col items-center gap-1 text-slate-400 active:text-indigo-600",children:[a.jsx(Xi,{size:24}),a.jsx("span",{className:"text-[10px] font-medium",children:"Save"})]})]})]})})},Dk={nda:{title:"Create Non-Disclosure Agreement (NDA) - Free",description:"Generate a professional Non-Disclosure Agreement instantly. Protect your confidential information without signup."},proposal:{title:"Create Business Proposal - Free Template",description:"Build a winning business proposal with our free generator. Add objectives, timeline, and pricing."},"consulting-agreement":{title:"Create Consulting Services Agreement - Free",description:"Draft a watertight consulting agreement. Define scope, payment terms, and deliverabes."},default:{title:"Create Document - DocForge",description:"Free online document generator for freelancers and agencies."}},Rk={nda:{metadata:{title:"Non-Disclosure Agreement",version:"1.0",theme:"default"},blocks:[{id:"h1_nda",type:"HEADING",data:{level:1,text:"Non-Disclosure Agreement",align:"center"}},{id:"p1_nda",type:"TEXT",data:{text:'This Non-Disclosure Agreement (the "Agreement") is entered into as of {{date}} by and between {{discloser_name}} ("Discloser") and {{recipient_name}} ("Recipient").'}},{id:"h2_conf",type:"HEADING",data:{level:2,text:"1. Confidential Information"}},{id:"p2_conf",type:"TEXT",data:{text:'For purposes of this Agreement, "Confidential Information" shall mean any and all non-public information, including but not limited to technical data, trade secrets, know-how, software, and business plans.'}},{id:"h2_obl",type:"HEADING",data:{level:2,text:"2. Obligations"}},{id:"p3_obl",type:"TEXT",data:{text:"Recipient agrees to hold and maintain Confidential Information in strictest confidence and not to disclose it to any third party without Discloser's prior written consent."}},{id:"sig_area",type:"TEXT",data:{text:`

Signed by: __________________________
Date: {{date}}`}}],variables:{date:{value:new Date().toLocaleDateString(),type:"date",label:"Agreement Date"},discloser_name:{value:"",type:"text",label:"Discloser Name"},recipient_name:{value:"",type:"text",label:"Recipient Name"}}},proposal:{metadata:{title:"Business Proposal",version:"1.0",theme:"modern"},blocks:[{id:"h1_prop",type:"HEADING",data:{level:1,text:"Project Proposal",align:"left"}},{id:"p_intro",type:"TEXT",data:{text:`Prepared for: {{client_name}}
Prepared by: {{my_company}}`}},{id:"h2_exec",type:"HEADING",data:{level:2,text:"Executive Summary"}},{id:"p_exec",type:"TEXT",data:{text:"We are pleased to present this proposal to {{client_name}}. Our goal is to provide a comprehensive solution that meets your needs for {{project_scope}}."}},{id:"h2_sol",type:"HEADING",data:{level:2,text:"Proposed Solution"}},{id:"p_sol",type:"TEXT",data:{text:`Our team will deliver the following key components:
1. Analysis and Design
2. Implementation Phase
3. Testing and Deployment`}},{id:"h2_cost",type:"HEADING",data:{level:2,text:"Investment"}},{id:"p_cost",type:"TEXT",data:{text:"The total estimated investment for this project is {{total_cost}}. This covers all phases outlined above."}}],variables:{client_name:{value:"",type:"text",label:"Client Name"},my_company:{value:"",type:"text",label:"My Company"},project_scope:{value:"Web Development",type:"text",label:"Project Scope"},total_cost:{value:"$5,000",type:"text",label:"Total Cost"}}},"consulting-agreement":{metadata:{title:"Consulting Agreement",version:"1.0",theme:"formal"},blocks:[{id:"h1_srv",type:"HEADING",data:{level:1,text:"Consulting Agreement",align:"center"}},{id:"p_parties",type:"TEXT",data:{text:'This Consulting Agreement is made effectively as of {{start_date}} by and between {{provider_name}} ("Provider") and {{client_name}} ("Client").'}},{id:"h2_scope",type:"HEADING",data:{level:2,text:"Scope of Services"}},{id:"p_scope",type:"TEXT",data:{text:"Provider agrees to provide the following services: {{service_description}}. Provider shall perform these services in a professional manner."}},{id:"h2_pay",type:"HEADING",data:{level:2,text:"Payment Terms"}},{id:"p_pay",type:"TEXT",data:{text:"Client agrees to pay Provider at the rate of {{rate}} per hour. Payment shall be due within 30 days of invoice receipt."}},{id:"h2_term",type:"HEADING",data:{level:2,text:"Term and Termination"}},{id:"p_term",type:"TEXT",data:{text:"This Agreement shall commence on {{start_date}} and continue until terminated by either party with 14 days written notice."}}],variables:{start_date:{value:new Date().toLocaleDateString(),type:"date",label:"Start Date"},provider_name:{value:"",type:"text",label:"Provider Name"},client_name:{value:"",type:"text",label:"Client Name"},service_description:{value:"",type:"text",label:"Description of Services"},rate:{value:"$100",type:"text",label:"Hourly Rate"}}}},xne=()=>{const{template:n}=Wo(),e=ts(),{documentState:t,actions:s}=gP(),i=Dk[n]||Dk.default,[r,o]=_.useState(!1),[c,u]=_.useState(!1),[h,f]=_.useState(null),[g,x]=_.useState("");_.useEffect(()=>{if(n==="nda")return;const A=n&&Rk[n]?n:"nda",R=Rk[A];R&&s.loadDocument({metadata:{...R.metadata,title:R.metadata.title},blocks:R.blocks.map(M=>({...M,id:mP()})),variables:R.variables,history:{past:[],future:[]}})},[n]);const y=Id(Ha(Lc,{activationConstraint:{distance:8}})),N=()=>{const A={blocks:t.blocks,variables:t.variables,metadata:t.metadata},R={name:t.metadata.title,type_slug:n||"nda",content:JSON.stringify(A),status:"draft"};f(R),o(!0)},j=A=>{A.suggestedBusinessName&&(x(A.suggestedBusinessName),delete A.suggestedBusinessName),f(A),o(!0)},E=async A=>{o(!1),u(!0);const R=Te.loading("Saving document and creating account...");try{if(!h)throw new Error("No document data to save.");const L=(await wt.post("/documents",h)).data.data;Te.dismiss(R),Te.success("Document saved! Redirecting to your dashboard..."),e(`/documents/${L.type?.slug||"general"}/${L.id}`)}catch(M){console.error("Save failed",M),Te.dismiss(R);const L=M.response?.data?.message||"Failed to save document.";Te.error(L)}finally{u(!1),f(null)}};return n==="nda"?a.jsxs(a.Fragment,{children:[a.jsx(Dc,{title:i.title,description:i.description}),a.jsx(hne,{onSaveRequest:j}),a.jsx(Kb,{isOpen:r,onClose:()=>o(!1),onSignupSuccess:E,suggestedBusinessName:g})]}):n==="proposal"?a.jsxs(a.Fragment,{children:[a.jsx(Dc,{title:i.title,description:i.description}),a.jsx(gne,{onSaveRequest:j}),a.jsx(Kb,{isOpen:r,onClose:()=>o(!1),onSignupSuccess:E,suggestedBusinessName:g})]}):n==="consulting-agreement"?a.jsxs(a.Fragment,{children:[a.jsx(Dc,{title:i.title,description:i.description}),a.jsx(pne,{onSaveRequest:j}),a.jsx(Kb,{isOpen:r,onClose:()=>o(!1),onSignupSuccess:E,suggestedBusinessName:g})]}):a.jsxs(Bd,{sensors:y,collisionDetection:EN,children:[a.jsx(Dc,{title:i.title,description:i.description}),a.jsxs("div",{className:"flex flex-col h-screen bg-slate-50 overflow-hidden",children:[a.jsxs("header",{className:"h-16 bg-white border-b border-slate-200 px-6 flex items-center justify-between z-30 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>e("/create-document"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-500",children:a.jsx(Ia,{size:20})}),a.jsxs("h1",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[t.metadata.title,a.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 text-xs rounded-full uppercase tracking-wide",children:"Guest Mode"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"text-xs text-slate-400 font-medium hidden sm:block",children:"Changes saved locally until you export."}),a.jsxs("button",{onClick:N,disabled:c,className:"flex items-center gap-2 px-6 py-2 bg-indigo-600 text-white font-bold rounded-full hover:bg-indigo-700 shadow-lg shadow-indigo-200 hover:-translate-y-0.5 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[c?a.jsx(Sn,{className:"animate-spin",size:18}):a.jsx(Xi,{size:18}),c?"Saving...":"Save & Create Account"]})]})]}),a.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[a.jsxs("div",{className:"w-[300px] bg-white border-r border-slate-200 flex flex-col z-20",children:[a.jsx(xP,{}),a.jsx("div",{className:"h-px bg-slate-200 my-2"}),a.jsx(yP,{variables:t.variables,onAdd:s.addVariable})]}),a.jsx("div",{className:"flex-1 bg-slate-100 overflow-y-auto p-8 flex justify-center",children:a.jsx(pP,{blocks:t.blocks,actions:s,readOnly:!1,businessData:{},selectedBlockId:t.selectedBlockId,onSelectBlock:s.selectBlock})}),a.jsx("div",{className:"w-[280px] bg-white border-l border-slate-200 z-20",children:a.jsx(bP,{selectedBlock:t.blocks.find(A=>A.id===t.selectedBlockId),updateBlock:s.updateBlock,removeBlock:s.removeBlock})})]}),a.jsx(Kb,{isOpen:r,onClose:()=>o(!1),onSignupSuccess:E,suggestedBusinessName:g})]})]})},bne=({children:n})=>{const{user:e,loading:t}=Dr();return t?a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):e?a.jsx(Vp,{to:"/dashboard",replace:!0}):n||a.jsx(V0,{})},yne=()=>{const{pathname:n}=kr();return _.useEffect(()=>{window.scrollTo(0,0)},[n]),null};function vne(){return a.jsx(AF,{children:a.jsx(iD,{children:a.jsxs(o6,{children:[a.jsx(yne,{}),a.jsx(HV,{position:"top-right",toastOptions:{duration:4e3,className:"text-sm font-medium text-slate-800",style:{background:"#ffffff",color:"#1e293b",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.08)",border:"1px solid #e2e8f0",padding:"12px 16px",borderRadius:"8px"},success:{iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}}),a.jsxs(LO,{children:[a.jsxs(Mt,{element:a.jsx(Z7,{}),children:[a.jsx(Mt,{path:"/",element:a.jsx($7,{})}),a.jsx(Mt,{path:"/features",element:a.jsx(Jte,{})}),a.jsx(Mt,{path:"/pricing",element:a.jsx(qte,{})}),a.jsx(Mt,{path:"/about",element:a.jsx($te,{})}),a.jsx(Mt,{path:"/privacy",element:a.jsx(ene,{})}),a.jsx(Mt,{path:"/terms",element:a.jsx(tne,{})}),a.jsx(Mt,{path:"/contact",element:a.jsx(nne,{})}),a.jsx(Mt,{path:"/careers",element:a.jsx(sne,{})}),a.jsx(Mt,{path:"/changelog",element:a.jsx(ine,{})}),a.jsx(Mt,{path:"/blog",element:a.jsx(one,{})}),a.jsx(Mt,{path:"/blog/:slug",element:a.jsx(lne,{})}),a.jsx(Mt,{path:"/accept-invite",element:a.jsx(eW,{})}),a.jsx(Mt,{path:"/verify-email",element:a.jsx(nW,{})}),a.jsx(Mt,{path:"/verify-email-message",element:a.jsx(tW,{})})]}),a.jsx(Mt,{element:a.jsx(wm,{redirectPath:"/login"}),children:a.jsx(Mt,{path:"/onboarding",element:a.jsx(KV,{})})}),a.jsx(Mt,{path:"/view/:token",element:a.jsx(cne,{})}),a.jsx(Mt,{path:"/sign/:token",element:a.jsx(une,{})}),a.jsx(Mt,{path:"/create-document/:template",element:a.jsx(xne,{})}),a.jsxs(Mt,{element:a.jsx(bne,{}),children:[a.jsx(Mt,{path:"/login",element:a.jsx(VV,{})}),a.jsx(Mt,{path:"/register",element:a.jsx(GV,{})}),a.jsx(Mt,{path:"/forgot-password",element:a.jsx(sW,{})}),a.jsx(Mt,{path:"/password-reset/:token",element:a.jsx(iW,{})}),a.jsx(Mt,{path:"/auth/callback",element:a.jsx(aW,{})})]}),a.jsx(Mt,{element:a.jsx(wm,{}),children:a.jsxs(Mt,{element:a.jsx(tZ,{}),children:[a.jsx(Mt,{path:"/dashboard",element:a.jsx(ZK,{})}),a.jsxs(Mt,{element:a.jsx(wm,{permission:"document.view"}),children:[a.jsx(Mt,{path:"/drive",element:a.jsx(Zte,{})}),a.jsx(Mt,{path:"/drive/trash",element:a.jsx(Qte,{})}),a.jsx(Mt,{path:"/documents",element:a.jsx(Vq,{})}),a.jsx(Mt,{path:"/documents/nda",element:a.jsx(RT,{})}),a.jsx(Mt,{path:"/documents/nda/:id",element:a.jsx(RT,{})}),a.jsx(Mt,{path:"/documents/proposal",element:a.jsx(MT,{})}),a.jsx(Mt,{path:"/documents/proposal/:id",element:a.jsx(MT,{})}),a.jsx(Mt,{path:"/documents/invoice",element:a.jsx(PT,{})}),a.jsx(Mt,{path:"/documents/invoice/:id",element:a.jsx(PT,{})}),a.jsx(Mt,{path:"/documents/offer-letter",element:a.jsx(FT,{})}),a.jsx(Mt,{path:"/documents/offer-letter/:id",element:a.jsx(FT,{})}),a.jsx(Mt,{path:"/documents/consulting-agreement",element:a.jsx(zT,{})}),a.jsx(Mt,{path:"/documents/consulting-agreement/:id",element:a.jsx(zT,{})}),a.jsx(Mt,{path:"/documents/general/:id",element:a.jsx(R0,{})})]}),a.jsx(Mt,{element:a.jsx(wm,{permission:"team.view"}),children:a.jsx(Mt,{path:"/team",element:a.jsx($q,{})})}),a.jsxs(Mt,{element:a.jsx(wm,{permission:"settings.signature"}),children:[a.jsx(Mt,{path:"/signatures",element:a.jsx(Lte,{})}),a.jsx(Mt,{path:"/signatures/list",element:a.jsx(Ite,{})}),a.jsx(Mt,{path:"/signatures/:documentId/view-signed",element:a.jsx(Ute,{})})]}),a.jsx(Mt,{path:"/document-engine/test",element:a.jsx(R0,{})}),a.jsx(Mt,{element:a.jsx(wm,{permission:"settings.manage"}),children:a.jsx(Mt,{path:"/settings",element:a.jsx(Qq,{})})})]})})]})]})})})}F4.createRoot(document.getElementById("root")).render(a.jsx(_.StrictMode,{children:a.jsx(vne,{})}));
