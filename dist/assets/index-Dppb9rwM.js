var rC=n=>{throw TypeError(n)};var l1=(n,e,t)=>e.has(n)||rC("Cannot "+t);var Ns=(n,e,t)=>(l1(n,e,"read from private field"),t?t.call(n):e.get(n)),rc=(n,e,t)=>e.has(n)?rC("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),lr=(n,e,t,s)=>(l1(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),oc=(n,e,t)=>(l1(n,e,"access private method"),t);var oC=(n,e,t,s)=>({set _(i){lr(n,e,i,t)},get _(){return Ns(n,e,s)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function km(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var c1={exports:{}},qg={};var lC;function DO(){if(lC)return qg;lC=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:n,type:s,key:o,ref:i!==void 0?i:null,props:a}}return qg.Fragment=e,qg.jsx=t,qg.jsxs=t,qg}var cC;function MO(){return cC||(cC=1,c1.exports=DO()),c1.exports}var r=MO(),d1={exports:{}},It={};var dC;function PO(){if(dC)return It;dC=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),x=Symbol.iterator;function w(G){return G===null||typeof G!="object"?null:(G=x&&G[x]||G["@@iterator"],typeof G=="function"?G:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,E={};function T(G,ue,Se){this.props=G,this.context=ue,this.refs=E,this.updater=Se||A}T.prototype.isReactComponent={},T.prototype.setState=function(G,ue){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,ue,"setState")},T.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function D(){}D.prototype=T.prototype;function M(G,ue,Se){this.props=G,this.context=ue,this.refs=E,this.updater=Se||A}var L=M.prototype=new D;L.constructor=M,C(L,T.prototype),L.isPureReactComponent=!0;var I=Array.isArray;function W(){}var V={H:null,A:null,T:null,S:null},Y=Object.prototype.hasOwnProperty;function K(G,ue,Se){var fe=Se.ref;return{$$typeof:n,type:G,key:ue,ref:fe!==void 0?fe:null,props:Se}}function q(G,ue){return K(G.type,ue,G.props)}function ne(G){return typeof G=="object"&&G!==null&&G.$$typeof===n}function le(G){var ue={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(Se){return ue[Se]})}var _e=/\/+/g;function xe(G,ue){return typeof G=="object"&&G!==null&&G.key!=null?le(""+G.key):ue.toString(36)}function je(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(W,W):(G.status="pending",G.then(function(ue){G.status==="pending"&&(G.status="fulfilled",G.value=ue)},function(ue){G.status==="pending"&&(G.status="rejected",G.reason=ue)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function U(G,ue,Se,fe,Ae){var Pe=typeof G;(Pe==="undefined"||Pe==="boolean")&&(G=null);var Ve=!1;if(G===null)Ve=!0;else switch(Pe){case"bigint":case"string":case"number":Ve=!0;break;case"object":switch(G.$$typeof){case n:case e:Ve=!0;break;case f:return Ve=G._init,U(Ve(G._payload),ue,Se,fe,Ae)}}if(Ve)return Ae=Ae(G),Ve=fe===""?"."+xe(G,0):fe,I(Ae)?(Se="",Ve!=null&&(Se=Ve.replace(_e,"$&/")+"/"),U(Ae,ue,Se,"",function(mt){return mt})):Ae!=null&&(ne(Ae)&&(Ae=q(Ae,Se+(Ae.key==null||G&&G.key===Ae.key?"":(""+Ae.key).replace(_e,"$&/")+"/")+Ve)),ue.push(Ae)),1;Ve=0;var Nt=fe===""?".":fe+":";if(I(G))for(var ht=0;ht<G.length;ht++)fe=G[ht],Pe=Nt+xe(fe,ht),Ve+=U(fe,ue,Se,Pe,Ae);else if(ht=w(G),typeof ht=="function")for(G=ht.call(G),ht=0;!(fe=G.next()).done;)fe=fe.value,Pe=Nt+xe(fe,ht++),Ve+=U(fe,ue,Se,Pe,Ae);else if(Pe==="object"){if(typeof G.then=="function")return U(je(G),ue,Se,fe,Ae);throw ue=String(G),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return Ve}function H(G,ue,Se){if(G==null)return G;var fe=[],Ae=0;return U(G,fe,"","",function(Pe){return ue.call(Se,Pe,Ae++)}),fe}function ee(G){if(G._status===-1){var ue=G._result;ue=ue(),ue.then(function(Se){(G._status===0||G._status===-1)&&(G._status=1,G._result=Se)},function(Se){(G._status===0||G._status===-1)&&(G._status=2,G._result=Se)}),G._status===-1&&(G._status=0,G._result=ue)}if(G._status===1)return G._result.default;throw G._result}var he=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},ce={map:H,forEach:function(G,ue,Se){H(G,function(){ue.apply(this,arguments)},Se)},count:function(G){var ue=0;return H(G,function(){ue++}),ue},toArray:function(G){return H(G,function(ue){return ue})||[]},only:function(G){if(!ne(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return It.Activity=g,It.Children=ce,It.Component=T,It.Fragment=t,It.Profiler=i,It.PureComponent=M,It.StrictMode=s,It.Suspense=u,It.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,It.__COMPILER_RUNTIME={__proto__:null,c:function(G){return V.H.useMemoCache(G)}},It.cache=function(G){return function(){return G.apply(null,arguments)}},It.cacheSignal=function(){return null},It.cloneElement=function(G,ue,Se){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var fe=C({},G.props),Ae=G.key;if(ue!=null)for(Pe in ue.key!==void 0&&(Ae=""+ue.key),ue)!Y.call(ue,Pe)||Pe==="key"||Pe==="__self"||Pe==="__source"||Pe==="ref"&&ue.ref===void 0||(fe[Pe]=ue[Pe]);var Pe=arguments.length-2;if(Pe===1)fe.children=Se;else if(1<Pe){for(var Ve=Array(Pe),Nt=0;Nt<Pe;Nt++)Ve[Nt]=arguments[Nt+2];fe.children=Ve}return K(G.type,Ae,fe)},It.createContext=function(G){return G={$$typeof:o,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:a,_context:G},G},It.createElement=function(G,ue,Se){var fe,Ae={},Pe=null;if(ue!=null)for(fe in ue.key!==void 0&&(Pe=""+ue.key),ue)Y.call(ue,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(Ae[fe]=ue[fe]);var Ve=arguments.length-2;if(Ve===1)Ae.children=Se;else if(1<Ve){for(var Nt=Array(Ve),ht=0;ht<Ve;ht++)Nt[ht]=arguments[ht+2];Ae.children=Nt}if(G&&G.defaultProps)for(fe in Ve=G.defaultProps,Ve)Ae[fe]===void 0&&(Ae[fe]=Ve[fe]);return K(G,Pe,Ae)},It.createRef=function(){return{current:null}},It.forwardRef=function(G){return{$$typeof:c,render:G}},It.isValidElement=ne,It.lazy=function(G){return{$$typeof:f,_payload:{_status:-1,_result:G},_init:ee}},It.memo=function(G,ue){return{$$typeof:h,type:G,compare:ue===void 0?null:ue}},It.startTransition=function(G){var ue=V.T,Se={};V.T=Se;try{var fe=G(),Ae=V.S;Ae!==null&&Ae(Se,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(W,he)}catch(Pe){he(Pe)}finally{ue!==null&&Se.types!==null&&(ue.types=Se.types),V.T=ue}},It.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},It.use=function(G){return V.H.use(G)},It.useActionState=function(G,ue,Se){return V.H.useActionState(G,ue,Se)},It.useCallback=function(G,ue){return V.H.useCallback(G,ue)},It.useContext=function(G){return V.H.useContext(G)},It.useDebugValue=function(){},It.useDeferredValue=function(G,ue){return V.H.useDeferredValue(G,ue)},It.useEffect=function(G,ue){return V.H.useEffect(G,ue)},It.useEffectEvent=function(G){return V.H.useEffectEvent(G)},It.useId=function(){return V.H.useId()},It.useImperativeHandle=function(G,ue,Se){return V.H.useImperativeHandle(G,ue,Se)},It.useInsertionEffect=function(G,ue){return V.H.useInsertionEffect(G,ue)},It.useLayoutEffect=function(G,ue){return V.H.useLayoutEffect(G,ue)},It.useMemo=function(G,ue){return V.H.useMemo(G,ue)},It.useOptimistic=function(G,ue){return V.H.useOptimistic(G,ue)},It.useReducer=function(G,ue,Se){return V.H.useReducer(G,ue,Se)},It.useRef=function(G){return V.H.useRef(G)},It.useState=function(G){return V.H.useState(G)},It.useSyncExternalStore=function(G,ue,Se){return V.H.useSyncExternalStore(G,ue,Se)},It.useTransition=function(){return V.H.useTransition()},It.version="19.2.3",It}var uC;function g0(){return uC||(uC=1,d1.exports=PO()),d1.exports}var R=g0();const gt=km(R);var u1={exports:{}},$g={},h1={exports:{}},f1={};var hC;function OO(){return hC||(hC=1,(function(n){function e(U,H){var ee=U.length;U.push(H);e:for(;0<ee;){var he=ee-1>>>1,ce=U[he];if(0<i(ce,H))U[he]=H,U[ee]=ce,ee=he;else break e}}function t(U){return U.length===0?null:U[0]}function s(U){if(U.length===0)return null;var H=U[0],ee=U.pop();if(ee!==H){U[0]=ee;e:for(var he=0,ce=U.length,G=ce>>>1;he<G;){var ue=2*(he+1)-1,Se=U[ue],fe=ue+1,Ae=U[fe];if(0>i(Se,ee))fe<ce&&0>i(Ae,Se)?(U[he]=Ae,U[fe]=ee,he=fe):(U[he]=Se,U[ue]=ee,he=ue);else if(fe<ce&&0>i(Ae,ee))U[he]=Ae,U[fe]=ee,he=fe;else break e}}return H}function i(U,H){var ee=U.sortIndex-H.sortIndex;return ee!==0?ee:U.id-H.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var u=[],h=[],f=1,g=null,x=3,w=!1,A=!1,C=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function L(U){for(var H=t(h);H!==null;){if(H.callback===null)s(h);else if(H.startTime<=U)s(h),H.sortIndex=H.expirationTime,e(u,H);else break;H=t(h)}}function I(U){if(C=!1,L(U),!A)if(t(u)!==null)A=!0,W||(W=!0,le());else{var H=t(h);H!==null&&je(I,H.startTime-U)}}var W=!1,V=-1,Y=5,K=-1;function q(){return E?!0:!(n.unstable_now()-K<Y)}function ne(){if(E=!1,W){var U=n.unstable_now();K=U;var H=!0;try{e:{A=!1,C&&(C=!1,D(V),V=-1),w=!0;var ee=x;try{t:{for(L(U),g=t(u);g!==null&&!(g.expirationTime>U&&q());){var he=g.callback;if(typeof he=="function"){g.callback=null,x=g.priorityLevel;var ce=he(g.expirationTime<=U);if(U=n.unstable_now(),typeof ce=="function"){g.callback=ce,L(U),H=!0;break t}g===t(u)&&s(u),L(U)}else s(u);g=t(u)}if(g!==null)H=!0;else{var G=t(h);G!==null&&je(I,G.startTime-U),H=!1}}break e}finally{g=null,x=ee,w=!1}H=void 0}}finally{H?le():W=!1}}}var le;if(typeof M=="function")le=function(){M(ne)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,xe=_e.port2;_e.port1.onmessage=ne,le=function(){xe.postMessage(null)}}else le=function(){T(ne,0)};function je(U,H){V=T(function(){U(n.unstable_now())},H)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(U){switch(x){case 1:case 2:case 3:var H=3;break;default:H=x}var ee=x;x=H;try{return U()}finally{x=ee}},n.unstable_requestPaint=function(){E=!0},n.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ee=x;x=U;try{return H()}finally{x=ee}},n.unstable_scheduleCallback=function(U,H,ee){var he=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?he+ee:he):ee=he,U){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=ee+ce,U={id:f++,callback:H,priorityLevel:U,startTime:ee,expirationTime:ce,sortIndex:-1},ee>he?(U.sortIndex=ee,e(h,U),t(u)===null&&U===t(h)&&(C?(D(V),V=-1):C=!0,je(I,ee-he))):(U.sortIndex=ce,e(u,U),A||w||(A=!0,W||(W=!0,le()))),U},n.unstable_shouldYield=q,n.unstable_wrapCallback=function(U){var H=x;return function(){var ee=x;x=H;try{return U.apply(this,arguments)}finally{x=ee}}}})(f1)),f1}var fC;function LO(){return fC||(fC=1,h1.exports=OO()),h1.exports}var m1={exports:{}},wa={};var mC;function FO(){if(mC)return wa;mC=1;var n=g0();function e(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)h+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,h,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:u,containerInfo:h,implementation:f}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return wa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,wa.createPortal=function(u,h){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(u,h,null,f)},wa.flushSync=function(u){var h=o.T,f=s.p;try{if(o.T=null,s.p=2,u)return u()}finally{o.T=h,s.p=f,s.d.f()}},wa.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(u,h))},wa.prefetchDNS=function(u){typeof u=="string"&&s.d.D(u)},wa.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var f=h.as,g=c(f,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;f==="style"?s.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:x,fetchPriority:w}):f==="script"&&s.d.X(u,{crossOrigin:g,integrity:x,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},wa.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var f=c(h.as,h.crossOrigin);s.d.M(u,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(u)},wa.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var f=h.as,g=c(f,h.crossOrigin);s.d.L(u,f,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},wa.preloadModule=function(u,h){if(typeof u=="string")if(h){var f=c(h.as,h.crossOrigin);s.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(u)},wa.requestFormReset=function(u){s.d.r(u)},wa.unstable_batchedUpdates=function(u,h){return u(h)},wa.useFormState=function(u,h,f){return o.H.useFormState(u,h,f)},wa.useFormStatus=function(){return o.H.useHostTransitionStatus()},wa.version="19.2.3",wa}var gC;function Ay(){if(gC)return m1.exports;gC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),m1.exports=FO(),m1.exports}var pC;function zO(){if(pC)return $g;pC=1;var n=LO(),e=g0(),t=Ay();function s(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var d=l,m=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(m=d.return),l=d.return;while(l)}return d.tag===3?m:null}function o(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function c(l){if(l.tag===31){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function u(l){if(a(l)!==l)throw Error(s(188))}function h(l){var d=l.alternate;if(!d){if(d=a(l),d===null)throw Error(s(188));return d!==l?null:l}for(var m=l,p=d;;){var N=m.return;if(N===null)break;var _=N.alternate;if(_===null){if(p=N.return,p!==null){m=p;continue}break}if(N.child===_.child){for(_=N.child;_;){if(_===m)return u(N),l;if(_===p)return u(N),d;_=_.sibling}throw Error(s(188))}if(m.return!==p.return)m=N,p=_;else{for(var z=!1,Z=N.child;Z;){if(Z===m){z=!0,m=N,p=_;break}if(Z===p){z=!0,p=N,m=_;break}Z=Z.sibling}if(!z){for(Z=_.child;Z;){if(Z===m){z=!0,m=_,p=N;break}if(Z===p){z=!0,p=_,m=N;break}Z=Z.sibling}if(!z)throw Error(s(189))}}if(m.alternate!==p)throw Error(s(190))}if(m.tag!==3)throw Error(s(188));return m.stateNode.current===m?l:d}function f(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=f(l),d!==null)return d;l=l.sibling}return null}var g=Object.assign,x=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),M=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),ne=Symbol.iterator;function le(l){return l===null||typeof l!="object"?null:(l=ne&&l[ne]||l["@@iterator"],typeof l=="function"?l:null)}var _e=Symbol.for("react.client.reference");function xe(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===_e?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case C:return"Fragment";case T:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case W:return"SuspenseList";case K:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case A:return"Portal";case M:return l.displayName||"Context";case D:return(l._context.displayName||"Context")+".Consumer";case L:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case V:return d=l.displayName||null,d!==null?d:xe(l.type)||"Memo";case Y:d=l._payload,l=l._init;try{return xe(l(d))}catch{}}return null}var je=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},he=[],ce=-1;function G(l){return{current:l}}function ue(l){0>ce||(l.current=he[ce],he[ce]=null,ce--)}function Se(l,d){ce++,he[ce]=l.current,l.current=d}var fe=G(null),Ae=G(null),Pe=G(null),Ve=G(null);function Nt(l,d){switch(Se(Pe,d),Se(Ae,l),Se(fe,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?jA(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=jA(d),l=kA(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ue(fe),Se(fe,l)}function ht(){ue(fe),ue(Ae),ue(Pe)}function mt(l){l.memoizedState!==null&&Se(Ve,l);var d=fe.current,m=kA(d,l.type);d!==m&&(Se(Ae,l),Se(fe,m))}function Qe(l){Ae.current===l&&(ue(fe),ue(Ae)),Ve.current===l&&(ue(Ve),Kg._currentValue=ee)}var Kt,Ke;function at(l){if(Kt===void 0)try{throw Error()}catch(m){var d=m.stack.trim().match(/\n( *(at )?)/);Kt=d&&d[1]||"",Ke=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Kt+l+Ke}var ft=!1;function Gt(l,d){if(!l||ft)return"";ft=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(d){var Le=function(){throw Error()};if(Object.defineProperty(Le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Le,[])}catch(Ee){var ye=Ee}Reflect.construct(l,[],Le)}else{try{Le.call()}catch(Ee){ye=Ee}l.call(Le.prototype)}}else{try{throw Error()}catch(Ee){ye=Ee}(Le=l())&&typeof Le.catch=="function"&&Le.catch(function(){})}}catch(Ee){if(Ee&&ye&&typeof Ee.stack=="string")return[Ee.stack,ye.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=p.DetermineComponentFrameRoot(),z=_[0],Z=_[1];if(z&&Z){var se=z.split(`
`),pe=Z.split(`
`);for(N=p=0;p<se.length&&!se[p].includes("DetermineComponentFrameRoot");)p++;for(;N<pe.length&&!pe[N].includes("DetermineComponentFrameRoot");)N++;if(p===se.length||N===pe.length)for(p=se.length-1,N=pe.length-1;1<=p&&0<=N&&se[p]!==pe[N];)N--;for(;1<=p&&0<=N;p--,N--)if(se[p]!==pe[N]){if(p!==1||N!==1)do if(p--,N--,0>N||se[p]!==pe[N]){var Re=`
`+se[p].replace(" at new "," at ");return l.displayName&&Re.includes("<anonymous>")&&(Re=Re.replace("<anonymous>",l.displayName)),Re}while(1<=p&&0<=N);break}}}finally{ft=!1,Error.prepareStackTrace=m}return(m=l?l.displayName||l.name:"")?at(m):""}function He(l,d){switch(l.tag){case 26:case 27:case 5:return at(l.type);case 16:return at("Lazy");case 13:return l.child!==d&&d!==null?at("Suspense Fallback"):at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return Gt(l.type,!1);case 11:return Gt(l.type.render,!1);case 1:return Gt(l.type,!0);case 31:return at("Activity");default:return""}}function Je(l){try{var d="",m=null;do d+=He(l,m),m=l,l=l.return;while(l);return d}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var Ie=Object.prototype.hasOwnProperty,tt=n.unstable_scheduleCallback,De=n.unstable_cancelCallback,Fe=n.unstable_shouldYield,$e=n.unstable_requestPaint,nt=n.unstable_now,qe=n.unstable_getCurrentPriorityLevel,St=n.unstable_ImmediatePriority,un=n.unstable_UserBlockingPriority,an=n.unstable_NormalPriority,Lt=n.unstable_LowPriority,ts=n.unstable_IdlePriority,ns=n.log,vi=n.unstable_setDisableYieldValue,Ps=null,yn=null;function ss(l){if(typeof ns=="function"&&vi(l),yn&&typeof yn.setStrictMode=="function")try{yn.setStrictMode(Ps,l)}catch{}}var Fn=Math.clz32?Math.clz32:hn,da=Math.log,ua=Math.LN2;function hn(l){return l>>>=0,l===0?32:31-(da(l)/ua|0)|0}var vn=256,ie=262144,ke=4194304;function Ge(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Ze(l,d,m){var p=l.pendingLanes;if(p===0)return 0;var N=0,_=l.suspendedLanes,z=l.pingedLanes;l=l.warmLanes;var Z=p&134217727;return Z!==0?(p=Z&~_,p!==0?N=Ge(p):(z&=Z,z!==0?N=Ge(z):m||(m=Z&~l,m!==0&&(N=Ge(m))))):(Z=p&~_,Z!==0?N=Ge(Z):z!==0?N=Ge(z):m||(m=p&~l,m!==0&&(N=Ge(m)))),N===0?0:d!==0&&d!==N&&(d&_)===0&&(_=N&-N,m=d&-d,_>=m||_===32&&(m&4194048)!==0)?d:N}function pt(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function st(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ut(){var l=ke;return ke<<=1,(ke&62914560)===0&&(ke=4194304),l}function rn(l){for(var d=[],m=0;31>m;m++)d.push(l);return d}function dt(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function ps(l,d,m,p,N,_){var z=l.pendingLanes;l.pendingLanes=m,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=m,l.entangledLanes&=m,l.errorRecoveryDisabledLanes&=m,l.shellSuspendCounter=0;var Z=l.entanglements,se=l.expirationTimes,pe=l.hiddenUpdates;for(m=z&~m;0<m;){var Re=31-Fn(m),Le=1<<Re;Z[Re]=0,se[Re]=-1;var ye=pe[Re];if(ye!==null)for(pe[Re]=null,Re=0;Re<ye.length;Re++){var Ee=ye[Re];Ee!==null&&(Ee.lane&=-536870913)}m&=~Le}p!==0&&wi(l,p,0),_!==0&&N===0&&l.tag!==0&&(l.suspendedLanes|=_&~(z&~d))}function wi(l,d,m){l.pendingLanes|=d,l.suspendedLanes&=~d;var p=31-Fn(d);l.entangledLanes|=d,l.entanglements[p]=l.entanglements[p]|1073741824|m&261930}function Vs(l,d){var m=l.entangledLanes|=d;for(l=l.entanglements;m;){var p=31-Fn(m),N=1<<p;N&d|l[p]&d&&(l[p]|=d),m&=~N}}function wn(l,d){var m=d&-d;return m=(m&42)!==0?1:xs(m),(m&(l.suspendedLanes|d))!==0?0:m}function xs(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function fn(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Bi(){var l=H.p;return l!==0?l:(l=window.event,l===void 0?32:$A(l.type))}function bs(l,d){var m=H.p;try{return H.p=l,d()}finally{H.p=m}}var $t=Math.random().toString(36).slice(2),Os="__reactFiber$"+$t,Si="__reactProps$"+$t,io="__reactContainer$"+$t,Nd="__reactEvents$"+$t,Ac="__reactListeners$"+$t,gf="__reactHandles$"+$t,gn="__reactResources$"+$t,bn="__reactMarker$"+$t;function Po(l){delete l[Os],delete l[Si],delete l[Nd],delete l[Ac],delete l[gf]}function Ls(l){var d=l[Os];if(d)return d;for(var m=l.parentNode;m;){if(d=m[io]||m[Os]){if(m=d.alternate,d.child!==null||m!==null&&m.child!==null)for(l=FA(l);l!==null;){if(m=l[Os])return m;l=FA(l)}return d}l=m,m=l.parentNode}return null}function Tl(l){if(l=l[Os]||l[io]){var d=l.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return l}return null}function Oo(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(s(33))}function Lo(l){var d=l[gn];return d||(d=l[gn]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function Ts(l){l[bn]=!0}var pf=new Set,_l={};function zn(l,d){wr(l,d),wr(l+"Capture",d)}function wr(l,d){for(_l[l]=d,l=0;l<d.length;l++)pf.add(d[l])}var Ad=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Sr={},Cc={};function ig(l){return Ie.call(Cc,l)?!0:Ie.call(Sr,l)?!1:Ad.test(l)?Cc[l]=!0:(Sr[l]=!0,!1)}function Cd(l,d,m){if(ig(d))if(m===null)l.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var p=d.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+m)}}function Nr(l,d,m){if(m===null)l.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+m)}}function ha(l,d,m,p){if(p===null)l.removeAttribute(m);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(m);return}l.setAttributeNS(d,m,""+p)}}function Ni(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Ar(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Ku(l,d,m){var p=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if(!l.hasOwnProperty(d)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var N=p.get,_=p.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return N.call(this)},set:function(z){m=""+z,_.call(this,z)}}),Object.defineProperty(l,d,{enumerable:p.enumerable}),{getValue:function(){return m},setValue:function(z){m=""+z},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function Zu(l){if(!l._valueTracker){var d=Ar(l)?"checked":"value";l._valueTracker=Ku(l,d,""+l[d])}}function jl(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var m=d.getValue(),p="";return l&&(p=Ar(l)?l.checked?"true":"false":l.value),l=p,l!==m?(d.setValue(l),!0):!1}function Jn(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Fo=/[\n"\\]/g;function Ai(l){return l.replace(Fo,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function Ec(l,d,m,p,N,_,z,Z){l.name="",z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?l.type=z:l.removeAttribute("type"),d!=null?z==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+Ni(d)):l.value!==""+Ni(d)&&(l.value=""+Ni(d)):z!=="submit"&&z!=="reset"||l.removeAttribute("value"),d!=null?Tc(l,z,Ni(d)):m!=null?Tc(l,z,Ni(m)):p!=null&&l.removeAttribute("value"),N==null&&_!=null&&(l.defaultChecked=!!_),N!=null&&(l.checked=N&&typeof N!="function"&&typeof N!="symbol"),Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?l.name=""+Ni(Z):l.removeAttribute("name")}function Cr(l,d,m,p,N,_,z,Z){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(l.type=_),d!=null||m!=null){if(!(_!=="submit"&&_!=="reset"||d!=null)){Zu(l);return}m=m!=null?""+Ni(m):"",d=d!=null?""+Ni(d):m,Z||d===l.value||(l.value=d),l.defaultValue=d}p=p??N,p=typeof p!="function"&&typeof p!="symbol"&&!!p,l.checked=Z?l.checked:!!p,l.defaultChecked=!!p,z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(l.name=z),Zu(l)}function Tc(l,d,m){d==="number"&&Jn(l.ownerDocument)===l||l.defaultValue===""+m||(l.defaultValue=""+m)}function ao(l,d,m,p){if(l=l.options,d){d={};for(var N=0;N<m.length;N++)d["$"+m[N]]=!0;for(m=0;m<l.length;m++)N=d.hasOwnProperty("$"+l[m].value),l[m].selected!==N&&(l[m].selected=N),N&&p&&(l[m].defaultSelected=!0)}else{for(m=""+Ni(m),d=null,N=0;N<l.length;N++){if(l[N].value===m){l[N].selected=!0,p&&(l[N].defaultSelected=!0);return}d!==null||l[N].disabled||(d=l[N])}d!==null&&(d.selected=!0)}}function Er(l,d,m){if(d!=null&&(d=""+Ni(d),d!==l.value&&(l.value=d),m==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=m!=null?""+Ni(m):""}function Ju(l,d,m,p){if(d==null){if(p!=null){if(m!=null)throw Error(s(92));if(je(p)){if(1<p.length)throw Error(s(93));p=p[0]}m=p}m==null&&(m=""),d=m}m=Ni(d),l.defaultValue=m,p=l.textContent,p===m&&p!==""&&p!==null&&(l.value=p),Zu(l)}function kl(l,d){if(d){var m=l.firstChild;if(m&&m===l.lastChild&&m.nodeType===3){m.nodeValue=d;return}}l.textContent=d}var zo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _c(l,d,m){var p=d.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?p?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":p?l.setProperty(d,m):typeof m!="number"||m===0||zo.has(d)?d==="float"?l.cssFloat=m:l[d]=(""+m).trim():l[d]=m+"px"}function xf(l,d,m){if(d!=null&&typeof d!="object")throw Error(s(62));if(l=l.style,m!=null){for(var p in m)!m.hasOwnProperty(p)||d!=null&&d.hasOwnProperty(p)||(p.indexOf("--")===0?l.setProperty(p,""):p==="float"?l.cssFloat="":l[p]="");for(var N in d)p=d[N],d.hasOwnProperty(N)&&m[N]!==p&&_c(l,N,p)}else for(var _ in d)d.hasOwnProperty(_)&&_c(l,_,d[_])}function Qu(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ag=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ci=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function oi(l){return Ci.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function Tr(){}var Rl=null;function Dl(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Ml=null,Io=null;function Za(l){var d=Tl(l);if(d&&(l=d.stateNode)){var m=l[Si]||null;e:switch(l=d.stateNode,d.type){case"input":if(Ec(l,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),d=m.name,m.type==="radio"&&d!=null){for(m=l;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+Ai(""+d)+'"][type="radio"]'),d=0;d<m.length;d++){var p=m[d];if(p!==l&&p.form===l.form){var N=p[Si]||null;if(!N)throw Error(s(90));Ec(p,N.value,N.defaultValue,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name)}}for(d=0;d<m.length;d++)p=m[d],p.form===l.form&&jl(p)}break e;case"textarea":Er(l,m.value,m.defaultValue);break e;case"select":d=m.value,d!=null&&ao(l,!!m.multiple,d,!1)}}}var jc=!1;function Ed(l,d,m){if(jc)return l(d,m);jc=!0;try{var p=l(d);return p}finally{if(jc=!1,(Ml!==null||Io!==null)&&(yx(),Ml&&(d=Ml,l=Io,Io=Ml=null,Za(d),l)))for(d=0;d<l.length;d++)Za(l[d])}}function Bo(l,d){var m=l.stateNode;if(m===null)return null;var p=m[Si]||null;if(p===null)return null;m=p[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(l=l.type,p=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!p;break e;default:l=!1}if(l)return null;if(m&&typeof m!="function")throw Error(s(231,d,typeof m));return m}var fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sn=!1;if(fa)try{var _r={};Object.defineProperty(_r,"passive",{get:function(){Sn=!0}}),window.addEventListener("test",_r,_r),window.removeEventListener("test",_r,_r)}catch{Sn=!1}var Ra=null,Ho=null,ro=null;function Pl(){if(ro)return ro;var l,d=Ho,m=d.length,p,N="value"in Ra?Ra.value:Ra.textContent,_=N.length;for(l=0;l<m&&d[l]===N[l];l++);var z=m-l;for(p=1;p<=z&&d[m-p]===N[_-p];p++);return ro=N.slice(l,1<p?1-p:void 0)}function Uo(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function jr(){return!0}function kr(){return!1}function Ws(l){function d(m,p,N,_,z){this._reactName=m,this._targetInst=N,this.type=p,this.nativeEvent=_,this.target=z,this.currentTarget=null;for(var Z in l)l.hasOwnProperty(Z)&&(m=l[Z],this[Z]=m?m(_):_[Z]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?jr:kr,this.isPropagationStopped=kr,this}return g(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=jr)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=jr)},persist:function(){},isPersistent:jr}),d}var Ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kc=Ws(Ei),Vo=g({},Ei,{view:0,detail:0}),Ol=Ws(Vo),Wo,Td,Ll,Rc=g({},Vo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rd,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ll&&(Ll&&l.type==="mousemove"?(Wo=l.screenX-Ll.screenX,Td=l.screenY-Ll.screenY):Td=Wo=0,Ll=l),Wo)},movementY:function(l){return"movementY"in l?l.movementY:Td}}),bf=Ws(Rc),rg=g({},Rc,{dataTransfer:0}),og=Ws(rg),lg=g({},Vo,{relatedTarget:0}),Dc=Ws(lg),yf=g({},Ei,{animationName:0,elapsedTime:0,pseudoElement:0}),cg=Ws(yf),vf=g({},Ei,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),_d=Ws(vf),dg=g({},Ei,{data:0}),jd=Ws(dg),wf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kd(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=qu[l])?!!d[l]:!1}function Rd(){return kd}var zl=g({},Vo,{key:function(l){if(l.key){var d=wf[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=Uo(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Fl[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rd,charCode:function(l){return l.type==="keypress"?Uo(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Uo(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),ug=Ws(zl),hg=g({},Rc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sf=Ws(hg),Gs=g({},Vo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rd}),Il=Ws(Gs),$u=g({},Ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dd=Ws($u),Nf=g({},Rc,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Go=Ws(Nf),oo=g({},Ei,{newState:0,oldState:0}),Mc=Ws(oo),lo=[9,13,27,32],Fs=fa&&"CompositionEvent"in window,Ja=null;fa&&"documentMode"in document&&(Ja=document.documentMode);var Dn=fa&&"TextEvent"in window&&!Ja,Da=fa&&(!Fs||Ja&&8<Ja&&11>=Ja),Md=" ",Bl=!1;function eh(l,d){switch(l){case"keyup":return lo.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pd(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Yo=!1;function Od(l,d){switch(l){case"compositionend":return Pd(d);case"keypress":return d.which!==32?null:(Bl=!0,Md);case"textInput":return l=d.data,l===Md&&Bl?null:l;default:return null}}function Ld(l,d){if(Yo)return l==="compositionend"||!Fs&&eh(l,d)?(l=Pl(),ro=Ho=Ra=null,Yo=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Da&&d.locale!=="ko"?null:d.data;default:return null}}var ma={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fd(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!ma[l.type]:d==="textarea"}function Pc(l,d,m,p){Ml?Io?Io.push(p):Io=[p]:Ml=p,d=Ex(d,"onChange"),0<d.length&&(m=new kc("onChange","change",null,m,p),l.push({event:m,listeners:d}))}var Rr=null,co=null;function zd(l){NA(l,0)}function Xo(l){var d=Oo(l);if(jl(d))return l}function Oc(l,d){if(l==="change")return d}var _s=!1;if(fa){var th;if(fa){var Dr="oninput"in document;if(!Dr){var Id=document.createElement("div");Id.setAttribute("oninput","return;"),Dr=typeof Id.oninput=="function"}th=Dr}else th=!1;_s=th&&(!document.documentMode||9<document.documentMode)}function Bd(){Rr&&(Rr.detachEvent("onpropertychange",Hd),co=Rr=null)}function Hd(l){if(l.propertyName==="value"&&Xo(co)){var d=[];Pc(d,co,l,Dl(l)),Ed(zd,d)}}function Ud(l,d,m){l==="focusin"?(Bd(),Rr=d,co=m,Rr.attachEvent("onpropertychange",Hd)):l==="focusout"&&Bd()}function Lc(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Xo(co)}function uo(l,d){if(l==="click")return Xo(d)}function Af(l,d){if(l==="input"||l==="change")return Xo(d)}function Ko(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Ys=typeof Object.is=="function"?Object.is:Ko;function Ma(l,d){if(Ys(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var m=Object.keys(l),p=Object.keys(d);if(m.length!==p.length)return!1;for(p=0;p<m.length;p++){var N=m[p];if(!Ie.call(d,N)||!Ys(l[N],d[N]))return!1}return!0}function Zo(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function ho(l,d){var m=Zo(l);l=0;for(var p;m;){if(m.nodeType===3){if(p=l+m.textContent.length,l<=d&&p>=d)return{node:m,offset:d-l};l=p}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Zo(m)}}function fo(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?fo(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function Vd(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=Jn(l.document);d instanceof l.HTMLIFrameElement;){try{var m=typeof d.contentWindow.location.href=="string"}catch{m=!1}if(m)l=d.contentWindow;else break;d=Jn(l.document)}return d}function Wd(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var Jo=fa&&"documentMode"in document&&11>=document.documentMode,Qa=null,Hl=null,Pa=null,Ul=!1;function nh(l,d,m){var p=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Ul||Qa==null||Qa!==Jn(p)||(p=Qa,"selectionStart"in p&&Wd(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Pa&&Ma(Pa,p)||(Pa=p,p=Ex(Hl,"onSelect"),0<p.length&&(d=new kc("onSelect","select",null,d,m),l.push({event:d,listeners:p}),d.target=Qa)))}function li(l,d){var m={};return m[l.toLowerCase()]=d.toLowerCase(),m["Webkit"+l]="webkit"+d,m["Moz"+l]="moz"+d,m}var Mr={animationend:li("Animation","AnimationEnd"),animationiteration:li("Animation","AnimationIteration"),animationstart:li("Animation","AnimationStart"),transitionrun:li("Transition","TransitionRun"),transitionstart:li("Transition","TransitionStart"),transitioncancel:li("Transition","TransitionCancel"),transitionend:li("Transition","TransitionEnd")},Fc={},y={};fa&&(y=document.createElement("div").style,"AnimationEvent"in window||(delete Mr.animationend.animation,delete Mr.animationiteration.animation,delete Mr.animationstart.animation),"TransitionEvent"in window||delete Mr.transitionend.transition);function S(l){if(Fc[l])return Fc[l];if(!Mr[l])return l;var d=Mr[l],m;for(m in d)if(d.hasOwnProperty(m)&&m in y)return Fc[l]=d[m];return l}var k=S("animationend"),O=S("animationiteration"),B=S("animationstart"),J=S("transitionrun"),$=S("transitionstart"),ve=S("transitioncancel"),ae=S("transitionend"),we=new Map,Oe="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Oe.push("scrollEnd");function Te(l,d){we.set(l,d),zn(d,[l])}var Xe=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},rt=[],zt=0,kt=0;function Tt(){for(var l=zt,d=kt=zt=0;d<l;){var m=rt[d];rt[d++]=null;var p=rt[d];rt[d++]=null;var N=rt[d];rt[d++]=null;var _=rt[d];if(rt[d++]=null,p!==null&&N!==null){var z=p.pending;z===null?N.next=N:(N.next=z.next,z.next=N),p.pending=N}_!==0&&Wn(m,N,_)}}function Et(l,d,m,p){rt[zt++]=l,rt[zt++]=d,rt[zt++]=m,rt[zt++]=p,kt|=p,l.lanes|=p,l=l.alternate,l!==null&&(l.lanes|=p)}function Mt(l,d,m,p){return Et(l,d,m,p),Zt(l)}function pn(l,d){return Et(l,null,null,d),Zt(l)}function Wn(l,d,m){l.lanes|=m;var p=l.alternate;p!==null&&(p.lanes|=m);for(var N=!1,_=l.return;_!==null;)_.childLanes|=m,p=_.alternate,p!==null&&(p.childLanes|=m),_.tag===22&&(l=_.stateNode,l===null||l._visibility&1||(N=!0)),l=_,_=_.return;return l.tag===3?(_=l.stateNode,N&&d!==null&&(N=31-Fn(m),l=_.hiddenUpdates,p=l[N],p===null?l[N]=[d]:p.push(d),d.lane=m|536870912),_):null}function Zt(l){if(50<Hg)throw Hg=0,Dv=null,Error(s(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var Jt={};function en(l,d,m,p){this.tag=l,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(l,d,m,p){return new en(l,d,m,p)}function qt(l){return l=l.prototype,!(!l||!l.isReactComponent)}function cs(l,d){var m=l.alternate;return m===null?(m=Mn(l.tag,d,l.key,l.mode),m.elementType=l.elementType,m.type=l.type,m.stateNode=l.stateNode,m.alternate=l,l.alternate=m):(m.pendingProps=d,m.type=l.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=l.flags&65011712,m.childLanes=l.childLanes,m.lanes=l.lanes,m.child=l.child,m.memoizedProps=l.memoizedProps,m.memoizedState=l.memoizedState,m.updateQueue=l.updateQueue,d=l.dependencies,m.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},m.sibling=l.sibling,m.index=l.index,m.ref=l.ref,m.refCleanup=l.refCleanup,m}function xn(l,d){l.flags&=65011714;var m=l.alternate;return m===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=m.childLanes,l.lanes=m.lanes,l.child=m.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=m.memoizedProps,l.memoizedState=m.memoizedState,l.updateQueue=m.updateQueue,l.type=m.type,d=m.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function Qn(l,d,m,p,N,_){var z=0;if(p=l,typeof l=="function")qt(l)&&(z=1);else if(typeof l=="string")z=vO(l,m,fe.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case K:return l=Mn(31,m,d,N),l.elementType=K,l.lanes=_,l;case C:return In(m.children,N,_,d);case E:z=8,N|=24;break;case T:return l=Mn(12,m,d,N|2),l.elementType=T,l.lanes=_,l;case I:return l=Mn(13,m,d,N),l.elementType=I,l.lanes=_,l;case W:return l=Mn(19,m,d,N),l.elementType=W,l.lanes=_,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case M:z=10;break e;case D:z=9;break e;case L:z=11;break e;case V:z=14;break e;case Y:z=16,p=null;break e}z=29,m=Error(s(130,l===null?"null":typeof l,"")),p=null}return d=Mn(z,m,d,N),d.elementType=l,d.type=p,d.lanes=_,d}function In(l,d,m,p){return l=Mn(7,l,p,d),l.lanes=m,l}function Pn(l,d,m){return l=Mn(6,l,null,d),l.lanes=m,l}function ci(l){var d=Mn(18,null,null,0);return d.stateNode=l,d}function Pr(l,d,m){return d=Mn(4,l.children!==null?l.children:[],l.key,d),d.lanes=m,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var Hi=new WeakMap;function di(l,d){if(typeof l=="object"&&l!==null){var m=Hi.get(l);return m!==void 0?m:(d={value:l,source:d,stack:Je(d)},Hi.set(l,d),d)}return{value:l,source:d,stack:Je(d)}}var Oa=[],ds=0,Ti=null,_i=0,is=[],ys=0,ji=null,Tn=1,ui="";function $i(l,d){Oa[ds++]=_i,Oa[ds++]=Ti,Ti=l,_i=d}function Gd(l,d,m){is[ys++]=Tn,is[ys++]=ui,is[ys++]=ji,ji=l;var p=Tn;l=ui;var N=32-Fn(p)-1;p&=~(1<<N),m+=1;var _=32-Fn(d)+N;if(30<_){var z=N-N%5;_=(p&(1<<z)-1).toString(32),p>>=z,N-=z,Tn=1<<32-Fn(d)+N|m<<N|p,ui=_+l}else Tn=1<<_|m<<N|p,ui=l}function zc(l){l.return!==null&&($i(l,1),Gd(l,1,0))}function Yd(l){for(;l===Ti;)Ti=Oa[--ds],Oa[ds]=null,_i=Oa[--ds],Oa[ds]=null;for(;l===ji;)ji=is[--ys],is[ys]=null,ui=is[--ys],is[ys]=null,Tn=is[--ys],is[ys]=null}function Xd(l,d){is[ys++]=Tn,is[ys++]=ui,is[ys++]=ji,Tn=d.id,ui=d.overflow,ji=l}var us=null,On=null,Ft=!1,Xs=null,zs=!1,Vl=Error(s(519));function ki(l){var d=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Or(di(d,l)),Vl}function Kd(l){var d=l.stateNode,m=l.type,p=l.memoizedProps;switch(d[Os]=l,d[Si]=p,m){case"dialog":nn("cancel",d),nn("close",d);break;case"iframe":case"object":case"embed":nn("load",d);break;case"video":case"audio":for(m=0;m<Vg.length;m++)nn(Vg[m],d);break;case"source":nn("error",d);break;case"img":case"image":case"link":nn("error",d),nn("load",d);break;case"details":nn("toggle",d);break;case"input":nn("invalid",d),Cr(d,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":nn("invalid",d);break;case"textarea":nn("invalid",d),Ju(d,p.value,p.defaultValue,p.children)}m=p.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||d.textContent===""+m||p.suppressHydrationWarning===!0||TA(d.textContent,m)?(p.popover!=null&&(nn("beforetoggle",d),nn("toggle",d)),p.onScroll!=null&&nn("scroll",d),p.onScrollEnd!=null&&nn("scrollend",d),p.onClick!=null&&(d.onclick=Tr),d=!0):d=!1,d||ki(l,!0)}function ea(l){for(us=l.return;us;)switch(us.tag){case 5:case 31:case 13:zs=!1;return;case 27:case 3:zs=!0;return;default:us=us.return}}function qa(l){if(l!==us)return!1;if(!Ft)return ea(l),Ft=!0,!1;var d=l.tag,m;if((m=d!==3&&d!==27)&&((m=d===5)&&(m=l.type,m=!(m!=="form"&&m!=="button")||Xv(l.type,l.memoizedProps)),m=!m),m&&On&&ki(l),ea(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(317));On=LA(l)}else if(d===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(317));On=LA(l)}else d===27?(d=On,Su(l.type)?(l=qv,qv=null,On=l):On=d):On=us?bo(l.stateNode.nextSibling):null;return!0}function ga(){On=us=null,Ft=!1}function mo(){var l=Xs;return l!==null&&(rr===null?rr=l:rr.push.apply(rr,l),Xs=null),l}function Or(l){Xs===null?Xs=[l]:Xs.push(l)}var La=G(null),Lr=null,_n=null;function Ri(l,d,m){Se(La,d._currentValue),d._currentValue=m}function Ui(l){l._currentValue=La.current,ue(La)}function $a(l,d,m){for(;l!==null;){var p=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,p!==null&&(p.childLanes|=d)):p!==null&&(p.childLanes&d)!==d&&(p.childLanes|=d),l===m)break;l=l.return}}function Wl(l,d,m,p){var N=l.child;for(N!==null&&(N.return=l);N!==null;){var _=N.dependencies;if(_!==null){var z=N.child;_=_.firstContext;e:for(;_!==null;){var Z=_;_=N;for(var se=0;se<d.length;se++)if(Z.context===d[se]){_.lanes|=m,Z=_.alternate,Z!==null&&(Z.lanes|=m),$a(_.return,m,l),p||(z=null);break e}_=Z.next}}else if(N.tag===18){if(z=N.return,z===null)throw Error(s(341));z.lanes|=m,_=z.alternate,_!==null&&(_.lanes|=m),$a(z,m,l),z=null}else z=N.child;if(z!==null)z.return=N;else for(z=N;z!==null;){if(z===l){z=null;break}if(N=z.sibling,N!==null){N.return=z.return,z=N;break}z=z.return}N=z}}function Ks(l,d,m,p){l=null;for(var N=d,_=!1;N!==null;){if(!_){if((N.flags&524288)!==0)_=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var z=N.alternate;if(z===null)throw Error(s(387));if(z=z.memoizedProps,z!==null){var Z=N.type;Ys(N.pendingProps.value,z.value)||(l!==null?l.push(Z):l=[Z])}}else if(N===Ve.current){if(z=N.alternate,z===null)throw Error(s(387));z.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(l!==null?l.push(Kg):l=[Kg])}N=N.return}l!==null&&Wl(d,l,m,p),d.flags|=262144}function Fa(l){for(l=l.firstContext;l!==null;){if(!Ys(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function ta(l){Lr=l,_n=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Nn(l){return Qo(Lr,l)}function vs(l,d){return Lr===null&&ta(l),Qo(l,d)}function Qo(l,d){var m=d._currentValue;if(d={context:d,memoizedValue:m,next:null},_n===null){if(l===null)throw Error(s(308));_n=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else _n=_n.next=d;return m}var hi=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(m,p){l.push(p)}};this.abort=function(){d.aborted=!0,l.forEach(function(m){return m()})}},sh=n.unstable_scheduleCallback,Ic=n.unstable_NormalPriority,Gn={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zd(){return{controller:new hi,data:new Map,refCount:0}}function Gl(l){l.refCount--,l.refCount===0&&sh(Ic,function(){l.controller.abort()})}var na=null,Fr=0,sa=0,as=null;function Yl(l,d){if(na===null){var m=na=[];Fr=0,sa=zv(),as={status:"pending",value:void 0,then:function(p){m.push(p)}}}return Fr++,d.then(qo,qo),d}function qo(){if(--Fr===0&&na!==null){as!==null&&(as.status="fulfilled");var l=na;na=null,sa=0,as=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function Jd(l,d){var m=[],p={status:"pending",value:null,reason:null,then:function(N){m.push(N)}};return l.then(function(){p.status="fulfilled",p.value=d;for(var N=0;N<m.length;N++)(0,m[N])(d)},function(N){for(p.status="rejected",p.reason=N,N=0;N<m.length;N++)(0,m[N])(void 0)}),p}var Bc=U.S;U.S=function(l,d){QN=nt(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&Yl(l,d),Bc!==null&&Bc(l,d)};var zr=G(null);function Xl(){var l=zr.current;return l!==null?l:qn.pooledCache}function Kl(l,d){d===null?Se(zr,zr.current):Se(zr,d.pool)}function rs(){var l=Xl();return l===null?null:{parent:Gn._currentValue,pool:l}}var Ir=Error(s(460)),go=Error(s(474)),Br=Error(s(542)),po={then:function(){}};function Hc(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Zl(l,d,m){switch(m=l[m],m===void 0?l.push(d):m!==d&&(d.then(Tr,Tr),d=m),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,Qd(l),l;default:if(typeof d.status=="string")d.then(Tr,Tr);else{if(l=qn,l!==null&&100<l.shellSuspendCounter)throw Error(s(482));l=d,l.status="pending",l.then(function(p){if(d.status==="pending"){var N=d;N.status="fulfilled",N.value=p}},function(p){if(d.status==="pending"){var N=d;N.status="rejected",N.reason=p}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,Qd(l),l}throw Di=d,Ir}}function za(l){try{var d=l._init;return d(l._payload)}catch(m){throw m!==null&&typeof m=="object"&&typeof m.then=="function"?(Di=m,Ir):m}}var Di=null;function Vi(){if(Di===null)throw Error(s(459));var l=Di;return Di=null,l}function Qd(l){if(l===Ir||l===Br)throw Error(s(483))}var ia=null,$o=0;function pa(l){var d=$o;return $o+=1,ia===null&&(ia=[]),Zl(ia,l,d)}function Ia(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function xa(l,d){throw d.$$typeof===x?Error(s(525)):(l=Object.prototype.toString.call(d),Error(s(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function el(l){function d(me,re){if(l){var ge=me.deletions;ge===null?(me.deletions=[re],me.flags|=16):ge.push(re)}}function m(me,re){if(!l)return null;for(;re!==null;)d(me,re),re=re.sibling;return null}function p(me){for(var re=new Map;me!==null;)me.key!==null?re.set(me.key,me):re.set(me.index,me),me=me.sibling;return re}function N(me,re){return me=cs(me,re),me.index=0,me.sibling=null,me}function _(me,re,ge){return me.index=ge,l?(ge=me.alternate,ge!==null?(ge=ge.index,ge<re?(me.flags|=67108866,re):ge):(me.flags|=67108866,re)):(me.flags|=1048576,re)}function z(me){return l&&me.alternate===null&&(me.flags|=67108866),me}function Z(me,re,ge,Me){return re===null||re.tag!==6?(re=Pn(ge,me.mode,Me),re.return=me,re):(re=N(re,ge),re.return=me,re)}function se(me,re,ge,Me){var vt=ge.type;return vt===C?Re(me,re,ge.props.children,Me,ge.key):re!==null&&(re.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===Y&&za(vt)===re.type)?(re=N(re,ge.props),Ia(re,ge),re.return=me,re):(re=Qn(ge.type,ge.key,ge.props,null,me.mode,Me),Ia(re,ge),re.return=me,re)}function pe(me,re,ge,Me){return re===null||re.tag!==4||re.stateNode.containerInfo!==ge.containerInfo||re.stateNode.implementation!==ge.implementation?(re=Pr(ge,me.mode,Me),re.return=me,re):(re=N(re,ge.children||[]),re.return=me,re)}function Re(me,re,ge,Me,vt){return re===null||re.tag!==7?(re=In(ge,me.mode,Me,vt),re.return=me,re):(re=N(re,ge),re.return=me,re)}function Le(me,re,ge){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return re=Pn(""+re,me.mode,ge),re.return=me,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case w:return ge=Qn(re.type,re.key,re.props,null,me.mode,ge),Ia(ge,re),ge.return=me,ge;case A:return re=Pr(re,me.mode,ge),re.return=me,re;case Y:return re=za(re),Le(me,re,ge)}if(je(re)||le(re))return re=In(re,me.mode,ge,null),re.return=me,re;if(typeof re.then=="function")return Le(me,pa(re),ge);if(re.$$typeof===M)return Le(me,vs(me,re),ge);xa(me,re)}return null}function ye(me,re,ge,Me){var vt=re!==null?re.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return vt!==null?null:Z(me,re,""+ge,Me);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case w:return ge.key===vt?se(me,re,ge,Me):null;case A:return ge.key===vt?pe(me,re,ge,Me):null;case Y:return ge=za(ge),ye(me,re,ge,Me)}if(je(ge)||le(ge))return vt!==null?null:Re(me,re,ge,Me,null);if(typeof ge.then=="function")return ye(me,re,pa(ge),Me);if(ge.$$typeof===M)return ye(me,re,vs(me,ge),Me);xa(me,ge)}return null}function Ee(me,re,ge,Me,vt){if(typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint")return me=me.get(ge)||null,Z(re,me,""+Me,vt);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case w:return me=me.get(Me.key===null?ge:Me.key)||null,se(re,me,Me,vt);case A:return me=me.get(Me.key===null?ge:Me.key)||null,pe(re,me,Me,vt);case Y:return Me=za(Me),Ee(me,re,ge,Me,vt)}if(je(Me)||le(Me))return me=me.get(ge)||null,Re(re,me,Me,vt,null);if(typeof Me.then=="function")return Ee(me,re,ge,pa(Me),vt);if(Me.$$typeof===M)return Ee(me,re,ge,vs(re,Me),vt);xa(re,Me)}return null}function ct(me,re,ge,Me){for(var vt=null,Cn=null,ut=re,Yt=re=0,ln=null;ut!==null&&Yt<ge.length;Yt++){ut.index>Yt?(ln=ut,ut=null):ln=ut.sibling;var En=ye(me,ut,ge[Yt],Me);if(En===null){ut===null&&(ut=ln);break}l&&ut&&En.alternate===null&&d(me,ut),re=_(En,re,Yt),Cn===null?vt=En:Cn.sibling=En,Cn=En,ut=ln}if(Yt===ge.length)return m(me,ut),Ft&&$i(me,Yt),vt;if(ut===null){for(;Yt<ge.length;Yt++)ut=Le(me,ge[Yt],Me),ut!==null&&(re=_(ut,re,Yt),Cn===null?vt=ut:Cn.sibling=ut,Cn=ut);return Ft&&$i(me,Yt),vt}for(ut=p(ut);Yt<ge.length;Yt++)ln=Ee(ut,me,Yt,ge[Yt],Me),ln!==null&&(l&&ln.alternate!==null&&ut.delete(ln.key===null?Yt:ln.key),re=_(ln,re,Yt),Cn===null?vt=ln:Cn.sibling=ln,Cn=ln);return l&&ut.forEach(function(Tu){return d(me,Tu)}),Ft&&$i(me,Yt),vt}function At(me,re,ge,Me){if(ge==null)throw Error(s(151));for(var vt=null,Cn=null,ut=re,Yt=re=0,ln=null,En=ge.next();ut!==null&&!En.done;Yt++,En=ge.next()){ut.index>Yt?(ln=ut,ut=null):ln=ut.sibling;var Tu=ye(me,ut,En.value,Me);if(Tu===null){ut===null&&(ut=ln);break}l&&ut&&Tu.alternate===null&&d(me,ut),re=_(Tu,re,Yt),Cn===null?vt=Tu:Cn.sibling=Tu,Cn=Tu,ut=ln}if(En.done)return m(me,ut),Ft&&$i(me,Yt),vt;if(ut===null){for(;!En.done;Yt++,En=ge.next())En=Le(me,En.value,Me),En!==null&&(re=_(En,re,Yt),Cn===null?vt=En:Cn.sibling=En,Cn=En);return Ft&&$i(me,Yt),vt}for(ut=p(ut);!En.done;Yt++,En=ge.next())En=Ee(ut,me,Yt,En.value,Me),En!==null&&(l&&En.alternate!==null&&ut.delete(En.key===null?Yt:En.key),re=_(En,re,Yt),Cn===null?vt=En:Cn.sibling=En,Cn=En);return l&&ut.forEach(function(RO){return d(me,RO)}),Ft&&$i(me,Yt),vt}function Xn(me,re,ge,Me){if(typeof ge=="object"&&ge!==null&&ge.type===C&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case w:e:{for(var vt=ge.key;re!==null;){if(re.key===vt){if(vt=ge.type,vt===C){if(re.tag===7){m(me,re.sibling),Me=N(re,ge.props.children),Me.return=me,me=Me;break e}}else if(re.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===Y&&za(vt)===re.type){m(me,re.sibling),Me=N(re,ge.props),Ia(Me,ge),Me.return=me,me=Me;break e}m(me,re);break}else d(me,re);re=re.sibling}ge.type===C?(Me=In(ge.props.children,me.mode,Me,ge.key),Me.return=me,me=Me):(Me=Qn(ge.type,ge.key,ge.props,null,me.mode,Me),Ia(Me,ge),Me.return=me,me=Me)}return z(me);case A:e:{for(vt=ge.key;re!==null;){if(re.key===vt)if(re.tag===4&&re.stateNode.containerInfo===ge.containerInfo&&re.stateNode.implementation===ge.implementation){m(me,re.sibling),Me=N(re,ge.children||[]),Me.return=me,me=Me;break e}else{m(me,re);break}else d(me,re);re=re.sibling}Me=Pr(ge,me.mode,Me),Me.return=me,me=Me}return z(me);case Y:return ge=za(ge),Xn(me,re,ge,Me)}if(je(ge))return ct(me,re,ge,Me);if(le(ge)){if(vt=le(ge),typeof vt!="function")throw Error(s(150));return ge=vt.call(ge),At(me,re,ge,Me)}if(typeof ge.then=="function")return Xn(me,re,pa(ge),Me);if(ge.$$typeof===M)return Xn(me,re,vs(me,ge),Me);xa(me,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,re!==null&&re.tag===6?(m(me,re.sibling),Me=N(re,ge),Me.return=me,me=Me):(m(me,re),Me=Pn(ge,me.mode,Me),Me.return=me,me=Me),z(me)):m(me,re)}return function(me,re,ge,Me){try{$o=0;var vt=Xn(me,re,ge,Me);return ia=null,vt}catch(ut){if(ut===Ir||ut===Br)throw ut;var Cn=Mn(29,ut,null,me.mode);return Cn.lanes=Me,Cn.return=me,Cn}}}var Mi=el(!0),qd=el(!1),er=!1;function Ba(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tl(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Wi(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function fi(l,d,m){var p=l.updateQueue;if(p===null)return null;if(p=p.shared,(jn&2)!==0){var N=p.pending;return N===null?d.next=d:(d.next=N.next,N.next=d),p.pending=d,d=Zt(l),Wn(l,null,m),d}return Et(l,p,d,m),Zt(l)}function ba(l,d,m){if(d=d.updateQueue,d!==null&&(d=d.shared,(m&4194048)!==0)){var p=d.lanes;p&=l.pendingLanes,m|=p,d.lanes=m,Vs(l,m)}}function Gi(l,d){var m=l.updateQueue,p=l.alternate;if(p!==null&&(p=p.updateQueue,m===p)){var N=null,_=null;if(m=m.firstBaseUpdate,m!==null){do{var z={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};_===null?N=_=z:_=_.next=z,m=m.next}while(m!==null);_===null?N=_=d:_=_.next=d}else N=_=d;m={baseState:p.baseState,firstBaseUpdate:N,lastBaseUpdate:_,shared:p.shared,callbacks:p.callbacks},l.updateQueue=m;return}l=m.lastBaseUpdate,l===null?m.firstBaseUpdate=d:l.next=d,m.lastBaseUpdate=d}var Jl=!1;function nl(){if(Jl){var l=as;if(l!==null)throw l}}function tr(l,d,m,p){Jl=!1;var N=l.updateQueue;er=!1;var _=N.firstBaseUpdate,z=N.lastBaseUpdate,Z=N.shared.pending;if(Z!==null){N.shared.pending=null;var se=Z,pe=se.next;se.next=null,z===null?_=pe:z.next=pe,z=se;var Re=l.alternate;Re!==null&&(Re=Re.updateQueue,Z=Re.lastBaseUpdate,Z!==z&&(Z===null?Re.firstBaseUpdate=pe:Z.next=pe,Re.lastBaseUpdate=se))}if(_!==null){var Le=N.baseState;z=0,Re=pe=se=null,Z=_;do{var ye=Z.lane&-536870913,Ee=ye!==Z.lane;if(Ee?(on&ye)===ye:(p&ye)===ye){ye!==0&&ye===sa&&(Jl=!0),Re!==null&&(Re=Re.next={lane:0,tag:Z.tag,payload:Z.payload,callback:null,next:null});e:{var ct=l,At=Z;ye=d;var Xn=m;switch(At.tag){case 1:if(ct=At.payload,typeof ct=="function"){Le=ct.call(Xn,Le,ye);break e}Le=ct;break e;case 3:ct.flags=ct.flags&-65537|128;case 0:if(ct=At.payload,ye=typeof ct=="function"?ct.call(Xn,Le,ye):ct,ye==null)break e;Le=g({},Le,ye);break e;case 2:er=!0}}ye=Z.callback,ye!==null&&(l.flags|=64,Ee&&(l.flags|=8192),Ee=N.callbacks,Ee===null?N.callbacks=[ye]:Ee.push(ye))}else Ee={lane:ye,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},Re===null?(pe=Re=Ee,se=Le):Re=Re.next=Ee,z|=ye;if(Z=Z.next,Z===null){if(Z=N.shared.pending,Z===null)break;Ee=Z,Z=Ee.next,Ee.next=null,N.lastBaseUpdate=Ee,N.shared.pending=null}}while(!0);Re===null&&(se=Le),N.baseState=se,N.firstBaseUpdate=pe,N.lastBaseUpdate=Re,_===null&&(N.shared.lanes=0),xu|=z,l.lanes=z,l.memoizedState=Le}}function b(l,d){if(typeof l!="function")throw Error(s(191,l));l.call(d)}function v(l,d){var m=l.callbacks;if(m!==null)for(l.callbacks=null,l=0;l<m.length;l++)b(m[l],d)}var j=G(null),P=G(0);function F(l,d){l=td,Se(P,l),Se(j,d),td=l|d.baseLanes}function X(){Se(P,td),Se(j,j.current)}function Q(){td=P.current,ue(j),ue(P)}var oe=G(null),te=null;function de(l){var d=l.alternate;Se(xt,xt.current&1),Se(oe,l),te===null&&(d===null||j.current!==null||d.memoizedState!==null)&&(te=l)}function be(l){Se(xt,xt.current),Se(oe,l),te===null&&(te=l)}function Ne(l){l.tag===22?(Se(xt,xt.current),Se(oe,l),te===null&&(te=l)):We()}function We(){Se(xt,xt.current),Se(oe,oe.current)}function Ye(l){ue(oe),te===l&&(te=null),ue(xt)}var xt=G(0);function Pt(l){for(var d=l;d!==null;){if(d.tag===13){var m=d.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||Jv(m)||Qv(m)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var _t=0,et=null,bt=null,Qt=null,Zs=!1,Js=!1,yt=!1,js=0,Ln=0,ws=null,Hr=0;function Rt(){throw Error(s(321))}function nr(l,d){if(d===null)return!1;for(var m=0;m<d.length&&m<l.length;m++)if(!Ys(l[m],d[m]))return!1;return!0}function ya(l,d,m,p,N,_){return _t=_,et=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,U.H=l===null||l.memoizedState===null?hh:ec,yt=!1,_=m(p,N),yt=!1,Js&&(_=aa(d,m,p,N)),Is(l),_}function Is(l){U.H=uh;var d=bt!==null&&bt.next!==null;if(_t=0,Qt=bt=et=null,Zs=!1,Ln=0,ws=null,d)throw Error(s(300));l===null||Bs||(l=l.dependencies,l!==null&&Fa(l)&&(Bs=!0))}function aa(l,d,m,p){et=l;var N=0;do{if(Js&&(ws=null),Ln=0,Js=!1,25<=N)throw Error(s(301));if(N+=1,Qt=bt=null,l.updateQueue!=null){var _=l.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}U.H=lx,_=d(m,p)}while(Js);return _}function Uc(){var l=U.H,d=l.useState()[0];return d=typeof d.then=="function"?Vc(d):d,l=l.useState()[0],(bt!==null?bt.memoizedState:null)!==l&&(et.flags|=1024),d}function sl(){var l=js!==0;return js=0,l}function Ur(l,d,m){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~m}function il(l){if(Zs){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Zs=!1}_t=0,Qt=bt=et=null,Js=!1,Ln=js=0,ws=null}function Qs(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?et.memoizedState=Qt=l:Qt=Qt.next=l,Qt}function An(){if(bt===null){var l=et.alternate;l=l!==null?l.memoizedState:null}else l=bt.next;var d=Qt===null?et.memoizedState:Qt.next;if(d!==null)Qt=d,bt=l;else{if(l===null)throw et.alternate===null?Error(s(467)):Error(s(310));bt=l,l={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},Qt===null?et.memoizedState=Qt=l:Qt=Qt.next=l}return Qt}function Vr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vc(l){var d=Ln;return Ln+=1,ws===null&&(ws=[]),l=Zl(ws,l,d),d=et,(Qt===null?d.memoizedState:Qt.next)===null&&(d=d.alternate,U.H=d===null||d.memoizedState===null?hh:ec),l}function $d(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Vc(l);if(l.$$typeof===M)return Nn(l)}throw Error(s(438,String(l)))}function Wc(l){var d=null,m=et.updateQueue;if(m!==null&&(d=m.memoCache),d==null){var p=et.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(d={data:p.data.map(function(N){return N.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),m===null&&(m=Vr(),et.updateQueue=m),m.memoCache=d,m=d.data[d.index],m===void 0)for(m=d.data[d.index]=Array(l),p=0;p<l;p++)m[p]=q;return d.index++,m}function qs(l,d){return typeof d=="function"?d(l):d}function ih(l){var d=An();return Gc(d,bt,l)}function Gc(l,d,m){var p=l.queue;if(p===null)throw Error(s(311));p.lastRenderedReducer=m;var N=l.baseQueue,_=p.pending;if(_!==null){if(N!==null){var z=N.next;N.next=_.next,_.next=z}d.baseQueue=N=_,p.pending=null}if(_=l.baseState,N===null)l.memoizedState=_;else{d=N.next;var Z=z=null,se=null,pe=d,Re=!1;do{var Le=pe.lane&-536870913;if(Le!==pe.lane?(on&Le)===Le:(_t&Le)===Le){var ye=pe.revertLane;if(ye===0)se!==null&&(se=se.next={lane:0,revertLane:0,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),Le===sa&&(Re=!0);else if((_t&ye)===ye){pe=pe.next,ye===sa&&(Re=!0);continue}else Le={lane:0,revertLane:pe.revertLane,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},se===null?(Z=se=Le,z=_):se=se.next=Le,et.lanes|=ye,xu|=ye;Le=pe.action,yt&&m(_,Le),_=pe.hasEagerState?pe.eagerState:m(_,Le)}else ye={lane:Le,revertLane:pe.revertLane,gesture:pe.gesture,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},se===null?(Z=se=ye,z=_):se=se.next=ye,et.lanes|=Le,xu|=Le;pe=pe.next}while(pe!==null&&pe!==d);if(se===null?z=_:se.next=Z,!Ys(_,l.memoizedState)&&(Bs=!0,Re&&(m=as,m!==null)))throw m;l.memoizedState=_,l.baseState=z,l.baseQueue=se,p.lastRenderedState=_}return N===null&&(p.lanes=0),[l.memoizedState,p.dispatch]}function Cf(l){var d=An(),m=d.queue;if(m===null)throw Error(s(311));m.lastRenderedReducer=l;var p=m.dispatch,N=m.pending,_=d.memoizedState;if(N!==null){m.pending=null;var z=N=N.next;do _=l(_,z.action),z=z.next;while(z!==N);Ys(_,d.memoizedState)||(Bs=!0),d.memoizedState=_,d.baseQueue===null&&(d.baseState=_),m.lastRenderedState=_}return[_,p]}function fg(l,d,m){var p=et,N=An(),_=Ft;if(_){if(m===void 0)throw Error(s(407));m=m()}else m=d();var z=!Ys((bt||N).memoizedState,m);if(z&&(N.memoizedState=m,Bs=!0),N=N.queue,Kc(pg.bind(null,p,N,l),[l]),N.getSnapshot!==d||z||Qt!==null&&Qt.memoizedState.tag&1){if(p.flags|=2048,Xc(9,{destroy:void 0},gg.bind(null,p,N,m,d),null),qn===null)throw Error(s(349));_||(_t&127)!==0||mg(p,d,m)}return m}function mg(l,d,m){l.flags|=16384,l={getSnapshot:d,value:m},d=et.updateQueue,d===null?(d=Vr(),et.updateQueue=d,d.stores=[l]):(m=d.stores,m===null?d.stores=[l]:m.push(l))}function gg(l,d,m,p){d.value=m,d.getSnapshot=p,xg(d)&&eu(l)}function pg(l,d,m){return m(function(){xg(d)&&eu(l)})}function xg(l){var d=l.getSnapshot;l=l.value;try{var m=d();return!Ys(l,m)}catch{return!0}}function eu(l){var d=pn(l,2);d!==null&&or(d,l,2)}function Wr(l){var d=Qs();if(typeof l=="function"){var m=l;if(l=m(),yt){ss(!0);try{m()}finally{ss(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:l},d}function bg(l,d,m,p){return l.baseState=m,Gc(l,bt,typeof p=="function"?p:qs)}function tx(l,d,m,p,N){if(du(l))throw Error(s(485));if(l=d.action,l!==null){var _={payload:N,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){_.listeners.push(z)}};U.T!==null?m(!0):_.isTransition=!1,p(_),m=d.pending,m===null?(_.next=d.pending=_,tu(d,_)):(_.next=m.next,d.pending=m.next=_)}}function tu(l,d){var m=d.action,p=d.payload,N=l.state;if(d.isTransition){var _=U.T,z={};U.T=z;try{var Z=m(N,p),se=U.S;se!==null&&se(z,Z),yg(l,d,Z)}catch(pe){Yc(l,d,pe)}finally{_!==null&&z.types!==null&&(_.types=z.types),U.T=_}}else try{_=m(N,p),yg(l,d,_)}catch(pe){Yc(l,d,pe)}}function yg(l,d,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(p){Ql(l,d,p)},function(p){return Yc(l,d,p)}):Ql(l,d,m)}function Ql(l,d,m){d.status="fulfilled",d.value=m,nu(d),l.state=m,d=l.pending,d!==null&&(m=d.next,m===d?l.pending=null:(m=m.next,d.next=m,tu(l,m)))}function Yc(l,d,m){var p=l.pending;if(l.pending=null,p!==null){p=p.next;do d.status="rejected",d.reason=m,nu(d),d=d.next;while(d!==p)}l.action=null}function nu(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function su(l,d){return d}function iu(l,d){if(Ft){var m=qn.formState;if(m!==null){e:{var p=et;if(Ft){if(On){t:{for(var N=On,_=zs;N.nodeType!==8;){if(!_){N=null;break t}if(N=bo(N.nextSibling),N===null){N=null;break t}}_=N.data,N=_==="F!"||_==="F"?N:null}if(N){On=bo(N.nextSibling),p=N.data==="F!";break e}}ki(p)}p=!1}p&&(d=m[0])}}return m=Qs(),m.memoizedState=m.baseState=d,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:su,lastRenderedState:d},m.queue=p,m=dh.bind(null,et,p),p.dispatch=m,p=Wr(!1),_=cu.bind(null,et,!1,p.queue),p=Qs(),N={state:d,dispatch:null,action:l,pending:null},p.queue=N,m=tx.bind(null,et,N,_,m),N.dispatch=m,p.memoizedState=l,[d,m,!1]}function al(l){var d=An();return Ef(d,bt,l)}function Ef(l,d,m){if(d=Gc(l,d,su)[0],l=ih(qs)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var p=Vc(d)}catch(z){throw z===Ir?Br:z}else p=d;d=An();var N=d.queue,_=N.dispatch;return m!==d.memoizedState&&(et.flags|=2048,Xc(9,{destroy:void 0},vg.bind(null,N,m),null)),[p,_,l]}function vg(l,d){l.action=d}function ql(l){var d=An(),m=bt;if(m!==null)return Ef(d,m,l);An(),d=d.memoizedState,m=An();var p=m.queue.dispatch;return m.memoizedState=l,[d,p,!1]}function Xc(l,d,m,p){return l={tag:l,create:m,deps:p,inst:d,next:null},d=et.updateQueue,d===null&&(d=Vr(),et.updateQueue=d),m=d.lastEffect,m===null?d.lastEffect=l.next=l:(p=m.next,m.next=l,l.next=p,d.lastEffect=l),l}function ah(){return An().memoizedState}function rh(l,d,m,p){var N=Qs();et.flags|=l,N.memoizedState=Xc(1|d,{destroy:void 0},m,p===void 0?null:p)}function $l(l,d,m,p){var N=An();p=p===void 0?null:p;var _=N.memoizedState.inst;bt!==null&&p!==null&&nr(p,bt.memoizedState.deps)?N.memoizedState=Xc(d,_,m,p):(et.flags|=l,N.memoizedState=Xc(1|d,_,m,p))}function wg(l,d){rh(8390656,8,l,d)}function Kc(l,d){$l(2048,8,l,d)}function oh(l){et.flags|=4;var d=et.updateQueue;if(d===null)d=Vr(),et.updateQueue=d,d.events=[l];else{var m=d.events;m===null?d.events=[l]:m.push(l)}}function Sg(l){var d=An().memoizedState;return oh({ref:d,nextImpl:l}),function(){if((jn&2)!==0)throw Error(s(440));return d.impl.apply(void 0,arguments)}}function Ng(l,d){return $l(4,2,l,d)}function nx(l,d){return $l(4,4,l,d)}function sx(l,d){if(typeof d=="function"){l=l();var m=d(l);return function(){typeof m=="function"?m():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function Tf(l,d,m){m=m!=null?m.concat([l]):null,$l(4,4,sx.bind(null,d,l),m)}function Ag(){}function ix(l,d){var m=An();d=d===void 0?null:d;var p=m.memoizedState;return d!==null&&nr(d,p[1])?p[0]:(m.memoizedState=[l,d],l)}function ax(l,d){var m=An();d=d===void 0?null:d;var p=m.memoizedState;if(d!==null&&nr(d,p[1]))return p[0];if(p=l(),yt){ss(!0);try{l()}finally{ss(!1)}}return m.memoizedState=[p,d],p}function xo(l,d,m){return m===void 0||(_t&1073741824)!==0&&(on&261930)===0?l.memoizedState=d:(l.memoizedState=m,l=$N(),et.lanes|=l,xu|=l,m)}function lh(l,d,m,p){return Ys(m,d)?m:j.current!==null?(l=xo(l,m,p),Ys(l,d)||(Bs=!0),l):(_t&42)===0||(_t&1073741824)!==0&&(on&261930)===0?(Bs=!0,l.memoizedState=m):(l=$N(),et.lanes|=l,xu|=l,d)}function au(l,d,m,p,N){var _=H.p;H.p=_!==0&&8>_?_:8;var z=U.T,Z={};U.T=Z,cu(l,!1,d,m);try{var se=N(),pe=U.S;if(pe!==null&&pe(Z,se),se!==null&&typeof se=="object"&&typeof se.then=="function"){var Re=Jd(se,p);lu(l,d,Re,Zr(l))}else lu(l,d,p,Zr(l))}catch(Le){lu(l,d,{then:function(){},status:"rejected",reason:Le},Zr())}finally{H.p=_,z!==null&&Z.types!==null&&(z.types=Z.types),U.T=z}}function ru(){}function ou(l,d,m,p){if(l.tag!==5)throw Error(s(476));var N=ch(l).queue;au(l,N,d,ee,m===null?ru:function(){return _f(l),m(p)})}function ch(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:ee},next:null};var m={};return d.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:m},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function _f(l){var d=ch(l);d.next===null&&(d=l.alternate.memoizedState),lu(l,d.next.queue,{},Zr())}function jf(){return Nn(Kg)}function rx(){return An().memoizedState}function kf(){return An().memoizedState}function ox(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var m=Zr();l=Wi(m);var p=fi(d,l,m);p!==null&&(or(p,d,m),ba(p,d,m)),d={cache:Zd()},l.payload=d;return}d=d.return}}function Rf(l,d,m){var p=Zr();m={lane:p,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},du(l)?Cg(d,m):(m=Mt(l,d,m,p),m!==null&&(or(m,l,p),Eg(m,d,p)))}function dh(l,d,m){var p=Zr();lu(l,d,m,p)}function lu(l,d,m,p){var N={lane:p,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null};if(du(l))Cg(d,N);else{var _=l.alternate;if(l.lanes===0&&(_===null||_.lanes===0)&&(_=d.lastRenderedReducer,_!==null))try{var z=d.lastRenderedState,Z=_(z,m);if(N.hasEagerState=!0,N.eagerState=Z,Ys(Z,z))return Et(l,d,N,0),qn===null&&Tt(),!1}catch{}if(m=Mt(l,d,N,p),m!==null)return or(m,l,p),Eg(m,d,p),!0}return!1}function cu(l,d,m,p){if(p={lane:2,revertLane:zv(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},du(l)){if(d)throw Error(s(479))}else d=Mt(l,m,p,2),d!==null&&or(d,l,2)}function du(l){var d=l.alternate;return l===et||d!==null&&d===et}function Cg(l,d){Js=Zs=!0;var m=l.pending;m===null?d.next=d:(d.next=m.next,m.next=d),l.pending=d}function Eg(l,d,m){if((m&4194048)!==0){var p=d.lanes;p&=l.pendingLanes,m|=p,d.lanes=m,Vs(l,m)}}var uh={readContext:Nn,use:$d,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt};uh.useEffectEvent=Rt;var hh={readContext:Nn,use:$d,useCallback:function(l,d){return Qs().memoizedState=[l,d===void 0?null:d],l},useContext:Nn,useEffect:wg,useImperativeHandle:function(l,d,m){m=m!=null?m.concat([l]):null,rh(4194308,4,sx.bind(null,d,l),m)},useLayoutEffect:function(l,d){return rh(4194308,4,l,d)},useInsertionEffect:function(l,d){rh(4,2,l,d)},useMemo:function(l,d){var m=Qs();d=d===void 0?null:d;var p=l();if(yt){ss(!0);try{l()}finally{ss(!1)}}return m.memoizedState=[p,d],p},useReducer:function(l,d,m){var p=Qs();if(m!==void 0){var N=m(d);if(yt){ss(!0);try{m(d)}finally{ss(!1)}}}else N=d;return p.memoizedState=p.baseState=N,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:N},p.queue=l,l=l.dispatch=Rf.bind(null,et,l),[p.memoizedState,l]},useRef:function(l){var d=Qs();return l={current:l},d.memoizedState=l},useState:function(l){l=Wr(l);var d=l.queue,m=dh.bind(null,et,d);return d.dispatch=m,[l.memoizedState,m]},useDebugValue:Ag,useDeferredValue:function(l,d){var m=Qs();return xo(m,l,d)},useTransition:function(){var l=Wr(!1);return l=au.bind(null,et,l.queue,!0,!1),Qs().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,m){var p=et,N=Qs();if(Ft){if(m===void 0)throw Error(s(407));m=m()}else{if(m=d(),qn===null)throw Error(s(349));(on&127)!==0||mg(p,d,m)}N.memoizedState=m;var _={value:m,getSnapshot:d};return N.queue=_,wg(pg.bind(null,p,_,l),[l]),p.flags|=2048,Xc(9,{destroy:void 0},gg.bind(null,p,_,m,d),null),m},useId:function(){var l=Qs(),d=qn.identifierPrefix;if(Ft){var m=ui,p=Tn;m=(p&~(1<<32-Fn(p)-1)).toString(32)+m,d="_"+d+"R_"+m,m=js++,0<m&&(d+="H"+m.toString(32)),d+="_"}else m=Hr++,d="_"+d+"r_"+m.toString(32)+"_";return l.memoizedState=d},useHostTransitionStatus:jf,useFormState:iu,useActionState:iu,useOptimistic:function(l){var d=Qs();d.memoizedState=d.baseState=l;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=m,d=cu.bind(null,et,!0,m),m.dispatch=d,[l,d]},useMemoCache:Wc,useCacheRefresh:function(){return Qs().memoizedState=ox.bind(null,et)},useEffectEvent:function(l){var d=Qs(),m={impl:l};return d.memoizedState=m,function(){if((jn&2)!==0)throw Error(s(440));return m.impl.apply(void 0,arguments)}}},ec={readContext:Nn,use:$d,useCallback:ix,useContext:Nn,useEffect:Kc,useImperativeHandle:Tf,useInsertionEffect:Ng,useLayoutEffect:nx,useMemo:ax,useReducer:ih,useRef:ah,useState:function(){return ih(qs)},useDebugValue:Ag,useDeferredValue:function(l,d){var m=An();return lh(m,bt.memoizedState,l,d)},useTransition:function(){var l=ih(qs)[0],d=An().memoizedState;return[typeof l=="boolean"?l:Vc(l),d]},useSyncExternalStore:fg,useId:rx,useHostTransitionStatus:jf,useFormState:al,useActionState:al,useOptimistic:function(l,d){var m=An();return bg(m,bt,l,d)},useMemoCache:Wc,useCacheRefresh:kf};ec.useEffectEvent=Sg;var lx={readContext:Nn,use:$d,useCallback:ix,useContext:Nn,useEffect:Kc,useImperativeHandle:Tf,useInsertionEffect:Ng,useLayoutEffect:nx,useMemo:ax,useReducer:Cf,useRef:ah,useState:function(){return Cf(qs)},useDebugValue:Ag,useDeferredValue:function(l,d){var m=An();return bt===null?xo(m,l,d):lh(m,bt.memoizedState,l,d)},useTransition:function(){var l=Cf(qs)[0],d=An().memoizedState;return[typeof l=="boolean"?l:Vc(l),d]},useSyncExternalStore:fg,useId:rx,useHostTransitionStatus:jf,useFormState:ql,useActionState:ql,useOptimistic:function(l,d){var m=An();return bt!==null?bg(m,bt,l,d):(m.baseState=l,[l,m.queue.dispatch])},useMemoCache:Wc,useCacheRefresh:kf};lx.useEffectEvent=Sg;function tc(l,d,m,p){d=l.memoizedState,m=m(p,d),m=m==null?d:g({},d,m),l.memoizedState=m,l.lanes===0&&(l.updateQueue.baseState=m)}var Df={enqueueSetState:function(l,d,m){l=l._reactInternals;var p=Zr(),N=Wi(p);N.payload=d,m!=null&&(N.callback=m),d=fi(l,N,p),d!==null&&(or(d,l,p),ba(d,l,p))},enqueueReplaceState:function(l,d,m){l=l._reactInternals;var p=Zr(),N=Wi(p);N.tag=1,N.payload=d,m!=null&&(N.callback=m),d=fi(l,N,p),d!==null&&(or(d,l,p),ba(d,l,p))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var m=Zr(),p=Wi(m);p.tag=2,d!=null&&(p.callback=d),d=fi(l,p,m),d!==null&&(or(d,l,m),ba(d,l,m))}};function uu(l,d,m,p,N,_,z){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(p,_,z):d.prototype&&d.prototype.isPureReactComponent?!Ma(m,p)||!Ma(N,_):!0}function fh(l,d,m,p){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(m,p),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(m,p),d.state!==l&&Df.enqueueReplaceState(d,d.state,null)}function Gr(l,d){var m=d;if("ref"in d){m={};for(var p in d)p!=="ref"&&(m[p]=d[p])}if(l=l.defaultProps){m===d&&(m=g({},m));for(var N in l)m[N]===void 0&&(m[N]=l[N])}return m}function Tg(l){Xe(l)}function nc(l){console.error(l)}function _g(l){Xe(l)}function mh(l,d){try{var m=l.onUncaughtError;m(d.value,{componentStack:d.stack})}catch(p){setTimeout(function(){throw p})}}function Zc(l,d,m){try{var p=l.onCaughtError;p(m.value,{componentStack:m.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function Mf(l,d,m){return m=Wi(m),m.tag=3,m.payload={element:null},m.callback=function(){mh(l,d)},m}function gh(l){return l=Wi(l),l.tag=3,l}function Pf(l,d,m,p){var N=m.type.getDerivedStateFromError;if(typeof N=="function"){var _=p.value;l.payload=function(){return N(_)},l.callback=function(){Zc(d,m,p)}}var z=m.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(l.callback=function(){Zc(d,m,p),typeof N!="function"&&(bu===null?bu=new Set([this]):bu.add(this));var Z=p.stack;this.componentDidCatch(p.value,{componentStack:Z!==null?Z:""})})}function ph(l,d,m,p,N){if(m.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(d=m.alternate,d!==null&&Ks(d,m,N,!0),m=oe.current,m!==null){switch(m.tag){case 31:case 13:return te===null?vx():m.alternate===null&&Hs===0&&(Hs=3),m.flags&=-257,m.flags|=65536,m.lanes=N,p===po?m.flags|=16384:(d=m.updateQueue,d===null?m.updateQueue=new Set([p]):d.add(p),Ov(l,p,N)),!1;case 22:return m.flags|=65536,p===po?m.flags|=16384:(d=m.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([p])},m.updateQueue=d):(m=d.retryQueue,m===null?d.retryQueue=new Set([p]):m.add(p)),Ov(l,p,N)),!1}throw Error(s(435,m.tag))}return Ov(l,p,N),vx(),!1}if(Ft)return d=oe.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=N,p!==Vl&&(l=Error(s(422),{cause:p}),Or(di(l,m)))):(p!==Vl&&(d=Error(s(423),{cause:p}),Or(di(d,m))),l=l.current.alternate,l.flags|=65536,N&=-N,l.lanes|=N,p=di(p,m),N=Mf(l.stateNode,p,N),Gi(l,N),Hs!==4&&(Hs=2)),!1;var _=Error(s(520),{cause:p});if(_=di(_,m),Bg===null?Bg=[_]:Bg.push(_),Hs!==4&&(Hs=2),d===null)return!0;p=di(p,m),m=d;do{switch(m.tag){case 3:return m.flags|=65536,l=N&-N,m.lanes|=l,l=Mf(m.stateNode,p,l),Gi(m,l),!1;case 1:if(d=m.type,_=m.stateNode,(m.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(bu===null||!bu.has(_))))return m.flags|=65536,N&=-N,m.lanes|=N,N=gh(N),Pf(N,l,m,p),Gi(m,N),!1}m=m.return}while(m!==null);return!1}var jg=Error(s(461)),Bs=!1;function mi(l,d,m,p){d.child=l===null?qd(d,null,m,p):Mi(d,l.child,m,p)}function hu(l,d,m,p,N){m=m.render;var _=d.ref;if("ref"in p){var z={};for(var Z in p)Z!=="ref"&&(z[Z]=p[Z])}else z=p;return ta(d),p=ya(l,d,m,z,_,N),Z=sl(),l!==null&&!Bs?(Ur(l,d,N),va(l,d,N)):(Ft&&Z&&zc(d),d.flags|=1,mi(l,d,p,N),d.child)}function fu(l,d,m,p,N){if(l===null){var _=m.type;return typeof _=="function"&&!qt(_)&&_.defaultProps===void 0&&m.compare===null?(d.tag=15,d.type=_,mu(l,d,_,p,N)):(l=Qn(m.type,null,p,d,d.mode,N),l.ref=d.ref,l.return=d,d.child=l)}if(_=l.child,!Ha(l,N)){var z=_.memoizedProps;if(m=m.compare,m=m!==null?m:Ma,m(z,p)&&l.ref===d.ref)return va(l,d,N)}return d.flags|=1,l=cs(_,p),l.ref=d.ref,l.return=d,d.child=l}function mu(l,d,m,p,N){if(l!==null){var _=l.memoizedProps;if(Ma(_,p)&&l.ref===d.ref)if(Bs=!1,d.pendingProps=p=_,Ha(l,N))(l.flags&131072)!==0&&(Bs=!0);else return d.lanes=l.lanes,va(l,d,N)}return bh(l,d,m,p,N)}function xh(l,d,m,p){var N=p.children,_=l!==null?l.memoizedState:null;if(l===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((d.flags&128)!==0){if(_=_!==null?_.baseLanes|m:m,l!==null){for(p=d.child=l.child,N=0;p!==null;)N=N|p.lanes|p.childLanes,p=p.sibling;p=N&~_}else p=0,d.child=null;return cx(l,d,_,m,p)}if((m&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&Kl(d,_!==null?_.cachePool:null),_!==null?F(d,_):X(),Ne(d);else return p=d.lanes=536870912,cx(l,d,_!==null?_.baseLanes|m:m,m,p)}else _!==null?(Kl(d,_.cachePool),F(d,_),We(),d.memoizedState=null):(l!==null&&Kl(d,null),X(),We());return mi(l,d,N,m),d.child}function Yr(l,d){return l!==null&&l.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function cx(l,d,m,p,N){var _=Xl();return _=_===null?null:{parent:Gn._currentValue,pool:_},d.memoizedState={baseLanes:m,cachePool:_},l!==null&&Kl(d,null),X(),Ne(d),l!==null&&Ks(l,d,p,!0),d.childLanes=N,null}function $s(l,d){return d=Sh({mode:d.mode,children:d.children},l.mode),d.ref=l.ref,l.child=d,d.return=l,d}function gi(l,d,m){return Mi(d,l.child,null,m),l=$s(d,d.pendingProps),l.flags|=2,Ye(d),d.memoizedState=null,l}function dx(l,d,m){var p=d.pendingProps,N=(d.flags&128)!==0;if(d.flags&=-129,l===null){if(Ft){if(p.mode==="hidden")return l=$s(d,p),d.lanes=536870912,Yr(null,l);if(be(d),(l=On)?(l=OA(l,zs),l=l!==null&&l.data==="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:ji!==null?{id:Tn,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},m=ci(l),m.return=d,d.child=m,us=d,On=null)):l=null,l===null)throw ki(d);return d.lanes=536870912,null}return $s(d,p)}var _=l.memoizedState;if(_!==null){var z=_.dehydrated;if(be(d),N)if(d.flags&256)d.flags&=-257,d=gi(l,d,m);else if(d.memoizedState!==null)d.child=l.child,d.flags|=128,d=null;else throw Error(s(558));else if(Bs||Ks(l,d,m,!1),N=(m&l.childLanes)!==0,Bs||N){if(p=qn,p!==null&&(z=wn(p,m),z!==0&&z!==_.retryLane))throw _.retryLane=z,pn(l,z),or(p,l,z),jg;vx(),d=gi(l,d,m)}else l=_.treeContext,On=bo(z.nextSibling),us=d,Ft=!0,Xs=null,zs=!1,l!==null&&Xd(d,l),d=$s(d,p),d.flags|=4096;return d}return l=cs(l.child,{mode:p.mode,children:p.children}),l.ref=d.ref,d.child=l,l.return=d,l}function rl(l,d){var m=d.ref;if(m===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(s(284));(l===null||l.ref!==m)&&(d.flags|=4194816)}}function bh(l,d,m,p,N){return ta(d),m=ya(l,d,m,p,void 0,N),p=sl(),l!==null&&!Bs?(Ur(l,d,N),va(l,d,N)):(Ft&&p&&zc(d),d.flags|=1,mi(l,d,m,N),d.child)}function sc(l,d,m,p,N,_){return ta(d),d.updateQueue=null,m=aa(d,p,m,N),Is(l),p=sl(),l!==null&&!Bs?(Ur(l,d,_),va(l,d,_)):(Ft&&p&&zc(d),d.flags|=1,mi(l,d,m,_),d.child)}function Of(l,d,m,p,N){if(ta(d),d.stateNode===null){var _=Jt,z=m.contextType;typeof z=="object"&&z!==null&&(_=Nn(z)),_=new m(p,_),d.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Df,d.stateNode=_,_._reactInternals=d,_=d.stateNode,_.props=p,_.state=d.memoizedState,_.refs={},Ba(d),z=m.contextType,_.context=typeof z=="object"&&z!==null?Nn(z):Jt,_.state=d.memoizedState,z=m.getDerivedStateFromProps,typeof z=="function"&&(tc(d,m,z,p),_.state=d.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(z=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),z!==_.state&&Df.enqueueReplaceState(_,_.state,null),tr(d,p,_,N),nl(),_.state=d.memoizedState),typeof _.componentDidMount=="function"&&(d.flags|=4194308),p=!0}else if(l===null){_=d.stateNode;var Z=d.memoizedProps,se=Gr(m,Z);_.props=se;var pe=_.context,Re=m.contextType;z=Jt,typeof Re=="object"&&Re!==null&&(z=Nn(Re));var Le=m.getDerivedStateFromProps;Re=typeof Le=="function"||typeof _.getSnapshotBeforeUpdate=="function",Z=d.pendingProps!==Z,Re||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(Z||pe!==z)&&fh(d,_,p,z),er=!1;var ye=d.memoizedState;_.state=ye,tr(d,p,_,N),nl(),pe=d.memoizedState,Z||ye!==pe||er?(typeof Le=="function"&&(tc(d,m,Le,p),pe=d.memoizedState),(se=er||uu(d,m,se,p,ye,pe,z))?(Re||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(d.flags|=4194308)):(typeof _.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=p,d.memoizedState=pe),_.props=p,_.state=pe,_.context=z,p=se):(typeof _.componentDidMount=="function"&&(d.flags|=4194308),p=!1)}else{_=d.stateNode,tl(l,d),z=d.memoizedProps,Re=Gr(m,z),_.props=Re,Le=d.pendingProps,ye=_.context,pe=m.contextType,se=Jt,typeof pe=="object"&&pe!==null&&(se=Nn(pe)),Z=m.getDerivedStateFromProps,(pe=typeof Z=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(z!==Le||ye!==se)&&fh(d,_,p,se),er=!1,ye=d.memoizedState,_.state=ye,tr(d,p,_,N),nl();var Ee=d.memoizedState;z!==Le||ye!==Ee||er||l!==null&&l.dependencies!==null&&Fa(l.dependencies)?(typeof Z=="function"&&(tc(d,m,Z,p),Ee=d.memoizedState),(Re=er||uu(d,m,Re,p,ye,Ee,se)||l!==null&&l.dependencies!==null&&Fa(l.dependencies))?(pe||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(p,Ee,se),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(p,Ee,se)),typeof _.componentDidUpdate=="function"&&(d.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof _.componentDidUpdate!="function"||z===l.memoizedProps&&ye===l.memoizedState||(d.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||z===l.memoizedProps&&ye===l.memoizedState||(d.flags|=1024),d.memoizedProps=p,d.memoizedState=Ee),_.props=p,_.state=Ee,_.context=se,p=Re):(typeof _.componentDidUpdate!="function"||z===l.memoizedProps&&ye===l.memoizedState||(d.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||z===l.memoizedProps&&ye===l.memoizedState||(d.flags|=1024),p=!1)}return _=p,rl(l,d),p=(d.flags&128)!==0,_||p?(_=d.stateNode,m=p&&typeof m.getDerivedStateFromError!="function"?null:_.render(),d.flags|=1,l!==null&&p?(d.child=Mi(d,l.child,null,N),d.child=Mi(d,null,m,N)):mi(l,d,m,N),d.memoizedState=_.state,l=d.child):l=va(l,d,N),l}function kg(l,d,m,p){return ga(),d.flags|=256,mi(l,d,m,p),d.child}var ol={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yh(l){return{baseLanes:l,cachePool:rs()}}function vh(l,d,m){return l=l!==null?l.childLanes&~m:0,d&&(l|=Kr),l}function Rg(l,d,m){var p=d.pendingProps,N=!1,_=(d.flags&128)!==0,z;if((z=_)||(z=l!==null&&l.memoizedState===null?!1:(xt.current&2)!==0),z&&(N=!0,d.flags&=-129),z=(d.flags&32)!==0,d.flags&=-33,l===null){if(Ft){if(N?de(d):We(),(l=On)?(l=OA(l,zs),l=l!==null&&l.data!=="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:ji!==null?{id:Tn,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},m=ci(l),m.return=d,d.child=m,us=d,On=null)):l=null,l===null)throw ki(d);return Qv(l)?d.lanes=32:d.lanes=536870912,null}var Z=p.children;return p=p.fallback,N?(We(),N=d.mode,Z=Sh({mode:"hidden",children:Z},N),p=In(p,N,m,null),Z.return=d,p.return=d,Z.sibling=p,d.child=Z,p=d.child,p.memoizedState=yh(m),p.childLanes=vh(l,z,m),d.memoizedState=ol,Yr(null,p)):(de(d),wh(d,Z))}var se=l.memoizedState;if(se!==null&&(Z=se.dehydrated,Z!==null)){if(_)d.flags&256?(de(d),d.flags&=-257,d=Nh(l,d,m)):d.memoizedState!==null?(We(),d.child=l.child,d.flags|=128,d=null):(We(),Z=p.fallback,N=d.mode,p=Sh({mode:"visible",children:p.children},N),Z=In(Z,N,m,null),Z.flags|=2,p.return=d,Z.return=d,p.sibling=Z,d.child=p,Mi(d,l.child,null,m),p=d.child,p.memoizedState=yh(m),p.childLanes=vh(l,z,m),d.memoizedState=ol,d=Yr(null,p));else if(de(d),Qv(Z)){if(z=Z.nextSibling&&Z.nextSibling.dataset,z)var pe=z.dgst;z=pe,p=Error(s(419)),p.stack="",p.digest=z,Or({value:p,source:null,stack:null}),d=Nh(l,d,m)}else if(Bs||Ks(l,d,m,!1),z=(m&l.childLanes)!==0,Bs||z){if(z=qn,z!==null&&(p=wn(z,m),p!==0&&p!==se.retryLane))throw se.retryLane=p,pn(l,p),or(z,l,p),jg;Jv(Z)||vx(),d=Nh(l,d,m)}else Jv(Z)?(d.flags|=192,d.child=l.child,d=null):(l=se.treeContext,On=bo(Z.nextSibling),us=d,Ft=!0,Xs=null,zs=!1,l!==null&&Xd(d,l),d=wh(d,p.children),d.flags|=4096);return d}return N?(We(),Z=p.fallback,N=d.mode,se=l.child,pe=se.sibling,p=cs(se,{mode:"hidden",children:p.children}),p.subtreeFlags=se.subtreeFlags&65011712,pe!==null?Z=cs(pe,Z):(Z=In(Z,N,m,null),Z.flags|=2),Z.return=d,p.return=d,p.sibling=Z,d.child=p,Yr(null,p),p=d.child,Z=l.child.memoizedState,Z===null?Z=yh(m):(N=Z.cachePool,N!==null?(se=Gn._currentValue,N=N.parent!==se?{parent:se,pool:se}:N):N=rs(),Z={baseLanes:Z.baseLanes|m,cachePool:N}),p.memoizedState=Z,p.childLanes=vh(l,z,m),d.memoizedState=ol,Yr(l.child,p)):(de(d),m=l.child,l=m.sibling,m=cs(m,{mode:"visible",children:p.children}),m.return=d,m.sibling=null,l!==null&&(z=d.deletions,z===null?(d.deletions=[l],d.flags|=16):z.push(l)),d.child=m,d.memoizedState=null,m)}function wh(l,d){return d=Sh({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function Sh(l,d){return l=Mn(22,l,null,d),l.lanes=0,l}function Nh(l,d,m){return Mi(d,l.child,null,m),l=wh(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function Dg(l,d,m){l.lanes|=d;var p=l.alternate;p!==null&&(p.lanes|=d),$a(l.return,d,m)}function Ah(l,d,m,p,N,_){var z=l.memoizedState;z===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:p,tail:m,tailMode:N,treeForkCount:_}:(z.isBackwards=d,z.rendering=null,z.renderingStartTime=0,z.last=p,z.tail=m,z.tailMode=N,z.treeForkCount=_)}function Mg(l,d,m){var p=d.pendingProps,N=p.revealOrder,_=p.tail;p=p.children;var z=xt.current,Z=(z&2)!==0;if(Z?(z=z&1|2,d.flags|=128):z&=1,Se(xt,z),mi(l,d,p,m),p=Ft?_i:0,!Z&&l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Dg(l,m,d);else if(l.tag===19)Dg(l,m,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(N){case"forwards":for(m=d.child,N=null;m!==null;)l=m.alternate,l!==null&&Pt(l)===null&&(N=m),m=m.sibling;m=N,m===null?(N=d.child,d.child=null):(N=m.sibling,m.sibling=null),Ah(d,!1,N,m,_,p);break;case"backwards":case"unstable_legacy-backwards":for(m=null,N=d.child,d.child=null;N!==null;){if(l=N.alternate,l!==null&&Pt(l)===null){d.child=N;break}l=N.sibling,N.sibling=m,m=N,N=l}Ah(d,!0,m,null,_,p);break;case"together":Ah(d,!1,null,null,void 0,p);break;default:d.memoizedState=null}return d.child}function va(l,d,m){if(l!==null&&(d.dependencies=l.dependencies),xu|=d.lanes,(m&d.childLanes)===0)if(l!==null){if(Ks(l,d,m,!1),(m&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(s(153));if(d.child!==null){for(l=d.child,m=cs(l,l.pendingProps),d.child=m,m.return=d;l.sibling!==null;)l=l.sibling,m=m.sibling=cs(l,l.pendingProps),m.return=d;m.sibling=null}return d.child}function Ha(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&Fa(l)))}function ux(l,d,m){switch(d.tag){case 3:Nt(d,d.stateNode.containerInfo),Ri(d,Gn,l.memoizedState.cache),ga();break;case 27:case 5:mt(d);break;case 4:Nt(d,d.stateNode.containerInfo);break;case 10:Ri(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,be(d),null;break;case 13:var p=d.memoizedState;if(p!==null)return p.dehydrated!==null?(de(d),d.flags|=128,null):(m&d.child.childLanes)!==0?Rg(l,d,m):(de(d),l=va(l,d,m),l!==null?l.sibling:null);de(d);break;case 19:var N=(l.flags&128)!==0;if(p=(m&d.childLanes)!==0,p||(Ks(l,d,m,!1),p=(m&d.childLanes)!==0),N){if(p)return Mg(l,d,m);d.flags|=128}if(N=d.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),Se(xt,xt.current),p)break;return null;case 22:return d.lanes=0,xh(l,d,m,d.pendingProps);case 24:Ri(d,Gn,l.memoizedState.cache)}return va(l,d,m)}function kN(l,d,m){if(l!==null)if(l.memoizedProps!==d.pendingProps)Bs=!0;else{if(!Ha(l,m)&&(d.flags&128)===0)return Bs=!1,ux(l,d,m);Bs=(l.flags&131072)!==0}else Bs=!1,Ft&&(d.flags&1048576)!==0&&Gd(d,_i,d.index);switch(d.lanes=0,d.tag){case 16:e:{var p=d.pendingProps;if(l=za(d.elementType),d.type=l,typeof l=="function")qt(l)?(p=Gr(l,p),d.tag=1,d=Of(null,d,l,p,m)):(d.tag=0,d=bh(null,d,l,p,m));else{if(l!=null){var N=l.$$typeof;if(N===L){d.tag=11,d=hu(null,d,l,p,m);break e}else if(N===V){d.tag=14,d=fu(null,d,l,p,m);break e}}throw d=xe(l)||l,Error(s(306,d,""))}}return d;case 0:return bh(l,d,d.type,d.pendingProps,m);case 1:return p=d.type,N=Gr(p,d.pendingProps),Of(l,d,p,N,m);case 3:e:{if(Nt(d,d.stateNode.containerInfo),l===null)throw Error(s(387));p=d.pendingProps;var _=d.memoizedState;N=_.element,tl(l,d),tr(d,p,null,m);var z=d.memoizedState;if(p=z.cache,Ri(d,Gn,p),p!==_.cache&&Wl(d,[Gn],m,!0),nl(),p=z.element,_.isDehydrated)if(_={element:p,isDehydrated:!1,cache:z.cache},d.updateQueue.baseState=_,d.memoizedState=_,d.flags&256){d=kg(l,d,p,m);break e}else if(p!==N){N=di(Error(s(424)),d),Or(N),d=kg(l,d,p,m);break e}else for(l=d.stateNode.containerInfo,l.nodeType===9?l=l.body:l=l.nodeName==="HTML"?l.ownerDocument.body:l,On=bo(l.firstChild),us=d,Ft=!0,Xs=null,zs=!0,m=qd(d,null,p,m),d.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(ga(),p===N){d=va(l,d,m);break e}mi(l,d,p,m)}d=d.child}return d;case 26:return rl(l,d),l===null?(m=HA(d.type,null,d.pendingProps,null))?d.memoizedState=m:Ft||(m=d.type,l=d.pendingProps,p=Tx(Pe.current).createElement(m),p[Os]=d,p[Si]=l,ra(p,m,l),Ts(p),d.stateNode=p):d.memoizedState=HA(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return mt(d),l===null&&Ft&&(p=d.stateNode=zA(d.type,d.pendingProps,Pe.current),us=d,zs=!0,N=On,Su(d.type)?(qv=N,On=bo(p.firstChild)):On=N),mi(l,d,d.pendingProps.children,m),rl(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&Ft&&((N=p=On)&&(p=oO(p,d.type,d.pendingProps,zs),p!==null?(d.stateNode=p,us=d,On=bo(p.firstChild),zs=!1,N=!0):N=!1),N||ki(d)),mt(d),N=d.type,_=d.pendingProps,z=l!==null?l.memoizedProps:null,p=_.children,Xv(N,_)?p=null:z!==null&&Xv(N,z)&&(d.flags|=32),d.memoizedState!==null&&(N=ya(l,d,Uc,null,null,m),Kg._currentValue=N),rl(l,d),mi(l,d,p,m),d.child;case 6:return l===null&&Ft&&((l=m=On)&&(m=lO(m,d.pendingProps,zs),m!==null?(d.stateNode=m,us=d,On=null,l=!0):l=!1),l||ki(d)),null;case 13:return Rg(l,d,m);case 4:return Nt(d,d.stateNode.containerInfo),p=d.pendingProps,l===null?d.child=Mi(d,null,p,m):mi(l,d,p,m),d.child;case 11:return hu(l,d,d.type,d.pendingProps,m);case 7:return mi(l,d,d.pendingProps,m),d.child;case 8:return mi(l,d,d.pendingProps.children,m),d.child;case 12:return mi(l,d,d.pendingProps.children,m),d.child;case 10:return p=d.pendingProps,Ri(d,d.type,p.value),mi(l,d,p.children,m),d.child;case 9:return N=d.type._context,p=d.pendingProps.children,ta(d),N=Nn(N),p=p(N),d.flags|=1,mi(l,d,p,m),d.child;case 14:return fu(l,d,d.type,d.pendingProps,m);case 15:return mu(l,d,d.type,d.pendingProps,m);case 19:return Mg(l,d,m);case 31:return dx(l,d,m);case 22:return xh(l,d,m,d.pendingProps);case 24:return ta(d),p=Nn(Gn),l===null?(N=Xl(),N===null&&(N=qn,_=Zd(),N.pooledCache=_,_.refCount++,_!==null&&(N.pooledCacheLanes|=m),N=_),d.memoizedState={parent:p,cache:N},Ba(d),Ri(d,Gn,N)):((l.lanes&m)!==0&&(tl(l,d),tr(d,null,null,m),nl()),N=l.memoizedState,_=d.memoizedState,N.parent!==p?(N={parent:p,cache:p},d.memoizedState=N,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=N),Ri(d,Gn,p)):(p=_.cache,Ri(d,Gn,p),p!==N.cache&&Wl(d,[Gn],m,!0))),mi(l,d,d.pendingProps.children,m),d.child;case 29:throw d.pendingProps}throw Error(s(156,d.tag))}function Jc(l){l.flags|=4}function vv(l,d,m,p,N){if((d=(l.mode&32)!==0)&&(d=!1),d){if(l.flags|=16777216,(N&335544128)===N)if(l.stateNode.complete)l.flags|=8192;else if(sA())l.flags|=8192;else throw Di=po,go}else l.flags&=-16777217}function RN(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!YA(d))if(sA())l.flags|=8192;else throw Di=po,go}function hx(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?Ut():536870912,l.lanes|=d,If|=d)}function Pg(l,d){if(!Ft)switch(l.tailMode){case"hidden":d=l.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l.tail=null:m.sibling=null;break;case"collapsed":m=l.tail;for(var p=null;m!==null;)m.alternate!==null&&(p=m),m=m.sibling;p===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:p.sibling=null}}function hs(l){var d=l.alternate!==null&&l.alternate.child===l.child,m=0,p=0;if(d)for(var N=l.child;N!==null;)m|=N.lanes|N.childLanes,p|=N.subtreeFlags&65011712,p|=N.flags&65011712,N.return=l,N=N.sibling;else for(N=l.child;N!==null;)m|=N.lanes|N.childLanes,p|=N.subtreeFlags,p|=N.flags,N.return=l,N=N.sibling;return l.subtreeFlags|=p,l.childLanes=m,d}function DP(l,d,m){var p=d.pendingProps;switch(Yd(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hs(d),null;case 1:return hs(d),null;case 3:return m=d.stateNode,p=null,l!==null&&(p=l.memoizedState.cache),d.memoizedState.cache!==p&&(d.flags|=2048),Ui(Gn),ht(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(l===null||l.child===null)&&(qa(d)?Jc(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,mo())),hs(d),null;case 26:var N=d.type,_=d.memoizedState;return l===null?(Jc(d),_!==null?(hs(d),RN(d,_)):(hs(d),vv(d,N,null,p,m))):_?_!==l.memoizedState?(Jc(d),hs(d),RN(d,_)):(hs(d),d.flags&=-16777217):(l=l.memoizedProps,l!==p&&Jc(d),hs(d),vv(d,N,l,p,m)),null;case 27:if(Qe(d),m=Pe.current,N=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==p&&Jc(d);else{if(!p){if(d.stateNode===null)throw Error(s(166));return hs(d),null}l=fe.current,qa(d)?Kd(d):(l=zA(N,p,m),d.stateNode=l,Jc(d))}return hs(d),null;case 5:if(Qe(d),N=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==p&&Jc(d);else{if(!p){if(d.stateNode===null)throw Error(s(166));return hs(d),null}if(_=fe.current,qa(d))Kd(d);else{var z=Tx(Pe.current);switch(_){case 1:_=z.createElementNS("http://www.w3.org/2000/svg",N);break;case 2:_=z.createElementNS("http://www.w3.org/1998/Math/MathML",N);break;default:switch(N){case"svg":_=z.createElementNS("http://www.w3.org/2000/svg",N);break;case"math":_=z.createElementNS("http://www.w3.org/1998/Math/MathML",N);break;case"script":_=z.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof p.is=="string"?z.createElement("select",{is:p.is}):z.createElement("select"),p.multiple?_.multiple=!0:p.size&&(_.size=p.size);break;default:_=typeof p.is=="string"?z.createElement(N,{is:p.is}):z.createElement(N)}}_[Os]=d,_[Si]=p;e:for(z=d.child;z!==null;){if(z.tag===5||z.tag===6)_.appendChild(z.stateNode);else if(z.tag!==4&&z.tag!==27&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===d)break e;for(;z.sibling===null;){if(z.return===null||z.return===d)break e;z=z.return}z.sibling.return=z.return,z=z.sibling}d.stateNode=_;e:switch(ra(_,N,p),N){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&Jc(d)}}return hs(d),vv(d,d.type,l===null?null:l.memoizedProps,d.pendingProps,m),null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==p&&Jc(d);else{if(typeof p!="string"&&d.stateNode===null)throw Error(s(166));if(l=Pe.current,qa(d)){if(l=d.stateNode,m=d.memoizedProps,p=null,N=us,N!==null)switch(N.tag){case 27:case 5:p=N.memoizedProps}l[Os]=d,l=!!(l.nodeValue===m||p!==null&&p.suppressHydrationWarning===!0||TA(l.nodeValue,m)),l||ki(d,!0)}else l=Tx(l).createTextNode(p),l[Os]=d,d.stateNode=l}return hs(d),null;case 31:if(m=d.memoizedState,l===null||l.memoizedState!==null){if(p=qa(d),m!==null){if(l===null){if(!p)throw Error(s(318));if(l=d.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(557));l[Os]=d}else ga(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;hs(d),l=!1}else m=mo(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=m),l=!0;if(!l)return d.flags&256?(Ye(d),d):(Ye(d),null);if((d.flags&128)!==0)throw Error(s(558))}return hs(d),null;case 13:if(p=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(N=qa(d),p!==null&&p.dehydrated!==null){if(l===null){if(!N)throw Error(s(318));if(N=d.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(s(317));N[Os]=d}else ga(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;hs(d),N=!1}else N=mo(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=N),N=!0;if(!N)return d.flags&256?(Ye(d),d):(Ye(d),null)}return Ye(d),(d.flags&128)!==0?(d.lanes=m,d):(m=p!==null,l=l!==null&&l.memoizedState!==null,m&&(p=d.child,N=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(N=p.alternate.memoizedState.cachePool.pool),_=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(_=p.memoizedState.cachePool.pool),_!==N&&(p.flags|=2048)),m!==l&&m&&(d.child.flags|=8192),hx(d,d.updateQueue),hs(d),null);case 4:return ht(),l===null&&Uv(d.stateNode.containerInfo),hs(d),null;case 10:return Ui(d.type),hs(d),null;case 19:if(ue(xt),p=d.memoizedState,p===null)return hs(d),null;if(N=(d.flags&128)!==0,_=p.rendering,_===null)if(N)Pg(p,!1);else{if(Hs!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(_=Pt(l),_!==null){for(d.flags|=128,Pg(p,!1),l=_.updateQueue,d.updateQueue=l,hx(d,l),d.subtreeFlags=0,l=m,m=d.child;m!==null;)xn(m,l),m=m.sibling;return Se(xt,xt.current&1|2),Ft&&$i(d,p.treeForkCount),d.child}l=l.sibling}p.tail!==null&&nt()>xx&&(d.flags|=128,N=!0,Pg(p,!1),d.lanes=4194304)}else{if(!N)if(l=Pt(_),l!==null){if(d.flags|=128,N=!0,l=l.updateQueue,d.updateQueue=l,hx(d,l),Pg(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!Ft)return hs(d),null}else 2*nt()-p.renderingStartTime>xx&&m!==536870912&&(d.flags|=128,N=!0,Pg(p,!1),d.lanes=4194304);p.isBackwards?(_.sibling=d.child,d.child=_):(l=p.last,l!==null?l.sibling=_:d.child=_,p.last=_)}return p.tail!==null?(l=p.tail,p.rendering=l,p.tail=l.sibling,p.renderingStartTime=nt(),l.sibling=null,m=xt.current,Se(xt,N?m&1|2:m&1),Ft&&$i(d,p.treeForkCount),l):(hs(d),null);case 22:case 23:return Ye(d),Q(),p=d.memoizedState!==null,l!==null?l.memoizedState!==null!==p&&(d.flags|=8192):p&&(d.flags|=8192),p?(m&536870912)!==0&&(d.flags&128)===0&&(hs(d),d.subtreeFlags&6&&(d.flags|=8192)):hs(d),m=d.updateQueue,m!==null&&hx(d,m.retryQueue),m=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),p=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(p=d.memoizedState.cachePool.pool),p!==m&&(d.flags|=2048),l!==null&&ue(zr),null;case 24:return m=null,l!==null&&(m=l.memoizedState.cache),d.memoizedState.cache!==m&&(d.flags|=2048),Ui(Gn),hs(d),null;case 25:return null;case 30:return null}throw Error(s(156,d.tag))}function MP(l,d){switch(Yd(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return Ui(Gn),ht(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return Qe(d),null;case 31:if(d.memoizedState!==null){if(Ye(d),d.alternate===null)throw Error(s(340));ga()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 13:if(Ye(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(s(340));ga()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return ue(xt),null;case 4:return ht(),null;case 10:return Ui(d.type),null;case 22:case 23:return Ye(d),Q(),l!==null&&ue(zr),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return Ui(Gn),null;case 25:return null;default:return null}}function DN(l,d){switch(Yd(d),d.tag){case 3:Ui(Gn),ht();break;case 26:case 27:case 5:Qe(d);break;case 4:ht();break;case 31:d.memoizedState!==null&&Ye(d);break;case 13:Ye(d);break;case 19:ue(xt);break;case 10:Ui(d.type);break;case 22:case 23:Ye(d),Q(),l!==null&&ue(zr);break;case 24:Ui(Gn)}}function Og(l,d){try{var m=d.updateQueue,p=m!==null?m.lastEffect:null;if(p!==null){var N=p.next;m=N;do{if((m.tag&l)===l){p=void 0;var _=m.create,z=m.inst;p=_(),z.destroy=p}m=m.next}while(m!==N)}}catch(Z){Hn(d,d.return,Z)}}function gu(l,d,m){try{var p=d.updateQueue,N=p!==null?p.lastEffect:null;if(N!==null){var _=N.next;p=_;do{if((p.tag&l)===l){var z=p.inst,Z=z.destroy;if(Z!==void 0){z.destroy=void 0,N=d;var se=m,pe=Z;try{pe()}catch(Re){Hn(N,se,Re)}}}p=p.next}while(p!==_)}}catch(Re){Hn(d,d.return,Re)}}function MN(l){var d=l.updateQueue;if(d!==null){var m=l.stateNode;try{v(d,m)}catch(p){Hn(l,l.return,p)}}}function PN(l,d,m){m.props=Gr(l.type,l.memoizedProps),m.state=l.memoizedState;try{m.componentWillUnmount()}catch(p){Hn(l,d,p)}}function Lg(l,d){try{var m=l.ref;if(m!==null){switch(l.tag){case 26:case 27:case 5:var p=l.stateNode;break;case 30:p=l.stateNode;break;default:p=l.stateNode}typeof m=="function"?l.refCleanup=m(p):m.current=p}}catch(N){Hn(l,d,N)}}function ic(l,d){var m=l.ref,p=l.refCleanup;if(m!==null)if(typeof p=="function")try{p()}catch(N){Hn(l,d,N)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(N){Hn(l,d,N)}else m.current=null}function ON(l){var d=l.type,m=l.memoizedProps,p=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":m.autoFocus&&p.focus();break e;case"img":m.src?p.src=m.src:m.srcSet&&(p.srcset=m.srcSet)}}catch(N){Hn(l,l.return,N)}}function wv(l,d,m){try{var p=l.stateNode;tO(p,l.type,m,d),p[Si]=d}catch(N){Hn(l,l.return,N)}}function LN(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Su(l.type)||l.tag===4}function Sv(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||LN(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Su(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Nv(l,d,m){var p=l.tag;if(p===5||p===6)l=l.stateNode,d?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(l,d):(d=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,d.appendChild(l),m=m._reactRootContainer,m!=null||d.onclick!==null||(d.onclick=Tr));else if(p!==4&&(p===27&&Su(l.type)&&(m=l.stateNode,d=null),l=l.child,l!==null))for(Nv(l,d,m),l=l.sibling;l!==null;)Nv(l,d,m),l=l.sibling}function fx(l,d,m){var p=l.tag;if(p===5||p===6)l=l.stateNode,d?m.insertBefore(l,d):m.appendChild(l);else if(p!==4&&(p===27&&Su(l.type)&&(m=l.stateNode),l=l.child,l!==null))for(fx(l,d,m),l=l.sibling;l!==null;)fx(l,d,m),l=l.sibling}function FN(l){var d=l.stateNode,m=l.memoizedProps;try{for(var p=l.type,N=d.attributes;N.length;)d.removeAttributeNode(N[0]);ra(d,p,m),d[Os]=l,d[Si]=m}catch(_){Hn(l,l.return,_)}}var Qc=!1,pi=!1,Av=!1,zN=typeof WeakSet=="function"?WeakSet:Set,Yi=null;function PP(l,d){if(l=l.containerInfo,Gv=Px,l=Vd(l),Wd(l)){if("selectionStart"in l)var m={start:l.selectionStart,end:l.selectionEnd};else e:{m=(m=l.ownerDocument)&&m.defaultView||window;var p=m.getSelection&&m.getSelection();if(p&&p.rangeCount!==0){m=p.anchorNode;var N=p.anchorOffset,_=p.focusNode;p=p.focusOffset;try{m.nodeType,_.nodeType}catch{m=null;break e}var z=0,Z=-1,se=-1,pe=0,Re=0,Le=l,ye=null;t:for(;;){for(var Ee;Le!==m||N!==0&&Le.nodeType!==3||(Z=z+N),Le!==_||p!==0&&Le.nodeType!==3||(se=z+p),Le.nodeType===3&&(z+=Le.nodeValue.length),(Ee=Le.firstChild)!==null;)ye=Le,Le=Ee;for(;;){if(Le===l)break t;if(ye===m&&++pe===N&&(Z=z),ye===_&&++Re===p&&(se=z),(Ee=Le.nextSibling)!==null)break;Le=ye,ye=Le.parentNode}Le=Ee}m=Z===-1||se===-1?null:{start:Z,end:se}}else m=null}m=m||{start:0,end:0}}else m=null;for(Yv={focusedElem:l,selectionRange:m},Px=!1,Yi=d;Yi!==null;)if(d=Yi,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,Yi=l;else for(;Yi!==null;){switch(d=Yi,_=d.alternate,l=d.flags,d.tag){case 0:if((l&4)!==0&&(l=d.updateQueue,l=l!==null?l.events:null,l!==null))for(m=0;m<l.length;m++)N=l[m],N.ref.impl=N.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&_!==null){l=void 0,m=d,N=_.memoizedProps,_=_.memoizedState,p=m.stateNode;try{var ct=Gr(m.type,N);l=p.getSnapshotBeforeUpdate(ct,_),p.__reactInternalSnapshotBeforeUpdate=l}catch(At){Hn(m,m.return,At)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,m=l.nodeType,m===9)Zv(l);else if(m===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":Zv(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(s(163))}if(l=d.sibling,l!==null){l.return=d.return,Yi=l;break}Yi=d.return}}function IN(l,d,m){var p=m.flags;switch(m.tag){case 0:case 11:case 15:$c(l,m),p&4&&Og(5,m);break;case 1:if($c(l,m),p&4)if(l=m.stateNode,d===null)try{l.componentDidMount()}catch(z){Hn(m,m.return,z)}else{var N=Gr(m.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(N,d,l.__reactInternalSnapshotBeforeUpdate)}catch(z){Hn(m,m.return,z)}}p&64&&MN(m),p&512&&Lg(m,m.return);break;case 3:if($c(l,m),p&64&&(l=m.updateQueue,l!==null)){if(d=null,m.child!==null)switch(m.child.tag){case 27:case 5:d=m.child.stateNode;break;case 1:d=m.child.stateNode}try{v(l,d)}catch(z){Hn(m,m.return,z)}}break;case 27:d===null&&p&4&&FN(m);case 26:case 5:$c(l,m),d===null&&p&4&&ON(m),p&512&&Lg(m,m.return);break;case 12:$c(l,m);break;case 31:$c(l,m),p&4&&UN(l,m);break;case 13:$c(l,m),p&4&&VN(l,m),p&64&&(l=m.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(m=VP.bind(null,m),cO(l,m))));break;case 22:if(p=m.memoizedState!==null||Qc,!p){d=d!==null&&d.memoizedState!==null||pi,N=Qc;var _=pi;Qc=p,(pi=d)&&!_?ed(l,m,(m.subtreeFlags&8772)!==0):$c(l,m),Qc=N,pi=_}break;case 30:break;default:$c(l,m)}}function BN(l){var d=l.alternate;d!==null&&(l.alternate=null,BN(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&Po(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Ss=null,sr=!1;function qc(l,d,m){for(m=m.child;m!==null;)HN(l,d,m),m=m.sibling}function HN(l,d,m){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(Ps,m)}catch{}switch(m.tag){case 26:pi||ic(m,d),qc(l,d,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:pi||ic(m,d);var p=Ss,N=sr;Su(m.type)&&(Ss=m.stateNode,sr=!1),qc(l,d,m),Gg(m.stateNode),Ss=p,sr=N;break;case 5:pi||ic(m,d);case 6:if(p=Ss,N=sr,Ss=null,qc(l,d,m),Ss=p,sr=N,Ss!==null)if(sr)try{(Ss.nodeType===9?Ss.body:Ss.nodeName==="HTML"?Ss.ownerDocument.body:Ss).removeChild(m.stateNode)}catch(_){Hn(m,d,_)}else try{Ss.removeChild(m.stateNode)}catch(_){Hn(m,d,_)}break;case 18:Ss!==null&&(sr?(l=Ss,MA(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,m.stateNode),Xf(l)):MA(Ss,m.stateNode));break;case 4:p=Ss,N=sr,Ss=m.stateNode.containerInfo,sr=!0,qc(l,d,m),Ss=p,sr=N;break;case 0:case 11:case 14:case 15:gu(2,m,d),pi||gu(4,m,d),qc(l,d,m);break;case 1:pi||(ic(m,d),p=m.stateNode,typeof p.componentWillUnmount=="function"&&PN(m,d,p)),qc(l,d,m);break;case 21:qc(l,d,m);break;case 22:pi=(p=pi)||m.memoizedState!==null,qc(l,d,m),pi=p;break;default:qc(l,d,m)}}function UN(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{Xf(l)}catch(m){Hn(d,d.return,m)}}}function VN(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Xf(l)}catch(m){Hn(d,d.return,m)}}function OP(l){switch(l.tag){case 31:case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new zN),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new zN),d;default:throw Error(s(435,l.tag))}}function mx(l,d){var m=OP(l);d.forEach(function(p){if(!m.has(p)){m.add(p);var N=WP.bind(null,l,p);p.then(N,N)}})}function ir(l,d){var m=d.deletions;if(m!==null)for(var p=0;p<m.length;p++){var N=m[p],_=l,z=d,Z=z;e:for(;Z!==null;){switch(Z.tag){case 27:if(Su(Z.type)){Ss=Z.stateNode,sr=!1;break e}break;case 5:Ss=Z.stateNode,sr=!1;break e;case 3:case 4:Ss=Z.stateNode.containerInfo,sr=!0;break e}Z=Z.return}if(Ss===null)throw Error(s(160));HN(_,z,N),Ss=null,sr=!1,_=N.alternate,_!==null&&(_.return=null),N.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)WN(d,l),d=d.sibling}var ll=null;function WN(l,d){var m=l.alternate,p=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:ir(d,l),ar(l),p&4&&(gu(3,l,l.return),Og(3,l),gu(5,l,l.return));break;case 1:ir(d,l),ar(l),p&512&&(pi||m===null||ic(m,m.return)),p&64&&Qc&&(l=l.updateQueue,l!==null&&(p=l.callbacks,p!==null&&(m=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=m===null?p:m.concat(p))));break;case 26:var N=ll;if(ir(d,l),ar(l),p&512&&(pi||m===null||ic(m,m.return)),p&4){var _=m!==null?m.memoizedState:null;if(p=l.memoizedState,m===null)if(p===null)if(l.stateNode===null){e:{p=l.type,m=l.memoizedProps,N=N.ownerDocument||N;t:switch(p){case"title":_=N.getElementsByTagName("title")[0],(!_||_[bn]||_[Os]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=N.createElement(p),N.head.insertBefore(_,N.querySelector("head > title"))),ra(_,p,m),_[Os]=l,Ts(_),p=_;break e;case"link":var z=WA("link","href",N).get(p+(m.href||""));if(z){for(var Z=0;Z<z.length;Z++)if(_=z[Z],_.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&_.getAttribute("rel")===(m.rel==null?null:m.rel)&&_.getAttribute("title")===(m.title==null?null:m.title)&&_.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){z.splice(Z,1);break t}}_=N.createElement(p),ra(_,p,m),N.head.appendChild(_);break;case"meta":if(z=WA("meta","content",N).get(p+(m.content||""))){for(Z=0;Z<z.length;Z++)if(_=z[Z],_.getAttribute("content")===(m.content==null?null:""+m.content)&&_.getAttribute("name")===(m.name==null?null:m.name)&&_.getAttribute("property")===(m.property==null?null:m.property)&&_.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&_.getAttribute("charset")===(m.charSet==null?null:m.charSet)){z.splice(Z,1);break t}}_=N.createElement(p),ra(_,p,m),N.head.appendChild(_);break;default:throw Error(s(468,p))}_[Os]=l,Ts(_),p=_}l.stateNode=p}else GA(N,l.type,l.stateNode);else l.stateNode=VA(N,p,l.memoizedProps);else _!==p?(_===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):_.count--,p===null?GA(N,l.type,l.stateNode):VA(N,p,l.memoizedProps)):p===null&&l.stateNode!==null&&wv(l,l.memoizedProps,m.memoizedProps)}break;case 27:ir(d,l),ar(l),p&512&&(pi||m===null||ic(m,m.return)),m!==null&&p&4&&wv(l,l.memoizedProps,m.memoizedProps);break;case 5:if(ir(d,l),ar(l),p&512&&(pi||m===null||ic(m,m.return)),l.flags&32){N=l.stateNode;try{kl(N,"")}catch(ct){Hn(l,l.return,ct)}}p&4&&l.stateNode!=null&&(N=l.memoizedProps,wv(l,N,m!==null?m.memoizedProps:N)),p&1024&&(Av=!0);break;case 6:if(ir(d,l),ar(l),p&4){if(l.stateNode===null)throw Error(s(162));p=l.memoizedProps,m=l.stateNode;try{m.nodeValue=p}catch(ct){Hn(l,l.return,ct)}}break;case 3:if(kx=null,N=ll,ll=_x(d.containerInfo),ir(d,l),ll=N,ar(l),p&4&&m!==null&&m.memoizedState.isDehydrated)try{Xf(d.containerInfo)}catch(ct){Hn(l,l.return,ct)}Av&&(Av=!1,GN(l));break;case 4:p=ll,ll=_x(l.stateNode.containerInfo),ir(d,l),ar(l),ll=p;break;case 12:ir(d,l),ar(l);break;case 31:ir(d,l),ar(l),p&4&&(p=l.updateQueue,p!==null&&(l.updateQueue=null,mx(l,p)));break;case 13:ir(d,l),ar(l),l.child.flags&8192&&l.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(px=nt()),p&4&&(p=l.updateQueue,p!==null&&(l.updateQueue=null,mx(l,p)));break;case 22:N=l.memoizedState!==null;var se=m!==null&&m.memoizedState!==null,pe=Qc,Re=pi;if(Qc=pe||N,pi=Re||se,ir(d,l),pi=Re,Qc=pe,ar(l),p&8192)e:for(d=l.stateNode,d._visibility=N?d._visibility&-2:d._visibility|1,N&&(m===null||se||Qc||pi||Ch(l)),m=null,d=l;;){if(d.tag===5||d.tag===26){if(m===null){se=m=d;try{if(_=se.stateNode,N)z=_.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none";else{Z=se.stateNode;var Le=se.memoizedProps.style,ye=Le!=null&&Le.hasOwnProperty("display")?Le.display:null;Z.style.display=ye==null||typeof ye=="boolean"?"":(""+ye).trim()}}catch(ct){Hn(se,se.return,ct)}}}else if(d.tag===6){if(m===null){se=d;try{se.stateNode.nodeValue=N?"":se.memoizedProps}catch(ct){Hn(se,se.return,ct)}}}else if(d.tag===18){if(m===null){se=d;try{var Ee=se.stateNode;N?PA(Ee,!0):PA(se.stateNode,!1)}catch(ct){Hn(se,se.return,ct)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;m===d&&(m=null),d=d.return}m===d&&(m=null),d.sibling.return=d.return,d=d.sibling}p&4&&(p=l.updateQueue,p!==null&&(m=p.retryQueue,m!==null&&(p.retryQueue=null,mx(l,m))));break;case 19:ir(d,l),ar(l),p&4&&(p=l.updateQueue,p!==null&&(l.updateQueue=null,mx(l,p)));break;case 30:break;case 21:break;default:ir(d,l),ar(l)}}function ar(l){var d=l.flags;if(d&2){try{for(var m,p=l.return;p!==null;){if(LN(p)){m=p;break}p=p.return}if(m==null)throw Error(s(160));switch(m.tag){case 27:var N=m.stateNode,_=Sv(l);fx(l,_,N);break;case 5:var z=m.stateNode;m.flags&32&&(kl(z,""),m.flags&=-33);var Z=Sv(l);fx(l,Z,z);break;case 3:case 4:var se=m.stateNode.containerInfo,pe=Sv(l);Nv(l,pe,se);break;default:throw Error(s(161))}}catch(Re){Hn(l,l.return,Re)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function GN(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;GN(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function $c(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)IN(l,d.alternate,d),d=d.sibling}function Ch(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:gu(4,d,d.return),Ch(d);break;case 1:ic(d,d.return);var m=d.stateNode;typeof m.componentWillUnmount=="function"&&PN(d,d.return,m),Ch(d);break;case 27:Gg(d.stateNode);case 26:case 5:ic(d,d.return),Ch(d);break;case 22:d.memoizedState===null&&Ch(d);break;case 30:Ch(d);break;default:Ch(d)}l=l.sibling}}function ed(l,d,m){for(m=m&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var p=d.alternate,N=l,_=d,z=_.flags;switch(_.tag){case 0:case 11:case 15:ed(N,_,m),Og(4,_);break;case 1:if(ed(N,_,m),p=_,N=p.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(pe){Hn(p,p.return,pe)}if(p=_,N=p.updateQueue,N!==null){var Z=p.stateNode;try{var se=N.shared.hiddenCallbacks;if(se!==null)for(N.shared.hiddenCallbacks=null,N=0;N<se.length;N++)b(se[N],Z)}catch(pe){Hn(p,p.return,pe)}}m&&z&64&&MN(_),Lg(_,_.return);break;case 27:FN(_);case 26:case 5:ed(N,_,m),m&&p===null&&z&4&&ON(_),Lg(_,_.return);break;case 12:ed(N,_,m);break;case 31:ed(N,_,m),m&&z&4&&UN(N,_);break;case 13:ed(N,_,m),m&&z&4&&VN(N,_);break;case 22:_.memoizedState===null&&ed(N,_,m),Lg(_,_.return);break;case 30:break;default:ed(N,_,m)}d=d.sibling}}function Cv(l,d){var m=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==m&&(l!=null&&l.refCount++,m!=null&&Gl(m))}function Ev(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Gl(l))}function cl(l,d,m,p){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)YN(l,d,m,p),d=d.sibling}function YN(l,d,m,p){var N=d.flags;switch(d.tag){case 0:case 11:case 15:cl(l,d,m,p),N&2048&&Og(9,d);break;case 1:cl(l,d,m,p);break;case 3:cl(l,d,m,p),N&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Gl(l)));break;case 12:if(N&2048){cl(l,d,m,p),l=d.stateNode;try{var _=d.memoizedProps,z=_.id,Z=_.onPostCommit;typeof Z=="function"&&Z(z,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(se){Hn(d,d.return,se)}}else cl(l,d,m,p);break;case 31:cl(l,d,m,p);break;case 13:cl(l,d,m,p);break;case 23:break;case 22:_=d.stateNode,z=d.alternate,d.memoizedState!==null?_._visibility&2?cl(l,d,m,p):Fg(l,d):_._visibility&2?cl(l,d,m,p):(_._visibility|=2,Lf(l,d,m,p,(d.subtreeFlags&10256)!==0||!1)),N&2048&&Cv(z,d);break;case 24:cl(l,d,m,p),N&2048&&Ev(d.alternate,d);break;default:cl(l,d,m,p)}}function Lf(l,d,m,p,N){for(N=N&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var _=l,z=d,Z=m,se=p,pe=z.flags;switch(z.tag){case 0:case 11:case 15:Lf(_,z,Z,se,N),Og(8,z);break;case 23:break;case 22:var Re=z.stateNode;z.memoizedState!==null?Re._visibility&2?Lf(_,z,Z,se,N):Fg(_,z):(Re._visibility|=2,Lf(_,z,Z,se,N)),N&&pe&2048&&Cv(z.alternate,z);break;case 24:Lf(_,z,Z,se,N),N&&pe&2048&&Ev(z.alternate,z);break;default:Lf(_,z,Z,se,N)}d=d.sibling}}function Fg(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var m=l,p=d,N=p.flags;switch(p.tag){case 22:Fg(m,p),N&2048&&Cv(p.alternate,p);break;case 24:Fg(m,p),N&2048&&Ev(p.alternate,p);break;default:Fg(m,p)}d=d.sibling}}var zg=8192;function Ff(l,d,m){if(l.subtreeFlags&zg)for(l=l.child;l!==null;)XN(l,d,m),l=l.sibling}function XN(l,d,m){switch(l.tag){case 26:Ff(l,d,m),l.flags&zg&&l.memoizedState!==null&&wO(m,ll,l.memoizedState,l.memoizedProps);break;case 5:Ff(l,d,m);break;case 3:case 4:var p=ll;ll=_x(l.stateNode.containerInfo),Ff(l,d,m),ll=p;break;case 22:l.memoizedState===null&&(p=l.alternate,p!==null&&p.memoizedState!==null?(p=zg,zg=16777216,Ff(l,d,m),zg=p):Ff(l,d,m));break;default:Ff(l,d,m)}}function KN(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function Ig(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var m=0;m<d.length;m++){var p=d[m];Yi=p,JN(p,l)}KN(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)ZN(l),l=l.sibling}function ZN(l){switch(l.tag){case 0:case 11:case 15:Ig(l),l.flags&2048&&gu(9,l,l.return);break;case 3:Ig(l);break;case 12:Ig(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,gx(l)):Ig(l);break;default:Ig(l)}}function gx(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var m=0;m<d.length;m++){var p=d[m];Yi=p,JN(p,l)}KN(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:gu(8,d,d.return),gx(d);break;case 22:m=d.stateNode,m._visibility&2&&(m._visibility&=-3,gx(d));break;default:gx(d)}l=l.sibling}}function JN(l,d){for(;Yi!==null;){var m=Yi;switch(m.tag){case 0:case 11:case 15:gu(8,m,d);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var p=m.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Gl(m.memoizedState.cache)}if(p=m.child,p!==null)p.return=m,Yi=p;else e:for(m=l;Yi!==null;){p=Yi;var N=p.sibling,_=p.return;if(BN(p),p===m){Yi=null;break e}if(N!==null){N.return=_,Yi=N;break e}Yi=_}}}var LP={getCacheForType:function(l){var d=Nn(Gn),m=d.data.get(l);return m===void 0&&(m=l(),d.data.set(l,m)),m},cacheSignal:function(){return Nn(Gn).controller.signal}},FP=typeof WeakMap=="function"?WeakMap:Map,jn=0,qn=null,tn=null,on=0,Bn=0,Xr=null,pu=!1,zf=!1,Tv=!1,td=0,Hs=0,xu=0,Eh=0,_v=0,Kr=0,If=0,Bg=null,rr=null,jv=!1,px=0,QN=0,xx=1/0,bx=null,bu=null,Pi=0,yu=null,Bf=null,nd=0,kv=0,Rv=null,qN=null,Hg=0,Dv=null;function Zr(){return(jn&2)!==0&&on!==0?on&-on:U.T!==null?zv():Bi()}function $N(){if(Kr===0)if((on&536870912)===0||Ft){var l=ie;ie<<=1,(ie&3932160)===0&&(ie=262144),Kr=l}else Kr=536870912;return l=oe.current,l!==null&&(l.flags|=32),Kr}function or(l,d,m){(l===qn&&(Bn===2||Bn===9)||l.cancelPendingCommit!==null)&&(Hf(l,0),vu(l,on,Kr,!1)),dt(l,m),((jn&2)===0||l!==qn)&&(l===qn&&((jn&2)===0&&(Eh|=m),Hs===4&&vu(l,on,Kr,!1)),ac(l))}function eA(l,d,m){if((jn&6)!==0)throw Error(s(327));var p=!m&&(d&127)===0&&(d&l.expiredLanes)===0||pt(l,d),N=p?BP(l,d):Pv(l,d,!0),_=p;do{if(N===0){zf&&!p&&vu(l,d,0,!1);break}else{if(m=l.current.alternate,_&&!zP(m)){N=Pv(l,d,!1),_=!1;continue}if(N===2){if(_=d,l.errorRecoveryDisabledLanes&_)var z=0;else z=l.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){d=z;e:{var Z=l;N=Bg;var se=Z.current.memoizedState.isDehydrated;if(se&&(Hf(Z,z).flags|=256),z=Pv(Z,z,!1),z!==2){if(Tv&&!se){Z.errorRecoveryDisabledLanes|=_,Eh|=_,N=4;break e}_=rr,rr=N,_!==null&&(rr===null?rr=_:rr.push.apply(rr,_))}N=z}if(_=!1,N!==2)continue}}if(N===1){Hf(l,0),vu(l,d,0,!0);break}e:{switch(p=l,_=N,_){case 0:case 1:throw Error(s(345));case 4:if((d&4194048)!==d)break;case 6:vu(p,d,Kr,!pu);break e;case 2:rr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((d&62914560)===d&&(N=px+300-nt(),10<N)){if(vu(p,d,Kr,!pu),Ze(p,0,!0)!==0)break e;nd=d,p.timeoutHandle=RA(tA.bind(null,p,m,rr,bx,jv,d,Kr,Eh,If,pu,_,"Throttled",-0,0),N);break e}tA(p,m,rr,bx,jv,d,Kr,Eh,If,pu,_,null,-0,0)}}break}while(!0);ac(l)}function tA(l,d,m,p,N,_,z,Z,se,pe,Re,Le,ye,Ee){if(l.timeoutHandle=-1,Le=d.subtreeFlags,Le&8192||(Le&16785408)===16785408){Le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Tr},XN(d,_,Le);var ct=(_&62914560)===_?px-nt():(_&4194048)===_?QN-nt():0;if(ct=SO(Le,ct),ct!==null){nd=_,l.cancelPendingCommit=ct(cA.bind(null,l,d,_,m,p,N,z,Z,se,Re,Le,null,ye,Ee)),vu(l,_,z,!pe);return}}cA(l,d,_,m,p,N,z,Z,se)}function zP(l){for(var d=l;;){var m=d.tag;if((m===0||m===11||m===15)&&d.flags&16384&&(m=d.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var p=0;p<m.length;p++){var N=m[p],_=N.getSnapshot;N=N.value;try{if(!Ys(_(),N))return!1}catch{return!1}}if(m=d.child,d.subtreeFlags&16384&&m!==null)m.return=d,d=m;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function vu(l,d,m,p){d&=~_v,d&=~Eh,l.suspendedLanes|=d,l.pingedLanes&=~d,p&&(l.warmLanes|=d),p=l.expirationTimes;for(var N=d;0<N;){var _=31-Fn(N),z=1<<_;p[_]=-1,N&=~z}m!==0&&wi(l,m,d)}function yx(){return(jn&6)===0?(Ug(0),!1):!0}function Mv(){if(tn!==null){if(Bn===0)var l=tn.return;else l=tn,_n=Lr=null,il(l),ia=null,$o=0,l=tn;for(;l!==null;)DN(l.alternate,l),l=l.return;tn=null}}function Hf(l,d){var m=l.timeoutHandle;m!==-1&&(l.timeoutHandle=-1,iO(m)),m=l.cancelPendingCommit,m!==null&&(l.cancelPendingCommit=null,m()),nd=0,Mv(),qn=l,tn=m=cs(l.current,null),on=d,Bn=0,Xr=null,pu=!1,zf=pt(l,d),Tv=!1,If=Kr=_v=Eh=xu=Hs=0,rr=Bg=null,jv=!1,(d&8)!==0&&(d|=d&32);var p=l.entangledLanes;if(p!==0)for(l=l.entanglements,p&=d;0<p;){var N=31-Fn(p),_=1<<N;d|=l[N],p&=~_}return td=d,Tt(),m}function nA(l,d){et=null,U.H=uh,d===Ir||d===Br?(d=Vi(),Bn=3):d===go?(d=Vi(),Bn=4):Bn=d===jg?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Xr=d,tn===null&&(Hs=1,mh(l,di(d,l.current)))}function sA(){var l=oe.current;return l===null?!0:(on&4194048)===on?te===null:(on&62914560)===on||(on&536870912)!==0?l===te:!1}function iA(){var l=U.H;return U.H=uh,l===null?uh:l}function aA(){var l=U.A;return U.A=LP,l}function vx(){Hs=4,pu||(on&4194048)!==on&&oe.current!==null||(zf=!0),(xu&134217727)===0&&(Eh&134217727)===0||qn===null||vu(qn,on,Kr,!1)}function Pv(l,d,m){var p=jn;jn|=2;var N=iA(),_=aA();(qn!==l||on!==d)&&(bx=null,Hf(l,d)),d=!1;var z=Hs;e:do try{if(Bn!==0&&tn!==null){var Z=tn,se=Xr;switch(Bn){case 8:Mv(),z=6;break e;case 3:case 2:case 9:case 6:oe.current===null&&(d=!0);var pe=Bn;if(Bn=0,Xr=null,Uf(l,Z,se,pe),m&&zf){z=0;break e}break;default:pe=Bn,Bn=0,Xr=null,Uf(l,Z,se,pe)}}IP(),z=Hs;break}catch(Re){nA(l,Re)}while(!0);return d&&l.shellSuspendCounter++,_n=Lr=null,jn=p,U.H=N,U.A=_,tn===null&&(qn=null,on=0,Tt()),z}function IP(){for(;tn!==null;)rA(tn)}function BP(l,d){var m=jn;jn|=2;var p=iA(),N=aA();qn!==l||on!==d?(bx=null,xx=nt()+500,Hf(l,d)):zf=pt(l,d);e:do try{if(Bn!==0&&tn!==null){d=tn;var _=Xr;t:switch(Bn){case 1:Bn=0,Xr=null,Uf(l,d,_,1);break;case 2:case 9:if(Hc(_)){Bn=0,Xr=null,oA(d);break}d=function(){Bn!==2&&Bn!==9||qn!==l||(Bn=7),ac(l)},_.then(d,d);break e;case 3:Bn=7;break e;case 4:Bn=5;break e;case 7:Hc(_)?(Bn=0,Xr=null,oA(d)):(Bn=0,Xr=null,Uf(l,d,_,7));break;case 5:var z=null;switch(tn.tag){case 26:z=tn.memoizedState;case 5:case 27:var Z=tn;if(z?YA(z):Z.stateNode.complete){Bn=0,Xr=null;var se=Z.sibling;if(se!==null)tn=se;else{var pe=Z.return;pe!==null?(tn=pe,wx(pe)):tn=null}break t}}Bn=0,Xr=null,Uf(l,d,_,5);break;case 6:Bn=0,Xr=null,Uf(l,d,_,6);break;case 8:Mv(),Hs=6;break e;default:throw Error(s(462))}}HP();break}catch(Re){nA(l,Re)}while(!0);return _n=Lr=null,U.H=p,U.A=N,jn=m,tn!==null?0:(qn=null,on=0,Tt(),Hs)}function HP(){for(;tn!==null&&!Fe();)rA(tn)}function rA(l){var d=kN(l.alternate,l,td);l.memoizedProps=l.pendingProps,d===null?wx(l):tn=d}function oA(l){var d=l,m=d.alternate;switch(d.tag){case 15:case 0:d=sc(m,d,d.pendingProps,d.type,void 0,on);break;case 11:d=sc(m,d,d.pendingProps,d.type.render,d.ref,on);break;case 5:il(d);default:DN(m,d),d=tn=xn(d,td),d=kN(m,d,td)}l.memoizedProps=l.pendingProps,d===null?wx(l):tn=d}function Uf(l,d,m,p){_n=Lr=null,il(d),ia=null,$o=0;var N=d.return;try{if(ph(l,N,d,m,on)){Hs=1,mh(l,di(m,l.current)),tn=null;return}}catch(_){if(N!==null)throw tn=N,_;Hs=1,mh(l,di(m,l.current)),tn=null;return}d.flags&32768?(Ft||p===1?l=!0:zf||(on&536870912)!==0?l=!1:(pu=l=!0,(p===2||p===9||p===3||p===6)&&(p=oe.current,p!==null&&p.tag===13&&(p.flags|=16384))),lA(d,l)):wx(d)}function wx(l){var d=l;do{if((d.flags&32768)!==0){lA(d,pu);return}l=d.return;var m=DP(d.alternate,d,td);if(m!==null){tn=m;return}if(d=d.sibling,d!==null){tn=d;return}tn=d=l}while(d!==null);Hs===0&&(Hs=5)}function lA(l,d){do{var m=MP(l.alternate,l);if(m!==null){m.flags&=32767,tn=m;return}if(m=l.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!d&&(l=l.sibling,l!==null)){tn=l;return}tn=l=m}while(l!==null);Hs=6,tn=null}function cA(l,d,m,p,N,_,z,Z,se){l.cancelPendingCommit=null;do Sx();while(Pi!==0);if((jn&6)!==0)throw Error(s(327));if(d!==null){if(d===l.current)throw Error(s(177));if(_=d.lanes|d.childLanes,_|=kt,ps(l,m,_,z,Z,se),l===qn&&(tn=qn=null,on=0),Bf=d,yu=l,nd=m,kv=_,Rv=N,qN=p,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,GP(an,function(){return mA(),null})):(l.callbackNode=null,l.callbackPriority=0),p=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||p){p=U.T,U.T=null,N=H.p,H.p=2,z=jn,jn|=4;try{PP(l,d,m)}finally{jn=z,H.p=N,U.T=p}}Pi=1,dA(),uA(),hA()}}function dA(){if(Pi===1){Pi=0;var l=yu,d=Bf,m=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||m){m=U.T,U.T=null;var p=H.p;H.p=2;var N=jn;jn|=4;try{WN(d,l);var _=Yv,z=Vd(l.containerInfo),Z=_.focusedElem,se=_.selectionRange;if(z!==Z&&Z&&Z.ownerDocument&&fo(Z.ownerDocument.documentElement,Z)){if(se!==null&&Wd(Z)){var pe=se.start,Re=se.end;if(Re===void 0&&(Re=pe),"selectionStart"in Z)Z.selectionStart=pe,Z.selectionEnd=Math.min(Re,Z.value.length);else{var Le=Z.ownerDocument||document,ye=Le&&Le.defaultView||window;if(ye.getSelection){var Ee=ye.getSelection(),ct=Z.textContent.length,At=Math.min(se.start,ct),Xn=se.end===void 0?At:Math.min(se.end,ct);!Ee.extend&&At>Xn&&(z=Xn,Xn=At,At=z);var me=ho(Z,At),re=ho(Z,Xn);if(me&&re&&(Ee.rangeCount!==1||Ee.anchorNode!==me.node||Ee.anchorOffset!==me.offset||Ee.focusNode!==re.node||Ee.focusOffset!==re.offset)){var ge=Le.createRange();ge.setStart(me.node,me.offset),Ee.removeAllRanges(),At>Xn?(Ee.addRange(ge),Ee.extend(re.node,re.offset)):(ge.setEnd(re.node,re.offset),Ee.addRange(ge))}}}}for(Le=[],Ee=Z;Ee=Ee.parentNode;)Ee.nodeType===1&&Le.push({element:Ee,left:Ee.scrollLeft,top:Ee.scrollTop});for(typeof Z.focus=="function"&&Z.focus(),Z=0;Z<Le.length;Z++){var Me=Le[Z];Me.element.scrollLeft=Me.left,Me.element.scrollTop=Me.top}}Px=!!Gv,Yv=Gv=null}finally{jn=N,H.p=p,U.T=m}}l.current=d,Pi=2}}function uA(){if(Pi===2){Pi=0;var l=yu,d=Bf,m=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||m){m=U.T,U.T=null;var p=H.p;H.p=2;var N=jn;jn|=4;try{IN(l,d.alternate,d)}finally{jn=N,H.p=p,U.T=m}}Pi=3}}function hA(){if(Pi===4||Pi===3){Pi=0,$e();var l=yu,d=Bf,m=nd,p=qN;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?Pi=5:(Pi=0,Bf=yu=null,fA(l,l.pendingLanes));var N=l.pendingLanes;if(N===0&&(bu=null),fn(m),d=d.stateNode,yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(Ps,d,void 0,(d.current.flags&128)===128)}catch{}if(p!==null){d=U.T,N=H.p,H.p=2,U.T=null;try{for(var _=l.onRecoverableError,z=0;z<p.length;z++){var Z=p[z];_(Z.value,{componentStack:Z.stack})}}finally{U.T=d,H.p=N}}(nd&3)!==0&&Sx(),ac(l),N=l.pendingLanes,(m&261930)!==0&&(N&42)!==0?l===Dv?Hg++:(Hg=0,Dv=l):Hg=0,Ug(0)}}function fA(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,Gl(d)))}function Sx(){return dA(),uA(),hA(),mA()}function mA(){if(Pi!==5)return!1;var l=yu,d=kv;kv=0;var m=fn(nd),p=U.T,N=H.p;try{H.p=32>m?32:m,U.T=null,m=Rv,Rv=null;var _=yu,z=nd;if(Pi=0,Bf=yu=null,nd=0,(jn&6)!==0)throw Error(s(331));var Z=jn;if(jn|=4,ZN(_.current),YN(_,_.current,z,m),jn=Z,Ug(0,!1),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(Ps,_)}catch{}return!0}finally{H.p=N,U.T=p,fA(l,d)}}function gA(l,d,m){d=di(m,d),d=Mf(l.stateNode,d,2),l=fi(l,d,2),l!==null&&(dt(l,2),ac(l))}function Hn(l,d,m){if(l.tag===3)gA(l,l,m);else for(;d!==null;){if(d.tag===3){gA(d,l,m);break}else if(d.tag===1){var p=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(bu===null||!bu.has(p))){l=di(m,l),m=gh(2),p=fi(d,m,2),p!==null&&(Pf(m,p,d,l),dt(p,2),ac(p));break}}d=d.return}}function Ov(l,d,m){var p=l.pingCache;if(p===null){p=l.pingCache=new FP;var N=new Set;p.set(d,N)}else N=p.get(d),N===void 0&&(N=new Set,p.set(d,N));N.has(m)||(Tv=!0,N.add(m),l=UP.bind(null,l,d,m),d.then(l,l))}function UP(l,d,m){var p=l.pingCache;p!==null&&p.delete(d),l.pingedLanes|=l.suspendedLanes&m,l.warmLanes&=~m,qn===l&&(on&m)===m&&(Hs===4||Hs===3&&(on&62914560)===on&&300>nt()-px?(jn&2)===0&&Hf(l,0):_v|=m,If===on&&(If=0)),ac(l)}function pA(l,d){d===0&&(d=Ut()),l=pn(l,d),l!==null&&(dt(l,d),ac(l))}function VP(l){var d=l.memoizedState,m=0;d!==null&&(m=d.retryLane),pA(l,m)}function WP(l,d){var m=0;switch(l.tag){case 31:case 13:var p=l.stateNode,N=l.memoizedState;N!==null&&(m=N.retryLane);break;case 19:p=l.stateNode;break;case 22:p=l.stateNode._retryCache;break;default:throw Error(s(314))}p!==null&&p.delete(d),pA(l,m)}function GP(l,d){return tt(l,d)}var Nx=null,Vf=null,Lv=!1,Ax=!1,Fv=!1,wu=0;function ac(l){l!==Vf&&l.next===null&&(Vf===null?Nx=Vf=l:Vf=Vf.next=l),Ax=!0,Lv||(Lv=!0,XP())}function Ug(l,d){if(!Fv&&Ax){Fv=!0;do for(var m=!1,p=Nx;p!==null;){if(l!==0){var N=p.pendingLanes;if(N===0)var _=0;else{var z=p.suspendedLanes,Z=p.pingedLanes;_=(1<<31-Fn(42|l)+1)-1,_&=N&~(z&~Z),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(m=!0,vA(p,_))}else _=on,_=Ze(p,p===qn?_:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(_&3)===0||pt(p,_)||(m=!0,vA(p,_));p=p.next}while(m);Fv=!1}}function YP(){xA()}function xA(){Ax=Lv=!1;var l=0;wu!==0&&sO()&&(l=wu);for(var d=nt(),m=null,p=Nx;p!==null;){var N=p.next,_=bA(p,d);_===0?(p.next=null,m===null?Nx=N:m.next=N,N===null&&(Vf=m)):(m=p,(l!==0||(_&3)!==0)&&(Ax=!0)),p=N}Pi!==0&&Pi!==5||Ug(l),wu!==0&&(wu=0)}function bA(l,d){for(var m=l.suspendedLanes,p=l.pingedLanes,N=l.expirationTimes,_=l.pendingLanes&-62914561;0<_;){var z=31-Fn(_),Z=1<<z,se=N[z];se===-1?((Z&m)===0||(Z&p)!==0)&&(N[z]=st(Z,d)):se<=d&&(l.expiredLanes|=Z),_&=~Z}if(d=qn,m=on,m=Ze(l,l===d?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),p=l.callbackNode,m===0||l===d&&(Bn===2||Bn===9)||l.cancelPendingCommit!==null)return p!==null&&p!==null&&De(p),l.callbackNode=null,l.callbackPriority=0;if((m&3)===0||pt(l,m)){if(d=m&-m,d===l.callbackPriority)return d;switch(p!==null&&De(p),fn(m)){case 2:case 8:m=un;break;case 32:m=an;break;case 268435456:m=ts;break;default:m=an}return p=yA.bind(null,l),m=tt(m,p),l.callbackPriority=d,l.callbackNode=m,d}return p!==null&&p!==null&&De(p),l.callbackPriority=2,l.callbackNode=null,2}function yA(l,d){if(Pi!==0&&Pi!==5)return l.callbackNode=null,l.callbackPriority=0,null;var m=l.callbackNode;if(Sx()&&l.callbackNode!==m)return null;var p=on;return p=Ze(l,l===qn?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),p===0?null:(eA(l,p,d),bA(l,nt()),l.callbackNode!=null&&l.callbackNode===m?yA.bind(null,l):null)}function vA(l,d){if(Sx())return null;eA(l,d,!0)}function XP(){aO(function(){(jn&6)!==0?tt(St,YP):xA()})}function zv(){if(wu===0){var l=sa;l===0&&(l=vn,vn<<=1,(vn&261888)===0&&(vn=256)),wu=l}return wu}function wA(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:oi(""+l)}function SA(l,d){var m=d.ownerDocument.createElement("input");return m.name=d.name,m.value=d.value,l.id&&m.setAttribute("form",l.id),d.parentNode.insertBefore(m,d),l=new FormData(l),m.parentNode.removeChild(m),l}function KP(l,d,m,p,N){if(d==="submit"&&m&&m.stateNode===N){var _=wA((N[Si]||null).action),z=p.submitter;z&&(d=(d=z[Si]||null)?wA(d.formAction):z.getAttribute("formAction"),d!==null&&(_=d,z=null));var Z=new kc("action","action",null,p,N);l.push({event:Z,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(wu!==0){var se=z?SA(N,z):new FormData(N);ou(m,{pending:!0,data:se,method:N.method,action:_},null,se)}}else typeof _=="function"&&(Z.preventDefault(),se=z?SA(N,z):new FormData(N),ou(m,{pending:!0,data:se,method:N.method,action:_},_,se))},currentTarget:N}]})}}for(var Iv=0;Iv<Oe.length;Iv++){var Bv=Oe[Iv],ZP=Bv.toLowerCase(),JP=Bv[0].toUpperCase()+Bv.slice(1);Te(ZP,"on"+JP)}Te(k,"onAnimationEnd"),Te(O,"onAnimationIteration"),Te(B,"onAnimationStart"),Te("dblclick","onDoubleClick"),Te("focusin","onFocus"),Te("focusout","onBlur"),Te(J,"onTransitionRun"),Te($,"onTransitionStart"),Te(ve,"onTransitionCancel"),Te(ae,"onTransitionEnd"),wr("onMouseEnter",["mouseout","mouseover"]),wr("onMouseLeave",["mouseout","mouseover"]),wr("onPointerEnter",["pointerout","pointerover"]),wr("onPointerLeave",["pointerout","pointerover"]),zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vg));function NA(l,d){d=(d&4)!==0;for(var m=0;m<l.length;m++){var p=l[m],N=p.event;p=p.listeners;e:{var _=void 0;if(d)for(var z=p.length-1;0<=z;z--){var Z=p[z],se=Z.instance,pe=Z.currentTarget;if(Z=Z.listener,se!==_&&N.isPropagationStopped())break e;_=Z,N.currentTarget=pe;try{_(N)}catch(Re){Xe(Re)}N.currentTarget=null,_=se}else for(z=0;z<p.length;z++){if(Z=p[z],se=Z.instance,pe=Z.currentTarget,Z=Z.listener,se!==_&&N.isPropagationStopped())break e;_=Z,N.currentTarget=pe;try{_(N)}catch(Re){Xe(Re)}N.currentTarget=null,_=se}}}}function nn(l,d){var m=d[Nd];m===void 0&&(m=d[Nd]=new Set);var p=l+"__bubble";m.has(p)||(AA(d,l,2,!1),m.add(p))}function Hv(l,d,m){var p=0;d&&(p|=4),AA(m,l,p,d)}var Cx="_reactListening"+Math.random().toString(36).slice(2);function Uv(l){if(!l[Cx]){l[Cx]=!0,pf.forEach(function(m){m!=="selectionchange"&&(QP.has(m)||Hv(m,!1,l),Hv(m,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[Cx]||(d[Cx]=!0,Hv("selectionchange",!1,d))}}function AA(l,d,m,p){switch($A(d)){case 2:var N=CO;break;case 8:N=EO;break;default:N=s1}m=N.bind(null,d,m,l),N=void 0,!Sn||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(N=!0),p?N!==void 0?l.addEventListener(d,m,{capture:!0,passive:N}):l.addEventListener(d,m,!0):N!==void 0?l.addEventListener(d,m,{passive:N}):l.addEventListener(d,m,!1)}function Vv(l,d,m,p,N){var _=p;if((d&1)===0&&(d&2)===0&&p!==null)e:for(;;){if(p===null)return;var z=p.tag;if(z===3||z===4){var Z=p.stateNode.containerInfo;if(Z===N)break;if(z===4)for(z=p.return;z!==null;){var se=z.tag;if((se===3||se===4)&&z.stateNode.containerInfo===N)return;z=z.return}for(;Z!==null;){if(z=Ls(Z),z===null)return;if(se=z.tag,se===5||se===6||se===26||se===27){p=_=z;continue e}Z=Z.parentNode}}p=p.return}Ed(function(){var pe=_,Re=Dl(m),Le=[];e:{var ye=we.get(l);if(ye!==void 0){var Ee=kc,ct=l;switch(l){case"keypress":if(Uo(m)===0)break e;case"keydown":case"keyup":Ee=ug;break;case"focusin":ct="focus",Ee=Dc;break;case"focusout":ct="blur",Ee=Dc;break;case"beforeblur":case"afterblur":Ee=Dc;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ee=bf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ee=og;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ee=Il;break;case k:case O:case B:Ee=cg;break;case ae:Ee=Dd;break;case"scroll":case"scrollend":Ee=Ol;break;case"wheel":Ee=Go;break;case"copy":case"cut":case"paste":Ee=_d;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ee=Sf;break;case"toggle":case"beforetoggle":Ee=Mc}var At=(d&4)!==0,Xn=!At&&(l==="scroll"||l==="scrollend"),me=At?ye!==null?ye+"Capture":null:ye;At=[];for(var re=pe,ge;re!==null;){var Me=re;if(ge=Me.stateNode,Me=Me.tag,Me!==5&&Me!==26&&Me!==27||ge===null||me===null||(Me=Bo(re,me),Me!=null&&At.push(Wg(re,Me,ge))),Xn)break;re=re.return}0<At.length&&(ye=new Ee(ye,ct,null,m,Re),Le.push({event:ye,listeners:At}))}}if((d&7)===0){e:{if(ye=l==="mouseover"||l==="pointerover",Ee=l==="mouseout"||l==="pointerout",ye&&m!==Rl&&(ct=m.relatedTarget||m.fromElement)&&(Ls(ct)||ct[io]))break e;if((Ee||ye)&&(ye=Re.window===Re?Re:(ye=Re.ownerDocument)?ye.defaultView||ye.parentWindow:window,Ee?(ct=m.relatedTarget||m.toElement,Ee=pe,ct=ct?Ls(ct):null,ct!==null&&(Xn=a(ct),At=ct.tag,ct!==Xn||At!==5&&At!==27&&At!==6)&&(ct=null)):(Ee=null,ct=pe),Ee!==ct)){if(At=bf,Me="onMouseLeave",me="onMouseEnter",re="mouse",(l==="pointerout"||l==="pointerover")&&(At=Sf,Me="onPointerLeave",me="onPointerEnter",re="pointer"),Xn=Ee==null?ye:Oo(Ee),ge=ct==null?ye:Oo(ct),ye=new At(Me,re+"leave",Ee,m,Re),ye.target=Xn,ye.relatedTarget=ge,Me=null,Ls(Re)===pe&&(At=new At(me,re+"enter",ct,m,Re),At.target=ge,At.relatedTarget=Xn,Me=At),Xn=Me,Ee&&ct)t:{for(At=qP,me=Ee,re=ct,ge=0,Me=me;Me;Me=At(Me))ge++;Me=0;for(var vt=re;vt;vt=At(vt))Me++;for(;0<ge-Me;)me=At(me),ge--;for(;0<Me-ge;)re=At(re),Me--;for(;ge--;){if(me===re||re!==null&&me===re.alternate){At=me;break t}me=At(me),re=At(re)}At=null}else At=null;Ee!==null&&CA(Le,ye,Ee,At,!1),ct!==null&&Xn!==null&&CA(Le,Xn,ct,At,!0)}}e:{if(ye=pe?Oo(pe):window,Ee=ye.nodeName&&ye.nodeName.toLowerCase(),Ee==="select"||Ee==="input"&&ye.type==="file")var Cn=Oc;else if(Fd(ye))if(_s)Cn=Af;else{Cn=Lc;var ut=Ud}else Ee=ye.nodeName,!Ee||Ee.toLowerCase()!=="input"||ye.type!=="checkbox"&&ye.type!=="radio"?pe&&Qu(pe.elementType)&&(Cn=Oc):Cn=uo;if(Cn&&(Cn=Cn(l,pe))){Pc(Le,Cn,m,Re);break e}ut&&ut(l,ye,pe),l==="focusout"&&pe&&ye.type==="number"&&pe.memoizedProps.value!=null&&Tc(ye,"number",ye.value)}switch(ut=pe?Oo(pe):window,l){case"focusin":(Fd(ut)||ut.contentEditable==="true")&&(Qa=ut,Hl=pe,Pa=null);break;case"focusout":Pa=Hl=Qa=null;break;case"mousedown":Ul=!0;break;case"contextmenu":case"mouseup":case"dragend":Ul=!1,nh(Le,m,Re);break;case"selectionchange":if(Jo)break;case"keydown":case"keyup":nh(Le,m,Re)}var Yt;if(Fs)e:{switch(l){case"compositionstart":var ln="onCompositionStart";break e;case"compositionend":ln="onCompositionEnd";break e;case"compositionupdate":ln="onCompositionUpdate";break e}ln=void 0}else Yo?eh(l,m)&&(ln="onCompositionEnd"):l==="keydown"&&m.keyCode===229&&(ln="onCompositionStart");ln&&(Da&&m.locale!=="ko"&&(Yo||ln!=="onCompositionStart"?ln==="onCompositionEnd"&&Yo&&(Yt=Pl()):(Ra=Re,Ho="value"in Ra?Ra.value:Ra.textContent,Yo=!0)),ut=Ex(pe,ln),0<ut.length&&(ln=new jd(ln,l,null,m,Re),Le.push({event:ln,listeners:ut}),Yt?ln.data=Yt:(Yt=Pd(m),Yt!==null&&(ln.data=Yt)))),(Yt=Dn?Od(l,m):Ld(l,m))&&(ln=Ex(pe,"onBeforeInput"),0<ln.length&&(ut=new jd("onBeforeInput","beforeinput",null,m,Re),Le.push({event:ut,listeners:ln}),ut.data=Yt)),KP(Le,l,pe,m,Re)}NA(Le,d)})}function Wg(l,d,m){return{instance:l,listener:d,currentTarget:m}}function Ex(l,d){for(var m=d+"Capture",p=[];l!==null;){var N=l,_=N.stateNode;if(N=N.tag,N!==5&&N!==26&&N!==27||_===null||(N=Bo(l,m),N!=null&&p.unshift(Wg(l,N,_)),N=Bo(l,d),N!=null&&p.push(Wg(l,N,_))),l.tag===3)return p;l=l.return}return[]}function qP(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function CA(l,d,m,p,N){for(var _=d._reactName,z=[];m!==null&&m!==p;){var Z=m,se=Z.alternate,pe=Z.stateNode;if(Z=Z.tag,se!==null&&se===p)break;Z!==5&&Z!==26&&Z!==27||pe===null||(se=pe,N?(pe=Bo(m,_),pe!=null&&z.unshift(Wg(m,pe,se))):N||(pe=Bo(m,_),pe!=null&&z.push(Wg(m,pe,se)))),m=m.return}z.length!==0&&l.push({event:d,listeners:z})}var $P=/\r\n?/g,eO=/\u0000|\uFFFD/g;function EA(l){return(typeof l=="string"?l:""+l).replace($P,`
`).replace(eO,"")}function TA(l,d){return d=EA(d),EA(l)===d}function Yn(l,d,m,p,N,_){switch(m){case"children":typeof p=="string"?d==="body"||d==="textarea"&&p===""||kl(l,p):(typeof p=="number"||typeof p=="bigint")&&d!=="body"&&kl(l,""+p);break;case"className":Nr(l,"class",p);break;case"tabIndex":Nr(l,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Nr(l,m,p);break;case"style":xf(l,p,_);break;case"data":if(d!=="object"){Nr(l,"data",p);break}case"src":case"href":if(p===""&&(d!=="a"||m!=="href")){l.removeAttribute(m);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){l.removeAttribute(m);break}p=oi(""+p),l.setAttribute(m,p);break;case"action":case"formAction":if(typeof p=="function"){l.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(m==="formAction"?(d!=="input"&&Yn(l,d,"name",N.name,N,null),Yn(l,d,"formEncType",N.formEncType,N,null),Yn(l,d,"formMethod",N.formMethod,N,null),Yn(l,d,"formTarget",N.formTarget,N,null)):(Yn(l,d,"encType",N.encType,N,null),Yn(l,d,"method",N.method,N,null),Yn(l,d,"target",N.target,N,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){l.removeAttribute(m);break}p=oi(""+p),l.setAttribute(m,p);break;case"onClick":p!=null&&(l.onclick=Tr);break;case"onScroll":p!=null&&nn("scroll",l);break;case"onScrollEnd":p!=null&&nn("scrollend",l);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(s(61));if(m=p.__html,m!=null){if(N.children!=null)throw Error(s(60));l.innerHTML=m}}break;case"multiple":l.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":l.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){l.removeAttribute("xlink:href");break}m=oi(""+p),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?l.setAttribute(m,""+p):l.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?l.setAttribute(m,""):l.removeAttribute(m);break;case"capture":case"download":p===!0?l.setAttribute(m,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?l.setAttribute(m,p):l.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?l.setAttribute(m,p):l.removeAttribute(m);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?l.removeAttribute(m):l.setAttribute(m,p);break;case"popover":nn("beforetoggle",l),nn("toggle",l),Cd(l,"popover",p);break;case"xlinkActuate":ha(l,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":ha(l,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":ha(l,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":ha(l,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":ha(l,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":ha(l,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":ha(l,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":ha(l,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":ha(l,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Cd(l,"is",p);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=ag.get(m)||m,Cd(l,m,p))}}function Wv(l,d,m,p,N,_){switch(m){case"style":xf(l,p,_);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(s(61));if(m=p.__html,m!=null){if(N.children!=null)throw Error(s(60));l.innerHTML=m}}break;case"children":typeof p=="string"?kl(l,p):(typeof p=="number"||typeof p=="bigint")&&kl(l,""+p);break;case"onScroll":p!=null&&nn("scroll",l);break;case"onScrollEnd":p!=null&&nn("scrollend",l);break;case"onClick":p!=null&&(l.onclick=Tr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_l.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(N=m.endsWith("Capture"),d=m.slice(2,N?m.length-7:void 0),_=l[Si]||null,_=_!=null?_[m]:null,typeof _=="function"&&l.removeEventListener(d,_,N),typeof p=="function")){typeof _!="function"&&_!==null&&(m in l?l[m]=null:l.hasAttribute(m)&&l.removeAttribute(m)),l.addEventListener(d,p,N);break e}m in l?l[m]=p:p===!0?l.setAttribute(m,""):Cd(l,m,p)}}}function ra(l,d,m){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nn("error",l),nn("load",l);var p=!1,N=!1,_;for(_ in m)if(m.hasOwnProperty(_)){var z=m[_];if(z!=null)switch(_){case"src":p=!0;break;case"srcSet":N=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,d));default:Yn(l,d,_,z,m,null)}}N&&Yn(l,d,"srcSet",m.srcSet,m,null),p&&Yn(l,d,"src",m.src,m,null);return;case"input":nn("invalid",l);var Z=_=z=N=null,se=null,pe=null;for(p in m)if(m.hasOwnProperty(p)){var Re=m[p];if(Re!=null)switch(p){case"name":N=Re;break;case"type":z=Re;break;case"checked":se=Re;break;case"defaultChecked":pe=Re;break;case"value":_=Re;break;case"defaultValue":Z=Re;break;case"children":case"dangerouslySetInnerHTML":if(Re!=null)throw Error(s(137,d));break;default:Yn(l,d,p,Re,m,null)}}Cr(l,_,Z,se,pe,z,N,!1);return;case"select":nn("invalid",l),p=z=_=null;for(N in m)if(m.hasOwnProperty(N)&&(Z=m[N],Z!=null))switch(N){case"value":_=Z;break;case"defaultValue":z=Z;break;case"multiple":p=Z;default:Yn(l,d,N,Z,m,null)}d=_,m=z,l.multiple=!!p,d!=null?ao(l,!!p,d,!1):m!=null&&ao(l,!!p,m,!0);return;case"textarea":nn("invalid",l),_=N=p=null;for(z in m)if(m.hasOwnProperty(z)&&(Z=m[z],Z!=null))switch(z){case"value":p=Z;break;case"defaultValue":N=Z;break;case"children":_=Z;break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(91));break;default:Yn(l,d,z,Z,m,null)}Ju(l,p,N,_);return;case"option":for(se in m)m.hasOwnProperty(se)&&(p=m[se],p!=null)&&(se==="selected"?l.selected=p&&typeof p!="function"&&typeof p!="symbol":Yn(l,d,se,p,m,null));return;case"dialog":nn("beforetoggle",l),nn("toggle",l),nn("cancel",l),nn("close",l);break;case"iframe":case"object":nn("load",l);break;case"video":case"audio":for(p=0;p<Vg.length;p++)nn(Vg[p],l);break;case"image":nn("error",l),nn("load",l);break;case"details":nn("toggle",l);break;case"embed":case"source":case"link":nn("error",l),nn("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(pe in m)if(m.hasOwnProperty(pe)&&(p=m[pe],p!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,d));default:Yn(l,d,pe,p,m,null)}return;default:if(Qu(d)){for(Re in m)m.hasOwnProperty(Re)&&(p=m[Re],p!==void 0&&Wv(l,d,Re,p,m,void 0));return}}for(Z in m)m.hasOwnProperty(Z)&&(p=m[Z],p!=null&&Yn(l,d,Z,p,m,null))}function tO(l,d,m,p){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var N=null,_=null,z=null,Z=null,se=null,pe=null,Re=null;for(Ee in m){var Le=m[Ee];if(m.hasOwnProperty(Ee)&&Le!=null)switch(Ee){case"checked":break;case"value":break;case"defaultValue":se=Le;default:p.hasOwnProperty(Ee)||Yn(l,d,Ee,null,p,Le)}}for(var ye in p){var Ee=p[ye];if(Le=m[ye],p.hasOwnProperty(ye)&&(Ee!=null||Le!=null))switch(ye){case"type":_=Ee;break;case"name":N=Ee;break;case"checked":pe=Ee;break;case"defaultChecked":Re=Ee;break;case"value":z=Ee;break;case"defaultValue":Z=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(s(137,d));break;default:Ee!==Le&&Yn(l,d,ye,Ee,p,Le)}}Ec(l,z,Z,se,pe,Re,_,N);return;case"select":Ee=z=Z=ye=null;for(_ in m)if(se=m[_],m.hasOwnProperty(_)&&se!=null)switch(_){case"value":break;case"multiple":Ee=se;default:p.hasOwnProperty(_)||Yn(l,d,_,null,p,se)}for(N in p)if(_=p[N],se=m[N],p.hasOwnProperty(N)&&(_!=null||se!=null))switch(N){case"value":ye=_;break;case"defaultValue":Z=_;break;case"multiple":z=_;default:_!==se&&Yn(l,d,N,_,p,se)}d=Z,m=z,p=Ee,ye!=null?ao(l,!!m,ye,!1):!!p!=!!m&&(d!=null?ao(l,!!m,d,!0):ao(l,!!m,m?[]:"",!1));return;case"textarea":Ee=ye=null;for(Z in m)if(N=m[Z],m.hasOwnProperty(Z)&&N!=null&&!p.hasOwnProperty(Z))switch(Z){case"value":break;case"children":break;default:Yn(l,d,Z,null,p,N)}for(z in p)if(N=p[z],_=m[z],p.hasOwnProperty(z)&&(N!=null||_!=null))switch(z){case"value":ye=N;break;case"defaultValue":Ee=N;break;case"children":break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(s(91));break;default:N!==_&&Yn(l,d,z,N,p,_)}Er(l,ye,Ee);return;case"option":for(var ct in m)ye=m[ct],m.hasOwnProperty(ct)&&ye!=null&&!p.hasOwnProperty(ct)&&(ct==="selected"?l.selected=!1:Yn(l,d,ct,null,p,ye));for(se in p)ye=p[se],Ee=m[se],p.hasOwnProperty(se)&&ye!==Ee&&(ye!=null||Ee!=null)&&(se==="selected"?l.selected=ye&&typeof ye!="function"&&typeof ye!="symbol":Yn(l,d,se,ye,p,Ee));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var At in m)ye=m[At],m.hasOwnProperty(At)&&ye!=null&&!p.hasOwnProperty(At)&&Yn(l,d,At,null,p,ye);for(pe in p)if(ye=p[pe],Ee=m[pe],p.hasOwnProperty(pe)&&ye!==Ee&&(ye!=null||Ee!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(s(137,d));break;default:Yn(l,d,pe,ye,p,Ee)}return;default:if(Qu(d)){for(var Xn in m)ye=m[Xn],m.hasOwnProperty(Xn)&&ye!==void 0&&!p.hasOwnProperty(Xn)&&Wv(l,d,Xn,void 0,p,ye);for(Re in p)ye=p[Re],Ee=m[Re],!p.hasOwnProperty(Re)||ye===Ee||ye===void 0&&Ee===void 0||Wv(l,d,Re,ye,p,Ee);return}}for(var me in m)ye=m[me],m.hasOwnProperty(me)&&ye!=null&&!p.hasOwnProperty(me)&&Yn(l,d,me,null,p,ye);for(Le in p)ye=p[Le],Ee=m[Le],!p.hasOwnProperty(Le)||ye===Ee||ye==null&&Ee==null||Yn(l,d,Le,ye,p,Ee)}function _A(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function nO(){if(typeof performance.getEntriesByType=="function"){for(var l=0,d=0,m=performance.getEntriesByType("resource"),p=0;p<m.length;p++){var N=m[p],_=N.transferSize,z=N.initiatorType,Z=N.duration;if(_&&Z&&_A(z)){for(z=0,Z=N.responseEnd,p+=1;p<m.length;p++){var se=m[p],pe=se.startTime;if(pe>Z)break;var Re=se.transferSize,Le=se.initiatorType;Re&&_A(Le)&&(se=se.responseEnd,z+=Re*(se<Z?1:(Z-pe)/(se-pe)))}if(--p,d+=8*(_+z)/(N.duration/1e3),l++,10<l)break}}if(0<l)return d/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var Gv=null,Yv=null;function Tx(l){return l.nodeType===9?l:l.ownerDocument}function jA(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function kA(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function Xv(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Kv=null;function sO(){var l=window.event;return l&&l.type==="popstate"?l===Kv?!1:(Kv=l,!0):(Kv=null,!1)}var RA=typeof setTimeout=="function"?setTimeout:void 0,iO=typeof clearTimeout=="function"?clearTimeout:void 0,DA=typeof Promise=="function"?Promise:void 0,aO=typeof queueMicrotask=="function"?queueMicrotask:typeof DA<"u"?function(l){return DA.resolve(null).then(l).catch(rO)}:RA;function rO(l){setTimeout(function(){throw l})}function Su(l){return l==="head"}function MA(l,d){var m=d,p=0;do{var N=m.nextSibling;if(l.removeChild(m),N&&N.nodeType===8)if(m=N.data,m==="/$"||m==="/&"){if(p===0){l.removeChild(N),Xf(d);return}p--}else if(m==="$"||m==="$?"||m==="$~"||m==="$!"||m==="&")p++;else if(m==="html")Gg(l.ownerDocument.documentElement);else if(m==="head"){m=l.ownerDocument.head,Gg(m);for(var _=m.firstChild;_;){var z=_.nextSibling,Z=_.nodeName;_[bn]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&_.rel.toLowerCase()==="stylesheet"||m.removeChild(_),_=z}}else m==="body"&&Gg(l.ownerDocument.body);m=N}while(m);Xf(d)}function PA(l,d){var m=l;l=0;do{var p=m.nextSibling;if(m.nodeType===1?d?(m._stashedDisplay=m.style.display,m.style.display="none"):(m.style.display=m._stashedDisplay||"",m.getAttribute("style")===""&&m.removeAttribute("style")):m.nodeType===3&&(d?(m._stashedText=m.nodeValue,m.nodeValue=""):m.nodeValue=m._stashedText||""),p&&p.nodeType===8)if(m=p.data,m==="/$"){if(l===0)break;l--}else m!=="$"&&m!=="$?"&&m!=="$~"&&m!=="$!"||l++;m=p}while(m)}function Zv(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var m=d;switch(d=d.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Zv(m),Po(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}l.removeChild(m)}}function oO(l,d,m,p){for(;l.nodeType===1;){var N=m;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!p&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(p){if(!l[bn])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(_=l.getAttribute("rel"),_==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(_!==N.rel||l.getAttribute("href")!==(N.href==null||N.href===""?null:N.href)||l.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin)||l.getAttribute("title")!==(N.title==null?null:N.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(_=l.getAttribute("src"),(_!==(N.src==null?null:N.src)||l.getAttribute("type")!==(N.type==null?null:N.type)||l.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin))&&_&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var _=N.name==null?null:""+N.name;if(N.type==="hidden"&&l.getAttribute("name")===_)return l}else return l;if(l=bo(l.nextSibling),l===null)break}return null}function lO(l,d,m){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!m||(l=bo(l.nextSibling),l===null))return null;return l}function OA(l,d){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!d||(l=bo(l.nextSibling),l===null))return null;return l}function Jv(l){return l.data==="$?"||l.data==="$~"}function Qv(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function cO(l,d){var m=l.ownerDocument;if(l.data==="$~")l._reactRetry=d;else if(l.data!=="$?"||m.readyState!=="loading")d();else{var p=function(){d(),m.removeEventListener("DOMContentLoaded",p)};m.addEventListener("DOMContentLoaded",p),l._reactRetry=p}}function bo(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return l}var qv=null;function LA(l){l=l.nextSibling;for(var d=0;l;){if(l.nodeType===8){var m=l.data;if(m==="/$"||m==="/&"){if(d===0)return bo(l.nextSibling);d--}else m!=="$"&&m!=="$!"&&m!=="$?"&&m!=="$~"&&m!=="&"||d++}l=l.nextSibling}return null}function FA(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var m=l.data;if(m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"){if(d===0)return l;d--}else m!=="/$"&&m!=="/&"||d++}l=l.previousSibling}return null}function zA(l,d,m){switch(d=Tx(m),l){case"html":if(l=d.documentElement,!l)throw Error(s(452));return l;case"head":if(l=d.head,!l)throw Error(s(453));return l;case"body":if(l=d.body,!l)throw Error(s(454));return l;default:throw Error(s(451))}}function Gg(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);Po(l)}var yo=new Map,IA=new Set;function _x(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var sd=H.d;H.d={f:dO,r:uO,D:hO,C:fO,L:mO,m:gO,X:xO,S:pO,M:bO};function dO(){var l=sd.f(),d=yx();return l||d}function uO(l){var d=Tl(l);d!==null&&d.tag===5&&d.type==="form"?_f(d):sd.r(l)}var Wf=typeof document>"u"?null:document;function BA(l,d,m){var p=Wf;if(p&&typeof d=="string"&&d){var N=Ai(d);N='link[rel="'+l+'"][href="'+N+'"]',typeof m=="string"&&(N+='[crossorigin="'+m+'"]'),IA.has(N)||(IA.add(N),l={rel:l,crossOrigin:m,href:d},p.querySelector(N)===null&&(d=p.createElement("link"),ra(d,"link",l),Ts(d),p.head.appendChild(d)))}}function hO(l){sd.D(l),BA("dns-prefetch",l,null)}function fO(l,d){sd.C(l,d),BA("preconnect",l,d)}function mO(l,d,m){sd.L(l,d,m);var p=Wf;if(p&&l&&d){var N='link[rel="preload"][as="'+Ai(d)+'"]';d==="image"&&m&&m.imageSrcSet?(N+='[imagesrcset="'+Ai(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(N+='[imagesizes="'+Ai(m.imageSizes)+'"]')):N+='[href="'+Ai(l)+'"]';var _=N;switch(d){case"style":_=Gf(l);break;case"script":_=Yf(l)}yo.has(_)||(l=g({rel:"preload",href:d==="image"&&m&&m.imageSrcSet?void 0:l,as:d},m),yo.set(_,l),p.querySelector(N)!==null||d==="style"&&p.querySelector(Yg(_))||d==="script"&&p.querySelector(Xg(_))||(d=p.createElement("link"),ra(d,"link",l),Ts(d),p.head.appendChild(d)))}}function gO(l,d){sd.m(l,d);var m=Wf;if(m&&l){var p=d&&typeof d.as=="string"?d.as:"script",N='link[rel="modulepreload"][as="'+Ai(p)+'"][href="'+Ai(l)+'"]',_=N;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Yf(l)}if(!yo.has(_)&&(l=g({rel:"modulepreload",href:l},d),yo.set(_,l),m.querySelector(N)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Xg(_)))return}p=m.createElement("link"),ra(p,"link",l),Ts(p),m.head.appendChild(p)}}}function pO(l,d,m){sd.S(l,d,m);var p=Wf;if(p&&l){var N=Lo(p).hoistableStyles,_=Gf(l);d=d||"default";var z=N.get(_);if(!z){var Z={loading:0,preload:null};if(z=p.querySelector(Yg(_)))Z.loading=5;else{l=g({rel:"stylesheet",href:l,"data-precedence":d},m),(m=yo.get(_))&&$v(l,m);var se=z=p.createElement("link");Ts(se),ra(se,"link",l),se._p=new Promise(function(pe,Re){se.onload=pe,se.onerror=Re}),se.addEventListener("load",function(){Z.loading|=1}),se.addEventListener("error",function(){Z.loading|=2}),Z.loading|=4,jx(z,d,p)}z={type:"stylesheet",instance:z,count:1,state:Z},N.set(_,z)}}}function xO(l,d){sd.X(l,d);var m=Wf;if(m&&l){var p=Lo(m).hoistableScripts,N=Yf(l),_=p.get(N);_||(_=m.querySelector(Xg(N)),_||(l=g({src:l,async:!0},d),(d=yo.get(N))&&e1(l,d),_=m.createElement("script"),Ts(_),ra(_,"link",l),m.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},p.set(N,_))}}function bO(l,d){sd.M(l,d);var m=Wf;if(m&&l){var p=Lo(m).hoistableScripts,N=Yf(l),_=p.get(N);_||(_=m.querySelector(Xg(N)),_||(l=g({src:l,async:!0,type:"module"},d),(d=yo.get(N))&&e1(l,d),_=m.createElement("script"),Ts(_),ra(_,"link",l),m.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},p.set(N,_))}}function HA(l,d,m,p){var N=(N=Pe.current)?_x(N):null;if(!N)throw Error(s(446));switch(l){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(d=Gf(m.href),m=Lo(N).hoistableStyles,p=m.get(d),p||(p={type:"style",instance:null,count:0,state:null},m.set(d,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){l=Gf(m.href);var _=Lo(N).hoistableStyles,z=_.get(l);if(z||(N=N.ownerDocument||N,z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(l,z),(_=N.querySelector(Yg(l)))&&!_._p&&(z.instance=_,z.state.loading=5),yo.has(l)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},yo.set(l,m),_||yO(N,l,m,z.state))),d&&p===null)throw Error(s(528,""));return z}if(d&&p!==null)throw Error(s(529,""));return null;case"script":return d=m.async,m=m.src,typeof m=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=Yf(m),m=Lo(N).hoistableScripts,p=m.get(d),p||(p={type:"script",instance:null,count:0,state:null},m.set(d,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,l))}}function Gf(l){return'href="'+Ai(l)+'"'}function Yg(l){return'link[rel="stylesheet"]['+l+"]"}function UA(l){return g({},l,{"data-precedence":l.precedence,precedence:null})}function yO(l,d,m,p){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?p.loading=1:(d=l.createElement("link"),p.preload=d,d.addEventListener("load",function(){return p.loading|=1}),d.addEventListener("error",function(){return p.loading|=2}),ra(d,"link",m),Ts(d),l.head.appendChild(d))}function Yf(l){return'[src="'+Ai(l)+'"]'}function Xg(l){return"script[async]"+l}function VA(l,d,m){if(d.count++,d.instance===null)switch(d.type){case"style":var p=l.querySelector('style[data-href~="'+Ai(m.href)+'"]');if(p)return d.instance=p,Ts(p),p;var N=g({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return p=(l.ownerDocument||l).createElement("style"),Ts(p),ra(p,"style",N),jx(p,m.precedence,l),d.instance=p;case"stylesheet":N=Gf(m.href);var _=l.querySelector(Yg(N));if(_)return d.state.loading|=4,d.instance=_,Ts(_),_;p=UA(m),(N=yo.get(N))&&$v(p,N),_=(l.ownerDocument||l).createElement("link"),Ts(_);var z=_;return z._p=new Promise(function(Z,se){z.onload=Z,z.onerror=se}),ra(_,"link",p),d.state.loading|=4,jx(_,m.precedence,l),d.instance=_;case"script":return _=Yf(m.src),(N=l.querySelector(Xg(_)))?(d.instance=N,Ts(N),N):(p=m,(N=yo.get(_))&&(p=g({},m),e1(p,N)),l=l.ownerDocument||l,N=l.createElement("script"),Ts(N),ra(N,"link",p),l.head.appendChild(N),d.instance=N);case"void":return null;default:throw Error(s(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(p=d.instance,d.state.loading|=4,jx(p,m.precedence,l));return d.instance}function jx(l,d,m){for(var p=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),N=p.length?p[p.length-1]:null,_=N,z=0;z<p.length;z++){var Z=p[z];if(Z.dataset.precedence===d)_=Z;else if(_!==N)break}_?_.parentNode.insertBefore(l,_.nextSibling):(d=m.nodeType===9?m.head:m,d.insertBefore(l,d.firstChild))}function $v(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function e1(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var kx=null;function WA(l,d,m){if(kx===null){var p=new Map,N=kx=new Map;N.set(m,p)}else N=kx,p=N.get(m),p||(p=new Map,N.set(m,p));if(p.has(l))return p;for(p.set(l,null),m=m.getElementsByTagName(l),N=0;N<m.length;N++){var _=m[N];if(!(_[bn]||_[Os]||l==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var z=_.getAttribute(d)||"";z=l+z;var Z=p.get(z);Z?Z.push(_):p.set(z,[_])}}return p}function GA(l,d,m){l=l.ownerDocument||l,l.head.insertBefore(m,d==="title"?l.querySelector("head > title"):null)}function vO(l,d,m){if(m===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;return d.rel==="stylesheet"?(l=d.disabled,typeof d.precedence=="string"&&l==null):!0;case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function YA(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function wO(l,d,m,p){if(m.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var N=Gf(p.href),_=d.querySelector(Yg(N));if(_){d=_._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(l.count++,l=Rx.bind(l),d.then(l,l)),m.state.loading|=4,m.instance=_,Ts(_);return}_=d.ownerDocument||d,p=UA(p),(N=yo.get(N))&&$v(p,N),_=_.createElement("link"),Ts(_);var z=_;z._p=new Promise(function(Z,se){z.onload=Z,z.onerror=se}),ra(_,"link",p),m.instance=_}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(m,d),(d=m.state.preload)&&(m.state.loading&3)===0&&(l.count++,m=Rx.bind(l),d.addEventListener("load",m),d.addEventListener("error",m))}}var t1=0;function SO(l,d){return l.stylesheets&&l.count===0&&Mx(l,l.stylesheets),0<l.count||0<l.imgCount?function(m){var p=setTimeout(function(){if(l.stylesheets&&Mx(l,l.stylesheets),l.unsuspend){var _=l.unsuspend;l.unsuspend=null,_()}},6e4+d);0<l.imgBytes&&t1===0&&(t1=62500*nO());var N=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&Mx(l,l.stylesheets),l.unsuspend)){var _=l.unsuspend;l.unsuspend=null,_()}},(l.imgBytes>t1?50:800)+d);return l.unsuspend=m,function(){l.unsuspend=null,clearTimeout(p),clearTimeout(N)}}:null}function Rx(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Mx(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Dx=null;function Mx(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Dx=new Map,d.forEach(NO,l),Dx=null,Rx.call(l))}function NO(l,d){if(!(d.state.loading&4)){var m=Dx.get(l);if(m)var p=m.get(null);else{m=new Map,Dx.set(l,m);for(var N=l.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<N.length;_++){var z=N[_];(z.nodeName==="LINK"||z.getAttribute("media")!=="not all")&&(m.set(z.dataset.precedence,z),p=z)}p&&m.set(null,p)}N=d.instance,z=N.getAttribute("data-precedence"),_=m.get(z)||p,_===p&&m.set(null,N),m.set(z,N),this.count++,p=Rx.bind(this),N.addEventListener("load",p),N.addEventListener("error",p),_?_.parentNode.insertBefore(N,_.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(N,l.firstChild)),d.state.loading|=4}}var Kg={$$typeof:M,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function AO(l,d,m,p,N,_,z,Z,se){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=rn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rn(0),this.hiddenUpdates=rn(null),this.identifierPrefix=p,this.onUncaughtError=N,this.onCaughtError=_,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=se,this.incompleteTransitions=new Map}function XA(l,d,m,p,N,_,z,Z,se,pe,Re,Le){return l=new AO(l,d,m,z,se,pe,Re,Le,Z),d=1,_===!0&&(d|=24),_=Mn(3,null,null,d),l.current=_,_.stateNode=l,d=Zd(),d.refCount++,l.pooledCache=d,d.refCount++,_.memoizedState={element:p,isDehydrated:m,cache:d},Ba(_),l}function KA(l){return l?(l=Jt,l):Jt}function ZA(l,d,m,p,N,_){N=KA(N),p.context===null?p.context=N:p.pendingContext=N,p=Wi(d),p.payload={element:m},_=_===void 0?null:_,_!==null&&(p.callback=_),m=fi(l,p,d),m!==null&&(or(m,l,d),ba(m,l,d))}function JA(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var m=l.retryLane;l.retryLane=m!==0&&m<d?m:d}}function n1(l,d){JA(l,d),(l=l.alternate)&&JA(l,d)}function QA(l){if(l.tag===13||l.tag===31){var d=pn(l,67108864);d!==null&&or(d,l,67108864),n1(l,67108864)}}function qA(l){if(l.tag===13||l.tag===31){var d=Zr();d=xs(d);var m=pn(l,d);m!==null&&or(m,l,d),n1(l,d)}}var Px=!0;function CO(l,d,m,p){var N=U.T;U.T=null;var _=H.p;try{H.p=2,s1(l,d,m,p)}finally{H.p=_,U.T=N}}function EO(l,d,m,p){var N=U.T;U.T=null;var _=H.p;try{H.p=8,s1(l,d,m,p)}finally{H.p=_,U.T=N}}function s1(l,d,m,p){if(Px){var N=i1(p);if(N===null)Vv(l,d,p,Ox,m),eC(l,p);else if(_O(N,l,d,m,p))p.stopPropagation();else if(eC(l,p),d&4&&-1<TO.indexOf(l)){for(;N!==null;){var _=Tl(N);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var z=Ge(_.pendingLanes);if(z!==0){var Z=_;for(Z.pendingLanes|=2,Z.entangledLanes|=2;z;){var se=1<<31-Fn(z);Z.entanglements[1]|=se,z&=~se}ac(_),(jn&6)===0&&(xx=nt()+500,Ug(0))}}break;case 31:case 13:Z=pn(_,2),Z!==null&&or(Z,_,2),yx(),n1(_,2)}if(_=i1(p),_===null&&Vv(l,d,p,Ox,m),_===N)break;N=_}N!==null&&p.stopPropagation()}else Vv(l,d,p,null,m)}}function i1(l){return l=Dl(l),a1(l)}var Ox=null;function a1(l){if(Ox=null,l=Ls(l),l!==null){var d=a(l);if(d===null)l=null;else{var m=d.tag;if(m===13){if(l=o(d),l!==null)return l;l=null}else if(m===31){if(l=c(d),l!==null)return l;l=null}else if(m===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return Ox=l,null}function $A(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qe()){case St:return 2;case un:return 8;case an:case Lt:return 32;case ts:return 268435456;default:return 32}default:return 32}}var r1=!1,Nu=null,Au=null,Cu=null,Zg=new Map,Jg=new Map,Eu=[],TO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function eC(l,d){switch(l){case"focusin":case"focusout":Nu=null;break;case"dragenter":case"dragleave":Au=null;break;case"mouseover":case"mouseout":Cu=null;break;case"pointerover":case"pointerout":Zg.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jg.delete(d.pointerId)}}function Qg(l,d,m,p,N,_){return l===null||l.nativeEvent!==_?(l={blockedOn:d,domEventName:m,eventSystemFlags:p,nativeEvent:_,targetContainers:[N]},d!==null&&(d=Tl(d),d!==null&&QA(d)),l):(l.eventSystemFlags|=p,d=l.targetContainers,N!==null&&d.indexOf(N)===-1&&d.push(N),l)}function _O(l,d,m,p,N){switch(d){case"focusin":return Nu=Qg(Nu,l,d,m,p,N),!0;case"dragenter":return Au=Qg(Au,l,d,m,p,N),!0;case"mouseover":return Cu=Qg(Cu,l,d,m,p,N),!0;case"pointerover":var _=N.pointerId;return Zg.set(_,Qg(Zg.get(_)||null,l,d,m,p,N)),!0;case"gotpointercapture":return _=N.pointerId,Jg.set(_,Qg(Jg.get(_)||null,l,d,m,p,N)),!0}return!1}function tC(l){var d=Ls(l.target);if(d!==null){var m=a(d);if(m!==null){if(d=m.tag,d===13){if(d=o(m),d!==null){l.blockedOn=d,bs(l.priority,function(){qA(m)});return}}else if(d===31){if(d=c(m),d!==null){l.blockedOn=d,bs(l.priority,function(){qA(m)});return}}else if(d===3&&m.stateNode.current.memoizedState.isDehydrated){l.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Lx(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var m=i1(l.nativeEvent);if(m===null){m=l.nativeEvent;var p=new m.constructor(m.type,m);Rl=p,m.target.dispatchEvent(p),Rl=null}else return d=Tl(m),d!==null&&QA(d),l.blockedOn=m,!1;d.shift()}return!0}function nC(l,d,m){Lx(l)&&m.delete(d)}function jO(){r1=!1,Nu!==null&&Lx(Nu)&&(Nu=null),Au!==null&&Lx(Au)&&(Au=null),Cu!==null&&Lx(Cu)&&(Cu=null),Zg.forEach(nC),Jg.forEach(nC)}function Fx(l,d){l.blockedOn===d&&(l.blockedOn=null,r1||(r1=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,jO)))}var zx=null;function sC(l){zx!==l&&(zx=l,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){zx===l&&(zx=null);for(var d=0;d<l.length;d+=3){var m=l[d],p=l[d+1],N=l[d+2];if(typeof p!="function"){if(a1(p||m)===null)continue;break}var _=Tl(m);_!==null&&(l.splice(d,3),d-=3,ou(_,{pending:!0,data:N,method:m.method,action:p},p,N))}}))}function Xf(l){function d(se){return Fx(se,l)}Nu!==null&&Fx(Nu,l),Au!==null&&Fx(Au,l),Cu!==null&&Fx(Cu,l),Zg.forEach(d),Jg.forEach(d);for(var m=0;m<Eu.length;m++){var p=Eu[m];p.blockedOn===l&&(p.blockedOn=null)}for(;0<Eu.length&&(m=Eu[0],m.blockedOn===null);)tC(m),m.blockedOn===null&&Eu.shift();if(m=(l.ownerDocument||l).$$reactFormReplay,m!=null)for(p=0;p<m.length;p+=3){var N=m[p],_=m[p+1],z=N[Si]||null;if(typeof _=="function")z||sC(m);else if(z){var Z=null;if(_&&_.hasAttribute("formAction")){if(N=_,z=_[Si]||null)Z=z.formAction;else if(a1(N)!==null)continue}else Z=z.action;typeof Z=="function"?m[p+1]=Z:(m.splice(p,3),p-=3),sC(m)}}}function iC(){function l(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(z){return N=z})},focusReset:"manual",scroll:"manual"})}function d(){N!==null&&(N(),N=null),p||setTimeout(m,20)}function m(){if(!p&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,N=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(m,100),function(){p=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),N!==null&&(N(),N=null)}}}function o1(l){this._internalRoot=l}Ix.prototype.render=o1.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(s(409));var m=d.current,p=Zr();ZA(m,p,l,d,null,null)},Ix.prototype.unmount=o1.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;ZA(l.current,2,null,l,null,null),yx(),d[io]=null}};function Ix(l){this._internalRoot=l}Ix.prototype.unstable_scheduleHydration=function(l){if(l){var d=Bi();l={blockedOn:null,target:l,priority:d};for(var m=0;m<Eu.length&&d!==0&&d<Eu[m].priority;m++);Eu.splice(m,0,l),m===0&&tC(l)}};var aC=e.version;if(aC!=="19.2.3")throw Error(s(527,aC,"19.2.3"));H.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(s(188)):(l=Object.keys(l).join(","),Error(s(268,l)));return l=h(d),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var kO={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bx.isDisabled&&Bx.supportsFiber)try{Ps=Bx.inject(kO),yn=Bx}catch{}}return $g.createRoot=function(l,d){if(!i(l))throw Error(s(299));var m=!1,p="",N=Tg,_=nc,z=_g;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(p=d.identifierPrefix),d.onUncaughtError!==void 0&&(N=d.onUncaughtError),d.onCaughtError!==void 0&&(_=d.onCaughtError),d.onRecoverableError!==void 0&&(z=d.onRecoverableError)),d=XA(l,1,!1,null,null,m,p,null,N,_,z,iC),l[io]=d.current,Uv(l),new o1(d)},$g.hydrateRoot=function(l,d,m){if(!i(l))throw Error(s(299));var p=!1,N="",_=Tg,z=nc,Z=_g,se=null;return m!=null&&(m.unstable_strictMode===!0&&(p=!0),m.identifierPrefix!==void 0&&(N=m.identifierPrefix),m.onUncaughtError!==void 0&&(_=m.onUncaughtError),m.onCaughtError!==void 0&&(z=m.onCaughtError),m.onRecoverableError!==void 0&&(Z=m.onRecoverableError),m.formState!==void 0&&(se=m.formState)),d=XA(l,1,!0,d,m??null,p,N,se,_,z,Z,iC),d.context=KA(null),m=d.current,p=Zr(),p=xs(p),N=Wi(p),N.callback=null,fi(m,N,p),m=p,d.current.lanes=m,dt(d,m),ac(d),l[io]=d.current,Uv(l),new Ix(d)},$g.version="19.2.3",$g}var xC;function IO(){if(xC)return u1.exports;xC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),u1.exports=zO(),u1.exports}var BO=IO();var bC="popstate";function HO(n={}){function e(s,i){let{pathname:a,search:o,hash:c}=s.location;return Cw("",{pathname:a,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(s,i){return typeof i=="string"?i:Gp(i)}return VO(e,t,null,n)}function Es(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function eo(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function UO(){return Math.random().toString(36).substring(2,10)}function yC(n,e){return{usr:n.state,key:n.key,idx:e}}function Cw(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Rm(e):e,state:t,key:e&&e.key||s||UO()}}function Gp({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Rm(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function VO(n,e,t,s={}){let{window:i=document.defaultView,v5Compat:a=!1}=s,o=i.history,c="POP",u=null,h=f();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function f(){return(o.state||{idx:null}).idx}function g(){c="POP";let E=f(),T=E==null?null:E-h;h=E,u&&u({action:c,location:C.location,delta:T})}function x(E,T){c="PUSH";let D=Cw(C.location,E,T);h=f()+1;let M=yC(D,h),L=C.createHref(D);try{o.pushState(M,"",L)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;i.location.assign(L)}a&&u&&u({action:c,location:C.location,delta:1})}function w(E,T){c="REPLACE";let D=Cw(C.location,E,T);h=f();let M=yC(D,h),L=C.createHref(D);o.replaceState(M,"",L),a&&u&&u({action:c,location:C.location,delta:0})}function A(E){return WO(E)}let C={get action(){return c},get location(){return n(i,o)},listen(E){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(bC,g),u=E,()=>{i.removeEventListener(bC,g),u=null}},createHref(E){return e(i,E)},createURL:A,encodeLocation(E){let T=A(E);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:x,replace:w,go(E){return o.go(E)}};return C}function WO(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Es(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:Gp(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function qj(n,e,t="/"){return GO(n,e,t,!1)}function GO(n,e,t,s){let i=typeof e=="string"?Rm(e):e,a=gd(i.pathname||"/",t);if(a==null)return null;let o=$j(n);YO(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let h=s3(a);c=t3(o[u],h,s)}return c}function $j(n,e=[],t=[],s="",i=!1){let a=(o,c,u=i,h)=>{let f={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(s)&&u)return;Es(f.relativePath.startsWith(s),`Absolute route path "${f.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(s.length)}let g=fd([s,f.relativePath]),x=t.concat(f);o.children&&o.children.length>0&&(Es(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),$j(o.children,e,x,g,u)),!(o.path==null&&!o.index)&&e.push({path:g,score:$O(g,o.index),routesMeta:x})};return n.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))a(o,c);else for(let u of ek(o.path))a(o,c,!0,u)}),e}function ek(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(s.length===0)return i?[a,""]:[a];let o=ek(s.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>n.startsWith("/")&&u===""?"/":u)}function YO(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:e3(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var XO=/^:[\w-]+$/,KO=3,ZO=2,JO=1,QO=10,qO=-2,vC=n=>n==="*";function $O(n,e){let t=n.split("/"),s=t.length;return t.some(vC)&&(s+=qO),e&&(s+=ZO),t.filter(i=>!vC(i)).reduce((i,a)=>i+(XO.test(a)?KO:a===""?JO:QO),s)}function e3(n,e){return n.length===e.length&&n.slice(0,-1).every((s,i)=>s===e[i])?n[n.length-1]-e[e.length-1]:0}function t3(n,e,t=!1){let{routesMeta:s}=n,i={},a="/",o=[];for(let c=0;c<s.length;++c){let u=s[c],h=c===s.length-1,f=a==="/"?e:e.slice(a.length)||"/",g=Gb({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},f),x=u.route;if(!g&&h&&t&&!s[s.length-1].route.index&&(g=Gb({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:fd([a,g.pathname]),pathnameBase:o3(fd([a,g.pathnameBase])),route:x}),g.pathnameBase!=="/"&&(a=fd([a,g.pathnameBase]))}return o}function Gb(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=n3(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:s.reduce((h,{paramName:f,isOptional:g},x)=>{if(f==="*"){let A=c[x]||"";o=a.slice(0,a.length-A.length).replace(/(.)\/+$/,"$1")}const w=c[x];return g&&!w?h[f]=void 0:h[f]=(w||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:o,pattern:n}}function n3(n,e=!1,t=!0){eo(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(s.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function s3(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return eo(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function gd(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}var tk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,i3=n=>tk.test(n);function a3(n,e="/"){let{pathname:t,search:s="",hash:i=""}=typeof n=="string"?Rm(n):n,a;if(t)if(i3(t))a=t;else{if(t.includes("//")){let o=t;t=t.replace(/\/\/+/g,"/"),eo(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${t}`)}t.startsWith("/")?a=wC(t.substring(1),"/"):a=wC(t,e)}else a=e;return{pathname:a,search:l3(s),hash:c3(i)}}function wC(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function g1(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function r3(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function P2(n){let e=r3(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function O2(n,e,t,s=!1){let i;typeof n=="string"?i=Rm(n):(i={...n},Es(!i.pathname||!i.pathname.includes("?"),g1("?","pathname","search",i)),Es(!i.pathname||!i.pathname.includes("#"),g1("#","pathname","hash",i)),Es(!i.search||!i.search.includes("#"),g1("#","search","hash",i)));let a=n===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=t;else{let g=e.length-1;if(!s&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),g-=1;i.pathname=x.join("/")}c=g>=0?e[g]:"/"}let u=a3(i,c),h=o&&o!=="/"&&o.endsWith("/"),f=(a||o===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(h||f)&&(u.pathname+="/"),u}var fd=n=>n.join("/").replace(/\/\/+/g,"/"),o3=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),l3=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,c3=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,d3=class{constructor(n,e,t,s=!1){this.status=n,this.statusText=e||"",this.internal=s,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function u3(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function h3(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var nk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function sk(n,e){let t=n;if(typeof t!="string"||!tk.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let s=t,i=!1;if(nk)try{let a=new URL(window.location.href),o=t.startsWith("//")?new URL(a.protocol+t):new URL(t),c=gd(o.pathname,e);o.origin===a.origin&&c!=null?t=c+o.search+o.hash:i=!0}catch{eo(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:i,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ik=["POST","PUT","PATCH","DELETE"];new Set(ik);var f3=["GET",...ik];new Set(f3);var Dm=R.createContext(null);Dm.displayName="DataRouter";var Cy=R.createContext(null);Cy.displayName="DataRouterState";var m3=R.createContext(!1),ak=R.createContext({isTransitioning:!1});ak.displayName="ViewTransition";var g3=R.createContext(new Map);g3.displayName="Fetchers";var p3=R.createContext(null);p3.displayName="Await";var no=R.createContext(null);no.displayName="Navigation";var p0=R.createContext(null);p0.displayName="Location";var Do=R.createContext({outlet:null,matches:[],isDataRoute:!1});Do.displayName="Route";var L2=R.createContext(null);L2.displayName="RouteError";var rk="REACT_ROUTER_ERROR",x3="REDIRECT",b3="ROUTE_ERROR_RESPONSE";function y3(n){if(n.startsWith(`${rk}:${x3}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function v3(n){if(n.startsWith(`${rk}:${b3}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new d3(e.status,e.statusText,e.data)}catch{}}function w3(n,{relative:e}={}){Es(Mm(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=R.useContext(no),{hash:i,pathname:a,search:o}=x0(n,{relative:e}),c=a;return t!=="/"&&(c=a==="/"?t:fd([t,a])),s.createHref({pathname:c,search:o,hash:i})}function Mm(){return R.useContext(p0)!=null}function yr(){return Es(Mm(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(p0).location}var ok="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function lk(n){R.useContext(no).static||R.useLayoutEffect(n)}function yi(){let{isDataRoute:n}=R.useContext(Do);return n?L3():S3()}function S3(){Es(Mm(),"useNavigate() may be used only in the context of a <Router> component.");let n=R.useContext(Dm),{basename:e,navigator:t}=R.useContext(no),{matches:s}=R.useContext(Do),{pathname:i}=yr(),a=JSON.stringify(P2(s)),o=R.useRef(!1);return lk(()=>{o.current=!0}),R.useCallback((u,h={})=>{if(eo(o.current,ok),!o.current)return;if(typeof u=="number"){t.go(u);return}let f=O2(u,JSON.parse(a),i,h.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:fd([e,f.pathname])),(h.replace?t.replace:t.push)(f,h.state,h)},[e,t,a,i,n])}var N3=R.createContext(null);function A3(n){let e=R.useContext(Do).outlet;return R.useMemo(()=>e&&R.createElement(N3.Provider,{value:n},e),[e,n])}function vd(){let{matches:n}=R.useContext(Do),e=n[n.length-1];return e?e.params:{}}function x0(n,{relative:e}={}){let{matches:t}=R.useContext(Do),{pathname:s}=yr(),i=JSON.stringify(P2(t));return R.useMemo(()=>O2(n,JSON.parse(i),s,e==="path"),[n,i,s,e])}function C3(n,e){return ck(n,e)}function ck(n,e,t,s,i){Es(Mm(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=R.useContext(no),{matches:o}=R.useContext(Do),c=o[o.length-1],u=c?c.params:{},h=c?c.pathname:"/",f=c?c.pathnameBase:"/",g=c&&c.route;{let D=g&&g.path||"";uk(h,!g||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let x=yr(),w;if(e){let D=typeof e=="string"?Rm(e):e;Es(f==="/"||D.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${D.pathname}" was given in the \`location\` prop.`),w=D}else w=x;let A=w.pathname||"/",C=A;if(f!=="/"){let D=f.replace(/^\//,"").split("/");C="/"+A.replace(/^\//,"").split("/").slice(D.length).join("/")}let E=qj(n,{pathname:C});eo(g||E!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),eo(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=k3(E&&E.map(D=>Object.assign({},D,{params:Object.assign({},u,D.params),pathname:fd([f,a.encodeLocation?a.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?f:fd([f,a.encodeLocation?a.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),o,t,s,i);return e&&T?R.createElement(p0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},T):T}function E3(){let n=O3(),e=u3(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:a},"ErrorBoundary")," or"," ",R.createElement("code",{style:a},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),t?R.createElement("pre",{style:i},t):null,o)}var T3=R.createElement(E3,null),dk=class extends R.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=v3(n.digest);t&&(n=t)}let e=n!==void 0?R.createElement(Do.Provider,{value:this.props.routeContext},R.createElement(L2.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?R.createElement(_3,{error:n},e):e}};dk.contextType=m3;var p1=new WeakMap;function _3({children:n,error:e}){let{basename:t}=R.useContext(no);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=y3(e.digest);if(s){let i=p1.get(e);if(i)throw i;let a=sk(s.location,t);if(nk&&!p1.get(e))if(a.isExternal||s.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:s.replace}));throw p1.set(e,o),o}return R.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return n}function j3({routeContext:n,match:e,children:t}){let s=R.useContext(Dm);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(Do.Provider,{value:n},t)}function k3(n,e=[],t=null,s=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=t?.errors;if(o!=null){let f=a.findIndex(g=>g.route.id&&o?.[g.route.id]!==void 0);Es(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let c=!1,u=-1;if(t)for(let f=0;f<a.length;f++){let g=a[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=f),g.route.id){let{loaderData:x,errors:w}=t,A=g.route.loader&&!x.hasOwnProperty(g.route.id)&&(!w||w[g.route.id]===void 0);if(g.route.lazy||A){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}let h=t&&s?(f,g)=>{s(f,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:h3(t.matches),errorInfo:g})}:void 0;return a.reduceRight((f,g,x)=>{let w,A=!1,C=null,E=null;t&&(w=o&&g.route.id?o[g.route.id]:void 0,C=g.route.errorElement||T3,c&&(u<0&&x===0?(uk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,E=null):u===x&&(A=!0,E=g.route.hydrateFallbackElement||null)));let T=e.concat(a.slice(0,x+1)),D=()=>{let M;return w?M=C:A?M=E:g.route.Component?M=R.createElement(g.route.Component,null):g.route.element?M=g.route.element:M=f,R.createElement(j3,{match:g,routeContext:{outlet:f,matches:T,isDataRoute:t!=null},children:M})};return t&&(g.route.ErrorBoundary||g.route.errorElement||x===0)?R.createElement(dk,{location:t.location,revalidation:t.revalidation,component:C,error:w,children:D(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:h}):D()},null)}function F2(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function R3(n){let e=R.useContext(Dm);return Es(e,F2(n)),e}function D3(n){let e=R.useContext(Cy);return Es(e,F2(n)),e}function M3(n){let e=R.useContext(Do);return Es(e,F2(n)),e}function z2(n){let e=M3(n),t=e.matches[e.matches.length-1];return Es(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function P3(){return z2("useRouteId")}function O3(){let n=R.useContext(L2),e=D3("useRouteError"),t=z2("useRouteError");return n!==void 0?n:e.errors?.[t]}function L3(){let{router:n}=R3("useNavigate"),e=z2("useNavigate"),t=R.useRef(!1);return lk(()=>{t.current=!0}),R.useCallback(async(i,a={})=>{eo(t.current,ok),t.current&&(typeof i=="number"?await n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var SC={};function uk(n,e,t){!e&&!SC[n]&&(SC[n]=!0,eo(!1,t))}R.memo(F3);function F3({routes:n,future:e,state:t,onError:s}){return ck(n,void 0,t,s,e)}function yp({to:n,replace:e,state:t,relative:s}){Es(Mm(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=R.useContext(no);eo(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=R.useContext(Do),{pathname:o}=yr(),c=yi(),u=O2(n,P2(a),o,s==="path"),h=JSON.stringify(u);return R.useEffect(()=>{c(JSON.parse(h),{replace:e,state:t,relative:s})},[c,h,s,e,t]),null}function b0(n){return A3(n.context)}function jt(n){Es(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function z3({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:i,static:a=!1,unstable_useTransitions:o}){Es(!Mm(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),u=R.useMemo(()=>({basename:c,navigator:i,static:a,unstable_useTransitions:o,future:{}}),[c,i,a,o]);typeof t=="string"&&(t=Rm(t));let{pathname:h="/",search:f="",hash:g="",state:x=null,key:w="default"}=t,A=R.useMemo(()=>{let C=gd(h,c);return C==null?null:{location:{pathname:C,search:f,hash:g,state:x,key:w},navigationType:s}},[c,h,f,g,x,w,s]);return eo(A!=null,`<Router basename="${c}"> is not able to match the URL "${h}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:R.createElement(no.Provider,{value:u},R.createElement(p0.Provider,{children:e,value:A}))}function I3({children:n,location:e}){return C3(Ew(n),e)}function Ew(n,e=[]){let t=[];return R.Children.forEach(n,(s,i)=>{if(!R.isValidElement(s))return;let a=[...e,i];if(s.type===R.Fragment){t.push.apply(t,Ew(s.props.children,a));return}Es(s.type===jt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Es(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Ew(s.props.children,a)),t.push(o)}),t}var Cb="get",Eb="application/x-www-form-urlencoded";function Ey(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function B3(n){return Ey(n)&&n.tagName.toLowerCase()==="button"}function H3(n){return Ey(n)&&n.tagName.toLowerCase()==="form"}function U3(n){return Ey(n)&&n.tagName.toLowerCase()==="input"}function V3(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function W3(n,e){return n.button===0&&(!e||e==="_self")&&!V3(n)}function Tw(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let s=n[t];return e.concat(Array.isArray(s)?s.map(i=>[t,i]):[[t,s]])},[]))}function G3(n,e){let t=Tw(n);return e&&e.forEach((s,i)=>{t.has(i)||e.getAll(i).forEach(a=>{t.append(i,a)})}),t}var Hx=null;function Y3(){if(Hx===null)try{new FormData(document.createElement("form"),0),Hx=!1}catch{Hx=!0}return Hx}var X3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function x1(n){return n!=null&&!X3.has(n)?(eo(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Eb}"`),null):n}function K3(n,e){let t,s,i,a,o;if(H3(n)){let c=n.getAttribute("action");s=c?gd(c,e):null,t=n.getAttribute("method")||Cb,i=x1(n.getAttribute("enctype"))||Eb,a=new FormData(n)}else if(B3(n)||U3(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=n.getAttribute("formaction")||c.getAttribute("action");if(s=u?gd(u,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||Cb,i=x1(n.getAttribute("formenctype"))||x1(c.getAttribute("enctype"))||Eb,a=new FormData(c,n),!Y3()){let{name:h,type:f,value:g}=n;if(f==="image"){let x=h?`${h}.`:"";a.append(`${x}x`,"0"),a.append(`${x}y`,"0")}else h&&a.append(h,g)}}else{if(Ey(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Cb,s=null,i=Eb,o=n}return a&&i==="text/plain"&&(o=a,a=void 0),{action:s,method:t.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function I2(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Z3(n,e,t,s){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${s}`:i.pathname=`${i.pathname}.${s}`:i.pathname==="/"?i.pathname=`_root.${s}`:e&&gd(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${s}`,i}async function J3(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Q3(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function q3(n,e,t){let s=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await J3(a,t);return o.links?o.links():[]}return[]}));return nL(s.flat(1).filter(Q3).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function NC(n,e,t,s,i,a){let o=(u,h)=>t[h]?u.route.id!==t[h].route.id:!0,c=(u,h)=>t[h].pathname!==u.pathname||t[h].route.path?.endsWith("*")&&t[h].params["*"]!==u.params["*"];return a==="assets"?e.filter((u,h)=>o(u,h)||c(u,h)):a==="data"?e.filter((u,h)=>{let f=s.routes[u.route.id];if(!f||!f.hasLoader)return!1;if(o(u,h)||c(u,h))return!0;if(u.route.shouldRevalidate){let g=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function $3(n,e,{includeHydrateFallback:t}={}){return eL(n.map(s=>{let i=e.routes[s.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function eL(n){return[...new Set(n)]}function tL(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function nL(n,e){let t=new Set;return new Set(e),n.reduce((s,i)=>{let a=JSON.stringify(tL(i));return t.has(a)||(t.add(a),s.push({key:a,link:i})),s},[])}function hk(){let n=R.useContext(Dm);return I2(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function sL(){let n=R.useContext(Cy);return I2(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var B2=R.createContext(void 0);B2.displayName="FrameworkContext";function fk(){let n=R.useContext(B2);return I2(n,"You must render this element inside a <HydratedRouter> element"),n}function iL(n,e){let t=R.useContext(B2),[s,i]=R.useState(!1),[a,o]=R.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:h,onMouseLeave:f,onTouchStart:g}=e,x=R.useRef(null);R.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let C=T=>{T.forEach(D=>{o(D.isIntersecting)})},E=new IntersectionObserver(C,{threshold:.5});return x.current&&E.observe(x.current),()=>{E.disconnect()}}},[n]),R.useEffect(()=>{if(s){let C=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(C)}}},[s]);let w=()=>{i(!0)},A=()=>{i(!1),o(!1)};return t?n!=="intent"?[a,x,{}]:[a,x,{onFocus:ep(c,w),onBlur:ep(u,A),onMouseEnter:ep(h,w),onMouseLeave:ep(f,A),onTouchStart:ep(g,w)}]:[!1,x,{}]}function ep(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function aL({page:n,...e}){let{router:t}=hk(),s=R.useMemo(()=>qj(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?R.createElement(oL,{page:n,matches:s,...e}):null}function rL(n){let{manifest:e,routeModules:t}=fk(),[s,i]=R.useState([]);return R.useEffect(()=>{let a=!1;return q3(n,e,t).then(o=>{a||i(o)}),()=>{a=!0}},[n,e,t]),s}function oL({page:n,matches:e,...t}){let s=yr(),{future:i,manifest:a,routeModules:o}=fk(),{basename:c}=hk(),{loaderData:u,matches:h}=sL(),f=R.useMemo(()=>NC(n,e,h,a,s,"data"),[n,e,h,a,s]),g=R.useMemo(()=>NC(n,e,h,a,s,"assets"),[n,e,h,a,s]),x=R.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let C=new Set,E=!1;if(e.forEach(D=>{let M=a.routes[D.route.id];!M||!M.hasLoader||(!f.some(L=>L.route.id===D.route.id)&&D.route.id in u&&o[D.route.id]?.shouldRevalidate||M.hasClientLoader?E=!0:C.add(D.route.id))}),C.size===0)return[];let T=Z3(n,c,i.unstable_trailingSlashAwareDataRequests,"data");return E&&C.size>0&&T.searchParams.set("_routes",e.filter(D=>C.has(D.route.id)).map(D=>D.route.id).join(",")),[T.pathname+T.search]},[c,i.unstable_trailingSlashAwareDataRequests,u,s,a,f,e,n,o]),w=R.useMemo(()=>$3(g,a),[g,a]),A=rL(g);return R.createElement(R.Fragment,null,x.map(C=>R.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),w.map(C=>R.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),A.map(({key:C,link:E})=>R.createElement("link",{key:C,nonce:t.nonce,...E})))}function lL(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var cL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{cL&&(window.__reactRouterVersion="7.12.0")}catch{}function dL({basename:n,children:e,unstable_useTransitions:t,window:s}){let i=R.useRef();i.current==null&&(i.current=HO({window:s,v5Compat:!0}));let a=i.current,[o,c]=R.useState({action:a.action,location:a.location}),u=R.useCallback(h=>{t===!1?c(h):R.startTransition(()=>c(h))},[t]);return R.useLayoutEffect(()=>a.listen(u),[a,u]),R.createElement(z3,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:a,unstable_useTransitions:t})}var mk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vt=R.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:i,reloadDocument:a,replace:o,state:c,target:u,to:h,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:x,...w},A){let{basename:C,unstable_useTransitions:E}=R.useContext(no),T=typeof h=="string"&&mk.test(h),D=sk(h,C);h=D.to;let M=w3(h,{relative:i}),[L,I,W]=iL(s,w),V=fL(h,{replace:o,state:c,target:u,preventScrollReset:f,relative:i,viewTransition:g,unstable_defaultShouldRevalidate:x,unstable_useTransitions:E});function Y(q){e&&e(q),q.defaultPrevented||V(q)}let K=R.createElement("a",{...w,...W,href:D.absoluteURL||M,onClick:D.isExternal||a?e:Y,ref:lL(A,I),target:u,"data-discover":!T&&t==="render"?"true":void 0});return L&&!T?R.createElement(R.Fragment,null,K,R.createElement(aL,{page:M})):K});Vt.displayName="Link";var gk=R.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:i=!1,style:a,to:o,viewTransition:c,children:u,...h},f){let g=x0(o,{relative:h.relative}),x=yr(),w=R.useContext(Cy),{navigator:A,basename:C}=R.useContext(no),E=w!=null&&bL(g)&&c===!0,T=A.encodeLocation?A.encodeLocation(g).pathname:g.pathname,D=x.pathname,M=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(D=D.toLowerCase(),M=M?M.toLowerCase():null,T=T.toLowerCase()),M&&C&&(M=gd(M,C)||M);const L=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let I=D===T||!i&&D.startsWith(T)&&D.charAt(L)==="/",W=M!=null&&(M===T||!i&&M.startsWith(T)&&M.charAt(T.length)==="/"),V={isActive:I,isPending:W,isTransitioning:E},Y=I?e:void 0,K;typeof s=="function"?K=s(V):K=[s,I?"active":null,W?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let q=typeof a=="function"?a(V):a;return R.createElement(Vt,{...h,"aria-current":Y,className:K,ref:f,style:q,to:o,viewTransition:c},typeof u=="function"?u(V):u)});gk.displayName="NavLink";var uL=R.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:i,state:a,method:o=Cb,action:c,onSubmit:u,relative:h,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:x,...w},A)=>{let{unstable_useTransitions:C}=R.useContext(no),E=pL(),T=xL(c,{relative:h}),D=o.toLowerCase()==="get"?"get":"post",M=typeof c=="string"&&mk.test(c),L=I=>{if(u&&u(I),I.defaultPrevented)return;I.preventDefault();let W=I.nativeEvent.submitter,V=W?.getAttribute("formmethod")||o,Y=()=>E(W||I.currentTarget,{fetcherKey:e,method:V,navigate:t,replace:i,state:a,relative:h,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:x});C&&t!==!1?R.startTransition(()=>Y()):Y()};return R.createElement("form",{ref:A,method:D,action:T,onSubmit:s?u:L,...w,"data-discover":!M&&n==="render"?"true":void 0})});uL.displayName="Form";function hL(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pk(n){let e=R.useContext(Dm);return Es(e,hL(n)),e}function fL(n,{target:e,replace:t,state:s,preventScrollReset:i,relative:a,viewTransition:o,unstable_defaultShouldRevalidate:c,unstable_useTransitions:u}={}){let h=yi(),f=yr(),g=x0(n,{relative:a});return R.useCallback(x=>{if(W3(x,e)){x.preventDefault();let w=t!==void 0?t:Gp(f)===Gp(g),A=()=>h(n,{replace:w,state:s,preventScrollReset:i,relative:a,viewTransition:o,unstable_defaultShouldRevalidate:c});u?R.startTransition(()=>A()):A()}},[f,h,g,t,s,e,n,i,a,o,c,u])}function H2(n){eo(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=R.useRef(Tw(n)),t=R.useRef(!1),s=yr(),i=R.useMemo(()=>G3(s.search,t.current?null:e.current),[s.search]),a=yi(),o=R.useCallback((c,u)=>{const h=Tw(typeof c=="function"?c(new URLSearchParams(i)):c);t.current=!0,a("?"+h,u)},[a,i]);return[i,o]}var mL=0,gL=()=>`__${String(++mL)}__`;function pL(){let{router:n}=pk("useSubmit"),{basename:e}=R.useContext(no),t=P3(),s=n.fetch,i=n.navigate;return R.useCallback(async(a,o={})=>{let{action:c,method:u,encType:h,formData:f,body:g}=K3(a,e);if(o.navigate===!1){let x=o.fetcherKey||gL();await s(x,t,o.action||c,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:f,body:g,formMethod:o.method||u,formEncType:o.encType||h,flushSync:o.flushSync})}else await i(o.action||c,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:f,body:g,formMethod:o.method||u,formEncType:o.encType||h,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,i,e,t])}function xL(n,{relative:e}={}){let{basename:t}=R.useContext(no),s=R.useContext(Do);Es(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),a={...x0(n||".",{relative:e})},o=yr();if(n==null){a.search=o.search;let c=new URLSearchParams(a.search),u=c.getAll("index");if(u.some(f=>f==="")){c.delete("index"),u.filter(g=>g).forEach(g=>c.append("index",g));let f=c.toString();a.search=f?`?${f}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:fd([t,a.pathname])),Gp(a)}function bL(n,{relative:e}={}){let t=R.useContext(ak);Es(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=pk("useViewTransitionState"),i=x0(n,{relative:e});if(!t.isTransitioning)return!1;let a=gd(t.currentLocation.pathname,s)||t.currentLocation.pathname,o=gd(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Gb(i.pathname,o)!=null||Gb(i.pathname,a)!=null}var Hh=Ay();const yL=km(Hh);var b1,AC;function vL(){if(AC)return b1;AC=1;var n=typeof Element<"u",e=typeof Map=="function",t=typeof Set=="function",s=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function i(a,o){if(a===o)return!0;if(a&&o&&typeof a=="object"&&typeof o=="object"){if(a.constructor!==o.constructor)return!1;var c,u,h;if(Array.isArray(a)){if(c=a.length,c!=o.length)return!1;for(u=c;u--!==0;)if(!i(a[u],o[u]))return!1;return!0}var f;if(e&&a instanceof Map&&o instanceof Map){if(a.size!==o.size)return!1;for(f=a.entries();!(u=f.next()).done;)if(!o.has(u.value[0]))return!1;for(f=a.entries();!(u=f.next()).done;)if(!i(u.value[1],o.get(u.value[0])))return!1;return!0}if(t&&a instanceof Set&&o instanceof Set){if(a.size!==o.size)return!1;for(f=a.entries();!(u=f.next()).done;)if(!o.has(u.value[0]))return!1;return!0}if(s&&ArrayBuffer.isView(a)&&ArrayBuffer.isView(o)){if(c=a.length,c!=o.length)return!1;for(u=c;u--!==0;)if(a[u]!==o[u])return!1;return!0}if(a.constructor===RegExp)return a.source===o.source&&a.flags===o.flags;if(a.valueOf!==Object.prototype.valueOf&&typeof a.valueOf=="function"&&typeof o.valueOf=="function")return a.valueOf()===o.valueOf();if(a.toString!==Object.prototype.toString&&typeof a.toString=="function"&&typeof o.toString=="function")return a.toString()===o.toString();if(h=Object.keys(a),c=h.length,c!==Object.keys(o).length)return!1;for(u=c;u--!==0;)if(!Object.prototype.hasOwnProperty.call(o,h[u]))return!1;if(n&&a instanceof Element)return!1;for(u=c;u--!==0;)if(!((h[u]==="_owner"||h[u]==="__v"||h[u]==="__o")&&a.$$typeof)&&!i(a[h[u]],o[h[u]]))return!1;return!0}return a!==a&&o!==o}return b1=function(o,c){try{return i(o,c)}catch(u){if((u.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw u}},b1}var wL=vL();const SL=km(wL);var y1,CC;function NL(){if(CC)return y1;CC=1;var n=function(e,t,s,i,a,o,c,u){if(!e){var h;if(t===void 0)h=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[s,i,a,o,c,u],g=0;h=new Error(t.replace(/%s/g,function(){return f[g++]})),h.name="Invariant Violation"}throw h.framesToPop=1,h}};return y1=n,y1}var AL=NL();const EC=km(AL);var v1,TC;function CL(){return TC||(TC=1,v1=function(e,t,s,i){var a=s?s.call(i,e,t):void 0;if(a!==void 0)return!!a;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var o=Object.keys(e),c=Object.keys(t);if(o.length!==c.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(t),h=0;h<o.length;h++){var f=o[h];if(!u(f))return!1;var g=e[f],x=t[f];if(a=s?s.call(i,g,x,f):void 0,a===!1||a===void 0&&g!==x)return!1}return!0}),v1}var EL=CL();const TL=km(EL);var xk=(n=>(n.BASE="base",n.BODY="body",n.HEAD="head",n.HTML="html",n.LINK="link",n.META="meta",n.NOSCRIPT="noscript",n.SCRIPT="script",n.STYLE="style",n.TITLE="title",n.FRAGMENT="Symbol(react.fragment)",n))(xk||{}),w1={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},_C=Object.values(xk),U2={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},_L=Object.entries(U2).reduce((n,[e,t])=>(n[t]=e,n),{}),fl="data-rh",lm={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},cm=(n,e)=>{for(let t=n.length-1;t>=0;t-=1){const s=n[t];if(Object.prototype.hasOwnProperty.call(s,e))return s[e]}return null},jL=n=>{let e=cm(n,"title");const t=cm(n,lm.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),t&&e)return t.replace(/%s/g,()=>e);const s=cm(n,lm.DEFAULT_TITLE);return e||s||void 0},kL=n=>cm(n,lm.ON_CHANGE_CLIENT_STATE)||(()=>{}),S1=(n,e)=>e.filter(t=>typeof t[n]<"u").map(t=>t[n]).reduce((t,s)=>({...t,...s}),{}),RL=(n,e)=>e.filter(t=>typeof t.base<"u").map(t=>t.base).reverse().reduce((t,s)=>{if(!t.length){const i=Object.keys(s);for(let a=0;a<i.length;a+=1){const c=i[a].toLowerCase();if(n.indexOf(c)!==-1&&s[c])return t.concat(s)}}return t},[]),DL=n=>console&&typeof console.warn=="function"&&console.warn(n),tp=(n,e,t)=>{const s={};return t.filter(i=>Array.isArray(i[n])?!0:(typeof i[n]<"u"&&DL(`Helmet: ${n} should be of type "Array". Instead found type "${typeof i[n]}"`),!1)).map(i=>i[n]).reverse().reduce((i,a)=>{const o={};a.filter(u=>{let h;const f=Object.keys(u);for(let x=0;x<f.length;x+=1){const w=f[x],A=w.toLowerCase();e.indexOf(A)!==-1&&!(h==="rel"&&u[h].toLowerCase()==="canonical")&&!(A==="rel"&&u[A].toLowerCase()==="stylesheet")&&(h=A),e.indexOf(w)!==-1&&(w==="innerHTML"||w==="cssText"||w==="itemprop")&&(h=w)}if(!h||!u[h])return!1;const g=u[h].toLowerCase();return s[h]||(s[h]={}),o[h]||(o[h]={}),s[h][g]?!1:(o[h][g]=!0,!0)}).reverse().forEach(u=>i.push(u));const c=Object.keys(o);for(let u=0;u<c.length;u+=1){const h=c[u],f={...s[h],...o[h]};s[h]=f}return i},[]).reverse()},ML=(n,e)=>{if(Array.isArray(n)&&n.length){for(let t=0;t<n.length;t+=1)if(n[t][e])return!0}return!1},PL=n=>({baseTag:RL(["href"],n),bodyAttributes:S1("bodyAttributes",n),defer:cm(n,lm.DEFER),encode:cm(n,lm.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:S1("htmlAttributes",n),linkTags:tp("link",["rel","href"],n),metaTags:tp("meta",["name","charset","http-equiv","property","itemprop"],n),noscriptTags:tp("noscript",["innerHTML"],n),onChangeClientState:kL(n),scriptTags:tp("script",["src","innerHTML"],n),styleTags:tp("style",["cssText"],n),title:jL(n),titleAttributes:S1("titleAttributes",n),prioritizeSeoTags:ML(n,lm.PRIORITIZE_SEO_TAGS)}),bk=n=>Array.isArray(n)?n.join(""):n,OL=(n,e)=>{const t=Object.keys(n);for(let s=0;s<t.length;s+=1)if(e[t[s]]&&e[t[s]].includes(n[t[s]]))return!0;return!1},N1=(n,e)=>Array.isArray(n)?n.reduce((t,s)=>(OL(s,e)?t.priority.push(s):t.default.push(s),t),{priority:[],default:[]}):{default:n,priority:[]},jC=(n,e)=>({...n,[e]:void 0}),LL=["noscript","script","style"],_w=(n,e=!0)=>e===!1?String(n):String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),yk=n=>Object.keys(n).reduce((e,t)=>{const s=typeof n[t]<"u"?`${t}="${n[t]}"`:`${t}`;return e?`${e} ${s}`:s},""),FL=(n,e,t,s)=>{const i=yk(t),a=bk(e);return i?`<${n} ${fl}="true" ${i}>${_w(a,s)}</${n}>`:`<${n} ${fl}="true">${_w(a,s)}</${n}>`},zL=(n,e,t=!0)=>e.reduce((s,i)=>{const a=i,o=Object.keys(a).filter(h=>!(h==="innerHTML"||h==="cssText")).reduce((h,f)=>{const g=typeof a[f]>"u"?f:`${f}="${_w(a[f],t)}"`;return h?`${h} ${g}`:g},""),c=a.innerHTML||a.cssText||"",u=LL.indexOf(n)===-1;return`${s}<${n} ${fl}="true" ${o}${u?"/>":`>${c}</${n}>`}`},""),vk=(n,e={})=>Object.keys(n).reduce((t,s)=>{const i=U2[s];return t[i||s]=n[s],t},e),IL=(n,e,t)=>{const s={key:e,[fl]:!0},i=vk(t,s);return[gt.createElement("title",i,e)]},Tb=(n,e)=>e.map((t,s)=>{const i={key:s,[fl]:!0};return Object.keys(t).forEach(a=>{const c=U2[a]||a;if(c==="innerHTML"||c==="cssText"){const u=t.innerHTML||t.cssText;i.dangerouslySetInnerHTML={__html:u}}else i[c]=t[a]}),gt.createElement(n,i)}),Co=(n,e,t=!0)=>{switch(n){case"title":return{toComponent:()=>IL(n,e.title,e.titleAttributes),toString:()=>FL(n,e.title,e.titleAttributes,t)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>vk(e),toString:()=>yk(e)};default:return{toComponent:()=>Tb(n,e),toString:()=>zL(n,e,t)}}},BL=({metaTags:n,linkTags:e,scriptTags:t,encode:s})=>{const i=N1(n,w1.meta),a=N1(e,w1.link),o=N1(t,w1.script);return{priorityMethods:{toComponent:()=>[...Tb("meta",i.priority),...Tb("link",a.priority),...Tb("script",o.priority)],toString:()=>`${Co("meta",i.priority,s)} ${Co("link",a.priority,s)} ${Co("script",o.priority,s)}`},metaTags:i.default,linkTags:a.default,scriptTags:o.default}},HL=n=>{const{baseTag:e,bodyAttributes:t,encode:s=!0,htmlAttributes:i,noscriptTags:a,styleTags:o,title:c="",titleAttributes:u,prioritizeSeoTags:h}=n;let{linkTags:f,metaTags:g,scriptTags:x}=n,w={toComponent:()=>{},toString:()=>""};return h&&({priorityMethods:w,linkTags:f,metaTags:g,scriptTags:x}=BL(n)),{priority:w,base:Co("base",e,s),bodyAttributes:Co("bodyAttributes",t,s),htmlAttributes:Co("htmlAttributes",i,s),link:Co("link",f,s),meta:Co("meta",g,s),noscript:Co("noscript",a,s),script:Co("script",x,s),style:Co("style",o,s),title:Co("title",{title:c,titleAttributes:u},s)}},jw=HL,Ux=[],wk=!!(typeof window<"u"&&window.document&&window.document.createElement),kw=class{instances=[];canUseDOM=wk;context;value={setHelmet:n=>{this.context.helmet=n},helmetInstances:{get:()=>this.canUseDOM?Ux:this.instances,add:n=>{(this.canUseDOM?Ux:this.instances).push(n)},remove:n=>{const e=(this.canUseDOM?Ux:this.instances).indexOf(n);(this.canUseDOM?Ux:this.instances).splice(e,1)}}};constructor(n,e){this.context=n,this.canUseDOM=e||!1,e||(n.helmet=jw({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},UL={},Sk=gt.createContext(UL),Nk=class Ak extends R.Component{static canUseDOM=wk;helmetData;constructor(e){super(e),this.helmetData=new kw(this.props.context||{},Ak.canUseDOM)}render(){return gt.createElement(Sk.Provider,{value:this.helmetData.value},this.props.children)}},Kf=(n,e)=>{const t=document.head||document.querySelector("head"),s=t.querySelectorAll(`${n}[${fl}]`),i=[].slice.call(s),a=[];let o;return e&&e.length&&e.forEach(c=>{const u=document.createElement(n);for(const h in c)if(Object.prototype.hasOwnProperty.call(c,h))if(h==="innerHTML")u.innerHTML=c.innerHTML;else if(h==="cssText")u.styleSheet?u.styleSheet.cssText=c.cssText:u.appendChild(document.createTextNode(c.cssText));else{const f=h,g=typeof c[f]>"u"?"":c[f];u.setAttribute(h,g)}u.setAttribute(fl,"true"),i.some((h,f)=>(o=f,u.isEqualNode(h)))?i.splice(o,1):a.push(u)}),i.forEach(c=>c.parentNode?.removeChild(c)),a.forEach(c=>t.appendChild(c)),{oldTags:i,newTags:a}},Rw=(n,e)=>{const t=document.getElementsByTagName(n)[0];if(!t)return;const s=t.getAttribute(fl),i=s?s.split(","):[],a=[...i],o=Object.keys(e);for(const c of o){const u=e[c]||"";t.getAttribute(c)!==u&&t.setAttribute(c,u),i.indexOf(c)===-1&&i.push(c);const h=a.indexOf(c);h!==-1&&a.splice(h,1)}for(let c=a.length-1;c>=0;c-=1)t.removeAttribute(a[c]);i.length===a.length?t.removeAttribute(fl):t.getAttribute(fl)!==o.join(",")&&t.setAttribute(fl,o.join(","))},VL=(n,e)=>{typeof n<"u"&&document.title!==n&&(document.title=bk(n)),Rw("title",e)},kC=(n,e)=>{const{baseTag:t,bodyAttributes:s,htmlAttributes:i,linkTags:a,metaTags:o,noscriptTags:c,onChangeClientState:u,scriptTags:h,styleTags:f,title:g,titleAttributes:x}=n;Rw("body",s),Rw("html",i),VL(g,x);const w={baseTag:Kf("base",t),linkTags:Kf("link",a),metaTags:Kf("meta",o),noscriptTags:Kf("noscript",c),scriptTags:Kf("script",h),styleTags:Kf("style",f)},A={},C={};Object.keys(w).forEach(E=>{const{newTags:T,oldTags:D}=w[E];T.length&&(A[E]=T),D.length&&(C[E]=w[E].oldTags)}),e&&e(),u(n,A,C)},np=null,WL=n=>{np&&cancelAnimationFrame(np),n.defer?np=requestAnimationFrame(()=>{kC(n,()=>{np=null})}):(kC(n),np=null)},GL=WL,RC=class extends R.Component{rendered=!1;shouldComponentUpdate(n){return!TL(n,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:n}=this.props.context;n.remove(this),this.emitChange()}emitChange(){const{helmetInstances:n,setHelmet:e}=this.props.context;let t=null;const s=PL(n.get().map(i=>{const a={...i.props};return delete a.context,a}));Nk.canUseDOM?GL(s):jw&&(t=jw(s)),e(t)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:n}=this.props.context;n.add(this),this.emitChange()}render(){return this.init(),null}},YL=class extends R.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(n){return!SL(jC(this.props,"helmetData"),jC(n,"helmetData"))}mapNestedChildrenToProps(n,e){if(!e)return null;switch(n.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${n.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(n,e,t,s){return{...e,[n.type]:[...e[n.type]||[],{...t,...this.mapNestedChildrenToProps(n,s)}]}}mapObjectTypeChildren(n,e,t,s){switch(n.type){case"title":return{...e,[n.type]:s,titleAttributes:{...t}};case"body":return{...e,bodyAttributes:{...t}};case"html":return{...e,htmlAttributes:{...t}};default:return{...e,[n.type]:{...t}}}}mapArrayTypeChildrenToProps(n,e){let t={...e};return Object.keys(n).forEach(s=>{t={...t,[s]:n[s]}}),t}warnOnInvalidChildren(n,e){return EC(_C.some(t=>n.type===t),typeof n.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${_C.join(", ")} are allowed. Helmet does not support rendering <${n.type}> elements. Refer to our API for more information.`),EC(!e||typeof e=="string"||Array.isArray(e)&&!e.some(t=>typeof t!="string"),`Helmet expects a string as a child of <${n.type}>. Did you forget to wrap your children in braces? ( <${n.type}>{\`\`}</${n.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(n,e){let t={};return gt.Children.forEach(n,s=>{if(!s||!s.props)return;const{children:i,...a}=s.props,o=Object.keys(a).reduce((u,h)=>(u[_L[h]||h]=a[h],u),{});let{type:c}=s;switch(typeof c=="symbol"?c=c.toString():this.warnOnInvalidChildren(s,i),c){case"Symbol(react.fragment)":e=this.mapChildrenToProps(i,e);break;case"link":case"meta":case"noscript":case"script":case"style":t=this.flattenArrayTypeChildren(s,t,o,i);break;default:e=this.mapObjectTypeChildren(s,e,o,i);break}}),this.mapArrayTypeChildrenToProps(t,e)}render(){const{children:n,...e}=this.props;let t={...e},{helmetData:s}=e;if(n&&(t=this.mapChildrenToProps(n,t)),s&&!(s instanceof kw)){const i=s;s=new kw(i.context,!0),delete t.helmetData}return s?gt.createElement(RC,{...t,context:s.value}):gt.createElement(Sk.Consumer,null,i=>gt.createElement(RC,{...t,context:i}))}};function Ck(n,e){return function(){return n.apply(e,arguments)}}const{toString:XL}=Object.prototype,{getPrototypeOf:V2}=Object,{iterator:Ty,toStringTag:Ek}=Symbol,_y=(n=>e=>{const t=XL.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),El=n=>(n=n.toLowerCase(),e=>_y(e)===n),jy=n=>e=>typeof e===n,{isArray:Pm}=Array,vm=jy("undefined");function y0(n){return n!==null&&!vm(n)&&n.constructor!==null&&!vm(n.constructor)&&mr(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Tk=El("ArrayBuffer");function KL(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&Tk(n.buffer),e}const ZL=jy("string"),mr=jy("function"),_k=jy("number"),v0=n=>n!==null&&typeof n=="object",JL=n=>n===!0||n===!1,_b=n=>{if(_y(n)!=="object")return!1;const e=V2(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Ek in n)&&!(Ty in n)},QL=n=>{if(!v0(n)||y0(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},qL=El("Date"),$L=El("File"),e4=El("Blob"),t4=El("FileList"),n4=n=>v0(n)&&mr(n.pipe),s4=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||mr(n.append)&&((e=_y(n))==="formdata"||e==="object"&&mr(n.toString)&&n.toString()==="[object FormData]"))},i4=El("URLSearchParams"),[a4,r4,o4,l4]=["ReadableStream","Request","Response","Headers"].map(El),c4=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function w0(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let s,i;if(typeof n!="object"&&(n=[n]),Pm(n))for(s=0,i=n.length;s<i;s++)e.call(null,n[s],s,n);else{if(y0(n))return;const a=t?Object.getOwnPropertyNames(n):Object.keys(n),o=a.length;let c;for(s=0;s<o;s++)c=a[s],e.call(null,n[c],c,n)}}function jk(n,e){if(y0(n))return null;e=e.toLowerCase();const t=Object.keys(n);let s=t.length,i;for(;s-- >0;)if(i=t[s],e===i.toLowerCase())return i;return null}const Uh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,kk=n=>!vm(n)&&n!==Uh;function Dw(){const{caseless:n,skipUndefined:e}=kk(this)&&this||{},t={},s=(i,a)=>{const o=n&&jk(t,a)||a;_b(t[o])&&_b(i)?t[o]=Dw(t[o],i):_b(i)?t[o]=Dw({},i):Pm(i)?t[o]=i.slice():(!e||!vm(i))&&(t[o]=i)};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&w0(arguments[i],s);return t}const d4=(n,e,t,{allOwnKeys:s}={})=>(w0(e,(i,a)=>{t&&mr(i)?n[a]=Ck(i,t):n[a]=i},{allOwnKeys:s}),n),u4=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),h4=(n,e,t,s)=>{n.prototype=Object.create(e.prototype,s),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},f4=(n,e,t,s)=>{let i,a,o;const c={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),a=i.length;a-- >0;)o=i[a],(!s||s(o,n,e))&&!c[o]&&(e[o]=n[o],c[o]=!0);n=t!==!1&&V2(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},m4=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const s=n.indexOf(e,t);return s!==-1&&s===t},g4=n=>{if(!n)return null;if(Pm(n))return n;let e=n.length;if(!_k(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},p4=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&V2(Uint8Array)),x4=(n,e)=>{const s=(n&&n[Ty]).call(n);let i;for(;(i=s.next())&&!i.done;){const a=i.value;e.call(n,a[0],a[1])}},b4=(n,e)=>{let t;const s=[];for(;(t=n.exec(e))!==null;)s.push(t);return s},y4=El("HTMLFormElement"),v4=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,s,i){return s.toUpperCase()+i}),DC=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),w4=El("RegExp"),Rk=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),s={};w0(t,(i,a)=>{let o;(o=e(i,a,n))!==!1&&(s[a]=o||i)}),Object.defineProperties(n,s)},S4=n=>{Rk(n,(e,t)=>{if(mr(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const s=n[t];if(mr(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},N4=(n,e)=>{const t={},s=i=>{i.forEach(a=>{t[a]=!0})};return Pm(n)?s(n):s(String(n).split(e)),t},A4=()=>{},C4=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function E4(n){return!!(n&&mr(n.append)&&n[Ek]==="FormData"&&n[Ty])}const T4=n=>{const e=new Array(10),t=(s,i)=>{if(v0(s)){if(e.indexOf(s)>=0)return;if(y0(s))return s;if(!("toJSON"in s)){e[i]=s;const a=Pm(s)?[]:{};return w0(s,(o,c)=>{const u=t(o,i+1);!vm(u)&&(a[c]=u)}),e[i]=void 0,a}}return s};return t(n,0)},_4=El("AsyncFunction"),j4=n=>n&&(v0(n)||mr(n))&&mr(n.then)&&mr(n.catch),Dk=((n,e)=>n?setImmediate:e?((t,s)=>(Uh.addEventListener("message",({source:i,data:a})=>{i===Uh&&a===t&&s.length&&s.shift()()},!1),i=>{s.push(i),Uh.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",mr(Uh.postMessage)),k4=typeof queueMicrotask<"u"?queueMicrotask.bind(Uh):typeof process<"u"&&process.nextTick||Dk,R4=n=>n!=null&&mr(n[Ty]),Ce={isArray:Pm,isArrayBuffer:Tk,isBuffer:y0,isFormData:s4,isArrayBufferView:KL,isString:ZL,isNumber:_k,isBoolean:JL,isObject:v0,isPlainObject:_b,isEmptyObject:QL,isReadableStream:a4,isRequest:r4,isResponse:o4,isHeaders:l4,isUndefined:vm,isDate:qL,isFile:$L,isBlob:e4,isRegExp:w4,isFunction:mr,isStream:n4,isURLSearchParams:i4,isTypedArray:p4,isFileList:t4,forEach:w0,merge:Dw,extend:d4,trim:c4,stripBOM:u4,inherits:h4,toFlatObject:f4,kindOf:_y,kindOfTest:El,endsWith:m4,toArray:g4,forEachEntry:x4,matchAll:b4,isHTMLForm:y4,hasOwnProperty:DC,hasOwnProp:DC,reduceDescriptors:Rk,freezeMethods:S4,toObjectSet:N4,toCamelCase:v4,noop:A4,toFiniteNumber:C4,findKey:jk,global:Uh,isContextDefined:kk,isSpecCompliantForm:E4,toJSONObject:T4,isAsyncFn:_4,isThenable:j4,setImmediate:Dk,asap:k4,isIterable:R4};function Wt(n,e,t,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}Ce.inherits(Wt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ce.toJSONObject(this.config),code:this.code,status:this.status}}});const Mk=Wt.prototype,Pk={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Pk[n]={value:n}});Object.defineProperties(Wt,Pk);Object.defineProperty(Mk,"isAxiosError",{value:!0});Wt.from=(n,e,t,s,i,a)=>{const o=Object.create(Mk);Ce.toFlatObject(n,o,function(f){return f!==Error.prototype},h=>h!=="isAxiosError");const c=n&&n.message?n.message:"Error",u=e==null&&n?n.code:e;return Wt.call(o,c,u,t,s,i),n&&o.cause==null&&Object.defineProperty(o,"cause",{value:n,configurable:!0}),o.name=n&&n.name||"Error",a&&Object.assign(o,a),o};const D4=null;function Mw(n){return Ce.isPlainObject(n)||Ce.isArray(n)}function Ok(n){return Ce.endsWith(n,"[]")?n.slice(0,-2):n}function MC(n,e,t){return n?n.concat(e).map(function(i,a){return i=Ok(i),!t&&a?"["+i+"]":i}).join(t?".":""):e}function M4(n){return Ce.isArray(n)&&!n.some(Mw)}const P4=Ce.toFlatObject(Ce,{},null,function(e){return/^is[A-Z]/.test(e)});function ky(n,e,t){if(!Ce.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=Ce.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,E){return!Ce.isUndefined(E[C])});const s=t.metaTokens,i=t.visitor||f,a=t.dots,o=t.indexes,u=(t.Blob||typeof Blob<"u"&&Blob)&&Ce.isSpecCompliantForm(e);if(!Ce.isFunction(i))throw new TypeError("visitor must be a function");function h(A){if(A===null)return"";if(Ce.isDate(A))return A.toISOString();if(Ce.isBoolean(A))return A.toString();if(!u&&Ce.isBlob(A))throw new Wt("Blob is not supported. Use a Buffer instead.");return Ce.isArrayBuffer(A)||Ce.isTypedArray(A)?u&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function f(A,C,E){let T=A;if(A&&!E&&typeof A=="object"){if(Ce.endsWith(C,"{}"))C=s?C:C.slice(0,-2),A=JSON.stringify(A);else if(Ce.isArray(A)&&M4(A)||(Ce.isFileList(A)||Ce.endsWith(C,"[]"))&&(T=Ce.toArray(A)))return C=Ok(C),T.forEach(function(M,L){!(Ce.isUndefined(M)||M===null)&&e.append(o===!0?MC([C],L,a):o===null?C:C+"[]",h(M))}),!1}return Mw(A)?!0:(e.append(MC(E,C,a),h(A)),!1)}const g=[],x=Object.assign(P4,{defaultVisitor:f,convertValue:h,isVisitable:Mw});function w(A,C){if(!Ce.isUndefined(A)){if(g.indexOf(A)!==-1)throw Error("Circular reference detected in "+C.join("."));g.push(A),Ce.forEach(A,function(T,D){(!(Ce.isUndefined(T)||T===null)&&i.call(e,T,Ce.isString(D)?D.trim():D,C,x))===!0&&w(T,C?C.concat(D):[D])}),g.pop()}}if(!Ce.isObject(n))throw new TypeError("data must be an object");return w(n),e}function PC(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function W2(n,e){this._pairs=[],n&&ky(n,this,e)}const Lk=W2.prototype;Lk.append=function(e,t){this._pairs.push([e,t])};Lk.toString=function(e){const t=e?function(s){return e.call(this,s,PC)}:PC;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function O4(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Fk(n,e,t){if(!e)return n;const s=t&&t.encode||O4;Ce.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let a;if(i?a=i(e,t):a=Ce.isURLSearchParams(e)?e.toString():new W2(e,t).toString(s),a){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}class OC{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ce.forEach(this.handlers,function(s){s!==null&&e(s)})}}const zk={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},L4=typeof URLSearchParams<"u"?URLSearchParams:W2,F4=typeof FormData<"u"?FormData:null,z4=typeof Blob<"u"?Blob:null,I4={isBrowser:!0,classes:{URLSearchParams:L4,FormData:F4,Blob:z4},protocols:["http","https","file","blob","url","data"]},G2=typeof window<"u"&&typeof document<"u",Pw=typeof navigator=="object"&&navigator||void 0,B4=G2&&(!Pw||["ReactNative","NativeScript","NS"].indexOf(Pw.product)<0),H4=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",U4=G2&&window.location.href||"http://localhost",V4=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:G2,hasStandardBrowserEnv:B4,hasStandardBrowserWebWorkerEnv:H4,navigator:Pw,origin:U4},Symbol.toStringTag,{value:"Module"})),Ca={...V4,...I4};function W4(n,e){return ky(n,new Ca.classes.URLSearchParams,{visitor:function(t,s,i,a){return Ca.isNode&&Ce.isBuffer(t)?(this.append(s,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function G4(n){return Ce.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Y4(n){const e={},t=Object.keys(n);let s;const i=t.length;let a;for(s=0;s<i;s++)a=t[s],e[a]=n[a];return e}function Ik(n){function e(t,s,i,a){let o=t[a++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),u=a>=t.length;return o=!o&&Ce.isArray(i)?i.length:o,u?(Ce.hasOwnProp(i,o)?i[o]=[i[o],s]:i[o]=s,!c):((!i[o]||!Ce.isObject(i[o]))&&(i[o]=[]),e(t,s,i[o],a)&&Ce.isArray(i[o])&&(i[o]=Y4(i[o])),!c)}if(Ce.isFormData(n)&&Ce.isFunction(n.entries)){const t={};return Ce.forEachEntry(n,(s,i)=>{e(G4(s),i,t,0)}),t}return null}function X4(n,e,t){if(Ce.isString(n))try{return(e||JSON.parse)(n),Ce.trim(n)}catch(s){if(s.name!=="SyntaxError")throw s}return(t||JSON.stringify)(n)}const S0={transitional:zk,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",i=s.indexOf("application/json")>-1,a=Ce.isObject(e);if(a&&Ce.isHTMLForm(e)&&(e=new FormData(e)),Ce.isFormData(e))return i?JSON.stringify(Ik(e)):e;if(Ce.isArrayBuffer(e)||Ce.isBuffer(e)||Ce.isStream(e)||Ce.isFile(e)||Ce.isBlob(e)||Ce.isReadableStream(e))return e;if(Ce.isArrayBufferView(e))return e.buffer;if(Ce.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(a){if(s.indexOf("application/x-www-form-urlencoded")>-1)return W4(e,this.formSerializer).toString();if((c=Ce.isFileList(e))||s.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return ky(c?{"files[]":e}:e,u&&new u,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),X4(e)):e}],transformResponse:[function(e){const t=this.transitional||S0.transitional,s=t&&t.forcedJSONParsing,i=this.responseType==="json";if(Ce.isResponse(e)||Ce.isReadableStream(e))return e;if(e&&Ce.isString(e)&&(s&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?Wt.from(c,Wt.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ca.classes.FormData,Blob:Ca.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ce.forEach(["delete","get","head","post","put","patch"],n=>{S0.headers[n]={}});const K4=Ce.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Z4=n=>{const e={};let t,s,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),s=o.substring(i+1).trim(),!(!t||e[t]&&K4[t])&&(t==="set-cookie"?e[t]?e[t].push(s):e[t]=[s]:e[t]=e[t]?e[t]+", "+s:s)}),e},LC=Symbol("internals");function sp(n){return n&&String(n).trim().toLowerCase()}function jb(n){return n===!1||n==null?n:Ce.isArray(n)?n.map(jb):String(n)}function J4(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=t.exec(n);)e[s[1]]=s[2];return e}const Q4=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function A1(n,e,t,s,i){if(Ce.isFunction(s))return s.call(this,e,t);if(i&&(e=t),!!Ce.isString(e)){if(Ce.isString(s))return e.indexOf(s)!==-1;if(Ce.isRegExp(s))return s.test(e)}}function q4(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}function $4(n,e){const t=Ce.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(n,s+t,{value:function(i,a,o){return this[s].call(this,e,i,a,o)},configurable:!0})})}let gr=class{constructor(e){e&&this.set(e)}set(e,t,s){const i=this;function a(c,u,h){const f=sp(u);if(!f)throw new Error("header name must be a non-empty string");const g=Ce.findKey(i,f);(!g||i[g]===void 0||h===!0||h===void 0&&i[g]!==!1)&&(i[g||u]=jb(c))}const o=(c,u)=>Ce.forEach(c,(h,f)=>a(h,f,u));if(Ce.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(Ce.isString(e)&&(e=e.trim())&&!Q4(e))o(Z4(e),t);else if(Ce.isObject(e)&&Ce.isIterable(e)){let c={},u,h;for(const f of e){if(!Ce.isArray(f))throw TypeError("Object iterator must return a key-value pair");c[h=f[0]]=(u=c[h])?Ce.isArray(u)?[...u,f[1]]:[u,f[1]]:f[1]}o(c,t)}else e!=null&&a(t,e,s);return this}get(e,t){if(e=sp(e),e){const s=Ce.findKey(this,e);if(s){const i=this[s];if(!t)return i;if(t===!0)return J4(i);if(Ce.isFunction(t))return t.call(this,i,s);if(Ce.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=sp(e),e){const s=Ce.findKey(this,e);return!!(s&&this[s]!==void 0&&(!t||A1(this,this[s],s,t)))}return!1}delete(e,t){const s=this;let i=!1;function a(o){if(o=sp(o),o){const c=Ce.findKey(s,o);c&&(!t||A1(s,s[c],c,t))&&(delete s[c],i=!0)}}return Ce.isArray(e)?e.forEach(a):a(e),i}clear(e){const t=Object.keys(this);let s=t.length,i=!1;for(;s--;){const a=t[s];(!e||A1(this,this[a],a,e,!0))&&(delete this[a],i=!0)}return i}normalize(e){const t=this,s={};return Ce.forEach(this,(i,a)=>{const o=Ce.findKey(s,a);if(o){t[o]=jb(i),delete t[a];return}const c=e?q4(a):String(a).trim();c!==a&&delete t[a],t[c]=jb(i),s[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Ce.forEach(this,(s,i)=>{s!=null&&s!==!1&&(t[i]=e&&Ce.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach(i=>s.set(i)),s}static accessor(e){const s=(this[LC]=this[LC]={accessors:{}}).accessors,i=this.prototype;function a(o){const c=sp(o);s[c]||($4(i,o),s[c]=!0)}return Ce.isArray(e)?e.forEach(a):a(e),this}};gr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ce.reduceDescriptors(gr.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(s){this[t]=s}}});Ce.freezeMethods(gr);function C1(n,e){const t=this||S0,s=e||t,i=gr.from(s.headers);let a=s.data;return Ce.forEach(n,function(c){a=c.call(t,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}function Bk(n){return!!(n&&n.__CANCEL__)}function Om(n,e,t){Wt.call(this,n??"canceled",Wt.ERR_CANCELED,e,t),this.name="CanceledError"}Ce.inherits(Om,Wt,{__CANCEL__:!0});function Hk(n,e,t){const s=t.config.validateStatus;!t.status||!s||s(t.status)?n(t):e(new Wt("Request failed with status code "+t.status,[Wt.ERR_BAD_REQUEST,Wt.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function e6(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function t6(n,e){n=n||10;const t=new Array(n),s=new Array(n);let i=0,a=0,o;return e=e!==void 0?e:1e3,function(u){const h=Date.now(),f=s[a];o||(o=h),t[i]=u,s[i]=h;let g=a,x=0;for(;g!==i;)x+=t[g++],g=g%n;if(i=(i+1)%n,i===a&&(a=(a+1)%n),h-o<e)return;const w=f&&h-f;return w?Math.round(x*1e3/w):void 0}}function n6(n,e){let t=0,s=1e3/e,i,a;const o=(h,f=Date.now())=>{t=f,i=null,a&&(clearTimeout(a),a=null),n(...h)};return[(...h)=>{const f=Date.now(),g=f-t;g>=s?o(h,f):(i=h,a||(a=setTimeout(()=>{a=null,o(i)},s-g)))},()=>i&&o(i)]}const Yb=(n,e,t=3)=>{let s=0;const i=t6(50,250);return n6(a=>{const o=a.loaded,c=a.lengthComputable?a.total:void 0,u=o-s,h=i(u),f=o<=c;s=o;const g={loaded:o,total:c,progress:c?o/c:void 0,bytes:u,rate:h||void 0,estimated:h&&c&&f?(c-o)/h:void 0,event:a,lengthComputable:c!=null,[e?"download":"upload"]:!0};n(g)},t)},FC=(n,e)=>{const t=n!=null;return[s=>e[0]({lengthComputable:t,total:n,loaded:s}),e[1]]},zC=n=>(...e)=>Ce.asap(()=>n(...e)),s6=Ca.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Ca.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Ca.origin),Ca.navigator&&/(msie|trident)/i.test(Ca.navigator.userAgent)):()=>!0,i6=Ca.hasStandardBrowserEnv?{write(n,e,t,s,i,a,o){if(typeof document>"u")return;const c=[`${n}=${encodeURIComponent(e)}`];Ce.isNumber(t)&&c.push(`expires=${new Date(t).toUTCString()}`),Ce.isString(s)&&c.push(`path=${s}`),Ce.isString(i)&&c.push(`domain=${i}`),a===!0&&c.push("secure"),Ce.isString(o)&&c.push(`SameSite=${o}`),document.cookie=c.join("; ")},read(n){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function a6(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function r6(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Uk(n,e,t){let s=!a6(e);return n&&(s||t==!1)?r6(n,e):e}const IC=n=>n instanceof gr?{...n}:n;function ef(n,e){e=e||{};const t={};function s(h,f,g,x){return Ce.isPlainObject(h)&&Ce.isPlainObject(f)?Ce.merge.call({caseless:x},h,f):Ce.isPlainObject(f)?Ce.merge({},f):Ce.isArray(f)?f.slice():f}function i(h,f,g,x){if(Ce.isUndefined(f)){if(!Ce.isUndefined(h))return s(void 0,h,g,x)}else return s(h,f,g,x)}function a(h,f){if(!Ce.isUndefined(f))return s(void 0,f)}function o(h,f){if(Ce.isUndefined(f)){if(!Ce.isUndefined(h))return s(void 0,h)}else return s(void 0,f)}function c(h,f,g){if(g in e)return s(h,f);if(g in n)return s(void 0,h)}const u={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(h,f,g)=>i(IC(h),IC(f),g,!0)};return Ce.forEach(Object.keys({...n,...e}),function(f){const g=u[f]||i,x=g(n[f],e[f],f);Ce.isUndefined(x)&&g!==c||(t[f]=x)}),t}const Vk=n=>{const e=ef({},n);let{data:t,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:c}=e;if(e.headers=o=gr.from(o),e.url=Fk(Uk(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),Ce.isFormData(t)){if(Ca.hasStandardBrowserEnv||Ca.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Ce.isFunction(t.getHeaders)){const u=t.getHeaders(),h=["content-type","content-length"];Object.entries(u).forEach(([f,g])=>{h.includes(f.toLowerCase())&&o.set(f,g)})}}if(Ca.hasStandardBrowserEnv&&(s&&Ce.isFunction(s)&&(s=s(e)),s||s!==!1&&s6(e.url))){const u=i&&a&&i6.read(a);u&&o.set(i,u)}return e},o6=typeof XMLHttpRequest<"u",l6=o6&&function(n){return new Promise(function(t,s){const i=Vk(n);let a=i.data;const o=gr.from(i.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:h}=i,f,g,x,w,A;function C(){w&&w(),A&&A(),i.cancelToken&&i.cancelToken.unsubscribe(f),i.signal&&i.signal.removeEventListener("abort",f)}let E=new XMLHttpRequest;E.open(i.method.toUpperCase(),i.url,!0),E.timeout=i.timeout;function T(){if(!E)return;const M=gr.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),I={data:!c||c==="text"||c==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:M,config:n,request:E};Hk(function(V){t(V),C()},function(V){s(V),C()},I),E=null}"onloadend"in E?E.onloadend=T:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(T)},E.onabort=function(){E&&(s(new Wt("Request aborted",Wt.ECONNABORTED,n,E)),E=null)},E.onerror=function(L){const I=L&&L.message?L.message:"Network Error",W=new Wt(I,Wt.ERR_NETWORK,n,E);W.event=L||null,s(W),E=null},E.ontimeout=function(){let L=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const I=i.transitional||zk;i.timeoutErrorMessage&&(L=i.timeoutErrorMessage),s(new Wt(L,I.clarifyTimeoutError?Wt.ETIMEDOUT:Wt.ECONNABORTED,n,E)),E=null},a===void 0&&o.setContentType(null),"setRequestHeader"in E&&Ce.forEach(o.toJSON(),function(L,I){E.setRequestHeader(I,L)}),Ce.isUndefined(i.withCredentials)||(E.withCredentials=!!i.withCredentials),c&&c!=="json"&&(E.responseType=i.responseType),h&&([x,A]=Yb(h,!0),E.addEventListener("progress",x)),u&&E.upload&&([g,w]=Yb(u),E.upload.addEventListener("progress",g),E.upload.addEventListener("loadend",w)),(i.cancelToken||i.signal)&&(f=M=>{E&&(s(!M||M.type?new Om(null,n,E):M),E.abort(),E=null)},i.cancelToken&&i.cancelToken.subscribe(f),i.signal&&(i.signal.aborted?f():i.signal.addEventListener("abort",f)));const D=e6(i.url);if(D&&Ca.protocols.indexOf(D)===-1){s(new Wt("Unsupported protocol "+D+":",Wt.ERR_BAD_REQUEST,n));return}E.send(a||null)})},c6=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let s=new AbortController,i;const a=function(h){if(!i){i=!0,c();const f=h instanceof Error?h:this.reason;s.abort(f instanceof Wt?f:new Om(f instanceof Error?f.message:f))}};let o=e&&setTimeout(()=>{o=null,a(new Wt(`timeout ${e} of ms exceeded`,Wt.ETIMEDOUT))},e);const c=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(h=>{h.unsubscribe?h.unsubscribe(a):h.removeEventListener("abort",a)}),n=null)};n.forEach(h=>h.addEventListener("abort",a));const{signal:u}=s;return u.unsubscribe=()=>Ce.asap(c),u}},d6=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let s=0,i;for(;s<t;)i=s+e,yield n.slice(s,i),s=i},u6=async function*(n,e){for await(const t of h6(n))yield*d6(t,e)},h6=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:s}=await e.read();if(t)break;yield s}}finally{await e.cancel()}},BC=(n,e,t,s)=>{const i=u6(n,e);let a=0,o,c=u=>{o||(o=!0,s&&s(u))};return new ReadableStream({async pull(u){try{const{done:h,value:f}=await i.next();if(h){c(),u.close();return}let g=f.byteLength;if(t){let x=a+=g;t(x)}u.enqueue(new Uint8Array(f))}catch(h){throw c(h),h}},cancel(u){return c(u),i.return()}},{highWaterMark:2})},HC=64*1024,{isFunction:Vx}=Ce,f6=(({Request:n,Response:e})=>({Request:n,Response:e}))(Ce.global),{ReadableStream:UC,TextEncoder:VC}=Ce.global,WC=(n,...e)=>{try{return!!n(...e)}catch{return!1}},m6=n=>{n=Ce.merge.call({skipUndefined:!0},f6,n);const{fetch:e,Request:t,Response:s}=n,i=e?Vx(e):typeof fetch=="function",a=Vx(t),o=Vx(s);if(!i)return!1;const c=i&&Vx(UC),u=i&&(typeof VC=="function"?(A=>C=>A.encode(C))(new VC):async A=>new Uint8Array(await new t(A).arrayBuffer())),h=a&&c&&WC(()=>{let A=!1;const C=new t(Ca.origin,{body:new UC,method:"POST",get duplex(){return A=!0,"half"}}).headers.has("Content-Type");return A&&!C}),f=o&&c&&WC(()=>Ce.isReadableStream(new s("").body)),g={stream:f&&(A=>A.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(A=>{!g[A]&&(g[A]=(C,E)=>{let T=C&&C[A];if(T)return T.call(C);throw new Wt(`Response type '${A}' is not supported`,Wt.ERR_NOT_SUPPORT,E)})});const x=async A=>{if(A==null)return 0;if(Ce.isBlob(A))return A.size;if(Ce.isSpecCompliantForm(A))return(await new t(Ca.origin,{method:"POST",body:A}).arrayBuffer()).byteLength;if(Ce.isArrayBufferView(A)||Ce.isArrayBuffer(A))return A.byteLength;if(Ce.isURLSearchParams(A)&&(A=A+""),Ce.isString(A))return(await u(A)).byteLength},w=async(A,C)=>{const E=Ce.toFiniteNumber(A.getContentLength());return E??x(C)};return async A=>{let{url:C,method:E,data:T,signal:D,cancelToken:M,timeout:L,onDownloadProgress:I,onUploadProgress:W,responseType:V,headers:Y,withCredentials:K="same-origin",fetchOptions:q}=Vk(A),ne=e||fetch;V=V?(V+"").toLowerCase():"text";let le=c6([D,M&&M.toAbortSignal()],L),_e=null;const xe=le&&le.unsubscribe&&(()=>{le.unsubscribe()});let je;try{if(W&&h&&E!=="get"&&E!=="head"&&(je=await w(Y,T))!==0){let G=new t(C,{method:"POST",body:T,duplex:"half"}),ue;if(Ce.isFormData(T)&&(ue=G.headers.get("content-type"))&&Y.setContentType(ue),G.body){const[Se,fe]=FC(je,Yb(zC(W)));T=BC(G.body,HC,Se,fe)}}Ce.isString(K)||(K=K?"include":"omit");const U=a&&"credentials"in t.prototype,H={...q,signal:le,method:E.toUpperCase(),headers:Y.normalize().toJSON(),body:T,duplex:"half",credentials:U?K:void 0};_e=a&&new t(C,H);let ee=await(a?ne(_e,q):ne(C,H));const he=f&&(V==="stream"||V==="response");if(f&&(I||he&&xe)){const G={};["status","statusText","headers"].forEach(Ae=>{G[Ae]=ee[Ae]});const ue=Ce.toFiniteNumber(ee.headers.get("content-length")),[Se,fe]=I&&FC(ue,Yb(zC(I),!0))||[];ee=new s(BC(ee.body,HC,Se,()=>{fe&&fe(),xe&&xe()}),G)}V=V||"text";let ce=await g[Ce.findKey(g,V)||"text"](ee,A);return!he&&xe&&xe(),await new Promise((G,ue)=>{Hk(G,ue,{data:ce,headers:gr.from(ee.headers),status:ee.status,statusText:ee.statusText,config:A,request:_e})})}catch(U){throw xe&&xe(),U&&U.name==="TypeError"&&/Load failed|fetch/i.test(U.message)?Object.assign(new Wt("Network Error",Wt.ERR_NETWORK,A,_e),{cause:U.cause||U}):Wt.from(U,U&&U.code,A,_e)}}},g6=new Map,Wk=n=>{let e=n&&n.env||{};const{fetch:t,Request:s,Response:i}=e,a=[s,i,t];let o=a.length,c=o,u,h,f=g6;for(;c--;)u=a[c],h=f.get(u),h===void 0&&f.set(u,h=c?new Map:m6(e)),f=h;return h};Wk();const Y2={http:D4,xhr:l6,fetch:{get:Wk}};Ce.forEach(Y2,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const GC=n=>`- ${n}`,p6=n=>Ce.isFunction(n)||n===null||n===!1;function x6(n,e){n=Ce.isArray(n)?n:[n];const{length:t}=n;let s,i;const a={};for(let o=0;o<t;o++){s=n[o];let c;if(i=s,!p6(s)&&(i=Y2[(c=String(s)).toLowerCase()],i===void 0))throw new Wt(`Unknown adapter '${c}'`);if(i&&(Ce.isFunction(i)||(i=i.get(e))))break;a[c||"#"+o]=i}if(!i){const o=Object.entries(a).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let c=t?o.length>1?`since :
`+o.map(GC).join(`
`):" "+GC(o[0]):"as no adapter specified";throw new Wt("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i}const Gk={getAdapter:x6,adapters:Y2};function E1(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Om(null,n)}function YC(n){return E1(n),n.headers=gr.from(n.headers),n.data=C1.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Gk.getAdapter(n.adapter||S0.adapter,n)(n).then(function(s){return E1(n),s.data=C1.call(n,n.transformResponse,s),s.headers=gr.from(s.headers),s},function(s){return Bk(s)||(E1(n),s&&s.response&&(s.response.data=C1.call(n,n.transformResponse,s.response),s.response.headers=gr.from(s.response.headers))),Promise.reject(s)})}const Yk="1.13.2",Ry={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Ry[n]=function(s){return typeof s===n||"a"+(e<1?"n ":" ")+n}});const XC={};Ry.transitional=function(e,t,s){function i(a,o){return"[Axios v"+Yk+"] Transitional option '"+a+"'"+o+(s?". "+s:"")}return(a,o,c)=>{if(e===!1)throw new Wt(i(o," has been removed"+(t?" in "+t:"")),Wt.ERR_DEPRECATED);return t&&!XC[o]&&(XC[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,o,c):!0}};Ry.spelling=function(e){return(t,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function b6(n,e,t){if(typeof n!="object")throw new Wt("options must be an object",Wt.ERR_BAD_OPTION_VALUE);const s=Object.keys(n);let i=s.length;for(;i-- >0;){const a=s[i],o=e[a];if(o){const c=n[a],u=c===void 0||o(c,a,n);if(u!==!0)throw new Wt("option "+a+" must be "+u,Wt.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Wt("Unknown option "+a,Wt.ERR_BAD_OPTION)}}const kb={assertOptions:b6,validators:Ry},lc=kb.validators;let Qh=class{constructor(e){this.defaults=e||{},this.interceptors={request:new OC,response:new OC}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?a&&!String(s.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+a):s.stack=a}catch{}}throw s}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=ef(this.defaults,t);const{transitional:s,paramsSerializer:i,headers:a}=t;s!==void 0&&kb.assertOptions(s,{silentJSONParsing:lc.transitional(lc.boolean),forcedJSONParsing:lc.transitional(lc.boolean),clarifyTimeoutError:lc.transitional(lc.boolean)},!1),i!=null&&(Ce.isFunction(i)?t.paramsSerializer={serialize:i}:kb.assertOptions(i,{encode:lc.function,serialize:lc.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),kb.assertOptions(t,{baseUrl:lc.spelling("baseURL"),withXsrfToken:lc.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=a&&Ce.merge(a.common,a[t.method]);a&&Ce.forEach(["delete","get","head","post","put","patch","common"],A=>{delete a[A]}),t.headers=gr.concat(o,a);const c=[];let u=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(t)===!1||(u=u&&C.synchronous,c.unshift(C.fulfilled,C.rejected))});const h=[];this.interceptors.response.forEach(function(C){h.push(C.fulfilled,C.rejected)});let f,g=0,x;if(!u){const A=[YC.bind(this),void 0];for(A.unshift(...c),A.push(...h),x=A.length,f=Promise.resolve(t);g<x;)f=f.then(A[g++],A[g++]);return f}x=c.length;let w=t;for(;g<x;){const A=c[g++],C=c[g++];try{w=A(w)}catch(E){C.call(this,E);break}}try{f=YC.call(this,w)}catch(A){return Promise.reject(A)}for(g=0,x=h.length;g<x;)f=f.then(h[g++],h[g++]);return f}getUri(e){e=ef(this.defaults,e);const t=Uk(e.baseURL,e.url,e.allowAbsoluteUrls);return Fk(t,e.params,e.paramsSerializer)}};Ce.forEach(["delete","get","head","options"],function(e){Qh.prototype[e]=function(t,s){return this.request(ef(s||{},{method:e,url:t,data:(s||{}).data}))}});Ce.forEach(["post","put","patch"],function(e){function t(s){return function(a,o,c){return this.request(ef(c||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}Qh.prototype[e]=t(),Qh.prototype[e+"Form"]=t(!0)});let y6=class Xk{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const s=this;this.promise.then(i=>{if(!s._listeners)return;let a=s._listeners.length;for(;a-- >0;)s._listeners[a](i);s._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(c=>{s.subscribe(c),a=c}).then(i);return o.cancel=function(){s.unsubscribe(a)},o},e(function(a,o,c){s.reason||(s.reason=new Om(a,o,c),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=s=>{e.abort(s)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Xk(function(i){e=i}),cancel:e}}};function v6(n){return function(t){return n.apply(null,t)}}function w6(n){return Ce.isObject(n)&&n.isAxiosError===!0}const Ow={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Ow).forEach(([n,e])=>{Ow[e]=n});function Kk(n){const e=new Qh(n),t=Ck(Qh.prototype.request,e);return Ce.extend(t,Qh.prototype,e,{allOwnKeys:!0}),Ce.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return Kk(ef(n,i))},t}const ai=Kk(S0);ai.Axios=Qh;ai.CanceledError=Om;ai.CancelToken=y6;ai.isCancel=Bk;ai.VERSION=Yk;ai.toFormData=ky;ai.AxiosError=Wt;ai.Cancel=ai.CanceledError;ai.all=function(e){return Promise.all(e)};ai.spread=v6;ai.isAxiosError=w6;ai.mergeConfig=ef;ai.AxiosHeaders=gr;ai.formToJSON=n=>Ik(Ce.isHTMLForm(n)?new FormData(n):n);ai.getAdapter=Gk.getAdapter;ai.HttpStatusCode=Ow;ai.default=ai;const{Axios:wee,AxiosError:See,CanceledError:Nee,isCancel:Aee,CancelToken:Cee,VERSION:Eee,all:Tee,Cancel:_ee,isAxiosError:jee,spread:kee,toFormData:Ree,AxiosHeaders:Dee,HttpStatusCode:Mee,formToJSON:Pee,getAdapter:Oee,mergeConfig:Lee}=ai,Dt=ai.create({baseURL:"http://127.0.0.1:8000/api/v1",headers:{Accept:"application/json"}});Dt.interceptors.request.use(n=>{const e=localStorage.getItem("token");return e&&(n.headers.Authorization=`Bearer ${e}`),n});Dt.interceptors.response.use(n=>n,n=>(n.response&&n.response.status===401&&localStorage.removeItem("token"),Promise.reject(n)));const S6=async n=>(await Dt.post("/register",n)).data,N6=async n=>(await Dt.post("/login",n)).data,A6=async()=>{await Dt.post("/logout"),localStorage.removeItem("token")},C6=async n=>await Dt.post("/forgot-password",{email:n}),E6=async n=>await Dt.post("/reset-password",n),T6=async n=>(await Dt.post("/user/profile",n)).data,_6=async()=>(await Dt.post("/email/resend")).data,Zk=R.createContext(),j6=({children:n})=>{const[e,t]=R.useState(null),[s,i]=R.useState(localStorage.getItem("token")),[a,o]=R.useState(!0),c=f=>{f?localStorage.setItem("token",f):localStorage.removeItem("token"),i(f)},u=async()=>{if(!s){o(!1);return}try{const f=await Dt.get("/user");t(f.data.data)}catch(f){console.error("Failed to fetch user",f),c(null),t(null)}finally{o(!1)}},h=async()=>{try{await A6()}catch(f){console.error("API Logout failed",f)}finally{c(null),t(null),localStorage.removeItem("token")}};return R.useEffect(()=>{u()},[s]),r.jsx(Zk.Provider,{value:{user:e,setUser:t,token:s,setToken:c,loading:a,fetchUser:u,logout:h},children:n})},so=()=>R.useContext(Zk),X2=R.createContext({});function Vu(n){const e=R.useRef(null);return e.current===null&&(e.current=n()),e.current}const Jk=typeof window<"u",Dy=Jk?R.useLayoutEffect:R.useEffect,My=R.createContext(null);function K2(n,e){n.indexOf(e)===-1&&n.push(e)}function Z2(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function k6([...n],e,t){const s=e<0?n.length+e:e;if(s>=0&&s<n.length){const i=t<0?n.length+t:t,[a]=n.splice(e,1);n.splice(i,0,a)}return n}const bl=(n,e,t)=>t>e?e:t<n?n:t;let Yp=()=>{};const pd={},Qk=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function qk(n){return typeof n=="object"&&n!==null}const $k=n=>/^0[^.\s]+$/u.test(n);function J2(n){let e;return()=>(e===void 0&&(e=n()),e)}const pr=n=>n,R6=(n,e)=>t=>e(n(t)),N0=(...n)=>n.reduce(R6),wm=(n,e,t)=>{const s=e-n;return s===0?1:(t-n)/s};class Q2{constructor(){this.subscriptions=[]}add(e){return K2(this.subscriptions,e),()=>Z2(this.subscriptions,e)}notify(e,t,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,s);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(e,t,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const md=n=>n*1e3,To=n=>n/1e3;function q2(n,e){return e?n*(1e3/e):0}const eR=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,D6=1e-7,M6=12;function P6(n,e,t,s,i){let a,o,c=0;do o=e+(t-e)/2,a=eR(o,s,i)-n,a>0?t=o:e=o;while(Math.abs(a)>D6&&++c<M6);return o}function A0(n,e,t,s){if(n===e&&t===s)return pr;const i=a=>P6(a,0,1,n,t);return a=>a===0||a===1?a:eR(i(a),e,s)}const tR=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,nR=n=>e=>1-n(1-e),sR=A0(.33,1.53,.69,.99),$2=nR(sR),iR=tR($2),aR=n=>(n*=2)<1?.5*$2(n):.5*(2-Math.pow(2,-10*(n-1))),eS=n=>1-Math.sin(Math.acos(n)),rR=nR(eS),oR=tR(eS),O6=A0(.42,0,1,1),L6=A0(0,0,.58,1),lR=A0(.42,0,.58,1),F6=n=>Array.isArray(n)&&typeof n[0]!="number",cR=n=>Array.isArray(n)&&typeof n[0]=="number",z6={linear:pr,easeIn:O6,easeInOut:lR,easeOut:L6,circIn:eS,circInOut:oR,circOut:rR,backIn:$2,backInOut:iR,backOut:sR,anticipate:aR},I6=n=>typeof n=="string",KC=n=>{if(cR(n)){Yp(n.length===4);const[e,t,s,i]=n;return A0(e,t,s,i)}else if(I6(n))return z6[n];return n},Wx=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function B6(n,e){let t=new Set,s=new Set,i=!1,a=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(f){o.has(f)&&(h.schedule(f),n()),f(c)}const h={schedule:(f,g=!1,x=!1)=>{const A=x&&i?t:s;return g&&o.add(f),A.has(f)||A.add(f),f},cancel:f=>{s.delete(f),o.delete(f)},process:f=>{if(c=f,i){a=!0;return}i=!0,[t,s]=[s,t],t.forEach(u),t.clear(),i=!1,a&&(a=!1,h.process(f))}};return h}const H6=40;function dR(n,e){let t=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,o=Wx.reduce((M,L)=>(M[L]=B6(a),M),{}),{setup:c,read:u,resolveKeyframes:h,preUpdate:f,update:g,preRender:x,render:w,postRender:A}=o,C=()=>{const M=pd.useManualTiming?i.timestamp:performance.now();t=!1,pd.useManualTiming||(i.delta=s?1e3/60:Math.max(Math.min(M-i.timestamp,H6),1)),i.timestamp=M,i.isProcessing=!0,c.process(i),u.process(i),h.process(i),f.process(i),g.process(i),x.process(i),w.process(i),A.process(i),i.isProcessing=!1,t&&e&&(s=!1,n(C))},E=()=>{t=!0,s=!0,i.isProcessing||n(C)};return{schedule:Wx.reduce((M,L)=>{const I=o[L];return M[L]=(W,V=!1,Y=!1)=>(t||E(),I.schedule(W,V,Y)),M},{}),cancel:M=>{for(let L=0;L<Wx.length;L++)o[Wx[L]].cancel(M)},state:i,steps:o}}const{schedule:Rn,cancel:yl,state:Zi,steps:T1}=dR(typeof requestAnimationFrame<"u"?requestAnimationFrame:pr,!0);let Rb;function U6(){Rb=void 0}const Va={now:()=>(Rb===void 0&&Va.set(Zi.isProcessing||pd.useManualTiming?Zi.timestamp:performance.now()),Rb),set:n=>{Rb=n,queueMicrotask(U6)}},uR=n=>e=>typeof e=="string"&&e.startsWith(n),hR=uR("--"),V6=uR("var(--"),tS=n=>V6(n)?W6.test(n.split("/*")[0].trim()):!1,W6=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function ZC(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const Lm={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Xp={...Lm,transform:n=>bl(0,1,n)},Gx={...Lm,default:1},jp=n=>Math.round(n*1e5)/1e5,nS=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function G6(n){return n==null}const Y6=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,sS=(n,e)=>t=>!!(typeof t=="string"&&Y6.test(t)&&t.startsWith(n)||e&&!G6(t)&&Object.prototype.hasOwnProperty.call(t,e)),fR=(n,e,t)=>s=>{if(typeof s!="string")return s;const[i,a,o,c]=s.match(nS);return{[n]:parseFloat(i),[e]:parseFloat(a),[t]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},X6=n=>bl(0,255,n),_1={...Lm,transform:n=>Math.round(X6(n))},Vh={test:sS("rgb","red"),parse:fR("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:s=1})=>"rgba("+_1.transform(n)+", "+_1.transform(e)+", "+_1.transform(t)+", "+jp(Xp.transform(s))+")"};function K6(n){let e="",t="",s="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),s=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),s=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,s+=s,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const Lw={test:sS("#"),parse:K6,transform:Vh.transform},C0=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),_u=C0("deg"),yc=C0("%"),it=C0("px"),Z6=C0("vh"),J6=C0("vw"),JC={...yc,parse:n=>yc.parse(n)/100,transform:n=>yc.transform(n*100)},tm={test:sS("hsl","hue"),parse:fR("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:s=1})=>"hsla("+Math.round(n)+", "+yc.transform(jp(e))+", "+yc.transform(jp(t))+", "+jp(Xp.transform(s))+")"},bi={test:n=>Vh.test(n)||Lw.test(n)||tm.test(n),parse:n=>Vh.test(n)?Vh.parse(n):tm.test(n)?tm.parse(n):Lw.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Vh.transform(n):tm.transform(n),getAnimatableNone:n=>{const e=bi.parse(n);return e.alpha=0,bi.transform(e)}},Q6=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function q6(n){return isNaN(n)&&typeof n=="string"&&(n.match(nS)?.length||0)+(n.match(Q6)?.length||0)>0}const mR="number",gR="color",$6="var",eF="var(",QC="${}",tF=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Kp(n){const e=n.toString(),t=[],s={color:[],number:[],var:[]},i=[];let a=0;const c=e.replace(tF,u=>(bi.test(u)?(s.color.push(a),i.push(gR),t.push(bi.parse(u))):u.startsWith(eF)?(s.var.push(a),i.push($6),t.push(u)):(s.number.push(a),i.push(mR),t.push(parseFloat(u))),++a,QC)).split(QC);return{values:t,split:c,indexes:s,types:i}}function pR(n){return Kp(n).values}function xR(n){const{split:e,types:t}=Kp(n),s=e.length;return i=>{let a="";for(let o=0;o<s;o++)if(a+=e[o],i[o]!==void 0){const c=t[o];c===mR?a+=jp(i[o]):c===gR?a+=bi.transform(i[o]):a+=i[o]}return a}}const nF=n=>typeof n=="number"?0:bi.test(n)?bi.getAnimatableNone(n):n;function sF(n){const e=pR(n);return xR(n)(e.map(nF))}const zu={test:q6,parse:pR,createTransformer:xR,getAnimatableNone:sF};function j1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function iF({hue:n,saturation:e,lightness:t,alpha:s}){n/=360,e/=100,t/=100;let i=0,a=0,o=0;if(!e)i=a=o=t;else{const c=t<.5?t*(1+e):t+e-t*e,u=2*t-c;i=j1(u,c,n+1/3),a=j1(u,c,n),o=j1(u,c,n-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:s}}function Xb(n,e){return t=>t>0?e:n}const Cs=(n,e,t)=>n+(e-n)*t,k1=(n,e,t)=>{const s=n*n,i=t*(e*e-s)+s;return i<0?0:Math.sqrt(i)},aF=[Lw,Vh,tm],rF=n=>aF.find(e=>e.test(n));function qC(n){const e=rF(n);if(!e)return!1;let t=e.parse(n);return e===tm&&(t=iF(t)),t}const $C=(n,e)=>{const t=qC(n),s=qC(e);if(!t||!s)return Xb(n,e);const i={...t};return a=>(i.red=k1(t.red,s.red,a),i.green=k1(t.green,s.green,a),i.blue=k1(t.blue,s.blue,a),i.alpha=Cs(t.alpha,s.alpha,a),Vh.transform(i))},Fw=new Set(["none","hidden"]);function oF(n,e){return Fw.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function lF(n,e){return t=>Cs(n,e,t)}function iS(n){return typeof n=="number"?lF:typeof n=="string"?tS(n)?Xb:bi.test(n)?$C:uF:Array.isArray(n)?bR:typeof n=="object"?bi.test(n)?$C:cF:Xb}function bR(n,e){const t=[...n],s=t.length,i=n.map((a,o)=>iS(a)(a,e[o]));return a=>{for(let o=0;o<s;o++)t[o]=i[o](a);return t}}function cF(n,e){const t={...n,...e},s={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(s[i]=iS(n[i])(n[i],e[i]));return i=>{for(const a in s)t[a]=s[a](i);return t}}function dF(n,e){const t=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],o=n.indexes[a][s[a]],c=n.values[o]??0;t[i]=c,s[a]++}return t}const uF=(n,e)=>{const t=zu.createTransformer(e),s=Kp(n),i=Kp(e);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?Fw.has(n)&&!i.values.length||Fw.has(e)&&!s.values.length?oF(n,e):N0(bR(dF(s,i),i.values),t):Xb(n,e)};function yR(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Cs(n,e,t):iS(n)(n,e)}const hF=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Rn.update(e,t),stop:()=>yl(e),now:()=>Zi.isProcessing?Zi.timestamp:Va.now()}},vR=(n,e,t=10)=>{let s="";const i=Math.max(Math.round(e/t),2);for(let a=0;a<i;a++)s+=Math.round(n(a/(i-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},Kb=2e4;function aS(n){let e=0;const t=50;let s=n.next(e);for(;!s.done&&e<Kb;)e+=t,s=n.next(e);return e>=Kb?1/0:e}function fF(n,e=100,t){const s=t({...n,keyframes:[0,e]}),i=Math.min(aS(s),Kb);return{type:"keyframes",ease:a=>s.next(i*a).value/e,duration:To(i)}}const mF=5;function wR(n,e,t){const s=Math.max(e-mF,0);return q2(t-n(s),e-s)}const Us={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},R1=.001;function gF({duration:n=Us.duration,bounce:e=Us.bounce,velocity:t=Us.velocity,mass:s=Us.mass}){let i,a,o=1-e;o=bl(Us.minDamping,Us.maxDamping,o),n=bl(Us.minDuration,Us.maxDuration,To(n)),o<1?(i=h=>{const f=h*o,g=f*n,x=f-t,w=zw(h,o),A=Math.exp(-g);return R1-x/w*A},a=h=>{const g=h*o*n,x=g*t+t,w=Math.pow(o,2)*Math.pow(h,2)*n,A=Math.exp(-g),C=zw(Math.pow(h,2),o);return(-i(h)+R1>0?-1:1)*((x-w)*A)/C}):(i=h=>{const f=Math.exp(-h*n),g=(h-t)*n+1;return-R1+f*g},a=h=>{const f=Math.exp(-h*n),g=(t-h)*(n*n);return f*g});const c=5/n,u=xF(i,a,c);if(n=md(n),isNaN(u))return{stiffness:Us.stiffness,damping:Us.damping,duration:n};{const h=Math.pow(u,2)*s;return{stiffness:h,damping:o*2*Math.sqrt(s*h),duration:n}}}const pF=12;function xF(n,e,t){let s=t;for(let i=1;i<pF;i++)s=s-n(s)/e(s);return s}function zw(n,e){return n*Math.sqrt(1-e*e)}const bF=["duration","bounce"],yF=["stiffness","damping","mass"];function eE(n,e){return e.some(t=>n[t]!==void 0)}function vF(n){let e={velocity:Us.velocity,stiffness:Us.stiffness,damping:Us.damping,mass:Us.mass,isResolvedFromDuration:!1,...n};if(!eE(n,yF)&&eE(n,bF))if(n.visualDuration){const t=n.visualDuration,s=2*Math.PI/(t*1.2),i=s*s,a=2*bl(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:Us.mass,stiffness:i,damping:a}}else{const t=gF(n);e={...e,...t,mass:Us.mass},e.isResolvedFromDuration=!0}return e}function Zb(n=Us.visualDuration,e=Us.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:s,restDelta:i}=t;const a=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],c={done:!1,value:a},{stiffness:u,damping:h,mass:f,duration:g,velocity:x,isResolvedFromDuration:w}=vF({...t,velocity:-To(t.velocity||0)}),A=x||0,C=h/(2*Math.sqrt(u*f)),E=o-a,T=To(Math.sqrt(u/f)),D=Math.abs(E)<5;s||(s=D?Us.restSpeed.granular:Us.restSpeed.default),i||(i=D?Us.restDelta.granular:Us.restDelta.default);let M;if(C<1){const I=zw(T,C);M=W=>{const V=Math.exp(-C*T*W);return o-V*((A+C*T*E)/I*Math.sin(I*W)+E*Math.cos(I*W))}}else if(C===1)M=I=>o-Math.exp(-T*I)*(E+(A+T*E)*I);else{const I=T*Math.sqrt(C*C-1);M=W=>{const V=Math.exp(-C*T*W),Y=Math.min(I*W,300);return o-V*((A+C*T*E)*Math.sinh(Y)+I*E*Math.cosh(Y))/I}}const L={calculatedDuration:w&&g||null,next:I=>{const W=M(I);if(w)c.done=I>=g;else{let V=I===0?A:0;C<1&&(V=I===0?md(A):wR(M,I,W));const Y=Math.abs(V)<=s,K=Math.abs(o-W)<=i;c.done=Y&&K}return c.value=c.done?o:W,c},toString:()=>{const I=Math.min(aS(L),Kb),W=vR(V=>L.next(I*V).value,I,30);return I+"ms "+W},toTransition:()=>{}};return L}Zb.applyToOptions=n=>{const e=fF(n,100,Zb);return n.ease=e.ease,n.duration=md(e.duration),n.type="keyframes",n};function Iw({keyframes:n,velocity:e=0,power:t=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:c,max:u,restDelta:h=.5,restSpeed:f}){const g=n[0],x={done:!1,value:g},w=Y=>c!==void 0&&Y<c||u!==void 0&&Y>u,A=Y=>c===void 0?u:u===void 0||Math.abs(c-Y)<Math.abs(u-Y)?c:u;let C=t*e;const E=g+C,T=o===void 0?E:o(E);T!==E&&(C=T-g);const D=Y=>-C*Math.exp(-Y/s),M=Y=>T+D(Y),L=Y=>{const K=D(Y),q=M(Y);x.done=Math.abs(K)<=h,x.value=x.done?T:q};let I,W;const V=Y=>{w(x.value)&&(I=Y,W=Zb({keyframes:[x.value,A(x.value)],velocity:wR(M,Y,x.value),damping:i,stiffness:a,restDelta:h,restSpeed:f}))};return V(0),{calculatedDuration:null,next:Y=>{let K=!1;return!W&&I===void 0&&(K=!0,L(Y),V(Y)),I!==void 0&&Y>=I?W.next(Y-I):(!K&&L(Y),x)}}}function wF(n,e,t){const s=[],i=t||pd.mix||yR,a=n.length-1;for(let o=0;o<a;o++){let c=i(n[o],n[o+1]);if(e){const u=Array.isArray(e)?e[o]||pr:e;c=N0(u,c)}s.push(c)}return s}function rS(n,e,{clamp:t=!0,ease:s,mixer:i}={}){const a=n.length;if(Yp(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=wF(e,s,i),u=c.length,h=f=>{if(o&&f<n[0])return e[0];let g=0;if(u>1)for(;g<n.length-2&&!(f<n[g+1]);g++);const x=wm(n[g],n[g+1],f);return c[g](x)};return t?f=>h(bl(n[0],n[a-1],f)):h}function SF(n,e){const t=n[n.length-1];for(let s=1;s<=e;s++){const i=wm(0,e,s);n.push(Cs(t,1,i))}}function SR(n){const e=[0];return SF(e,n.length-1),e}function NF(n,e){return n.map(t=>t*e)}function AF(n,e){return n.map(()=>e||lR).splice(0,n.length-1)}function kp({duration:n=300,keyframes:e,times:t,ease:s="easeInOut"}){const i=F6(s)?s.map(KC):KC(s),a={done:!1,value:e[0]},o=NF(t&&t.length===e.length?t:SR(e),n),c=rS(o,e,{ease:Array.isArray(i)?i:AF(e,i)});return{calculatedDuration:n,next:u=>(a.value=c(u),a.done=u>=n,a)}}const CF=n=>n!==null;function oS(n,{repeat:e,repeatType:t="loop"},s,i=1){const a=n.filter(CF),c=i<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!c||s===void 0?a[c]:s}const EF={decay:Iw,inertia:Iw,tween:kp,keyframes:kp,spring:Zb};function NR(n){typeof n.type=="string"&&(n.type=EF[n.type])}class lS{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const TF=n=>n/100;class Py extends lS{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Va.now()&&this.tick(Va.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;NR(e);const{type:t=kp,repeat:s=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=e;let{keyframes:c}=e;const u=t||kp;u!==kp&&typeof c[0]!="number"&&(this.mixKeyframes=N0(TF,yR(c[0],c[1])),c=[0,100]);const h=u({...e,keyframes:c});a==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...c].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=aS(h));const{calculatedDuration:f}=h;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(s+1)-i,this.generator=h}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:s,totalDuration:i,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return s.next(0);const{delay:h=0,keyframes:f,repeat:g,repeatType:x,repeatDelay:w,type:A,onUpdate:C,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const T=this.currentTime-h*(this.playbackSpeed>=0?1:-1),D=this.playbackSpeed>=0?T<0:T>i;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let M=this.currentTime,L=s;if(g){const Y=Math.min(this.currentTime,i)/c;let K=Math.floor(Y),q=Y%1;!q&&Y>=1&&(q=1),q===1&&K--,K=Math.min(K,g+1),K%2&&(x==="reverse"?(q=1-q,w&&(q-=w/c)):x==="mirror"&&(L=o)),M=bl(0,1,q)*c}const I=D?{done:!1,value:f[0]}:L.next(M);a&&(I.value=a(I.value));let{done:W}=I;!D&&u!==null&&(W=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const V=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&W);return V&&A!==Iw&&(I.value=oS(f,this.options,E,this.speed)),C&&C(I.value),V&&this.finish(),I}then(e,t){return this.finished.then(e,t)}get duration(){return To(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+To(e)}get time(){return To(this.currentTime)}set time(e){e=md(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Va.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=To(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=hF,startTime:t}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=t??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Va.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function _F(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Wh=n=>n*180/Math.PI,Bw=n=>{const e=Wh(Math.atan2(n[1],n[0]));return Hw(e)},jF={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Bw,rotateZ:Bw,skewX:n=>Wh(Math.atan(n[1])),skewY:n=>Wh(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Hw=n=>(n=n%360,n<0&&(n+=360),n),tE=Bw,nE=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),sE=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),kF={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:nE,scaleY:sE,scale:n=>(nE(n)+sE(n))/2,rotateX:n=>Hw(Wh(Math.atan2(n[6],n[5]))),rotateY:n=>Hw(Wh(Math.atan2(-n[2],n[0]))),rotateZ:tE,rotate:tE,skewX:n=>Wh(Math.atan(n[4])),skewY:n=>Wh(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Uw(n){return n.includes("scale")?1:0}function Vw(n,e){if(!n||n==="none")return Uw(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,i;if(t)s=kF,i=t;else{const c=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=jF,i=c}if(!i)return Uw(e);const a=s[e],o=i[1].split(",").map(DF);return typeof a=="function"?a(o):o[a]}const RF=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Vw(t,e)};function DF(n){return parseFloat(n.trim())}const Fm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],zm=new Set(Fm),iE=n=>n===Lm||n===it,MF=new Set(["x","y","z"]),PF=Fm.filter(n=>!MF.has(n));function OF(n){const e=[];return PF.forEach(t=>{const s=n.getValue(t);s!==void 0&&(e.push([t,s.get()]),s.set(t.startsWith("scale")?1:0))}),e}const Du={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Vw(e,"x"),y:(n,{transform:e})=>Vw(e,"y")};Du.translateX=Du.x;Du.translateY=Du.y;const qh=new Set;let Ww=!1,Gw=!1,Yw=!1;function AR(){if(Gw){const n=Array.from(qh).filter(s=>s.needsMeasurement),e=new Set(n.map(s=>s.element)),t=new Map;e.forEach(s=>{const i=OF(s);i.length&&(t.set(s,i),s.render())}),n.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const i=t.get(s);i&&i.forEach(([a,o])=>{s.getValue(a)?.set(o)})}),n.forEach(s=>s.measureEndState()),n.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Gw=!1,Ww=!1,qh.forEach(n=>n.complete(Yw)),qh.clear()}function CR(){qh.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Gw=!0)})}function LF(){Yw=!0,CR(),AR(),Yw=!1}class cS{constructor(e,t,s,i,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=s,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(qh.add(this),Ww||(Ww=!0,Rn.read(CR),Rn.resolveKeyframes(AR))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:s,motionValue:i}=this;if(e[0]===null){const a=i?.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(s&&t){const c=s.readValue(t,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}_F(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),qh.delete(this)}cancel(){this.state==="scheduled"&&(qh.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const FF=n=>n.startsWith("--");function zF(n,e,t){FF(e)?n.style.setProperty(e,t):n.style[e]=t}const ER=J2(()=>window.ScrollTimeline!==void 0),IF={};function BF(n,e){const t=J2(n);return()=>IF[e]??t()}const TR=BF(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),vp=([n,e,t,s])=>`cubic-bezier(${n}, ${e}, ${t}, ${s})`,aE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:vp([0,.65,.55,1]),circOut:vp([.55,0,1,.45]),backIn:vp([.31,.01,.66,-.59]),backOut:vp([.33,1.53,.69,.99])};function _R(n,e){if(n)return typeof n=="function"?TR()?vR(n,e):"ease-out":cR(n)?vp(n):Array.isArray(n)?n.map(t=>_R(t,e)||aE.easeOut):aE[n]}function HF(n,e,t,{delay:s=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:c="easeOut",times:u}={},h=void 0){const f={[e]:t};u&&(f.offset=u);const g=_R(c,i);Array.isArray(g)&&(f.easing=g);const x={delay:s,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return h&&(x.pseudoElement=h),n.animate(f,x)}function jR(n){return typeof n=="function"&&"applyToOptions"in n}function UF({type:n,...e}){return jR(n)&&TR()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class VF extends lS{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:s,keyframes:i,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:c,onComplete:u}=e;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=e,Yp(typeof e.type!="string");const h=UF(e);this.animation=HF(t,s,i,h,a),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const f=oS(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(f):zF(t,s,f),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return To(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+To(e)}get time(){return To(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=md(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&ER()?(this.animation.timeline=e,pr):t(this)}}const kR={anticipate:aR,backInOut:iR,circInOut:oR};function WF(n){return n in kR}function GF(n){typeof n.ease=="string"&&WF(n.ease)&&(n.ease=kR[n.ease])}const D1=10;class YF extends VF{constructor(e){GF(e),NR(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:s,onComplete:i,element:a,...o}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const c=new Py({...o,autoplay:!1}),u=Math.max(D1,Va.now()-this.startTime),h=bl(0,D1,u-D1);t.setWithVelocity(c.sample(Math.max(0,u-h)).value,c.sample(u).value,h),c.stop()}}const rE=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(zu.test(n)||n==="0")&&!n.startsWith("url("));function XF(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function KF(n,e,t,s){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],o=rE(i,e),c=rE(a,e);return!o||!c?!1:XF(n)||(t==="spring"||jR(t))&&s}function Xw(n){n.duration=0,n.type="keyframes"}const ZF=new Set(["opacity","clipPath","filter","transform"]),JF=J2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function QF(n){const{motionValue:e,name:t,repeatDelay:s,repeatType:i,damping:a,type:o}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=e.owner.getProps();return JF()&&t&&ZF.has(t)&&(t!=="transform"||!h)&&!u&&!s&&i!=="mirror"&&a!==0&&o!=="inertia"}const qF=40;class $F extends lS{constructor({autoplay:e=!0,delay:t=0,type:s="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",keyframes:c,name:u,motionValue:h,element:f,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Va.now();const x={autoplay:e,delay:t,type:s,repeat:i,repeatDelay:a,repeatType:o,name:u,motionValue:h,element:f,...g},w=f?.KeyframeResolver||cS;this.keyframeResolver=new w(c,(A,C,E)=>this.onKeyframesResolved(A,C,x,!E),u,h,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,s,i){this.keyframeResolver=void 0;const{name:a,type:o,velocity:c,delay:u,isHandoff:h,onUpdate:f}=s;this.resolvedAt=Va.now(),KF(e,a,o,c)||((pd.instantAnimations||!u)&&f?.(oS(e,s,t)),e[0]=e[e.length-1],Xw(s),s.repeat=0);const x={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>qF?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...s,keyframes:e},w=!h&&QF(x)?new YF({...x,element:x.motionValue.owner.current}):new Py(x);w.finished.then(()=>this.notifyFinished()).catch(pr),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),LF()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const ez=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function tz(n){const e=ez.exec(n);if(!e)return[,];const[,t,s,i]=e;return[`--${t??s}`,i]}function RR(n,e,t=1){const[s,i]=tz(n);if(!s)return;const a=window.getComputedStyle(e).getPropertyValue(s);if(a){const o=a.trim();return Qk(o)?parseFloat(o):o}return tS(i)?RR(i,e,t+1):i}function dS(n,e){return n?.[e]??n?.default??n}const nz={type:"spring",stiffness:500,damping:25,restSpeed:10},sz=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),iz={type:"keyframes",duration:.8},az={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rz=(n,{keyframes:e})=>e.length>2?iz:zm.has(n)?n.startsWith("scale")?sz(e[1]):nz:az;function oz({when:n,delay:e,delayChildren:t,staggerChildren:s,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:c,from:u,elapsed:h,...f}){return!!Object.keys(f).length}const lz=n=>n!==null;function cz(n,{repeat:e,repeatType:t="loop"},s){const i=n.filter(lz),a=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[a]}function DR(n,e,t,s=0,i=1){const a=Array.from(n).sort((h,f)=>h.sortNodePosition(f)).indexOf(e),o=n.size,c=(o-1)*s;return typeof t=="function"?t(a,o):i===1?a*s:c-a*s}const uS=(n,e,t,s={},i,a)=>o=>{const c=dS(s,n)||{},u=c.delay||s.delay||0;let{elapsed:h=0}=s;h=h-md(u);const f={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:x=>{e.set(x),c.onUpdate&&c.onUpdate(x)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:n,motionValue:e,element:a?void 0:i};oz(c)||Object.assign(f,rz(n,f)),f.duration&&(f.duration=md(f.duration)),f.repeatDelay&&(f.repeatDelay=md(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let g=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(Xw(f),f.delay===0&&(g=!0)),(pd.instantAnimations||pd.skipAnimations)&&(g=!0,Xw(f),f.delay=0),f.allowFlatten=!c.type&&!c.ease,g&&!a&&e.get()!==void 0){const x=cz(f.keyframes,c);if(x!==void 0){Rn.update(()=>{f.onUpdate(x),f.onComplete()});return}}return c.isSync?new Py(f):new $F(f)},MR=new Set(["width","height","top","left","right","bottom",...Fm]),oE=30,dz=n=>!isNaN(parseFloat(n)),Rp={current:void 0};class uz{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{const i=Va.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Va.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=dz(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Q2);const s=this.events[e].add(t);return e==="change"?()=>{s(),Rn.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,s){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return Rp.current&&Rp.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Va.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>oE)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,oE);return q2(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ml(n,e){return new uz(n,e)}function lE(n){const e=[{},{}];return n?.values.forEach((t,s)=>{e[0][s]=t.get(),e[1][s]=t.getVelocity()}),e}function hS(n,e,t,s){if(typeof e=="function"){const[i,a]=lE(s);e=e(t!==void 0?t:n.custom,i,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,a]=lE(s);e=e(t!==void 0?t:n.custom,i,a)}return e}function dm(n,e,t){const s=n.getProps();return hS(s,e,t!==void 0?t:s.custom,n)}const Kw=n=>Array.isArray(n);function hz(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,ml(t))}function fz(n){return Kw(n)?n[n.length-1]||0:n}function mz(n,e){const t=dm(n,e);let{transitionEnd:s={},transition:i={},...a}=t||{};a={...a,...s};for(const o in a){const c=fz(a[o]);hz(n,o,c)}}const zi=n=>!!(n&&n.getVelocity);function gz(n){return!!(zi(n)&&n.add)}function Zw(n,e){const t=n.getValue("willChange");if(gz(t))return t.add(e);if(!t&&pd.WillChange){const s=new pd.WillChange("auto");n.addValue("willChange",s),s.add(e)}}function fS(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const pz="framerAppearId",PR="data-"+fS(pz);function OR(n){return n.props[PR]}function xz({protectedKeys:n,needsAnimating:e},t){const s=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,s}function LR(n,e,{delay:t=0,transitionOverride:s,type:i}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:o,...c}=e;s&&(a=s);const u=[],h=i&&n.animationState&&n.animationState.getState()[i];for(const f in c){const g=n.getValue(f,n.latestValues[f]??null),x=c[f];if(x===void 0||h&&xz(h,f))continue;const w={delay:t,...dS(a||{},f)},A=g.get();if(A!==void 0&&!g.isAnimating&&!Array.isArray(x)&&x===A&&!w.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const T=OR(n);if(T){const D=window.MotionHandoffAnimation(T,f,Rn);D!==null&&(w.startTime=D,C=!0)}}Zw(n,f),g.start(uS(f,g,x,n.shouldReduceMotion&&MR.has(f)?{type:!1}:w,n,C));const E=g.animation;E&&u.push(E)}return o&&Promise.all(u).then(()=>{Rn.update(()=>{o&&mz(n,o)})}),u}function Jw(n,e,t={}){const s=dm(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=s||{};t.transitionOverride&&(i=t.transitionOverride);const a=s?()=>Promise.all(LR(n,s,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:g}=i;return bz(n,e,u,h,f,g,t)}:()=>Promise.resolve(),{when:c}=i;if(c){const[u,h]=c==="beforeChildren"?[a,o]:[o,a];return u().then(()=>h())}else return Promise.all([a(),o(t.delay)])}function bz(n,e,t=0,s=0,i=0,a=1,o){const c=[];for(const u of n.variantChildren)u.notify("AnimationStart",e),c.push(Jw(u,e,{...o,delay:t+(typeof s=="function"?0:s)+DR(n.variantChildren,u,s,i,a)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(c)}function yz(n,e,t={}){n.notify("AnimationStart",e);let s;if(Array.isArray(e)){const i=e.map(a=>Jw(n,a,t));s=Promise.all(i)}else if(typeof e=="string")s=Jw(n,e,t);else{const i=typeof e=="function"?dm(n,e,t.custom):e;s=Promise.all(LR(n,i,t))}return s.then(()=>{n.notify("AnimationComplete",e)})}const vz={test:n=>n==="auto",parse:n=>n},FR=n=>e=>e.test(n),zR=[Lm,it,yc,_u,J6,Z6,vz],cE=n=>zR.find(FR(n));function wz(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||$k(n):!0}const Sz=new Set(["brightness","contrast","saturate","opacity"]);function Nz(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[s]=t.match(nS)||[];if(!s)return n;const i=t.replace(s,"");let a=Sz.has(e)?1:0;return s!==t&&(a*=100),e+"("+a+i+")"}const Az=/\b([a-z-]*)\(.*?\)/gu,Qw={...zu,getAnimatableNone:n=>{const e=n.match(Az);return e?e.map(Nz).join(" "):n}},dE={...Lm,transform:Math.round},Cz={rotate:_u,rotateX:_u,rotateY:_u,rotateZ:_u,scale:Gx,scaleX:Gx,scaleY:Gx,scaleZ:Gx,skew:_u,skewX:_u,skewY:_u,distance:it,translateX:it,translateY:it,translateZ:it,x:it,y:it,z:it,perspective:it,transformPerspective:it,opacity:Xp,originX:JC,originY:JC,originZ:it},mS={borderWidth:it,borderTopWidth:it,borderRightWidth:it,borderBottomWidth:it,borderLeftWidth:it,borderRadius:it,radius:it,borderTopLeftRadius:it,borderTopRightRadius:it,borderBottomRightRadius:it,borderBottomLeftRadius:it,width:it,maxWidth:it,height:it,maxHeight:it,top:it,right:it,bottom:it,left:it,inset:it,insetBlock:it,insetBlockStart:it,insetBlockEnd:it,insetInline:it,insetInlineStart:it,insetInlineEnd:it,padding:it,paddingTop:it,paddingRight:it,paddingBottom:it,paddingLeft:it,paddingBlock:it,paddingBlockStart:it,paddingBlockEnd:it,paddingInline:it,paddingInlineStart:it,paddingInlineEnd:it,margin:it,marginTop:it,marginRight:it,marginBottom:it,marginLeft:it,marginBlock:it,marginBlockStart:it,marginBlockEnd:it,marginInline:it,marginInlineStart:it,marginInlineEnd:it,backgroundPositionX:it,backgroundPositionY:it,...Cz,zIndex:dE,fillOpacity:Xp,strokeOpacity:Xp,numOctaves:dE},Ez={...mS,color:bi,backgroundColor:bi,outlineColor:bi,fill:bi,stroke:bi,borderColor:bi,borderTopColor:bi,borderRightColor:bi,borderBottomColor:bi,borderLeftColor:bi,filter:Qw,WebkitFilter:Qw},IR=n=>Ez[n];function BR(n,e){let t=IR(n);return t!==Qw&&(t=zu),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const Tz=new Set(["auto","none","0"]);function _z(n,e,t){let s=0,i;for(;s<n.length&&!i;){const a=n[s];typeof a=="string"&&!Tz.has(a)&&Kp(a).values.length&&(i=n[s]),s++}if(i&&t)for(const a of e)n[a]=BR(t,i)}class jz extends cS{constructor(e,t,s,i,a){super(e,t,s,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:s}=this;if(!t||!t.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let g=e[f];if(typeof g=="string"&&(g=g.trim(),tS(g))){const x=RR(g,t.current);x!==void 0&&(e[f]=x),f===e.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!MR.has(s)||e.length!==2)return;const[i,a]=e,o=cE(i),c=cE(a),u=ZC(i),h=ZC(a);if(u!==h&&Du[s]){this.needsMeasurement=!0;return}if(o!==c)if(iE(o)&&iE(c))for(let f=0;f<e.length;f++){const g=e[f];typeof g=="string"&&(e[f]=parseFloat(g))}else Du[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,s=[];for(let i=0;i<e.length;i++)(e[i]===null||wz(e[i]))&&s.push(i);s.length&&_z(e,s,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Du[s](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(s,i).jump(i,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const a=s.length-1,o=s[a];s[a]=Du[t](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function HR(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){const i=document.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const UR=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function gS(n){return qk(n)&&"offsetHeight"in n}const{schedule:pS}=dR(queueMicrotask,!1),ul={x:!1,y:!1};function VR(){return ul.x||ul.y}function kz(n){return n==="x"||n==="y"?ul[n]?null:(ul[n]=!0,()=>{ul[n]=!1}):ul.x||ul.y?null:(ul.x=ul.y=!0,()=>{ul.x=ul.y=!1})}function WR(n,e){const t=HR(n),s=new AbortController,i={passive:!0,...e,signal:s.signal};return[t,i,()=>s.abort()]}function uE(n){return!(n.pointerType==="touch"||VR())}function Rz(n,e,t={}){const[s,i,a]=WR(n,t),o=c=>{if(!uE(c))return;const{target:u}=c,h=e(u,c);if(typeof h!="function"||!u)return;const f=g=>{uE(g)&&(h(g),u.removeEventListener("pointerleave",f))};u.addEventListener("pointerleave",f,i)};return s.forEach(c=>{c.addEventListener("pointerenter",o,i)}),a}const GR=(n,e)=>e?n===e?!0:GR(n,e.parentElement):!1,xS=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,Dz=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function YR(n){return Dz.has(n.tagName)||n.isContentEditable===!0}const Db=new WeakSet;function hE(n){return e=>{e.key==="Enter"&&n(e)}}function M1(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Mz=(n,e)=>{const t=n.currentTarget;if(!t)return;const s=hE(()=>{if(Db.has(t))return;M1(t,"down");const i=hE(()=>{M1(t,"up")}),a=()=>M1(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",s,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",s),e)};function fE(n){return xS(n)&&!VR()}function Pz(n,e,t={}){const[s,i,a]=WR(n,t),o=c=>{const u=c.currentTarget;if(!fE(c))return;Db.add(u);const h=e(u,c),f=(w,A)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",x),Db.has(u)&&Db.delete(u),fE(w)&&typeof h=="function"&&h(w,{success:A})},g=w=>{f(w,u===window||u===document||t.useGlobalTarget||GR(u,w.target))},x=w=>{f(w,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",x,i)};return s.forEach(c=>{(t.useGlobalTarget?window:c).addEventListener("pointerdown",o,i),gS(c)&&(c.addEventListener("focus",h=>Mz(h,i)),!YR(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function bS(n){return qk(n)&&"ownerSVGElement"in n}const Mb=new WeakMap;let Pb;const XR=(n,e,t)=>(s,i)=>i&&i[0]?i[0][n+"Size"]:bS(s)&&"getBBox"in s?s.getBBox()[e]:s[t],Oz=XR("inline","width","offsetWidth"),Lz=XR("block","height","offsetHeight");function Fz({target:n,borderBoxSize:e}){Mb.get(n)?.forEach(t=>{t(n,{get width(){return Oz(n,e)},get height(){return Lz(n,e)}})})}function zz(n){n.forEach(Fz)}function Iz(){typeof ResizeObserver>"u"||(Pb=new ResizeObserver(zz))}function Bz(n,e){Pb||Iz();const t=HR(n);return t.forEach(s=>{let i=Mb.get(s);i||(i=new Set,Mb.set(s,i)),i.add(e),Pb?.observe(s)}),()=>{t.forEach(s=>{const i=Mb.get(s);i?.delete(e),i?.size||Pb?.unobserve(s)})}}const Ob=new Set;let nm;function Hz(){nm=()=>{const n={get width(){return window.innerWidth},get height(){return window.innerHeight}};Ob.forEach(e=>e(n))},window.addEventListener("resize",nm)}function Uz(n){return Ob.add(n),nm||Hz(),()=>{Ob.delete(n),!Ob.size&&typeof nm=="function"&&(window.removeEventListener("resize",nm),nm=void 0)}}function Vz(n,e){return typeof n=="function"?Uz(n):Bz(n,e)}function KR(n,e){let t;const s=()=>{const{currentTime:i}=e,o=(i===null?0:i.value)/100;t!==o&&n(o),t=o};return Rn.preUpdate(s,!0),()=>yl(s)}function Wz(n){return bS(n)&&n.tagName==="svg"}function Gz(...n){const e=!Array.isArray(n[0]),t=e?0:-1,s=n[0+t],i=n[1+t],a=n[2+t],o=n[3+t],c=rS(i,a,o);return e?c(s):c}function Yz(n,e,t){const s=n.get();let i=null,a=s,o;const c=typeof s=="string"?s.replace(/[\d.-]/g,""):void 0,u=()=>{i&&(i.stop(),i=null)},h=()=>{u(),i=new Py({keyframes:[gE(n.get()),gE(a)],velocity:n.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:o})};if(n.attach((f,g)=>{a=f,o=x=>g(mE(x,c)),Rn.postRender(()=>{h(),n.events.animationStart?.notify(),i?.then(()=>{n.events.animationComplete?.notify()})})},u),zi(e)){const f=e.on("change",x=>n.set(mE(x,c))),g=n.on("destroy",f);return()=>{f(),g()}}return u}function mE(n,e){return e?n+e:n}function gE(n){return typeof n=="number"?n:parseFloat(n)}const Xz=[...zR,bi,zu],Kz=n=>Xz.find(FR(n)),pE=()=>({translate:0,scale:1,origin:0,originPoint:0}),sm=()=>({x:pE(),y:pE()}),xE=()=>({min:0,max:0}),Oi=()=>({x:xE(),y:xE()}),qw={current:null},ZR={current:!1},Zz=typeof window<"u";function Jz(){if(ZR.current=!0,!!Zz)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>qw.current=n.matches;n.addEventListener("change",e),e()}else qw.current=!1}const Qz=new WeakMap;function Oy(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Zp(n){return typeof n=="string"||Array.isArray(n)}const yS=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],vS=["initial",...yS];function Ly(n){return Oy(n.animate)||vS.some(e=>Zp(n[e]))}function JR(n){return!!(Ly(n)||n.variants)}function qz(n,e,t){for(const s in e){const i=e[s],a=t[s];if(zi(i))n.addValue(s,i);else if(zi(a))n.addValue(s,ml(i,{owner:n}));else if(a!==i)if(n.hasValue(s)){const o=n.getValue(s);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=n.getStaticValue(s);n.addValue(s,ml(o!==void 0?o:i,{owner:n}))}}for(const s in t)e[s]===void 0&&n.removeValue(s);return e}const bE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Jb={};function QR(n){Jb=n}function $z(){return Jb}class eI{scrapeMotionValuesFromProps(e,t,s){return{}}constructor({parent:e,props:t,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=cS,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=Va.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Rn.render(this.render,!1,!0))};const{latestValues:u,renderState:h}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=t.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=t,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=Ly(t),this.isVariantNode=JR(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...g}=this.scrapeMotionValuesFromProps(t,{},this);for(const x in g){const w=g[x];u[x]!==void 0&&zi(w)&&w.set(u[x])}}mount(e){this.current=e,Qz.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,s)=>this.bindToMotionValue(s,t)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(ZR.current||Jz(),this.shouldReduceMotion=qw.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),yl(this.notifyUpdate),yl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=zm.has(e);s&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Rn.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Jb){const t=Jb[e];if(!t)continue;const{isEnabled:s,Feature:i}=t;if(!this.features[e]&&i&&s(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Oi()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let s=0;s<bE.length;s++){const i=bE[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=e[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=qz(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const s=this.values.get(e);t!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&t!==void 0&&(s=ml(t===null?void 0:t,{owner:this}),this.addValue(e,s)),s}readValue(e,t){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(Qk(s)||$k(s))?s=parseFloat(s):!Kz(s)&&zu.test(t)&&(s=BR(e,t)),this.setBaseTarget(e,zi(s)?s.get():s)),zi(s)?s.get():s}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let s;if(typeof t=="string"||typeof t=="object"){const a=hS(this.props,t,this.presenceContext?.custom);a&&(s=a[e])}if(t&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!zi(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Q2),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){pS.render(this.render)}}class Wu{constructor(e){this.isMounted=!1,this.node=e}update(){}}class qR extends eI{constructor(){super(...arguments),this.KeyframeResolver=jz}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const s=e.style;return s?s[t]:void 0}removeValueFromRenderState(e,{vars:t,style:s}){delete t[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;zi(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function $R({top:n,left:e,right:t,bottom:s}){return{x:{min:e,max:t},y:{min:n,max:s}}}function tI({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function nI(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),s=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:s.y,right:s.x}}function P1(n){return n===void 0||n===1}function $w({scale:n,scaleX:e,scaleY:t}){return!P1(n)||!P1(e)||!P1(t)}function Oh(n){return $w(n)||eD(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function eD(n){return yE(n.x)||yE(n.y)}function yE(n){return n&&n!=="0%"}function Qb(n,e,t){const s=n-t,i=e*s;return t+i}function vE(n,e,t,s,i){return i!==void 0&&(n=Qb(n,i,s)),Qb(n,t,s)+e}function e2(n,e=0,t=1,s,i){n.min=vE(n.min,e,t,s,i),n.max=vE(n.max,e,t,s,i)}function tD(n,{x:e,y:t}){e2(n.x,e.translate,e.scale,e.originPoint),e2(n.y,t.translate,t.scale,t.originPoint)}const wE=.999999999999,SE=1.0000000000001;function sI(n,e,t,s=!1){const i=t.length;if(!i)return;e.x=e.y=1;let a,o;for(let c=0;c<i;c++){a=t[c],o=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(s&&a.options.layoutScroll&&a.scroll&&a!==a.root&&am(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,tD(n,o)),s&&Oh(a.latestValues)&&am(n,a.latestValues))}e.x<SE&&e.x>wE&&(e.x=1),e.y<SE&&e.y>wE&&(e.y=1)}function im(n,e){n.min=n.min+e,n.max=n.max+e}function NE(n,e,t,s,i=.5){const a=Cs(n.min,n.max,i);e2(n,e,t,a,s)}function am(n,e){NE(n.x,e.x,e.scaleX,e.scale,e.originX),NE(n.y,e.y,e.scaleY,e.scale,e.originY)}function nD(n,e){return $R(nI(n.getBoundingClientRect(),e))}function iI(n,e,t){const s=nD(n,t),{scroll:i}=e;return i&&(im(s.x,i.offset.x),im(s.y,i.offset.y)),s}const aI={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},rI=Fm.length;function oI(n,e,t){let s="",i=!0;for(let a=0;a<rI;a++){const o=Fm[a],c=n[o];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(o.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||t){const h=UR(c,mS[o]);if(!u){i=!1;const f=aI[o]||o;s+=`${f}(${h}) `}t&&(e[o]=h)}}return s=s.trim(),t?s=t(e,i?"":s):i&&(s="none"),s}function wS(n,e,t){const{style:s,vars:i,transformOrigin:a}=n;let o=!1,c=!1;for(const u in e){const h=e[u];if(zm.has(u)){o=!0;continue}else if(hR(u)){i[u]=h;continue}else{const f=UR(h,mS[u]);u.startsWith("origin")?(c=!0,a[u]=f):s[u]=f}}if(e.transform||(o||t?s.transform=oI(e,n.transform,t):s.transform&&(s.transform="none")),c){const{originX:u="50%",originY:h="50%",originZ:f=0}=a;s.transformOrigin=`${u} ${h} ${f}`}}function sD(n,{style:e,vars:t},s,i){const a=n.style;let o;for(o in e)a[o]=e[o];i?.applyProjectionStyles(a,s);for(o in t)a.setProperty(o,t[o])}function AE(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const ip={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(it.test(n))n=parseFloat(n);else return n;const t=AE(n,e.target.x),s=AE(n,e.target.y);return`${t}% ${s}%`}},lI={correct:(n,{treeScale:e,projectionDelta:t})=>{const s=n,i=zu.parse(n);if(i.length>5)return s;const a=zu.createTransformer(n),o=typeof i[0]!="number"?1:0,c=t.x.scale*e.x,u=t.y.scale*e.y;i[0+o]/=c,i[1+o]/=u;const h=Cs(c,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=h),typeof i[3+o]=="number"&&(i[3+o]/=h),a(i)}},t2={borderRadius:{...ip,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ip,borderTopRightRadius:ip,borderBottomLeftRadius:ip,borderBottomRightRadius:ip,boxShadow:lI};function iD(n,{layout:e,layoutId:t}){return zm.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!t2[n]||n==="opacity")}function SS(n,e,t){const s=n.style,i=e?.style,a={};if(!s)return a;for(const o in s)(zi(s[o])||i&&zi(i[o])||iD(o,n)||t?.getValue(o)?.liveStyle!==void 0)&&(a[o]=s[o]);return a}function cI(n){return window.getComputedStyle(n)}class dI extends qR{constructor(){super(...arguments),this.type="html",this.renderInstance=sD}readValueFromInstance(e,t){if(zm.has(t))return this.projection?.isProjecting?Uw(t):RF(e,t);{const s=cI(e),i=(hR(t)?s.getPropertyValue(t):s[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return nD(e,t)}build(e,t,s){wS(e,t,s.transformTemplate)}scrapeMotionValuesFromProps(e,t,s){return SS(e,t,s)}}const uI={offset:"stroke-dashoffset",array:"stroke-dasharray"},hI={offset:"strokeDashoffset",array:"strokeDasharray"};function fI(n,e,t=1,s=0,i=!0){n.pathLength=1;const a=i?uI:hI;n[a.offset]=it.transform(-s);const o=it.transform(e),c=it.transform(t);n[a.array]=`${o} ${c}`}const mI=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function aD(n,{attrX:e,attrY:t,attrScale:s,pathLength:i,pathSpacing:a=1,pathOffset:o=0,...c},u,h,f){if(wS(n,c,h),u){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:g,style:x}=n;g.transform&&(x.transform=g.transform,delete g.transform),(x.transform||g.transformOrigin)&&(x.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),x.transform&&(x.transformBox=f?.transformBox??"fill-box",delete g.transformBox);for(const w of mI)g[w]!==void 0&&(x[w]=g[w],delete g[w]);e!==void 0&&(g.x=e),t!==void 0&&(g.y=t),s!==void 0&&(g.scale=s),i!==void 0&&fI(g,i,a,o,!1)}const rD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),oD=n=>typeof n=="string"&&n.toLowerCase()==="svg";function gI(n,e,t,s){sD(n,e,void 0,s);for(const i in e.attrs)n.setAttribute(rD.has(i)?i:fS(i),e.attrs[i])}function lD(n,e,t){const s=SS(n,e,t);for(const i in n)if(zi(n[i])||zi(e[i])){const a=Fm.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[a]=n[i]}return s}class pI extends qR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Oi}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(zm.has(t)){const s=IR(t);return s&&s.default||0}return t=rD.has(t)?t:fS(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,s){return lD(e,t,s)}build(e,t,s){aD(e,t,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,t,s,i){gI(e,t,s,i)}mount(e){this.isSVGTag=oD(e.tagName),super.mount(e)}}const xI=vS.length;function cD(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?cD(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<xI;t++){const s=vS[t],i=n.props[s];(Zp(i)||i===!1)&&(e[s]=i)}return e}function dD(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let s=0;s<t;s++)if(e[s]!==n[s])return!1;return!0}const bI=[...yS].reverse(),yI=yS.length;function vI(n){return e=>Promise.all(e.map(({animation:t,options:s})=>yz(n,t,s)))}function wI(n){let e=vI(n),t=CE(),s=!0;const i=u=>(h,f)=>{const g=dm(n,f,u==="exit"?n.presenceContext?.custom:void 0);if(g){const{transition:x,transitionEnd:w,...A}=g;h={...h,...A,...w}}return h};function a(u){e=u(n)}function o(u){const{props:h}=n,f=cD(n.parent)||{},g=[],x=new Set;let w={},A=1/0;for(let E=0;E<yI;E++){const T=bI[E],D=t[T],M=h[T]!==void 0?h[T]:f[T],L=Zp(M),I=T===u?D.isActive:null;I===!1&&(A=E);let W=M===f[T]&&M!==h[T]&&L;if(W&&s&&n.manuallyAnimateOnMount&&(W=!1),D.protectedKeys={...w},!D.isActive&&I===null||!M&&!D.prevProp||Oy(M)||typeof M=="boolean")continue;const V=SI(D.prevProp,M);let Y=V||T===u&&D.isActive&&!W&&L||E>A&&L,K=!1;const q=Array.isArray(M)?M:[M];let ne=q.reduce(i(T),{});I===!1&&(ne={});const{prevResolvedValues:le={}}=D,_e={...le,...ne},xe=H=>{Y=!0,x.has(H)&&(K=!0,x.delete(H)),D.needsAnimating[H]=!0;const ee=n.getValue(H);ee&&(ee.liveStyle=!1)};for(const H in _e){const ee=ne[H],he=le[H];if(w.hasOwnProperty(H))continue;let ce=!1;Kw(ee)&&Kw(he)?ce=!dD(ee,he):ce=ee!==he,ce?ee!=null?xe(H):x.add(H):ee!==void 0&&x.has(H)?xe(H):D.protectedKeys[H]=!0}D.prevProp=M,D.prevResolvedValues=ne,D.isActive&&(w={...w,...ne}),s&&n.blockInitialAnimation&&(Y=!1);const je=W&&V;Y&&(!je||K)&&g.push(...q.map(H=>{const ee={type:T};if(typeof H=="string"&&s&&!je&&n.manuallyAnimateOnMount&&n.parent){const{parent:he}=n,ce=dm(he,H);if(he.enteringChildren&&ce){const{delayChildren:G}=ce.transition||{};ee.delay=DR(he.enteringChildren,n,G)}}return{animation:H,options:ee}}))}if(x.size){const E={};if(typeof h.initial!="boolean"){const T=dm(n,Array.isArray(h.initial)?h.initial[0]:h.initial);T&&T.transition&&(E.transition=T.transition)}x.forEach(T=>{const D=n.getBaseTarget(T),M=n.getValue(T);M&&(M.liveStyle=!0),E[T]=D??null}),g.push({animation:E})}let C=!!g.length;return s&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(C=!1),s=!1,C?e(g):Promise.resolve()}function c(u,h){if(t[u].isActive===h)return Promise.resolve();n.variantChildren?.forEach(g=>g.animationState?.setActive(u,h)),t[u].isActive=h;const f=o(u);for(const g in t)t[g].protectedKeys={};return f}return{animateChanges:o,setActive:c,setAnimateFunction:a,getState:()=>t,reset:()=>{t=CE()}}}function SI(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!dD(e,n):!1}function Th(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function CE(){return{animate:Th(!0),whileInView:Th(),whileHover:Th(),whileTap:Th(),whileDrag:Th(),whileFocus:Th(),exit:Th()}}const uD=1e-4,NI=1-uD,AI=1+uD,hD=.01,CI=0-hD,EI=0+hD;function Wa(n){return n.max-n.min}function TI(n,e,t){return Math.abs(n-e)<=t}function EE(n,e,t,s=.5){n.origin=s,n.originPoint=Cs(e.min,e.max,n.origin),n.scale=Wa(t)/Wa(e),n.translate=Cs(t.min,t.max,n.origin)-n.originPoint,(n.scale>=NI&&n.scale<=AI||isNaN(n.scale))&&(n.scale=1),(n.translate>=CI&&n.translate<=EI||isNaN(n.translate))&&(n.translate=0)}function Dp(n,e,t,s){EE(n.x,e.x,t.x,s?s.originX:void 0),EE(n.y,e.y,t.y,s?s.originY:void 0)}function TE(n,e,t){n.min=t.min+e.min,n.max=n.min+Wa(e)}function _I(n,e,t){TE(n.x,e.x,t.x),TE(n.y,e.y,t.y)}function _E(n,e,t){n.min=e.min-t.min,n.max=n.min+Wa(e)}function qb(n,e,t){_E(n.x,e.x,t.x),_E(n.y,e.y,t.y)}function jE(n,e,t,s,i){return n-=e,n=Qb(n,1/t,s),i!==void 0&&(n=Qb(n,1/i,s)),n}function jI(n,e=0,t=1,s=.5,i,a=n,o=n){if(yc.test(e)&&(e=parseFloat(e),e=Cs(o.min,o.max,e/100)-o.min),typeof e!="number")return;let c=Cs(a.min,a.max,s);n===a&&(c-=e),n.min=jE(n.min,e,t,c,i),n.max=jE(n.max,e,t,c,i)}function kE(n,e,[t,s,i],a,o){jI(n,e[t],e[s],e[i],e.scale,a,o)}const kI=["x","scaleX","originX"],RI=["y","scaleY","originY"];function RE(n,e,t,s){kE(n.x,e,kI,t?t.x:void 0,s?s.x:void 0),kE(n.y,e,RI,t?t.y:void 0,s?s.y:void 0)}function DE(n,e){n.min=e.min,n.max=e.max}function dl(n,e){DE(n.x,e.x),DE(n.y,e.y)}function ME(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function PE(n){return n.translate===0&&n.scale===1}function fD(n){return PE(n.x)&&PE(n.y)}function OE(n,e){return n.min===e.min&&n.max===e.max}function DI(n,e){return OE(n.x,e.x)&&OE(n.y,e.y)}function LE(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function mD(n,e){return LE(n.x,e.x)&&LE(n.y,e.y)}function FE(n){return Wa(n.x)/Wa(n.y)}function zE(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function Ao(n){return[n("x"),n("y")]}function MI(n,e,t){let s="";const i=n.x.translate/e.x,a=n.y.translate/e.y,o=t?.z||0;if((i||a||o)&&(s=`translate3d(${i}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:h,rotate:f,rotateX:g,rotateY:x,skewX:w,skewY:A}=t;h&&(s=`perspective(${h}px) ${s}`),f&&(s+=`rotate(${f}deg) `),g&&(s+=`rotateX(${g}deg) `),x&&(s+=`rotateY(${x}deg) `),w&&(s+=`skewX(${w}deg) `),A&&(s+=`skewY(${A}deg) `)}const c=n.x.scale*e.x,u=n.y.scale*e.y;return(c!==1||u!==1)&&(s+=`scale(${c}, ${u})`),s||"none"}const gD=["TopLeft","TopRight","BottomLeft","BottomRight"],PI=gD.length,IE=n=>typeof n=="string"?parseFloat(n):n,BE=n=>typeof n=="number"||it.test(n);function OI(n,e,t,s,i,a){i?(n.opacity=Cs(0,t.opacity??1,LI(s)),n.opacityExit=Cs(e.opacity??1,0,FI(s))):a&&(n.opacity=Cs(e.opacity??1,t.opacity??1,s));for(let o=0;o<PI;o++){const c=`border${gD[o]}Radius`;let u=HE(e,c),h=HE(t,c);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||BE(u)===BE(h)?(n[c]=Math.max(Cs(IE(u),IE(h),s),0),(yc.test(h)||yc.test(u))&&(n[c]+="%")):n[c]=h}(e.rotate||t.rotate)&&(n.rotate=Cs(e.rotate||0,t.rotate||0,s))}function HE(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const LI=pD(0,.5,rR),FI=pD(.5,.95,pr);function pD(n,e,t){return s=>s<n?0:s>e?1:t(wm(n,e,s))}function zI(n,e){const t=Va.now(),s=({timestamp:i})=>{const a=i-t;a>=e&&(yl(s),n(a-e))};return Rn.setup(s,!0),()=>yl(s)}function Jp(n,e,t,s={passive:!0}){return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t)}function Lb(n){return zi(n)?n.get():n}function II(n,e,t){const s=zi(n)?n:ml(n);return s.start(uS("",s,e,t)),s.animation}const BI=(n,e)=>n.depth-e.depth;class HI{constructor(){this.children=[],this.isDirty=!1}add(e){K2(this.children,e),this.isDirty=!0}remove(e){Z2(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(BI),this.isDirty=!1,this.children.forEach(e)}}class UI{constructor(){this.members=[]}add(e){K2(this.members,e),e.scheduleRender()}remove(e){if(Z2(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let s;for(let i=t;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){s=a;break}}return s?(this.promote(s),!0):!1}promote(e,t){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:s}=e;t.onExitComplete&&t.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Fb={hasAnimatedSinceResize:!0,hasEverUpdated:!1},O1=["","X","Y","Z"],VI=1e3;let WI=0;function L1(n,e,t,s){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),s&&(s[n]=0))}function xD(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=OR(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Rn,!(i||a))}const{parent:s}=n;s&&!s.hasCheckedOptimisedAppear&&xD(s)}function bD({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(o={},c=e?.()){this.id=WI++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(XI),this.nodes.forEach(QI),this.nodes.forEach(qI),this.nodes.forEach(KI)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new HI)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Q2),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const u=this.eventHandlers.get(o);u&&u.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=bS(o)&&!Wz(o),this.instance=o;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),n){let f,g=0;const x=()=>this.root.updateBlockedByResize=!1;Rn.read(()=>{g=window.innerWidth}),n(o,()=>{const w=window.innerWidth;w!==g&&(g=w,this.root.updateBlockedByResize=!0,f&&f(),f=zI(x,250),Fb.hasAnimatedSinceResize&&(Fb.hasAnimatedSinceResize=!1,this.nodes.forEach(WE)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:g,hasRelativeLayoutChanged:x,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||h.getDefaultTransition()||sB,{onLayoutAnimationStart:C,onLayoutAnimationComplete:E}=h.getProps(),T=!this.targetLayout||!mD(this.targetLayout,w),D=!g&&x;if(this.options.layoutRoot||this.resumeFrom||D||g&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const M={...dS(A,"layout"),onPlay:C,onComplete:E};(h.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M),this.setAnimationOrigin(f,D)}else g||WE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),yl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach($I),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&xD(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const g=this.path[f];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(UE);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(VE);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(JI),this.nodes.forEach(GI),this.nodes.forEach(YI)):this.nodes.forEach(VE),this.clearAllSnapshots();const c=Va.now();Zi.delta=bl(0,1e3/60,c-Zi.timestamp),Zi.timestamp=c,Zi.isProcessing=!0,T1.update.process(Zi),T1.preRender.process(Zi),T1.render.process(Zi),Zi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,pS.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ZI),this.sharedNodes.forEach(eB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Rn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Rn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Wa(this.snapshot.measuredBox.x)&&!Wa(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Oi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const u=s(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!fD(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;o&&this.instance&&(c||Oh(this.latestValues)||f)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return o&&(u=this.removeTransform(u)),iB(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Oi();const c=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(aB))){const{scroll:h}=this.root;h&&(im(c.x,h.offset.x),im(c.y,h.offset.y))}return c}removeElementScroll(o){const c=Oi();if(dl(c,o),this.scroll?.wasRoot)return c;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:f,options:g}=h;h!==this.root&&f&&g.layoutScroll&&(f.wasRoot&&dl(c,o),im(c.x,f.offset.x),im(c.y,f.offset.y))}return c}applyTransform(o,c=!1){const u=Oi();dl(u,o);for(let h=0;h<this.path.length;h++){const f=this.path[h];!c&&f.options.layoutScroll&&f.scroll&&f!==f.root&&am(u,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Oh(f.latestValues)&&am(u,f.latestValues)}return Oh(this.latestValues)&&am(u,this.latestValues),u}removeTransform(o){const c=Oi();dl(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!Oh(h.latestValues))continue;$w(h.latestValues)&&h.updateSnapshot();const f=Oi(),g=h.measurePageBox();dl(f,g),RE(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return Oh(this.latestValues)&&RE(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Zi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:g}=this.options;if(!this.layout||!(f||g))return;this.resolvedRelativeTargetAt=Zi.timestamp;const x=this.getClosestProjectingParent();x&&this.linkedParentVersion!==x.layoutVersion&&!x.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(x&&x.layout?this.createRelativeTarget(x,this.layout.layoutBox,x.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Oi(),this.targetWithTransforms=Oi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),_I(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):dl(this.target,this.layout.layoutBox),tD(this.target,this.targetDelta)):dl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?this.createRelativeTarget(x,this.target,x.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||$w(this.parent.latestValues)||eD(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,c,u){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Oi(),this.relativeTargetOrigin=Oi(),qb(this.relativeTargetOrigin,c,u),dl(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Zi.timestamp&&(u=!1),u)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;dl(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,x=this.treeScale.y;sI(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Oi());const{target:w}=o;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ME(this.prevProjectionDelta.x,this.projectionDelta.x),ME(this.prevProjectionDelta.y,this.projectionDelta.y)),Dp(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==x||!zE(this.projectionDelta.x,this.prevProjectionDelta.x)||!zE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=sm(),this.projectionDelta=sm(),this.projectionDeltaWithTransform=sm()}setAnimationOrigin(o,c=!1){const u=this.snapshot,h=u?u.latestValues:{},f={...this.latestValues},g=sm();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const x=Oi(),w=u?u.source:void 0,A=this.layout?this.layout.source:void 0,C=w!==A,E=this.getStack(),T=!E||E.members.length<=1,D=!!(C&&!T&&this.options.crossfade===!0&&!this.path.some(nB));this.animationProgress=0;let M;this.mixTargetDelta=L=>{const I=L/1e3;GE(g.x,o.x,I),GE(g.y,o.y,I),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(qb(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),tB(this.relativeTarget,this.relativeTargetOrigin,x,I),M&&DI(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=Oi()),dl(M,this.relativeTarget)),C&&(this.animationValues=f,OI(f,h,this.latestValues,I,D,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=I},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(yl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Rn.update(()=>{Fb.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ml(0)),this.currentAnimation=II(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(VI),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:u,layout:h,latestValues:f}=o;if(!(!c||!u||!h)){if(this!==o&&this.layout&&h&&yD(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||Oi();const g=Wa(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+g;const x=Wa(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+x}dl(c,u),am(c,f),Dp(this.projectionDeltaWithTransform,this.layoutCorrected,c,f)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new UI),this.sharedNodes.get(o).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const h={};u.z&&L1("z",o,h,this.animationValues);for(let f=0;f<O1.length;f++)L1(`rotate${O1[f]}`,o,h,this.animationValues),L1(`skew${O1[f]}`,o,h,this.animationValues);o.render();for(const f in h)o.setStaticValue(f,h[f]),this.animationValues&&(this.animationValues[f]=h[f]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Lb(c?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Lb(c?.pointerEvents)||""),this.hasProjected&&!Oh(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const f=h.animationValues||h.latestValues;this.applyTransformsToTarget();let g=MI(this.projectionDeltaWithTransform,this.treeScale,f);u&&(g=u(f,g)),o.transform=g;const{x,y:w}=this.projectionDelta;o.transformOrigin=`${x.origin*100}% ${w.origin*100}% 0`,h.animationValues?o.opacity=h===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:o.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const A in t2){if(f[A]===void 0)continue;const{correct:C,applyTo:E,isCSSVariable:T}=t2[A],D=g==="none"?f[A]:C(f[A],h);if(E){const M=E.length;for(let L=0;L<M;L++)o[E[L]]=D}else T?this.options.visualElement.renderState.vars[A]=D:o[A]=D}this.options.layoutId&&(o.pointerEvents=h===this?Lb(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(UE),this.root.sharedNodes.clear()}}}function GI(n){n.updateLayout()}function YI(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:s}=n.layout,{animationType:i}=n.options,a=e.source!==n.layout.source;i==="size"?Ao(f=>{const g=a?e.measuredBox[f]:e.layoutBox[f],x=Wa(g);g.min=t[f].min,g.max=g.min+x}):yD(i,e.layoutBox,t)&&Ao(f=>{const g=a?e.measuredBox[f]:e.layoutBox[f],x=Wa(t[f]);g.max=g.min+x,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[f].max=n.relativeTarget[f].min+x)});const o=sm();Dp(o,t,e.layoutBox);const c=sm();a?Dp(c,n.applyTransform(s,!0),e.measuredBox):Dp(c,t,e.layoutBox);const u=!fD(o);let h=!1;if(!n.resumeFrom){const f=n.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:g,layout:x}=f;if(g&&x){const w=Oi();qb(w,e.layoutBox,g.layoutBox);const A=Oi();qb(A,t,x.layoutBox),mD(w,A)||(h=!0),f.options.layoutRoot&&(n.relativeTarget=A,n.relativeTargetOrigin=w,n.relativeParent=f)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:h})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function XI(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function KI(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function ZI(n){n.clearSnapshot()}function UE(n){n.clearMeasurements()}function VE(n){n.isLayoutDirty=!1}function JI(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function WE(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function QI(n){n.resolveTargetDelta()}function qI(n){n.calcProjection()}function $I(n){n.resetSkewAndRotation()}function eB(n){n.removeLeadSnapshot()}function GE(n,e,t){n.translate=Cs(e.translate,0,t),n.scale=Cs(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function YE(n,e,t,s){n.min=Cs(e.min,t.min,s),n.max=Cs(e.max,t.max,s)}function tB(n,e,t,s){YE(n.x,e.x,t.x,s),YE(n.y,e.y,t.y,s)}function nB(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const sB={duration:.45,ease:[.4,0,.1,1]},XE=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),KE=XE("applewebkit/")&&!XE("chrome/")?Math.round:pr;function ZE(n){n.min=KE(n.min),n.max=KE(n.max)}function iB(n){ZE(n.x),ZE(n.y)}function yD(n,e,t){return n==="position"||n==="preserve-aspect"&&!TI(FE(e),FE(t),.2)}function aB(n){return n!==n.root&&n.scroll?.wasRoot}const rB=bD({attachResizeListener:(n,e)=>Jp(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),F1={current:void 0},vD=bD({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!F1.current){const n=new rB({});n.mount(window),n.setOptions({layoutScroll:!0}),F1.current=n}return F1.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),E0=R.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function JE(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function oB(...n){return e=>{let t=!1;const s=n.map(i=>{const a=JE(i,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let i=0;i<s.length;i++){const a=s[i];typeof a=="function"?a():JE(n[i],null)}}}}function lB(...n){return R.useCallback(oB(...n),n)}class cB extends R.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const s=t.offsetParent,i=gS(s)&&s.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function dB({children:n,isPresent:e,anchorX:t,root:s}){const i=R.useId(),a=R.useRef(null),o=R.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=R.useContext(E0),u=n.props?.ref??n?.ref,h=lB(a,u);return R.useInsertionEffect(()=>{const{width:f,height:g,top:x,left:w,right:A}=o.current;if(e||!a.current||!f||!g)return;const C=t==="left"?`left: ${w}`:`right: ${A}`;a.current.dataset.motionPopId=i;const E=document.createElement("style");c&&(E.nonce=c);const T=s??document.head;return T.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${g}px !important;
            ${C}px !important;
            top: ${x}px !important;
          }
        `),()=>{T.contains(E)&&T.removeChild(E)}},[e]),r.jsx(cB,{isPresent:e,childRef:a,sizeRef:o,children:R.cloneElement(n,{ref:h})})}const uB=({children:n,initial:e,isPresent:t,onExitComplete:s,custom:i,presenceAffectsLayout:a,mode:o,anchorX:c,root:u})=>{const h=Vu(hB),f=R.useId();let g=!0,x=R.useMemo(()=>(g=!1,{id:f,initial:e,isPresent:t,custom:i,onExitComplete:w=>{h.set(w,!0);for(const A of h.values())if(!A)return;s&&s()},register:w=>(h.set(w,!1),()=>h.delete(w))}),[t,h,s]);return a&&g&&(x={...x}),R.useMemo(()=>{h.forEach((w,A)=>h.set(A,!1))},[t]),R.useEffect(()=>{!t&&!h.size&&s&&s()},[t]),o==="popLayout"&&(n=r.jsx(dB,{isPresent:t,anchorX:c,root:u,children:n})),r.jsx(My.Provider,{value:x,children:n})};function hB(){return new Map}function wD(n=!0){const e=R.useContext(My);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:i}=e,a=R.useId();R.useEffect(()=>{if(n)return i(a)},[n]);const o=R.useCallback(()=>n&&s&&s(a),[a,s,n]);return!t&&s?[!1,o]:[!0]}const Yx=n=>n.key||"";function QE(n){const e=[];return R.Children.forEach(n,t=>{R.isValidElement(t)&&e.push(t)}),e}const Zn=({children:n,custom:e,initial:t=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:a="sync",propagate:o=!1,anchorX:c="left",root:u})=>{const[h,f]=wD(o),g=R.useMemo(()=>QE(n),[n]),x=o&&!h?[]:g.map(Yx),w=R.useRef(!0),A=R.useRef(g),C=Vu(()=>new Map),E=R.useRef(new Set),[T,D]=R.useState(g),[M,L]=R.useState(g);Dy(()=>{w.current=!1,A.current=g;for(let V=0;V<M.length;V++){const Y=Yx(M[V]);x.includes(Y)?(C.delete(Y),E.current.delete(Y)):C.get(Y)!==!0&&C.set(Y,!1)}},[M,x.length,x.join("-")]);const I=[];if(g!==T){let V=[...g];for(let Y=0;Y<M.length;Y++){const K=M[Y],q=Yx(K);x.includes(q)||(V.splice(Y,0,K),I.push(K))}return a==="wait"&&I.length&&(V=I),L(QE(V)),D(g),null}const{forceRender:W}=R.useContext(X2);return r.jsx(r.Fragment,{children:M.map(V=>{const Y=Yx(V),K=o&&!h?!1:g===M||x.includes(Y),q=()=>{if(E.current.has(Y))return;if(E.current.add(Y),C.has(Y))C.set(Y,!0);else return;let ne=!0;C.forEach(le=>{le||(ne=!1)}),ne&&(W?.(),L(A.current),o&&f?.(),s&&s())};return r.jsx(uB,{isPresent:K,initial:!w.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:u,onExitComplete:K?void 0:q,anchorX:c,children:V},Y)})})},SD=R.createContext({strict:!1}),qE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let $E=!1;function fB(){if($E)return;const n={};for(const e in qE)n[e]={isEnabled:t=>qE[e].some(s=>!!t[s])};QR(n),$E=!0}function ND(){return fB(),$z()}function mB(n){const e=ND();for(const t in n)e[t]={...e[t],...n[t]};QR(e)}const gB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $b(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||gB.has(n)}let AD=n=>!$b(n);function pB(n){typeof n=="function"&&(AD=e=>e.startsWith("on")?!$b(e):n(e))}try{pB(require("@emotion/is-prop-valid").default)}catch{}function xB(n,e,t){const s={};for(const i in n)i==="values"&&typeof n.values=="object"||(AD(i)||t===!0&&$b(i)||!e&&!$b(i)||n.draggable&&i.startsWith("onDrag"))&&(s[i]=n[i]);return s}const Fy=R.createContext({});function bB(n,e){if(Ly(n)){const{initial:t,animate:s}=n;return{initial:t===!1||Zp(t)?t:void 0,animate:Zp(s)?s:void 0}}return n.inherit!==!1?e:{}}function yB(n){const{initial:e,animate:t}=bB(n,R.useContext(Fy));return R.useMemo(()=>({initial:e,animate:t}),[eT(e),eT(t)])}function eT(n){return Array.isArray(n)?n.join(" "):n}const NS=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function CD(n,e,t){for(const s in e)!zi(e[s])&&!iD(s,t)&&(n[s]=e[s])}function vB({transformTemplate:n},e){return R.useMemo(()=>{const t=NS();return wS(t,e,n),Object.assign({},t.vars,t.style)},[e])}function wB(n,e){const t=n.style||{},s={};return CD(s,t,n),Object.assign(s,vB(n,e)),s}function SB(n,e){const t={},s=wB(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=s,t}const ED=()=>({...NS(),attrs:{}});function NB(n,e,t,s){const i=R.useMemo(()=>{const a=ED();return aD(a,e,oD(s),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};CD(a,n.style,n),i.style={...a,...i.style}}return i}const AB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function AS(n){return typeof n!="string"||n.includes("-")?!1:!!(AB.indexOf(n)>-1||/[A-Z]/u.test(n))}function CB(n,e,t,{latestValues:s},i,a=!1,o){const u=(o??AS(n)?NB:SB)(e,s,i,n),h=xB(e,typeof n=="string",a),f=n!==R.Fragment?{...h,...u,ref:t}:{},{children:g}=e,x=R.useMemo(()=>zi(g)?g.get():g,[g]);return R.createElement(n,{...f,children:x})}function EB({scrapeMotionValuesFromProps:n,createRenderState:e},t,s,i){return{latestValues:TB(t,s,i,n),renderState:e()}}function TB(n,e,t,s){const i={},a=s(n,{});for(const x in a)i[x]=Lb(a[x]);let{initial:o,animate:c}=n;const u=Ly(n),h=JR(n);e&&h&&!u&&n.inherit!==!1&&(o===void 0&&(o=e.initial),c===void 0&&(c=e.animate));let f=t?t.initial===!1:!1;f=f||o===!1;const g=f?c:o;if(g&&typeof g!="boolean"&&!Oy(g)){const x=Array.isArray(g)?g:[g];for(let w=0;w<x.length;w++){const A=hS(n,x[w]);if(A){const{transitionEnd:C,transition:E,...T}=A;for(const D in T){let M=T[D];if(Array.isArray(M)){const L=f?M.length-1:0;M=M[L]}M!==null&&(i[D]=M)}for(const D in C)i[D]=C[D]}}}return i}const TD=n=>(e,t)=>{const s=R.useContext(Fy),i=R.useContext(My),a=()=>EB(n,e,s,i);return t?a():Vu(a)},_B=TD({scrapeMotionValuesFromProps:SS,createRenderState:NS}),jB=TD({scrapeMotionValuesFromProps:lD,createRenderState:ED}),kB=Symbol.for("motionComponentSymbol");function RB(n,e,t){const s=R.useRef(t);R.useInsertionEffect(()=>{s.current=t});const i=R.useRef(null);return R.useCallback(a=>{a&&n.onMount?.(a),e&&(a?e.mount(a):e.unmount());const o=s.current;if(typeof o=="function")if(a){const c=o(a);typeof c=="function"&&(i.current=c)}else i.current?(i.current(),i.current=null):o(a);else o&&(o.current=a)},[e])}const _D=R.createContext({});function wp(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function DB(n,e,t,s,i,a){const{visualElement:o}=R.useContext(Fy),c=R.useContext(SD),u=R.useContext(My),h=R.useContext(E0).reducedMotion,f=R.useRef(null);s=s||c.renderer,!f.current&&s&&(f.current=s(n,{visualState:e,parent:o,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h,isSVG:a}));const g=f.current,x=R.useContext(_D);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&MB(f.current,t,i,x);const w=R.useRef(!1);R.useInsertionEffect(()=>{g&&w.current&&g.update(t,u)});const A=t[PR],C=R.useRef(!!A&&!window.MotionHandoffIsComplete?.(A)&&window.MotionHasOptimisedAnimation?.(A));return Dy(()=>{g&&(w.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),C.current&&g.animationState&&g.animationState.animateChanges())}),R.useEffect(()=>{g&&(!C.current&&g.animationState&&g.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(A)}),C.current=!1),g.enteringChildren=void 0)}),g}function MB(n,e,t,s){const{layoutId:i,layout:a,drag:o,dragConstraints:c,layoutScroll:u,layoutRoot:h,layoutCrossfade:f}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:jD(n.parent)),n.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||c&&wp(c),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:s,crossfade:f,layoutScroll:u,layoutRoot:h})}function jD(n){if(n)return n.options.allowProjection!==!1?n.projection:jD(n.parent)}function z1(n,{forwardMotionProps:e=!1,type:t}={},s,i){s&&mB(s);const a=t?t==="svg":AS(n),o=a?jB:_B;function c(h,f){let g;const x={...R.useContext(E0),...h,layoutId:PB(h)},{isStatic:w}=x,A=yB(h),C=o(h,w);if(!w&&Jk){OB();const E=LB(x);g=E.MeasureLayout,A.visualElement=DB(n,C,x,i,E.ProjectionNode,a)}return r.jsxs(Fy.Provider,{value:A,children:[g&&A.visualElement?r.jsx(g,{visualElement:A.visualElement,...x}):null,CB(n,h,RB(C,A.visualElement,f),C,w,e,a)]})}c.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const u=R.forwardRef(c);return u[kB]=n,u}function PB({layoutId:n}){const e=R.useContext(X2).id;return e&&n!==void 0?e+"-"+n:n}function OB(n,e){R.useContext(SD).strict}function LB(n){const e=ND(),{drag:t,layout:s}=e;if(!t&&!s)return{};const i={...t,...s};return{MeasureLayout:t?.isEnabled(n)||s?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function FB(n,e){if(typeof Proxy>"u")return z1;const t=new Map,s=(a,o)=>z1(a,o,n,e),i=(a,o)=>s(a,o);return new Proxy(i,{get:(a,o)=>o==="create"?s:(t.has(o)||t.set(o,z1(o,void 0,n,e)),t.get(o))})}const zB=(n,e)=>e.isSVG??AS(n)?new pI(e):new dI(e,{allowProjection:n!==R.Fragment});class IB extends Wu{constructor(e){super(e),e.animationState||(e.animationState=wI(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Oy(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let BB=0;class HB extends Wu{constructor(){super(...arguments),this.id=BB++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const UB={animation:{Feature:IB},exit:{Feature:HB}};function T0(n){return{point:{x:n.pageX,y:n.pageY}}}const VB=n=>e=>xS(e)&&n(e,T0(e));function Mp(n,e,t,s){return Jp(n,e,VB(t),s)}const kD=({current:n})=>n?n.ownerDocument.defaultView:null,tT=(n,e)=>Math.abs(n-e);function WB(n,e){const t=tT(n.x,e.x),s=tT(n.y,e.y);return Math.sqrt(t**2+s**2)}const nT=new Set(["auto","scroll"]);class RD{constructor(e,t,{transformPagePoint:s,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3,element:c}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=w=>{this.handleScroll(w.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=B1(this.lastMoveEventInfo,this.history),A=this.startEvent!==null,C=WB(w.offset,{x:0,y:0})>=this.distanceThreshold;if(!A&&!C)return;const{point:E}=w,{timestamp:T}=Zi;this.history.push({...E,timestamp:T});const{onStart:D,onMove:M}=this.handlers;A||(D&&D(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,w)},this.handlePointerMove=(w,A)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=I1(A,this.transformPagePoint),Rn.update(this.updatePoint,!0)},this.handlePointerUp=(w,A)=>{this.end();const{onEnd:C,onSessionEnd:E,resumeAnimation:T}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=B1(w.type==="pointercancel"?this.lastMoveEventInfo:I1(A,this.transformPagePoint),this.history);this.startEvent&&C&&C(w,D),E&&E(w,D)},!xS(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=s,this.distanceThreshold=o,this.contextWindow=i||window;const u=T0(e),h=I1(u,this.transformPagePoint),{point:f}=h,{timestamp:g}=Zi;this.history=[{...f,timestamp:g}];const{onSessionStart:x}=t;x&&x(e,B1(h,this.history)),this.removeListeners=N0(Mp(this.contextWindow,"pointermove",this.handlePointerMove),Mp(this.contextWindow,"pointerup",this.handlePointerUp),Mp(this.contextWindow,"pointercancel",this.handlePointerUp)),c&&this.startScrollTracking(c)}startScrollTracking(e){let t=e.parentElement;for(;t;){const s=getComputedStyle(t);(nT.has(s.overflowX)||nT.has(s.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const s=e===window,i=s?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},a={x:i.x-t.x,y:i.y-t.y};a.x===0&&a.y===0||(s?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(e,i),Rn.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),yl(this.updatePoint)}}function I1(n,e){return e?{point:e(n.point)}:n}function sT(n,e){return{x:n.x-e.x,y:n.y-e.y}}function B1({point:n},e){return{point:n,delta:sT(n,DD(e)),offset:sT(n,GB(e)),velocity:YB(e,.1)}}function GB(n){return n[0]}function DD(n){return n[n.length-1]}function YB(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,s=null;const i=DD(n);for(;t>=0&&(s=n[t],!(i.timestamp-s.timestamp>md(e)));)t--;if(!s)return{x:0,y:0};const a=To(i.timestamp-s.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-s.x)/a,y:(i.y-s.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function XB(n,{min:e,max:t},s){return e!==void 0&&n<e?n=s?Cs(e,n,s.min):Math.max(n,e):t!==void 0&&n>t&&(n=s?Cs(t,n,s.max):Math.min(n,t)),n}function iT(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function KB(n,{top:e,left:t,bottom:s,right:i}){return{x:iT(n.x,t,i),y:iT(n.y,e,s)}}function aT(n,e){let t=e.min-n.min,s=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,s]=[s,t]),{min:t,max:s}}function ZB(n,e){return{x:aT(n.x,e.x),y:aT(n.y,e.y)}}function JB(n,e){let t=.5;const s=Wa(n),i=Wa(e);return i>s?t=wm(e.min,e.max-s,n.min):s>i&&(t=wm(n.min,n.max-i,e.min)),bl(0,1,t)}function QB(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const n2=.35;function qB(n=n2){return n===!1?n=0:n===!0&&(n=n2),{x:rT(n,"left","right"),y:rT(n,"top","bottom")}}function rT(n,e,t){return{min:oT(n,e),max:oT(n,t)}}function oT(n,e){return typeof n=="number"?n:n[e]||0}const $B=new WeakMap;class e8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Oi(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:s}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=g=>{t?(this.stopAnimation(),this.snapToCursor(T0(g).point)):this.pauseAnimation()},o=(g,x)=>{this.stopAnimation();const{drag:w,dragPropagation:A,onDragStart:C}=this.getProps();if(w&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=kz(w),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ao(T=>{let D=this.getAxisMotionValue(T).get()||0;if(yc.test(D)){const{projection:M}=this.visualElement;if(M&&M.layout){const L=M.layout.layoutBox[T];L&&(D=Wa(L)*(parseFloat(D)/100))}}this.originPoint[T]=D}),C&&Rn.postRender(()=>C(g,x)),Zw(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},c=(g,x)=>{this.latestPointerEvent=g,this.latestPanInfo=x;const{dragPropagation:w,dragDirectionLock:A,onDirectionLock:C,onDrag:E}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:T}=x;if(A&&this.currentDirection===null){this.currentDirection=t8(T),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",x.point,T),this.updateAxis("y",x.point,T),this.visualElement.render(),E&&E(g,x)},u=(g,x)=>{this.latestPointerEvent=g,this.latestPanInfo=x,this.stop(g,x),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>Ao(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new RD(e,{onSessionStart:a,onStart:o,onMove:c,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:s,contextWindow:kD(this.visualElement),element:this.visualElement.current})}stop(e,t){const s=e||this.latestPointerEvent,i=t||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!s)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&Rn.postRender(()=>c(s,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,s){const{drag:i}=this.getProps();if(!s||!Xx(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(o=XB(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&wp(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=KB(s.layoutBox,e):this.constraints=!1,this.elastic=qB(t),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Ao(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=QB(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!wp(e))return!1;const s=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=iI(s,i.root,this.visualElement.getTransformPagePoint());let o=ZB(i.layout.layoutBox,a);if(t){const c=t(tI(o));this.hasMutatedConstraints=!!c,c&&(o=$R(c))}return o}startAnimation(e){const{drag:t,dragMomentum:s,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},h=Ao(f=>{if(!Xx(f,t,this.currentDirection))return;let g=u&&u[f]||{};o&&(g={min:0,max:0});const x=i?200:1e6,w=i?40:1e7,A={type:"inertia",velocity:s?e[f]:0,bounceStiffness:x,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(f,A)});return Promise.all(h).then(c)}startAxisValueAnimation(e,t){const s=this.getAxisMotionValue(e);return Zw(this.visualElement,e),s.start(uS(e,s,0,t,this.visualElement,!1))}stopAnimation(){Ao(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ao(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),i=s[t];return i||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){Ao(t=>{const{drag:s}=this.getProps();if(!Xx(t,s,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(t);if(i&&i.layout){const{min:o,max:c}=i.layout.layoutBox[t],u=a.get()||0;a.set(e[t]-Cs(o,c,.5)+u)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:s}=this.visualElement;if(!wp(t)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ao(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const u=c.get();i[o]=JB({min:u,max:u},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Ao(o=>{if(!Xx(o,e,null))return;const c=this.getAxisMotionValue(o),{min:u,max:h}=this.constraints[o];c.set(Cs(u,h,i[o]))})}addListeners(){if(!this.visualElement.current)return;$B.set(this.visualElement,this);const e=this.visualElement.current,t=Mp(e,"pointerdown",u=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&!YR(u.target)&&this.start(u)}),s=()=>{const{dragConstraints:u}=this.getProps();wp(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Rn.read(s);const o=Jp(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(Ao(f=>{const g=this.getAxisMotionValue(f);g&&(this.originPoint[f]+=u[f].translate,g.set(g.get()+u[f].translate))}),this.visualElement.render())}));return()=>{o(),t(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=n2,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:s,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:c}}}function Xx(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function t8(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class n8 extends Wu{constructor(e){super(e),this.removeGroupControls=pr,this.removeListeners=pr,this.controls=new e8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||pr}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners()}}const lT=n=>(e,t)=>{n&&Rn.postRender(()=>n(e,t))};class s8 extends Wu{constructor(){super(...arguments),this.removePointerDownListener=pr}onPointerDown(e){this.session=new RD(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:kD(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:lT(e),onStart:lT(t),onMove:s,onEnd:(a,o)=>{delete this.session,i&&Rn.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=Mp(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let H1=!1;class i8 extends R.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s,layoutId:i}=this.props,{projection:a}=e;a&&(t.group&&t.group.add(a),s&&s.register&&i&&s.register(a),H1&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Fb.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:s,drag:i,isPresent:a}=this.props,{projection:o}=s;return o&&(o.isPresent=a,H1=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==a?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||Rn.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),pS.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s}=this.props,{projection:i}=e;H1=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function MD(n){const[e,t]=wD(),s=R.useContext(X2);return r.jsx(i8,{...n,layoutGroup:s,switchLayoutGroup:R.useContext(_D),isPresent:e,safeToRemove:t})}const a8={pan:{Feature:s8},drag:{Feature:n8,ProjectionNode:vD,MeasureLayout:MD}};function cT(n,e,t){const{props:s}=n;n.animationState&&s.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,a=s[i];a&&Rn.postRender(()=>a(e,T0(e)))}class r8 extends Wu{mount(){const{current:e}=this.node;e&&(this.unmount=Rz(e,(t,s)=>(cT(this.node,s,"Start"),i=>cT(this.node,i,"End"))))}unmount(){}}class o8 extends Wu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=N0(Jp(this.node.current,"focus",()=>this.onFocus()),Jp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function dT(n,e,t){const{props:s}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&s.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),a=s[i];a&&Rn.postRender(()=>a(e,T0(e)))}class l8 extends Wu{mount(){const{current:e}=this.node;e&&(this.unmount=Pz(e,(t,s)=>(dT(this.node,s,"Start"),(i,{success:a})=>dT(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const s2=new WeakMap,U1=new WeakMap,c8=n=>{const e=s2.get(n.target);e&&e(n)},d8=n=>{n.forEach(c8)};function u8({root:n,...e}){const t=n||document;U1.has(t)||U1.set(t,{});const s=U1.get(t),i=JSON.stringify(e);return s[i]||(s[i]=new IntersectionObserver(d8,{root:n,...e})),s[i]}function h8(n,e,t){const s=u8(e);return s2.set(n,t),s.observe(n),()=>{s2.delete(n),s.unobserve(n)}}const f8={some:0,all:1};class m8 extends Wu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:s,amount:i="some",once:a}=e,o={root:t?t.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:f8[i]},c=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,a&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:g}=this.node.getProps(),x=h?f:g;x&&x(u)};return h8(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(g8(e,t))&&this.startObserver()}unmount(){}}function g8({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const p8={inView:{Feature:m8},tap:{Feature:l8},focus:{Feature:o8},hover:{Feature:r8}},x8={layout:{ProjectionNode:vD,MeasureLayout:MD}},b8={...UB,...p8,...a8,...x8},ze=FB(b8,zB),y8=50,uT=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),v8=()=>({time:0,x:uT(),y:uT()}),w8={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function hT(n,e,t,s){const i=t[e],{length:a,position:o}=w8[e],c=i.current,u=t.time;i.current=n[`scroll${o}`],i.scrollLength=n[`scroll${a}`]-n[`client${a}`],i.offset.length=0,i.offset[0]=0,i.offset[1]=i.scrollLength,i.progress=wm(0,i.scrollLength,i.current);const h=s-u;i.velocity=h>y8?0:q2(i.current-c,h)}function S8(n,e,t){hT(n,"x",e,t),hT(n,"y",e,t),e.time=t}function N8(n,e){const t={x:0,y:0};let s=n;for(;s&&s!==e;)if(gS(s))t.x+=s.offsetLeft,t.y+=s.offsetTop,s=s.offsetParent;else if(s.tagName==="svg"){const i=s.getBoundingClientRect();s=s.parentElement;const a=s.getBoundingClientRect();t.x+=i.left-a.left,t.y+=i.top-a.top}else if(s instanceof SVGGraphicsElement){const{x:i,y:a}=s.getBBox();t.x+=i,t.y+=a;let o=null,c=s.parentNode;for(;!o;)c.tagName==="svg"&&(o=c),c=s.parentNode;s=o}else break;return t}const i2={start:0,center:.5,end:1};function fT(n,e,t=0){let s=0;if(n in i2&&(n=i2[n]),typeof n=="string"){const i=parseFloat(n);n.endsWith("px")?s=i:n.endsWith("%")?n=i/100:n.endsWith("vw")?s=i/100*document.documentElement.clientWidth:n.endsWith("vh")?s=i/100*document.documentElement.clientHeight:n=i}return typeof n=="number"&&(s=e*n),t+s}const A8=[0,0];function C8(n,e,t,s){let i=Array.isArray(n)?n:A8,a=0,o=0;return typeof n=="number"?i=[n,n]:typeof n=="string"&&(n=n.trim(),n.includes(" ")?i=n.split(" "):i=[n,i2[n]?n:"0"]),a=fT(i[0],t,s),o=fT(i[1],e),a-o}const E8={All:[[0,0],[1,1]]},T8={x:0,y:0};function _8(n){return"getBBox"in n&&n.tagName!=="svg"?n.getBBox():{width:n.clientWidth,height:n.clientHeight}}function j8(n,e,t){const{offset:s=E8.All}=t,{target:i=n,axis:a="y"}=t,o=a==="y"?"height":"width",c=i!==n?N8(i,n):T8,u=i===n?{width:n.scrollWidth,height:n.scrollHeight}:_8(i),h={width:n.clientWidth,height:n.clientHeight};e[a].offset.length=0;let f=!e[a].interpolate;const g=s.length;for(let x=0;x<g;x++){const w=C8(s[x],h[o],u[o],c[a]);!f&&w!==e[a].interpolatorOffsets[x]&&(f=!0),e[a].offset[x]=w}f&&(e[a].interpolate=rS(e[a].offset,SR(s),{clamp:!1}),e[a].interpolatorOffsets=[...e[a].offset]),e[a].progress=bl(0,1,e[a].interpolate(e[a].current))}function k8(n,e=n,t){if(t.x.targetOffset=0,t.y.targetOffset=0,e!==n){let s=e;for(;s&&s!==n;)t.x.targetOffset+=s.offsetLeft,t.y.targetOffset+=s.offsetTop,s=s.offsetParent}t.x.targetLength=e===n?e.scrollWidth:e.clientWidth,t.y.targetLength=e===n?e.scrollHeight:e.clientHeight,t.x.containerLength=n.clientWidth,t.y.containerLength=n.clientHeight}function R8(n,e,t,s={}){return{measure:i=>{k8(n,s.target,t),S8(n,t,i),(s.offset||s.target)&&j8(n,t,s)},notify:()=>e(t)}}const ap=new WeakMap,mT=new WeakMap,V1=new WeakMap,gT=n=>n===document.scrollingElement?window:n;function PD(n,{container:e=document.scrollingElement,...t}={}){if(!e)return pr;let s=V1.get(e);s||(s=new Set,V1.set(e,s));const i=v8(),a=R8(e,n,i,t);if(s.add(a),!ap.has(e)){const c=()=>{for(const g of s)g.measure(Zi.timestamp);Rn.preUpdate(u)},u=()=>{for(const g of s)g.notify()},h=()=>Rn.read(c);ap.set(e,h);const f=gT(e);window.addEventListener("resize",h,{passive:!0}),e!==document.documentElement&&mT.set(e,Vz(e,h)),f.addEventListener("scroll",h,{passive:!0}),h()}const o=ap.get(e);return Rn.read(o,!1,!0),()=>{yl(o);const c=V1.get(e);if(!c||(c.delete(a),c.size))return;const u=ap.get(e);ap.delete(e),u&&(gT(e).removeEventListener("scroll",u),mT.get(e)?.(),window.removeEventListener("resize",u))}}const pT=new Map;function D8(n){const e={value:0},t=PD(s=>{e.value=s[n.axis].progress*100},n);return{currentTime:e,cancel:t}}function OD({source:n,container:e,...t}){const{axis:s}=t;n&&(e=n);const i=pT.get(e)??new Map;pT.set(e,i);const a=t.target??"self",o=i.get(a)??{},c=s+(t.offset??[]).join(",");return o[c]||(o[c]=!t.target&&ER()?new ScrollTimeline({source:e,axis:s}):D8({container:e,...t})),o[c]}function M8(n,e){const t=OD(e);return n.attachTimeline({timeline:e.target?void 0:t,observe:s=>(s.pause(),KR(i=>{s.time=s.iterationDuration*i},t))})}function P8(n){return n.length===2}function O8(n,e){return P8(n)?PD(t=>{n(t[e.axis].progress,t)},e):KR(n,OD(e))}function L8(n,{axis:e="y",container:t=document.scrollingElement,...s}={}){if(!t)return pr;const i={axis:e,container:t,...s};return typeof n=="function"?O8(n,i):M8(n,i)}const F8=()=>({scrollX:ml(0),scrollY:ml(0),scrollXProgress:ml(0),scrollYProgress:ml(0)}),Kx=n=>n?!n.current:!1;function z8({container:n,target:e,...t}={}){const s=Vu(F8),i=R.useRef(null),a=R.useRef(!1),o=R.useCallback(()=>(i.current=L8((c,{x:u,y:h})=>{s.scrollX.set(u.current),s.scrollXProgress.set(u.progress),s.scrollY.set(h.current),s.scrollYProgress.set(h.progress)},{...t,container:n?.current||void 0,target:e?.current||void 0}),()=>{i.current?.()}),[n,e,JSON.stringify(t.offset)]);return Dy(()=>{if(a.current=!1,Kx(n)||Kx(e)){a.current=!0;return}else return o()},[o]),R.useEffect(()=>{if(a.current)return Yp(!Kx(n)),Yp(!Kx(e)),o()},[o]),s}function CS(n){const e=Vu(()=>ml(n)),{isStatic:t}=R.useContext(E0);if(t){const[,s]=R.useState(n);R.useEffect(()=>e.on("change",s),[])}return e}function LD(n,e){const t=CS(e()),s=()=>t.set(e());return s(),Dy(()=>{const i=()=>Rn.preRender(s,!1,!0),a=n.map(o=>o.on("change",i));return()=>{a.forEach(o=>o()),yl(s)}}),t}function I8(n){Rp.current=[],n();const e=LD(Rp.current,n);return Rp.current=void 0,e}function FD(n,e,t,s){if(typeof n=="function")return I8(n);const a=typeof e=="function"?e:Gz(e,t,s);return Array.isArray(n)?xT(n,a):xT([n],([o])=>a(o))}function xT(n,e){const t=Vu(()=>[]);return LD(n,()=>{t.length=0;const s=n.length;for(let i=0;i<s;i++)t[i]=n[i].get();return e(t)})}function B8(n,e={}){const{isStatic:t}=R.useContext(E0),s=()=>zi(n)?n.get():n;if(t)return FD(s);const i=CS(s());return R.useInsertionEffect(()=>Yz(i,n,e),[i,JSON.stringify(e)]),i}const zD=R.createContext(null);function H8(n,e,t,s){if(!s)return n;const i=n.findIndex(f=>f.value===e);if(i===-1)return n;const a=s>0?1:-1,o=n[i+a];if(!o)return n;const c=n[i],u=o.layout,h=Cs(u.min,u.max,.5);return a===1&&c.layout.max+t>h||a===-1&&c.layout.min+t<h?k6(n,i,i+a):n}function U8({children:n,as:e="ul",axis:t="y",onReorder:s,values:i,...a},o){const c=Vu(()=>ze[e]),u=[],h=R.useRef(!1),f=R.useRef(null),g={axis:t,groupRef:f,registerItem:(A,C)=>{const E=u.findIndex(T=>A===T.value);E!==-1?u[E].layout=C[t]:u.push({value:A,layout:C[t]}),u.sort(W8)},updateOrder:(A,C,E)=>{if(h.current)return;const T=H8(u,A,C,E);u!==T&&(h.current=!0,s(T.map(V8).filter(D=>i.indexOf(D)!==-1)))}};R.useEffect(()=>{h.current=!1});const x=A=>{f.current=A,typeof o=="function"?o(A):o&&(o.current=A)},w={overflowAnchor:"none",...a.style};return r.jsx(c,{...a,style:w,ref:x,ignoreStrict:!0,children:r.jsx(zD.Provider,{value:g,children:n})})}const zy=R.forwardRef(U8);function V8(n){return n.value}function W8(n,e){return n.layout.min-e.layout.min}const Zx=50,bT=25,G8=new Set(["auto","scroll"]),Pp=new WeakMap,Op=new WeakMap;let Sp=null;function Y8(){if(Sp){const n=a2(Sp,"y");n&&(Op.delete(n),Pp.delete(n));const e=a2(Sp,"x");e&&e!==n&&(Op.delete(e),Pp.delete(e)),Sp=null}}function X8(n,e){const t=getComputedStyle(n),s=e==="x"?t.overflowX:t.overflowY;return G8.has(s)}function a2(n,e){let t=n?.parentElement;for(;t;){if(X8(t,e))return t;t=t.parentElement}return null}function K8(n,e,t){const s=e.getBoundingClientRect(),i=t==="x"?s.left:s.top,a=t==="x"?s.right:s.bottom,o=n-i,c=a-n;if(o<Zx){const u=1-o/Zx;return{amount:-bT*u*u,edge:"start"}}else if(c<Zx){const u=1-c/Zx;return{amount:bT*u*u,edge:"end"}}return{amount:0,edge:null}}function Z8(n,e,t,s){if(!n)return;Sp=n;const i=a2(n,t);if(!i)return;const{amount:a,edge:o}=K8(e,i,t);if(o===null){Op.delete(i),Pp.delete(i);return}if(Op.get(i)!==o){if(!(o==="start"&&s<0||o==="end"&&s>0))return;Op.set(i,o);const h=t==="x"?i.scrollWidth-i.clientWidth:i.scrollHeight-i.clientHeight;Pp.set(i,h)}if(a>0){const u=Pp.get(i);if((t==="x"?i.scrollLeft:i.scrollTop)>=u)return}t==="x"?i.scrollLeft+=a:i.scrollTop+=a}function yT(n,e=0){return zi(n)?n:CS(e)}function J8({children:n,style:e={},value:t,as:s="li",onDrag:i,onDragEnd:a,layout:o=!0,...c},u){const h=Vu(()=>ze[s]),f=R.useContext(zD),g={x:yT(e.x),y:yT(e.y)},x=FD([g.x,g.y],([T,D])=>T||D?1:"unset"),{axis:w,registerItem:A,updateOrder:C,groupRef:E}=f;return r.jsx(h,{drag:w,...c,dragSnapToOrigin:!0,style:{...e,x:g.x,y:g.y,zIndex:x},layout:o,onDrag:(T,D)=>{const{velocity:M,point:L}=D,I=g[w].get();C(t,I,M[w]),Z8(E.current,L[w],w,M[w]),i&&i(T,D)},onDragEnd:(T,D)=>{Y8(),a&&a(T,D)},onLayoutMeasure:T=>{A(t,T)},ref:u,ignoreStrict:!0,children:n})}const Iy=R.forwardRef(J8);const Q8=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),q8=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),vT=n=>{const e=q8(n);return e.charAt(0).toUpperCase()+e.slice(1)},ID=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),$8=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var eH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const tH=R.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:i="",children:a,iconNode:o,...c},u)=>R.createElement("svg",{ref:u,...eH,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:ID("lucide",i),...!a&&!$8(c)&&{"aria-hidden":"true"},...c},[...o.map(([h,f])=>R.createElement(h,f)),...Array.isArray(a)?a:[a]]));const Ue=(n,e)=>{const t=R.forwardRef(({className:s,...i},a)=>R.createElement(tH,{ref:a,iconNode:e,className:ID(`lucide-${Q8(vT(n))}`,`lucide-${n}`,s),...i}));return t.displayName=vT(n),t};const nH=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],wT=Ue("activity",nH);const sH=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],iH=Ue("arrow-down-right",sH);const aH=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],vl=Ue("arrow-left",aH);const rH=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Qp=Ue("arrow-right",rH);const oH=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],BD=Ue("arrow-up-right",oH);const lH=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],cH=Ue("award",lH);const dH=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],wc=Ue("bell",dH);const uH=[["path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1",key:"ezmyqa"}],["path",{d:"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",key:"e1hn23"}]],hH=Ue("braces",uH);const fH=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],_0=Ue("briefcase",fH);const mH=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],wd=Ue("building-2",mH);const gH=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Gu=Ue("calendar",gH);const pH=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],xH=Ue("chart-line",pH);const bH=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ii=Ue("check",bH);const yH=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Im=Ue("chevron-down",yH);const vH=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ey=Ue("chevron-left",vH);const wH=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],gl=Ue("chevron-right",wH);const SH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],xr=Ue("circle-alert",SH);const NH=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],br=Ue("circle-check-big",NH);const AH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],HD=Ue("circle-check",AH);const CH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],EH=Ue("circle-x",CH);const TH=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Xa=Ue("clock",TH);const _H=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]],jH=Ue("columns-2",_H);const kH=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ES=Ue("dollar-sign",kH);const RH=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],wl=Ue("download",RH);const DH=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],UD=Ue("ellipsis-vertical",DH);const MH=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],TS=Ue("ellipsis",MH);const PH=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],jo=Ue("eye",PH);const OH=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],LH=Ue("facebook",OH);const FH=[["path",{d:"M13 22h5a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v3.3",key:"cvl1xm"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m7.69 16.479 1.29 4.88a.5.5 0 0 1-.698.591l-1.843-.849a1 1 0 0 0-.879.001l-1.846.85a.5.5 0 0 1-.692-.593l1.29-4.88",key:"1ff7gj"}],["circle",{cx:"6",cy:"14",r:"3",key:"a1xfv6"}]],zH=Ue("file-badge",FH);const IH=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],BH=Ue("file-check",IH);const HH=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ls=Ue("file-text",HH);const UH=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],VH=Ue("funnel",UH);const WH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],_S=Ue("globe",WH);const GH=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],By=Ue("grip-vertical",GH);const YH=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],XH=Ue("handshake",YH);const KH=[["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M6 20V4",key:"1w1bmo"}],["path",{d:"M18 20V4",key:"o2hl4u"}]],ZH=Ue("heading",KH);const JH=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],VD=Ue("image",JH);const QH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],qH=Ue("info",QH);const $H=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],eU=Ue("landmark",$H);const tU=[["path",{d:"M18 5a2 2 0 0 1 2 2v8.526a2 2 0 0 0 .212.897l1.068 2.127a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45l1.068-2.127A2 2 0 0 0 4 15.526V7a2 2 0 0 1 2-2z",key:"1pdavp"}],["path",{d:"M20.054 15.987H3.946",key:"14rxg9"}]],nU=Ue("laptop",tU);const sU=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],j0=Ue("layers",sU);const iU=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],aU=Ue("layout-dashboard",iU);const rU=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],WD=Ue("layout-grid",rU);const oU=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],lU=Ue("linkedin",oU);const cU=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],jS=Ue("list",cU);const dU=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],gs=Ue("loader-circle",dU);const uU=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],ty=Ue("loader",uU);const hU=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Iu=Ue("lock",hU);const fU=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],GD=Ue("log-out",fU);const mU=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ri=Ue("mail",mU);const gU=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],pU=Ue("map-pin",gU);const xU=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],YD=Ue("menu",xU);const bU=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],yU=Ue("message-square",bU);const vU=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],lf=Ue("palette",vU);const wU=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],XD=Ue("panels-top-left",wU);const SU=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],k0=Ue("pen-line",SU);const NU=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],cf=Ue("pen-tool",NU);const AU=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],KD=Ue("pen",AU);const CU=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],EU=Ue("percent",CU);const TU=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],_U=Ue("play",TU);const jU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],df=Ue("plus",jU);const kU=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],tf=Ue("printer",kU);const RU=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],DU=Ue("quote",RU);const MU=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],PU=Ue("receipt",MU);const OU=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],LU=Ue("refresh-ccw",OU);const FU=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],kS=Ue("rotate-ccw",FU);const zU=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],IU=Ue("rotate-cw",zU);const BU=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Sl=Ue("save",BU);const HU=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],UU=Ue("scale",HU);const VU=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],WU=Ue("scroll-text",VU);const GU=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],qp=Ue("search",GU);const YU=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ny=Ue("send",YU);const XU=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],R0=Ue("settings",XU);const KU=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],ZD=Ue("share-2",KU);const ZU=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],JU=Ue("shield-check",ZU);const QU=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Bm=Ue("shield",QU);const qU=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],$U=Ue("shopping-bag",qU);const e9=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],JD=Ue("square-check-big",e9);const t9=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],QD=Ue("square",t9);const n9=[["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-6 0c0 2 1 2 1 3.5V13",key:"i9gjdv"}],["path",{d:"M20 15.5a2.5 2.5 0 0 0-2.5-2.5h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1z",key:"1vzg3v"}],["path",{d:"M5 22h14",key:"ehvnwv"}]],s9=Ue("stamp",n9);const i9=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],qD=Ue("star",i9);const a9=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],$D=Ue("text-align-center",a9);const r9=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],eM=Ue("text-align-end",r9);const o9=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],tM=Ue("text-align-start",o9);const l9=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ko=Ue("trash-2",l9);const c9=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],d9=Ue("trending-up",c9);const u9=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],h9=Ue("triangle-alert",u9);const f9=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],m9=Ue("twitter",f9);const g9=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],uf=Ue("type",g9);const p9=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Sm=Ue("upload",p9);const x9=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Mo=Ue("user",x9);const b9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],vc=Ue("users",b9);const y9=[["path",{d:"M15 4V2",key:"z1p9b7"}],["path",{d:"M15 16v-2",key:"px0unx"}],["path",{d:"M8 9h2",key:"1g203m"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M17.8 11.8 19 13",key:"yihg8r"}],["path",{d:"M15 9h.01",key:"x1ddxp"}],["path",{d:"M17.8 6.2 19 5",key:"fd4us0"}],["path",{d:"m3 21 9-9",key:"1jfql5"}],["path",{d:"M12.2 6.2 11 5",key:"i3da3b"}]],RS=Ue("wand",y9);const v9=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ja=Ue("x",v9);const w9=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],DS=Ue("zap",w9);const S9=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Hm=Ue("zoom-in",S9);const N9=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Um=Ue("zoom-out",N9);function A9(){const[n,e]=R.useState(!1),[t,s]=R.useState(!1),i=yr();return R.useEffect(()=>{const o=()=>{e(window.scrollY>20)};return window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)},[]),["/login","/register","/onboarding"].includes(i.pathname)?null:r.jsxs("nav",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${n||t?"bg-white/80 backdrop-blur-md border-b border-slate-200 shadow-sm py-4":"bg-transparent py-6"}`,children:[r.jsxs("div",{className:"max-w-7xl mx-auto px-6 flex items-center justify-between",children:[r.jsxs(Vt,{to:"/",className:"flex items-center gap-2 group",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-900 text-white flex items-center justify-center font-bold text-xl shadow-lg group-hover:scale-105 transition-transform",children:"D"}),r.jsx("span",{className:"text-xl font-bold tracking-tight transition-colors text-slate-900",children:"DocForge"})]}),r.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[r.jsx(W1,{to:"/features",children:"Features"}),r.jsx(W1,{to:"/pricing",children:"Pricing"}),r.jsx(W1,{to:"/about",children:"About"})]}),r.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[r.jsx(Vt,{to:"/login",className:"text-slate-600 font-medium hover:text-slate-900 transition-colors",children:"Sign In"}),r.jsx(Vt,{to:"/register",className:"px-5 py-2.5 bg-slate-900 text-white rounded-lg font-bold hover:bg-slate-800 transition-all hover:shadow-lg hover:-translate-y-0.5",children:"Get Started"})]}),r.jsx("button",{className:"md:hidden text-slate-900",onClick:()=>s(!t),"aria-label":"Toggle mobile menu",children:t?r.jsx(ja,{}):r.jsx(YD,{})})]}),r.jsx(Zn,{children:t&&r.jsx(ze.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-white border-b border-slate-200 overflow-hidden",children:r.jsxs("div",{className:"flex flex-col p-6 gap-4",children:[r.jsx(Jx,{to:"/features",onClick:()=>s(!1),children:"Features"}),r.jsx(Jx,{to:"/pricing",onClick:()=>s(!1),children:"Pricing"}),r.jsx(Jx,{to:"/about",onClick:()=>s(!1),children:"About"}),r.jsx("hr",{className:"border-slate-100 my-2"}),r.jsx(Jx,{to:"/login",onClick:()=>s(!1),children:"Sign In"}),r.jsx(Vt,{to:"/register",onClick:()=>s(!1),className:"w-full py-3 bg-slate-900 text-white rounded-xl font-bold text-center",children:"Get Started"})]})})})]})}const W1=({to:n,children:e})=>r.jsx(Vt,{to:n,className:"text-slate-600 font-medium hover:text-slate-900 transition-colors",children:e}),Jx=({to:n,children:e,onClick:t})=>r.jsx(Vt,{to:n,onClick:t,className:"text-slate-600 font-medium text-lg py-2 block",children:e});function C9(){return r.jsx("footer",{className:"bg-white py-12 px-6 border-t border-slate-200",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 mb-12",children:[r.jsxs("div",{className:"col-span-2 md:col-span-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-slate-900 flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-xl",children:"D"})}),r.jsx("span",{className:"font-bold text-xl text-slate-900",children:"DocForge"})]}),r.jsx("p",{className:"text-slate-500 text-sm leading-relaxed",children:"Forging the future of document management for modern teams."})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-slate-900 mb-4",children:"Product"}),r.jsxs("ul",{className:"space-y-2 text-sm text-slate-500",children:[r.jsx("li",{children:r.jsx(Vt,{to:"/features",className:"hover:text-slate-900 transition-colors",children:"Features"})}),r.jsx("li",{children:r.jsx(Vt,{to:"/pricing",className:"hover:text-slate-900 transition-colors",children:"Pricing"})}),r.jsx("li",{children:r.jsx(Vt,{to:"/changelog",className:"hover:text-slate-900 transition-colors",children:"Changelog"})}),r.jsx("li",{children:r.jsx(Vt,{to:"/blog",className:"hover:text-slate-900 transition-colors",children:"Blogs"})})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-slate-900 mb-4",children:"Company"}),r.jsxs("ul",{className:"space-y-2 text-sm text-slate-500",children:[r.jsx("li",{children:r.jsx(Vt,{to:"/about",className:"hover:text-slate-900 transition-colors",children:"About Us"})}),r.jsx("li",{children:r.jsx(Vt,{to:"/careers",className:"hover:text-slate-900 transition-colors",children:"Careers"})}),r.jsx("li",{children:r.jsx(Vt,{to:"/contact",className:"hover:text-slate-900 transition-colors",children:"Contact"})})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-slate-900 mb-4",children:"Legal"}),r.jsxs("ul",{className:"space-y-2 text-sm text-slate-500",children:[r.jsx("li",{children:r.jsx(Vt,{to:"/privacy",className:"hover:text-slate-900 transition-colors",children:"Privacy Policy"})}),r.jsx("li",{children:r.jsx(Vt,{to:"/terms",className:"hover:text-slate-900 transition-colors",children:"Terms of Service"})})]})]})]}),r.jsxs("div",{className:"pt-8 border-t border-slate-100 flex flex-col md:flex-row justify-between items-center gap-4",children:[r.jsxs("div",{className:"text-slate-500 text-sm",children:[" ",new Date().getFullYear()," TechSynchronic. All rights reserved."]}),r.jsxs("div",{className:"flex gap-6 text-slate-500",children:[r.jsx("a",{href:"#",className:"hover:text-slate-900 transition-colors",children:"Twitter"}),r.jsx("a",{href:"#",className:"hover:text-slate-900 transition-colors",children:"LinkedIn"}),r.jsx("a",{href:"#",className:"hover:text-slate-900 transition-colors",children:"GitHub"})]})]})]})})}function E9(){return r.jsxs("div",{className:"min-h-screen flex flex-col bg-white",children:[r.jsx(A9,{}),r.jsx("main",{className:"flex-grow pt-0",children:r.jsx(b0,{})}),r.jsx(C9,{})]})}const Vm=({title:n,description:e,keywords:t,image:s,url:i,type:a="website",jsonLd:o})=>{const c="DocForge",u="Secure usage of NDAs, Proposals, and Invoices for modern businesses. Streamline your document workflow with DocForge.",h="https://docforgedocs.com",f=`${h}/images/logo.png`,g=n?`${n} | ${c}`:c,x=e||u,w=s?s.startsWith("http")?s:`${h}${s}`:f,A=i?`${h}${i}`:h;return r.jsxs(YL,{children:[r.jsx("title",{children:g}),r.jsx("meta",{name:"description",content:x}),t&&r.jsx("meta",{name:"keywords",content:t}),r.jsx("link",{rel:"canonical",href:A}),r.jsx("meta",{property:"og:type",content:a}),r.jsx("meta",{property:"og:url",content:A}),r.jsx("meta",{property:"og:title",content:g}),r.jsx("meta",{property:"og:description",content:x}),r.jsx("meta",{property:"og:image",content:w}),r.jsx("meta",{property:"og:site_name",content:c}),r.jsx("meta",{property:"og:locale",content:"en_US"}),r.jsx("meta",{name:"twitter:image",content:w}),r.jsx("meta",{name:"twitter:creator",content:"@DocForgeApp"}),o&&r.jsx("script",{type:"application/ld+json",children:JSON.stringify(o)})]})},G1={initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6,ease:"easeOut"}},T9=()=>{const[n,e]=R.useState("create"),t=[{id:"create",label:"Create",icon:ls,color:"bg-indigo-500",content:{title:"Draft at the Speed of Thought",desc:"Forget starting from scratch. Use our smart templates to generate NDAs, Proposals, and Invoices in seconds.",features:["Smart Variables","Rich Text Editor","Branded Templates"],visual:r.jsxs("div",{className:"bg-slate-900 rounded-lg p-6 shadow-2xl border border-slate-700 h-full flex flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),r.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),r.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"})]}),r.jsxs("div",{className:"space-y-3 flex-1",children:[r.jsx("div",{className:"h-4 bg-slate-700 rounded w-3/4 animate-pulse"}),r.jsx("div",{className:"h-4 bg-slate-800 rounded w-1/2"}),r.jsx("div",{className:"h-32 bg-slate-800/50 rounded border border-slate-700 mt-4 p-4",children:r.jsx("span",{className:"text-indigo-400 font-mono text-sm",children:"{{client_name}}"})})]})]})}},{id:"track",label:"Track",icon:j0,color:"bg-purple-500",content:{title:"Total Visibility",desc:"Know exactly when your client opens a document. No more guessing games or awkward follow-ups.",features:["Real-time Open Alerts","Version History","Audit Logs"],visual:r.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-2xl border border-slate-200 h-full flex flex-col relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 p-4",children:r.jsxs("div",{className:"bg-green-100 text-green-700 text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"})," Live"]})}),r.jsx("div",{className:"space-y-4 mt-2",children:[1,2,3].map(s=>r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-slate-50 border border-slate-100",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600",children:r.jsx(vc,{size:14})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"h-2 bg-slate-200 rounded w-24 mb-1"}),r.jsx("div",{className:"h-2 bg-slate-100 rounded w-16"})]})]},s))})]})}},{id:"sign",label:"Get Paid",icon:DS,color:"bg-emerald-500",content:{title:"Close the Deal",desc:"Turn proposals into signed contracts and paid invoices seamlessly. One platform, zero friction.",features:["eSignatures","Instant Invoicing","Auto-Reminders"],visual:r.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-teal-600 rounded-lg p-6 shadow-2xl text-white h-full flex flex-col justify-center items-center",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-white/20 backdrop-blur flex items-center justify-center mb-4",children:r.jsx(br,{size:32,className:"text-white"})}),r.jsx("div",{className:"text-2xl font-bold mb-1",children:"$4,250.00"}),r.jsx("div",{className:"text-emerald-100 text-sm",children:"Invoice Paid"})]})}}];return r.jsxs("div",{className:"bg-slate-50 rounded-3xl p-2 md:p-8 border border-slate-100",children:[r.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-12",children:t.map(s=>r.jsxs("button",{onClick:()=>e(s.id),className:`px-6 py-3 rounded-full font-bold text-sm transition-all duration-300 flex items-center gap-2 ${n===s.id?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/30 scale-105":"bg-white text-slate-600 hover:bg-slate-100 border border-slate-200"}`,children:[r.jsx(s.icon,{size:16}),s.label]},s.id))}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center min-h-[400px]",children:[r.jsx(Zn,{mode:"wait",children:r.jsxs(ze.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3},className:"space-y-6 px-4",children:[r.jsx("h3",{className:"text-3xl font-bold text-slate-900",children:t.find(s=>s.id===n).content.title}),r.jsx("p",{className:"text-lg text-slate-600 leading-relaxed",children:t.find(s=>s.id===n).content.desc}),r.jsx("ul",{className:"space-y-3",children:t.find(s=>s.id===n).content.features.map((s,i)=>r.jsxs("li",{className:"flex items-center gap-3 text-slate-700 font-medium",children:[r.jsx("div",{className:`p-1 rounded-full ${n==="create"?"bg-indigo-100 text-indigo-600":n==="track"?"bg-purple-100 text-purple-600":"bg-emerald-100 text-emerald-600"}`,children:r.jsx(br,{size:14})}),s]},i))})]},n)}),r.jsx(Zn,{mode:"wait",children:r.jsx(ze.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.05},transition:{duration:.3},className:"h-full min-h-[300px]",children:t.find(s=>s.id===n).content.visual},n+"-visual")})]})]})},Y1=({quote:n,author:e,role:t,company:s})=>r.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-slate-100 hover:shadow-xl hover:-translate-y-1 transition-all duration-300",children:[r.jsx("div",{className:"flex gap-1 text-amber-400 mb-4",children:[1,2,3,4,5].map(i=>r.jsx(qD,{size:16,fill:"currentColor"},i))}),r.jsxs("p",{className:"text-slate-700 text-lg leading-relaxed mb-6 font-medium",children:['"',n,'"']}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-400 font-bold text-sm",children:e[0]}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-slate-900 text-sm",children:e}),r.jsxs("div",{className:"text-slate-500 text-xs",children:[t,", ",s]})]})]})]}),X1=({question:n,answer:e})=>{const[t,s]=R.useState(!1);return r.jsxs("div",{className:"border-b border-slate-200 last:border-0",children:[r.jsxs("button",{onClick:()=>s(!t),className:"w-full py-6 flex items-center justify-between text-left focus:outline-none group",children:[r.jsx("span",{className:"text-lg font-bold text-slate-900 group-hover:text-indigo-600 transition-colors",children:n}),r.jsx(gl,{className:`text-slate-400 transition-transform duration-300 ${t?"rotate-90":""}`})]}),r.jsx(Zn,{children:t&&r.jsx(ze.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:r.jsx("p",{className:"pb-6 text-slate-600 leading-relaxed pr-8",children:e})})})]})},_9=()=>r.jsxs("div",{className:"min-h-screen bg-white font-sans selection:bg-indigo-100 selection:text-indigo-900 overflow-x-hidden",children:[r.jsx(Vm,{title:"NDA Generator, Proposal Software & Invoicing for Freelancers",description:"Securely create and sign NDAs, Proposals, and Invoices. The best document management platform for modern freelancers and agencies.",keywords:"NDA Generator, Proposal Software, Invoice Maker, Freelance Tools, eSignature, Document Management"}),r.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[r.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[1000px] h-[600px] bg-indigo-50/80 rounded-full blur-3xl opacity-50 -z-10"}),r.jsx("div",{className:"absolute top-0 inset-x-0 h-px bg-gradient-to-r from-transparent via-indigo-100 to-transparent"})]}),r.jsxs("div",{className:"relative z-10",children:[r.jsxs("section",{className:"relative pt-32 pb-32 lg:pt-48 lg:pb-40 px-6 overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0 -z-10 pointer-events-none overflow-hidden",children:[r.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-purple-500/30 rounded-full blur-[100px] animate-blob mix-blend-multiply"}),r.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[40%] h-[40%] bg-indigo-500/30 rounded-full blur-[100px] animate-blob animation-delay-2000 mix-blend-multiply"}),r.jsx("div",{className:"absolute top-[20%] left-[20%] w-[40%] h-[40%] bg-pink-500/20 rounded-full blur-[100px] animate-blob animation-delay-4000 mix-blend-multiply"}),r.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 brightness-100 contrast-150"})]}),r.jsxs("div",{className:"max-w-6xl mx-auto text-center relative z-10",children:[r.jsxs(ze.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-slate-900/5 border border-slate-900/10 text-slate-600 font-bold text-[10px] uppercase tracking-wider mb-8 shadow-sm backdrop-blur-md",children:[r.jsxs("span",{className:"relative flex h-2 w-2",children:[r.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-75"}),r.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-indigo-500"})]}),"v2.0 Now Available"]}),r.jsxs("h1",{className:"text-6xl md:text-8xl font-black tracking-tighter text-slate-900 mb-8 leading-[1]",children:["The OS for ",r.jsx("br",{className:"hidden md:block"}),r.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 via-purple-600 to-indigo-600",children:"Modern Agencies."})]}),r.jsx(ze.p,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.2,ease:[.22,1,.36,1]},className:"text-xl md:text-2xl text-slate-500 max-w-2xl mx-auto mb-12 leading-relaxed font-medium",children:"Create proposals that win, contracts that protect, and invoices that get paid. All in one fluid workspace."}),r.jsxs(ze.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.3},className:"flex flex-col sm:flex-row items-center justify-center gap-4 mb-20",children:[r.jsxs(Vt,{to:"/register",className:"w-full sm:w-auto px-8 py-4 bg-slate-900 text-white rounded-full font-bold text-lg hover:bg-slate-800 transition-all hover:scale-105 hover:shadow-2xl hover:shadow-indigo-500/20 flex items-center justify-center gap-2 group relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500 to-purple-500 opacity-0 group-hover:opacity-10 transition-opacity"}),"Start Free Trial",r.jsx(Qp,{className:"group-hover:translate-x-1 transition-transform"})]}),r.jsxs(Vt,{to:"/features",className:"w-full sm:w-auto px-8 py-4 bg-white text-slate-900 border border-slate-200 rounded-full font-bold text-lg hover:bg-slate-50 transition-all hover:border-slate-300 flex items-center justify-center gap-2 shadow-sm hover:shadow-md",children:[r.jsx(_U,{size:18,fill:"currentColor",className:"text-slate-900"}),"Watch Demo"]})]}),r.jsxs(ze.div,{initial:{opacity:0,y:100,rotateX:20},whileInView:{opacity:1,y:0,rotateX:0},viewport:{once:!0,margin:"-100px"},transition:{duration:1.2,type:"spring",bounce:.2},style:{perspective:"2000px"},className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs(ze.div,{className:"relative rounded-2xl bg-slate-900 p-3 shadow-2xl ring-1 ring-slate-900/10",whileHover:{rotateX:5,scale:1.02},transition:{duration:.5},style:{transformStyle:"preserve-3d",transformOrigin:"center bottom"},children:[r.jsxs("div",{className:"rounded-xl overflow-hidden bg-slate-950 border border-slate-800 aspect-[16/10] relative shadow-inner",children:[r.jsx("div",{className:"absolute inset-x-0 top-0 h-10 bg-slate-900 border-b border-slate-800 flex items-center px-4 gap-2 z-10 transition-opacity duration-500",children:r.jsxs("div",{className:"flex gap-1.5",children:[r.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-500/20"}),r.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-amber-500/20"}),r.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-emerald-500/20"})]})}),r.jsx("div",{className:"absolute inset-0 top-10 flex bg-slate-950",children:r.jsx("img",{src:"/images/user-dashboard.png",alt:"DocForge Dashboard Interface",className:"w-full h-full object-cover object-top opacity-95 group-hover:opacity-100 transition-opacity duration-500"})}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-white/5 to-transparent pointer-events-none"})]}),r.jsx(ze.div,{className:"absolute -right-12 top-20 bg-white dark:bg-slate-800 p-4 rounded-xl shadow-2xl border border-slate-200 dark:border-slate-700 hidden lg:block",animate:{y:[0,-10,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},style:{transform:"translateZ(50px)"},children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600",children:r.jsx(br,{size:20})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-slate-500 font-bold uppercase tracking-wider",children:"Status Update"}),r.jsx("div",{className:"font-bold text-slate-900 dark:text-white",children:"Proposal Signed"})]})]})}),r.jsx(ze.div,{className:"absolute -left-12 bottom-20 bg-white dark:bg-slate-800 p-4 rounded-xl shadow-2xl border border-slate-200 dark:border-slate-700 hidden lg:block",animate:{y:[0,10,0]},transition:{duration:5,repeat:1/0,ease:"easeInOut",delay:1},style:{transform:"translateZ(80px)"},children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"flex -space-x-3",children:[1,2,3].map(n=>r.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 border-2 border-white"},n))}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-slate-500 font-bold uppercase tracking-wider",children:"Team"}),r.jsx("div",{className:"font-bold text-slate-900 dark:text-white",children:"3 Active Viewing"})]})]})})]}),r.jsx("div",{className:"absolute -inset-x-20 -bottom-20 h-40 bg-indigo-500/20 blur-[100px] -z-10 opacity-60"})]})]})]}),r.jsxs("section",{className:"py-10 border-y border-slate-100 bg-white/50 backdrop-blur-sm mb-32",children:[r.jsx("p",{className:"text-center text-xs font-bold text-slate-500 uppercase tracking-widest mb-8",children:"Trusted by industry leaders"}),r.jsxs("div",{className:"w-full inline-flex flex-nowrap overflow-hidden [mask-image:_linear-gradient(to_right,transparent_0,_black_128px,_black_calc(100%-128px),transparent_100%)]",children:[r.jsx("ul",{className:"flex items-center justify-center md:justify-start [&_li]:mx-8 [&_img]:max-w-none animate-infinite-scroll",children:["Acme Corp","GlobalBank","Nebula","SaaS Flow","TechStar","Vortex","Acme Corp","GlobalBank"].map((n,e)=>r.jsx("li",{className:"text-xl font-bold text-slate-400 whitespace-nowrap uppercase tracking-widest font-mono",children:n},e))}),r.jsx("ul",{className:"flex items-center justify-center md:justify-start [&_li]:mx-8 [&_img]:max-w-none animate-infinite-scroll","aria-hidden":"true",children:["Acme Corp","GlobalBank","Nebula","SaaS Flow","TechStar","Vortex","Acme Corp","GlobalBank"].map((n,e)=>r.jsx("li",{className:"text-xl font-bold text-slate-400 whitespace-nowrap uppercase tracking-widest font-mono",children:n},e))})]})]}),r.jsxs("section",{className:"max-w-7xl mx-auto px-6 mb-32",children:[r.jsxs(ze.div,{...G1,className:"text-center mb-16",children:[r.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-6 tracking-tight",children:"One flow to rule them all."}),r.jsx("p",{className:"text-xl text-slate-500 max-w-2xl mx-auto",children:"Stop switching between Word, Gmail, and Docusign. DocForge unifies your entire document lifecycle."})]}),r.jsx(T9,{})]}),r.jsxs("section",{className:"bg-slate-900 py-32 relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 inset-x-0 h-px bg-white/10"}),r.jsx("div",{className:"absolute bottom-0 inset-x-0 h-px bg-white/10"}),r.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-10 brightness-100 contrast-150 mix-blend-overlay"}),r.jsxs("div",{className:"max-w-7xl mx-auto px-6 relative z-10",children:[r.jsxs(ze.div,{...G1,className:"text-center mb-20",children:[r.jsx("h2",{className:"text-3xl md:text-5xl font-bold text-white mb-6",children:"Loved by Builders."}),r.jsx("p",{className:"text-lg text-slate-400 max-w-xl mx-auto",children:"Don't just take our word for it. Here's what the community is building with DocForge."})]}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[r.jsx(Y1,{quote:"The share tracking feature alone changed how we follow up on proposals. Our close rate went up by 30%.",author:"Sarah Jenkins",role:"CEO",company:"DesignCraft"}),r.jsx(Y1,{quote:"Finally, an interface that doesn't feel like it was built in 2010. It's actually a joy to use.",author:"Marcus Chen",role:"Freelance Dev",company:"Indie"}),r.jsx(Y1,{quote:"We streamlined our entire NDA process. What used to take days now takes minutes. Invaluable.",author:"Elena Rodriguez",role:"Operations",company:"TechFlow"})]})]})]}),r.jsxs("section",{className:"max-w-4xl mx-auto px-6 py-32",children:[r.jsx(ze.div,{...G1,className:"text-center mb-16",children:r.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-slate-900 mb-4",children:"Frequently Asked Questions"})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(X1,{question:"Is DocForge legally binding?",answer:"Yes. DocForge uses compliant eSignature standards. We record IP addresses and timestamps for every action to create a secure audit trail."}),r.jsx(X1,{question:"Can I bring my own branding?",answer:"Absolutely. On the Pro plan, you can remove DocForge branding, add your own logo, and customize the color scheme of your emails and dashboard."}),r.jsx(X1,{question:"How does the free trial work?",answer:"You get full access to the Pro plan for 14 days. No credit card required. If you don't upgrade, you'll be moved to the Free tier which still includes unlimited NDAs."})]})]}),r.jsx("section",{className:"py-24 px-6 relative overflow-hidden",children:r.jsxs("div",{className:"max-w-5xl mx-auto relative z-10 bg-indigo-600 rounded-3xl p-12 md:p-20 text-center shadow-2xl shadow-indigo-500/30 overflow-hidden group",children:[r.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),r.jsx("h2",{className:"text-3xl md:text-5xl font-bold text-white mb-8 relative z-10",children:"Forging the future, today."}),r.jsx("p",{className:"text-indigo-100 text-xl mb-10 max-w-2xl mx-auto relative z-10",children:"Join 10,000+ others who have upgraded their document workflow."}),r.jsx(Vt,{to:"/register",className:"relative z-10 inline-flex items-center gap-2 px-10 py-5 bg-white text-indigo-600 rounded-xl font-bold text-lg hover:bg-indigo-50 transition-all hover:scale-105 shadow-xl",children:"Get Started Now"})]})})]})]}),Gh=R.forwardRef(({icon:n,name:e,type:t,value:s,onChange:i,placeholder:a,error:o,disabled:c},u)=>r.jsxs("div",{className:"relative group",children:[r.jsx(n,{className:`absolute left-4 top-3.5 transition-colors duration-200 ${o?"text-red-400":"text-slate-400 group-focus-within:text-indigo-600"}`,size:20}),r.jsx("input",{ref:u,type:t,name:e,value:s,onChange:i,disabled:c,placeholder:a,className:`w-full bg-slate-50 border text-slate-900 text-sm rounded-xl block w-full pl-12 p-3.5 transition-all outline-none disabled:opacity-50 disabled:cursor-not-allowed ${o?"border-red-300 focus:ring-2 focus:ring-red-200 focus:border-red-500 bg-red-50/10":"border-slate-200 focus:ring-2 focus:ring-indigo-600/20 focus:border-indigo-600 hover:border-slate-300"}`}),r.jsx(Zn,{children:o&&r.jsx(ze.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-4 top-3.5 text-red-500 pointer-events-none",children:r.jsx(xr,{size:20})})}),r.jsx(Zn,{children:o&&r.jsx(ze.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-red-500 text-xs mt-1.5 ml-1 font-medium pl-1",children:o})})]}));Gh.displayName="AuthInput";const nM=({text:n="Continue with Google"})=>{const e=()=>{const s="http://127.0.0.1:8000/api/v1".replace(/\/api\/v1\/?$/,"");window.location.href=`${s}/auth/google`};return r.jsxs(ze.button,{whileHover:{scale:1.01,backgroundColor:"#f8fafc"},whileTap:{scale:.98},type:"button",onClick:e,className:"w-full bg-white border border-slate-200 text-slate-700 font-bold py-3.5 px-4 rounded-xl hover:border-slate-300 hover:shadow-sm transition-all flex items-center justify-center gap-3 relative overflow-hidden group",children:[r.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[r.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),r.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),r.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),r.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),r.jsx("span",{className:"relative z-10",children:n})]})};function j9(){const n=yr(),e=yi(),{setToken:t}=so(),[s,i]=R.useState({email:"",password:""}),[a,o]=R.useState({}),[c,u]=R.useState(n.state?.message||null),[h,f]=R.useState(!1),g=R.useRef(null),x=R.useRef(null),w=E=>{i({...s,[E.target.name]:E.target.value}),a[E.target.name]&&o(T=>({...T,[E.target.name]:null}))},A=()=>{const E={};return s.email?/\S+@\S+\.\S+/.test(s.email)||(E.email="Please enter a valid email address"):E.email="Email address is required",s.password||(E.password="Password is required"),o(E),Object.keys(E).length===0},C=async E=>{if(E.preventDefault(),u(null),!A()){!s.email||!/\S+@\S+\.\S+/.test(s.email)?g.current?.focus():s.password||x.current?.focus();return}f(!0);try{const T=await N6(s);t(T.token),T.data.business?e("/dashboard"):e("/onboarding")}catch(T){const D=T.response?.data?.message;u(D||"Login failed. Please check your credentials.")}finally{f(!1)}};return r.jsxs("form",{onSubmit:C,className:"flex flex-col gap-5",children:[r.jsx(Zn,{children:c&&r.jsxs(ze.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm border border-red-100 flex items-center gap-2 overflow-hidden",children:[r.jsx(xr,{size:16,className:"shrink-0"}),c]})}),r.jsx("div",{className:"mb-2",children:r.jsx(nM,{text:"Sign in with Google"})}),r.jsxs("div",{className:"relative flex items-center justify-center mb-2",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-slate-200"})}),r.jsx("span",{className:"relative z-10 bg-white px-2 text-xs text-slate-400 font-medium uppercase tracking-wider",children:"Or sign in with email"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Gh,{icon:ri,name:"email",type:"email",value:s.email,onChange:w,placeholder:"Email Address",ref:g,error:a.email}),r.jsx(Gh,{icon:Iu,name:"password",type:"password",value:s.password,onChange:w,placeholder:"Password",ref:x,error:a.password})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-600"}),r.jsx("span",{className:"text-slate-600",children:"Remember me"})]}),r.jsx(Vt,{to:"/forgot-password",className:"text-indigo-600 hover:text-indigo-700 font-medium hover:underline",children:"Forgot Password?"})]}),r.jsx("button",{type:"submit",disabled:h,className:"w-full bg-slate-900 text-white font-bold py-3.5 px-4 rounded-xl hover:bg-slate-800 transition-all focus:ring-4 focus:ring-slate-900/20 disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2 mt-2 relative overflow-hidden active:scale-[0.98]",children:h?r.jsxs(r.Fragment,{children:[r.jsx(gs,{className:"animate-spin",size:20}),"Signing in..."]}):"Sign In"}),r.jsx("div",{className:"text-center mt-6",children:r.jsxs("p",{className:"text-slate-500 text-sm",children:["Don't have an account?"," ",r.jsx(Vt,{to:"/register",className:"text-indigo-600 font-bold hover:underline",children:"Create one free"})]})})]})}const Nm=({children:n,title:e,subtitle:t})=>{const s=n||r.jsx(b0,{});return r.jsxs("div",{className:"min-h-screen flex bg-white font-sans selection:bg-indigo-100 selection:text-indigo-900",children:[r.jsxs("div",{className:"hidden lg:flex w-1/2 bg-slate-900 relative overflow-hidden items-center justify-center p-12",children:[r.jsxs("div",{className:"absolute inset-0 z-0",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-900/60 via-slate-900 to-slate-900"}),r.jsx("div",{className:"absolute -top-32 -left-32 w-96 h-96 bg-indigo-500/20 rounded-full blur-3xl mix-blend-multiply filter animate-blob"}),r.jsx("div",{className:"absolute -bottom-32 -right-32 w-96 h-96 bg-purple-500/20 rounded-full blur-3xl mix-blend-multiply filter animate-blob animation-delay-2000"}),r.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 brightness-100 contrast-150"})]}),r.jsxs("div",{className:"relative z-10 max-w-lg text-center lg:text-left",children:[r.jsxs(Vt,{to:"/",className:"flex items-center gap-3 mb-12 group w-fit",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/10 backdrop-blur-sm border border-white/20 flex items-center justify-center group-hover:bg-white/20 transition-colors",children:r.jsx("span",{className:"text-white font-bold text-xl",children:"D"})}),r.jsx("span",{className:"font-bold text-2xl text-white",children:"DocForge"})]}),r.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[r.jsx(DU,{className:"text-indigo-400 mb-6 w-10 h-10 opacity-50"}),r.jsxs("h2",{className:"text-3xl md:text-5xl font-bold text-white mb-6 leading-tight",children:["Build details. ",r.jsx("br",{}),r.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400",children:"Scale vision."})]}),r.jsx("p",{className:"text-lg text-slate-400 leading-relaxed mb-8",children:'"DocForge has completely transformed how we handle proposals. What used to take hours now takes minutes, and clients are impressed by the professional look."'}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-500/20 border border-indigo-500/30"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-white",children:"Sarah Jenkins"}),r.jsx("p",{className:"text-slate-500 text-sm",children:"CEO, Creative Studio"})]})]})]})]})]}),r.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8 lg:p-12 relative",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"mb-10 text-center lg:text-left",children:[e&&r.jsx(ze.h2,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"text-3xl font-bold text-slate-900 mb-2",children:e}),t&&r.jsx(ze.p,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},className:"text-slate-500",children:t})]}),r.jsx(ze.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:s})]})})]})};function k9(){return r.jsx(Nm,{title:"Welcome back",subtitle:"Enter your details to access your workspace.",children:r.jsx(j9,{})})}function R9(){const[n,e]=R.useState({name:"",email:"",password:"",password_confirmation:""}),[t,s]=R.useState({}),[i,a]=R.useState(null),[o,c]=R.useState(!1),u=yi(),{setToken:h}=so(),f=R.useRef(null),g=R.useRef(null),x=R.useRef(null),w=R.useRef(null),A=T=>{e({...n,[T.target.name]:T.target.value}),t[T.target.name]&&s(D=>({...D,[T.target.name]:null}))},C=()=>{const T={};n.name.trim()||(T.name="Full name is required"),n.email?/\S+@\S+\.\S+/.test(n.email)||(T.email="Please enter a valid email address"):T.email="Email address is required";const D=n.password;return D?D.length<12?T.password="Password must be at least 12 characters":/(?=.*[a-zA-Z])(?=.*[0-9])(?=.*[!@#$%^&*])/.test(D)||(T.password="Must contain letters, numbers, and special characters (!@#$%^&*)"):T.password="Password is required",n.password!==n.password_confirmation&&(T.password_confirmation="Passwords do not match"),s(T),Object.keys(T).length===0},E=async T=>{if(T.preventDefault(),a(null),!C()){n.name.trim()?t.email?g.current?.focus():t.password?x.current?.focus():t.password_confirmation&&w.current?.focus():f.current?.focus();return}c(!0);try{const D=await S6(n);h(D.token),u("/verify-email-message")}catch(D){const M=D.response?.data?.message,L=D.response?.data?.errors;if(L){const I={};L.email&&(I.email=L.email[0]),L.password&&(I.password=L.password[0]),L.name&&(I.name=L.name[0]),s(I),Object.keys(I).length===0&&a(M||"Registration failed. Please fix the errors.")}else a(M||"Registration failed. Please try again.")}finally{c(!1)}};return r.jsxs("form",{onSubmit:E,className:"flex flex-col gap-5",children:[r.jsx(Zn,{children:i&&r.jsxs(ze.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm border border-red-100 flex items-center gap-2 overflow-hidden",children:[r.jsx(xr,{size:16,className:"shrink-0"}),i]})}),r.jsx("div",{className:"mb-2",children:r.jsx(nM,{text:"Sign up with Google"})}),r.jsxs("div",{className:"relative flex items-center justify-center mb-2",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-slate-200"})}),r.jsx("span",{className:"relative z-10 bg-white px-2 text-xs text-slate-400 font-medium uppercase tracking-wider",children:"Or continue with email"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Gh,{icon:Mo,name:"name",type:"text",value:n.name,onChange:A,placeholder:"Full Name",ref:f,error:t.name}),r.jsx(Gh,{icon:ri,name:"email",type:"email",value:n.email,onChange:A,placeholder:"Email Address",ref:g,error:t.email}),r.jsx(Gh,{icon:Iu,name:"password",type:"password",value:n.password,onChange:A,placeholder:"Password (12+ chars, special char & number)",ref:x,error:t.password}),r.jsx(Gh,{icon:Iu,name:"password_confirmation",type:"password",value:n.password_confirmation,onChange:A,placeholder:"Confirm Password",ref:w,error:t.password_confirmation})]}),r.jsx("button",{type:"submit",disabled:o,className:"w-full bg-slate-900 text-white font-bold py-3.5 px-4 rounded-xl hover:bg-slate-800 transition-all focus:ring-4 focus:ring-slate-900/20 disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2 mt-4 relative overflow-hidden active:scale-[0.98]",children:o?r.jsxs(r.Fragment,{children:[r.jsx(gs,{className:"animate-spin",size:20}),"Creating Account..."]}):"Register"}),r.jsx("div",{className:"text-center mt-6",children:r.jsxs("p",{className:"text-slate-500 text-sm",children:["Already have an account?"," ",r.jsx(Vt,{to:"/login",className:"text-indigo-600 font-bold hover:underline",children:"Sign In"})]})})]})}function D9(){return r.jsx(Nm,{title:"Start your journey",subtitle:"Join thousands of businesses managing documents with ease.",children:r.jsx(R9,{})})}const Qx=[{id:1,title:"Company Basics",description:"Tell us about your business entity."},{id:2,title:"Demographics",description:"Where are you located?"},{id:3,title:"Branding",description:"Make it yours with a logo."},{id:4,title:"Review",description:"Almost there!"}],M9=[{label:"Agency",icon:_0},{label:"Technology",icon:nU},{label:"Legal",icon:UU},{label:"Consulting",icon:xH},{label:"Freelance",icon:cf},{label:"Other",icon:wd}],P9=[{label:"Solo",value:"1",desc:"Just me"},{label:"Small",value:"2-10",desc:"Startups"},{label:"Medium",value:"11-50",desc:"Growing"},{label:"Large",value:"50+",desc:"Enterprise"}];function O9(){yi();const{setUser:n}=so(),[e,t]=R.useState(1),[s,i]=R.useState(!1),[a,o]=R.useState(""),[c,u]=R.useState({name:"",industry:"",size:"",city:"",country:"",website:"",logo:null}),h=T=>{o(""),u({...c,[T.target.name]:T.target.value})},f=T=>{const D=T.target.files[0];if(D){if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(D.type)){o("Invalid file type. Please upload a PNG, JPG, or WEBP file."),T.target.value=null;return}if(D.size>1024*1024){o("File size exceeds 1MB. Please upload a smaller image."),T.target.value=null;return}o(""),u({...c,logo:D})}},g=()=>{a||e<4&&t(e+1)},x=()=>{o(""),u(T=>({...T,logo:null})),e<4&&t(T=>T+1)},w=()=>{e>1&&t(e-1)},A=async T=>{T.preventDefault(),i(!0),o("");const D=new FormData;Object.keys(c).forEach(M=>{c[M]!==null&&D.append(M,c[M])});try{await Dt.post("/businesses",D,{headers:{"Content-Type":"multipart/form-data"}}),window.location.href="/dashboard"}catch(M){if(console.error(M),M.response&&M.response.data&&M.response.data.errors){const L=M.response.data.errors;if(L.logo)o(L.logo[0]);else{const I=Object.values(L)[0][0];o(I)}}else o(M.response?.data?.message||"Failed to create business. Please try again.");i(!1)}},C=c.name&&c.industry&&c.size,E=c.city&&c.country;return r.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4 selection:bg-indigo-100 selection:text-indigo-900",children:r.jsxs(ze.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-5xl bg-white rounded-3xl shadow-2xl overflow-hidden flex flex-col md:flex-row min-h-[600px]",children:[r.jsxs("div",{className:"md:w-1/3 bg-slate-900 relative p-8 flex flex-col justify-between overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0 z-0",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-indigo-900/40 via-slate-900 to-slate-900"}),r.jsx("div",{className:"absolute -bottom-20 -left-20 w-64 h-64 bg-indigo-500/20 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute top-1/2 right-0 w-48 h-48 bg-purple-500/10 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 contrast-150"})]}),r.jsxs("div",{className:"relative z-10",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-10 text-white font-bold text-2xl",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/10 border border-white/10 flex items-center justify-center backdrop-blur-md",children:"D"}),"DocForge"]}),r.jsx("nav",{className:"space-y-8",children:Qx.map(T=>{const D=T.id===e,M=T.id<e;return r.jsxs("div",{className:"flex gap-4 relative group",children:[T.id!==Qx.length&&r.jsx("div",{className:`absolute left-[15px] top-10 w-0.5 h-12 ${M?"bg-indigo-500":"bg-slate-800"}`}),r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold z-10 transition-all duration-300 ${D?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/40 scale-110":M?"bg-green-500 text-white":"bg-slate-800 text-slate-500 group-hover:bg-slate-700"}`,children:M?r.jsx(br,{size:16}):T.id}),r.jsxs("div",{children:[r.jsx("h4",{className:`text-sm font-bold transition-colors ${D?"text-white":M?"text-slate-300":"text-slate-500"}`,children:T.title}),r.jsx("p",{className:`text-xs transition-colors ${D?"text-indigo-200":"text-slate-600"}`,children:T.description})]})]},T.id)})})]}),r.jsx("div",{className:"relative z-10 text-slate-500 text-xs",children:" DocForge Inc."})]}),r.jsx("div",{className:"md:w-2/3 p-8 md:p-12 flex flex-col bg-white overflow-y-auto",children:r.jsxs("div",{className:"max-w-xl mx-auto w-full flex-grow flex flex-col",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-2",children:Qx[e-1].title}),r.jsx("p",{className:"text-slate-500",children:Qx[e-1].description})]}),a&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 text-red-600 rounded-xl border border-red-100 flex items-center gap-2",children:[r.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"}),a]}),r.jsxs("form",{onSubmit:A,className:"flex-grow flex flex-col",children:[r.jsxs(Zn,{mode:"wait",custom:e,children:[e===1&&r.jsxs(ze.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Business Name"}),r.jsxs("div",{className:"relative group",children:[r.jsx(wd,{className:"absolute left-4 top-3.5 text-slate-400 group-focus-within:text-indigo-600 transition-colors",size:20}),r.jsx("input",{name:"name",value:c.name,onChange:h,className:"w-full pl-12 p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-100 focus:border-indigo-600 outline-none transition-all font-medium text-slate-800",placeholder:"e.g. Acme Corp",required:!0,autoFocus:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"Industry"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:M9.map(T=>r.jsxs("button",{type:"button",onClick:()=>u({...c,industry:T.label}),className:`p-3 rounded-xl border-2 flex flex-col items-center gap-2 transition-all ${c.industry===T.label?"border-indigo-600 bg-indigo-50/50 text-indigo-700":"border-slate-100 hover:border-slate-200 text-slate-600"}`,children:[r.jsx(T.icon,{size:24,className:c.industry===T.label?"text-indigo-600":"text-slate-400"}),r.jsx("span",{className:"text-xs font-bold",children:T.label})]},T.label))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"Team Size"}),r.jsx("div",{className:"grid grid-cols-2 gap-3",children:P9.map(T=>r.jsxs("button",{type:"button",onClick:()=>u({...c,size:T.value}),className:`p-3 rounded-xl border-2 text-left transition-all ${c.size===T.value?"border-indigo-600 bg-indigo-50/50 text-indigo-700":"border-slate-100 hover:border-slate-200"}`,children:[r.jsx("div",{className:"font-bold text-sm",children:T.label}),r.jsx("div",{className:"text-xs opacity-70",children:T.desc})]},T.value))})]})]},"step1"),e===2&&r.jsxs(ze.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"City"}),r.jsxs("div",{className:"relative group",children:[r.jsx(pU,{className:"absolute left-4 top-3.5 text-slate-400 group-focus-within:text-indigo-600 transition-colors",size:20}),r.jsx("input",{name:"city",value:c.city,onChange:h,className:"w-full pl-12 p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-100 focus:border-indigo-600 outline-none transition-all font-medium text-slate-800",placeholder:"New York",required:!0,autoFocus:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Country"}),r.jsxs("div",{className:"relative group",children:[r.jsx(_S,{className:"absolute left-4 top-3.5 text-slate-400 group-focus-within:text-indigo-600 transition-colors",size:20}),r.jsx("input",{name:"country",value:c.country,onChange:h,className:"w-full pl-12 p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-100 focus:border-indigo-600 outline-none transition-all font-medium text-slate-800",placeholder:"USA",required:!0})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Website ",r.jsx("span",{className:"text-slate-400 font-normal",children:"(Optional)"})]}),r.jsx("input",{name:"website",value:c.website,onChange:h,className:"w-full p-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-100 focus:border-indigo-600 outline-none transition-all font-medium text-slate-800",placeholder:"https://example.com"})]})]},"step2"),e===3&&r.jsx(ze.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6 flex flex-col items-center justify-center py-8",children:r.jsxs("div",{className:"w-full max-w-sm",children:[r.jsxs("label",{className:"relative flex flex-col items-center justify-center w-full h-64 border-2 border-slate-300 border-dashed rounded-3xl cursor-pointer bg-slate-50 hover:bg-slate-100 hover:border-indigo-400 transition-all group overflow-hidden",children:[r.jsx("input",{type:"file",onChange:f,accept:"image/*",className:"hidden"}),c.logo?r.jsxs("div",{className:"relative z-10 text-center",children:[r.jsx("div",{className:"w-20 h-20 mx-auto mb-3 rounded-xl bg-white shadow-sm flex items-center justify-center border border-slate-200",children:r.jsx("img",{src:URL.createObjectURL(c.logo),alt:"Logo preview",className:"max-w-full max-h-full rounded-lg object-contain"})}),r.jsx("p",{className:"font-bold text-slate-700",children:c.logo.name}),r.jsx("p",{className:"text-xs text-indigo-600 mt-1",children:"Click to change"})]}):r.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-indigo-50 text-indigo-500 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:r.jsx(Sm,{size:28})}),r.jsxs("p",{className:"mb-2 text-sm text-slate-600 font-medium",children:[r.jsx("span",{className:"font-bold text-indigo-600",children:"Click to upload"})," or drag and drop"]}),r.jsx("p",{className:"text-xs text-slate-500",children:"SVG, PNG, JPG or GIF (MAX. 2MB)"})]})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx("button",{type:"button",onClick:x,className:"text-slate-400 hover:text-slate-600 text-sm font-medium",children:"Skip for now"})})]})},"step3"),e===4&&r.jsxs(ze.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col items-center justify-center text-center py-8",children:[r.jsx("div",{className:"w-24 h-24 bg-green-100 text-green-600 rounded-full flex items-center justify-center mb-6 animate-bounce",children:r.jsx(br,{size:48})}),r.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"You're all set!"}),r.jsxs("p",{className:"text-slate-500 max-w-sm mb-8",children:["We have everything we need to set up your workspace for ",r.jsx("span",{className:"font-bold text-slate-900",children:c.name}),"."]}),r.jsxs("div",{className:"w-full bg-slate-50 p-6 rounded-2xl text-left border border-slate-100 mb-8",children:[r.jsx("h4",{className:"font-bold text-slate-900 mb-4 text-sm uppercase tracking-wider",children:"Summary"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between border-b border-slate-200 pb-2",children:[r.jsx("span",{className:"text-slate-500",children:"Business Name"}),r.jsx("span",{className:"font-medium text-slate-900",children:c.name})]}),r.jsxs("div",{className:"flex justify-between border-b border-slate-200 pb-2",children:[r.jsx("span",{className:"text-slate-500",children:"Industry"}),r.jsx("span",{className:"font-medium text-slate-900",children:c.industry})]}),r.jsxs("div",{className:"flex justify-between border-b border-slate-200 pb-2",children:[r.jsx("span",{className:"text-slate-500",children:"Location"}),r.jsxs("span",{className:"font-medium text-slate-900",children:[c.city,", ",c.country]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-500",children:"Logo"}),r.jsx("span",{className:"font-medium text-slate-900",children:c.logo?"Uploaded":"Skipped"})]})]})]})]},"step4")]}),r.jsxs("div",{className:"flex items-center justify-between mt-auto pt-8",children:[e>1?r.jsxs("button",{type:"button",onClick:w,disabled:s,className:"flex items-center gap-2 text-slate-500 hover:text-slate-800 font-bold px-4 py-2 hover:bg-slate-50 rounded-lg transition-colors",children:[r.jsx(ey,{size:18})," Back"]}):r.jsx("div",{}),e<4?r.jsxs("button",{type:"button",onClick:g,disabled:e===1&&!C||e===2&&!E||!!a,className:"flex items-center gap-2 bg-slate-900 text-white px-8 py-3 rounded-xl font-bold hover:bg-slate-800 shadow-lg hover:shadow-xl hover:-translate-y-0.5 disabled:opacity-50 disabled:shadow-none disabled:transform-none transition-all",children:["Next ",r.jsx(gl,{size:18})]}):r.jsx("button",{type:"submit",disabled:s,className:"flex items-center gap-2 bg-indigo-600 text-white px-10 py-3 rounded-xl font-bold hover:bg-indigo-700 shadow-lg shadow-indigo-500/30 hover:shadow-indigo-500/50 hover:-translate-y-0.5 disabled:opacity-70 transition-all w-full md:w-auto justify-center",children:s?r.jsx(gs,{className:"animate-spin"}):"Launch Workspace"})]})]})]})})]})})}const L9=()=>Dt.get("/team"),F9=n=>Dt.post("/team",n),z9=(n,e)=>Dt.put(`/team/${n}`,e),I9=n=>Dt.delete(`/team/${n}`),B9=n=>Dt.post("/accept-invite",n),H9=()=>{const[n]=H2(),e=yi(),{setToken:t,setUser:s}=so(),i=n.get("token"),a=n.get("email"),[o,c]=R.useState({name:"",password:"",password_confirmation:""}),[u,h]=R.useState(!1),[f,g]=R.useState(null),[x,w]=R.useState(!1);R.useEffect(()=>{(!i||!a)&&g("Invalid invitation link. Please check your email.")},[i,a]);const A=async C=>{if(C.preventDefault(),o.password!==o.password_confirmation){g("Passwords do not match");return}h(!0),g(null);try{const E=await B9({token:i,email:a,name:o.name,password:o.password,password_confirmation:o.password_confirmation});w(!0),E.data.token&&(localStorage.setItem("token",E.data.token),setTimeout(()=>{e("/dashboard"),window.location.reload()},1500))}catch(E){console.error(E),g(E.response?.data?.message||"Failed to accept invitation.")}finally{h(!1)}};return x?r.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:r.jsxs(ze.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center border border-slate-100",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(br,{className:"text-green-600",size:32})}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Welcome Aboard!"}),r.jsx("p",{className:"text-slate-600 mb-6",children:"Your account has been set up successfully. Redirecting you to the dashboard..."}),r.jsx(ty,{className:"animate-spin mx-auto text-indigo-600"})]})}):r.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:r.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-xl max-w-md w-full overflow-hidden border border-slate-100",children:[r.jsxs("div",{className:"bg-indigo-600 px-8 py-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:"Join the Team"}),r.jsx("p",{className:"text-indigo-100 text-sm",children:"Set up your account to get started."})]}),r.jsxs("div",{className:"p-8",children:[f&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 text-red-600 text-sm rounded-lg flex gap-3 items-start border border-red-100",children:[r.jsx(xr,{size:18,className:"mt-0.5 flex-shrink-0"}),f]}),!i||!a?r.jsx("div",{className:"text-center",children:r.jsx("button",{onClick:()=>e("/login"),className:"text-indigo-600 font-medium hover:underline",children:"Go to Login"})}):r.jsxs("form",{onSubmit:A,className:"space-y-5",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Full Name"}),r.jsx("input",{type:"text",required:!0,value:o.name,onChange:C=>c({...o,name:C.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-colors",placeholder:"John Doe"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Create Password"}),r.jsx("input",{type:"password",required:!0,minLength:8,value:o.password,onChange:C=>c({...o,password:C.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-colors",placeholder:""})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Confirm Password"}),r.jsx("input",{type:"password",required:!0,minLength:8,value:o.password_confirmation,onChange:C=>c({...o,password_confirmation:C.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-colors",placeholder:""})]}),r.jsxs("button",{type:"submit",disabled:u,className:"w-full py-2.5 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 focus:ring-4 focus:ring-indigo-500/20 transition-all shadow-sm flex items-center justify-center gap-2",children:[u&&r.jsx(ty,{size:18,className:"animate-spin"}),"Complete Setup"]})]})]})]})})},U9=()=>{const[n,e]=R.useState("idle"),[t,s]=R.useState(""),i=async()=>{e("loading");try{await _6(),e("success"),s("Verification link resent!"),setTimeout(()=>{e("idle"),s("")},5e3)}catch(a){console.error(a),e("error"),s(a.response?.data?.message||"Failed to resend.")}};return r.jsxs("div",{className:"min-h-screen bg-[#0A0A0A] flex flex-col justify-center items-center px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[r.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[r.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-purple-500/10 rounded-full blur-[100px]"}),r.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-blue-500/10 rounded-full blur-[100px]"})]}),r.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-md w-full space-y-8 bg-white/5 backdrop-blur-xl p-8 rounded-2xl border border-white/10 relative z-10 text-center",children:[r.jsx("div",{className:"mx-auto w-16 h-16 bg-purple-500/20 rounded-full flex items-center justify-center mb-6",children:r.jsx(ri,{className:"h-8 w-8 text-purple-400"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Check your inbox"}),r.jsx("p",{className:"text-gray-400 text-lg",children:"We've sent a verification link to your email."})]}),r.jsxs("div",{className:"bg-white/5 rounded-lg p-4 text-left border border-white/5",children:[r.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"Click the link in the email to verify your account and unlock:"}),r.jsxs("ul",{className:"space-y-2 text-sm text-gray-400",children:[r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Full access to all tools"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Secure document sharing"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Team collaboration features"]})]})]}),r.jsxs("div",{className:"pt-4 border-t border-white/10",children:[r.jsxs("p",{className:"text-sm text-gray-500",children:["Didn't receive the email? ",r.jsx("span",{className:"text-gray-400",children:"Check your spam folder or"}),r.jsx("button",{onClick:i,disabled:n==="loading"||n==="success",className:"ml-1 text-purple-400 hover:text-purple-300 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n==="loading"?"Sending...":"click to resend"})]}),(n==="success"||n==="error")&&r.jsx(ze.p,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:`text-xs mt-2 font-medium ${n==="success"?"text-green-400":"text-red-400"}`,children:t})]}),r.jsx("div",{className:"text-sm",children:r.jsxs(Vt,{to:"/login",className:"text-gray-500 hover:text-white transition-colors flex items-center justify-center gap-2 group",children:["Back to login ",r.jsx(Qp,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})})]})]})};let V9={data:""},W9=n=>{if(typeof window=="object"){let e=(n?n.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(n||document.head).appendChild(e),e.firstChild}return n||V9},G9=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Y9=/\/\*[^]*?\*\/|  +/g,ST=/\n+/g,ku=(n,e)=>{let t="",s="",i="";for(let a in n){let o=n[a];a[0]=="@"?a[1]=="i"?t=a+" "+o+";":s+=a[1]=="f"?ku(o,a):a+"{"+ku(o,a[1]=="k"?"":e)+"}":typeof o=="object"?s+=ku(o,e?e.replace(/([^,])+/g,c=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,c):c?c+" "+u:u)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=ku.p?ku.p(a,o):a+":"+o+";")}return t+(e&&i?e+"{"+i+"}":i)+s},id={},sM=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+sM(n[t]);return e}return n},X9=(n,e,t,s,i)=>{let a=sM(n),o=id[a]||(id[a]=(u=>{let h=0,f=11;for(;h<u.length;)f=101*f+u.charCodeAt(h++)>>>0;return"go"+f})(a));if(!id[o]){let u=a!==n?n:(h=>{let f,g,x=[{}];for(;f=G9.exec(h.replace(Y9,""));)f[4]?x.shift():f[3]?(g=f[3].replace(ST," ").trim(),x.unshift(x[0][g]=x[0][g]||{})):x[0][f[1]]=f[2].replace(ST," ").trim();return x[0]})(n);id[o]=ku(i?{["@keyframes "+o]:u}:u,t?"":"."+o)}let c=t&&id.g?id.g:null;return t&&(id.g=id[o]),((u,h,f,g)=>{g?h.data=h.data.replace(g,u):h.data.indexOf(u)===-1&&(h.data=f?u+h.data:h.data+u)})(id[o],e,s,c),o},K9=(n,e,t)=>n.reduce((s,i,a)=>{let o=e[a];if(o&&o.call){let c=o(t),u=c&&c.props&&c.props.className||/^go/.test(c)&&c;o=u?"."+u:c&&typeof c=="object"?c.props?"":ku(c,""):c===!1?"":c}return s+i+(o??"")},"");function Hy(n){let e=this||{},t=n.call?n(e.p):n;return X9(t.unshift?t.raw?K9(t,[].slice.call(arguments,1),e.p):t.reduce((s,i)=>Object.assign(s,i&&i.call?i(e.p):i),{}):t,W9(e.target),e.g,e.o,e.k)}let iM,r2,o2;Hy.bind({g:1});let xd=Hy.bind({k:1});function Z9(n,e,t,s){ku.p=e,iM=n,r2=t,o2=s}function Yu(n,e){let t=this||{};return function(){let s=arguments;function i(a,o){let c=Object.assign({},a),u=c.className||i.className;t.p=Object.assign({theme:r2&&r2()},c),t.o=/ *go\d+/.test(u),c.className=Hy.apply(t,s)+(u?" "+u:"");let h=n;return n[0]&&(h=c.as||n,delete c.as),o2&&h[0]&&o2(c),iM(h,c)}return i}}var J9=n=>typeof n=="function",sy=(n,e)=>J9(n)?n(e):n,Q9=(()=>{let n=0;return()=>(++n).toString()})(),aM=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),q9=20,MS="default",rM=(n,e)=>{let{toastLimit:t}=n.settings;switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,t)};case 1:return{...n,toasts:n.toasts.map(o=>o.id===e.toast.id?{...o,...e.toast}:o)};case 2:let{toast:s}=e;return rM(n,{type:n.toasts.find(o=>o.id===s.id)?1:0,toast:s});case 3:let{toastId:i}=e;return{...n,toasts:n.toasts.map(o=>o.id===i||i===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(o=>o.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let a=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+a}))}}},zb=[],oM={toasts:[],pausedAt:void 0,settings:{toastLimit:q9}},bc={},lM=(n,e=MS)=>{bc[e]=rM(bc[e]||oM,n),zb.forEach(([t,s])=>{t===e&&s(bc[e])})},cM=n=>Object.keys(bc).forEach(e=>lM(n,e)),$9=n=>Object.keys(bc).find(e=>bc[e].toasts.some(t=>t.id===n)),Uy=(n=MS)=>e=>{lM(e,n)},eV={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},tV=(n={},e=MS)=>{let[t,s]=R.useState(bc[e]||oM),i=R.useRef(bc[e]);R.useEffect(()=>(i.current!==bc[e]&&s(bc[e]),zb.push([e,s]),()=>{let o=zb.findIndex(([c])=>c===e);o>-1&&zb.splice(o,1)}),[e]);let a=t.toasts.map(o=>{var c,u,h;return{...n,...n[o.type],...o,removeDelay:o.removeDelay||((c=n[o.type])==null?void 0:c.removeDelay)||n?.removeDelay,duration:o.duration||((u=n[o.type])==null?void 0:u.duration)||n?.duration||eV[o.type],style:{...n.style,...(h=n[o.type])==null?void 0:h.style,...o.style}}});return{...t,toasts:a}},nV=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:t?.id||Q9()}),D0=n=>(e,t)=>{let s=nV(e,n,t);return Uy(s.toasterId||$9(s.id))({type:2,toast:s}),s.id},ni=(n,e)=>D0("blank")(n,e);ni.error=D0("error");ni.success=D0("success");ni.loading=D0("loading");ni.custom=D0("custom");ni.dismiss=(n,e)=>{let t={type:3,toastId:n};e?Uy(e)(t):cM(t)};ni.dismissAll=n=>ni.dismiss(void 0,n);ni.remove=(n,e)=>{let t={type:4,toastId:n};e?Uy(e)(t):cM(t)};ni.removeAll=n=>ni.remove(void 0,n);ni.promise=(n,e,t)=>{let s=ni.loading(e.loading,{...t,...t?.loading});return typeof n=="function"&&(n=n()),n.then(i=>{let a=e.success?sy(e.success,i):void 0;return a?ni.success(a,{id:s,...t,...t?.success}):ni.dismiss(s),i}).catch(i=>{let a=e.error?sy(e.error,i):void 0;a?ni.error(a,{id:s,...t,...t?.error}):ni.dismiss(s)}),n};var sV=1e3,iV=(n,e="default")=>{let{toasts:t,pausedAt:s}=tV(n,e),i=R.useRef(new Map).current,a=R.useCallback((g,x=sV)=>{if(i.has(g))return;let w=setTimeout(()=>{i.delete(g),o({type:4,toastId:g})},x);i.set(g,w)},[]);R.useEffect(()=>{if(s)return;let g=Date.now(),x=t.map(w=>{if(w.duration===1/0)return;let A=(w.duration||0)+w.pauseDuration-(g-w.createdAt);if(A<0){w.visible&&ni.dismiss(w.id);return}return setTimeout(()=>ni.dismiss(w.id,e),A)});return()=>{x.forEach(w=>w&&clearTimeout(w))}},[t,s,e]);let o=R.useCallback(Uy(e),[e]),c=R.useCallback(()=>{o({type:5,time:Date.now()})},[o]),u=R.useCallback((g,x)=>{o({type:1,toast:{id:g,height:x}})},[o]),h=R.useCallback(()=>{s&&o({type:6,time:Date.now()})},[s,o]),f=R.useCallback((g,x)=>{let{reverseOrder:w=!1,gutter:A=8,defaultPosition:C}=x||{},E=t.filter(M=>(M.position||C)===(g.position||C)&&M.height),T=E.findIndex(M=>M.id===g.id),D=E.filter((M,L)=>L<T&&M.visible).length;return E.filter(M=>M.visible).slice(...w?[D+1]:[0,D]).reduce((M,L)=>M+(L.height||0)+A,0)},[t]);return R.useEffect(()=>{t.forEach(g=>{if(g.dismissed)a(g.id,g.removeDelay);else{let x=i.get(g.id);x&&(clearTimeout(x),i.delete(g.id))}})},[t,a]),{toasts:t,handlers:{updateHeight:u,startPause:c,endPause:h,calculateOffset:f}}},aV=xd`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,rV=xd`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,oV=xd`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,lV=Yu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${aV} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${rV} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${oV} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,cV=xd`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,dV=Yu("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${cV} 1s linear infinite;
`,uV=xd`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,hV=xd`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,fV=Yu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${uV} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${hV} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,mV=Yu("div")`
  position: absolute;
`,gV=Yu("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,pV=xd`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,xV=Yu("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${pV} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,bV=({toast:n})=>{let{icon:e,type:t,iconTheme:s}=n;return e!==void 0?typeof e=="string"?R.createElement(xV,null,e):e:t==="blank"?null:R.createElement(gV,null,R.createElement(dV,{...s}),t!=="loading"&&R.createElement(mV,null,t==="error"?R.createElement(lV,{...s}):R.createElement(fV,{...s})))},yV=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,vV=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,wV="0%{opacity:0;} 100%{opacity:1;}",SV="0%{opacity:1;} 100%{opacity:0;}",NV=Yu("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,AV=Yu("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,CV=(n,e)=>{let t=n.includes("top")?1:-1,[s,i]=aM()?[wV,SV]:[yV(t),vV(t)];return{animation:e?`${xd(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${xd(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},EV=R.memo(({toast:n,position:e,style:t,children:s})=>{let i=n.height?CV(n.position||e||"top-center",n.visible):{opacity:0},a=R.createElement(bV,{toast:n}),o=R.createElement(AV,{...n.ariaProps},sy(n.message,n));return R.createElement(NV,{className:n.className,style:{...i,...t,...n.style}},typeof s=="function"?s({icon:a,message:o}):R.createElement(R.Fragment,null,a,o))});Z9(R.createElement);var TV=({id:n,className:e,style:t,onHeightUpdate:s,children:i})=>{let a=R.useCallback(o=>{if(o){let c=()=>{let u=o.getBoundingClientRect().height;s(n,u)};c(),new MutationObserver(c).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[n,s]);return R.createElement("div",{ref:a,className:e,style:t},i)},_V=(n,e)=>{let t=n.includes("top"),s=t?{top:0}:{bottom:0},i=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:aM()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...s,...i}},jV=Hy`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,qx=16,kV=({reverseOrder:n,position:e="top-center",toastOptions:t,gutter:s,children:i,toasterId:a,containerStyle:o,containerClassName:c})=>{let{toasts:u,handlers:h}=iV(t,a);return R.createElement("div",{"data-rht-toaster":a||"",style:{position:"fixed",zIndex:9999,top:qx,left:qx,right:qx,bottom:qx,pointerEvents:"none",...o},className:c,onMouseEnter:h.startPause,onMouseLeave:h.endPause},u.map(f=>{let g=f.position||e,x=h.calculateOffset(f,{reverseOrder:n,gutter:s,defaultPosition:e}),w=_V(g,x);return R.createElement(TV,{id:f.id,key:f.id,onHeightUpdate:h.updateHeight,className:f.visible?jV:"",style:w},f.type==="custom"?sy(f.message,f):i?i(f):R.createElement(EV,{toast:f,position:g}))}))},Be=ni;const RV=()=>{const[n]=H2(),e=yi(),{fetchUser:t}=so(),[s,i]=R.useState("verifying"),[a,o]=R.useState("Verifying your email...");return R.useEffect(()=>{(async()=>{const u=n.get("verify_url");if(!u){i("error"),o("Invalid verification link.");return}try{await Dt.get(u),i("success"),o("Email verified successfully!"),await t(),setTimeout(()=>{localStorage.getItem("token")?e("/onboarding"):e("/login",{state:{message:"Email verified successfully! Please log in to continue."}})},2e3)}catch(h){console.error("Verification failed",h),i("error");const f=h.response?.data?.message||"Verification failed. The link may be expired.";o(f),Be.error(f)}})()},[n,e,t]),r.jsxs("div",{className:"min-h-screen bg-[#0A0A0A] flex justify-center items-center px-4 relative overflow-hidden",children:[r.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[r.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[40%] h-[40%] bg-purple-500/10 rounded-full blur-[100px]"}),r.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[40%] h-[40%] bg-blue-500/10 rounded-full blur-[100px]"})]}),r.jsxs(ze.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"max-w-md w-full bg-white/5 backdrop-blur-xl p-8 rounded-2xl border border-white/10 flex flex-col items-center text-center relative z-10",children:[s==="verifying"&&r.jsxs(r.Fragment,{children:[r.jsx(gs,{className:"w-12 h-12 text-blue-500 animate-spin mb-4"}),r.jsx("h2",{className:"text-xl font-semibold text-white",children:"Verifying..."}),r.jsx("p",{className:"text-gray-400 mt-2",children:"Please wait while we secure your account."})]}),s==="success"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mb-4",children:r.jsx(HD,{className:"w-8 h-8 text-green-500"})}),r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Verified!"}),r.jsx("p",{className:"text-gray-400 mt-2",children:a}),r.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Redirecting to onboarding..."})]}),s==="error"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mb-4",children:r.jsx(EH,{className:"w-8 h-8 text-red-500"})}),r.jsx("h2",{className:"text-xl font-bold text-white",children:"Verification Failed"}),r.jsx("p",{className:"text-gray-400 mt-2",children:a}),r.jsx("button",{onClick:()=>e("/login"),className:"mt-6 px-6 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-colors border border-white/10",children:"Back to Login"})]})]})]})},DV=()=>{const[n,e]=R.useState(""),[t,s]=R.useState(!1),[i,a]=R.useState(null),[o,c]=R.useState(!1),u=async h=>{h.preventDefault(),a(null),s(!0);try{await C6(n),c(!0)}catch(f){a(f.response?.data?.message||f.response?.data?.errors?.email?.[0]||"Failed to send reset link.")}finally{s(!1)}};return o?r.jsx(Nm,{title:"Check your inbox",subtitle:"We've sent you a password reset link.",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mb-6",children:r.jsx(ri,{className:"text-green-600",size:24})}),r.jsxs("p",{className:"text-slate-600 mb-6",children:["We sent a password reset link to ",r.jsx("strong",{children:n}),". Please check your email and follow the instructions to reset your password."]}),r.jsxs(Vt,{to:"/login",className:"inline-flex items-center text-sm font-medium text-indigo-600 hover:text-indigo-500",children:[r.jsx(vl,{className:"mr-2",size:16}),"Back to sign in"]})]})}):r.jsx(Nm,{title:"Reset password",subtitle:"Enter your email and we'll send you a reset link.",children:r.jsxs("form",{onSubmit:u,className:"space-y-6",children:[i&&r.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm border border-red-100",children:i}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700",children:"Email address"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(ri,{className:"h-5 w-5 text-slate-400"})}),r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>e(h.target.value),className:"block w-full pl-10 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-sm",placeholder:"you@example.com"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("button",{type:"submit",disabled:t,className:"w-full flex justify-center py-2.5 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-slate-900 hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-900 disabled:opacity-50 disabled:cursor-not-allowed",children:t?r.jsxs(r.Fragment,{children:[r.jsx(gs,{className:"animate-spin -ml-1 mr-2 h-4 w-4"}),"Sending link..."]}):"Send reset link"}),r.jsx("div",{className:"text-center",children:r.jsxs(Vt,{to:"/login",className:"inline-flex items-center text-sm font-medium text-slate-600 hover:text-slate-900",children:[r.jsx(vl,{className:"mr-2",size:16}),"Back to sign in"]})})]})]})})},MV=()=>{const{token:n}=vd(),[e]=H2(),t=yi(),s=e.get("email"),[i,a]=R.useState(""),[o,c]=R.useState(""),[u,h]=R.useState(!1),[f,g]=R.useState(null),[x,w]=R.useState(!1),A=async C=>{if(C.preventDefault(),g(null),i!==o){g("Passwords do not match");return}if(i.length<8){g("Password must be at least 8 characters");return}h(!0);try{await E6({token:n,email:s,password:i,password_confirmation:o}),w(!0),setTimeout(()=>{t("/login",{state:{message:"Password reset successfully. Please login with your new password."}})},3e3)}catch(E){g(E.response?.data?.message||E.response?.data?.errors?.password?.[0]||"Failed to reset password.")}finally{h(!1)}};return x?r.jsx(Nm,{title:"Password Reset",subtitle:"Your password has been successfully reset.",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mb-6",children:r.jsx(br,{className:"text-green-600",size:24})}),r.jsx("p",{className:"text-slate-600 mb-6",children:"You will be redirected to the login page momentarily."}),r.jsxs(Vt,{to:"/login",className:"inline-flex items-center text-sm font-medium text-indigo-600 hover:text-indigo-500",children:[r.jsx(vl,{className:"mr-2",size:16}),"Go to Sign In"]})]})}):r.jsx(Nm,{title:"Set new password",subtitle:"Your new password must be different to previously used passwords.",children:r.jsxs("form",{onSubmit:A,className:"space-y-6",children:[f&&r.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm border border-red-100",children:f}),r.jsx("input",{type:"hidden",name:"email",value:s||""}),r.jsx("input",{type:"hidden",name:"token",value:n||""}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700",children:"New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Iu,{className:"h-5 w-5 text-slate-400"})}),r.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:i,onChange:C=>a(C.target.value),className:"block w-full pl-10 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-sm",placeholder:""})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"password_confirmation",className:"block text-sm font-medium text-slate-700",children:"Confirm Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Iu,{className:"h-5 w-5 text-slate-400"})}),r.jsx("input",{id:"password_confirmation",name:"password_confirmation",type:"password",required:!0,value:o,onChange:C=>c(C.target.value),className:"block w-full pl-10 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-sm",placeholder:""})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("button",{type:"submit",disabled:u,className:"w-full flex justify-center py-2.5 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-slate-900 hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-900 disabled:opacity-50 disabled:cursor-not-allowed",children:u?r.jsxs(r.Fragment,{children:[r.jsx(gs,{className:"animate-spin -ml-1 mr-2 h-4 w-4"}),"Resetting password..."]}):"Reset password"}),r.jsx("div",{className:"text-center",children:r.jsxs(Vt,{to:"/login",className:"inline-flex items-center text-sm font-medium text-slate-600 hover:text-slate-900",children:[r.jsx(vl,{className:"mr-2",size:16}),"Back to sign in"]})})]})]})})},PV=()=>{const n=yi(),e=yr(),{setToken:t}=so();return R.useEffect(()=>{const s=new URLSearchParams(e.search),i=s.get("token"),a=s.get("error");i?(t(i),n("/dashboard")):n("/login",{state:{message:a||"Login failed. Please try again."}})},[e,n,t]),r.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:r.jsxs("div",{className:"flex flex-col items-center gap-4",children:[r.jsx(gs,{className:"animate-spin text-indigo-600",size:40}),r.jsx("p",{className:"text-slate-600 font-medium",children:"Authenticating..."})]})})},OV=()=>Dt.get("/dashboard/stats"),LV=n=>Dt.get("/dashboard/analytics",{params:n}),FV=()=>Dt.get("/dashboard/activity");function M0(n){return n+.5|0}const Mu=(n,e,t)=>Math.max(Math.min(n,t),e);function Np(n){return Mu(M0(n*2.55),0,255)}function Lu(n){return Mu(M0(n*255),0,255)}function cd(n){return Mu(M0(n/2.55)/100,0,1)}function NT(n){return Mu(M0(n*100),0,100)}const vo={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},l2=[..."0123456789ABCDEF"],zV=n=>l2[n&15],IV=n=>l2[(n&240)>>4]+l2[n&15],$x=n=>(n&240)>>4===(n&15),BV=n=>$x(n.r)&&$x(n.g)&&$x(n.b)&&$x(n.a);function HV(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&vo[n[1]]*17,g:255&vo[n[2]]*17,b:255&vo[n[3]]*17,a:e===5?vo[n[4]]*17:255}:(e===7||e===9)&&(t={r:vo[n[1]]<<4|vo[n[2]],g:vo[n[3]]<<4|vo[n[4]],b:vo[n[5]]<<4|vo[n[6]],a:e===9?vo[n[7]]<<4|vo[n[8]]:255})),t}const UV=(n,e)=>n<255?e(n):"";function VV(n){var e=BV(n)?zV:IV;return n?"#"+e(n.r)+e(n.g)+e(n.b)+UV(n.a,e):void 0}const WV=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function dM(n,e,t){const s=e*Math.min(t,1-t),i=(a,o=(a+n/30)%12)=>t-s*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function GV(n,e,t){const s=(i,a=(i+n/60)%6)=>t-t*e*Math.max(Math.min(a,4-a,1),0);return[s(5),s(3),s(1)]}function YV(n,e,t){const s=dM(n,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)s[i]*=1-e-t,s[i]+=e;return s}function XV(n,e,t,s,i){return n===i?(e-t)/s+(e<t?6:0):e===i?(t-n)/s+2:(n-e)/s+4}function PS(n){const t=n.r/255,s=n.g/255,i=n.b/255,a=Math.max(t,s,i),o=Math.min(t,s,i),c=(a+o)/2;let u,h,f;return a!==o&&(f=a-o,h=c>.5?f/(2-a-o):f/(a+o),u=XV(t,s,i,f,a),u=u*60+.5),[u|0,h||0,c]}function OS(n,e,t,s){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,s)).map(Lu)}function LS(n,e,t){return OS(dM,n,e,t)}function KV(n,e,t){return OS(YV,n,e,t)}function ZV(n,e,t){return OS(GV,n,e,t)}function uM(n){return(n%360+360)%360}function JV(n){const e=WV.exec(n);let t=255,s;if(!e)return;e[5]!==s&&(t=e[6]?Np(+e[5]):Lu(+e[5]));const i=uM(+e[2]),a=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=KV(i,a,o):e[1]==="hsv"?s=ZV(i,a,o):s=LS(i,a,o),{r:s[0],g:s[1],b:s[2],a:t}}function QV(n,e){var t=PS(n);t[0]=uM(t[0]+e),t=LS(t),n.r=t[0],n.g=t[1],n.b=t[2]}function qV(n){if(!n)return;const e=PS(n),t=e[0],s=NT(e[1]),i=NT(e[2]);return n.a<255?`hsla(${t}, ${s}%, ${i}%, ${cd(n.a)})`:`hsl(${t}, ${s}%, ${i}%)`}const AT={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},CT={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function $V(){const n={},e=Object.keys(CT),t=Object.keys(AT);let s,i,a,o,c;for(s=0;s<e.length;s++){for(o=c=e[s],i=0;i<t.length;i++)a=t[i],c=c.replace(a,AT[a]);a=parseInt(CT[o],16),n[c]=[a>>16&255,a>>8&255,a&255]}return n}let eb;function e7(n){eb||(eb=$V(),eb.transparent=[0,0,0,0]);const e=eb[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const t7=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function n7(n){const e=t7.exec(n);let t=255,s,i,a;if(e){if(e[7]!==s){const o=+e[7];t=e[8]?Np(o):Mu(o*255,0,255)}return s=+e[1],i=+e[3],a=+e[5],s=255&(e[2]?Np(s):Mu(s,0,255)),i=255&(e[4]?Np(i):Mu(i,0,255)),a=255&(e[6]?Np(a):Mu(a,0,255)),{r:s,g:i,b:a,a:t}}}function s7(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${cd(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const K1=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Zf=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function i7(n,e,t){const s=Zf(cd(n.r)),i=Zf(cd(n.g)),a=Zf(cd(n.b));return{r:Lu(K1(s+t*(Zf(cd(e.r))-s))),g:Lu(K1(i+t*(Zf(cd(e.g))-i))),b:Lu(K1(a+t*(Zf(cd(e.b))-a))),a:n.a+t*(e.a-n.a)}}function tb(n,e,t){if(n){let s=PS(n);s[e]=Math.max(0,Math.min(s[e]+s[e]*t,e===0?360:1)),s=LS(s),n.r=s[0],n.g=s[1],n.b=s[2]}}function hM(n,e){return n&&Object.assign(e||{},n)}function ET(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Lu(n[3]))):(e=hM(n,{r:0,g:0,b:0,a:1}),e.a=Lu(e.a)),e}function a7(n){return n.charAt(0)==="r"?n7(n):JV(n)}class $p{constructor(e){if(e instanceof $p)return e;const t=typeof e;let s;t==="object"?s=ET(e):t==="string"&&(s=HV(e)||e7(e)||a7(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=hM(this._rgb);return e&&(e.a=cd(e.a)),e}set rgb(e){this._rgb=ET(e)}rgbString(){return this._valid?s7(this._rgb):void 0}hexString(){return this._valid?VV(this._rgb):void 0}hslString(){return this._valid?qV(this._rgb):void 0}mix(e,t){if(e){const s=this.rgb,i=e.rgb;let a;const o=t===a?.5:t,c=2*o-1,u=s.a-i.a,h=((c*u===-1?c:(c+u)/(1+c*u))+1)/2;a=1-h,s.r=255&h*s.r+a*i.r+.5,s.g=255&h*s.g+a*i.g+.5,s.b=255&h*s.b+a*i.b+.5,s.a=o*s.a+(1-o)*i.a,this.rgb=s}return this}interpolate(e,t){return e&&(this._rgb=i7(this._rgb,e._rgb,t)),this}clone(){return new $p(this.rgb)}alpha(e){return this._rgb.a=Lu(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=M0(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return tb(this._rgb,2,e),this}darken(e){return tb(this._rgb,2,-e),this}saturate(e){return tb(this._rgb,1,e),this}desaturate(e){return tb(this._rgb,1,-e),this}rotate(e){return QV(this._rgb,e),this}}function ad(){}const r7=(()=>{let n=0;return()=>n++})();function os(n){return n==null}function Fi(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function dn(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function ka(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function cc(n,e){return ka(n)?n:e}function sn(n,e){return typeof n>"u"?e:n}const o7=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,fM=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function ms(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Un(n,e,t,s){let i,a,o;if(Fi(n))for(a=n.length,i=0;i<a;i++)e.call(t,n[i],i);else if(dn(n))for(o=Object.keys(n),a=o.length,i=0;i<a;i++)e.call(t,n[o[i]],o[i])}function iy(n,e){let t,s,i,a;if(!n||!e||n.length!==e.length)return!1;for(t=0,s=n.length;t<s;++t)if(i=n[t],a=e[t],i.datasetIndex!==a.datasetIndex||i.index!==a.index)return!1;return!0}function ay(n){if(Fi(n))return n.map(ay);if(dn(n)){const e=Object.create(null),t=Object.keys(n),s=t.length;let i=0;for(;i<s;++i)e[t[i]]=ay(n[t[i]]);return e}return n}function mM(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function l7(n,e,t,s){if(!mM(n))return;const i=e[n],a=t[n];dn(i)&&dn(a)?e0(i,a,s):e[n]=ay(a)}function e0(n,e,t){const s=Fi(e)?e:[e],i=s.length;if(!dn(n))return n;t=t||{};const a=t.merger||l7;let o;for(let c=0;c<i;++c){if(o=s[c],!dn(o))continue;const u=Object.keys(o);for(let h=0,f=u.length;h<f;++h)a(u[h],n,o,t)}return n}function Lp(n,e){return e0(n,e,{merger:c7})}function c7(n,e,t){if(!mM(n))return;const s=e[n],i=t[n];dn(s)&&dn(i)?Lp(s,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=ay(i))}const TT={"":n=>n,x:n=>n.x,y:n=>n.y};function d7(n){const e=n.split("."),t=[];let s="";for(const i of e)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(t.push(s),s="");return t}function u7(n){const e=d7(n);return t=>{for(const s of e){if(s==="")break;t=t&&t[s]}return t}}function t0(n,e){return(TT[e]||(TT[e]=u7(e)))(n)}function FS(n){return n.charAt(0).toUpperCase()+n.slice(1)}const ry=n=>typeof n<"u",Bu=n=>typeof n=="function",_T=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function h7(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Vn=Math.PI,Ds=2*Vn,f7=Ds+Vn,oy=Number.POSITIVE_INFINITY,m7=Vn/180,Ii=Vn/2,_h=Vn/4,jT=Vn*2/3,gM=Math.log10,Am=Math.sign;function Fp(n,e,t){return Math.abs(n-e)<t}function kT(n){const e=Math.round(n);n=Fp(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(gM(n))),s=n/t;return(s<=1?1:s<=2?2:s<=5?5:10)*t}function g7(n){const e=[],t=Math.sqrt(n);let s;for(s=1;s<t;s++)n%s===0&&(e.push(s),e.push(n/s));return t===(t|0)&&e.push(t),e.sort((i,a)=>i-a).pop(),e}function p7(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function n0(n){return!p7(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function x7(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function b7(n,e,t){let s,i,a;for(s=0,i=n.length;s<i;s++)a=n[s][t],isNaN(a)||(e.min=Math.min(e.min,a),e.max=Math.max(e.max,a))}function ud(n){return n*(Vn/180)}function y7(n){return n*(180/Vn)}function RT(n){if(!ka(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function pM(n,e){const t=e.x-n.x,s=e.y-n.y,i=Math.sqrt(t*t+s*s);let a=Math.atan2(s,t);return a<-.5*Vn&&(a+=Ds),{angle:a,distance:i}}function c2(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function v7(n,e){return(n-e+f7)%Ds-Vn}function qr(n){return(n%Ds+Ds)%Ds}function s0(n,e,t,s){const i=qr(n),a=qr(e),o=qr(t),c=qr(a-i),u=qr(o-i),h=qr(i-a),f=qr(i-o);return i===a||i===o||s&&a===o||c>u&&h<f}function Ta(n,e,t){return Math.max(e,Math.min(t,n))}function w7(n){return Ta(n,-32768,32767)}function hd(n,e,t,s=1e-6){return n>=Math.min(e,t)-s&&n<=Math.max(e,t)+s}function zS(n,e,t){t=t||(o=>n[o]<e);let s=n.length-1,i=0,a;for(;s-i>1;)a=i+s>>1,t(a)?i=a:s=a;return{lo:i,hi:s}}const Yh=(n,e,t,s)=>zS(n,t,s?i=>{const a=n[i][e];return a<t||a===t&&n[i+1][e]===t}:i=>n[i][e]<t),S7=(n,e,t)=>zS(n,t,s=>n[s][e]>=t);function N7(n,e,t){let s=0,i=n.length;for(;s<i&&n[s]<e;)s++;for(;i>s&&n[i-1]>t;)i--;return s>0||i<n.length?n.slice(s,i):n}const xM=["push","pop","shift","splice","unshift"];function A7(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),xM.forEach(t=>{const s="_onData"+FS(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...a){const o=i.apply(this,a);return n._chartjs.listeners.forEach(c=>{typeof c[s]=="function"&&c[s](...a)}),o}})})}function DT(n,e){const t=n._chartjs;if(!t)return;const s=t.listeners,i=s.indexOf(e);i!==-1&&s.splice(i,1),!(s.length>0)&&(xM.forEach(a=>{delete n[a]}),delete n._chartjs)}function C7(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const bM=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function yM(n,e){let t=[],s=!1;return function(...i){t=i,s||(s=!0,bM.call(window,()=>{s=!1,n.apply(e,t)}))}}function E7(n,e){let t;return function(...s){return e?(clearTimeout(t),t=setTimeout(n,e,s)):n.apply(this,s),e}}const IS=n=>n==="start"?"left":n==="end"?"right":"center",Sa=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,T7=(n,e,t,s)=>n===(s?"left":"right")?t:n==="center"?(e+t)/2:e;function _7(n,e,t){const s=e.length;let i=0,a=s;if(n._sorted){const{iScale:o,vScale:c,_parsed:u}=n,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,f=o.axis,{min:g,max:x,minDefined:w,maxDefined:A}=o.getUserBounds();if(w){if(i=Math.min(Yh(u,f,g).lo,t?s:Yh(e,f,o.getPixelForValue(g)).lo),h){const C=u.slice(0,i+1).reverse().findIndex(E=>!os(E[c.axis]));i-=Math.max(0,C)}i=Ta(i,0,s-1)}if(A){let C=Math.max(Yh(u,o.axis,x,!0).hi+1,t?0:Yh(e,f,o.getPixelForValue(x),!0).hi+1);if(h){const E=u.slice(C-1).findIndex(T=>!os(T[c.axis]));C+=Math.max(0,E)}a=Ta(C,i,s)-i}else a=s-i}return{start:i,count:a}}function j7(n){const{xScale:e,yScale:t,_scaleRanges:s}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!s)return n._scaleRanges=i,!0;const a=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==t.min||s.ymax!==t.max;return Object.assign(s,i),a}const nb=n=>n===0||n===1,MT=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Ds/t)),PT=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Ds/t)+1,zp={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Ii)+1,easeOutSine:n=>Math.sin(n*Ii),easeInOutSine:n=>-.5*(Math.cos(Vn*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>nb(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>nb(n)?n:MT(n,.075,.3),easeOutElastic:n=>nb(n)?n:PT(n,.075,.3),easeInOutElastic(n){return nb(n)?n:n<.5?.5*MT(n*2,.1125,.45):.5+.5*PT(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-zp.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?zp.easeInBounce(n*2)*.5:zp.easeOutBounce(n*2-1)*.5+.5};function BS(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function OT(n){return BS(n)?n:new $p(n)}function Z1(n){return BS(n)?n:new $p(n).saturate(.5).darken(.1).hexString()}const k7=["x","y","borderWidth","radius","tension"],R7=["color","borderColor","backgroundColor"];function D7(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:R7},numbers:{type:"number",properties:k7}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function M7(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const LT=new Map;function P7(n,e){e=e||{};const t=n+JSON.stringify(e);let s=LT.get(t);return s||(s=new Intl.NumberFormat(n,e),LT.set(t,s)),s}function HS(n,e,t){return P7(e,t).format(n)}const O7={values(n){return Fi(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const s=this.chart.options.locale;let i,a=n;if(t.length>1){const h=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(h<1e-4||h>1e15)&&(i="scientific"),a=L7(n,t)}const o=gM(Math.abs(a)),c=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),u={notation:i,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(u,this.options.ticks.format),HS(n,s,u)}};function L7(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var vM={formatters:O7};function F7(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:vM.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const nf=Object.create(null),d2=Object.create(null);function Ip(n,e){if(!e)return n;const t=e.split(".");for(let s=0,i=t.length;s<i;++s){const a=t[s];n=n[a]||(n[a]=Object.create(null))}return n}function J1(n,e,t){return typeof e=="string"?e0(Ip(n,e),t):e0(Ip(n,""),e)}class z7{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>Z1(i.backgroundColor),this.hoverBorderColor=(s,i)=>Z1(i.borderColor),this.hoverColor=(s,i)=>Z1(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return J1(this,e,t)}get(e){return Ip(this,e)}describe(e,t){return J1(d2,e,t)}override(e,t){return J1(nf,e,t)}route(e,t,s,i){const a=Ip(this,e),o=Ip(this,s),c="_"+t;Object.defineProperties(a,{[c]:{value:a[t],writable:!0},[t]:{enumerable:!0,get(){const u=this[c],h=o[i];return dn(u)?Object.assign({},h,u):sn(u,h)},set(u){this[c]=u}}})}apply(e){e.forEach(t=>t(this))}}var si=new z7({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[D7,M7,F7]);function I7(n){return!n||os(n.size)||os(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function FT(n,e,t,s,i){let a=e[i];return a||(a=e[i]=n.measureText(i).width,t.push(i)),a>s&&(s=a),s}function jh(n,e,t){const s=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*s)/s+i}function zT(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function u2(n,e,t,s){wM(n,e,t,s,null)}function wM(n,e,t,s,i){let a,o,c,u,h,f,g,x;const w=e.pointStyle,A=e.rotation,C=e.radius;let E=(A||0)*m7;if(w&&typeof w=="object"&&(a=w.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){n.save(),n.translate(t,s),n.rotate(E),n.drawImage(w,-w.width/2,-w.height/2,w.width,w.height),n.restore();return}if(!(isNaN(C)||C<=0)){switch(n.beginPath(),w){default:i?n.ellipse(t,s,i/2,C,0,0,Ds):n.arc(t,s,C,0,Ds),n.closePath();break;case"triangle":f=i?i/2:C,n.moveTo(t+Math.sin(E)*f,s-Math.cos(E)*C),E+=jT,n.lineTo(t+Math.sin(E)*f,s-Math.cos(E)*C),E+=jT,n.lineTo(t+Math.sin(E)*f,s-Math.cos(E)*C),n.closePath();break;case"rectRounded":h=C*.516,u=C-h,o=Math.cos(E+_h)*u,g=Math.cos(E+_h)*(i?i/2-h:u),c=Math.sin(E+_h)*u,x=Math.sin(E+_h)*(i?i/2-h:u),n.arc(t-g,s-c,h,E-Vn,E-Ii),n.arc(t+x,s-o,h,E-Ii,E),n.arc(t+g,s+c,h,E,E+Ii),n.arc(t-x,s+o,h,E+Ii,E+Vn),n.closePath();break;case"rect":if(!A){u=Math.SQRT1_2*C,f=i?i/2:u,n.rect(t-f,s-u,2*f,2*u);break}E+=_h;case"rectRot":g=Math.cos(E)*(i?i/2:C),o=Math.cos(E)*C,c=Math.sin(E)*C,x=Math.sin(E)*(i?i/2:C),n.moveTo(t-g,s-c),n.lineTo(t+x,s-o),n.lineTo(t+g,s+c),n.lineTo(t-x,s+o),n.closePath();break;case"crossRot":E+=_h;case"cross":g=Math.cos(E)*(i?i/2:C),o=Math.cos(E)*C,c=Math.sin(E)*C,x=Math.sin(E)*(i?i/2:C),n.moveTo(t-g,s-c),n.lineTo(t+g,s+c),n.moveTo(t+x,s-o),n.lineTo(t-x,s+o);break;case"star":g=Math.cos(E)*(i?i/2:C),o=Math.cos(E)*C,c=Math.sin(E)*C,x=Math.sin(E)*(i?i/2:C),n.moveTo(t-g,s-c),n.lineTo(t+g,s+c),n.moveTo(t+x,s-o),n.lineTo(t-x,s+o),E+=_h,g=Math.cos(E)*(i?i/2:C),o=Math.cos(E)*C,c=Math.sin(E)*C,x=Math.sin(E)*(i?i/2:C),n.moveTo(t-g,s-c),n.lineTo(t+g,s+c),n.moveTo(t+x,s-o),n.lineTo(t-x,s+o);break;case"line":o=i?i/2:Math.cos(E)*C,c=Math.sin(E)*C,n.moveTo(t-o,s-c),n.lineTo(t+o,s+c);break;case"dash":n.moveTo(t,s),n.lineTo(t+Math.cos(E)*(i?i/2:C),s+Math.sin(E)*C);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function i0(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Vy(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Wy(n){n.restore()}function B7(n,e,t,s,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){const a=(e.x+t.x)/2;n.lineTo(a,e.y),n.lineTo(a,t.y)}else i==="after"!=!!s?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function H7(n,e,t,s){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?t.cp2x:t.cp1x,s?t.cp2y:t.cp1y,t.x,t.y)}function U7(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),os(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function V7(n,e,t,s,i){if(i.strikethrough||i.underline){const a=n.measureText(s),o=e-a.actualBoundingBoxLeft,c=e+a.actualBoundingBoxRight,u=t-a.actualBoundingBoxAscent,h=t+a.actualBoundingBoxDescent,f=i.strikethrough?(u+h)/2:h;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(o,f),n.lineTo(c,f),n.stroke()}}function W7(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function a0(n,e,t,s,i,a={}){const o=Fi(e)?e:[e],c=a.strokeWidth>0&&a.strokeColor!=="";let u,h;for(n.save(),n.font=i.string,U7(n,a),u=0;u<o.length;++u)h=o[u],a.backdrop&&W7(n,a.backdrop),c&&(a.strokeColor&&(n.strokeStyle=a.strokeColor),os(a.strokeWidth)||(n.lineWidth=a.strokeWidth),n.strokeText(h,t,s,a.maxWidth)),n.fillText(h,t,s,a.maxWidth),V7(n,t,s,h,a),s+=Number(i.lineHeight);n.restore()}function ly(n,e){const{x:t,y:s,w:i,h:a,radius:o}=e;n.arc(t+o.topLeft,s+o.topLeft,o.topLeft,1.5*Vn,Vn,!0),n.lineTo(t,s+a-o.bottomLeft),n.arc(t+o.bottomLeft,s+a-o.bottomLeft,o.bottomLeft,Vn,Ii,!0),n.lineTo(t+i-o.bottomRight,s+a),n.arc(t+i-o.bottomRight,s+a-o.bottomRight,o.bottomRight,Ii,0,!0),n.lineTo(t+i,s+o.topRight),n.arc(t+i-o.topRight,s+o.topRight,o.topRight,0,-Ii,!0),n.lineTo(t+o.topLeft,s)}const G7=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Y7=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function X7(n,e){const t=(""+n).match(G7);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const K7=n=>+n||0;function US(n,e){const t={},s=dn(e),i=s?Object.keys(e):e,a=dn(n)?s?o=>sn(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of i)t[o]=K7(a(o));return t}function SM(n){return US(n,{top:"y",right:"x",bottom:"y",left:"x"})}function um(n){return US(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Ro(n){const e=SM(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function _a(n,e){n=n||{},e=e||si.font;let t=sn(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let s=sn(n.style,e.style);s&&!(""+s).match(Y7)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:sn(n.family,e.family),lineHeight:X7(sn(n.lineHeight,e.lineHeight),t),size:t,style:s,weight:sn(n.weight,e.weight),string:""};return i.string=I7(i),i}function sb(n,e,t,s){let i,a,o;for(i=0,a=n.length;i<a;++i)if(o=n[i],o!==void 0&&o!==void 0)return o}function Z7(n,e,t){const{min:s,max:i}=n,a=fM(e,(i-s)/2),o=(c,u)=>t&&c===0?0:c+u;return{min:o(s,-Math.abs(a)),max:o(i,a)}}function hf(n,e){return Object.assign(Object.create(n),e)}function VS(n,e=[""],t,s,i=()=>n[0]){const a=t||n;typeof s>"u"&&(s=EM("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:a,_fallback:s,_getTarget:i,override:c=>VS([c,...n],e,a,s)};return new Proxy(o,{deleteProperty(c,u){return delete c[u],delete c._keys,delete n[0][u],!0},get(c,u){return AM(c,u,()=>sW(u,e,n,c))},getOwnPropertyDescriptor(c,u){return Reflect.getOwnPropertyDescriptor(c._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(c,u){return BT(c).includes(u)},ownKeys(c){return BT(c)},set(c,u,h){const f=c._storage||(c._storage=i());return c[u]=f[u]=h,delete c._keys,!0}})}function Cm(n,e,t,s){const i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:NM(n,s),setContext:a=>Cm(n,a,t,s),override:a=>Cm(n.override(a),e,t,s)};return new Proxy(i,{deleteProperty(a,o){return delete a[o],delete n[o],!0},get(a,o,c){return AM(a,o,()=>Q7(a,o,c))},getOwnPropertyDescriptor(a,o){return a._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(a,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(a,o,c){return n[o]=c,delete a[o],!0}})}function NM(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:s=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:s,isScriptable:Bu(t)?t:()=>t,isIndexable:Bu(s)?s:()=>s}}const J7=(n,e)=>n?n+FS(e):e,WS=(n,e)=>dn(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function AM(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const s=t();return n[e]=s,s}function Q7(n,e,t){const{_proxy:s,_context:i,_subProxy:a,_descriptors:o}=n;let c=s[e];return Bu(c)&&o.isScriptable(e)&&(c=q7(e,c,n,t)),Fi(c)&&c.length&&(c=$7(e,c,n,o.isIndexable)),WS(e,c)&&(c=Cm(c,i,a&&a[e],o)),c}function q7(n,e,t,s){const{_proxy:i,_context:a,_subProxy:o,_stack:c}=t;if(c.has(n))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+n);c.add(n);let u=e(a,o||s);return c.delete(n),WS(n,u)&&(u=GS(i._scopes,i,n,u)),u}function $7(n,e,t,s){const{_proxy:i,_context:a,_subProxy:o,_descriptors:c}=t;if(typeof a.index<"u"&&s(n))return e[a.index%e.length];if(dn(e[0])){const u=e,h=i._scopes.filter(f=>f!==u);e=[];for(const f of u){const g=GS(h,i,n,f);e.push(Cm(g,a,o&&o[n],c))}}return e}function CM(n,e,t){return Bu(n)?n(e,t):n}const eW=(n,e)=>n===!0?e:typeof n=="string"?t0(e,n):void 0;function tW(n,e,t,s,i){for(const a of e){const o=eW(t,a);if(o){n.add(o);const c=CM(o._fallback,t,i);if(typeof c<"u"&&c!==t&&c!==s)return c}else if(o===!1&&typeof s<"u"&&t!==s)return null}return!1}function GS(n,e,t,s){const i=e._rootScopes,a=CM(e._fallback,t,s),o=[...n,...i],c=new Set;c.add(s);let u=IT(c,o,t,a||t,s);return u===null||typeof a<"u"&&a!==t&&(u=IT(c,o,a,u,s),u===null)?!1:VS(Array.from(c),[""],i,a,()=>nW(e,t,s))}function IT(n,e,t,s,i){for(;t;)t=tW(n,e,t,s,i);return t}function nW(n,e,t){const s=n._getTarget();e in s||(s[e]={});const i=s[e];return Fi(i)&&dn(t)?t:i||{}}function sW(n,e,t,s){let i;for(const a of e)if(i=EM(J7(a,n),t),typeof i<"u")return WS(n,i)?GS(t,s,n,i):i}function EM(n,e){for(const t of e){if(!t)continue;const s=t[n];if(typeof s<"u")return s}}function BT(n){let e=n._keys;return e||(e=n._keys=iW(n._scopes)),e}function iW(n){const e=new Set;for(const t of n)for(const s of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(s);return Array.from(e)}const aW=Number.EPSILON||1e-14,Em=(n,e)=>e<n.length&&!n[e].skip&&n[e],TM=n=>n==="x"?"y":"x";function rW(n,e,t,s){const i=n.skip?e:n,a=e,o=t.skip?e:t,c=c2(a,i),u=c2(o,a);let h=c/(c+u),f=u/(c+u);h=isNaN(h)?0:h,f=isNaN(f)?0:f;const g=s*h,x=s*f;return{previous:{x:a.x-g*(o.x-i.x),y:a.y-g*(o.y-i.y)},next:{x:a.x+x*(o.x-i.x),y:a.y+x*(o.y-i.y)}}}function oW(n,e,t){const s=n.length;let i,a,o,c,u,h=Em(n,0);for(let f=0;f<s-1;++f)if(u=h,h=Em(n,f+1),!(!u||!h)){if(Fp(e[f],0,aW)){t[f]=t[f+1]=0;continue}i=t[f]/e[f],a=t[f+1]/e[f],c=Math.pow(i,2)+Math.pow(a,2),!(c<=9)&&(o=3/Math.sqrt(c),t[f]=i*o*e[f],t[f+1]=a*o*e[f])}}function lW(n,e,t="x"){const s=TM(t),i=n.length;let a,o,c,u=Em(n,0);for(let h=0;h<i;++h){if(o=c,c=u,u=Em(n,h+1),!c)continue;const f=c[t],g=c[s];o&&(a=(f-o[t])/3,c[`cp1${t}`]=f-a,c[`cp1${s}`]=g-a*e[h]),u&&(a=(u[t]-f)/3,c[`cp2${t}`]=f+a,c[`cp2${s}`]=g+a*e[h])}}function cW(n,e="x"){const t=TM(e),s=n.length,i=Array(s).fill(0),a=Array(s);let o,c,u,h=Em(n,0);for(o=0;o<s;++o)if(c=u,u=h,h=Em(n,o+1),!!u){if(h){const f=h[e]-u[e];i[o]=f!==0?(h[t]-u[t])/f:0}a[o]=c?h?Am(i[o-1])!==Am(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}oW(n,i,a),lW(n,a,e)}function ib(n,e,t){return Math.max(Math.min(n,t),e)}function dW(n,e){let t,s,i,a,o,c=i0(n[0],e);for(t=0,s=n.length;t<s;++t)o=a,a=c,c=t<s-1&&i0(n[t+1],e),a&&(i=n[t],o&&(i.cp1x=ib(i.cp1x,e.left,e.right),i.cp1y=ib(i.cp1y,e.top,e.bottom)),c&&(i.cp2x=ib(i.cp2x,e.left,e.right),i.cp2y=ib(i.cp2y,e.top,e.bottom)))}function uW(n,e,t,s,i){let a,o,c,u;if(e.spanGaps&&(n=n.filter(h=>!h.skip)),e.cubicInterpolationMode==="monotone")cW(n,i);else{let h=s?n[n.length-1]:n[0];for(a=0,o=n.length;a<o;++a)c=n[a],u=rW(h,c,n[Math.min(a+1,o-(s?0:1))%o],e.tension),c.cp1x=u.previous.x,c.cp1y=u.previous.y,c.cp2x=u.next.x,c.cp2y=u.next.y,h=c}e.capBezierPoints&&dW(n,t)}function YS(){return typeof window<"u"&&typeof document<"u"}function XS(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function cy(n,e,t){let s;return typeof n=="string"?(s=parseInt(n,10),n.indexOf("%")!==-1&&(s=s/100*e.parentNode[t])):s=n,s}const Gy=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function hW(n,e){return Gy(n).getPropertyValue(e)}const fW=["top","right","bottom","left"];function $h(n,e,t){const s={};t=t?"-"+t:"";for(let i=0;i<4;i++){const a=fW[i];s[a]=parseFloat(n[e+"-"+a+t])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const mW=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function gW(n,e){const t=n.touches,s=t&&t.length?t[0]:n,{offsetX:i,offsetY:a}=s;let o=!1,c,u;if(mW(i,a,n.target))c=i,u=a;else{const h=e.getBoundingClientRect();c=s.clientX-h.left,u=s.clientY-h.top,o=!0}return{x:c,y:u,box:o}}function Lh(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:s}=e,i=Gy(t),a=i.boxSizing==="border-box",o=$h(i,"padding"),c=$h(i,"border","width"),{x:u,y:h,box:f}=gW(n,t),g=o.left+(f&&c.left),x=o.top+(f&&c.top);let{width:w,height:A}=e;return a&&(w-=o.width+c.width,A-=o.height+c.height),{x:Math.round((u-g)/w*t.width/s),y:Math.round((h-x)/A*t.height/s)}}function pW(n,e,t){let s,i;if(e===void 0||t===void 0){const a=n&&XS(n);if(!a)e=n.clientWidth,t=n.clientHeight;else{const o=a.getBoundingClientRect(),c=Gy(a),u=$h(c,"border","width"),h=$h(c,"padding");e=o.width-h.width-u.width,t=o.height-h.height-u.height,s=cy(c.maxWidth,a,"clientWidth"),i=cy(c.maxHeight,a,"clientHeight")}}return{width:e,height:t,maxWidth:s||oy,maxHeight:i||oy}}const Pu=n=>Math.round(n*10)/10;function xW(n,e,t,s){const i=Gy(n),a=$h(i,"margin"),o=cy(i.maxWidth,n,"clientWidth")||oy,c=cy(i.maxHeight,n,"clientHeight")||oy,u=pW(n,e,t);let{width:h,height:f}=u;if(i.boxSizing==="content-box"){const x=$h(i,"border","width"),w=$h(i,"padding");h-=w.width+x.width,f-=w.height+x.height}return h=Math.max(0,h-a.width),f=Math.max(0,s?h/s:f-a.height),h=Pu(Math.min(h,o,u.maxWidth)),f=Pu(Math.min(f,c,u.maxHeight)),h&&!f&&(f=Pu(h/2)),(e!==void 0||t!==void 0)&&s&&u.height&&f>u.height&&(f=u.height,h=Pu(Math.floor(f*s))),{width:h,height:f}}function HT(n,e,t){const s=e||1,i=Pu(n.height*s),a=Pu(n.width*s);n.height=Pu(n.height),n.width=Pu(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==s||o.height!==i||o.width!==a?(n.currentDevicePixelRatio=s,o.height=i,o.width=a,n.ctx.setTransform(s,0,0,s,0,0),!0):!1}const bW=(function(){let n=!1;try{const e={get passive(){return n=!0,!1}};YS()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n})();function UT(n,e){const t=hW(n,e),s=t&&t.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Fh(n,e,t,s){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function yW(n,e,t,s){return{x:n.x+t*(e.x-n.x),y:s==="middle"?t<.5?n.y:e.y:s==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function vW(n,e,t,s){const i={x:n.cp2x,y:n.cp2y},a={x:e.cp1x,y:e.cp1y},o=Fh(n,i,t),c=Fh(i,a,t),u=Fh(a,e,t),h=Fh(o,c,t),f=Fh(c,u,t);return Fh(h,f,t)}const wW=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,s){return t-s},leftForLtr(t,s){return t-s}}},SW=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function hm(n,e,t){return n?wW(e,t):SW()}function _M(n,e){let t,s;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,s=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=s)}function jM(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function kM(n){return n==="angle"?{between:s0,compare:v7,normalize:qr}:{between:hd,compare:(e,t)=>e-t,normalize:e=>e}}function VT({start:n,end:e,count:t,loop:s,style:i}){return{start:n%t,end:e%t,loop:s&&(e-n+1)%t===0,style:i}}function NW(n,e,t){const{property:s,start:i,end:a}=t,{between:o,normalize:c}=kM(s),u=e.length;let{start:h,end:f,loop:g}=n,x,w;if(g){for(h+=u,f+=u,x=0,w=u;x<w&&o(c(e[h%u][s]),i,a);++x)h--,f--;h%=u,f%=u}return f<h&&(f+=u),{start:h,end:f,loop:g,style:n.style}}function RM(n,e,t){if(!t)return[n];const{property:s,start:i,end:a}=t,o=e.length,{compare:c,between:u,normalize:h}=kM(s),{start:f,end:g,loop:x,style:w}=NW(n,e,t),A=[];let C=!1,E=null,T,D,M;const L=()=>u(i,M,T)&&c(i,M)!==0,I=()=>c(a,T)===0||u(a,M,T),W=()=>C||L(),V=()=>!C||I();for(let Y=f,K=f;Y<=g;++Y)D=e[Y%o],!D.skip&&(T=h(D[s]),T!==M&&(C=u(T,i,a),E===null&&W()&&(E=c(T,i)===0?Y:K),E!==null&&V()&&(A.push(VT({start:E,end:Y,loop:x,count:o,style:w})),E=null),K=Y,M=T));return E!==null&&A.push(VT({start:E,end:g,loop:x,count:o,style:w})),A}function DM(n,e){const t=[],s=n.segments;for(let i=0;i<s.length;i++){const a=RM(s[i],n.points,e);a.length&&t.push(...a)}return t}function AW(n,e,t,s){let i=0,a=e-1;if(t&&!s)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(a+=i);a>i&&n[a%e].skip;)a--;return a%=e,{start:i,end:a}}function CW(n,e,t,s){const i=n.length,a=[];let o=e,c=n[e],u;for(u=e+1;u<=t;++u){const h=n[u%i];h.skip||h.stop?c.skip||(s=!1,a.push({start:e%i,end:(u-1)%i,loop:s}),e=o=h.stop?u:null):(o=u,c.skip&&(e=u)),c=h}return o!==null&&a.push({start:e%i,end:o%i,loop:s}),a}function EW(n,e){const t=n.points,s=n.options.spanGaps,i=t.length;if(!i)return[];const a=!!n._loop,{start:o,end:c}=AW(t,i,a,s);if(s===!0)return WT(n,[{start:o,end:c,loop:a}],t,e);const u=c<o?c+i:c,h=!!n._fullLoop&&o===0&&c===i-1;return WT(n,CW(t,o,u,h),t,e)}function WT(n,e,t,s){return!s||!s.setContext||!t?e:TW(n,e,t,s)}function TW(n,e,t,s){const i=n._chart.getContext(),a=GT(n.options),{_datasetIndex:o,options:{spanGaps:c}}=n,u=t.length,h=[];let f=a,g=e[0].start,x=g;function w(A,C,E,T){const D=c?-1:1;if(A!==C){for(A+=u;t[A%u].skip;)A-=D;for(;t[C%u].skip;)C+=D;A%u!==C%u&&(h.push({start:A%u,end:C%u,loop:E,style:T}),f=T,g=C%u)}}for(const A of e){g=c?g:A.start;let C=t[g%u],E;for(x=g+1;x<=A.end;x++){const T=t[x%u];E=GT(s.setContext(hf(i,{type:"segment",p0:C,p1:T,p0DataIndex:(x-1)%u,p1DataIndex:x%u,datasetIndex:o}))),_W(E,f)&&w(g,x-1,A.loop,f),C=T,f=E}g<x-1&&w(g,x-1,A.loop,f)}return h}function GT(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function _W(n,e){if(!e)return!1;const t=[],s=function(i,a){return BS(a)?(t.includes(a)||t.push(a),t.indexOf(a)):a};return JSON.stringify(n,s)!==JSON.stringify(e,s)}function ab(n,e,t){return n.options.clip?n[t]:e[t]}function jW(n,e){const{xScale:t,yScale:s}=n;return t&&s?{left:ab(t,e,"left"),right:ab(t,e,"right"),top:ab(s,e,"top"),bottom:ab(s,e,"bottom")}:e}function MM(n,e){const t=e._clip;if(t.disabled)return!1;const s=jW(e,n.chartArea);return{left:t.left===!1?0:s.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:s.right+(t.right===!0?0:t.right),top:t.top===!1?0:s.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:s.bottom+(t.bottom===!0?0:t.bottom)}}class kW{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,s,i){const a=t.listeners[i],o=t.duration;a.forEach(c=>c({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(s-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=bM.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const a=s.items;let o=a.length-1,c=!1,u;for(;o>=0;--o)u=a[o],u._active?(u._total>s.duration&&(s.duration=u._total),u.tick(e),c=!0):(a[o]=a[a.length-1],a.pop());c&&(i.draw(),this._notify(i,s,e,"progress")),a.length||(s.running=!1,this._notify(i,s,e,"complete"),s.initial=!1),t+=a.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let s=t.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,s)),s}listen(e,t,s){this._getAnims(e).listeners[t].push(s)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const s=t.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var rd=new kW;const YT="transparent",RW={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const s=OT(n||YT),i=s.valid&&OT(e||YT);return i&&i.valid?i.mix(s,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class DW{constructor(e,t,s,i){const a=t[s];i=sb([e.to,i,a,e.from]);const o=sb([e.from,a,i]);this._active=!0,this._fn=e.fn||RW[e.type||typeof o],this._easing=zp[e.easing]||zp.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=s,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,s){if(this._active){this._notify(!1);const i=this._target[this._prop],a=s-this._start,o=this._duration-a;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=sb([e.to,t,i,e.from]),this._from=sb([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,s=this._duration,i=this._prop,a=this._from,o=this._loop,c=this._to;let u;if(this._active=a!==c&&(o||t<s),!this._active){this._target[i]=c,this._notify(!0);return}if(t<0){this._target[i]=a;return}u=t/s%2,u=o&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[i]=this._fn(a,c,u)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,s)=>{e.push({res:t,rej:s})})}_notify(e){const t=e?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][t]()}}class PM{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!dn(e))return;const t=Object.keys(si.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const a=e[i];if(!dn(a))return;const o={};for(const c of t)o[c]=a[c];(Fi(a.properties)&&a.properties||[i]).forEach(c=>{(c===i||!s.has(c))&&s.set(c,o)})})}_animateOptions(e,t){const s=t.options,i=PW(e,s);if(!i)return[];const a=this._createAnimations(i,s);return s.$shared&&MW(e.options.$animations,s).then(()=>{e.options=s},()=>{}),a}_createAnimations(e,t){const s=this._properties,i=[],a=e.$animations||(e.$animations={}),o=Object.keys(t),c=Date.now();let u;for(u=o.length-1;u>=0;--u){const h=o[u];if(h.charAt(0)==="$")continue;if(h==="options"){i.push(...this._animateOptions(e,t));continue}const f=t[h];let g=a[h];const x=s.get(h);if(g)if(x&&g.active()){g.update(x,f,c);continue}else g.cancel();if(!x||!x.duration){e[h]=f;continue}a[h]=g=new DW(x,e,h,f),i.push(g)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const s=this._createAnimations(e,t);if(s.length)return rd.add(this._chart,s),!0}}function MW(n,e){const t=[],s=Object.keys(e);for(let i=0;i<s.length;i++){const a=n[s[i]];a&&a.active()&&t.push(a.wait())}return Promise.all(t)}function PW(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function XT(n,e){const t=n&&n.options||{},s=t.reverse,i=t.min===void 0?e:0,a=t.max===void 0?e:0;return{start:s?a:i,end:s?i:a}}function OW(n,e,t){if(t===!1)return!1;const s=XT(n,t),i=XT(e,t);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function LW(n){let e,t,s,i;return dn(n)?(e=n.top,t=n.right,s=n.bottom,i=n.left):e=t=s=i=n,{top:e,right:t,bottom:s,left:i,disabled:n===!1}}function OM(n,e){const t=[],s=n._getSortedDatasetMetas(e);let i,a;for(i=0,a=s.length;i<a;++i)t.push(s[i].index);return t}function KT(n,e,t,s={}){const i=n.keys,a=s.mode==="single";let o,c,u,h;if(e===null)return;let f=!1;for(o=0,c=i.length;o<c;++o){if(u=+i[o],u===t){if(f=!0,s.all)continue;break}h=n.values[u],ka(h)&&(a||e===0||Am(e)===Am(h))&&(e+=h)}return!f&&!s.all?0:e}function FW(n,e){const{iScale:t,vScale:s}=e,i=t.axis==="x"?"x":"y",a=s.axis==="x"?"x":"y",o=Object.keys(n),c=new Array(o.length);let u,h,f;for(u=0,h=o.length;u<h;++u)f=o[u],c[u]={[i]:f,[a]:n[f]};return c}function Q1(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function zW(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function IW(n){const{min:e,max:t,minDefined:s,maxDefined:i}=n.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function BW(n,e,t){const s=n[e]||(n[e]={});return s[t]||(s[t]={})}function ZT(n,e,t,s){for(const i of e.getMatchingVisibleMetas(s).reverse()){const a=n[i.index];if(t&&a>0||!t&&a<0)return i.index}return null}function JT(n,e){const{chart:t,_cachedMeta:s}=n,i=t._stacks||(t._stacks={}),{iScale:a,vScale:o,index:c}=s,u=a.axis,h=o.axis,f=zW(a,o,s),g=e.length;let x;for(let w=0;w<g;++w){const A=e[w],{[u]:C,[h]:E}=A,T=A._stacks||(A._stacks={});x=T[h]=BW(i,f,C),x[c]=E,x._top=ZT(x,o,!0,s.type),x._bottom=ZT(x,o,!1,s.type);const D=x._visualValues||(x._visualValues={});D[c]=E}}function q1(n,e){const t=n.scales;return Object.keys(t).filter(s=>t[s].axis===e).shift()}function HW(n,e){return hf(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function UW(n,e,t){return hf(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function rp(n,e){const t=n.controller.index,s=n.vScale&&n.vScale.axis;if(s){e=e||n._parsed;for(const i of e){const a=i._stacks;if(!a||a[s]===void 0||a[s][t]===void 0)return;delete a[s][t],a[s]._visualValues!==void 0&&a[s]._visualValues[t]!==void 0&&delete a[s]._visualValues[t]}}}const $1=n=>n==="reset"||n==="none",QT=(n,e)=>e?n:Object.assign({},n),VW=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:OM(t,!0),values:null};class KS{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Q1(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&rp(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,s=this.getDataset(),i=(g,x,w,A)=>g==="x"?x:g==="r"?A:w,a=t.xAxisID=sn(s.xAxisID,q1(e,"x")),o=t.yAxisID=sn(s.yAxisID,q1(e,"y")),c=t.rAxisID=sn(s.rAxisID,q1(e,"r")),u=t.indexAxis,h=t.iAxisID=i(u,a,o,c),f=t.vAxisID=i(u,o,a,c);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(c),t.iScale=this.getScaleForId(h),t.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&DT(this._data,this),e._stacked&&rp(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),s=this._data;if(dn(t)){const i=this._cachedMeta;this._data=FW(t,i)}else if(s!==t){if(s){DT(s,this);const i=this._cachedMeta;rp(i),i._parsed=[]}t&&Object.isExtensible(t)&&A7(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const a=t._stacked;t._stacked=Q1(t.vScale,t),t.stack!==s.stack&&(i=!0,rp(t),t.stack=s.stack),this._resyncElements(e),(i||a!==t._stacked)&&(JT(this,t._parsed),t._stacked=Q1(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:s,_data:i}=this,{iScale:a,_stacked:o}=s,c=a.axis;let u=e===0&&t===i.length?!0:s._sorted,h=e>0&&s._parsed[e-1],f,g,x;if(this._parsing===!1)s._parsed=i,s._sorted=!0,x=i;else{Fi(i[e])?x=this.parseArrayData(s,i,e,t):dn(i[e])?x=this.parseObjectData(s,i,e,t):x=this.parsePrimitiveData(s,i,e,t);const w=()=>g[c]===null||h&&g[c]<h[c];for(f=0;f<t;++f)s._parsed[f+e]=g=x[f],u&&(w()&&(u=!1),h=g);s._sorted=u}o&&JT(this,x)}parsePrimitiveData(e,t,s,i){const{iScale:a,vScale:o}=e,c=a.axis,u=o.axis,h=a.getLabels(),f=a===o,g=new Array(i);let x,w,A;for(x=0,w=i;x<w;++x)A=x+s,g[x]={[c]:f||a.parse(h[A],A),[u]:o.parse(t[A],A)};return g}parseArrayData(e,t,s,i){const{xScale:a,yScale:o}=e,c=new Array(i);let u,h,f,g;for(u=0,h=i;u<h;++u)f=u+s,g=t[f],c[u]={x:a.parse(g[0],f),y:o.parse(g[1],f)};return c}parseObjectData(e,t,s,i){const{xScale:a,yScale:o}=e,{xAxisKey:c="x",yAxisKey:u="y"}=this._parsing,h=new Array(i);let f,g,x,w;for(f=0,g=i;f<g;++f)x=f+s,w=t[x],h[f]={x:a.parse(t0(w,c),x),y:o.parse(t0(w,u),x)};return h}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,s){const i=this.chart,a=this._cachedMeta,o=t[e.axis],c={keys:OM(i,!0),values:t._stacks[e.axis]._visualValues};return KT(c,o,a.index,{mode:s})}updateRangeFromParsed(e,t,s,i){const a=s[t.axis];let o=a===null?NaN:a;const c=i&&s._stacks[t.axis];i&&c&&(i.values=c,o=KT(i,a,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const s=this._cachedMeta,i=s._parsed,a=s._sorted&&e===s.iScale,o=i.length,c=this._getOtherScale(e),u=VW(t,s,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:g}=IW(c);let x,w;function A(){w=i[x];const C=w[c.axis];return!ka(w[e.axis])||f>C||g<C}for(x=0;x<o&&!(!A()&&(this.updateRangeFromParsed(h,e,w,u),a));++x);if(a){for(x=o-1;x>=0;--x)if(!A()){this.updateRangeFromParsed(h,e,w,u);break}}return h}getAllParsedValues(e){const t=this._cachedMeta._parsed,s=[];let i,a,o;for(i=0,a=t.length;i<a;++i)o=t[i][e.axis],ka(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,s=t.iScale,i=t.vScale,a=this.getParsed(e);return{label:s?""+s.getLabelForValue(a[s.axis]):"",value:i?""+i.getLabelForValue(a[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=LW(sn(this.options.clip,OW(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,s=this._cachedMeta,i=s.data||[],a=t.chartArea,o=[],c=this._drawStart||0,u=this._drawCount||i.length-c,h=this.options.drawActiveElementsOnTop;let f;for(s.dataset&&s.dataset.draw(e,a,c,u),f=c;f<c+u;++f){const g=i[f];g.hidden||(g.active&&h?o.push(g):g.draw(e,a))}for(f=0;f<o.length;++f)o[f].draw(e,a)}getStyle(e,t){const s=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,t,s){const i=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];a=o.$context||(o.$context=UW(this.getContext(),e,o)),a.parsed=this.getParsed(e),a.raw=i.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=HW(this.chart.getContext(),this.index)),a.dataset=i,a.index=a.datasetIndex=this.index;return a.active=!!t,a.mode=s,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",s){const i=t==="active",a=this._cachedDataOpts,o=e+"-"+t,c=a[o],u=this.enableOptionSharing&&ry(s);if(c)return QT(c,u);const h=this.chart.config,f=h.datasetElementScopeKeys(this._type,e),g=i?[`${e}Hover`,"hover",e,""]:[e,""],x=h.getOptionScopes(this.getDataset(),f),w=Object.keys(si.elements[e]),A=()=>this.getContext(s,i,t),C=h.resolveNamedOptions(x,w,A,g);return C.$shared&&(C.$shared=u,a[o]=Object.freeze(QT(C,u))),C}_resolveAnimations(e,t,s){const i=this.chart,a=this._cachedDataOpts,o=`animation-${t}`,c=a[o];if(c)return c;let u;if(i.options.animation!==!1){const f=this.chart.config,g=f.datasetAnimationScopeKeys(this._type,t),x=f.getOptionScopes(this.getDataset(),g);u=f.createResolver(x,this.getContext(e,s,t))}const h=new PM(i,u&&u.animations);return u&&u._cacheable&&(a[o]=Object.freeze(h)),h}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||$1(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const s=this.resolveDataElementOptions(e,t),i=this._sharedOptions,a=this.getSharedOptions(s),o=this.includeOptions(t,a)||a!==i;return this.updateSharedOptions(a,t,s),{sharedOptions:a,includeOptions:o}}updateElement(e,t,s,i){$1(i)?Object.assign(e,s):this._resolveAnimations(t,i).update(e,s)}updateSharedOptions(e,t,s){e&&!$1(t)&&this._resolveAnimations(void 0,t).update(e,s)}_setStyle(e,t,s,i){e.active=i;const a=this.getStyle(t,i);this._resolveAnimations(t,s,i).update(e,{options:!i&&this.getSharedOptions(a)||a})}removeHoverStyle(e,t,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,t,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,s=this._cachedMeta.data;for(const[c,u,h]of this._syncList)this[c](u,h);this._syncList=[];const i=s.length,a=t.length,o=Math.min(a,i);o&&this.parse(0,o),a>i?this._insertElements(i,a-i,e):a<i&&this._removeElements(a,i-a)}_insertElements(e,t,s=!0){const i=this._cachedMeta,a=i.data,o=e+t;let c;const u=h=>{for(h.length+=t,c=h.length-1;c>=o;c--)h[c]=h[c-t]};for(u(a),c=e;c<o;++c)a[c]=new this.dataElementType;this._parsing&&u(i._parsed),this.parse(e,t),s&&this.updateElements(a,e,t,"reset")}updateElements(e,t,s,i){}_removeElements(e,t){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(e,t);s._stacked&&rp(s,i)}s.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,s,i]=e;this[t](s,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function WW(n,e,t){let s=1,i=1,a=0,o=0;if(e<Ds){const c=n,u=c+e,h=Math.cos(c),f=Math.sin(c),g=Math.cos(u),x=Math.sin(u),w=(M,L,I)=>s0(M,c,u,!0)?1:Math.max(L,L*t,I,I*t),A=(M,L,I)=>s0(M,c,u,!0)?-1:Math.min(L,L*t,I,I*t),C=w(0,h,g),E=w(Ii,f,x),T=A(Vn,h,g),D=A(Vn+Ii,f,x);s=(C-T)/2,i=(E-D)/2,a=-(C+T)/2,o=-(E+D)/2}return{ratioX:s,ratioY:i,offsetX:a,offsetY:o}}class GW extends KS{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data,{labels:{pointStyle:s,textAlign:i,color:a,useBorderRadius:o,borderRadius:c}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((u,h)=>{const g=e.getDatasetMeta(0).controller.getStyle(h);return{text:u,fillStyle:g.backgroundColor,fontColor:a,hidden:!e.getDataVisibility(h),lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:g.borderWidth,strokeStyle:g.borderColor,textAlign:i,pointStyle:s,borderRadius:o&&(c||g.borderRadius),index:h}}):[]}},onClick(e,t,s){s.chart.toggleDataVisibility(t.index),s.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const s=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=s;else{let a=u=>+s[u];if(dn(s[e])){const{key:u="value"}=this._parsing;a=h=>+t0(s[h],u)}let o,c;for(o=e,c=e+t;o<c;++o)i._parsed[o]=a(o)}}_getRotation(){return ud(this.options.rotation-90)}_getCircumference(){return ud(this.options.circumference)}_getRotationExtents(){let e=Ds,t=-Ds;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const i=this.chart.getDatasetMeta(s).controller,a=i._getRotation(),o=i._getCircumference();e=Math.min(e,a),t=Math.max(t,a+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:s}=t,i=this._cachedMeta,a=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,c=Math.max((Math.min(s.width,s.height)-o)/2,0),u=Math.min(o7(this.options.cutout,c),1),h=this._getRingWeight(this.index),{circumference:f,rotation:g}=this._getRotationExtents(),{ratioX:x,ratioY:w,offsetX:A,offsetY:C}=WW(g,f,u),E=(s.width-o)/x,T=(s.height-o)/w,D=Math.max(Math.min(E,T)/2,0),M=fM(this.options.radius,D),L=Math.max(M*u,0),I=(M-L)/this._getVisibleDatasetWeightTotal();this.offsetX=A*M,this.offsetY=C*M,i.total=this.calculateTotal(),this.outerRadius=M-I*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-I*h,0),this.updateElements(a,0,a.length,e)}_circumference(e,t){const s=this.options,i=this._cachedMeta,a=this._getCircumference();return t&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*a/Ds)}updateElements(e,t,s,i){const a=i==="reset",o=this.chart,c=o.chartArea,h=o.options.animation,f=(c.left+c.right)/2,g=(c.top+c.bottom)/2,x=a&&h.animateScale,w=x?0:this.innerRadius,A=x?0:this.outerRadius,{sharedOptions:C,includeOptions:E}=this._getSharedOptions(t,i);let T=this._getRotation(),D;for(D=0;D<t;++D)T+=this._circumference(D,a);for(D=t;D<t+s;++D){const M=this._circumference(D,a),L=e[D],I={x:f+this.offsetX,y:g+this.offsetY,startAngle:T,endAngle:T+M,circumference:M,outerRadius:A,innerRadius:w};E&&(I.options=C||this.resolveDataElementOptions(D,L.active?"active":i)),T+=M,this.updateElement(L,D,I,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let s=0,i;for(i=0;i<t.length;i++){const a=e._parsed[i];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(i)&&!t[i].hidden&&(s+=Math.abs(a))}return s}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Ds*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart,i=s.data.labels||[],a=HS(t._parsed[e],s.options.locale);return{label:i[e]||"",value:a}}getMaxBorderWidth(e){let t=0;const s=this.chart;let i,a,o,c,u;if(!e){for(i=0,a=s.data.datasets.length;i<a;++i)if(s.isDatasetVisible(i)){o=s.getDatasetMeta(i),e=o.data,c=o.controller;break}}if(!e)return 0;for(i=0,a=e.length;i<a;++i)u=c.resolveDataElementOptions(i),u.borderAlign!=="inner"&&(t=Math.max(t,u.borderWidth||0,u.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let s=0,i=e.length;s<i;++s){const a=this.resolveDataElementOptions(s);t=Math.max(t,a.offset||0,a.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(t+=this._getRingWeight(s));return t}_getRingWeight(e){return Math.max(sn(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class YW extends KS{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:s,data:i=[],_dataset:a}=t,o=this.chart._animationsDisabled;let{start:c,count:u}=_7(t,i,o);this._drawStart=c,this._drawCount=u,j7(t)&&(c=0,u=i.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!a._decimated,s.points=i;const h=this.resolveDatasetElementOptions(e);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:h},e),this.updateElements(i,c,u,e)}updateElements(e,t,s,i){const a=i==="reset",{iScale:o,vScale:c,_stacked:u,_dataset:h}=this._cachedMeta,{sharedOptions:f,includeOptions:g}=this._getSharedOptions(t,i),x=o.axis,w=c.axis,{spanGaps:A,segment:C}=this.options,E=n0(A)?A:Number.POSITIVE_INFINITY,T=this.chart._animationsDisabled||a||i==="none",D=t+s,M=e.length;let L=t>0&&this.getParsed(t-1);for(let I=0;I<M;++I){const W=e[I],V=T?W:{};if(I<t||I>=D){V.skip=!0;continue}const Y=this.getParsed(I),K=os(Y[w]),q=V[x]=o.getPixelForValue(Y[x],I),ne=V[w]=a||K?c.getBasePixel():c.getPixelForValue(u?this.applyStack(c,Y,u):Y[w],I);V.skip=isNaN(q)||isNaN(ne)||K,V.stop=I>0&&Math.abs(Y[x]-L[x])>E,C&&(V.parsed=Y,V.raw=h.data[I]),g&&(V.options=f||this.resolveDataElementOptions(I,W.active?"active":i)),T||this.updateElement(W,I,V,i),L=Y}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,s=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return s;const a=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,a,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function kh(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ZS{static override(e){Object.assign(ZS.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return kh()}parse(){return kh()}format(){return kh()}add(){return kh()}diff(){return kh()}startOf(){return kh()}endOf(){return kh()}}var XW={_date:ZS};function KW(n,e,t,s){const{controller:i,data:a,_sorted:o}=n,c=i._cachedMeta.iScale,u=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(c&&e===c.axis&&e!=="r"&&o&&a.length){const h=c._reversePixels?S7:Yh;if(s){if(i._sharedOptions){const f=a[0],g=typeof f.getRange=="function"&&f.getRange(e);if(g){const x=h(a,e,t-g),w=h(a,e,t+g);return{lo:x.lo,hi:w.hi}}}}else{const f=h(a,e,t);if(u){const{vScale:g}=i._cachedMeta,{_parsed:x}=n,w=x.slice(0,f.lo+1).reverse().findIndex(C=>!os(C[g.axis]));f.lo-=Math.max(0,w);const A=x.slice(f.hi).findIndex(C=>!os(C[g.axis]));f.hi+=Math.max(0,A)}return f}}return{lo:0,hi:a.length-1}}function Yy(n,e,t,s,i){const a=n.getSortedVisibleDatasetMetas(),o=t[e];for(let c=0,u=a.length;c<u;++c){const{index:h,data:f}=a[c],{lo:g,hi:x}=KW(a[c],e,o,i);for(let w=g;w<=x;++w){const A=f[w];A.skip||s(A,h,w)}}}function ZW(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(s,i){const a=e?Math.abs(s.x-i.x):0,o=t?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(o,2))}}function ew(n,e,t,s,i){const a=[];return!i&&!n.isPointInArea(e)||Yy(n,t,e,function(c,u,h){!i&&!i0(c,n.chartArea,0)||c.inRange(e.x,e.y,s)&&a.push({element:c,datasetIndex:u,index:h})},!0),a}function JW(n,e,t,s){let i=[];function a(o,c,u){const{startAngle:h,endAngle:f}=o.getProps(["startAngle","endAngle"],s),{angle:g}=pM(o,{x:e.x,y:e.y});s0(g,h,f)&&i.push({element:o,datasetIndex:c,index:u})}return Yy(n,t,e,a),i}function QW(n,e,t,s,i,a){let o=[];const c=ZW(t);let u=Number.POSITIVE_INFINITY;function h(f,g,x){const w=f.inRange(e.x,e.y,i);if(s&&!w)return;const A=f.getCenterPoint(i);if(!(!!a||n.isPointInArea(A))&&!w)return;const E=c(e,A);E<u?(o=[{element:f,datasetIndex:g,index:x}],u=E):E===u&&o.push({element:f,datasetIndex:g,index:x})}return Yy(n,t,e,h),o}function tw(n,e,t,s,i,a){return!a&&!n.isPointInArea(e)?[]:t==="r"&&!s?JW(n,e,t,i):QW(n,e,t,s,i,a)}function qT(n,e,t,s,i){const a=[],o=t==="x"?"inXRange":"inYRange";let c=!1;return Yy(n,t,e,(u,h,f)=>{u[o]&&u[o](e[t],i)&&(a.push({element:u,datasetIndex:h,index:f}),c=c||u.inRange(e.x,e.y,i))}),s&&!c?[]:a}var qW={modes:{index(n,e,t,s){const i=Lh(e,n),a=t.axis||"x",o=t.includeInvisible||!1,c=t.intersect?ew(n,i,a,s,o):tw(n,i,a,!1,s,o),u=[];return c.length?(n.getSortedVisibleDatasetMetas().forEach(h=>{const f=c[0].index,g=h.data[f];g&&!g.skip&&u.push({element:g,datasetIndex:h.index,index:f})}),u):[]},dataset(n,e,t,s){const i=Lh(e,n),a=t.axis||"xy",o=t.includeInvisible||!1;let c=t.intersect?ew(n,i,a,s,o):tw(n,i,a,!1,s,o);if(c.length>0){const u=c[0].datasetIndex,h=n.getDatasetMeta(u).data;c=[];for(let f=0;f<h.length;++f)c.push({element:h[f],datasetIndex:u,index:f})}return c},point(n,e,t,s){const i=Lh(e,n),a=t.axis||"xy",o=t.includeInvisible||!1;return ew(n,i,a,s,o)},nearest(n,e,t,s){const i=Lh(e,n),a=t.axis||"xy",o=t.includeInvisible||!1;return tw(n,i,a,t.intersect,s,o)},x(n,e,t,s){const i=Lh(e,n);return qT(n,i,"x",t.intersect,s)},y(n,e,t,s){const i=Lh(e,n);return qT(n,i,"y",t.intersect,s)}}};const LM=["left","top","right","bottom"];function op(n,e){return n.filter(t=>t.pos===e)}function $T(n,e){return n.filter(t=>LM.indexOf(t.pos)===-1&&t.box.axis===e)}function lp(n,e){return n.sort((t,s)=>{const i=e?s:t,a=e?t:s;return i.weight===a.weight?i.index-a.index:i.weight-a.weight})}function $W(n){const e=[];let t,s,i,a,o,c;for(t=0,s=(n||[]).length;t<s;++t)i=n[t],{position:a,options:{stack:o,stackWeight:c=1}}=i,e.push({index:t,box:i,pos:a,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&a+o,stackWeight:c});return e}function eG(n){const e={};for(const t of n){const{stack:s,pos:i,stackWeight:a}=t;if(!s||!LM.includes(i))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=a}return e}function tG(n,e){const t=eG(n),{vBoxMaxWidth:s,hBoxMaxHeight:i}=e;let a,o,c;for(a=0,o=n.length;a<o;++a){c=n[a];const{fullSize:u}=c.box,h=t[c.stack],f=h&&c.stackWeight/h.weight;c.horizontal?(c.width=f?f*s:u&&e.availableWidth,c.height=i):(c.width=s,c.height=f?f*i:u&&e.availableHeight)}return t}function nG(n){const e=$W(n),t=lp(e.filter(h=>h.box.fullSize),!0),s=lp(op(e,"left"),!0),i=lp(op(e,"right")),a=lp(op(e,"top"),!0),o=lp(op(e,"bottom")),c=$T(e,"x"),u=$T(e,"y");return{fullSize:t,leftAndTop:s.concat(a),rightAndBottom:i.concat(u).concat(o).concat(c),chartArea:op(e,"chartArea"),vertical:s.concat(i).concat(u),horizontal:a.concat(o).concat(c)}}function e_(n,e,t,s){return Math.max(n[t],e[t])+Math.max(n[s],e[s])}function FM(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function sG(n,e,t,s){const{pos:i,box:a}=t,o=n.maxPadding;if(!dn(i)){t.size&&(n[i]-=t.size);const g=s[t.stack]||{size:0,count:1};g.size=Math.max(g.size,t.horizontal?a.height:a.width),t.size=g.size/g.count,n[i]+=t.size}a.getPadding&&FM(o,a.getPadding());const c=Math.max(0,e.outerWidth-e_(o,n,"left","right")),u=Math.max(0,e.outerHeight-e_(o,n,"top","bottom")),h=c!==n.w,f=u!==n.h;return n.w=c,n.h=u,t.horizontal?{same:h,other:f}:{same:f,other:h}}function iG(n){const e=n.maxPadding;function t(s){const i=Math.max(e[s]-n[s],0);return n[s]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function aG(n,e){const t=e.maxPadding;function s(i){const a={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{a[o]=Math.max(e[o],t[o])}),a}return s(n?["left","right"]:["top","bottom"])}function Ap(n,e,t,s){const i=[];let a,o,c,u,h,f;for(a=0,o=n.length,h=0;a<o;++a){c=n[a],u=c.box,u.update(c.width||e.w,c.height||e.h,aG(c.horizontal,e));const{same:g,other:x}=sG(e,t,c,s);h|=g&&i.length,f=f||x,u.fullSize||i.push(c)}return h&&Ap(i,e,t,s)||f}function rb(n,e,t,s,i){n.top=t,n.left=e,n.right=e+s,n.bottom=t+i,n.width=s,n.height=i}function t_(n,e,t,s){const i=t.padding;let{x:a,y:o}=e;for(const c of n){const u=c.box,h=s[c.stack]||{placed:0,weight:1},f=c.stackWeight/h.weight||1;if(c.horizontal){const g=e.w*f,x=h.size||u.height;ry(h.start)&&(o=h.start),u.fullSize?rb(u,i.left,o,t.outerWidth-i.right-i.left,x):rb(u,e.left+h.placed,o,g,x),h.start=o,h.placed+=g,o=u.bottom}else{const g=e.h*f,x=h.size||u.width;ry(h.start)&&(a=h.start),u.fullSize?rb(u,a,i.top,x,t.outerHeight-i.bottom-i.top):rb(u,a,e.top+h.placed,x,g),h.start=a,h.placed+=g,a=u.right}}e.x=a,e.y=o}var _o={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,s){if(!n)return;const i=Ro(n.options.layout.padding),a=Math.max(e-i.width,0),o=Math.max(t-i.height,0),c=nG(n.boxes),u=c.vertical,h=c.horizontal;Un(n.boxes,C=>{typeof C.beforeLayout=="function"&&C.beforeLayout()});const f=u.reduce((C,E)=>E.box.options&&E.box.options.display===!1?C:C+1,0)||1,g=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:a,availableHeight:o,vBoxMaxWidth:a/2/f,hBoxMaxHeight:o/2}),x=Object.assign({},i);FM(x,Ro(s));const w=Object.assign({maxPadding:x,w:a,h:o,x:i.left,y:i.top},i),A=tG(u.concat(h),g);Ap(c.fullSize,w,g,A),Ap(u,w,g,A),Ap(h,w,g,A)&&Ap(u,w,g,A),iG(w),t_(c.leftAndTop,w,g,A),w.x+=w.w,w.y+=w.h,t_(c.rightAndBottom,w,g,A),n.chartArea={left:w.left,top:w.top,right:w.left+w.w,bottom:w.top+w.h,height:w.h,width:w.w},Un(c.chartArea,C=>{const E=C.box;Object.assign(E,n.chartArea),E.update(w.w,w.h,{left:0,top:0,right:0,bottom:0})})}};class zM{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,s){}removeEventListener(e,t,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,s,i){return t=Math.max(0,t||e.width),s=s||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):s)}}isAttached(e){return!0}updateConfig(e){}}class rG extends zM{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ib="$chartjs",oG={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},n_=n=>n===null||n==="";function lG(n,e){const t=n.style,s=n.getAttribute("height"),i=n.getAttribute("width");if(n[Ib]={initial:{height:s,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",n_(i)){const a=UT(n,"width");a!==void 0&&(n.width=a)}if(n_(s))if(n.style.height==="")n.height=n.width/(e||2);else{const a=UT(n,"height");a!==void 0&&(n.height=a)}return n}const IM=bW?{passive:!0}:!1;function cG(n,e,t){n&&n.addEventListener(e,t,IM)}function dG(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,IM)}function uG(n,e){const t=oG[n.type]||n.type,{x:s,y:i}=Lh(n,e);return{type:t,chart:e,native:n,x:s!==void 0?s:null,y:i!==void 0?i:null}}function dy(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function hG(n,e,t){const s=n.canvas,i=new MutationObserver(a=>{let o=!1;for(const c of a)o=o||dy(c.addedNodes,s),o=o&&!dy(c.removedNodes,s);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function fG(n,e,t){const s=n.canvas,i=new MutationObserver(a=>{let o=!1;for(const c of a)o=o||dy(c.removedNodes,s),o=o&&!dy(c.addedNodes,s);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const r0=new Map;let s_=0;function BM(){const n=window.devicePixelRatio;n!==s_&&(s_=n,r0.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function mG(n,e){r0.size||window.addEventListener("resize",BM),r0.set(n,e)}function gG(n){r0.delete(n),r0.size||window.removeEventListener("resize",BM)}function pG(n,e,t){const s=n.canvas,i=s&&XS(s);if(!i)return;const a=yM((c,u)=>{const h=i.clientWidth;t(c,u),h<i.clientWidth&&t()},window),o=new ResizeObserver(c=>{const u=c[0],h=u.contentRect.width,f=u.contentRect.height;h===0&&f===0||a(h,f)});return o.observe(i),mG(n,a),o}function nw(n,e,t){t&&t.disconnect(),e==="resize"&&gG(n)}function xG(n,e,t){const s=n.canvas,i=yM(a=>{n.ctx!==null&&t(uG(a,n))},n);return cG(s,e,i),i}class bG extends zM{acquireContext(e,t){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(lG(e,t),s):null}releaseContext(e){const t=e.canvas;if(!t[Ib])return!1;const s=t[Ib].initial;["height","width"].forEach(a=>{const o=s[a];os(o)?t.removeAttribute(a):t.setAttribute(a,o)});const i=s.style||{};return Object.keys(i).forEach(a=>{t.style[a]=i[a]}),t.width=t.width,delete t[Ib],!0}addEventListener(e,t,s){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),o={attach:hG,detach:fG,resize:pG}[t]||xG;i[t]=o(e,t,s)}removeEventListener(e,t){const s=e.$proxies||(e.$proxies={}),i=s[t];if(!i)return;({attach:nw,detach:nw,resize:nw}[t]||dG)(e,t,i),s[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,s,i){return xW(e,t,s,i)}isAttached(e){const t=e&&XS(e);return!!(t&&t.isConnected)}}function yG(n){return!YS()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?rG:bG}let Sd=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}hasValue(){return n0(this.x)&&n0(this.y)}getProps(e,t){const s=this.$animations;if(!t||!s)return this;const i={};return e.forEach(a=>{i[a]=s[a]&&s[a].active()?s[a]._to:this[a]}),i}};function vG(n,e){const t=n.options.ticks,s=wG(n),i=Math.min(t.maxTicksLimit||s,s),a=t.major.enabled?NG(e):[],o=a.length,c=a[0],u=a[o-1],h=[];if(o>i)return AG(e,h,a,o/i),h;const f=SG(a,e,i);if(o>0){let g,x;const w=o>1?Math.round((u-c)/(o-1)):null;for(ob(e,h,f,os(w)?0:c-w,c),g=0,x=o-1;g<x;g++)ob(e,h,f,a[g],a[g+1]);return ob(e,h,f,u,os(w)?e.length:u+w),h}return ob(e,h,f),h}function wG(n){const e=n.options.offset,t=n._tickSize(),s=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(s,i))}function SG(n,e,t){const s=CG(n),i=e.length/t;if(!s)return Math.max(i,1);const a=g7(s);for(let o=0,c=a.length-1;o<c;o++){const u=a[o];if(u>i)return u}return Math.max(i,1)}function NG(n){const e=[];let t,s;for(t=0,s=n.length;t<s;t++)n[t].major&&e.push(t);return e}function AG(n,e,t,s){let i=0,a=t[0],o;for(s=Math.ceil(s),o=0;o<n.length;o++)o===a&&(e.push(n[o]),i++,a=t[i*s])}function ob(n,e,t,s,i){const a=sn(s,0),o=Math.min(sn(i,n.length),n.length);let c=0,u,h,f;for(t=Math.ceil(t),i&&(u=i-s,t=u/Math.floor(u/t)),f=a;f<0;)c++,f=Math.round(a+c*t);for(h=Math.max(a,0);h<o;h++)h===f&&(e.push(n[h]),c++,f=Math.round(a+c*t))}function CG(n){const e=n.length;let t,s;if(e<2)return!1;for(s=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==s)return!1;return s}const EG=n=>n==="left"?"right":n==="right"?"left":n,i_=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,a_=(n,e)=>Math.min(e||n,n);function r_(n,e){const t=[],s=n.length/e,i=n.length;let a=0;for(;a<i;a+=s)t.push(n[Math.floor(a)]);return t}function TG(n,e,t){const s=n.ticks.length,i=Math.min(e,s-1),a=n._startPixel,o=n._endPixel,c=1e-6;let u=n.getPixelForTick(i),h;if(!(t&&(s===1?h=Math.max(u-a,o-u):e===0?h=(n.getPixelForTick(1)-u)/2:h=(u-n.getPixelForTick(i-1))/2,u+=i<e?h:-h,u<a-c||u>o+c)))return u}function _G(n,e){Un(n,t=>{const s=t.gc,i=s.length/2;let a;if(i>e){for(a=0;a<i;++a)delete t.data[s[a]];s.splice(0,i)}})}function cp(n){return n.drawTicks?n.tickLength:0}function o_(n,e){if(!n.display)return 0;const t=_a(n.font,e),s=Ro(n.padding);return(Fi(n.text)?n.text.length:1)*t.lineHeight+s.height}function jG(n,e){return hf(n,{scale:e,type:"scale"})}function kG(n,e,t){return hf(n,{tick:t,index:e,type:"tick"})}function RG(n,e,t){let s=IS(n);return(t&&e!=="right"||!t&&e==="right")&&(s=EG(s)),s}function DG(n,e,t,s){const{top:i,left:a,bottom:o,right:c,chart:u}=n,{chartArea:h,scales:f}=u;let g=0,x,w,A;const C=o-i,E=c-a;if(n.isHorizontal()){if(w=Sa(s,a,c),dn(t)){const T=Object.keys(t)[0],D=t[T];A=f[T].getPixelForValue(D)+C-e}else t==="center"?A=(h.bottom+h.top)/2+C-e:A=i_(n,t,e);x=c-a}else{if(dn(t)){const T=Object.keys(t)[0],D=t[T];w=f[T].getPixelForValue(D)-E+e}else t==="center"?w=(h.left+h.right)/2-E+e:w=i_(n,t,e);A=Sa(s,o,i),g=t==="left"?-Ii:Ii}return{titleX:w,titleY:A,maxWidth:x,rotation:g}}class Wm extends Sd{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:s,_suggestedMax:i}=this;return e=cc(e,Number.POSITIVE_INFINITY),t=cc(t,Number.NEGATIVE_INFINITY),s=cc(s,Number.POSITIVE_INFINITY),i=cc(i,Number.NEGATIVE_INFINITY),{min:cc(e,s),max:cc(t,i),minDefined:ka(e),maxDefined:ka(t)}}getMinMax(e){let{min:t,max:s,minDefined:i,maxDefined:a}=this.getUserBounds(),o;if(i&&a)return{min:t,max:s};const c=this.getMatchingVisibleMetas();for(let u=0,h=c.length;u<h;++u)o=c[u].controller.getMinMax(this,e),i||(t=Math.min(t,o.min)),a||(s=Math.max(s,o.max));return t=a&&t>s?s:t,s=i&&t>s?t:s,{min:cc(t,cc(s,t)),max:cc(s,cc(t,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ms(this.options.beforeUpdate,[this])}update(e,t,s){const{beginAtZero:i,grace:a,ticks:o}=this.options,c=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Z7(this,a,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=c<this.ticks.length;this._convertTicksToLabels(u?r_(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=vG(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,s;this.isHorizontal()?(t=this.left,s=this.right):(t=this.top,s=this.bottom,e=!e),this._startPixel=t,this._endPixel=s,this._reversePixels=e,this._length=s-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ms(this.options.afterUpdate,[this])}beforeSetDimensions(){ms(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ms(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ms(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ms(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let s,i,a;for(s=0,i=e.length;s<i;s++)a=e[s],a.label=ms(t.callback,[a.value,s,e],this)}afterTickToLabelConversion(){ms(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ms(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,s=a_(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,a=t.maxRotation;let o=i,c,u,h;if(!this._isVisible()||!t.display||i>=a||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const f=this._getLabelSizes(),g=f.widest.width,x=f.highest.height,w=Ta(this.chart.width-g,0,this.maxWidth);c=e.offset?this.maxWidth/s:w/(s-1),g+6>c&&(c=w/(s-(e.offset?.5:1)),u=this.maxHeight-cp(e.grid)-t.padding-o_(e.title,this.chart.options.font),h=Math.sqrt(g*g+x*x),o=y7(Math.min(Math.asin(Ta((f.highest.height+6)/c,-1,1)),Math.asin(Ta(u/h,-1,1))-Math.asin(Ta(x/h,-1,1)))),o=Math.max(i,Math.min(a,o))),this.labelRotation=o}afterCalculateLabelRotation(){ms(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ms(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:s,title:i,grid:a}}=this,o=this._isVisible(),c=this.isHorizontal();if(o){const u=o_(i,t.options.font);if(c?(e.width=this.maxWidth,e.height=cp(a)+u):(e.height=this.maxHeight,e.width=cp(a)+u),s.display&&this.ticks.length){const{first:h,last:f,widest:g,highest:x}=this._getLabelSizes(),w=s.padding*2,A=ud(this.labelRotation),C=Math.cos(A),E=Math.sin(A);if(c){const T=s.mirror?0:E*g.width+C*x.height;e.height=Math.min(this.maxHeight,e.height+T+w)}else{const T=s.mirror?0:C*g.width+E*x.height;e.width=Math.min(this.maxWidth,e.width+T+w)}this._calculatePadding(h,f,E,C)}}this._handleMargins(),c?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,s,i){const{ticks:{align:a,padding:o},position:c}=this.options,u=this.labelRotation!==0,h=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const f=this.getPixelForTick(0)-this.left,g=this.right-this.getPixelForTick(this.ticks.length-1);let x=0,w=0;u?h?(x=i*e.width,w=s*t.height):(x=s*e.height,w=i*t.width):a==="start"?w=t.width:a==="end"?x=e.width:a!=="inner"&&(x=e.width/2,w=t.width/2),this.paddingLeft=Math.max((x-f+o)*this.width/(this.width-f),0),this.paddingRight=Math.max((w-g+o)*this.width/(this.width-g),0)}else{let f=t.height/2,g=e.height/2;a==="start"?(f=0,g=e.height):a==="end"&&(f=t.height,g=0),this.paddingTop=f+o,this.paddingBottom=g+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ms(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,s;for(t=0,s=e.length;t<s;t++)os(e[t].label)&&(e.splice(t,1),s--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let s=this.ticks;t<s.length&&(s=r_(s,t)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,s){const{ctx:i,_longestTextCache:a}=this,o=[],c=[],u=Math.floor(t/a_(t,s));let h=0,f=0,g,x,w,A,C,E,T,D,M,L,I;for(g=0;g<t;g+=u){if(A=e[g].label,C=this._resolveTickFontOptions(g),i.font=E=C.string,T=a[E]=a[E]||{data:{},gc:[]},D=C.lineHeight,M=L=0,!os(A)&&!Fi(A))M=FT(i,T.data,T.gc,M,A),L=D;else if(Fi(A))for(x=0,w=A.length;x<w;++x)I=A[x],!os(I)&&!Fi(I)&&(M=FT(i,T.data,T.gc,M,I),L+=D);o.push(M),c.push(L),h=Math.max(M,h),f=Math.max(L,f)}_G(a,t);const W=o.indexOf(h),V=c.indexOf(f),Y=K=>({width:o[K]||0,height:c[K]||0});return{first:Y(0),last:Y(t-1),widest:Y(W),highest:Y(V),widths:o,heights:c}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return w7(this._alignToPixels?jh(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const s=t[e];return s.$context||(s.$context=kG(this.getContext(),e,s))}return this.$context||(this.$context=jG(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=ud(this.labelRotation),s=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),a=this._getLabelSizes(),o=e.autoSkipPadding||0,c=a?a.widest.width+o:0,u=a?a.highest.height+o:0;return this.isHorizontal()?u*s>c*i?c/s:u/i:u*i<c*s?u/s:c/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,s=this.chart,i=this.options,{grid:a,position:o,border:c}=i,u=a.offset,h=this.isHorizontal(),g=this.ticks.length+(u?1:0),x=cp(a),w=[],A=c.setContext(this.getContext()),C=A.display?A.width:0,E=C/2,T=function(U){return jh(s,U,C)};let D,M,L,I,W,V,Y,K,q,ne,le,_e;if(o==="top")D=T(this.bottom),V=this.bottom-x,K=D-E,ne=T(e.top)+E,_e=e.bottom;else if(o==="bottom")D=T(this.top),ne=e.top,_e=T(e.bottom)-E,V=D+E,K=this.top+x;else if(o==="left")D=T(this.right),W=this.right-x,Y=D-E,q=T(e.left)+E,le=e.right;else if(o==="right")D=T(this.left),q=e.left,le=T(e.right)-E,W=D+E,Y=this.left+x;else if(t==="x"){if(o==="center")D=T((e.top+e.bottom)/2+.5);else if(dn(o)){const U=Object.keys(o)[0],H=o[U];D=T(this.chart.scales[U].getPixelForValue(H))}ne=e.top,_e=e.bottom,V=D+E,K=V+x}else if(t==="y"){if(o==="center")D=T((e.left+e.right)/2);else if(dn(o)){const U=Object.keys(o)[0],H=o[U];D=T(this.chart.scales[U].getPixelForValue(H))}W=D-E,Y=W-x,q=e.left,le=e.right}const xe=sn(i.ticks.maxTicksLimit,g),je=Math.max(1,Math.ceil(g/xe));for(M=0;M<g;M+=je){const U=this.getContext(M),H=a.setContext(U),ee=c.setContext(U),he=H.lineWidth,ce=H.color,G=ee.dash||[],ue=ee.dashOffset,Se=H.tickWidth,fe=H.tickColor,Ae=H.tickBorderDash||[],Pe=H.tickBorderDashOffset;L=TG(this,M,u),L!==void 0&&(I=jh(s,L,he),h?W=Y=q=le=I:V=K=ne=_e=I,w.push({tx1:W,ty1:V,tx2:Y,ty2:K,x1:q,y1:ne,x2:le,y2:_e,width:he,color:ce,borderDash:G,borderDashOffset:ue,tickWidth:Se,tickColor:fe,tickBorderDash:Ae,tickBorderDashOffset:Pe}))}return this._ticksLength=g,this._borderValue=D,w}_computeLabelItems(e){const t=this.axis,s=this.options,{position:i,ticks:a}=s,o=this.isHorizontal(),c=this.ticks,{align:u,crossAlign:h,padding:f,mirror:g}=a,x=cp(s.grid),w=x+f,A=g?-f:w,C=-ud(this.labelRotation),E=[];let T,D,M,L,I,W,V,Y,K,q,ne,le,_e="middle";if(i==="top")W=this.bottom-A,V=this._getXAxisLabelAlignment();else if(i==="bottom")W=this.top+A,V=this._getXAxisLabelAlignment();else if(i==="left"){const je=this._getYAxisLabelAlignment(x);V=je.textAlign,I=je.x}else if(i==="right"){const je=this._getYAxisLabelAlignment(x);V=je.textAlign,I=je.x}else if(t==="x"){if(i==="center")W=(e.top+e.bottom)/2+w;else if(dn(i)){const je=Object.keys(i)[0],U=i[je];W=this.chart.scales[je].getPixelForValue(U)+w}V=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")I=(e.left+e.right)/2-w;else if(dn(i)){const je=Object.keys(i)[0],U=i[je];I=this.chart.scales[je].getPixelForValue(U)}V=this._getYAxisLabelAlignment(x).textAlign}t==="y"&&(u==="start"?_e="top":u==="end"&&(_e="bottom"));const xe=this._getLabelSizes();for(T=0,D=c.length;T<D;++T){M=c[T],L=M.label;const je=a.setContext(this.getContext(T));Y=this.getPixelForTick(T)+a.labelOffset,K=this._resolveTickFontOptions(T),q=K.lineHeight,ne=Fi(L)?L.length:1;const U=ne/2,H=je.color,ee=je.textStrokeColor,he=je.textStrokeWidth;let ce=V;o?(I=Y,V==="inner"&&(T===D-1?ce=this.options.reverse?"left":"right":T===0?ce=this.options.reverse?"right":"left":ce="center"),i==="top"?h==="near"||C!==0?le=-ne*q+q/2:h==="center"?le=-xe.highest.height/2-U*q+q:le=-xe.highest.height+q/2:h==="near"||C!==0?le=q/2:h==="center"?le=xe.highest.height/2-U*q:le=xe.highest.height-ne*q,g&&(le*=-1),C!==0&&!je.showLabelBackdrop&&(I+=q/2*Math.sin(C))):(W=Y,le=(1-ne)*q/2);let G;if(je.showLabelBackdrop){const ue=Ro(je.backdropPadding),Se=xe.heights[T],fe=xe.widths[T];let Ae=le-ue.top,Pe=0-ue.left;switch(_e){case"middle":Ae-=Se/2;break;case"bottom":Ae-=Se;break}switch(V){case"center":Pe-=fe/2;break;case"right":Pe-=fe;break;case"inner":T===D-1?Pe-=fe:T>0&&(Pe-=fe/2);break}G={left:Pe,top:Ae,width:fe+ue.width,height:Se+ue.height,color:je.backdropColor}}E.push({label:L,font:K,textOffset:le,options:{rotation:C,color:H,strokeColor:ee,strokeWidth:he,textAlign:ce,textBaseline:_e,translation:[I,W],backdrop:G}})}return E}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-ud(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:s,mirror:i,padding:a}}=this.options,o=this._getLabelSizes(),c=e+a,u=o.widest.width;let h,f;return t==="left"?i?(f=this.right+a,s==="near"?h="left":s==="center"?(h="center",f+=u/2):(h="right",f+=u)):(f=this.right-c,s==="near"?h="right":s==="center"?(h="center",f-=u/2):(h="left",f=this.left)):t==="right"?i?(f=this.left+a,s==="near"?h="right":s==="center"?(h="center",f-=u/2):(h="left",f-=u)):(f=this.left+c,s==="near"?h="left":s==="center"?(h="center",f+=u/2):(h="right",f=this.right)):h="right",{textAlign:h,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:s,top:i,width:a,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(s,i,a,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(a=>a.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,o;const c=(u,h,f)=>{!f.width||!f.color||(s.save(),s.lineWidth=f.width,s.strokeStyle=f.color,s.setLineDash(f.borderDash||[]),s.lineDashOffset=f.borderDashOffset,s.beginPath(),s.moveTo(u.x,u.y),s.lineTo(h.x,h.y),s.stroke(),s.restore())};if(t.display)for(a=0,o=i.length;a<o;++a){const u=i[a];t.drawOnChartArea&&c({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),t.drawTicks&&c({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:s,grid:i}}=this,a=s.setContext(this.getContext()),o=s.display?a.width:0;if(!o)return;const c=i.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let h,f,g,x;this.isHorizontal()?(h=jh(e,this.left,o)-o/2,f=jh(e,this.right,c)+c/2,g=x=u):(g=jh(e,this.top,o)-o/2,x=jh(e,this.bottom,c)+c/2,h=f=u),t.save(),t.lineWidth=a.width,t.strokeStyle=a.color,t.beginPath(),t.moveTo(h,g),t.lineTo(f,x),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&Vy(s,i);const a=this.getLabelItems(e);for(const o of a){const c=o.options,u=o.font,h=o.label,f=o.textOffset;a0(s,h,0,f,u,c)}i&&Wy(s)}drawTitle(){const{ctx:e,options:{position:t,title:s,reverse:i}}=this;if(!s.display)return;const a=_a(s.font),o=Ro(s.padding),c=s.align;let u=a.lineHeight/2;t==="bottom"||t==="center"||dn(t)?(u+=o.bottom,Fi(s.text)&&(u+=a.lineHeight*(s.text.length-1))):u+=o.top;const{titleX:h,titleY:f,maxWidth:g,rotation:x}=DG(this,u,t,c);a0(e,s.text,0,0,a,{color:s.color,maxWidth:g,rotation:x,textAlign:RG(c,t,i),textBaseline:"middle",translation:[h,f]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,s=sn(e.grid&&e.grid.z,-1),i=sn(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Wm.prototype.draw?[{z:t,draw:a=>{this.draw(a)}}]:[{z:s,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let a,o;for(a=0,o=t.length;a<o;++a){const c=t[a];c[s]===this.id&&(!e||c.type===e)&&i.push(c)}return i}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return _a(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class lb{constructor(e,t,s){this.type=e,this.scope=t,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let s;OG(t)&&(s=this.register(t));const i=this.items,a=e.id,o=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in i||(i[a]=e,MG(e,o,s),this.override&&si.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,s=e.id,i=this.scope;s in t&&delete t[s],i&&s in si[i]&&(delete si[i][s],this.override&&delete nf[s])}}function MG(n,e,t){const s=e0(Object.create(null),[t?si.get(t):{},si.get(e),n.defaults]);si.set(e,s),n.defaultRoutes&&PG(e,n.defaultRoutes),n.descriptors&&si.describe(e,n.descriptors)}function PG(n,e){Object.keys(e).forEach(t=>{const s=t.split("."),i=s.pop(),a=[n].concat(s).join("."),o=e[t].split("."),c=o.pop(),u=o.join(".");si.route(a,i,u,c)})}function OG(n){return"id"in n&&"defaults"in n}class LG{constructor(){this.controllers=new lb(KS,"datasets",!0),this.elements=new lb(Sd,"elements"),this.plugins=new lb(Object,"plugins"),this.scales=new lb(Wm,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,s){[...t].forEach(i=>{const a=s||this._getRegistryForType(i);s||a.isForType(i)||a===this.plugins&&i.id?this._exec(e,a,i):Un(i,o=>{const c=s||this._getRegistryForType(o);this._exec(e,c,o)})})}_exec(e,t,s){const i=FS(e);ms(s["before"+i],[],s),t[e](s),ms(s["after"+i],[],s)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const s=this._typedRegistries[t];if(s.isForType(e))return s}return this.plugins}_get(e,t,s){const i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return i}}var fc=new LG;class FG{constructor(){this._init=void 0}notify(e,t,s,i){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const a=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(a,e,t,s);return t==="afterDestroy"&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,t,s,i){i=i||{};for(const a of e){const o=a.plugin,c=o[s],u=[t,i,a.options];if(ms(c,u,o)===!1&&i.cancelable)return!1}return!0}invalidate(){os(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const s=e&&e.config,i=sn(s.options&&s.options.plugins,{}),a=zG(s);return i===!1&&!t?[]:BG(e,a,i,t)}_notifyStateChanges(e){const t=this._oldCache||[],s=this._cache,i=(a,o)=>a.filter(c=>!o.some(u=>c.plugin.id===u.plugin.id));this._notify(i(t,s),e,"stop"),this._notify(i(s,t),e,"start")}}function zG(n){const e={},t=[],s=Object.keys(fc.plugins.items);for(let a=0;a<s.length;a++)t.push(fc.getPlugin(s[a]));const i=n.plugins||[];for(let a=0;a<i.length;a++){const o=i[a];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function IG(n,e){return!e&&n===!1?null:n===!0?{}:n}function BG(n,{plugins:e,localIds:t},s,i){const a=[],o=n.getContext();for(const c of e){const u=c.id,h=IG(s[u],i);h!==null&&a.push({plugin:c,options:HG(n.config,{plugin:c,local:t[u]},h,o)})}return a}function HG(n,{plugin:e,local:t},s,i){const a=n.pluginScopeKeys(e),o=n.getOptionScopes(s,a);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function h2(n,e){const t=si.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function UG(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function VG(n,e){return n===e?"_index_":"_value_"}function l_(n){if(n==="x"||n==="y"||n==="r")return n}function WG(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function f2(n,...e){if(l_(n))return n;for(const t of e){const s=t.axis||WG(t.position)||n.length>1&&l_(n[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function c_(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function GG(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(s=>s.xAxisID===n||s.yAxisID===n);if(t.length)return c_(n,"x",t[0])||c_(n,"y",t[0])}return{}}function YG(n,e){const t=nf[n.type]||{scales:{}},s=e.scales||{},i=h2(n.type,e),a=Object.create(null);return Object.keys(s).forEach(o=>{const c=s[o];if(!dn(c))return console.error(`Invalid scale configuration for scale: ${o}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const u=f2(o,c,GG(o,n),si.scales[c.type]),h=VG(u,i),f=t.scales||{};a[o]=Lp(Object.create(null),[{axis:u},c,f[u],f[h]])}),n.data.datasets.forEach(o=>{const c=o.type||n.type,u=o.indexAxis||h2(c,e),f=(nf[c]||{}).scales||{};Object.keys(f).forEach(g=>{const x=UG(g,u),w=o[x+"AxisID"]||x;a[w]=a[w]||Object.create(null),Lp(a[w],[{axis:x},s[w],f[g]])})}),Object.keys(a).forEach(o=>{const c=a[o];Lp(c,[si.scales[c.type],si.scale])}),a}function HM(n){const e=n.options||(n.options={});e.plugins=sn(e.plugins,{}),e.scales=YG(n,e)}function UM(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function XG(n){return n=n||{},n.data=UM(n.data),HM(n),n}const d_=new Map,VM=new Set;function cb(n,e){let t=d_.get(n);return t||(t=e(),d_.set(n,t),VM.add(t)),t}const dp=(n,e,t)=>{const s=t0(e,t);s!==void 0&&n.add(s)};class KG{constructor(e){this._config=XG(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=UM(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),HM(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return cb(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return cb(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return cb(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,s=this.type;return cb(`${s}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const s=this._scopeCache;let i=s.get(e);return(!i||t)&&(i=new Map,s.set(e,i)),i}getOptionScopes(e,t,s){const{options:i,type:a}=this,o=this._cachedScopes(e,s),c=o.get(t);if(c)return c;const u=new Set;t.forEach(f=>{e&&(u.add(e),f.forEach(g=>dp(u,e,g))),f.forEach(g=>dp(u,i,g)),f.forEach(g=>dp(u,nf[a]||{},g)),f.forEach(g=>dp(u,si,g)),f.forEach(g=>dp(u,d2,g))});const h=Array.from(u);return h.length===0&&h.push(Object.create(null)),VM.has(t)&&o.set(t,h),h}chartOptionScopes(){const{options:e,type:t}=this;return[e,nf[t]||{},si.datasets[t]||{},{type:t},si,d2]}resolveNamedOptions(e,t,s,i=[""]){const a={$shared:!0},{resolver:o,subPrefixes:c}=u_(this._resolverCache,e,i);let u=o;if(JG(o,t)){a.$shared=!1,s=Bu(s)?s():s;const h=this.createResolver(e,s,c);u=Cm(o,s,h)}for(const h of t)a[h]=u[h];return a}createResolver(e,t,s=[""],i){const{resolver:a}=u_(this._resolverCache,e,s);return dn(t)?Cm(a,t,void 0,i):a}}function u_(n,e,t){let s=n.get(e);s||(s=new Map,n.set(e,s));const i=t.join();let a=s.get(i);return a||(a={resolver:VS(e,t),subPrefixes:t.filter(c=>!c.toLowerCase().includes("hover"))},s.set(i,a)),a}const ZG=n=>dn(n)&&Object.getOwnPropertyNames(n).some(e=>Bu(n[e]));function JG(n,e){const{isScriptable:t,isIndexable:s}=NM(n);for(const i of e){const a=t(i),o=s(i),c=(o||a)&&n[i];if(a&&(Bu(c)||ZG(c))||o&&Fi(c))return!0}return!1}var QG="4.5.1";const qG=["top","bottom","left","right","chartArea"];function h_(n,e){return n==="top"||n==="bottom"||qG.indexOf(n)===-1&&e==="x"}function f_(n,e){return function(t,s){return t[n]===s[n]?t[e]-s[e]:t[n]-s[n]}}function m_(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),ms(t&&t.onComplete,[n],e)}function $G(n){const e=n.chart,t=e.options.animation;ms(t&&t.onProgress,[n],e)}function WM(n){return YS()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Bb={},g_=n=>{const e=WM(n);return Object.values(Bb).filter(t=>t.canvas===e).pop()};function eY(n,e,t){const s=Object.keys(n);for(const i of s){const a=+i;if(a>=e){const o=n[i];delete n[i],(t>0||a>e)&&(n[a+t]=o)}}}function tY(n,e,t,s){return!t||n.type==="mouseout"?null:s?e:n}let Xy=class{static defaults=si;static instances=Bb;static overrides=nf;static registry=fc;static version=QG;static getChart=g_;static register(...e){fc.add(...e),p_()}static unregister(...e){fc.remove(...e),p_()}constructor(e,t){const s=this.config=new KG(t),i=WM(e),a=g_(i);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||yG(i)),this.platform.updateConfig(s);const c=this.platform.acquireContext(i,o.aspectRatio),u=c&&c.canvas,h=u&&u.height,f=u&&u.width;if(this.id=r7(),this.ctx=c,this.canvas=u,this.width=f,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new FG,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=E7(g=>this.update(g),o.resizeDelay||0),this._dataChanges=[],Bb[this.id]=this,!c||!u){console.error("Failed to create chart: can't acquire context from the given item");return}rd.listen(this,"complete",m_),rd.listen(this,"progress",$G),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:s,height:i,_aspectRatio:a}=this;return os(e)?t&&a?a:i?s/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return fc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():HT(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return zT(this.canvas,this.ctx),this}stop(){return rd.stop(this),this}resize(e,t){rd.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const s=this.options,i=this.canvas,a=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,t,a),c=s.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,HT(this,c,!0)&&(this.notifyPlugins("resize",{size:o}),ms(s.onResize,[this,o],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Un(t,(s,i)=>{s.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,s=this.scales,i=Object.keys(s).reduce((o,c)=>(o[c]=!1,o),{});let a=[];t&&(a=a.concat(Object.keys(t).map(o=>{const c=t[o],u=f2(o,c),h=u==="r",f=u==="x";return{options:c,dposition:h?"chartArea":f?"bottom":"left",dtype:h?"radialLinear":f?"category":"linear"}}))),Un(a,o=>{const c=o.options,u=c.id,h=f2(u,c),f=sn(c.type,o.dtype);(c.position===void 0||h_(c.position,h)!==h_(o.dposition))&&(c.position=o.dposition),i[u]=!0;let g=null;if(u in s&&s[u].type===f)g=s[u];else{const x=fc.getScale(f);g=new x({id:u,type:f,ctx:this.ctx,chart:this}),s[g.id]=g}g.init(c,e)}),Un(i,(o,c)=>{o||delete s[c]}),Un(s,o=>{_o.configure(this,o,o.options),_o.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,s=e.length;if(e.sort((i,a)=>i.index-a.index),s>t){for(let i=t;i<s;++i)this._destroyDatasetMeta(i);e.splice(t,s-t)}this._sortedMetasets=e.slice(0).sort(f_("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((s,i)=>{t.filter(a=>a===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=t.length;s<i;s++){const a=t[s];let o=this.getDatasetMeta(s);const c=a.type||this.config.type;if(o.type&&o.type!==c&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=c,o.indexAxis=a.indexAxis||h2(c,this.options),o.order=a.order||0,o.index=s,o.label=""+a.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const u=fc.getController(c),{datasetElementType:h,dataElementType:f}=si.datasets[c];Object.assign(u,{dataElementType:fc.getElement(f),datasetElementType:h&&fc.getElement(h)}),o.controller=new u(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Un(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const s=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let h=0,f=this.data.datasets.length;h<f;h++){const{controller:g}=this.getDatasetMeta(h),x=!i&&a.indexOf(g)===-1;g.buildOrUpdateElements(x),o=Math.max(+g.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),i||Un(a,h=>{h.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(f_("z","_idx"));const{_active:c,_lastEvent:u}=this;u?this._eventHandler(u,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){Un(this.scales,e=>{_o.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!_T(t,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:a}of t){const o=s==="_removeElements"?-a:a;eY(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,s=a=>new Set(e.filter(o=>o[0]===a).map((o,c)=>c+","+o.splice(1).join(","))),i=s(0);for(let a=1;a<t;a++)if(!_T(i,s(a)))return;return Array.from(i).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;_o.update(this,this.width,this.height,e);const t=this.chartArea,s=t.width<=0||t.height<=0;this._layers=[],Un(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,a)=>{i._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,s=this.data.datasets.length;t<s;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,s=this.data.datasets.length;t<s;++t)this._updateDataset(t,Bu(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const s=this.getDatasetMeta(e),i={meta:s,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(rd.has(this)?this.attached&&!rd.running(this)&&rd.start(this):(this.draw(),m_({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,s=[];let i,a;for(i=0,a=t.length;i<a;++i){const o=t[i];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,s={meta:e,index:e.index,cancelable:!0},i=MM(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&Vy(t,i),e.controller.draw(),i&&Wy(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return i0(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,s,i){const a=qW.modes[t];return typeof a=="function"?a(this,e,s,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],s=this._metasets;let i=s.filter(a=>a&&a._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=hf(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!t.hidden}setDatasetVisibility(e,t){const s=this.getDatasetMeta(e);s.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,s){const i=s?"show":"hide",a=this.getDatasetMeta(e),o=a.controller._resolveAnimations(void 0,i);ry(t)?(a.data[t].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(a,{visible:s}),this.update(c=>c.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),rd.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),zT(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Bb[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,s=(a,o)=>{t.addEventListener(this,a,o),e[a]=o},i=(a,o,c)=>{a.offsetX=o,a.offsetY=c,this._eventHandler(a)};Un(this.options.events,a=>s(a,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,s=(u,h)=>{t.addEventListener(this,u,h),e[u]=h},i=(u,h)=>{e[u]&&(t.removeEventListener(this,u,h),delete e[u])},a=(u,h)=>{this.canvas&&this.resize(u,h)};let o;const c=()=>{i("attach",c),this.attached=!0,this.resize(),s("resize",a),s("detach",o)};o=()=>{this.attached=!1,i("resize",a),this._stop(),this._resize(0,0),s("attach",c)},t.isAttached(this.canvas)?c():o()}unbindEvents(){Un(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Un(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,s){const i=s?"set":"remove";let a,o,c,u;for(t==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+i+"DatasetHoverStyle"]()),c=0,u=e.length;c<u;++c){o=e[c];const h=o&&this.getDatasetMeta(o.datasetIndex).controller;h&&h[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],s=e.map(({datasetIndex:a,index:o})=>{const c=this.getDatasetMeta(a);if(!c)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:c.data[o],index:o}});!iy(s,t)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,t))}notifyPlugins(e,t,s){return this._plugins.notify(this,e,t,s)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,s){const i=this.options.hover,a=(u,h)=>u.filter(f=>!h.some(g=>f.datasetIndex===g.datasetIndex&&f.index===g.index)),o=a(t,e),c=s?e:a(e,t);o.length&&this.updateHoverStyle(o,i.mode,!1),c.length&&i.mode&&this.updateHoverStyle(c,i.mode,!0)}_eventHandler(e,t){const s={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const a=this._handleEvent(e,t,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(a||s.changed)&&this.render(),this}_handleEvent(e,t,s){const{_active:i=[],options:a}=this,o=t,c=this._getActiveElements(e,i,s,o),u=h7(e),h=tY(e,this._lastEvent,s,u);s&&(this._lastEvent=null,ms(a.onHover,[e,c,this],this),u&&ms(a.onClick,[e,c,this],this));const f=!iy(c,i);return(f||t)&&(this._active=c,this._updateHoverStyles(c,i,t)),this._lastEvent=h,f}_getActiveElements(e,t,s,i){if(e.type==="mouseout")return[];if(!s)return t;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,i)}};function p_(){return Un(Xy.instances,n=>n._plugins.invalidate())}function nY(n,e,t){const{startAngle:s,x:i,y:a,outerRadius:o,innerRadius:c,options:u}=e,{borderWidth:h,borderJoinStyle:f}=u,g=Math.min(h/o,qr(s-t));if(n.beginPath(),n.arc(i,a,o-h/2,s+g/2,t-g/2),c>0){const x=Math.min(h/c,qr(s-t));n.arc(i,a,c+h/2,t-x/2,s+x/2,!0)}else{const x=Math.min(h/2,o*qr(s-t));if(f==="round")n.arc(i,a,x,t-Vn/2,s+Vn/2,!0);else if(f==="bevel"){const w=2*x*x,A=-w*Math.cos(t+Vn/2)+i,C=-w*Math.sin(t+Vn/2)+a,E=w*Math.cos(s+Vn/2)+i,T=w*Math.sin(s+Vn/2)+a;n.lineTo(A,C),n.lineTo(E,T)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function sY(n,e,t){const{startAngle:s,pixelMargin:i,x:a,y:o,outerRadius:c,innerRadius:u}=e;let h=i/c;n.beginPath(),n.arc(a,o,c,s-h,t+h),u>i?(h=i/u,n.arc(a,o,u,t+h,s-h,!0)):n.arc(a,o,i,t+Ii,s-Ii),n.closePath(),n.clip()}function iY(n){return US(n,["outerStart","outerEnd","innerStart","innerEnd"])}function aY(n,e,t,s){const i=iY(n.options.borderRadius),a=(t-e)/2,o=Math.min(a,s*e/2),c=u=>{const h=(t-Math.min(a,u))*s/2;return Ta(u,0,Math.min(a,h))};return{outerStart:c(i.outerStart),outerEnd:c(i.outerEnd),innerStart:Ta(i.innerStart,0,o),innerEnd:Ta(i.innerEnd,0,o)}}function Jf(n,e,t,s){return{x:t+n*Math.cos(e),y:s+n*Math.sin(e)}}function uy(n,e,t,s,i,a){const{x:o,y:c,startAngle:u,pixelMargin:h,innerRadius:f}=e,g=Math.max(e.outerRadius+s+t-h,0),x=f>0?f+s+t+h:0;let w=0;const A=i-u;if(s){const je=f>0?f-s:0,U=g>0?g-s:0,H=(je+U)/2,ee=H!==0?A*H/(H+s):A;w=(A-ee)/2}const C=Math.max(.001,A*g-t/Vn)/g,E=(A-C)/2,T=u+E+w,D=i-E-w,{outerStart:M,outerEnd:L,innerStart:I,innerEnd:W}=aY(e,x,g,D-T),V=g-M,Y=g-L,K=T+M/V,q=D-L/Y,ne=x+I,le=x+W,_e=T+I/ne,xe=D-W/le;if(n.beginPath(),a){const je=(K+q)/2;if(n.arc(o,c,g,K,je),n.arc(o,c,g,je,q),L>0){const he=Jf(Y,q,o,c);n.arc(he.x,he.y,L,q,D+Ii)}const U=Jf(le,D,o,c);if(n.lineTo(U.x,U.y),W>0){const he=Jf(le,xe,o,c);n.arc(he.x,he.y,W,D+Ii,xe+Math.PI)}const H=(D-W/x+(T+I/x))/2;if(n.arc(o,c,x,D-W/x,H,!0),n.arc(o,c,x,H,T+I/x,!0),I>0){const he=Jf(ne,_e,o,c);n.arc(he.x,he.y,I,_e+Math.PI,T-Ii)}const ee=Jf(V,T,o,c);if(n.lineTo(ee.x,ee.y),M>0){const he=Jf(V,K,o,c);n.arc(he.x,he.y,M,T-Ii,K)}}else{n.moveTo(o,c);const je=Math.cos(K)*g+o,U=Math.sin(K)*g+c;n.lineTo(je,U);const H=Math.cos(q)*g+o,ee=Math.sin(q)*g+c;n.lineTo(H,ee)}n.closePath()}function rY(n,e,t,s,i){const{fullCircles:a,startAngle:o,circumference:c}=e;let u=e.endAngle;if(a){uy(n,e,t,s,u,i);for(let h=0;h<a;++h)n.fill();isNaN(c)||(u=o+(c%Ds||Ds))}return uy(n,e,t,s,u,i),n.fill(),u}function oY(n,e,t,s,i){const{fullCircles:a,startAngle:o,circumference:c,options:u}=e,{borderWidth:h,borderJoinStyle:f,borderDash:g,borderDashOffset:x,borderRadius:w}=u,A=u.borderAlign==="inner";if(!h)return;n.setLineDash(g||[]),n.lineDashOffset=x,A?(n.lineWidth=h*2,n.lineJoin=f||"round"):(n.lineWidth=h,n.lineJoin=f||"bevel");let C=e.endAngle;if(a){uy(n,e,t,s,C,i);for(let E=0;E<a;++E)n.stroke();isNaN(c)||(C=o+(c%Ds||Ds))}A&&sY(n,e,C),u.selfJoin&&C-o>=Vn&&w===0&&f!=="miter"&&nY(n,e,C),a||(uy(n,e,t,s,C,i),n.stroke())}class lY extends Sd{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,s){const i=this.getProps(["x","y"],s),{angle:a,distance:o}=pM(i,{x:e,y:t}),{startAngle:c,endAngle:u,innerRadius:h,outerRadius:f,circumference:g}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),x=(this.options.spacing+this.options.borderWidth)/2,w=sn(g,u-c),A=s0(a,c,u)&&c!==u,C=w>=Ds||A,E=hd(o,h+x,f+x);return C&&E}getCenterPoint(e){const{x:t,y:s,startAngle:i,endAngle:a,innerRadius:o,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:u,spacing:h}=this.options,f=(i+a)/2,g=(o+c+h+u)/2;return{x:t+Math.cos(f)*g,y:s+Math.sin(f)*g}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:s}=this,i=(t.offset||0)/4,a=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=s>Ds?Math.floor(s/Ds):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const c=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(c)*i,Math.sin(c)*i);const u=1-Math.sin(Math.min(Vn,s||0)),h=i*u;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,rY(e,this,h,a,o),oY(e,this,h,a,o),e.restore()}}function GM(n,e,t=e){n.lineCap=sn(t.borderCapStyle,e.borderCapStyle),n.setLineDash(sn(t.borderDash,e.borderDash)),n.lineDashOffset=sn(t.borderDashOffset,e.borderDashOffset),n.lineJoin=sn(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=sn(t.borderWidth,e.borderWidth),n.strokeStyle=sn(t.borderColor,e.borderColor)}function cY(n,e,t){n.lineTo(t.x,t.y)}function dY(n){return n.stepped?B7:n.tension||n.cubicInterpolationMode==="monotone"?H7:cY}function YM(n,e,t={}){const s=n.length,{start:i=0,end:a=s-1}=t,{start:o,end:c}=e,u=Math.max(i,o),h=Math.min(a,c),f=i<o&&a<o||i>c&&a>c;return{count:s,start:u,loop:e.loop,ilen:h<u&&!f?s+h-u:h-u}}function uY(n,e,t,s){const{points:i,options:a}=e,{count:o,start:c,loop:u,ilen:h}=YM(i,t,s),f=dY(a);let{move:g=!0,reverse:x}=s||{},w,A,C;for(w=0;w<=h;++w)A=i[(c+(x?h-w:w))%o],!A.skip&&(g?(n.moveTo(A.x,A.y),g=!1):f(n,C,A,x,a.stepped),C=A);return u&&(A=i[(c+(x?h:0))%o],f(n,C,A,x,a.stepped)),!!u}function hY(n,e,t,s){const i=e.points,{count:a,start:o,ilen:c}=YM(i,t,s),{move:u=!0,reverse:h}=s||{};let f=0,g=0,x,w,A,C,E,T;const D=L=>(o+(h?c-L:L))%a,M=()=>{C!==E&&(n.lineTo(f,E),n.lineTo(f,C),n.lineTo(f,T))};for(u&&(w=i[D(0)],n.moveTo(w.x,w.y)),x=0;x<=c;++x){if(w=i[D(x)],w.skip)continue;const L=w.x,I=w.y,W=L|0;W===A?(I<C?C=I:I>E&&(E=I),f=(g*f+L)/++g):(M(),n.lineTo(L,I),A=W,g=0,C=E=I),T=I}M()}function m2(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?hY:uY}function fY(n){return n.stepped?yW:n.tension||n.cubicInterpolationMode==="monotone"?vW:Fh}function mY(n,e,t,s){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,s)&&i.closePath()),GM(n,e.options),n.stroke(i)}function gY(n,e,t,s){const{segments:i,options:a}=e,o=m2(e);for(const c of i)GM(n,a,c.style),n.beginPath(),o(n,e,c,{start:t,end:t+s-1})&&n.closePath(),n.stroke()}const pY=typeof Path2D=="function";function xY(n,e,t,s){pY&&!e.options.segment?mY(n,e,t,s):gY(n,e,t,s)}class Ky extends Sd{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const i=s.spanGaps?this._loop:this._fullLoop;uW(this._points,s,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=EW(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,s=e.length;return s&&t[e[s-1].end]}interpolate(e,t){const s=this.options,i=e[t],a=this.points,o=DM(this,{property:t,start:i,end:i});if(!o.length)return;const c=[],u=fY(s);let h,f;for(h=0,f=o.length;h<f;++h){const{start:g,end:x}=o[h],w=a[g],A=a[x];if(w===A){c.push(w);continue}const C=Math.abs((i-w[t])/(A[t]-w[t])),E=u(w,A,C,s.stepped);E[t]=e[t],c.push(E)}return c.length===1?c[0]:c}pathSegment(e,t,s){return m2(this)(e,this,t,s)}path(e,t,s){const i=this.segments,a=m2(this);let o=this._loop;t=t||0,s=s||this.points.length-t;for(const c of i)o&=a(e,this,c,{start:t,end:t+s-1});return!!o}draw(e,t,s,i){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),xY(e,this,s,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function x_(n,e,t,s){const i=n.options,{[t]:a}=n.getProps([t],s);return Math.abs(e-a)<i.radius+i.hitRadius}class bY extends Sd{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,s){const i=this.options,{x:a,y:o}=this.getProps(["x","y"],s);return Math.pow(e-a,2)+Math.pow(t-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return x_(this,e,"x",t)}inYRange(e,t){return x_(this,e,"y",t)}getCenterPoint(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const s=t&&e.borderWidth||0;return(t+s)*2}draw(e,t){const s=this.options;this.skip||s.radius<.1||!i0(this,t,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,u2(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function XM(n,e){const{x:t,y:s,base:i,width:a,height:o}=n.getProps(["x","y","base","width","height"],e);let c,u,h,f,g;return n.horizontal?(g=o/2,c=Math.min(t,i),u=Math.max(t,i),h=s-g,f=s+g):(g=a/2,c=t-g,u=t+g,h=Math.min(s,i),f=Math.max(s,i)),{left:c,top:h,right:u,bottom:f}}function Ou(n,e,t,s){return n?0:Ta(e,t,s)}function yY(n,e,t){const s=n.options.borderWidth,i=n.borderSkipped,a=SM(s);return{t:Ou(i.top,a.top,0,t),r:Ou(i.right,a.right,0,e),b:Ou(i.bottom,a.bottom,0,t),l:Ou(i.left,a.left,0,e)}}function vY(n,e,t){const{enableBorderRadius:s}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,a=um(i),o=Math.min(e,t),c=n.borderSkipped,u=s||dn(i);return{topLeft:Ou(!u||c.top||c.left,a.topLeft,0,o),topRight:Ou(!u||c.top||c.right,a.topRight,0,o),bottomLeft:Ou(!u||c.bottom||c.left,a.bottomLeft,0,o),bottomRight:Ou(!u||c.bottom||c.right,a.bottomRight,0,o)}}function wY(n){const e=XM(n),t=e.right-e.left,s=e.bottom-e.top,i=yY(n,t/2,s/2),a=vY(n,t/2,s/2);return{outer:{x:e.left,y:e.top,w:t,h:s,radius:a},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:s-i.t-i.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,a.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(i.b,i.r))}}}}function sw(n,e,t,s){const i=e===null,a=t===null,c=n&&!(i&&a)&&XM(n,s);return c&&(i||hd(e,c.left,c.right))&&(a||hd(t,c.top,c.bottom))}function SY(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function NY(n,e){n.rect(e.x,e.y,e.w,e.h)}function iw(n,e,t={}){const s=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0,a=(n.x+n.w!==t.x+t.w?e:0)-s,o=(n.y+n.h!==t.y+t.h?e:0)-i;return{x:n.x+s,y:n.y+i,w:n.w+a,h:n.h+o,radius:n.radius}}class AY extends Sd{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:s,backgroundColor:i}}=this,{inner:a,outer:o}=wY(this),c=SY(o.radius)?ly:NY;e.save(),(o.w!==a.w||o.h!==a.h)&&(e.beginPath(),c(e,iw(o,t,a)),e.clip(),c(e,iw(a,-t,o)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),c(e,iw(a,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,s){return sw(this,e,t,s)}inXRange(e,t){return sw(this,e,null,t)}inYRange(e,t){return sw(this,null,e,t)}getCenterPoint(e){const{x:t,y:s,base:i,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(t+i)/2:t,y:a?s:(s+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}function CY(n,e,t){const s=n.segments,i=n.points,a=e.points,o=[];for(const c of s){let{start:u,end:h}=c;h=Zy(u,h,i);const f=g2(t,i[u],i[h],c.loop);if(!e.segments){o.push({source:c,target:f,start:i[u],end:i[h]});continue}const g=DM(e,f);for(const x of g){const w=g2(t,a[x.start],a[x.end],x.loop),A=RM(c,i,w);for(const C of A)o.push({source:C,target:x,start:{[t]:b_(f,w,"start",Math.max)},end:{[t]:b_(f,w,"end",Math.min)}})}}return o}function g2(n,e,t,s){if(s)return;let i=e[n],a=t[n];return n==="angle"&&(i=qr(i),a=qr(a)),{property:n,start:i,end:a}}function EY(n,e){const{x:t=null,y:s=null}=n||{},i=e.points,a=[];return e.segments.forEach(({start:o,end:c})=>{c=Zy(o,c,i);const u=i[o],h=i[c];s!==null?(a.push({x:u.x,y:s}),a.push({x:h.x,y:s})):t!==null&&(a.push({x:t,y:u.y}),a.push({x:t,y:h.y}))}),a}function Zy(n,e,t){for(;e>n;e--){const s=t[e];if(!isNaN(s.x)&&!isNaN(s.y))break}return e}function b_(n,e,t,s){return n&&e?s(n[t],e[t]):n?n[t]:e?e[t]:0}function KM(n,e){let t=[],s=!1;return Fi(n)?(s=!0,t=n):t=EY(n,e),t.length?new Ky({points:t,options:{tension:0},_loop:s,_fullLoop:s}):null}function y_(n){return n&&n.fill!==!1}function TY(n,e,t){let i=n[e].fill;const a=[e];let o;if(!t)return i;for(;i!==!1&&a.indexOf(i)===-1;){if(!ka(i))return i;if(o=n[i],!o)return!1;if(o.visible)return i;a.push(i),i=o.fill}return!1}function _Y(n,e,t){const s=DY(n);if(dn(s))return isNaN(s.value)?!1:s;let i=parseFloat(s);return ka(i)&&Math.floor(i)===i?jY(s[0],e,i,t):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function jY(n,e,t,s){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=s?!1:t}function kY(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:dn(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function RY(n,e,t){let s;return n==="start"?s=t:n==="end"?s=e.options.reverse?e.min:e.max:dn(n)?s=n.value:s=e.getBaseValue(),s}function DY(n){const e=n.options,t=e.fill;let s=sn(t&&t.target,t);return s===void 0&&(s=!!e.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function MY(n){const{scale:e,index:t,line:s}=n,i=[],a=s.segments,o=s.points,c=PY(e,t);c.push(KM({x:null,y:e.bottom},s));for(let u=0;u<a.length;u++){const h=a[u];for(let f=h.start;f<=h.end;f++)OY(i,o[f],c)}return new Ky({points:i,options:{}})}function PY(n,e){const t=[],s=n.getMatchingVisibleMetas("line");for(let i=0;i<s.length;i++){const a=s[i];if(a.index===e)break;a.hidden||t.unshift(a.dataset)}return t}function OY(n,e,t){const s=[];for(let i=0;i<t.length;i++){const a=t[i],{first:o,last:c,point:u}=LY(a,e,"x");if(!(!u||o&&c)){if(o)s.unshift(u);else if(n.push(u),!c)break}}n.push(...s)}function LY(n,e,t){const s=n.interpolate(e,t);if(!s)return{};const i=s[t],a=n.segments,o=n.points;let c=!1,u=!1;for(let h=0;h<a.length;h++){const f=a[h],g=o[f.start][t],x=o[f.end][t];if(hd(i,g,x)){c=i===g,u=i===x;break}}return{first:c,last:u,point:s}}class ZM{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,s){const{x:i,y:a,radius:o}=this;return t=t||{start:0,end:Ds},e.arc(i,a,o,t.end,t.start,!0),!s.bounds}interpolate(e){const{x:t,y:s,radius:i}=this,a=e.angle;return{x:t+Math.cos(a)*i,y:s+Math.sin(a)*i,angle:a}}}function FY(n){const{chart:e,fill:t,line:s}=n;if(ka(t))return zY(e,t);if(t==="stack")return MY(n);if(t==="shape")return!0;const i=IY(n);return i instanceof ZM?i:KM(i,s)}function zY(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function IY(n){return(n.scale||{}).getPointPositionForValue?HY(n):BY(n)}function BY(n){const{scale:e={},fill:t}=n,s=kY(t,e);if(ka(s)){const i=e.isHorizontal();return{x:i?s:null,y:i?null:s}}return null}function HY(n){const{scale:e,fill:t}=n,s=e.options,i=e.getLabels().length,a=s.reverse?e.max:e.min,o=RY(t,e,a),c=[];if(s.grid.circular){const u=e.getPointPositionForValue(0,a);return new ZM({x:u.x,y:u.y,radius:e.getDistanceFromCenterForValue(o)})}for(let u=0;u<i;++u)c.push(e.getPointPositionForValue(u,o));return c}function aw(n,e,t){const s=FY(e),{chart:i,index:a,line:o,scale:c,axis:u}=e,h=o.options,f=h.fill,g=h.backgroundColor,{above:x=g,below:w=g}=f||{},A=i.getDatasetMeta(a),C=MM(i,A);s&&o.points.length&&(Vy(n,t),UY(n,{line:o,target:s,above:x,below:w,area:t,scale:c,axis:u,clip:C}),Wy(n))}function UY(n,e){const{line:t,target:s,above:i,below:a,area:o,scale:c,clip:u}=e,h=t._loop?"angle":e.axis;n.save();let f=a;a!==i&&(h==="x"?(v_(n,s,o.top),rw(n,{line:t,target:s,color:i,scale:c,property:h,clip:u}),n.restore(),n.save(),v_(n,s,o.bottom)):h==="y"&&(w_(n,s,o.left),rw(n,{line:t,target:s,color:a,scale:c,property:h,clip:u}),n.restore(),n.save(),w_(n,s,o.right),f=i)),rw(n,{line:t,target:s,color:f,scale:c,property:h,clip:u}),n.restore()}function v_(n,e,t){const{segments:s,points:i}=e;let a=!0,o=!1;n.beginPath();for(const c of s){const{start:u,end:h}=c,f=i[u],g=i[Zy(u,h,i)];a?(n.moveTo(f.x,f.y),a=!1):(n.lineTo(f.x,t),n.lineTo(f.x,f.y)),o=!!e.pathSegment(n,c,{move:o}),o?n.closePath():n.lineTo(g.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function w_(n,e,t){const{segments:s,points:i}=e;let a=!0,o=!1;n.beginPath();for(const c of s){const{start:u,end:h}=c,f=i[u],g=i[Zy(u,h,i)];a?(n.moveTo(f.x,f.y),a=!1):(n.lineTo(t,f.y),n.lineTo(f.x,f.y)),o=!!e.pathSegment(n,c,{move:o}),o?n.closePath():n.lineTo(t,g.y)}n.lineTo(t,e.first().y),n.closePath(),n.clip()}function rw(n,e){const{line:t,target:s,property:i,color:a,scale:o,clip:c}=e,u=CY(t,s,i);for(const{source:h,target:f,start:g,end:x}of u){const{style:{backgroundColor:w=a}={}}=h,A=s!==!0;n.save(),n.fillStyle=w,VY(n,o,c,A&&g2(i,g,x)),n.beginPath();const C=!!t.pathSegment(n,h);let E;if(A){C?n.closePath():S_(n,s,x,i);const T=!!s.pathSegment(n,f,{move:C,reverse:!0});E=C&&T,E||S_(n,s,g,i)}n.closePath(),n.fill(E?"evenodd":"nonzero"),n.restore()}}function VY(n,e,t,s){const i=e.chart.chartArea,{property:a,start:o,end:c}=s||{};if(a==="x"||a==="y"){let u,h,f,g;a==="x"?(u=o,h=i.top,f=c,g=i.bottom):(u=i.left,h=o,f=i.right,g=c),n.beginPath(),t&&(u=Math.max(u,t.left),f=Math.min(f,t.right),h=Math.max(h,t.top),g=Math.min(g,t.bottom)),n.rect(u,h,f-u,g-h),n.clip()}}function S_(n,e,t,s){const i=e.interpolate(t,s);i&&n.lineTo(i.x,i.y)}var WY={id:"filler",afterDatasetsUpdate(n,e,t){const s=(n.data.datasets||[]).length,i=[];let a,o,c,u;for(o=0;o<s;++o)a=n.getDatasetMeta(o),c=a.dataset,u=null,c&&c.options&&c instanceof Ky&&(u={visible:n.isDatasetVisible(o),index:o,fill:_Y(c,o,s),chart:n,axis:a.controller.options.indexAxis,scale:a.vScale,line:c}),a.$filler=u,i.push(u);for(o=0;o<s;++o)u=i[o],!(!u||u.fill===!1)&&(u.fill=TY(i,o,t.propagate))},beforeDraw(n,e,t){const s=t.drawTime==="beforeDraw",i=n.getSortedVisibleDatasetMetas(),a=n.chartArea;for(let o=i.length-1;o>=0;--o){const c=i[o].$filler;c&&(c.line.updateControlPoints(a,c.axis),s&&c.fill&&aw(n.ctx,c,a))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const s=n.getSortedVisibleDatasetMetas();for(let i=s.length-1;i>=0;--i){const a=s[i].$filler;y_(a)&&aw(n.ctx,a,n.chartArea)}},beforeDatasetDraw(n,e,t){const s=e.meta.$filler;!y_(s)||t.drawTime!=="beforeDatasetDraw"||aw(n.ctx,s,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const N_=(n,e)=>{let{boxHeight:t=e,boxWidth:s=e}=n;return n.usePointStyle&&(t=Math.min(t,e),s=n.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:t,itemHeight:Math.max(e,t)}},GY=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class A_ extends Sd{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,s){this.maxWidth=e,this.maxHeight=t,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=ms(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(s=>e.filter(s,this.chart.data))),e.sort&&(t=t.sort((s,i)=>e.sort(s,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,i=_a(s.font),a=i.size,o=this._computeTitleHeight(),{boxWidth:c,itemHeight:u}=N_(s,a);let h,f;t.font=i.string,this.isHorizontal()?(h=this.maxWidth,f=this._fitRows(o,a,c,u)+10):(f=this.maxHeight,h=this._fitCols(o,i,c,u)+10),this.width=Math.min(h,e.maxWidth||this.maxWidth),this.height=Math.min(f,e.maxHeight||this.maxHeight)}_fitRows(e,t,s,i){const{ctx:a,maxWidth:o,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],h=this.lineWidths=[0],f=i+c;let g=e;a.textAlign="left",a.textBaseline="middle";let x=-1,w=-f;return this.legendItems.forEach((A,C)=>{const E=s+t/2+a.measureText(A.text).width;(C===0||h[h.length-1]+E+2*c>o)&&(g+=f,h[h.length-(C>0?0:1)]=0,w+=f,x++),u[C]={left:0,top:w,row:x,width:E,height:i},h[h.length-1]+=E+c}),g}_fitCols(e,t,s,i){const{ctx:a,maxHeight:o,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],h=this.columnSizes=[],f=o-e;let g=c,x=0,w=0,A=0,C=0;return this.legendItems.forEach((E,T)=>{const{itemWidth:D,itemHeight:M}=YY(s,t,a,E,i);T>0&&w+M+2*c>f&&(g+=x+c,h.push({width:x,height:w}),A+=x+c,C++,x=w=0),u[T]={left:A,top:w,col:C,width:D,height:M},x=Math.max(x,D),w+=M+c}),g+=x,h.push({width:x,height:w}),g}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:s,labels:{padding:i},rtl:a}}=this,o=hm(a,this.left,this.width);if(this.isHorizontal()){let c=0,u=Sa(s,this.left+i,this.right-this.lineWidths[c]);for(const h of t)c!==h.row&&(c=h.row,u=Sa(s,this.left+i,this.right-this.lineWidths[c])),h.top+=this.top+e+i,h.left=o.leftForLtr(o.x(u),h.width),u+=h.width+i}else{let c=0,u=Sa(s,this.top+e+i,this.bottom-this.columnSizes[c].height);for(const h of t)h.col!==c&&(c=h.col,u=Sa(s,this.top+e+i,this.bottom-this.columnSizes[c].height)),h.top=u,h.left+=this.left+i,h.left=o.leftForLtr(o.x(h.left),h.width),u+=h.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Vy(e,this),this._draw(),Wy(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:s,ctx:i}=this,{align:a,labels:o}=e,c=si.color,u=hm(e.rtl,this.left,this.width),h=_a(o.font),{padding:f}=o,g=h.size,x=g/2;let w;this.drawTitle(),i.textAlign=u.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=h.string;const{boxWidth:A,boxHeight:C,itemHeight:E}=N_(o,g),T=function(W,V,Y){if(isNaN(A)||A<=0||isNaN(C)||C<0)return;i.save();const K=sn(Y.lineWidth,1);if(i.fillStyle=sn(Y.fillStyle,c),i.lineCap=sn(Y.lineCap,"butt"),i.lineDashOffset=sn(Y.lineDashOffset,0),i.lineJoin=sn(Y.lineJoin,"miter"),i.lineWidth=K,i.strokeStyle=sn(Y.strokeStyle,c),i.setLineDash(sn(Y.lineDash,[])),o.usePointStyle){const q={radius:C*Math.SQRT2/2,pointStyle:Y.pointStyle,rotation:Y.rotation,borderWidth:K},ne=u.xPlus(W,A/2),le=V+x;wM(i,q,ne,le,o.pointStyleWidth&&A)}else{const q=V+Math.max((g-C)/2,0),ne=u.leftForLtr(W,A),le=um(Y.borderRadius);i.beginPath(),Object.values(le).some(_e=>_e!==0)?ly(i,{x:ne,y:q,w:A,h:C,radius:le}):i.rect(ne,q,A,C),i.fill(),K!==0&&i.stroke()}i.restore()},D=function(W,V,Y){a0(i,Y.text,W,V+E/2,h,{strikethrough:Y.hidden,textAlign:u.textAlign(Y.textAlign)})},M=this.isHorizontal(),L=this._computeTitleHeight();M?w={x:Sa(a,this.left+f,this.right-s[0]),y:this.top+f+L,line:0}:w={x:this.left+f,y:Sa(a,this.top+L+f,this.bottom-t[0].height),line:0},_M(this.ctx,e.textDirection);const I=E+f;this.legendItems.forEach((W,V)=>{i.strokeStyle=W.fontColor,i.fillStyle=W.fontColor;const Y=i.measureText(W.text).width,K=u.textAlign(W.textAlign||(W.textAlign=o.textAlign)),q=A+x+Y;let ne=w.x,le=w.y;u.setWidth(this.width),M?V>0&&ne+q+f>this.right&&(le=w.y+=I,w.line++,ne=w.x=Sa(a,this.left+f,this.right-s[w.line])):V>0&&le+I>this.bottom&&(ne=w.x=ne+t[w.line].width+f,w.line++,le=w.y=Sa(a,this.top+L+f,this.bottom-t[w.line].height));const _e=u.x(ne);if(T(_e,le,W),ne=T7(K,ne+A+x,M?ne+q:this.right,e.rtl),D(u.x(ne),le,W),M)w.x+=q+f;else if(typeof W.text!="string"){const xe=h.lineHeight;w.y+=JM(W,xe)+f}else w.y+=I}),jM(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,s=_a(t.font),i=Ro(t.padding);if(!t.display)return;const a=hm(e.rtl,this.left,this.width),o=this.ctx,c=t.position,u=s.size/2,h=i.top+u;let f,g=this.left,x=this.width;if(this.isHorizontal())x=Math.max(...this.lineWidths),f=this.top+h,g=Sa(e.align,g,this.right-x);else{const A=this.columnSizes.reduce((C,E)=>Math.max(C,E.height),0);f=h+Sa(e.align,this.top,this.bottom-A-e.labels.padding-this._computeTitleHeight())}const w=Sa(c,g,g+x);o.textAlign=a.textAlign(IS(c)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=s.string,a0(o,t.text,w,f,s)}_computeTitleHeight(){const e=this.options.title,t=_a(e.font),s=Ro(e.padding);return e.display?t.lineHeight+s.height:0}_getLegendItemAt(e,t){let s,i,a;if(hd(e,this.left,this.right)&&hd(t,this.top,this.bottom)){for(a=this.legendHitBoxes,s=0;s<a.length;++s)if(i=a[s],hd(e,i.left,i.left+i.width)&&hd(t,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(e){const t=this.options;if(!ZY(e.type,t))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,a=GY(i,s);i&&!a&&ms(t.onLeave,[e,i,this],this),this._hoveredItem=s,s&&!a&&ms(t.onHover,[e,s,this],this)}else s&&ms(t.onClick,[e,s,this],this)}}function YY(n,e,t,s,i){const a=XY(s,n,e,t),o=KY(i,s,e.lineHeight);return{itemWidth:a,itemHeight:o}}function XY(n,e,t,s){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((a,o)=>a.length>o.length?a:o)),e+t.size/2+s.measureText(i).width}function KY(n,e,t){let s=n;return typeof e.text!="string"&&(s=JM(e,t)),s}function JM(n,e){const t=n.text?n.text.length:0;return e*t}function ZY(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var JY={id:"legend",_element:A_,start(n,e,t){const s=n.legend=new A_({ctx:n.ctx,options:t,chart:n});_o.configure(n,s,t),_o.addBox(n,s)},stop(n){_o.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const s=n.legend;_o.configure(n,s,t),s.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const s=e.datasetIndex,i=t.chart;i.isDatasetVisible(s)?(i.hide(s),e.hidden=!0):(i.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:s,textAlign:i,color:a,useBorderRadius:o,borderRadius:c}}=n.legend.options;return n._getSortedDatasetMetas().map(u=>{const h=u.controller.getStyle(t?0:void 0),f=Ro(h.borderWidth);return{text:e[u.index].label,fillStyle:h.backgroundColor,fontColor:a,hidden:!u.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(f.width+f.height)/4,strokeStyle:h.borderColor,pointStyle:s||h.pointStyle,rotation:h.rotation,textAlign:i||h.textAlign,borderRadius:o&&(c||h.borderRadius),datasetIndex:u.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class QM extends Sd{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const i=Fi(s.text)?s.text.length:1;this._padding=Ro(s.padding);const a=i*_a(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:s,bottom:i,right:a,options:o}=this,c=o.align;let u=0,h,f,g;return this.isHorizontal()?(f=Sa(c,s,a),g=t+e,h=a-s):(o.position==="left"?(f=s+e,g=Sa(c,i,t),u=Vn*-.5):(f=a-e,g=Sa(c,t,i),u=Vn*.5),h=i-t),{titleX:f,titleY:g,maxWidth:h,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const s=_a(t.font),a=s.lineHeight/2+this._padding.top,{titleX:o,titleY:c,maxWidth:u,rotation:h}=this._drawArgs(a);a0(e,t.text,0,0,s,{color:t.color,maxWidth:u,rotation:h,textAlign:IS(t.align),textBaseline:"middle",translation:[o,c]})}}function QY(n,e){const t=new QM({ctx:n.ctx,options:e,chart:n});_o.configure(n,t,e),_o.addBox(n,t),n.titleBlock=t}var qY={id:"title",_element:QM,start(n,e,t){QY(n,t)},stop(n){const e=n.titleBlock;_o.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const s=n.titleBlock;_o.configure(n,s,t),s.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Cp={average(n){if(!n.length)return!1;let e,t,s=new Set,i=0,a=0;for(e=0,t=n.length;e<t;++e){const c=n[e].element;if(c&&c.hasValue()){const u=c.tooltipPosition();s.add(u.x),i+=u.y,++a}}return a===0||s.size===0?!1:{x:[...s].reduce((c,u)=>c+u)/s.size,y:i/a}},nearest(n,e){if(!n.length)return!1;let t=e.x,s=e.y,i=Number.POSITIVE_INFINITY,a,o,c;for(a=0,o=n.length;a<o;++a){const u=n[a].element;if(u&&u.hasValue()){const h=u.getCenterPoint(),f=c2(e,h);f<i&&(i=f,c=u)}}if(c){const u=c.tooltipPosition();t=u.x,s=u.y}return{x:t,y:s}}};function hc(n,e){return e&&(Fi(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function od(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function $Y(n,e){const{element:t,datasetIndex:s,index:i}=e,a=n.getDatasetMeta(s).controller,{label:o,value:c}=a.getLabelAndValue(i);return{chart:n,label:o,parsed:a.getParsed(i),raw:n.data.datasets[s].data[i],formattedValue:c,dataset:a.getDataset(),dataIndex:i,datasetIndex:s,element:t}}function C_(n,e){const t=n.chart.ctx,{body:s,footer:i,title:a}=n,{boxWidth:o,boxHeight:c}=e,u=_a(e.bodyFont),h=_a(e.titleFont),f=_a(e.footerFont),g=a.length,x=i.length,w=s.length,A=Ro(e.padding);let C=A.height,E=0,T=s.reduce((L,I)=>L+I.before.length+I.lines.length+I.after.length,0);if(T+=n.beforeBody.length+n.afterBody.length,g&&(C+=g*h.lineHeight+(g-1)*e.titleSpacing+e.titleMarginBottom),T){const L=e.displayColors?Math.max(c,u.lineHeight):u.lineHeight;C+=w*L+(T-w)*u.lineHeight+(T-1)*e.bodySpacing}x&&(C+=e.footerMarginTop+x*f.lineHeight+(x-1)*e.footerSpacing);let D=0;const M=function(L){E=Math.max(E,t.measureText(L).width+D)};return t.save(),t.font=h.string,Un(n.title,M),t.font=u.string,Un(n.beforeBody.concat(n.afterBody),M),D=e.displayColors?o+2+e.boxPadding:0,Un(s,L=>{Un(L.before,M),Un(L.lines,M),Un(L.after,M)}),D=0,t.font=f.string,Un(n.footer,M),t.restore(),E+=A.width,{width:E,height:C}}function eX(n,e){const{y:t,height:s}=e;return t<s/2?"top":t>n.height-s/2?"bottom":"center"}function tX(n,e,t,s){const{x:i,width:a}=s,o=t.caretSize+t.caretPadding;if(n==="left"&&i+a+o>e.width||n==="right"&&i-a-o<0)return!0}function nX(n,e,t,s){const{x:i,width:a}=t,{width:o,chartArea:{left:c,right:u}}=n;let h="center";return s==="center"?h=i<=(c+u)/2?"left":"right":i<=a/2?h="left":i>=o-a/2&&(h="right"),tX(h,n,e,t)&&(h="center"),h}function E_(n,e,t){const s=t.yAlign||e.yAlign||eX(n,t);return{xAlign:t.xAlign||e.xAlign||nX(n,e,t,s),yAlign:s}}function sX(n,e){let{x:t,width:s}=n;return e==="right"?t-=s:e==="center"&&(t-=s/2),t}function iX(n,e,t){let{y:s,height:i}=n;return e==="top"?s+=t:e==="bottom"?s-=i+t:s-=i/2,s}function T_(n,e,t,s){const{caretSize:i,caretPadding:a,cornerRadius:o}=n,{xAlign:c,yAlign:u}=t,h=i+a,{topLeft:f,topRight:g,bottomLeft:x,bottomRight:w}=um(o);let A=sX(e,c);const C=iX(e,u,h);return u==="center"?c==="left"?A+=h:c==="right"&&(A-=h):c==="left"?A-=Math.max(f,x)+i:c==="right"&&(A+=Math.max(g,w)+i),{x:Ta(A,0,s.width-e.width),y:Ta(C,0,s.height-e.height)}}function db(n,e,t){const s=Ro(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-s.right:n.x+s.left}function __(n){return hc([],od(n))}function aX(n,e,t){return hf(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function j_(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const qM={beforeTitle:ad,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,s=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return t[e.dataIndex]}return""},afterTitle:ad,beforeBody:ad,beforeLabel:ad,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return os(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:ad,afterBody:ad,beforeFooter:ad,footer:ad,afterFooter:ad};function cr(n,e,t,s){const i=n[e].call(t,s);return typeof i>"u"?qM[e].call(t,s):i}class k_ extends Sd{static positioners=Cp;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&t.options.animation&&s.animations,a=new PM(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=aX(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:s}=t,i=cr(s,"beforeTitle",this,e),a=cr(s,"title",this,e),o=cr(s,"afterTitle",this,e);let c=[];return c=hc(c,od(i)),c=hc(c,od(a)),c=hc(c,od(o)),c}getBeforeBody(e,t){return __(cr(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:s}=t,i=[];return Un(e,a=>{const o={before:[],lines:[],after:[]},c=j_(s,a);hc(o.before,od(cr(c,"beforeLabel",this,a))),hc(o.lines,cr(c,"label",this,a)),hc(o.after,od(cr(c,"afterLabel",this,a))),i.push(o)}),i}getAfterBody(e,t){return __(cr(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:s}=t,i=cr(s,"beforeFooter",this,e),a=cr(s,"footer",this,e),o=cr(s,"afterFooter",this,e);let c=[];return c=hc(c,od(i)),c=hc(c,od(a)),c=hc(c,od(o)),c}_createItems(e){const t=this._active,s=this.chart.data,i=[],a=[],o=[];let c=[],u,h;for(u=0,h=t.length;u<h;++u)c.push($Y(this.chart,t[u]));return e.filter&&(c=c.filter((f,g,x)=>e.filter(f,g,x,s))),e.itemSort&&(c=c.sort((f,g)=>e.itemSort(f,g,s))),Un(c,f=>{const g=j_(e.callbacks,f);i.push(cr(g,"labelColor",this,f)),a.push(cr(g,"labelPointStyle",this,f)),o.push(cr(g,"labelTextColor",this,f))}),this.labelColors=i,this.labelPointStyles=a,this.labelTextColors=o,this.dataPoints=c,c}update(e,t){const s=this.options.setContext(this.getContext()),i=this._active;let a,o=[];if(!i.length)this.opacity!==0&&(a={opacity:0});else{const c=Cp[s.position].call(this,i,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const u=this._size=C_(this,s),h=Object.assign({},c,u),f=E_(this.chart,s,h),g=T_(s,h,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,a={opacity:1,x:g.x,y:g.y,width:u.width,height:u.height,caretX:c.x,caretY:c.y}}this._tooltipItems=o,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,s,i){const a=this.getCaretPosition(e,s,i);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}getCaretPosition(e,t,s){const{xAlign:i,yAlign:a}=this,{caretSize:o,cornerRadius:c}=s,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:g}=um(c),{x,y:w}=e,{width:A,height:C}=t;let E,T,D,M,L,I;return a==="center"?(L=w+C/2,i==="left"?(E=x,T=E-o,M=L+o,I=L-o):(E=x+A,T=E+o,M=L-o,I=L+o),D=E):(i==="left"?T=x+Math.max(u,f)+o:i==="right"?T=x+A-Math.max(h,g)-o:T=this.caretX,a==="top"?(M=w,L=M-o,E=T-o,D=T+o):(M=w+C,L=M+o,E=T+o,D=T-o),I=M),{x1:E,x2:T,x3:D,y1:M,y2:L,y3:I}}drawTitle(e,t,s){const i=this.title,a=i.length;let o,c,u;if(a){const h=hm(s.rtl,this.x,this.width);for(e.x=db(this,s.titleAlign,s),t.textAlign=h.textAlign(s.titleAlign),t.textBaseline="middle",o=_a(s.titleFont),c=s.titleSpacing,t.fillStyle=s.titleColor,t.font=o.string,u=0;u<a;++u)t.fillText(i[u],h.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+c,u+1===a&&(e.y+=s.titleMarginBottom-c)}}_drawColorBox(e,t,s,i,a){const o=this.labelColors[s],c=this.labelPointStyles[s],{boxHeight:u,boxWidth:h}=a,f=_a(a.bodyFont),g=db(this,"left",a),x=i.x(g),w=u<f.lineHeight?(f.lineHeight-u)/2:0,A=t.y+w;if(a.usePointStyle){const C={radius:Math.min(h,u)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},E=i.leftForLtr(x,h)+h/2,T=A+u/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,u2(e,C,E,T),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,u2(e,C,E,T)}else{e.lineWidth=dn(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const C=i.leftForLtr(x,h),E=i.leftForLtr(i.xPlus(x,1),h-2),T=um(o.borderRadius);Object.values(T).some(D=>D!==0)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,ly(e,{x:C,y:A,w:h,h:u,radius:T}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),ly(e,{x:E,y:A+1,w:h-2,h:u-2,radius:T}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(C,A,h,u),e.strokeRect(C,A,h,u),e.fillStyle=o.backgroundColor,e.fillRect(E,A+1,h-2,u-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,t,s){const{body:i}=this,{bodySpacing:a,bodyAlign:o,displayColors:c,boxHeight:u,boxWidth:h,boxPadding:f}=s,g=_a(s.bodyFont);let x=g.lineHeight,w=0;const A=hm(s.rtl,this.x,this.width),C=function(Y){t.fillText(Y,A.x(e.x+w),e.y+x/2),e.y+=x+a},E=A.textAlign(o);let T,D,M,L,I,W,V;for(t.textAlign=o,t.textBaseline="middle",t.font=g.string,e.x=db(this,E,s),t.fillStyle=s.bodyColor,Un(this.beforeBody,C),w=c&&E!=="right"?o==="center"?h/2+f:h+2+f:0,L=0,W=i.length;L<W;++L){for(T=i[L],D=this.labelTextColors[L],t.fillStyle=D,Un(T.before,C),M=T.lines,c&&M.length&&(this._drawColorBox(t,e,L,A,s),x=Math.max(g.lineHeight,u)),I=0,V=M.length;I<V;++I)C(M[I]),x=g.lineHeight;Un(T.after,C)}w=0,x=g.lineHeight,Un(this.afterBody,C),e.y-=a}drawFooter(e,t,s){const i=this.footer,a=i.length;let o,c;if(a){const u=hm(s.rtl,this.x,this.width);for(e.x=db(this,s.footerAlign,s),e.y+=s.footerMarginTop,t.textAlign=u.textAlign(s.footerAlign),t.textBaseline="middle",o=_a(s.footerFont),t.fillStyle=s.footerColor,t.font=o.string,c=0;c<a;++c)t.fillText(i[c],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,t,s,i){const{xAlign:a,yAlign:o}=this,{x:c,y:u}=e,{width:h,height:f}=s,{topLeft:g,topRight:x,bottomLeft:w,bottomRight:A}=um(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(c+g,u),o==="top"&&this.drawCaret(e,t,s,i),t.lineTo(c+h-x,u),t.quadraticCurveTo(c+h,u,c+h,u+x),o==="center"&&a==="right"&&this.drawCaret(e,t,s,i),t.lineTo(c+h,u+f-A),t.quadraticCurveTo(c+h,u+f,c+h-A,u+f),o==="bottom"&&this.drawCaret(e,t,s,i),t.lineTo(c+w,u+f),t.quadraticCurveTo(c,u+f,c,u+f-w),o==="center"&&a==="left"&&this.drawCaret(e,t,s,i),t.lineTo(c,u+g),t.quadraticCurveTo(c,u,c+g,u),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,s=this.$animations,i=s&&s.x,a=s&&s.y;if(i||a){const o=Cp[e.position].call(this,this._active,this._eventPosition);if(!o)return;const c=this._size=C_(this,e),u=Object.assign({},o,this._size),h=E_(t,e,u),f=T_(e,u,h,t);(i._to!==f.x||a._to!==f.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=c.width,this.height=c.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},a={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Ro(t.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&c&&(e.save(),e.globalAlpha=s,this.drawBackground(a,e,i,t),_M(e,t.textDirection),a.y+=o.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),jM(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const s=this._active,i=e.map(({datasetIndex:c,index:u})=>{const h=this.chart.getDatasetMeta(c);if(!h)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:h.data[u],index:u}}),a=!iy(s,i),o=this._positionChanged(i,t);(a||o)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,s=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,a=this._active||[],o=this._getActiveElements(e,a,t,s),c=this._positionChanged(o,e),u=t||!iy(o,a)||c;return u&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),u}_getActiveElements(e,t,s,i){const a=this.options;if(e.type==="mouseout")return[];if(!i)return t.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,a.mode,a,s);return a.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:s,caretY:i,options:a}=this,o=Cp[a.position].call(this,e,t);return o!==!1&&(s!==o.x||i!==o.y)}}var rX={id:"tooltip",_element:k_,positioners:Cp,afterInit(n,e,t){t&&(n.tooltip=new k_({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:qM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const oX=(n,e,t,s)=>(typeof e=="string"?(t=n.push(e)-1,s.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function lX(n,e,t,s){const i=n.indexOf(e);if(i===-1)return oX(n,e,t,s);const a=n.lastIndexOf(e);return i!==a?t:i}const cX=(n,e)=>n===null?null:Ta(Math.round(n),0,e);function R_(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class dX extends Wm{static id="category";static defaults={ticks:{callback:R_}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const s=this.getLabels();for(const{index:i,label:a}of t)s[i]===a&&s.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(os(e))return null;const s=this.getLabels();return t=isFinite(t)&&s[t]===e?t:lX(s,e,sn(t,e),this._addedLabels),cX(t,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),t||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const e=this.min,t=this.max,s=this.options.offset,i=[];let a=this.getLabels();a=e===0&&t===a.length-1?a:a.slice(e,t+1),this._valueRange=Math.max(a.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=t;o++)i.push({value:o});return i}getLabelForValue(e){return R_.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function uX(n,e){const t=[],{bounds:i,step:a,min:o,max:c,precision:u,count:h,maxTicks:f,maxDigits:g,includeBounds:x}=n,w=a||1,A=f-1,{min:C,max:E}=e,T=!os(o),D=!os(c),M=!os(h),L=(E-C)/(g+1);let I=kT((E-C)/A/w)*w,W,V,Y,K;if(I<1e-14&&!T&&!D)return[{value:C},{value:E}];K=Math.ceil(E/I)-Math.floor(C/I),K>A&&(I=kT(K*I/A/w)*w),os(u)||(W=Math.pow(10,u),I=Math.ceil(I*W)/W),i==="ticks"?(V=Math.floor(C/I)*I,Y=Math.ceil(E/I)*I):(V=C,Y=E),T&&D&&a&&x7((c-o)/a,I/1e3)?(K=Math.round(Math.min((c-o)/I,f)),I=(c-o)/K,V=o,Y=c):M?(V=T?o:V,Y=D?c:Y,K=h-1,I=(Y-V)/K):(K=(Y-V)/I,Fp(K,Math.round(K),I/1e3)?K=Math.round(K):K=Math.ceil(K));const q=Math.max(RT(I),RT(V));W=Math.pow(10,os(u)?q:u),V=Math.round(V*W)/W,Y=Math.round(Y*W)/W;let ne=0;for(T&&(x&&V!==o?(t.push({value:o}),V<o&&ne++,Fp(Math.round((V+ne*I)*W)/W,o,D_(o,L,n))&&ne++):V<o&&ne++);ne<K;++ne){const le=Math.round((V+ne*I)*W)/W;if(D&&le>c)break;t.push({value:le})}return D&&x&&Y!==c?t.length&&Fp(t[t.length-1].value,c,D_(c,L,n))?t[t.length-1].value=c:t.push({value:c}):(!D||Y===c)&&t.push({value:Y}),t}function D_(n,e,{horizontal:t,minRotation:s}){const i=ud(s),a=(t?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+n).length;return Math.min(e/a,o)}class hX extends Wm{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return os(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:s}=this.getUserBounds();let{min:i,max:a}=this;const o=u=>i=t?i:u,c=u=>a=s?a:u;if(e){const u=Am(i),h=Am(a);u<0&&h<0?c(0):u>0&&h>0&&o(0)}if(i===a){let u=a===0?1:Math.abs(a*.05);c(a+u),e||o(i-u)}this.min=i,this.max=a}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:s}=e,i;return s?(i=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const i={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},a=this._range||this,o=uX(i,a);return e.bounds==="ticks"&&b7(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const i=(s-t)/Math.max(e.length-1,1)/2;t-=i,s+=i}this._startValue=t,this._endValue=s,this._valueRange=s-t}getLabelForValue(e){return HS(e,this.chart.options.locale,this.options.ticks.format)}}class fX extends hX{static id="linear";static defaults={ticks:{callback:vM.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ka(e)?e:0,this.max=ka(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,s=ud(this.options.ticks.minRotation),i=(e?Math.sin(s):Math.cos(s))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Jy={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},fr=Object.keys(Jy);function M_(n,e){return n-e}function P_(n,e){if(os(e))return null;const t=n._adapter,{parser:s,round:i,isoWeekday:a}=n._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),ka(o)||(o=typeof s=="string"?t.parse(o,s):t.parse(o)),o===null?null:(i&&(o=i==="week"&&(n0(a)||a===!0)?t.startOf(o,"isoWeek",a):t.startOf(o,i)),+o)}function O_(n,e,t,s){const i=fr.length;for(let a=fr.indexOf(n);a<i-1;++a){const o=Jy[fr[a]],c=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(c*o.size))<=s)return fr[a]}return fr[i-1]}function mX(n,e,t,s,i){for(let a=fr.length-1;a>=fr.indexOf(t);a--){const o=fr[a];if(Jy[o].common&&n._adapter.diff(i,s,o)>=e-1)return o}return fr[t?fr.indexOf(t):0]}function gX(n){for(let e=fr.indexOf(n)+1,t=fr.length;e<t;++e)if(Jy[fr[e]].common)return fr[e]}function L_(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:s,hi:i}=zS(t,e),a=t[s]>=e?t[s]:t[i];n[a]=!0}}function pX(n,e,t,s){const i=n._adapter,a=+i.startOf(e[0].value,s),o=e[e.length-1].value;let c,u;for(c=a;c<=o;c=+i.add(c,1,s))u=t[c],u>=0&&(e[u].major=!0);return e}function F_(n,e,t){const s=[],i={},a=e.length;let o,c;for(o=0;o<a;++o)c=e[o],i[c]=o,s.push({value:c,major:!1});return a===0||!t?s:pX(n,s,i,t)}class z_ extends Wm{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const s=e.time||(e.time={}),i=this._adapter=new XW._date(e.adapters.date);i.init(t),Lp(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:P_(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,s=e.time.unit||"day";let{min:i,max:a,minDefined:o,maxDefined:c}=this.getUserBounds();function u(h){!o&&!isNaN(h.min)&&(i=Math.min(i,h.min)),!c&&!isNaN(h.max)&&(a=Math.max(a,h.max))}(!o||!c)&&(u(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&u(this.getMinMax(!1))),i=ka(i)&&!isNaN(i)?i:+t.startOf(Date.now(),s),a=ka(a)&&!isNaN(a)?a:+t.endOf(Date.now(),s)+1,this.min=Math.min(i,a-1),this.max=Math.max(i+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],s=e[e.length-1]),{min:t,max:s}}buildTicks(){const e=this.options,t=e.time,s=e.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const a=this.min,o=this.max,c=N7(i,a,o);return this._unit=t.unit||(s.autoSkip?O_(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):mX(this,c.length,t.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:gX(this._unit),this.initOffsets(i),e.reverse&&c.reverse(),F_(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,s=0,i,a;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?t=1-i:t=(this.getDecimalForValue(e[1])-i)/2,a=this.getDecimalForValue(e[e.length-1]),e.length===1?s=a:s=(a-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=Ta(t,0,o),s=Ta(s,0,o),this._offsets={start:t,end:s,factor:1/(t+1+s)}}_generate(){const e=this._adapter,t=this.min,s=this.max,i=this.options,a=i.time,o=a.unit||O_(a.minUnit,t,s,this._getLabelCapacity(t)),c=sn(i.ticks.stepSize,1),u=o==="week"?a.isoWeekday:!1,h=n0(u)||u===!0,f={};let g=t,x,w;if(h&&(g=+e.startOf(g,"isoWeek",u)),g=+e.startOf(g,h?"day":o),e.diff(s,t,o)>1e5*c)throw new Error(t+" and "+s+" are too far apart with stepSize of "+c+" "+o);const A=i.ticks.source==="data"&&this.getDataTimestamps();for(x=g,w=0;x<s;x=+e.add(x,c,o),w++)L_(f,x,A);return(x===s||i.bounds==="ticks"||w===1)&&L_(f,x,A),Object.keys(f).sort(M_).map(C=>+C)}getLabelForValue(e){const t=this._adapter,s=this.options.time;return s.tooltipFormat?t.format(e,s.tooltipFormat):t.format(e,s.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,a=this._unit,o=t||i[a];return this._adapter.format(e,o)}_tickFormatFunction(e,t,s,i){const a=this.options,o=a.ticks.callback;if(o)return ms(o,[e,t,s],this);const c=a.time.displayFormats,u=this._unit,h=this._majorUnit,f=u&&c[u],g=h&&c[h],x=s[t],w=h&&g&&x&&x.major;return this._adapter.format(e,i||(w?g:f))}generateTickLabels(e){let t,s,i;for(t=0,s=e.length;t<s;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+s)*t.factor)}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,s=this.ctx.measureText(e).width,i=ud(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(i),o=Math.sin(i),c=this._resolveTickFontOptions(0).size;return{w:s*a+c*o,h:s*o+c*a}}_getLabelCapacity(e){const t=this.options.time,s=t.displayFormats,i=s[t.unit]||s.millisecond,a=this._tickFormatFunction(e,0,F_(this,[e],this._majorUnit),i),o=this._getLabelSize(a),c=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return c>0?c:1}getDataTimestamps(){let e=this._cache.data||[],t,s;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,s=i.length;t<s;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,s;if(e.length)return e;const i=this.getLabels();for(t=0,s=i.length;t<s;++t)e.push(P_(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return C7(e.sort(M_))}}function ub(n,e,t){let s=0,i=n.length-1,a,o,c,u;t?(e>=n[s].pos&&e<=n[i].pos&&({lo:s,hi:i}=Yh(n,"pos",e)),{pos:a,time:c}=n[s],{pos:o,time:u}=n[i]):(e>=n[s].time&&e<=n[i].time&&({lo:s,hi:i}=Yh(n,"time",e)),{time:a,pos:c}=n[s],{time:o,pos:u}=n[i]);const h=o-a;return h?c+(u-c)*(e-a)/h:c}class Bee extends z_{static id="timeseries";static defaults=z_.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=ub(t,this.min),this._tableRange=ub(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:s}=this,i=[],a=[];let o,c,u,h,f;for(o=0,c=e.length;o<c;++o)h=e[o],h>=t&&h<=s&&i.push(h);if(i.length<2)return[{time:t,pos:0},{time:s,pos:1}];for(o=0,c=i.length;o<c;++o)f=i[o+1],u=i[o-1],h=i[o],Math.round((f+u)/2)!==h&&a.push({time:h,pos:o/(c-1)});return a}_generate(){const e=this.min,t=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(t)||s.length===1)&&s.push(t),s.sort((i,a)=>i-a)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),s=this.getLabelTimestamps();return t.length&&s.length?e=this.normalize(t.concat(s)):e=t.length?t:s,e=this._cache.all=e,e}getDecimalForValue(e){return(ub(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return ub(this._table,s*this._tableRange+this._minPos,!0)}}const $M="label";function I_(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function xX(n,e){const t=n.options;t&&e&&Object.assign(t,e)}function e5(n,e){n.labels=e}function t5(n,e,t=$M){const s=[];n.datasets=e.map(i=>{const a=n.datasets.find(o=>o[t]===i[t]);return!a||!i.data||s.includes(a)?{...i}:(s.push(a),Object.assign(a,i),a)})}function bX(n,e=$M){const t={labels:[],datasets:[]};return e5(t,n.labels),t5(t,n.datasets,e),t}function yX(n,e){const{height:t=150,width:s=300,redraw:i=!1,datasetIdKey:a,type:o,data:c,options:u,plugins:h=[],fallbackContent:f,updateMode:g,...x}=n,w=R.useRef(null),A=R.useRef(null),C=()=>{w.current&&(A.current=new Xy(w.current,{type:o,data:bX(c,a),options:u&&{...u},plugins:h}),I_(e,A.current))},E=()=>{I_(e,null),A.current&&(A.current.destroy(),A.current=null)};return R.useEffect(()=>{!i&&A.current&&u&&xX(A.current,u)},[i,u]),R.useEffect(()=>{!i&&A.current&&e5(A.current.config.data,c.labels)},[i,c.labels]),R.useEffect(()=>{!i&&A.current&&c.datasets&&t5(A.current.config.data,c.datasets,a)},[i,c.datasets]),R.useEffect(()=>{A.current&&(i?(E(),setTimeout(C)):A.current.update(g))},[i,u,c.labels,c.datasets,g]),R.useEffect(()=>{A.current&&(E(),setTimeout(C))},[o]),R.useEffect(()=>(C(),()=>E()),[]),r.jsx("canvas",{ref:w,role:"img",height:t,width:s,...x,children:f})}const vX=R.forwardRef(yX);function n5(n,e){return Xy.register(e),R.forwardRef((t,s)=>r.jsx(vX,{...t,ref:s,type:n}))}const wX=n5("line",YW),SX=n5("doughnut",GW);Xy.register(dX,fX,bY,Ky,AY,qY,rX,JY,WY,lY);const NX=()=>{const[n,e]=R.useState(null),[t,s]=R.useState(!0),[i,a]=R.useState("6m");R.useEffect(()=>{o()},[i]);const o=async()=>{try{s(!0);const x=await LV({range:i});e(x.data)}catch(x){console.error("Failed to fetch analytics",x)}finally{s(!1)}};if(t)return r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 animate-pulse",children:[r.jsx("div",{className:"lg:col-span-2 bg-white rounded-2xl h-[300px] shadow-sm border border-slate-200"}),r.jsx("div",{className:"bg-white rounded-2xl h-[300px] shadow-sm border border-slate-200"})]});if(!n)return null;const c={labels:n.labels||[],datasets:[{label:"Documents Created",data:n.data||[],borderColor:"#6366f1",backgroundColor:"rgba(99, 102, 241, 0.1)",fill:!0,tension:.4,pointBackgroundColor:"#fff",pointBorderColor:"#6366f1",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6}]},u={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(15, 23, 42, 0.9)",padding:12,titleFont:{size:13,family:"'Inter', sans-serif",weight:"600"},bodyFont:{size:12,family:"'Inter', sans-serif"},cornerRadius:8,displayColors:!1,callbacks:{label:x=>`Documents: ${x.parsed.y}`}}},scales:{y:{beginAtZero:!0,grid:{color:"#f1f5f9",borderDash:[5,5],drawBorder:!1},ticks:{font:{size:11,family:"'Inter', sans-serif"},color:"#64748b",padding:10},border:{display:!1}},x:{grid:{display:!1},ticks:{font:{size:11,family:"'Inter', sans-serif"},color:"#64748b",padding:10},border:{display:!1}}},interaction:{mode:"index",intersect:!1}},h={labels:["Draft","Sent","Completed"],datasets:[{data:n?.breakdown?[n.breakdown.draft,n.breakdown.sent,n.breakdown.completed]:[0,0,0],backgroundColor:["#f59e0b","#3b82f6","#10b981"],borderWidth:0,hoverOffset:10}]},f={responsive:!0,maintainAspectRatio:!1,cutout:"70%",plugins:{legend:{position:"bottom",labels:{usePointStyle:!0,boxWidth:8,padding:20,font:{size:12,family:"'Inter', sans-serif",weight:"500"},color:"#475569"}},tooltip:{backgroundColor:"rgba(15, 23, 42, 0.9)",padding:12,cornerRadius:8,callbacks:{label:x=>` ${x.label}: ${x.parsed}`}}}},g=n?.breakdown?Object.values(n.breakdown).reduce((x,w)=>x+w,0):0;return r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 bg-white p-6 rounded-2xl shadow-sm border border-slate-200 hover:shadow-md transition-shadow duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800 tracking-tight",children:"Document Trends"}),r.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Activity overview"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:i,onChange:x=>a(x.target.value),className:"appearance-none bg-slate-50 border border-slate-200 text-slate-700 text-xs font-medium py-2 pl-3 pr-8 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 cursor-pointer hover:bg-slate-100 transition-colors",children:[r.jsx("option",{value:"7d",children:"Last 7 Days"}),r.jsx("option",{value:"30d",children:"Last 30 Days"}),r.jsx("option",{value:"90d",children:"Last 90 Days"}),r.jsx("option",{value:"6m",children:"Last 6 Months"}),r.jsx("option",{value:"1y",children:"Last Year"})]}),r.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none text-slate-400",children:r.jsx(Gu,{size:14})})]}),r.jsx("div",{className:"p-2.5 bg-indigo-50 text-indigo-600 rounded-xl",children:r.jsx(d9,{size:20,strokeWidth:2.5})})]})]}),r.jsx("div",{className:"h-[300px] w-full",children:r.jsx(wX,{data:c,options:u})})]}),r.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200 hover:shadow-md transition-shadow duration-300 flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800 tracking-tight",children:"Status Overview"}),r.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Distribution by status"})]}),r.jsx("div",{className:"p-2.5 bg-emerald-50 text-emerald-600 rounded-xl",children:r.jsx(ls,{size:20,strokeWidth:2.5})})]}),r.jsxs("div",{className:"flex-1 min-h-[250px] relative flex items-center justify-center py-4",children:[r.jsx(SX,{data:h,options:f}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none pb-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("span",{className:"block text-3xl font-extrabold text-slate-800 tracking-tight",children:g}),r.jsx("span",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-widest mt-0.5",children:"Total"})]})})]}),r.jsxs("div",{className:"mt-auto pt-4 border-t border-slate-50 flex justify-between items-center text-xs text-slate-500 font-medium",children:[r.jsx("span",{children:"Real-time data"}),r.jsxs(Vt,{to:"/documents",className:"text-indigo-600 hover:text-indigo-700 hover:underline flex items-center gap-1",children:["View Report ",r.jsx(BD,{size:12})]})]})]})]})},AX=()=>{const[n,e]=R.useState(null),[t,s]=R.useState([]),[i,a]=R.useState(!0);R.useEffect(()=>{(async()=>{try{const[w,A]=await Promise.all([OV(),FV()]);e(w.data),s(A.data)}catch(w){console.error("Failed to fetch dashboard data",w)}finally{a(!1)}})()},[]);const o={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},c={hidden:{opacity:0,y:15},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}}},u=n?.total_documents||0,h=n?.breakdown?.completed||0,f=u>0?Math.round(h/u*100):0,g=[{label:"Draft Documents",value:n?.breakdown?.draft||0,change:"+2.5%",isPositive:!0,icon:Xa,color:"text-amber-500",bg:"bg-amber-500/10"},{label:"Team Members",value:n?.team_size||0,change:"+0%",isPositive:!0,icon:vc,color:"text-indigo-500",bg:"bg-indigo-500/10"},{label:"Total Documents",value:u,change:"+12%",isPositive:!0,icon:ls,color:"text-blue-500",bg:"bg-blue-500/10"},{label:"Completion Rate",value:`${f}%`,change:"+1.2%",isPositive:!0,icon:wT,color:"text-emerald-500",bg:"bg-emerald-500/10"}];return i?r.jsx("div",{className:"flex h-[50vh] items-center justify-center",children:r.jsxs("div",{className:"flex flex-col items-center gap-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600"}),r.jsx("p",{className:"text-slate-400 text-sm animate-pulse",children:"Loading dashboard..."})]})}):r.jsxs(ze.div,{variants:o,initial:"hidden",animate:"visible",className:"space-y-8 max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800 tracking-tight",children:"Welcome back"}),r.jsx("p",{className:"text-slate-500 mt-1",children:"Here's what's happening with your workspace today."})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(Vt,{to:"/documents",className:"px-4 py-2 bg-white text-slate-700 font-medium rounded-lg border border-slate-200 hover:bg-slate-50 transition-colors text-sm shadow-sm",children:"View Documents"}),r.jsxs("button",{className:"px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors text-sm shadow-md shadow-indigo-600/20 flex items-center gap-2",children:[r.jsx(DS,{size:16,fill:"currentColor"}),"Quick Action"]})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:g.map((x,w)=>r.jsxs(ze.div,{variants:c,whileHover:{y:-4,transition:{duration:.2}},className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-[0_2px_20px_-10px_rgba(0,0,0,0.1)] relative overflow-hidden group",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[r.jsx("div",{className:`p-3 rounded-xl ${x.bg} ${x.color} transition-transform group-hover:scale-110 duration-300`,children:r.jsx(x.icon,{size:22,strokeWidth:2.5})}),r.jsxs("div",{className:`flex items-center gap-1 text-xs font-bold px-2 py-1 rounded-full ${x.isPositive?"text-emerald-700 bg-emerald-50":"text-slate-700 bg-slate-50"}`,children:[x.isPositive?r.jsx(BD,{size:14}):r.jsx(iH,{size:14}),x.change]})]}),r.jsxs("div",{className:"relative z-10",children:[r.jsx("h3",{className:"text-3xl font-bold text-slate-900 tracking-tight leading-tight",children:x.value}),r.jsx("p",{className:"text-sm font-medium text-slate-500 mt-1 uppercase tracking-wide text-[10px]",children:x.label})]}),r.jsx("div",{className:`absolute -right-6 -bottom-6 w-24 h-24 rounded-full ${x.bg} opacity-50 blur-2xl group-hover:scale-150 transition-transform duration-500`})]},w))}),r.jsx(NX,{}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs(ze.div,{variants:c,className:"lg:col-span-2 bg-white rounded-2xl border border-slate-200 shadow-sm flex flex-col overflow-hidden",children:[r.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-white sticky top-0 z-10",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-slate-800",children:"Recent Activity"}),r.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:"Latest updates from your team"})]}),r.jsx("button",{className:"text-indigo-600 text-sm font-semibold hover:text-indigo-700 hover:underline",children:"View All"})]}),r.jsx("div",{className:"divide-y divide-slate-100/80 overflow-y-auto max-h-[500px] scrollbar-thin scrollbar-thumb-slate-200",children:t.length===0?r.jsxs("div",{className:"p-12 text-center flex flex-col items-center text-slate-400",children:[r.jsx(wT,{size:48,className:"mb-4 opacity-50 text-slate-300"}),r.jsx("p",{className:"text-sm",children:"No recent activity found."})]}):t.map(x=>r.jsxs("div",{className:"p-5 flex items-start gap-4 hover:bg-slate-50/80 transition-all cursor-pointer group",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 border border-slate-200 flex items-center justify-center text-xs font-bold text-slate-500 uppercase shrink-0 ring-4 ring-white group-hover:ring-indigo-50 group-hover:border-indigo-200 transition-all",children:x.initials}),r.jsxs("div",{className:"flex-1 min-w-0 pt-0.5",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("p",{className:"text-sm font-semibold text-slate-800 truncate group-hover:text-indigo-600 transition-colors",children:x.user}),r.jsxs("span",{className:"flex items-center text-[10px] font-medium text-slate-400 gap-1 whitespace-nowrap bg-slate-50 px-2 py-0.5 rounded-full border border-slate-100",children:[r.jsx(Xa,{size:10}),x.time]})]}),r.jsxs("p",{className:"text-sm text-slate-600 mt-1 leading-relaxed",children:[x.action," ",r.jsx("span",{className:"text-slate-400 mx-1",children:""})," ",r.jsx("span",{className:"font-medium text-slate-700",children:x.project})]})]})]},x.id))})]}),r.jsx(ze.div,{variants:c,className:"flex flex-col gap-6",children:r.jsxs("div",{className:"bg-[#0F172A] rounded-2xl shadow-xl p-8 text-white border border-slate-800 relative overflow-hidden group",children:[r.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500/20 rounded-full blur-[80px] -translate-y-1/2 translate-x-1/2"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-purple-500/20 rounded-full blur-[60px] translate-y-1/2 -translate-x-1/2"}),r.jsxs("div",{className:"relative z-10",children:[r.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-xl flex items-center justify-center mb-6 backdrop-blur-sm border border-white/10 group-hover:scale-110 transition-transform duration-300",children:r.jsx(JU,{className:"text-indigo-400",size:24})}),r.jsx("h3",{className:"text-xl font-bold mb-2 text-white tracking-tight",children:"Upgrade to Enterprise"}),r.jsx("p",{className:"text-slate-400 text-sm mb-8 leading-relaxed",children:"Get access to advanced analytics, unlimited team members, and dedicated support."}),r.jsx("button",{className:"w-full py-3 bg-gradient-to-r from-indigo-600 to-indigo-500 text-white font-bold text-sm rounded-xl hover:from-indigo-500 hover:to-indigo-400 transition-all shadow-lg shadow-indigo-900/50 border border-indigo-500/50",children:"Upgrade Plan"}),r.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-800",children:[r.jsxs("div",{className:"flex justify-between items-center text-xs mb-2",children:[r.jsx("span",{className:"text-slate-400 font-medium",children:"Storage Usage"}),r.jsx("span",{className:"font-bold text-indigo-300",children:"7.8 GB / 10 GB"})]}),r.jsx("div",{className:"w-full bg-slate-800/50 rounded-full h-2 overflow-hidden border border-slate-800",children:r.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full h-full w-[78%] shadow-[0_0_10px_rgba(99,102,241,0.5)]"})})]})]})]})})]})]})},Gm=()=>{const{user:n}=so(),[e,t]=R.useState({roles:{},permissions:[]}),[s,i]=R.useState(!0);return R.useEffect(()=>{(async()=>{try{const c=await Dt.get("/permissions");t(c.data)}catch(c){console.error("Failed to fetch permissions",c)}finally{i(!1)}})()},[]),{can:o=>{if(!n)return!1;if(n.permissions&&n.permissions.includes("*")||n.permissions&&Array.isArray(n.permissions)&&n.permissions.includes(o))return!0;const c=n.role||"viewer",u=e.permissions?.find(h=>h.key===o);return u&&u.roles?u.roles.includes(c):!1},matrix:e,loading:s}};function Ym(n){const[e,t]=R.useState(!1);return R.useEffect(()=>{const s=window.matchMedia(n);s.matches!==e&&t(s.matches);const i=()=>{t(s.matches)};return window.addEventListener("resize",i),s.addEventListener("change",i),()=>{window.removeEventListener("resize",i),s.removeEventListener("change",i)}},[e,n]),e}const CX=({business:n,mobileMenuOpen:e,setMobileMenuOpen:t})=>{const s=Ym("(max-width: 1024px)"),[i,a]=R.useState(!1),o=yi(),{can:c}=Gm(),{logout:u}=so(),h=()=>a(!i),f=async()=>{await u(),o("/")},g=n?.name||"DocForge",x=[{icon:aU,label:"Dashboard",path:"/dashboard"},{icon:ls,label:"Documents",path:"/documents",permission:"document.view"},{icon:WU,label:"Signatures",path:"/signatures/list",permission:"settings.signature"},{icon:vc,label:"Team",path:"/team",permission:"team.view"},{icon:R0,label:"Settings",path:"/settings",permission:"settings.manage"}].filter(w=>!w.permission||c(w.permission));return r.jsxs(ze.aside,{initial:!1,animate:s?{x:e?0:-300,position:"fixed",height:"100%"}:{width:i?80:280,x:0,position:"sticky"},transition:{duration:.3,ease:[.22,1,.36,1]},className:`
                no-print h-screen bg-[#0F172A] text-slate-400 flex flex-col justify-between
                z-50 border-r border-slate-800 shadow-2xl
                lg:sticky lg:top-0 fixed top-0 left-0
                ${e?"w-[280px]":""}
            `,children:[r.jsxs("div",{className:"p-6 flex items-center justify-between h-20 border-b border-slate-800/80",children:[r.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[r.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center text-white shadow-lg",children:r.jsx(wd,{size:18,strokeWidth:2.5})}),(!i||e)&&r.jsxs(ze.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},children:[r.jsx("span",{className:"font-bold text-lg text-white block leading-none",children:g}),r.jsx("span",{className:"text-[10px] uppercase font-bold text-indigo-400 tracking-wider",children:"Workspace"})]})]}),r.jsx("button",{onClick:h,className:"p-1.5 rounded-lg text-slate-500 hover:text-white hover:bg-slate-800 hidden lg:block",children:i?r.jsx(gl,{size:18}):r.jsx(ey,{size:18})}),r.jsx("button",{onClick:()=>t(!1),className:"p-1.5 rounded-lg text-slate-500 hover:text-white hover:bg-slate-800 lg:hidden",children:r.jsx(ey,{size:20})})]}),r.jsx("nav",{className:"flex-1 px-4 py-8 space-y-1",children:x.map(w=>r.jsx(gk,{to:w.path,onClick:()=>t(!1),className:({isActive:A})=>`flex items-center px-4 py-3.5 rounded-xl transition-all group relative
                             ${A?"bg-indigo-600/10 text-white":"hover:bg-white/5 hover:text-slate-200"}`,children:({isActive:A})=>r.jsxs(r.Fragment,{children:[A&&r.jsx(ze.div,{layoutId:"activeTab",className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-8 bg-indigo-500 rounded-r-full"}),r.jsx(w.icon,{size:22,strokeWidth:A?2.5:2}),(!i||e)&&r.jsx("span",{className:"ml-4 text-sm font-medium",children:w.label}),i&&!e&&r.jsx("div",{className:`hidden lg:block absolute left-full ml-4 px-3 py-1.5 bg-slate-800
                                        text-xs text-white rounded-md opacity-0 group-hover:opacity-100 transition`,children:w.label})]})},w.path))}),r.jsxs("div",{className:"p-4 border-t border-slate-800/80",children:[(!i||e)&&r.jsxs("div",{className:"mb-4 p-4 rounded-xl bg-slate-800 border border-slate-700",children:[r.jsx("p",{className:"text-xs font-bold text-slate-300",children:"Pro Plan"}),r.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:"Manage team access"})]}),r.jsxs("button",{onClick:f,className:`flex items-center w-full rounded-xl text-slate-400 hover:text-red-400
                        hover:bg-red-500/10 transition
                        ${i?"justify-center p-3":"px-4 py-3"}`,children:[r.jsx(GD,{size:20}),(!i||e)&&r.jsx("span",{className:"ml-3 text-sm font-medium",children:"Log Out"})]})]})]})},EX=()=>Dt.get("/notifications"),TX=()=>Dt.post("/notifications/mark-all-read"),_X=n=>Dt.post(`/notifications/${n}/read`),jX=({business:n,onMenuClick:e})=>{const{user:t,logout:s}=so(),i=yi(),[a,o]=R.useState(!1),c=R.useRef(null),[u,h]=R.useState(!1),[f,g]=R.useState(!1),x=R.useRef(null),w=R.useRef(null),[A,C]=R.useState([]),[E,T]=R.useState(0),D=async()=>{try{const W=await EX(),Y=W.data.data.map(K=>({id:K.id,type:K.data.type||"info",title:K.data.title||"Notification",message:K.data.message||"",time:new Date(K.created_at).toLocaleDateString(),read:!!K.read_at,raw_created_at:K.created_at}));C(Y),T(W.data.unread_count)}catch(W){console.error("Failed to fetch notifications",W)}};R.useEffect(()=>{if(t){D();const W=setInterval(D,3e4);return()=>clearInterval(W)}},[t]);const M=async()=>{try{await TX(),D()}catch(W){console.error("Failed to mark all read",W)}},L=async W=>{try{await _X(W),D()}catch(V){console.error("Failed to mark read",V)}};R.useEffect(()=>{const W=V=>{x.current&&!x.current.contains(V.target)&&h(!1),w.current&&!w.current.contains(V.target)&&g(!1),c.current&&!c.current.contains(V.target)&&o(!1)};return document.addEventListener("mousedown",W),()=>document.removeEventListener("mousedown",W)},[]);const I=async()=>{await s(),i("/login")};return r.jsxs("header",{className:"no-print px-4 sm:px-6 py-4 flex items-center justify-between sticky top-0 z-40 bg-white border-b border-slate-200 shadow-sm transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:e,className:"p-2 -ml-2 text-slate-500 hover:bg-slate-100 rounded-lg lg:hidden transition-colors",children:r.jsx(YD,{size:20})}),r.jsxs("div",{className:`${a?"hidden md:block":"block"}`,children:[r.jsx("h1",{className:"text-lg sm:text-xl font-bold text-slate-800 tracking-tight",children:"Dashboard"}),r.jsxs("p",{className:"text-xs text-slate-500 font-medium tracking-wide mt-0.5 hidden sm:block",children:["Overview of your ",n?.name||"Workspace"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[r.jsxs("div",{className:"relative group",ref:c,children:[r.jsx("button",{onClick:()=>o(!a),className:"md:hidden p-2 text-slate-500 hover:bg-slate-50 rounded-lg",children:r.jsx(qp,{size:20})}),r.jsxs("div",{className:`${a?"absolute right-0 top-1/2 -translate-y-1/2 w-[calc(100vw-80px)] md:w-auto bg-white z-50":"hidden md:block relative"}`,children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-slate-400 group-focus-within:text-indigo-600 transition-colors",children:r.jsx(qp,{size:16})}),r.jsx("input",{type:"text",autoFocus:a,placeholder:"Search...",className:"pl-9 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm w-full md:w-64 focus:ring-1 focus:ring-indigo-500 focus:bg-white focus:border-indigo-500 transition-all duration-200 placeholder-slate-400 text-slate-700 hover:border-slate-300 shadow-sm md:shadow-none"})]})]}),r.jsx("div",{className:"h-6 w-px bg-slate-200 mx-1 hidden md:block"}),r.jsxs("div",{className:"relative",ref:x,children:[r.jsxs(ze.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(!u),className:`relative p-2 rounded-lg transition-all ${u?"bg-indigo-50 text-indigo-600":"text-slate-500 hover:bg-slate-50 hover:text-indigo-600"}`,children:[r.jsx(wc,{size:20}),E>0&&r.jsxs("span",{className:"absolute top-2 right-2 flex h-2.5 w-2.5",children:[r.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),r.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-red-500 ring-2 ring-white"})]})]}),r.jsx(Zn,{children:u&&r.jsxs(ze.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.2},className:"absolute right-0 mt-3 w-[85vw] sm:w-96 bg-white rounded-xl shadow-xl border border-slate-200 overflow-hidden z-50 origin-top-right right-[-60px] sm:right-0",children:[r.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between bg-slate-50/50",children:[r.jsx("h3",{className:"font-semibold text-slate-800",children:"Notifications"}),r.jsx("button",{onClick:M,className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium transition-colors",children:"Mark all read"})]}),r.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:A.length===0?r.jsx("div",{className:"p-6 text-center text-slate-500 text-sm",children:"No notifications."}):A.map(W=>r.jsx("div",{onClick:()=>L(W.id),className:`p-4 border-b border-slate-50 hover:bg-slate-50 transition-colors cursor-pointer group ${W.read?"":"bg-indigo-50/30"}`,children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"mt-1 h-8 w-8 rounded-full flex items-center justify-center shrink-0 bg-indigo-100 text-indigo-600",children:r.jsx(ls,{size:14})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-slate-800 group-hover:text-indigo-700 transition-colors",children:W.title}),r.jsx("p",{className:"text-xs text-slate-500 mt-0.5 leading-relaxed",children:W.message}),r.jsx("p",{className:"text-[10px] text-slate-400 mt-2 font-medium",children:W.time})]}),!W.read&&r.jsx("div",{className:"mt-2 h-2 w-2 rounded-full bg-indigo-500 shrink-0"})]})},W.id))}),r.jsx("div",{className:"p-3 bg-slate-50 text-center border-t border-slate-100",children:r.jsx("button",{className:"text-xs font-medium text-slate-500 hover:text-slate-800 transition-colors",children:"View All Activity"})})]})})]}),r.jsxs("div",{className:"relative pl-2",ref:w,children:[r.jsxs(ze.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>g(!f),className:`flex items-center gap-3 p-1.5 rounded-xl transition-all border ${f?"bg-white border-indigo-200 shadow-md ring-2 ring-indigo-50":"border-transparent hover:bg-slate-50"}`,children:[r.jsxs("div",{className:"text-right hidden md:block",children:[r.jsx("p",{className:"text-sm font-semibold text-slate-700 leading-tight",children:t?.name||"User"}),r.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider trancate max-w-[100px]",children:t?.role||"Member"})]}),r.jsx("div",{className:"h-9 w-9 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white shadow-lg shadow-indigo-200 overflow-hidden",children:t?.avatar_url?r.jsx("img",{src:t.avatar_url,alt:t.name,className:"h-full w-full object-cover"}):r.jsx("span",{className:"font-bold text-sm",children:t?.name?.charAt(0).toUpperCase()||"U"})}),r.jsx(Im,{size:14,className:`text-slate-400 transition-transform hidden md:block ${f?"rotate-180":""}`})]}),r.jsx(Zn,{children:f&&r.jsxs(ze.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.2},className:"absolute right-0 mt-3 w-56 bg-white rounded-xl shadow-xl border border-slate-200 overflow-hidden z-50 origin-top-right",children:[r.jsxs("div",{className:"p-4 border-b border-slate-100 md:hidden bg-slate-50",children:[r.jsx("p",{className:"text-sm font-semibold text-slate-800",children:t?.name}),r.jsx("p",{className:"text-xs text-slate-500",children:t?.email})]}),r.jsxs("div",{className:"p-2 space-y-1",children:[r.jsxs(Vt,{to:"/settings",onClick:()=>g(!1),className:"flex items-center gap-3 px-3 py-2 text-sm text-slate-600 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors group",children:[r.jsx(Mo,{size:16,className:"text-slate-400 group-hover:text-indigo-500 transition-colors"}),"My Profile"]}),r.jsxs(Vt,{to:"/settings",onClick:()=>g(!1),className:"flex items-center gap-3 px-3 py-2 text-sm text-slate-600 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors group",children:[r.jsx(R0,{size:16,className:"text-slate-400 group-hover:text-indigo-500 transition-colors"}),"Settings"]})]}),r.jsx("div",{className:"p-2 border-t border-slate-100 mt-1",children:r.jsxs("button",{onClick:I,className:"w-full flex items-center gap-3 px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors group",children:[r.jsx(GD,{size:16,className:"text-red-500 group-hover:text-red-600 transition-colors"}),"Sign Out"]})})]})})]})]})]})},P0=async n=>{let e;return n instanceof FormData?(n.append("_method","PUT"),e=await Dt.post("/business",n,{headers:{"Content-Type":"multipart/form-data"}})):e=await Dt.put("/business",n),e.data},vr=async()=>(await Dt.get("/user")).data.data.business;function kX(){const[n,e]=R.useState(null),[t,s]=R.useState(!1);return R.useEffect(()=>{(async()=>{try{const a=await vr();e(a)}catch(a){console.error("Failed to fetch business",a)}})()},[]),r.jsxs("div",{className:"flex bg-slate-50 min-h-screen",children:[r.jsx(CX,{business:n,mobileMenuOpen:t,setMobileMenuOpen:s}),t&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/50 z-40 lg:hidden backdrop-blur-sm",onClick:()=>s(!1)}),r.jsxs("div",{className:"flex-1 flex flex-col min-w-0 transition-all duration-300 relative overflow-x-hidden",children:[r.jsx(jX,{business:n,onMenuClick:()=>s(!t)}),r.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-8",children:r.jsx(b0,{})})]})]})}function RX(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return R.useMemo(()=>s=>{e.forEach(i=>i(s))},e)}const Qy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Xm(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function JS(n){return"nodeType"in n}function Ka(n){var e,t;return n?Xm(n)?n:JS(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function QS(n){const{Document:e}=Ka(n);return n instanceof e}function O0(n){return Xm(n)?!1:n instanceof Ka(n).HTMLElement}function s5(n){return n instanceof Ka(n).SVGElement}function Km(n){return n?Xm(n)?n.document:JS(n)?QS(n)?n:O0(n)||s5(n)?n.ownerDocument:document:document:document}const Nl=Qy?R.useLayoutEffect:R.useEffect;function qy(n){const e=R.useRef(n);return Nl(()=>{e.current=n}),R.useCallback(function(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return e.current==null?void 0:e.current(...s)},[])}function DX(){const n=R.useRef(null),e=R.useCallback((s,i)=>{n.current=setInterval(s,i)},[]),t=R.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function o0(n,e){e===void 0&&(e=[n]);const t=R.useRef(n);return Nl(()=>{t.current!==n&&(t.current=n)},e),t}function L0(n,e){const t=R.useRef();return R.useMemo(()=>{const s=n(t.current);return t.current=s,s},[...e])}function hy(n){const e=qy(n),t=R.useRef(null),s=R.useCallback(i=>{i!==t.current&&e?.(i,t.current),t.current=i},[]);return[t,s]}function fy(n){const e=R.useRef();return R.useEffect(()=>{e.current=n},[n]),e.current}let ow={};function F0(n,e){return R.useMemo(()=>{if(e)return e;const t=ow[n]==null?0:ow[n]+1;return ow[n]=t,n+"-"+t},[n,e])}function i5(n){return function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];return s.reduce((a,o)=>{const c=Object.entries(o);for(const[u,h]of c){const f=a[u];f!=null&&(a[u]=f+n*h)}return a},{...e})}}const fm=i5(1),my=i5(-1);function MX(n){return"clientX"in n&&"clientY"in n}function $y(n){if(!n)return!1;const{KeyboardEvent:e}=Ka(n.target);return e&&n instanceof e}function PX(n){if(!n)return!1;const{TouchEvent:e}=Ka(n.target);return e&&n instanceof e}function gy(n){if(PX(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return MX(n)?{x:n.clientX,y:n.clientY}:null}const Sc=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[Sc.Translate.toString(n),Sc.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:s}=n;return e+" "+t+"ms "+s}}}),B_="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function OX(n){return n.matches(B_)?n:n.querySelector(B_)}const LX={display:"none"};function FX(n){let{id:e,value:t}=n;return gt.createElement("div",{id:e,style:LX},t)}function zX(n){let{id:e,announcement:t,ariaLiveType:s="assertive"}=n;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return gt.createElement("div",{id:e,style:i,role:"status","aria-live":s,"aria-atomic":!0},t)}function IX(){const[n,e]=R.useState("");return{announce:R.useCallback(s=>{s!=null&&e(s)},[]),announcement:n}}const a5=R.createContext(null);function BX(n){const e=R.useContext(a5);R.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function HX(){const[n]=R.useState(()=>new Set),e=R.useCallback(s=>(n.add(s),()=>n.delete(s)),[n]);return[R.useCallback(s=>{let{type:i,event:a}=s;n.forEach(o=>{var c;return(c=o[i])==null?void 0:c.call(o,a)})},[n]),e]}const UX={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},VX={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function WX(n){let{announcements:e=VX,container:t,hiddenTextDescribedById:s,screenReaderInstructions:i=UX}=n;const{announce:a,announcement:o}=IX(),c=F0("DndLiveRegion"),[u,h]=R.useState(!1);if(R.useEffect(()=>{h(!0)},[]),BX(R.useMemo(()=>({onDragStart(g){let{active:x}=g;a(e.onDragStart({active:x}))},onDragMove(g){let{active:x,over:w}=g;e.onDragMove&&a(e.onDragMove({active:x,over:w}))},onDragOver(g){let{active:x,over:w}=g;a(e.onDragOver({active:x,over:w}))},onDragEnd(g){let{active:x,over:w}=g;a(e.onDragEnd({active:x,over:w}))},onDragCancel(g){let{active:x,over:w}=g;a(e.onDragCancel({active:x,over:w}))}}),[a,e])),!u)return null;const f=gt.createElement(gt.Fragment,null,gt.createElement(FX,{id:s,value:i.draggable}),gt.createElement(zX,{id:c,announcement:o}));return t?Hh.createPortal(f,t):f}var Li;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(Li||(Li={}));function py(){}function Nc(n,e){return R.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function Zm(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return R.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const Al=Object.freeze({x:0,y:0});function GX(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function YX(n,e){const t=gy(n);if(!t)return"0 0";const s={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return s.x+"% "+s.y+"%"}function XX(n,e){let{data:{value:t}}=n,{data:{value:s}}=e;return t-s}function KX(n,e){let{data:{value:t}}=n,{data:{value:s}}=e;return s-t}function ZX(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function H_(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}const r5=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=n;const i=H_(e,e.left,e.top),a=[];for(const o of s){const{id:c}=o,u=t.get(c);if(u){const h=GX(H_(u),i);a.push({id:c,data:{droppableContainer:o,value:h}})}}return a.sort(XX)};function JX(n,e){const t=Math.max(e.top,n.top),s=Math.max(e.left,n.left),i=Math.min(e.left+e.width,n.left+n.width),a=Math.min(e.top+e.height,n.top+n.height),o=i-s,c=a-t;if(s<i&&t<a){const u=e.width*e.height,h=n.width*n.height,f=o*c,g=f/(u+h-f);return Number(g.toFixed(4))}return 0}const QX=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:s}=n;const i=[];for(const a of s){const{id:o}=a,c=t.get(o);if(c){const u=JX(c,e);u>0&&i.push({id:o,data:{droppableContainer:a,value:u}})}}return i.sort(KX)};function qX(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function o5(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:Al}function $X(n){return function(t){for(var s=arguments.length,i=new Array(s>1?s-1:0),a=1;a<s;a++)i[a-1]=arguments[a];return i.reduce((o,c)=>({...o,top:o.top+n*c.y,bottom:o.bottom+n*c.y,left:o.left+n*c.x,right:o.right+n*c.x}),{...t})}}const eK=$X(1);function l5(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function tK(n,e,t){const s=l5(e);if(!s)return n;const{scaleX:i,scaleY:a,x:o,y:c}=s,u=n.left-o-(1-i)*parseFloat(t),h=n.top-c-(1-a)*parseFloat(t.slice(t.indexOf(" ")+1)),f=i?n.width/i:n.width,g=a?n.height/a:n.height;return{width:f,height:g,top:h,right:u+f,bottom:h+g,left:u}}const nK={ignoreTransform:!1};function Jm(n,e){e===void 0&&(e=nK);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:f}=Ka(n).getComputedStyle(n);h&&(t=tK(t,h,f))}const{top:s,left:i,width:a,height:o,bottom:c,right:u}=t;return{top:s,left:i,width:a,height:o,bottom:c,right:u}}function U_(n){return Jm(n,{ignoreTransform:!0})}function sK(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function iK(n,e){return e===void 0&&(e=Ka(n).getComputedStyle(n)),e.position==="fixed"}function aK(n,e){e===void 0&&(e=Ka(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const a=e[i];return typeof a=="string"?t.test(a):!1})}function qS(n,e){const t=[];function s(i){if(e!=null&&t.length>=e||!i)return t;if(QS(i)&&i.scrollingElement!=null&&!t.includes(i.scrollingElement))return t.push(i.scrollingElement),t;if(!O0(i)||s5(i)||t.includes(i))return t;const a=Ka(n).getComputedStyle(i);return i!==n&&aK(i,a)&&t.push(i),iK(i,a)?t:s(i.parentNode)}return n?s(n):t}function c5(n){const[e]=qS(n,1);return e??null}function lw(n){return!Qy||!n?null:Xm(n)?n:JS(n)?QS(n)||n===Km(n).scrollingElement?window:O0(n)?n:null:null}function d5(n){return Xm(n)?n.scrollX:n.scrollLeft}function u5(n){return Xm(n)?n.scrollY:n.scrollTop}function p2(n){return{x:d5(n),y:u5(n)}}var Qi;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(Qi||(Qi={}));function h5(n){return!Qy||!n?!1:n===document.scrollingElement}function f5(n){const e={x:0,y:0},t=h5(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},s={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},i=n.scrollTop<=e.y,a=n.scrollLeft<=e.x,o=n.scrollTop>=s.y,c=n.scrollLeft>=s.x;return{isTop:i,isLeft:a,isBottom:o,isRight:c,maxScroll:s,minScroll:e}}const rK={x:.2,y:.2};function oK(n,e,t,s,i){let{top:a,left:o,right:c,bottom:u}=t;s===void 0&&(s=10),i===void 0&&(i=rK);const{isTop:h,isBottom:f,isLeft:g,isRight:x}=f5(n),w={x:0,y:0},A={x:0,y:0},C={height:e.height*i.y,width:e.width*i.x};return!h&&a<=e.top+C.height?(w.y=Qi.Backward,A.y=s*Math.abs((e.top+C.height-a)/C.height)):!f&&u>=e.bottom-C.height&&(w.y=Qi.Forward,A.y=s*Math.abs((e.bottom-C.height-u)/C.height)),!x&&c>=e.right-C.width?(w.x=Qi.Forward,A.x=s*Math.abs((e.right-C.width-c)/C.width)):!g&&o<=e.left+C.width&&(w.x=Qi.Backward,A.x=s*Math.abs((e.left+C.width-o)/C.width)),{direction:w,speed:A}}function lK(n){if(n===document.scrollingElement){const{innerWidth:a,innerHeight:o}=window;return{top:0,left:0,right:a,bottom:o,width:a,height:o}}const{top:e,left:t,right:s,bottom:i}=n.getBoundingClientRect();return{top:e,left:t,right:s,bottom:i,width:n.clientWidth,height:n.clientHeight}}function m5(n){return n.reduce((e,t)=>fm(e,p2(t)),Al)}function cK(n){return n.reduce((e,t)=>e+d5(t),0)}function dK(n){return n.reduce((e,t)=>e+u5(t),0)}function g5(n,e){if(e===void 0&&(e=Jm),!n)return;const{top:t,left:s,bottom:i,right:a}=e(n);c5(n)&&(i<=0||a<=0||t>=window.innerHeight||s>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const uK=[["x",["left","right"],cK],["y",["top","bottom"],dK]];class $S{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=qS(t),i=m5(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[a,o,c]of uK)for(const u of o)Object.defineProperty(this,u,{get:()=>{const h=c(s),f=i[a]-h;return this.rect[u]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Bp{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...t)})},this.target=e}add(e,t,s){var i;(i=this.target)==null||i.addEventListener(e,t,s),this.listeners.push([e,t,s])}}function hK(n){const{EventTarget:e}=Ka(n);return n instanceof e?n:Km(n)}function cw(n,e){const t=Math.abs(n.x),s=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+s**2)>e:"x"in e&&"y"in e?t>e.x&&s>e.y:"x"in e?t>e.x:"y"in e?s>e.y:!1}var Eo;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(Eo||(Eo={}));function V_(n){n.preventDefault()}function fK(n){n.stopPropagation()}var kn;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(kn||(kn={}));const p5={start:[kn.Space,kn.Enter],cancel:[kn.Esc],end:[kn.Space,kn.Enter,kn.Tab]},mK=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case kn.Right:return{...t,x:t.x+25};case kn.Left:return{...t,x:t.x-25};case kn.Down:return{...t,y:t.y+25};case kn.Up:return{...t,y:t.y-25}}};class eN{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Bp(Km(t)),this.windowListeners=new Bp(Ka(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Eo.Resize,this.handleCancel),this.windowListeners.add(Eo.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Eo.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,s=e.node.current;s&&g5(s),t(Al)}handleKeyDown(e){if($y(e)){const{active:t,context:s,options:i}=this.props,{keyboardCodes:a=p5,coordinateGetter:o=mK,scrollBehavior:c="smooth"}=i,{code:u}=e;if(a.end.includes(u)){this.handleEnd(e);return}if(a.cancel.includes(u)){this.handleCancel(e);return}const{collisionRect:h}=s.current,f=h?{x:h.left,y:h.top}:Al;this.referenceCoordinates||(this.referenceCoordinates=f);const g=o(e,{active:t,context:s.current,currentCoordinates:f});if(g){const x=my(g,f),w={x:0,y:0},{scrollableAncestors:A}=s.current;for(const C of A){const E=e.code,{isTop:T,isRight:D,isLeft:M,isBottom:L,maxScroll:I,minScroll:W}=f5(C),V=lK(C),Y={x:Math.min(E===kn.Right?V.right-V.width/2:V.right,Math.max(E===kn.Right?V.left:V.left+V.width/2,g.x)),y:Math.min(E===kn.Down?V.bottom-V.height/2:V.bottom,Math.max(E===kn.Down?V.top:V.top+V.height/2,g.y))},K=E===kn.Right&&!D||E===kn.Left&&!M,q=E===kn.Down&&!L||E===kn.Up&&!T;if(K&&Y.x!==g.x){const ne=C.scrollLeft+x.x,le=E===kn.Right&&ne<=I.x||E===kn.Left&&ne>=W.x;if(le&&!x.y){C.scrollTo({left:ne,behavior:c});return}le?w.x=C.scrollLeft-ne:w.x=E===kn.Right?C.scrollLeft-I.x:C.scrollLeft-W.x,w.x&&C.scrollBy({left:-w.x,behavior:c});break}else if(q&&Y.y!==g.y){const ne=C.scrollTop+x.y,le=E===kn.Down&&ne<=I.y||E===kn.Up&&ne>=W.y;if(le&&!x.x){C.scrollTo({top:ne,behavior:c});return}le?w.y=C.scrollTop-ne:w.y=E===kn.Down?C.scrollTop-I.y:C.scrollTop-W.y,w.y&&C.scrollBy({top:-w.y,behavior:c});break}}this.handleMove(e,fm(my(g,this.referenceCoordinates),w))}}}handleMove(e,t){const{onMove:s}=this.props;e.preventDefault(),s(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}eN.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:s=p5,onActivation:i}=e,{active:a}=t;const{code:o}=n.nativeEvent;if(s.start.includes(o)){const c=a.activatorNode.current;return c&&n.target!==c?!1:(n.preventDefault(),i?.({event:n.nativeEvent}),!0)}return!1}}];function W_(n){return!!(n&&"distance"in n)}function G_(n){return!!(n&&"delay"in n)}class tN{constructor(e,t,s){var i;s===void 0&&(s=hK(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:a}=e,{target:o}=a;this.props=e,this.events=t,this.document=Km(o),this.documentListeners=new Bp(this.document),this.listeners=new Bp(s),this.windowListeners=new Bp(Ka(o)),this.initialCoordinates=(i=gy(a))!=null?i:Al,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Eo.Resize,this.handleCancel),this.windowListeners.add(Eo.DragStart,V_),this.windowListeners.add(Eo.VisibilityChange,this.handleCancel),this.windowListeners.add(Eo.ContextMenu,V_),this.documentListeners.add(Eo.Keydown,this.handleKeydown),t){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(G_(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(W_(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:s,onPending:i}=this.props;i(s,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Eo.Click,fK,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Eo.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:s,initialCoordinates:i,props:a}=this,{onMove:o,options:{activationConstraint:c}}=a;if(!i)return;const u=(t=gy(e))!=null?t:Al,h=my(i,u);if(!s&&c){if(W_(c)){if(c.tolerance!=null&&cw(h,c.tolerance))return this.handleCancel();if(cw(h,c.distance))return this.handleStart()}if(G_(c)&&cw(h,c.tolerance))return this.handleCancel();this.handlePending(c,h);return}e.cancelable&&e.preventDefault(),o(u)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===kn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const gK={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Xu extends tN{constructor(e){const{event:t}=e,s=Km(t.target);super(e,gK,s)}}Xu.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:s}=e;return!t.isPrimary||t.button!==0?!1:(s?.({event:t}),!0)}}];const pK={move:{name:"mousemove"},end:{name:"mouseup"}};var x2;(function(n){n[n.RightClick=2]="RightClick"})(x2||(x2={}));class xK extends tN{constructor(e){super(e,pK,Km(e.event.target))}}xK.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:s}=e;return t.button===x2.RightClick?!1:(s?.({event:t}),!0)}}];const dw={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class ev extends tN{constructor(e){super(e,dw)}static setup(){return window.addEventListener(dw.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(dw.move.name,e)};function e(){}}}ev.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:s}=e;const{touches:i}=t;return i.length>1?!1:(s?.({event:t}),!0)}}];var Hp;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(Hp||(Hp={}));var xy;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(xy||(xy={}));function bK(n){let{acceleration:e,activator:t=Hp.Pointer,canScroll:s,draggingRect:i,enabled:a,interval:o=5,order:c=xy.TreeOrder,pointerCoordinates:u,scrollableAncestors:h,scrollableAncestorRects:f,delta:g,threshold:x}=n;const w=vK({delta:g,disabled:!a}),[A,C]=DX(),E=R.useRef({x:0,y:0}),T=R.useRef({x:0,y:0}),D=R.useMemo(()=>{switch(t){case Hp.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case Hp.DraggableRect:return i}},[t,i,u]),M=R.useRef(null),L=R.useCallback(()=>{const W=M.current;if(!W)return;const V=E.current.x*T.current.x,Y=E.current.y*T.current.y;W.scrollBy(V,Y)},[]),I=R.useMemo(()=>c===xy.TreeOrder?[...h].reverse():h,[c,h]);R.useEffect(()=>{if(!a||!h.length||!D){C();return}for(const W of I){if(s?.(W)===!1)continue;const V=h.indexOf(W),Y=f[V];if(!Y)continue;const{direction:K,speed:q}=oK(W,Y,D,e,x);for(const ne of["x","y"])w[ne][K[ne]]||(q[ne]=0,K[ne]=0);if(q.x>0||q.y>0){C(),M.current=W,A(L,o),E.current=q,T.current=K;return}}E.current={x:0,y:0},T.current={x:0,y:0},C()},[e,L,s,C,a,o,JSON.stringify(D),JSON.stringify(w),A,h,I,f,JSON.stringify(x)])}const yK={x:{[Qi.Backward]:!1,[Qi.Forward]:!1},y:{[Qi.Backward]:!1,[Qi.Forward]:!1}};function vK(n){let{delta:e,disabled:t}=n;const s=fy(e);return L0(i=>{if(t||!s||!i)return yK;const a={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[Qi.Backward]:i.x[Qi.Backward]||a.x===-1,[Qi.Forward]:i.x[Qi.Forward]||a.x===1},y:{[Qi.Backward]:i.y[Qi.Backward]||a.y===-1,[Qi.Forward]:i.y[Qi.Forward]||a.y===1}}},[t,e,s])}function wK(n,e){const t=e!=null?n.get(e):void 0,s=t?t.node.current:null;return L0(i=>{var a;return e==null?null:(a=s??i)!=null?a:null},[s,e])}function SK(n,e){return R.useMemo(()=>n.reduce((t,s)=>{const{sensor:i}=s,a=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,s)}));return[...t,...a]},[]),[n,e])}var l0;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(l0||(l0={}));var b2;(function(n){n.Optimized="optimized"})(b2||(b2={}));const Y_=new Map;function NK(n,e){let{dragging:t,dependencies:s,config:i}=e;const[a,o]=R.useState(null),{frequency:c,measure:u,strategy:h}=i,f=R.useRef(n),g=E(),x=o0(g),w=R.useCallback(function(T){T===void 0&&(T=[]),!x.current&&o(D=>D===null?T:D.concat(T.filter(M=>!D.includes(M))))},[x]),A=R.useRef(null),C=L0(T=>{if(g&&!t)return Y_;if(!T||T===Y_||f.current!==n||a!=null){const D=new Map;for(let M of n){if(!M)continue;if(a&&a.length>0&&!a.includes(M.id)&&M.rect.current){D.set(M.id,M.rect.current);continue}const L=M.node.current,I=L?new $S(u(L),L):null;M.rect.current=I,I&&D.set(M.id,I)}return D}return T},[n,a,t,g,u]);return R.useEffect(()=>{f.current=n},[n]),R.useEffect(()=>{g||w()},[t,g]),R.useEffect(()=>{a&&a.length>0&&o(null)},[JSON.stringify(a)]),R.useEffect(()=>{g||typeof c!="number"||A.current!==null||(A.current=setTimeout(()=>{w(),A.current=null},c))},[c,g,w,...s]),{droppableRects:C,measureDroppableContainers:w,measuringScheduled:a!=null};function E(){switch(h){case l0.Always:return!1;case l0.BeforeDragging:return t;default:return!t}}}function nN(n,e){return L0(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function AK(n,e){return nN(n,e)}function CK(n){let{callback:e,disabled:t}=n;const s=qy(e),i=R.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(s)},[s,t]);return R.useEffect(()=>()=>i?.disconnect(),[i]),i}function tv(n){let{callback:e,disabled:t}=n;const s=qy(e),i=R.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(s)},[t]);return R.useEffect(()=>()=>i?.disconnect(),[i]),i}function EK(n){return new $S(Jm(n),n)}function X_(n,e,t){e===void 0&&(e=EK);const[s,i]=R.useState(null);function a(){i(u=>{if(!n)return null;if(n.isConnected===!1){var h;return(h=u??t)!=null?h:null}const f=e(n);return JSON.stringify(u)===JSON.stringify(f)?u:f})}const o=CK({callback(u){if(n)for(const h of u){const{type:f,target:g}=h;if(f==="childList"&&g instanceof HTMLElement&&g.contains(n)){a();break}}}}),c=tv({callback:a});return Nl(()=>{a(),n?(c?.observe(n),o?.observe(document.body,{childList:!0,subtree:!0})):(c?.disconnect(),o?.disconnect())},[n]),s}function TK(n){const e=nN(n);return o5(n,e)}const K_=[];function _K(n){const e=R.useRef(n),t=L0(s=>n?s&&s!==K_&&n&&e.current&&n.parentNode===e.current.parentNode?s:qS(n):K_,[n]);return R.useEffect(()=>{e.current=n},[n]),t}function jK(n){const[e,t]=R.useState(null),s=R.useRef(n),i=R.useCallback(a=>{const o=lw(a.target);o&&t(c=>c?(c.set(o,p2(o)),new Map(c)):null)},[]);return R.useEffect(()=>{const a=s.current;if(n!==a){o(a);const c=n.map(u=>{const h=lw(u);return h?(h.addEventListener("scroll",i,{passive:!0}),[h,p2(h)]):null}).filter(u=>u!=null);t(c.length?new Map(c):null),s.current=n}return()=>{o(n),o(a)};function o(c){c.forEach(u=>{const h=lw(u);h?.removeEventListener("scroll",i)})}},[i,n]),R.useMemo(()=>n.length?e?Array.from(e.values()).reduce((a,o)=>fm(a,o),Al):m5(n):Al,[n,e])}function Z_(n,e){e===void 0&&(e=[]);const t=R.useRef(null);return R.useEffect(()=>{t.current=null},e),R.useEffect(()=>{const s=n!==Al;s&&!t.current&&(t.current=n),!s&&t.current&&(t.current=null)},[n]),t.current?my(n,t.current):Al}function kK(n){R.useEffect(()=>{if(!Qy)return;const e=n.map(t=>{let{sensor:s}=t;return s.setup==null?void 0:s.setup()});return()=>{for(const t of e)t?.()}},n.map(e=>{let{sensor:t}=e;return t}))}function RK(n,e){return R.useMemo(()=>n.reduce((t,s)=>{let{eventName:i,handler:a}=s;return t[i]=o=>{a(o,e)},t},{}),[n,e])}function x5(n){return R.useMemo(()=>n?sK(n):null,[n])}const J_=[];function DK(n,e){e===void 0&&(e=Jm);const[t]=n,s=x5(t?Ka(t):null),[i,a]=R.useState(J_);function o(){a(()=>n.length?n.map(u=>h5(u)?s:new $S(e(u),u)):J_)}const c=tv({callback:o});return Nl(()=>{c?.disconnect(),o(),n.forEach(u=>c?.observe(u))},[n]),i}function b5(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return O0(e)?e:n}function MK(n){let{measure:e}=n;const[t,s]=R.useState(null),i=R.useCallback(h=>{for(const{target:f}of h)if(O0(f)){s(g=>{const x=e(f);return g?{...g,width:x.width,height:x.height}:x});break}},[e]),a=tv({callback:i}),o=R.useCallback(h=>{const f=b5(h);a?.disconnect(),f&&a?.observe(f),s(f?e(f):null)},[e,a]),[c,u]=hy(o);return R.useMemo(()=>({nodeRef:c,rect:t,setRef:u}),[t,c,u])}const PK=[{sensor:Xu,options:{}},{sensor:eN,options:{}}],OK={current:{}},Hb={draggable:{measure:U_},droppable:{measure:U_,strategy:l0.WhileDragging,frequency:b2.Optimized},dragOverlay:{measure:Jm}};class Up extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,s;return(t=(s=this.get(e))==null?void 0:s.node.current)!=null?t:void 0}}const LK={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Up,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:py},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Hb,measureDroppableContainers:py,windowRect:null,measuringScheduled:!1},y5={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:py,draggableNodes:new Map,over:null,measureDroppableContainers:py},z0=R.createContext(y5),v5=R.createContext(LK);function FK(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Up}}}function zK(n,e){switch(e.type){case Li.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Li.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case Li.DragEnd:case Li.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Li.RegisterDroppable:{const{element:t}=e,{id:s}=t,i=new Up(n.droppable.containers);return i.set(s,t),{...n,droppable:{...n.droppable,containers:i}}}case Li.SetDroppableDisabled:{const{id:t,key:s,disabled:i}=e,a=n.droppable.containers.get(t);if(!a||s!==a.key)return n;const o=new Up(n.droppable.containers);return o.set(t,{...a,disabled:i}),{...n,droppable:{...n.droppable,containers:o}}}case Li.UnregisterDroppable:{const{id:t,key:s}=e,i=n.droppable.containers.get(t);if(!i||s!==i.key)return n;const a=new Up(n.droppable.containers);return a.delete(t),{...n,droppable:{...n.droppable,containers:a}}}default:return n}}function IK(n){let{disabled:e}=n;const{active:t,activatorEvent:s,draggableNodes:i}=R.useContext(z0),a=fy(s),o=fy(t?.id);return R.useEffect(()=>{if(!e&&!s&&a&&o!=null){if(!$y(a)||document.activeElement===a.target)return;const c=i.get(o);if(!c)return;const{activatorNode:u,node:h}=c;if(!u.current&&!h.current)return;requestAnimationFrame(()=>{for(const f of[u.current,h.current]){if(!f)continue;const g=OX(f);if(g){g.focus();break}}})}},[s,e,i,o,a]),null}function w5(n,e){let{transform:t,...s}=e;return n!=null&&n.length?n.reduce((i,a)=>a({transform:i,...s}),t):t}function BK(n){return R.useMemo(()=>({draggable:{...Hb.draggable,...n?.draggable},droppable:{...Hb.droppable,...n?.droppable},dragOverlay:{...Hb.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function HK(n){let{activeNode:e,measure:t,initialRect:s,config:i=!0}=n;const a=R.useRef(!1),{x:o,y:c}=typeof i=="boolean"?{x:i,y:i}:i;Nl(()=>{if(!o&&!c||!e){a.current=!1;return}if(a.current||!s)return;const h=e?.node.current;if(!h||h.isConnected===!1)return;const f=t(h),g=o5(f,s);if(o||(g.x=0),c||(g.y=0),a.current=!0,Math.abs(g.x)>0||Math.abs(g.y)>0){const x=c5(h);x&&x.scrollBy({top:g.y,left:g.x})}},[e,o,c,s,t])}const nv=R.createContext({...Al,scaleX:1,scaleY:1});var ju;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(ju||(ju={}));const Qm=R.memo(function(e){var t,s,i,a;let{id:o,accessibility:c,autoScroll:u=!0,children:h,sensors:f=PK,collisionDetection:g=QX,measuring:x,modifiers:w,...A}=e;const C=R.useReducer(zK,void 0,FK),[E,T]=C,[D,M]=HX(),[L,I]=R.useState(ju.Uninitialized),W=L===ju.Initialized,{draggable:{active:V,nodes:Y,translate:K},droppable:{containers:q}}=E,ne=V!=null?Y.get(V):null,le=R.useRef({initial:null,translated:null}),_e=R.useMemo(()=>{var ke;return V!=null?{id:V,data:(ke=ne?.data)!=null?ke:OK,rect:le}:null},[V,ne]),xe=R.useRef(null),[je,U]=R.useState(null),[H,ee]=R.useState(null),he=o0(A,Object.values(A)),ce=F0("DndDescribedBy",o),G=R.useMemo(()=>q.getEnabled(),[q]),ue=BK(x),{droppableRects:Se,measureDroppableContainers:fe,measuringScheduled:Ae}=NK(G,{dragging:W,dependencies:[K.x,K.y],config:ue.droppable}),Pe=wK(Y,V),Ve=R.useMemo(()=>H?gy(H):null,[H]),Nt=ie(),ht=AK(Pe,ue.draggable.measure);HK({activeNode:V!=null?Y.get(V):null,config:Nt.layoutShiftCompensation,initialRect:ht,measure:ue.draggable.measure});const mt=X_(Pe,ue.draggable.measure,ht),Qe=X_(Pe?Pe.parentElement:null),Kt=R.useRef({activatorEvent:null,active:null,activeNode:Pe,collisionRect:null,collisions:null,droppableRects:Se,draggableNodes:Y,draggingNode:null,draggingNodeRect:null,droppableContainers:q,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ke=q.getNodeFor((t=Kt.current.over)==null?void 0:t.id),at=MK({measure:ue.dragOverlay.measure}),ft=(s=at.nodeRef.current)!=null?s:Pe,Gt=W?(i=at.rect)!=null?i:mt:null,He=!!(at.nodeRef.current&&at.rect),Je=TK(He?null:mt),Ie=x5(ft?Ka(ft):null),tt=_K(W?Ke??Pe:null),De=DK(tt),Fe=w5(w,{transform:{x:K.x-Je.x,y:K.y-Je.y,scaleX:1,scaleY:1},activatorEvent:H,active:_e,activeNodeRect:mt,containerNodeRect:Qe,draggingNodeRect:Gt,over:Kt.current.over,overlayNodeRect:at.rect,scrollableAncestors:tt,scrollableAncestorRects:De,windowRect:Ie}),$e=Ve?fm(Ve,K):null,nt=jK(tt),qe=Z_(nt),St=Z_(nt,[mt]),un=fm(Fe,qe),an=Gt?eK(Gt,Fe):null,Lt=_e&&an?g({active:_e,collisionRect:an,droppableRects:Se,droppableContainers:G,pointerCoordinates:$e}):null,ts=ZX(Lt,"id"),[ns,vi]=R.useState(null),Ps=He?Fe:fm(Fe,St),yn=qX(Ps,(a=ns?.rect)!=null?a:null,mt),ss=R.useRef(null),Fn=R.useCallback((ke,Ge)=>{let{sensor:Ze,options:pt}=Ge;if(xe.current==null)return;const st=Y.get(xe.current);if(!st)return;const Ut=ke.nativeEvent,rn=new Ze({active:xe.current,activeNode:st,event:Ut,options:pt,context:Kt,onAbort(ps){if(!Y.get(ps))return;const{onDragAbort:Vs}=he.current,wn={id:ps};Vs?.(wn),D({type:"onDragAbort",event:wn})},onPending(ps,wi,Vs,wn){if(!Y.get(ps))return;const{onDragPending:fn}=he.current,Bi={id:ps,constraint:wi,initialCoordinates:Vs,offset:wn};fn?.(Bi),D({type:"onDragPending",event:Bi})},onStart(ps){const wi=xe.current;if(wi==null)return;const Vs=Y.get(wi);if(!Vs)return;const{onDragStart:wn}=he.current,xs={activatorEvent:Ut,active:{id:wi,data:Vs.data,rect:le}};Hh.unstable_batchedUpdates(()=>{wn?.(xs),I(ju.Initializing),T({type:Li.DragStart,initialCoordinates:ps,active:wi}),D({type:"onDragStart",event:xs}),U(ss.current),ee(Ut)})},onMove(ps){T({type:Li.DragMove,coordinates:ps})},onEnd:dt(Li.DragEnd),onCancel:dt(Li.DragCancel)});ss.current=rn;function dt(ps){return async function(){const{active:Vs,collisions:wn,over:xs,scrollAdjustedTranslate:fn}=Kt.current;let Bi=null;if(Vs&&fn){const{cancelDrop:bs}=he.current;Bi={activatorEvent:Ut,active:Vs,collisions:wn,delta:fn,over:xs},ps===Li.DragEnd&&typeof bs=="function"&&await Promise.resolve(bs(Bi))&&(ps=Li.DragCancel)}xe.current=null,Hh.unstable_batchedUpdates(()=>{T({type:ps}),I(ju.Uninitialized),vi(null),U(null),ee(null),ss.current=null;const bs=ps===Li.DragEnd?"onDragEnd":"onDragCancel";if(Bi){const $t=he.current[bs];$t?.(Bi),D({type:bs,event:Bi})}})}}},[Y]),da=R.useCallback((ke,Ge)=>(Ze,pt)=>{const st=Ze.nativeEvent,Ut=Y.get(pt);if(xe.current!==null||!Ut||st.dndKit||st.defaultPrevented)return;const rn={active:Ut};ke(Ze,Ge.options,rn)===!0&&(st.dndKit={capturedBy:Ge.sensor},xe.current=pt,Fn(Ze,Ge))},[Y,Fn]),ua=SK(f,da);kK(f),Nl(()=>{mt&&L===ju.Initializing&&I(ju.Initialized)},[mt,L]),R.useEffect(()=>{const{onDragMove:ke}=he.current,{active:Ge,activatorEvent:Ze,collisions:pt,over:st}=Kt.current;if(!Ge||!Ze)return;const Ut={active:Ge,activatorEvent:Ze,collisions:pt,delta:{x:un.x,y:un.y},over:st};Hh.unstable_batchedUpdates(()=>{ke?.(Ut),D({type:"onDragMove",event:Ut})})},[un.x,un.y]),R.useEffect(()=>{const{active:ke,activatorEvent:Ge,collisions:Ze,droppableContainers:pt,scrollAdjustedTranslate:st}=Kt.current;if(!ke||xe.current==null||!Ge||!st)return;const{onDragOver:Ut}=he.current,rn=pt.get(ts),dt=rn&&rn.rect.current?{id:rn.id,rect:rn.rect.current,data:rn.data,disabled:rn.disabled}:null,ps={active:ke,activatorEvent:Ge,collisions:Ze,delta:{x:st.x,y:st.y},over:dt};Hh.unstable_batchedUpdates(()=>{vi(dt),Ut?.(ps),D({type:"onDragOver",event:ps})})},[ts]),Nl(()=>{Kt.current={activatorEvent:H,active:_e,activeNode:Pe,collisionRect:an,collisions:Lt,droppableRects:Se,draggableNodes:Y,draggingNode:ft,draggingNodeRect:Gt,droppableContainers:q,over:ns,scrollableAncestors:tt,scrollAdjustedTranslate:un},le.current={initial:Gt,translated:an}},[_e,Pe,Lt,an,Y,ft,Gt,Se,q,ns,tt,un]),bK({...Nt,delta:K,draggingRect:an,pointerCoordinates:$e,scrollableAncestors:tt,scrollableAncestorRects:De});const hn=R.useMemo(()=>({active:_e,activeNode:Pe,activeNodeRect:mt,activatorEvent:H,collisions:Lt,containerNodeRect:Qe,dragOverlay:at,draggableNodes:Y,droppableContainers:q,droppableRects:Se,over:ns,measureDroppableContainers:fe,scrollableAncestors:tt,scrollableAncestorRects:De,measuringConfiguration:ue,measuringScheduled:Ae,windowRect:Ie}),[_e,Pe,mt,H,Lt,Qe,at,Y,q,Se,ns,fe,tt,De,ue,Ae,Ie]),vn=R.useMemo(()=>({activatorEvent:H,activators:ua,active:_e,activeNodeRect:mt,ariaDescribedById:{draggable:ce},dispatch:T,draggableNodes:Y,over:ns,measureDroppableContainers:fe}),[H,ua,_e,mt,T,ce,Y,ns,fe]);return gt.createElement(a5.Provider,{value:M},gt.createElement(z0.Provider,{value:vn},gt.createElement(v5.Provider,{value:hn},gt.createElement(nv.Provider,{value:yn},h)),gt.createElement(IK,{disabled:c?.restoreFocus===!1})),gt.createElement(WX,{...c,hiddenTextDescribedById:ce}));function ie(){const ke=je?.autoScrollEnabled===!1,Ge=typeof u=="object"?u.enabled===!1:u===!1,Ze=W&&!ke&&!Ge;return typeof u=="object"?{...u,enabled:Ze}:{enabled:Ze}}}),UK=R.createContext(null),Q_="button",VK="Draggable";function sv(n){let{id:e,data:t,disabled:s=!1,attributes:i}=n;const a=F0(VK),{activators:o,activatorEvent:c,active:u,activeNodeRect:h,ariaDescribedById:f,draggableNodes:g,over:x}=R.useContext(z0),{role:w=Q_,roleDescription:A="draggable",tabIndex:C=0}=i??{},E=u?.id===e,T=R.useContext(E?nv:UK),[D,M]=hy(),[L,I]=hy(),W=RK(o,e),V=o0(t);Nl(()=>(g.set(e,{id:e,key:a,node:D,activatorNode:L,data:V}),()=>{const K=g.get(e);K&&K.key===a&&g.delete(e)}),[g,e]);const Y=R.useMemo(()=>({role:w,tabIndex:C,"aria-disabled":s,"aria-pressed":E&&w===Q_?!0:void 0,"aria-roledescription":A,"aria-describedby":f.draggable}),[s,w,C,E,A,f.draggable]);return{active:u,activatorEvent:c,activeNodeRect:h,attributes:Y,isDragging:E,listeners:s?void 0:W,node:D,over:x,setNodeRef:M,setActivatorNodeRef:I,transform:T}}function S5(){return R.useContext(v5)}const WK="Droppable",GK={timeout:25};function sN(n){let{data:e,disabled:t=!1,id:s,resizeObserverConfig:i}=n;const a=F0(WK),{active:o,dispatch:c,over:u,measureDroppableContainers:h}=R.useContext(z0),f=R.useRef({disabled:t}),g=R.useRef(!1),x=R.useRef(null),w=R.useRef(null),{disabled:A,updateMeasurementsFor:C,timeout:E}={...GK,...i},T=o0(C??s),D=R.useCallback(()=>{if(!g.current){g.current=!0;return}w.current!=null&&clearTimeout(w.current),w.current=setTimeout(()=>{h(Array.isArray(T.current)?T.current:[T.current]),w.current=null},E)},[E]),M=tv({callback:D,disabled:A||!o}),L=R.useCallback((Y,K)=>{M&&(K&&(M.unobserve(K),g.current=!1),Y&&M.observe(Y))},[M]),[I,W]=hy(L),V=o0(e);return R.useEffect(()=>{!M||!I.current||(M.disconnect(),g.current=!1,M.observe(I.current))},[I,M]),R.useEffect(()=>(c({type:Li.RegisterDroppable,element:{id:s,key:a,disabled:t,node:I,rect:x,data:V}}),()=>c({type:Li.UnregisterDroppable,key:a,id:s})),[s]),R.useEffect(()=>{t!==f.current.disabled&&(c({type:Li.SetDroppableDisabled,id:s,key:a,disabled:t}),f.current.disabled=t)},[s,a,t,c]),{active:o,rect:x,isOver:u?.id===s,node:I,over:u,setNodeRef:W}}function YK(n){let{animation:e,children:t}=n;const[s,i]=R.useState(null),[a,o]=R.useState(null),c=fy(t);return!t&&!s&&c&&i(c),Nl(()=>{if(!a)return;const u=s?.key,h=s?.props.id;if(u==null||h==null){i(null);return}Promise.resolve(e(h,a)).then(()=>{i(null)})},[e,s,a]),gt.createElement(gt.Fragment,null,t,s?R.cloneElement(s,{ref:o}):null)}const XK={x:0,y:0,scaleX:1,scaleY:1};function KK(n){let{children:e}=n;return gt.createElement(z0.Provider,{value:y5},gt.createElement(nv.Provider,{value:XK},e))}const ZK={position:"fixed",touchAction:"none"},JK=n=>$y(n)?"transform 250ms ease":void 0,QK=R.forwardRef((n,e)=>{let{as:t,activatorEvent:s,adjustScale:i,children:a,className:o,rect:c,style:u,transform:h,transition:f=JK}=n;if(!c)return null;const g=i?h:{...h,scaleX:1,scaleY:1},x={...ZK,width:c.width,height:c.height,top:c.top,left:c.left,transform:Sc.Transform.toString(g),transformOrigin:i&&s?YX(s,c):void 0,transition:typeof f=="function"?f(s):f,...u};return gt.createElement(t,{className:o,style:x,ref:e},a)}),qK=n=>e=>{let{active:t,dragOverlay:s}=e;const i={},{styles:a,className:o}=n;if(a!=null&&a.active)for(const[c,u]of Object.entries(a.active))u!==void 0&&(i[c]=t.node.style.getPropertyValue(c),t.node.style.setProperty(c,u));if(a!=null&&a.dragOverlay)for(const[c,u]of Object.entries(a.dragOverlay))u!==void 0&&s.node.style.setProperty(c,u);return o!=null&&o.active&&t.node.classList.add(o.active),o!=null&&o.dragOverlay&&s.node.classList.add(o.dragOverlay),function(){for(const[u,h]of Object.entries(i))t.node.style.setProperty(u,h);o!=null&&o.active&&t.node.classList.remove(o.active)}},$K=n=>{let{transform:{initial:e,final:t}}=n;return[{transform:Sc.Transform.toString(e)},{transform:Sc.Transform.toString(t)}]},eZ={duration:250,easing:"ease",keyframes:$K,sideEffects:qK({styles:{active:{opacity:"0"}}})};function tZ(n){let{config:e,draggableNodes:t,droppableContainers:s,measuringConfiguration:i}=n;return qy((a,o)=>{if(e===null)return;const c=t.get(a);if(!c)return;const u=c.node.current;if(!u)return;const h=b5(o);if(!h)return;const{transform:f}=Ka(o).getComputedStyle(o),g=l5(f);if(!g)return;const x=typeof e=="function"?e:nZ(e);return g5(u,i.draggable.measure),x({active:{id:a,data:c.data,node:u,rect:i.draggable.measure(u)},draggableNodes:t,dragOverlay:{node:o,rect:i.dragOverlay.measure(h)},droppableContainers:s,measuringConfiguration:i,transform:g})})}function nZ(n){const{duration:e,easing:t,sideEffects:s,keyframes:i}={...eZ,...n};return a=>{let{active:o,dragOverlay:c,transform:u,...h}=a;if(!e)return;const f={x:c.rect.left-o.rect.left,y:c.rect.top-o.rect.top},g={scaleX:u.scaleX!==1?o.rect.width*u.scaleX/c.rect.width:1,scaleY:u.scaleY!==1?o.rect.height*u.scaleY/c.rect.height:1},x={x:u.x-f.x,y:u.y-f.y,...g},w=i({...h,active:o,dragOverlay:c,transform:{initial:u,final:x}}),[A]=w,C=w[w.length-1];if(JSON.stringify(A)===JSON.stringify(C))return;const E=s?.({active:o,dragOverlay:c,...h}),T=c.node.animate(w,{duration:e,easing:t,fill:"forwards"});return new Promise(D=>{T.onfinish=()=>{E?.(),D()}})}}let q_=0;function sZ(n){return R.useMemo(()=>{if(n!=null)return q_++,q_},[n])}const iv=gt.memo(n=>{let{adjustScale:e=!1,children:t,dropAnimation:s,style:i,transition:a,modifiers:o,wrapperElement:c="div",className:u,zIndex:h=999}=n;const{activatorEvent:f,active:g,activeNodeRect:x,containerNodeRect:w,draggableNodes:A,droppableContainers:C,dragOverlay:E,over:T,measuringConfiguration:D,scrollableAncestors:M,scrollableAncestorRects:L,windowRect:I}=S5(),W=R.useContext(nv),V=sZ(g?.id),Y=w5(o,{activatorEvent:f,active:g,activeNodeRect:x,containerNodeRect:w,draggingNodeRect:E.rect,over:T,overlayNodeRect:E.rect,scrollableAncestors:M,scrollableAncestorRects:L,transform:W,windowRect:I}),K=nN(x),q=tZ({config:s,draggableNodes:A,droppableContainers:C,measuringConfiguration:D}),ne=K?E.setRef:void 0;return gt.createElement(KK,null,gt.createElement(YK,{animation:q},g&&V?gt.createElement(QK,{key:V,id:g.id,ref:ne,as:c,activatorEvent:f,adjustScale:e,className:u,transition:a,rect:K,style:{zIndex:h,...i},transform:Y},t):null))}),Aa=({title:n,icon:e,isOpen:t,isComplete:s,onClick:i,children:a})=>r.jsxs("div",{className:"border-b border-slate-100 last:border-none",children:[r.jsxs("button",{onClick:i,className:`w-full flex items-center justify-between p-4 transition-all duration-200 ${t?"bg-indigo-50/50 text-indigo-700":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"}`,children:[r.jsxs("div",{className:"flex items-center gap-3 font-semibold text-sm",children:[e&&r.jsx(e,{size:18,className:`transition-colors duration-200 ${t?"text-indigo-600":s?"text-emerald-500":"text-slate-400 group-hover:text-slate-500"}`}),r.jsx("span",{children:n})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[s&&r.jsx(HD,{size:16,className:"text-emerald-500"}),r.jsx(ze.div,{animate:{rotate:t?180:0},transition:{duration:.2},children:r.jsx(Im,{size:16})})]})]}),r.jsx(Zn,{initial:!1,children:t&&r.jsx(ze.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:r.jsx("div",{className:"p-4 pt-0 space-y-4",children:a})})})]}),Ot=({label:n,name:e,value:t,onChange:s,placeholder:i,type:a="text",rows:o,className:c=""})=>r.jsxs("div",{className:c,children:[r.jsx("label",{className:"block text-[11px] font-bold text-slate-500 uppercase tracking-wider mb-1.5",children:n}),o?r.jsx("textarea",{name:e,value:t||"",onChange:s,placeholder:i,rows:o,className:"w-full px-3 py-2.5 bg-white border border-slate-200 rounded-lg text-sm text-slate-700 shadow-sm focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all duration-200 placeholder-slate-400 resize-y hover:border-slate-300"}):r.jsx("input",{type:a,name:e,value:t||"",onChange:s,placeholder:i,className:"w-full px-3 py-2.5 bg-white border border-slate-200 rounded-lg text-sm text-slate-700 shadow-sm focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 outline-none transition-all duration-200 placeholder-slate-400 hover:border-slate-300"})]}),sf=({section:n,onUpdate:e,onRemove:t,isFixed:s=!1,placeholderTitle:i="Section Title",placeholderContent:a="Content...",children:o})=>{const[c,u]=R.useState(!0);return r.jsxs("div",{className:"group relative pl-4",children:[r.jsx("div",{className:"absolute left-[7px] top-8 bottom-[-8px] w-[2px] bg-slate-100 group-last:hidden"}),r.jsx("div",{className:"absolute left-0 top-6 w-4 h-4 rounded-full border-2 border-indigo-100 bg-white z-10 flex items-center justify-center",children:r.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${s?"bg-slate-300":"bg-indigo-500"}`})}),r.jsxs("div",{className:`bg-white border rounded-xl shadow-sm transition-all duration-200 ${c?"border-indigo-200 shadow-md ring-1 ring-indigo-500/10":"border-slate-200 hover:border-indigo-300"}`,children:[r.jsxs("div",{className:"flex items-center gap-3 p-3 select-none",children:[!s&&r.jsx("div",{className:"cursor-grab active:cursor-grabbing text-slate-300 hover:text-indigo-500 transition-colors p-1",children:r.jsx(By,{size:18})}),r.jsx("button",{onClick:()=>u(!c),className:"p-1 text-slate-400 hover:text-indigo-600 rounded-md hover:bg-indigo-50 transition-colors",children:c?r.jsx(Im,{size:18}):r.jsx(gl,{size:18})}),r.jsx("div",{className:"flex-1 min-w-0",children:s?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-slate-500",children:n.title}),r.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-400 border border-slate-200",children:"FIXED"})]}):r.jsx("input",{type:"text",value:n.title||"",onChange:h=>e("title",h.target.value),placeholder:i,className:"w-full bg-transparent text-sm font-bold text-slate-800 placeholder-slate-300 focus:outline-none focus:placeholder-slate-400",onClick:h=>h.stopPropagation()})}),!s&&r.jsx("button",{onClick:t,className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all opacity-0 group-hover:opacity-100",title:"Remove Section",children:r.jsx(ko,{size:16})})]}),r.jsx(Zn,{children:c&&r.jsx(ze.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:r.jsx("div",{className:"p-3 pt-0 border-t border-slate-50",children:s?o:r.jsx("textarea",{value:n.content||"",onChange:h=>e("content",h.target.value),rows:4,className:"w-full mt-3 p-3 text-sm text-slate-600 bg-slate-50 border border-slate-100 rounded-lg focus:bg-white focus:border-indigo-300 focus:ring-4 focus:ring-indigo-500/10 outline-none transition-all resize-y placeholder-slate-300",placeholder:a})})})})]})]})},av=({onClick:n,label:e="Add New Section"})=>r.jsxs("div",{className:"pl-4 relative",children:[r.jsx("div",{className:"absolute left-[7px] top-0 h-8 w-[2px] bg-slate-100"}),r.jsx("div",{className:"absolute left-0 top-8 w-4 h-4 rounded-full border-2 border-indigo-100 bg-indigo-50 z-10 flex items-center justify-center",children:r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-300"})}),r.jsxs("button",{onClick:n,className:"w-full mt-4 py-3 flex items-center justify-center gap-2 bg-white border-2 border-dashed border-slate-200 rounded-xl text-slate-400 font-medium hover:border-indigo-400 hover:text-indigo-600 hover:bg-indigo-50/50 transition-all duration-200 group relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-indigo-50/0 group-hover:bg-indigo-50/30 transition-colors"}),r.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center group-hover:scale-110 transition-transform",children:r.jsx(df,{size:14,strokeWidth:3})}),r.jsx("span",{children:e})]})]}),I0=({formData:n,onChange:e})=>{const t=n.logoSize||70,s=n.logoAlignment||"left",i=n.brandingEnabled!==!1&&n.brandingEnabled!=="false",a=()=>{e({target:{name:"brandingEnabled",value:!i}})},o=u=>{e({target:{name:"logoSize",value:parseInt(u.target.value)}})},c=u=>{e({target:{name:"logoAlignment",value:u}})};return r.jsxs("div",{className:"space-y-4 pt-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide",children:"Show Logo"}),r.jsx("button",{onClick:a,className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none ${i?"bg-indigo-600":"bg-slate-200"}`,children:r.jsx("span",{className:`${i?"translate-x-5":"translate-x-1"} inline-block h-3 w-3 transform rounded-full bg-white transition-transform`})})]}),i&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide",children:"Logo Size"}),r.jsxs("span",{className:"text-xs font-mono text-slate-400",children:[t,"px"]})]}),r.jsx("input",{type:"range",min:"30",max:"200",step:"5",value:t,onChange:o,className:"w-full h-1.5 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500/30"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-2",children:"Position"}),r.jsx("div",{className:"flex bg-slate-100 p-1 rounded-lg",children:[{id:"left",icon:tM,label:"Left"},{id:"center",icon:$D,label:"Center"},{id:"right",icon:eM,label:"Right"}].map(u=>r.jsx("button",{onClick:()=>c(u.id),className:`flex-1 flex items-center justify-center py-1.5 rounded-md transition-all ${s===u.id?"bg-white text-indigo-600 shadow-sm ring-1 ring-slate-200":"text-slate-400 hover:text-slate-600 hover:bg-slate-200/50"}`,title:`Align ${u.label}`,children:r.jsx(u.icon,{size:18})},u.id))})]}),r.jsx("p",{className:"text-[10px] text-slate-400 italic mt-2",children:"* Adjust position based on header layout compatibility."})]})]})},rv=({styles:n,onUpdate:e,onReset:t})=>{const s=[{label:"Modern Sans",value:"font-sans"},{label:"Classic Serif",value:"font-serif"},{label:"Monospace",value:"font-mono"}],i=[{label:"Small (10pt)",value:"text-[10pt]"},{label:"Standard (11pt)",value:"text-[11pt]"},{label:"Large (12pt)",value:"text-[12pt]"}],a=[{label:"Compact",value:"leading-normal"},{label:"Standard",value:"leading-relaxed"},{label:"Loose",value:"leading-loose"}],o=[{label:"Narrow",value:"p-[15mm]"},{label:"Standard",value:"p-[25.4mm]"},{label:"Wide",value:"p-[35mm]"}];return r.jsxs("div",{className:"space-y-6 pt-2",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-wide",children:[r.jsx(uf,{size:14})," Typography"]}),r.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-slate-400 mb-1 block",children:"Font Family"}),r.jsx("select",{value:n.fontFamily,onChange:c=>e("fontFamily",c.target.value),className:"w-full text-sm bg-slate-50 border border-slate-200 rounded-lg p-2 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none",children:s.map(c=>r.jsx("option",{value:c.value,children:c.label},c.value))})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-slate-400 mb-1 block",children:"Size"}),r.jsx("select",{value:n.fontSize,onChange:c=>e("fontSize",c.target.value),className:"w-full text-sm bg-slate-50 border border-slate-200 rounded-lg p-2 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none",children:i.map(c=>r.jsx("option",{value:c.value,children:c.label},c.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-slate-400 mb-1 block",children:"Line Height"}),r.jsx("select",{value:n.lineHeight,onChange:c=>e("lineHeight",c.target.value),className:"w-full text-sm bg-slate-50 border border-slate-200 rounded-lg p-2 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none",children:a.map(c=>r.jsx("option",{value:c.value,children:c.label},c.value))})]})]})]})]}),r.jsx("hr",{className:"border-slate-100"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-wide",children:[r.jsx(lf,{size:14})," Colors"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-slate-400 mb-1 block",children:"Text Color"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"color",value:n.textColor,onChange:c=>e("textColor",c.target.value),className:"h-8 w-8 rounded cursor-pointer border-0 p-0"}),r.jsx("span",{className:"text-xs font-mono text-slate-500",children:n.textColor})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-slate-400 mb-1 block",children:"Accent Color"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"color",value:n.accentColor,onChange:c=>e("accentColor",c.target.value),className:"h-8 w-8 rounded cursor-pointer border-0 p-0"}),r.jsx("span",{className:"text-xs font-mono text-slate-500",children:n.accentColor})]})]})]})]}),r.jsx("hr",{className:"border-slate-100"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-500 uppercase tracking-wide",children:[r.jsx(XD,{size:14})," Layout"]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs text-slate-400 mb-1 block",children:"Page Margins"}),r.jsx("select",{value:n.pageMargin,onChange:c=>e("pageMargin",c.target.value),className:"w-full text-sm bg-slate-50 border border-slate-200 rounded-lg p-2 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none",children:o.map(c=>r.jsx("option",{value:c.value,children:c.label},c.value))})]})]}),r.jsxs("button",{onClick:t,className:"w-full mt-4 flex items-center justify-center gap-2 py-2 text-xs font-medium text-slate-500 hover:text-slate-700 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors border border-slate-200",children:[r.jsx(kS,{size:14})," Reset to Defaults"]})]})},ov=({isOpen:n,onClose:e,onConfirm:t,title:s,message:i,confirmText:a="Confirm",cancelText:o="Cancel",isDestructive:c=!1,isLoading:u=!1})=>r.jsx(Zn,{children:n&&r.jsxs(r.Fragment,{children:[r.jsx(ze.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:u?void 0:e,className:"fixed inset-0 bg-black/40 z-50 backdrop-blur-sm"}),r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:r.jsxs(ze.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},className:"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden",children:[r.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between bg-slate-50/50",children:[r.jsxs("h3",{className:`font-semibold text-lg flex items-center gap-2 ${c?"text-red-600":"text-slate-900"}`,children:[c&&r.jsx(h9,{size:20}),s]}),r.jsx("button",{onClick:e,disabled:u,className:"text-slate-400 hover:text-slate-600 p-1 rounded-lg hover:bg-slate-100 transition-colors disabled:opacity-50",children:r.jsx(ja,{size:20})})]}),r.jsx("div",{className:"p-6",children:r.jsx("p",{className:"text-slate-600 leading-relaxed",children:i})}),r.jsxs("div",{className:"p-4 bg-slate-50 flex items-center justify-end gap-3",children:[r.jsx("button",{onClick:e,disabled:u,className:"px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-800 bg-white border border-slate-200 hover:border-slate-300 rounded-lg shadow-sm transition-all disabled:opacity-50",children:o}),r.jsxs("button",{onClick:t,disabled:u,className:`px-4 py-2 text-sm font-medium text-white rounded-lg shadow-sm transition-all flex items-center gap-2 ${c?"bg-red-600 hover:bg-red-700 focus:ring-2 focus:ring-red-500/20":"bg-indigo-600 hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500/20"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[u&&r.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),a]})]})]})})]})}),iZ=({formData:n,onChange:e,docContent:t,onContentChange:s,addSection:i,removeSection:a,updateSection:o,reorderSections:c,styles:u,onStyleUpdate:h,onStyleReset:f})=>{const[g,x]=R.useState("parties"),[w,A]=R.useState("fill"),[C,E]=R.useState({isOpen:!1,sectionId:null}),T=q=>{x(g===q?null:q)},D=n.effectiveDateDay&&n.effectiveDateMonth&&n.effectiveDateYear,M=n.disclosingPartyName&&n.receivingPartyName&&n.disclosingPartyAddress&&n.receivingPartyAddress,L=!!n.purpose,I=n.termYears&&n.survivalYears&&n.jurisdiction&&n.courtCity,W=n.disclosingSignatoryName&&n.disclosingSignatoryDesignation&&n.receivingSignatoryName&&n.receivingSignatoryDesignation,V=q=>{E({isOpen:!0,sectionId:q})},Y=()=>{C.sectionId&&(a(C.sectionId),E({isOpen:!1,sectionId:null}))},K=async()=>{try{const q=await vr();if(q){e({target:{name:"disclosingPartyName",value:q.name||""}});const ne=[q.address,q.city,q.state,q.country].filter(Boolean).join(", ");e({target:{name:"disclosingPartyAddress",value:ne||""}}),Be.success("Business details populated")}else Be.error("No business profile found")}catch(q){console.error("Failed to fetch business info",q),Be.error("Failed to load business info")}};return r.jsxs("div",{className:"bg-white min-h-full pb-20 relative",children:[r.jsx(ov,{isOpen:C.isOpen,onClose:()=>E({isOpen:!1,sectionId:null}),onConfirm:Y,title:"Delete Section",message:"Are you sure you want to remove this section? This action cannot be undone and will remove the clause from the generated document.",confirmText:"Delete Section",isDestructive:!0}),r.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 sticky top-0 z-10 backdrop-blur-sm",children:[r.jsxs("div",{className:"flex gap-1 bg-slate-200/50 p-1 rounded-lg mb-4",children:[r.jsx("button",{onClick:()=>A("fill"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${w==="fill"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,title:"Fill Details",children:r.jsx(j0,{size:16})}),r.jsx("button",{onClick:()=>A("edit"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${w==="edit"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,title:"Structure Builder",children:r.jsx(k0,{size:16})}),r.jsx("button",{onClick:()=>A("style"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${w==="style"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,title:"Appearance",children:r.jsx(uf,{size:16})})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold text-slate-900",children:w==="fill"?"Document Details":w==="edit"?"Structure Builder":"Styling & Appearance"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:w==="fill"?"Review and specify the agreement terms":w==="edit"?"Customize layout and clauses":"Fonts, colors and spacing"})]})]}),w==="fill"&&r.jsxs(r.Fragment,{children:[r.jsx(Aa,{title:"Effective Date",icon:Gu,isOpen:g==="date",isComplete:D,onClick:()=>T("date"),children:r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsx(Ot,{label:"Day",name:"effectiveDateDay",value:n.effectiveDateDay,onChange:e,placeholder:"DD"}),r.jsx(Ot,{label:"Month",name:"effectiveDateMonth",value:n.effectiveDateMonth,onChange:e,placeholder:"Month"}),r.jsx(Ot,{label:"Year",name:"effectiveDateYear",value:n.effectiveDateYear,onChange:e,placeholder:"YY"})]})}),r.jsx(Aa,{title:"Parties Involved",icon:Mo,isOpen:g==="parties",isComplete:M,onClick:()=>T("parties"),children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-3 bg-indigo-50 rounded-lg border border-indigo-100",children:[r.jsxs("h4",{className:"text-xs font-bold text-indigo-900 uppercase mb-3 flex items-center justify-between",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"})," Disclosing Party"]}),r.jsxs("button",{onClick:K,className:"text-[10px] bg-white border border-indigo-200 text-indigo-600 px-2 py-1 rounded hover:bg-indigo-50 transition-colors flex items-center gap-1",title:"Auto-fill with your business profile",children:[r.jsx(wd,{size:10})," Use Profile"]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Ot,{label:"Name / Company",name:"disclosingPartyName",value:n.disclosingPartyName,onChange:e,placeholder:"Ex: Acme Corp"}),r.jsx(Ot,{label:"Full Address",name:"disclosingPartyAddress",value:n.disclosingPartyAddress,onChange:e,placeholder:"Address",rows:2})]})]}),r.jsxs("div",{className:"p-3 bg-emerald-50 rounded-lg border border-emerald-100",children:[r.jsxs("h4",{className:"text-xs font-bold text-emerald-900 uppercase mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"})," Receiving Party"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Ot,{label:"Name / Company",name:"receivingPartyName",value:n.receivingPartyName,onChange:e,placeholder:"Ex: John Doe"}),r.jsx(Ot,{label:"Full Address",name:"receivingPartyAddress",value:n.receivingPartyAddress,onChange:e,placeholder:"Address",rows:2})]})]})]})}),r.jsx(Aa,{title:"Document Branding",icon:lf,isOpen:g==="branding",isComplete:!0,onClick:()=>T("branding"),children:r.jsx(I0,{formData:n,onChange:e})}),r.jsx(Aa,{title:"Purpose Scope",icon:ls,isOpen:g==="purpose",isComplete:L,onClick:()=>T("purpose"),children:r.jsx(Ot,{label:"Description of Purpose",name:"purpose",value:n.purpose,onChange:e,placeholder:"Describe why information is being shared (e.g., potential partnership, investment evaluation)...",rows:6})}),r.jsxs(Aa,{title:"Terms & Jurisdiction",icon:_S,isOpen:g==="terms",isComplete:I,onClick:()=>T("terms"),children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(Ot,{label:"Term (Years)",name:"termYears",value:n.termYears,onChange:e,placeholder:"2"}),r.jsx(Ot,{label:"Survival (Years)",name:"survivalYears",value:n.survivalYears,onChange:e,placeholder:"5"})]}),r.jsx("div",{className:"h-px bg-slate-100 my-2"}),r.jsx(Ot,{label:"Jurisdiction",name:"jurisdiction",value:n.jurisdiction,onChange:e,placeholder:"State/Country (e.g. California)"}),r.jsx(Ot,{label:"Court Location",name:"courtCity",value:n.courtCity,onChange:e,placeholder:"City (e.g. San Francisco)"})]}),r.jsx(Aa,{title:"Signatories",icon:cf,isOpen:g==="signatures",isComplete:W,onClick:()=>T("signatures"),children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-bold text-slate-400 mb-2 uppercase",children:"For Disclosing Party"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Ot,{label:"Name",name:"disclosingSignatoryName",value:n.disclosingSignatoryName,onChange:e,placeholder:"Name"}),r.jsx(Ot,{label:"Title",name:"disclosingSignatoryDesignation",value:n.disclosingSignatoryDesignation,onChange:e,placeholder:"Title"})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-bold text-slate-400 mb-2 uppercase",children:"For Receiving Party"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Ot,{label:"Name",name:"receivingSignatoryName",value:n.receivingSignatoryName,onChange:e,placeholder:"Name"}),r.jsx(Ot,{label:"Title",name:"receivingSignatoryDesignation",value:n.receivingSignatoryDesignation,onChange:e,placeholder:"Title"})]})]})]})})]}),w==="edit"&&r.jsxs("div",{className:"p-4 space-y-6 pb-20",children:[r.jsx(sf,{isFixed:!0,section:{title:"Preamble & Parties"},onUpdate:()=>{},children:r.jsxs("div",{className:"space-y-3 mt-3",children:[r.jsx("textarea",{name:"preamble",value:t.preamble||"",onChange:s,rows:3,className:"w-full text-xs p-3 rounded-lg border border-slate-200 bg-slate-50 focus:bg-white focus:border-indigo-300 focus:ring-4 focus:ring-indigo-500/10 outline-none transition-all resize-y placeholder-slate-400",placeholder:"Preamble..."}),r.jsxs("div",{className:"grid gap-3",children:[r.jsx("textarea",{name:"partiesDisclosing",value:t.partiesDisclosing||"",onChange:s,rows:2,className:"w-full text-xs p-3 rounded-lg border border-slate-200 bg-slate-50 focus:bg-white focus:border-indigo-300 focus:ring-4 focus:ring-indigo-500/10 outline-none transition-all resize-y placeholder-slate-400",placeholder:"Disclosing Party Clause..."}),r.jsx("textarea",{name:"partiesReceiving",value:t.partiesReceiving||"",onChange:s,rows:2,className:"w-full text-xs p-3 rounded-lg border border-slate-200 bg-slate-50 focus:bg-white focus:border-indigo-300 focus:ring-4 focus:ring-indigo-500/10 outline-none transition-all resize-y placeholder-slate-400",placeholder:"Receiving Party Clause..."})]})]})}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute left-[7px] top-[-24px] bottom-0 w-[2px] bg-slate-100"}),r.jsx("p",{className:"font-bold text-[10px] uppercase tracking-widest text-slate-400 pl-8 mb-4",children:"Structure"}),r.jsx(zy,{axis:"y",values:t.sections,onReorder:c,className:"space-y-0",children:t.sections.map(q=>r.jsx(Iy,{value:q,className:"relative mb-2",children:r.jsx(sf,{section:q,onUpdate:(ne,le)=>o(q.id,ne,le),onRemove:()=>V(q.id),placeholderTitle:"Section Title",placeholderContent:"Section clauses..."})},q.id))}),r.jsx(av,{onClick:i})]})]}),w==="style"&&r.jsx("div",{className:"p-4 pb-20",children:r.jsx(rv,{styles:u,onUpdate:h,onReset:f})})]})},N5=({style:n,data:e,isSelected:t,isDragging:s,onEdit:i,onDelete:a,listeners:o,attributes:c,setNodeRef:u,readOnly:h=!1})=>r.jsxs("div",{ref:u,style:n,className:`
                group flex items-center gap-2 bg-white/95 backdrop-blur-md 
                border shadow-sm transition-all duration-200 py-1.5 px-3 rounded-full
                ${t&&!h?"border-indigo-500 shadow-indigo-100 ring-2 ring-indigo-500/20":"border-slate-300"}
                ${h?"cursor-default":"hover:border-indigo-400 hover:shadow-md cursor-grab"}
                ${s?"opacity-50 cursor-grabbing":""}
                w-auto min-w-[100px] max-w-[220px] select-none
            `,...o,...c,onClick:f=>{h||(f.preventDefault(),f.stopPropagation(),i&&i())},children:[!h&&r.jsx("div",{className:`text-slate-400 ${t?"text-indigo-400":""}`,children:r.jsx(By,{size:14})}),r.jsx("span",{className:`text-xs font-semibold truncate select-none ${t&&!h?"text-indigo-700":"text-slate-700"}`,children:e.signeeName||"Signer"}),!h&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-px h-3 bg-slate-200 mx-0.5"}),r.jsxs("div",{className:"flex items-center gap-0.5 relative z-20",children:[r.jsx("button",{onPointerDown:f=>f.stopPropagation(),onMouseDown:f=>f.stopPropagation(),onTouchStart:f=>f.stopPropagation(),onClick:f=>{f.stopPropagation(),f.preventDefault(),i&&i()},className:"p-1 hover:bg-slate-100 rounded-full text-slate-400 hover:text-indigo-600 transition-colors cursor-pointer",children:r.jsx(KD,{size:12})}),r.jsx("button",{onPointerDown:f=>f.stopPropagation(),onMouseDown:f=>f.stopPropagation(),onTouchStart:f=>f.stopPropagation(),onClick:f=>{f.stopPropagation(),f.preventDefault(),a&&a()},className:"p-1 hover:bg-slate-100 rounded-full text-slate-400 hover:text-red-500 transition-colors cursor-pointer",children:r.jsx(ko,{size:12})})]})]}),e.order&&r.jsx("div",{className:"absolute -top-1.5 -right-1.5 w-4 h-4 bg-indigo-600 text-white text-[9px] font-bold flex items-center justify-center rounded-full shadow-sm border border-white z-10 pointer-events-none",children:e.order})]}),A5=({id:n,data:e,left:t,top:s,onEdit:i,onDelete:a,isSelected:o,readOnly:c=!1})=>{const{attributes:u,listeners:h,setNodeRef:f,transform:g,isDragging:x}=sv({id:n,data:{...e,type:"signature-field",id:n},disabled:c}),w={transform:Sc.Translate.toString(g),left:`${t}%`,top:`${s}%`,position:"absolute",zIndex:x?999:o?50:10,touchAction:"none"};return r.jsx(N5,{style:w,data:e,isSelected:o,isDragging:x,onEdit:i,onDelete:a,listeners:h,attributes:u,setNodeRef:f,readOnly:c})},C5=({signatures:n,onUpdateSignature:e,onRemoveSignature:t,onEditSignature:s})=>{const{setNodeRef:i}=sN({id:"document-canvas"});return r.jsx("div",{ref:i,className:"absolute inset-0 z-20 pointer-events-none",children:n.map(a=>r.jsx("div",{className:"pointer-events-auto",children:r.jsx(A5,{id:a.id,data:a.metadata,left:a.position.x,top:a.position.y,onEdit:()=>s(a),onDelete:()=>t(a.id)})},a.id))})};function by({data:n,content:e,zoom:t=1,printing:s=!1,readOnly:i=!1,signatures:a=[],onUpdateSignature:o,onRemoveSignature:c,onEditSignature:u,businessLogo:h,styles:f}){const g=T=>{if(!T)return"bg-slate-100 text-slate-600 border-slate-200";const D=["bg-indigo-50 text-indigo-700 border-indigo-200","bg-emerald-50 text-emerald-700 border-emerald-200","bg-amber-50 text-amber-700 border-amber-200","bg-rose-50 text-rose-700 border-rose-200","bg-violet-50 text-violet-700 border-violet-200","bg-sky-50 text-sky-700 border-sky-200"];let M=0;for(let L=0;L<T.length;L++)M=T.charCodeAt(L)+((M<<5)-M);return D[Math.abs(M)%D.length]},x=({value:T,placeholder:D,name:M,className:L=""})=>{const I=g(M);return T?i||s?r.jsx("span",{className:`font-medium text-slate-900 ${L}`,children:T}):r.jsx("span",{className:`px-1.5 py-0.5 rounded border ${I} font-medium mx-0.5 transition-all hover:brightness-95 ${L}`,children:T}):i||s?r.jsx("span",{className:`text-slate-500 italic ${L}`,children:D}):r.jsx("span",{className:`px-1.5 py-0.5 rounded border border-dashed ${I} bg-opacity-50 font-medium text-xs mx-0.5 ${L}`,children:D})},w=({template:T,values:D})=>{if(!T)return null;const M=T.split(/(\{\{[^}]+\}\})/g);return r.jsx("span",{children:M.map((L,I)=>{if(L.startsWith("{{")&&L.endsWith("}}")){const W=L.slice(2,-2).trim();return r.jsx(x,{value:D[W],name:W,placeholder:`[${W}]`},I)}return r.jsx("span",{children:L},I)})})},A=f||{fontFamily:"font-serif",fontSize:"text-[11pt]",lineHeight:"leading-relaxed",textColor:"#1e293b",pageMargin:"p-[25mm]"},C=s?"div":ze.div,E=s?"div":ze.section;return r.jsxs(C,{id:"printable-document",...s?{}:{initial:{opacity:0,y:20},animate:{opacity:1,y:0}},style:{transform:s?"none":`scale(${t})`,transformOrigin:"top center",color:A.textColor},className:`w-[210mm] min-h-[297mm] bg-white relative mb-20 origin-top 
                ${s?"":"shadow-[0_8px_30px_rgb(0,0,0,0.12)] border border-slate-200/60"}
                ${A.fontFamily} ${A.fontSize} ${A.lineHeight} ${A.pageMargin}
            `,children:[!s&&r.jsx("div",{className:"no-print absolute inset-0 rounded-sm pointer-events-none bg-gradient-to-b from-white to-slate-50/20"}),!s&&!i&&r.jsx(C5,{signatures:a,onUpdateSignature:o,onRemoveSignature:c,onEditSignature:u}),(s||i)&&a.length>0&&r.jsx("div",{className:"absolute inset-0 z-50 pointer-events-none",children:a.map(T=>r.jsxs("div",{style:{position:"absolute",left:`${T.position.x}px`,top:`${T.position.y}px`,width:"200px",height:"60px",borderBottom:"1px solid #000",display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:[r.jsx("div",{style:{fontFamily:"cursive",fontSize:"14pt",color:"#1e3a8a",marginBottom:"4px"},children:T.metadata.signeeName||"Sign Here"}),r.jsx("div",{style:{fontSize:"8pt",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:T.metadata.type==="date"?"Date":"Authorized Signature"}),T.metadata.signeeEmail&&r.jsx("div",{style:{fontSize:"7pt",color:"#94a3b8",position:"absolute",bottom:"-14px",left:"0"},children:T.metadata.signeeEmail})]},T.id))}),r.jsxs("div",{className:"p-[10mm] relative z-10",children:[h&&n.brandingEnabled!==!1&&n.brandingEnabled!=="false"&&r.jsx("div",{className:`flex mb-8 ${n.logoAlignment==="left"?"justify-start":n.logoAlignment==="right"?"justify-end":"justify-center"}`,style:s?{textAlign:n.logoAlignment||"center"}:{},children:r.jsx("img",{src:h,alt:"Company Logo",style:{height:`${n.logoSize||70}px`,objectFit:"contain"}})}),r.jsx("h1",{className:"text-xl font-bold text-center mb-10 uppercase tracking-widest border-b-2 border-slate-900 pb-2",children:e.title}),r.jsx("p",{className:"mb-6 text-justify",children:r.jsx(w,{template:e.preamble,values:n})}),r.jsxs("div",{className:"mb-8 pl-4 border-l-4 border-slate-100",children:[r.jsx("p",{className:"font-bold text-xs uppercase text-slate-400 mb-1",children:"BY AND BETWEEN"}),r.jsx("p",{className:"mb-4 text-justify",children:r.jsx(w,{template:e.partiesDisclosing,values:n})}),r.jsx("p",{className:"font-bold text-xs uppercase text-slate-400 mb-1",children:"AND"}),r.jsx("p",{className:"mb-2 text-justify",children:r.jsx(w,{template:e.partiesReceiving,values:n})})]}),r.jsx("p",{className:"text-justify mb-8",children:r.jsx(w,{template:e.partiesFooter,values:n})}),r.jsx("div",{className:"space-y-6 min-h-[100px]",children:r.jsx(Zn,{mode:"popLayout",children:e.sections&&e.sections.map((T,D)=>r.jsxs(E,{...s?{}:{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95}},children:[r.jsxs("h2",{className:"font-bold text-sm uppercase mb-2",children:[D+1,". ",T.title]}),r.jsx("p",{className:"text-justify",children:r.jsx(w,{template:T.content,values:n})})]},T.id))})}),r.jsxs("div",{className:"mt-12 break-inside-avoid",children:[r.jsxs("h2",{className:"font-bold text-sm uppercase mb-6 border-b border-slate-900 pb-1",children:[e.sections.length+1,". Signatures"]}),r.jsx("p",{className:"mb-8",children:"IN WITNESS WHEREOF, the Parties have executed this Agreement as of the date first written above."}),s?r.jsx("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"20px"},children:r.jsx("tbody",{children:r.jsxs("tr",{children:[r.jsxs("td",{style:{width:"48%",verticalAlign:"top",paddingRight:"2%"},children:[r.jsx("p",{className:"font-bold uppercase text-xs tracking-wider mb-8",children:"For Disclosing Party"}),r.jsx("div",{className:"relative border-b border-slate-800 h-8 mb-2",style:{borderBottom:"1px solid #000",height:"40px",marginBottom:"10px"},children:n.disclosingSignatoryName&&r.jsx("span",{style:{fontFamily:"cursive",fontSize:"16pt",color:"#1e3a8a"},children:n.disclosingSignatoryName})}),r.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Authorized Signature"}),r.jsx("table",{style:{width:"100%",marginTop:"15px"},children:r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{style:{width:"60px",fontWeight:"bold",fontSize:"10pt"},children:"Name:"}),r.jsx("td",{style:{borderBottom:"1px solid #ccc"},children:n.disclosingSignatoryName})]}),r.jsxs("tr",{children:[r.jsx("td",{style:{paddingBottom:"5px"}}),r.jsx("td",{})]}),r.jsxs("tr",{children:[r.jsx("td",{style:{width:"60px",fontWeight:"bold",fontSize:"10pt"},children:"Title:"}),r.jsx("td",{style:{borderBottom:"1px solid #ccc"},children:n.disclosingSignatoryDesignation})]})]})})]}),r.jsx("td",{style:{width:"4%"}}),r.jsxs("td",{style:{width:"48%",verticalAlign:"top"},children:[r.jsx("p",{className:"font-bold uppercase text-xs tracking-wider mb-8",children:"For Receiving Party"}),r.jsx("div",{className:"relative border-b border-slate-800 h-8 mb-2",style:{borderBottom:"1px solid #000",height:"40px",marginBottom:"10px"},children:n.receivingSignatoryName&&r.jsx("span",{style:{fontFamily:"cursive",fontSize:"16pt",color:"#1e3a8a"},children:n.receivingSignatoryName})}),r.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Authorized Signature"}),r.jsx("table",{style:{width:"100%",marginTop:"15px"},children:r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{style:{width:"60px",fontWeight:"bold",fontSize:"10pt"},children:"Name:"}),r.jsx("td",{style:{borderBottom:"1px solid #ccc"},children:n.receivingSignatoryName})]}),r.jsxs("tr",{children:[r.jsx("td",{style:{paddingBottom:"5px"}}),r.jsx("td",{})]}),r.jsxs("tr",{children:[r.jsx("td",{style:{width:"60px",fontWeight:"bold",fontSize:"10pt"},children:"Title:"}),r.jsx("td",{style:{borderBottom:"1px solid #ccc"},children:n.receivingSignatoryDesignation})]})]})})]})]})})}):r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-16",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"font-bold uppercase text-xs tracking-wider mb-8",children:"For Disclosing Party"}),r.jsx("div",{className:"relative border-b border-slate-800 h-8 mb-2",children:n.disclosingSignatoryName&&r.jsx("span",{className:"absolute bottom-1 left-2 font-cursive text-xl text-blue-900 opacity-80 rotate-[-2deg]",children:n.disclosingSignatoryName})}),r.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Authorized Signature"}),r.jsxs("div",{className:"pt-4 grid grid-cols-[80px_1fr] gap-x-2 gap-y-1 items-baseline",children:[r.jsx("span",{className:"text-sm font-medium",children:"Name:"}),r.jsx("span",{className:"border-b border-slate-300 w-full inline-block h-5 pl-1",children:n.disclosingSignatoryName}),r.jsx("span",{className:"text-sm font-medium",children:"Title:"}),r.jsx("span",{className:"border-b border-slate-300 w-full inline-block h-5 pl-1",children:n.disclosingSignatoryDesignation})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"font-bold uppercase text-xs tracking-wider mb-8",children:"For Receiving Party"}),r.jsx("div",{className:"relative border-b border-slate-800 h-8 mb-2",children:n.receivingSignatoryName&&r.jsx("span",{className:"absolute bottom-1 left-2 font-cursive text-xl text-blue-900 opacity-80 rotate-[-2deg]",children:n.receivingSignatoryName})}),r.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Authorized Signature"}),r.jsxs("div",{className:"pt-4 grid grid-cols-[80px_1fr] gap-x-2 gap-y-1 items-baseline",children:[r.jsx("span",{className:"text-sm font-medium",children:"Name:"}),r.jsx("span",{className:"border-b border-slate-300 w-full inline-block h-5 pl-1",children:n.receivingSignatoryName}),r.jsx("span",{className:"text-sm font-medium",children:"Title:"}),r.jsx("span",{className:"border-b border-slate-300 w-full inline-block h-5 pl-1",children:n.receivingSignatoryDesignation})]})]})]})]}),!s&&r.jsx("div",{className:"absolute bottom-4 left-0 right-0 text-center",children:r.jsx("p",{className:"text-[9px] text-slate-300 uppercase tracking-widest font-sans",children:"Powered by DocForge"})})]})]})}const B0=async n=>(await Dt.get(`/documents/${n}`)).data,H0=async n=>(await Dt.post("/documents",n)).data,U0=async(n,e)=>(await Dt.put(`/documents/${n}`,e)).data,aZ=async(n,e)=>(await Dt.post(`/documents/${n}/generate-pdf`,{html_content:e})).data,rZ=async()=>(await Dt.get("/documents/next-invoice-number")).data,oZ=async(n,e,t)=>(await Dt.post(`/documents/${n}/send`,{email:e,message:t})).data,lZ=async(n,e,t)=>(await Dt.post(`/documents/${n}/remind`,{email:e,message:t})).data,cZ=async n=>await Dt.get(`/documents/${n}/versions`),dZ=async(n,e)=>await Dt.post(`/documents/${n}/restore/${e}`),E5=async n=>(await Dt.get(`/documents/${n}/shares`)).data,V0=({documentId:n,isOpen:e,onClose:t,onRestore:s,onPreview:i,onDownload:a})=>{const[o,c]=R.useState([]),[u,h]=R.useState(!1),[f,g]=R.useState({isOpen:!1,version:null}),[x,w]=R.useState(!1);R.useEffect(()=>{e&&n&&A()},[e,n]);const A=async()=>{try{h(!0);const[T,D]=await Promise.allSettled([cZ(n),E5(n)]),M=T.status==="fulfilled"?T.value.data.data:[],L=D.status==="fulfilled"?D.value.data:[],I=M.map(Y=>({id:Y.id,type:"version",version_number:Y.version_number,created_at:Y.created_at,created_by:Y.created_by,data:Y})),W=L.map(Y=>({id:Y.id,type:"share",email:Y.email,permission:Y.permission,created_at:Y.created_at,created_by:Y.created_by||"You",data:Y})),V=[...I,...W].sort((Y,K)=>new Date(K.created_at)-new Date(Y.created_at));c(V)}catch(T){console.error("Failed to load history",T),Be.error("Failed to load history.")}finally{h(!1)}},C=T=>{g({isOpen:!0,version:T})},E=async()=>{const{version:T}=f;if(T)try{w(!0);const D=await dZ(n,T.id);Be.success(`Restored to Version ${T.version_number}`),s&&s(D.data.data),g({isOpen:!1,version:null}),t()}catch(D){console.error("Failed to restore version",D),Be.error("Failed to restore version.")}finally{w(!1)}};return r.jsx(Zn,{children:e&&r.jsxs(r.Fragment,{children:[r.jsx(ze.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"fixed inset-0 bg-black/20 z-40 backdrop-blur-sm"}),r.jsxs(ze.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed right-0 top-0 bottom-0 w-80 bg-white shadow-2xl z-50 border-l border-slate-200 flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between bg-slate-50",children:[r.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[r.jsx(Xa,{size:16})," Activity & History"]}),r.jsx("button",{onClick:t,className:"p-1 hover:bg-slate-200 rounded text-slate-500",children:r.jsx(ja,{size:20})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:u?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx(gs,{className:"animate-spin text-indigo-600"})}):o.length===0?r.jsx("p",{className:"text-center text-slate-500 text-sm py-8",children:"No history available yet."}):o.map((T,D)=>{if(T.type==="version"){const M=T.data;return r.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-slate-100 last:border-0 last:pb-0",children:[r.jsx("div",{className:"absolute -left-[9px] top-0 w-4 h-4 rounded-full border-2 border-white bg-slate-200 shadow-sm flex items-center justify-center",children:r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-400"})}),r.jsxs("div",{className:"text-sm",children:[r.jsxs("div",{className:"flex justify-between items-start mb-1",children:[r.jsxs("span",{className:"font-semibold text-slate-700",children:["Version ",M.version_number]}),r.jsx("span",{className:"text-xs text-slate-400",children:new Date(M.created_at).toLocaleDateString()})]}),r.jsxs("p",{className:"text-xs text-slate-500 mb-2",children:["Saved by ",M.created_by," ",r.jsx("br",{}),new Date(M.created_at).toLocaleTimeString()]}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsxs("button",{onClick:()=>i&&i(M),className:"px-2 py-1 text-xs font-medium bg-indigo-50 text-indigo-700 rounded hover:bg-indigo-100 transition-colors flex items-center gap-1",children:[r.jsx(jo,{size:12})," Preview"]}),r.jsxs("button",{onClick:()=>a&&a(M),className:"px-2 py-1 text-xs font-medium bg-slate-100 text-slate-700 rounded hover:bg-slate-200 transition-colors flex items-center gap-1",children:[r.jsx(wl,{size:12})," PDF"]}),r.jsxs("button",{onClick:()=>C(M),className:"px-2 py-1 text-xs font-medium bg-amber-50 text-amber-700 rounded hover:bg-amber-100 transition-colors flex items-center gap-1 ml-auto",children:[r.jsx(LU,{size:12})," Restore"]})]})]})]},`v-${M.id}`)}else{const M=T.data;return r.jsxs("div",{className:"relative pl-6 pb-6 border-l-2 border-slate-100 last:border-0 last:pb-0",children:[r.jsx("div",{className:"absolute -left-[9px] top-0 w-4 h-4 rounded-full border-2 border-white bg-blue-100 shadow-sm flex items-center justify-center",children:r.jsx(ZD,{size:10,className:"text-blue-600"})}),r.jsxs("div",{className:"text-sm",children:[r.jsxs("div",{className:"flex justify-between items-start mb-1",children:[r.jsx("span",{className:"font-semibold text-blue-700 flex items-center gap-1",children:"Document Shared"}),r.jsx("span",{className:"text-xs text-slate-400",children:new Date(M.created_at).toLocaleDateString()})]}),r.jsxs("div",{className:"text-xs text-slate-600 bg-slate-50 p-2 rounded border border-slate-100",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(ri,{size:12,className:"text-slate-400"}),r.jsx("span",{className:"font-medium text-slate-800",children:M.email})]}),r.jsxs("p",{className:"text-slate-400",children:["Shared by ",M.created_by||"You"]})]})]})]},`s-${M.id}`)}})})]}),r.jsx(ov,{isOpen:f.isOpen,onClose:()=>g({isOpen:!1,version:null}),onConfirm:E,title:"Restore Version",message:`Are you sure you want to restore Version ${f.version?.version_number}? Current changes will be replaced by this version.`,confirmText:"Restore Version",isLoading:x})]})})},W0=({isOpen:n,onClose:e,documentId:t,documentName:s,isReminder:i=!1,onSuccess:a,getHtmlContent:o,signatures:c=[]})=>{const[u,h]=R.useState([]),[f,g]=R.useState([]),[x,w]=R.useState(""),[A,C]=R.useState(""),[E,T]=R.useState("idle"),[D,M]=R.useState({current:0,total:0}),[L,I]=R.useState([]);if(gt.useEffect(()=>{if(n&&c.length>0){const q=[],ne=new Set;c.forEach(le=>{const _e=le.metadata?.signeeEmail||"",xe=le.metadata?.signeeName||"Unknown Signer",je=`${_e}-${xe}`;ne.has(je)||(ne.add(je),q.push({id:le.id,name:xe,email:_e,role:"signer",isValid:!!_e}))}),h(q)}else n&&c.length===0&&h([])},[n,c]),!n)return null;const W=q=>{q.preventDefault(),x&&/^\S+@\S+\.\S+$/.test(x)&&(g([...f,{email:x,role:"viewer"}]),w(""))},V=q=>{g(f.filter((ne,le)=>le!==q))},Y=(q,ne)=>{const le=[...u];le[q].email=ne,le[q].isValid=/^\S+@\S+\.\S+$/.test(ne),h(le)},K=async()=>{T("sending"),I([]);const q=[...u.filter(_e=>_e.isValid).map(_e=>({email:_e.email,type:"signer"})),...f.map(_e=>({email:_e.email,type:"viewer"}))];if(q.length===0){T("error"),I(["No valid recipients found. Please add an email."]);return}M({current:0,total:q.length});let ne=0;const le=[];try{let _e=null;o&&(_e=await o());for(let xe=0;xe<q.length;xe++){const je=q[xe];try{i?await lZ(t,je.email,A):await oZ(t,je.email,A,_e),ne++}catch(U){console.error(`Failed to send to ${je.email}`,U),le.push(`Failed to send to ${je.email}: ${U.message}`)}M(U=>({...U,current:xe+1}))}ne===q.length?(T("success"),a&&a({sent_at:new Date().toISOString()}),setTimeout(()=>{e(),T("idle"),C(""),h([]),g([])},2e3)):(T("error"),I(le.length>0?le:["Some emails failed to send."]))}catch(_e){console.error("Critical Failure",_e),T("error"),I(["A critical error occurred. Please try again."])}};return r.jsx(Zn,{children:n&&r.jsx(ze.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:r.jsxs(ze.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-xl shadow-xl w-full max-w-lg overflow-hidden flex flex-col max-h-[90vh]",children:[r.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50 flex-shrink-0",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[i?r.jsx(wc,{size:20,className:"text-amber-500"}):r.jsx(ri,{size:20,className:"text-indigo-600"}),i?"Send Reminder":"Send Document"]}),r.jsx("p",{className:"text-xs text-slate-500",children:i?`Follow up on "${s}"`:"Review signatures and send to recipients"})]}),r.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 p-1 hover:bg-slate-100 rounded-full transition-colors",children:r.jsx(ja,{size:20})})]}),r.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:E==="success"?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ze.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},className:"w-16 h-16 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(br,{size:32})}),r.jsx("h4",{className:"font-bold text-slate-800 text-lg mb-2",children:"Sent Successfully!"}),r.jsx("p",{className:"text-slate-500 text-sm",children:"All recipients have been notified."})]}):r.jsxs("div",{className:"space-y-6",children:[u.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),"Signers (Detected)"]}),r.jsx("div",{className:"space-y-3",children:u.map((q,ne)=>r.jsxs("div",{className:"flex items-center gap-3 bg-indigo-50/50 p-3 rounded-lg border border-indigo-100",children:[r.jsxs("div",{className:"w-8 h-8 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center text-xs font-bold shrink-0",children:["S",ne+1]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-sm font-semibold text-slate-700 truncate",children:q.name}),r.jsx("input",{type:"email",value:q.email,onChange:le=>Y(ne,le.target.value),placeholder:"Enter signer email...",className:`mt-1 w-full text-xs px-2 py-1 bg-white border rounded focus:ring-1 focus:ring-indigo-500 outline-none ${q.isValid?"border-slate-200 text-slate-600":"border-red-300 text-red-600"}`})]}),r.jsx("div",{className:"text-[10px] font-bold text-indigo-500 bg-indigo-100 px-2 py-1 rounded",children:"REQ"})]},ne))})]}),r.jsxs("div",{children:[r.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-400"}),"CC / Viewers"]}),r.jsxs("div",{className:"space-y-3",children:[f.map((q,ne)=>r.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 p-2 rounded-lg border border-slate-200",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 text-slate-500 flex items-center justify-center text-xs font-bold shrink-0",children:"CC"}),r.jsx("div",{className:"flex-1 text-sm text-slate-600 truncate",children:q.email}),r.jsx("button",{onClick:()=>V(ne),className:"text-slate-400 hover:text-red-500 p-1",children:r.jsx(ja,{size:14})})]},ne)),r.jsxs("form",{onSubmit:W,className:"flex gap-2",children:[r.jsx("input",{type:"email",value:x,onChange:q=>w(q.target.value),placeholder:"Add a viewer (e.g. hr@company.com)",className:"flex-1 px-3 py-2 text-sm border border-slate-200 rounded-lg focus:ring-2 focus:ring-slate-200 outline-none"}),r.jsx("button",{type:"submit",disabled:!x,className:"px-3 py-2 bg-slate-100 text-slate-600 font-medium rounded-lg text-sm hover:bg-slate-200 disabled:opacity-50",children:"Add"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Custom Message"}),r.jsx("textarea",{value:A,onChange:q=>C(q.target.value),rows:2,className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none resize-none",placeholder:i?"Checking in...":"Please review and sign..."})]}),L.length>0&&r.jsx("div",{className:"p-3 bg-red-50 text-red-600 text-sm rounded-lg",children:L.map((q,ne)=>r.jsxs("div",{className:"flex gap-2",children:[r.jsx(xr,{size:14,className:"mt-1 shrink-0"})," ",q]},ne))})]})}),E!=="success"&&r.jsx("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50 flex-shrink-0",children:r.jsx("button",{onClick:K,disabled:E==="sending"||u.length===0&&f.length===0,className:`w-full py-3 font-semibold rounded-lg shadow-md hover:shadow-lg transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed ${i?"bg-amber-500 hover:bg-amber-600 text-white":"bg-indigo-600 hover:bg-indigo-700 text-white"}`,children:E==="sending"?r.jsxs(r.Fragment,{children:[r.jsx(gs,{size:18,className:"animate-spin"}),"Sending (",D.current,"/",D.total,")..."]}):r.jsxs(r.Fragment,{children:[i?r.jsx(wc,{size:18}):r.jsx(ny,{size:18}),i?"Send Reminders":"Send to All Recipients"]})})})]})})})},lv=({isOpen:n,onClose:e,onSave:t,initialData:s,parties:i})=>{const[a,o]=R.useState({id:null,signeeName:"",signeeEmail:"",type:"all",required:!0,order:1});R.useEffect(()=>{n&&s&&o({id:s.id,signeeName:s.signeeName||"",signeeEmail:s.signeeEmail||"",type:s.type||"all",required:s.required??!0,order:s.order||1})},[n,s]);const c=()=>{t(a),e()},u=h=>{i&&(h==="disclosing"?o(f=>({...f,signeeName:i.disclosingSignatoryName||i.disclosingPartyName||""})):h==="receiving"&&o(f=>({...f,signeeName:i.receivingSignatoryName||i.receivingPartyName||""})))};return r.jsx(Zn,{children:n&&r.jsxs(r.Fragment,{children:[r.jsx(ze.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 bg-black/40 z-[60] backdrop-blur-sm"}),r.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 pointer-events-none",children:r.jsxs(ze.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},className:"bg-white rounded-xl shadow-2xl w-full max-w-md pointer-events-auto flex flex-col max-h-[90vh]",children:[r.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between bg-slate-50/50 rounded-t-xl",children:[r.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[r.jsx(R0,{size:18,className:"text-indigo-600"}),"Configure Signature"]}),r.jsx("button",{onClick:e,className:"p-1 hover:bg-slate-200 rounded text-slate-500",children:r.jsx(ja,{size:20})})]}),r.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto",children:[i&&r.jsxs("div",{className:"flex gap-2 p-1 bg-slate-100 rounded-lg",children:[r.jsx("button",{onClick:()=>u("disclosing"),className:"flex-1 text-xs font-medium py-1.5 px-3 rounded text-slate-600 hover:bg-white hover:shadow-sm hover:text-indigo-600 transition-all text-center",children:"Disclosing Party"}),r.jsx("button",{onClick:()=>u("receiving"),className:"flex-1 text-xs font-medium py-1.5 px-3 rounded text-slate-600 hover:bg-white hover:shadow-sm hover:text-indigo-600 transition-all text-center",children:"Receiving Party"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Signee Name"}),r.jsxs("div",{className:"relative",children:[r.jsx(Mo,{className:"absolute left-3 top-2.5 text-slate-400",size:16}),r.jsx("input",{type:"text",value:a.signeeName,onChange:h=>o({...a,signeeName:h.target.value}),className:"w-full pl-9 pr-3 py-2 text-sm border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all",placeholder:"e.g. John Doe"})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Signee Email"}),r.jsx("input",{type:"email",value:a.signeeEmail,onChange:h=>o({...a,signeeEmail:h.target.value}),className:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all",placeholder:"john@example.com"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Signing Order"}),r.jsx("input",{type:"number",min:"1",value:a.order,onChange:h=>o({...a,order:parseInt(h.target.value)||1}),className:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Required?"}),r.jsxs("button",{onClick:()=>o({...a,required:!a.required}),className:`w-full py-2 px-3 rounded-lg border text-sm font-medium flex items-center justify-center gap-2 transition-all ${a.required?"bg-emerald-50 border-emerald-200 text-emerald-700":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:[a.required?r.jsx(ii,{size:16}):r.jsx("span",{className:"w-4 h-4 block border rounded-sm border-slate-300"}),a.required?"Required":"Optional"]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"block text-sm font-medium text-slate-700 flex items-center gap-2",children:[r.jsx(Bm,{size:14,className:"text-slate-400"}),"Allowed Signature Types"]}),r.jsxs("select",{value:a.type,onChange:h=>o({...a,type:h.target.value}),className:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none bg-white",children:[r.jsx("option",{value:"all",children:"Any (Draw, Type, Upload)"}),r.jsx("option",{value:"draw",children:"Draw Only"}),r.jsx("option",{value:"text",children:"Type Only"}),r.jsx("option",{value:"upload",children:"Upload Only"})]})]})]}),r.jsxs("div",{className:"p-4 border-t border-slate-100 bg-slate-50/50 flex justify-end gap-3 rounded-b-xl",children:[r.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-800 bg-white border border-slate-200 rounded-lg hover:border-slate-300 transition-all",children:"Cancel"}),r.jsx("button",{onClick:c,className:"px-6 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg shadow-sm shadow-indigo-200 transition-all transform active:scale-95",children:"Save Signature"})]})]})})]})})},uZ={title:"Non-Disclosure Agreement",preamble:"This Non-Disclosure Agreement (Agreement) is made and entered into on this {{effectiveDateDay}} day of {{effectiveDateMonth}}, 20{{effectiveDateYear}} (Effective Date),",partiesDisclosing:'{{disclosingPartyName}}, a company/individual having its registered office/address at {{disclosingPartyAddress}} (hereinafter referred to as the "Disclosing Party"),',partiesReceiving:'{{receivingPartyName}}, a company/individual having its registered office/address at {{receivingPartyAddress}} (hereinafter referred to as the "Receiving Party").',partiesFooter:'The Disclosing Party and the Receiving Party may hereinafter be collectively referred to as the "Parties" and individually as a "Party".',sections:[{id:"1",title:"Purpose",content:"The Disclosing Party intends to disclose certain confidential and proprietary information to the Receiving Party for the purpose of {{purpose}} (Purpose)."},{id:"2",title:"Definition of Confidential Information",content:'For the purposes of this Agreement, "Confidential Information" shall mean any information disclosed by the Disclosing Party to the Receiving Party, whether orally, in writing, electronically, visually, or in any other form, including but not limited to business plans, strategies, financial information, and technical data.'},{id:"3",title:"Exclusions from Confidential Information",content:"Confidential Information shall not include information that is publicly available, lawfully known to the Receiving Party prior to disclosure, or independently developed by the Receiving Party."},{id:"4",title:"Obligations of the Receiving Party",content:"The Receiving Party agrees to keep all Confidential Information strictly confidential, use it solely for the Purpose, and not disclose it to any third party without prior written consent."},{id:"5",title:"Disclosure",content:"The Receiving Party may disclose Confidential Information only to its employees, agents, or representatives who have a legitimate need to know for the Purpose and are bound by confidentiality obligations."},{id:"6",title:"No License",content:"Nothing in this Agreement shall be construed as granting any rights, licenses, or ownership in the Confidential Information, except for the limited right to use it for the Purpose."},{id:"7",title:"Term and Survival",content:"This Agreement shall commence on the Effective Date and remain in effect for a period of {{termYears}} years. The confidentiality obligations shall survive the termination for a period of {{survivalYears}} years thereafter."},{id:"8",title:"Return of Information",content:"Upon termination of this Agreement or upon written request by the Disclosing Party, the Receiving Party shall promptly return or destroy all Confidential Information."},{id:"9",title:"Remedies",content:"The Receiving Party acknowledges that unauthorized disclosure or misuse of Confidential Information may cause irreparable harm. The Disclosing Party shall be entitled to seek injunctive relief."},{id:"10",title:"Governing Law",content:"This Agreement shall be governed by and construed in accordance with the laws of {{jurisdiction}}, and the courts of {{courtCity}} shall have exclusive jurisdiction."},{id:"11",title:"Miscellaneous",content:"This Agreement constitutes the entire understanding between the Parties. Any amendment must be in writing. Failure to enforce any provision shall not constitute a waiver."}]},hZ={effectiveDateDay:"",effectiveDateMonth:"",effectiveDateYear:"",logoSize:70,logoAlignment:"center",brandingEnabled:!0,disclosingPartyName:"",disclosingPartyAddress:"",receivingPartyName:"",receivingPartyAddress:"",purpose:"",termYears:"",survivalYears:"",jurisdiction:"",courtCity:"",disclosingSignatoryName:"",disclosingSignatoryDesignation:"",receivingSignatoryName:"",receivingSignatoryDesignation:""};var Rh={},up={};var $_;function fZ(){if($_)return up;$_=1;var n=g0(),e=Ay();function t(y){var S="https://react.dev/errors/"+y;if(1<arguments.length){S+="?args[]="+encodeURIComponent(arguments[1]);for(var k=2;k<arguments.length;k++)S+="&args[]="+encodeURIComponent(arguments[k])}return"Minified React error #"+y+"; visit "+S+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),C=Symbol.for("react.scope"),E=Symbol.for("react.activity"),T=Symbol.for("react.legacy_hidden"),D=Symbol.for("react.memo_cache_sentinel"),M=Symbol.for("react.view_transition"),L=Symbol.iterator;function I(y){return y===null||typeof y!="object"?null:(y=L&&y[L]||y["@@iterator"],typeof y=="function"?y:null)}var W=Array.isArray;function V(y,S){var k=y.length&3,O=y.length-k,B=S;for(S=0;S<O;){var J=y.charCodeAt(S)&255|(y.charCodeAt(++S)&255)<<8|(y.charCodeAt(++S)&255)<<16|(y.charCodeAt(++S)&255)<<24;++S,J=3432918353*(J&65535)+((3432918353*(J>>>16)&65535)<<16)&4294967295,J=J<<15|J>>>17,J=461845907*(J&65535)+((461845907*(J>>>16)&65535)<<16)&4294967295,B^=J,B=B<<13|B>>>19,B=5*(B&65535)+((5*(B>>>16)&65535)<<16)&4294967295,B=(B&65535)+27492+(((B>>>16)+58964&65535)<<16)}switch(J=0,k){case 3:J^=(y.charCodeAt(S+2)&255)<<16;case 2:J^=(y.charCodeAt(S+1)&255)<<8;case 1:J^=y.charCodeAt(S)&255,J=3432918353*(J&65535)+((3432918353*(J>>>16)&65535)<<16)&4294967295,J=J<<15|J>>>17,B^=461845907*(J&65535)+((461845907*(J>>>16)&65535)<<16)&4294967295}return B^=y.length,B^=B>>>16,B=2246822507*(B&65535)+((2246822507*(B>>>16)&65535)<<16)&4294967295,B^=B>>>13,B=3266489909*(B&65535)+((3266489909*(B>>>16)&65535)<<16)&4294967295,(B^B>>>16)>>>0}var Y=Object.assign,K=Object.prototype.hasOwnProperty,q=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ne={},le={};function _e(y){return K.call(le,y)?!0:K.call(ne,y)?!1:q.test(y)?le[y]=!0:(ne[y]=!0,!1)}var xe=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" ")),je=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),U=/["'&<>]/;function H(y){if(typeof y=="boolean"||typeof y=="number"||typeof y=="bigint")return""+y;y=""+y;var S=U.exec(y);if(S){var k="",O,B=0;for(O=S.index;O<y.length;O++){switch(y.charCodeAt(O)){case 34:S="&quot;";break;case 38:S="&amp;";break;case 39:S="&#x27;";break;case 60:S="&lt;";break;case 62:S="&gt;";break;default:continue}B!==O&&(k+=y.slice(B,O)),B=O+1,k+=S}y=B!==O?k+y.slice(B,O):k}return y}var ee=/([A-Z])/g,he=/^ms-/,ce=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function G(y){return ce.test(""+y)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":y}var ue=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},Ae=Se.d;Se.d={f:Ae.f,r:Ae.r,D:Po,C:Ls,L:Tl,m:Oo,X:Ts,S:Lo,M:pf};var Pe=[],Ve=null,Nt=/(<\/|<)(s)(cript)/gi;function ht(y,S,k,O){return""+S+(k==="s"?"\\u0073":"\\u0053")+O}function mt(y,S,k,O,B){return{idPrefix:y===void 0?"":y,nextFormID:0,streamingFormat:0,bootstrapScriptContent:k,bootstrapScripts:O,bootstrapModules:B,instructions:0,hasBody:!1,hasHtml:!1,unknownResources:{},dnsResources:{},connectResources:{default:{},anonymous:{},credentials:{}},imageResources:{},styleResources:{},scriptResources:{},moduleUnknownResources:{},moduleScriptResources:{}}}function Qe(y,S,k,O){return{insertionMode:y,selectedValue:S,tagScope:k,viewTransition:O}}function Kt(y,S,k){var O=y.tagScope&-25;switch(S){case"noscript":return Qe(2,null,O|1,null);case"select":return Qe(2,k.value!=null?k.value:k.defaultValue,O,null);case"svg":return Qe(4,null,O,null);case"picture":return Qe(2,null,O|2,null);case"math":return Qe(5,null,O,null);case"foreignObject":return Qe(2,null,O,null);case"table":return Qe(6,null,O,null);case"thead":case"tbody":case"tfoot":return Qe(7,null,O,null);case"colgroup":return Qe(9,null,O,null);case"tr":return Qe(8,null,O,null);case"head":if(2>y.insertionMode)return Qe(3,null,O,null);break;case"html":if(y.insertionMode===0)return Qe(1,null,O,null)}return 6<=y.insertionMode||2>y.insertionMode?Qe(2,null,O,null):y.tagScope!==O?Qe(y.insertionMode,y.selectedValue,O,null):y}function Ke(y){return y===null?null:{update:y.update,enter:"none",exit:"none",share:y.update,name:y.autoName,autoName:y.autoName,nameIdx:0}}function at(y,S){return S.tagScope&32&&(y.instructions|=128),Qe(S.insertionMode,S.selectedValue,S.tagScope|12,Ke(S.viewTransition))}function ft(y,S){y=Ke(S.viewTransition);var k=S.tagScope|16;return y!==null&&y.share!=="none"&&(k|=64),Qe(S.insertionMode,S.selectedValue,k,y)}var Gt=new Map;function He(y,S){if(typeof S!="object")throw Error(t(62));var k=!0,O;for(O in S)if(K.call(S,O)){var B=S[O];if(B!=null&&typeof B!="boolean"&&B!==""){if(O.indexOf("--")===0){var J=H(O);B=H((""+B).trim())}else J=Gt.get(O),J===void 0&&(J=H(O.replace(ee,"-$1").toLowerCase().replace(he,"-ms-")),Gt.set(O,J)),B=typeof B=="number"?B===0||xe.has(O)?""+B:B+"px":H((""+B).trim());k?(k=!1,y.push(' style="',J,":",B)):y.push(";",J,":",B)}}k||y.push('"')}function Je(y,S,k){k&&typeof k!="function"&&typeof k!="symbol"&&y.push(" ",S,'=""')}function Ie(y,S,k){typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&y.push(" ",S,'="',H(k),'"')}var tt=H("javascript:throw new Error('React form unexpectedly submitted.')");function De(y,S){this.push('<input type="hidden"'),Fe(y),Ie(this,"name",S),Ie(this,"value",y),this.push("/>")}function Fe(y){if(typeof y!="string")throw Error(t(480))}function $e(y,S){if(typeof S.$$FORM_ACTION=="function"){var k=y.nextFormID++;y=y.idPrefix+k;try{var O=S.$$FORM_ACTION(y);if(O){var B=O.data;B?.forEach(Fe)}return O}catch(J){if(typeof J=="object"&&J!==null&&typeof J.then=="function")throw J}}return null}function nt(y,S,k,O,B,J,$,ve){var ae=null;if(typeof O=="function"){var we=$e(S,O);we!==null?(ve=we.name,O=we.action||"",B=we.encType,J=we.method,$=we.target,ae=we.data):(y.push(" ","formAction",'="',tt,'"'),$=J=B=O=ve=null,an(S,k))}return ve!=null&&qe(y,"name",ve),O!=null&&qe(y,"formAction",O),B!=null&&qe(y,"formEncType",B),J!=null&&qe(y,"formMethod",J),$!=null&&qe(y,"formTarget",$),ae}function qe(y,S,k){switch(S){case"className":Ie(y,"class",k);break;case"tabIndex":Ie(y,"tabindex",k);break;case"dir":case"role":case"viewBox":case"width":case"height":Ie(y,S,k);break;case"style":He(y,k);break;case"src":case"href":if(k==="")break;case"action":case"formAction":if(k==null||typeof k=="function"||typeof k=="symbol"||typeof k=="boolean")break;k=G(""+k),y.push(" ",S,'="',H(k),'"');break;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":case"ref":break;case"autoFocus":case"multiple":case"muted":Je(y,S.toLowerCase(),k);break;case"xlinkHref":if(typeof k=="function"||typeof k=="symbol"||typeof k=="boolean")break;k=G(""+k),y.push(" ","xlink:href",'="',H(k),'"');break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":typeof k!="function"&&typeof k!="symbol"&&y.push(" ",S,'="',H(k),'"');break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":k&&typeof k!="function"&&typeof k!="symbol"&&y.push(" ",S,'=""');break;case"capture":case"download":k===!0?y.push(" ",S,'=""'):k!==!1&&typeof k!="function"&&typeof k!="symbol"&&y.push(" ",S,'="',H(k),'"');break;case"cols":case"rows":case"size":case"span":typeof k!="function"&&typeof k!="symbol"&&!isNaN(k)&&1<=k&&y.push(" ",S,'="',H(k),'"');break;case"rowSpan":case"start":typeof k=="function"||typeof k=="symbol"||isNaN(k)||y.push(" ",S,'="',H(k),'"');break;case"xlinkActuate":Ie(y,"xlink:actuate",k);break;case"xlinkArcrole":Ie(y,"xlink:arcrole",k);break;case"xlinkRole":Ie(y,"xlink:role",k);break;case"xlinkShow":Ie(y,"xlink:show",k);break;case"xlinkTitle":Ie(y,"xlink:title",k);break;case"xlinkType":Ie(y,"xlink:type",k);break;case"xmlBase":Ie(y,"xml:base",k);break;case"xmlLang":Ie(y,"xml:lang",k);break;case"xmlSpace":Ie(y,"xml:space",k);break;default:if((!(2<S.length)||S[0]!=="o"&&S[0]!=="O"||S[1]!=="n"&&S[1]!=="N")&&(S=je.get(S)||S,_e(S))){switch(typeof k){case"function":case"symbol":return;case"boolean":var O=S.toLowerCase().slice(0,5);if(O!=="data-"&&O!=="aria-")return}y.push(" ",S,'="',H(k),'"')}}}function St(y,S,k){if(S!=null){if(k!=null)throw Error(t(60));if(typeof S!="object"||!("__html"in S))throw Error(t(61));S=S.__html,S!=null&&y.push(""+S)}}function un(y){var S="";return n.Children.forEach(y,function(k){k!=null&&(S+=k)}),S}function an(y,S){if((y.instructions&16)===0){y.instructions|=16;var k=S.preamble,O=S.bootstrapChunks;(k.htmlChunks||k.headChunks)&&O.length===0?(O.push(S.startInlineScript),Ac(O,y),O.push(">",`addEventListener("submit",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute("formAction");null!=f&&(e=f,b=null)}"javascript:throw new Error('React form unexpectedly submitted.')"===e&&(a.preventDefault(),b?(a=document.createElement("input"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});`,"<\/script>")):O.unshift(S.startInlineScript,">",`addEventListener("submit",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute("formAction");null!=f&&(e=f,b=null)}"javascript:throw new Error('React form unexpectedly submitted.')"===e&&(a.preventDefault(),b?(a=document.createElement("input"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});`,"<\/script>")}}function Lt(y,S){y.push(hn("link"));for(var k in S)if(K.call(S,k)){var O=S[k];if(O!=null)switch(k){case"children":case"dangerouslySetInnerHTML":throw Error(t(399,"link"));default:qe(y,k,O)}}return y.push("/>"),null}var ts=/(<\/|<)(s)(tyle)/gi;function ns(y,S,k,O){return""+S+(k==="s"?"\\73 ":"\\53 ")+O}function vi(y,S,k){y.push(hn(k));for(var O in S)if(K.call(S,O)){var B=S[O];if(B!=null)switch(O){case"children":case"dangerouslySetInnerHTML":throw Error(t(399,k));default:qe(y,O,B)}}return y.push("/>"),null}function Ps(y,S){y.push(hn("title"));var k=null,O=null,B;for(B in S)if(K.call(S,B)){var J=S[B];if(J!=null)switch(B){case"children":k=J;break;case"dangerouslySetInnerHTML":O=J;break;default:qe(y,B,J)}}return y.push(">"),S=Array.isArray(k)?2>k.length?k[0]:null:k,typeof S!="function"&&typeof S!="symbol"&&S!==null&&S!==void 0&&y.push(H(""+S)),St(y,O,k),y.push(ke("title")),null}function yn(y,S){y.push(hn("script"));var k=null,O=null,B;for(B in S)if(K.call(S,B)){var J=S[B];if(J!=null)switch(B){case"children":k=J;break;case"dangerouslySetInnerHTML":O=J;break;default:qe(y,B,J)}}return y.push(">"),St(y,O,k),typeof k=="string"&&y.push((""+k).replace(Nt,ht)),y.push(ke("script")),null}function ss(y,S,k){y.push(hn(k));var O=k=null,B;for(B in S)if(K.call(S,B)){var J=S[B];if(J!=null)switch(B){case"children":k=J;break;case"dangerouslySetInnerHTML":O=J;break;default:qe(y,B,J)}}return y.push(">"),St(y,O,k),k}function Fn(y,S,k){y.push(hn(k));var O=k=null,B;for(B in S)if(K.call(S,B)){var J=S[B];if(J!=null)switch(B){case"children":k=J;break;case"dangerouslySetInnerHTML":O=J;break;default:qe(y,B,J)}}return y.push(">"),St(y,O,k),typeof k=="string"?(y.push(H(k)),null):k}var da=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,ua=new Map;function hn(y){var S=ua.get(y);if(S===void 0){if(!da.test(y))throw Error(t(65,y));S="<"+y,ua.set(y,S)}return S}function vn(y,S,k,O,B,J,$,ve,ae){switch(S){case"div":case"span":case"svg":case"path":break;case"a":y.push(hn("a"));var we=null,Oe=null,Te;for(Te in k)if(K.call(k,Te)){var Xe=k[Te];if(Xe!=null)switch(Te){case"children":we=Xe;break;case"dangerouslySetInnerHTML":Oe=Xe;break;case"href":Xe===""?Ie(y,"href",""):qe(y,Te,Xe);break;default:qe(y,Te,Xe)}}if(y.push(">"),St(y,Oe,we),typeof we=="string"){y.push(H(we));var rt=null}else rt=we;return rt;case"g":case"p":case"li":break;case"select":y.push(hn("select"));var zt=null,kt=null,Tt;for(Tt in k)if(K.call(k,Tt)){var Et=k[Tt];if(Et!=null)switch(Tt){case"children":zt=Et;break;case"dangerouslySetInnerHTML":kt=Et;break;case"defaultValue":case"value":break;default:qe(y,Tt,Et)}}return y.push(">"),St(y,kt,zt),zt;case"option":var Mt=ve.selectedValue;y.push(hn("option"));var pn=null,Wn=null,Zt=null,Jt=null,en;for(en in k)if(K.call(k,en)){var Mn=k[en];if(Mn!=null)switch(en){case"children":pn=Mn;break;case"selected":Zt=Mn;break;case"dangerouslySetInnerHTML":Jt=Mn;break;case"value":Wn=Mn;default:qe(y,en,Mn)}}if(Mt!=null){var qt=Wn!==null?""+Wn:un(pn);if(W(Mt)){for(var cs=0;cs<Mt.length;cs++)if(""+Mt[cs]===qt){y.push(' selected=""');break}}else""+Mt===qt&&y.push(' selected=""')}else Zt&&y.push(' selected=""');return y.push(">"),St(y,Jt,pn),pn;case"textarea":y.push(hn("textarea"));var xn=null,Qn=null,In=null,Pn;for(Pn in k)if(K.call(k,Pn)){var ci=k[Pn];if(ci!=null)switch(Pn){case"children":In=ci;break;case"value":xn=ci;break;case"defaultValue":Qn=ci;break;case"dangerouslySetInnerHTML":throw Error(t(91));default:qe(y,Pn,ci)}}if(xn===null&&Qn!==null&&(xn=Qn),y.push(">"),In!=null){if(xn!=null)throw Error(t(92));if(W(In)){if(1<In.length)throw Error(t(93));xn=""+In[0]}xn=""+In}return typeof xn=="string"&&xn[0]===`
`&&y.push(`
`),xn!==null&&y.push(H(""+xn)),null;case"input":y.push(hn("input"));var Pr=null,Hi=null,di=null,Oa=null,ds=null,Ti=null,_i=null,is=null,ys=null,ji;for(ji in k)if(K.call(k,ji)){var Tn=k[ji];if(Tn!=null)switch(ji){case"children":case"dangerouslySetInnerHTML":throw Error(t(399,"input"));case"name":Pr=Tn;break;case"formAction":Hi=Tn;break;case"formEncType":di=Tn;break;case"formMethod":Oa=Tn;break;case"formTarget":ds=Tn;break;case"defaultChecked":ys=Tn;break;case"defaultValue":_i=Tn;break;case"checked":is=Tn;break;case"value":Ti=Tn;break;default:qe(y,ji,Tn)}}var ui=nt(y,O,B,Hi,di,Oa,ds,Pr);return is!==null?Je(y,"checked",is):ys!==null&&Je(y,"checked",ys),Ti!==null?qe(y,"value",Ti):_i!==null&&qe(y,"value",_i),y.push("/>"),ui?.forEach(De,y),null;case"button":y.push(hn("button"));var $i=null,Gd=null,zc=null,Yd=null,Xd=null,us=null,On=null,Ft;for(Ft in k)if(K.call(k,Ft)){var Xs=k[Ft];if(Xs!=null)switch(Ft){case"children":$i=Xs;break;case"dangerouslySetInnerHTML":Gd=Xs;break;case"name":zc=Xs;break;case"formAction":Yd=Xs;break;case"formEncType":Xd=Xs;break;case"formMethod":us=Xs;break;case"formTarget":On=Xs;break;default:qe(y,Ft,Xs)}}var zs=nt(y,O,B,Yd,Xd,us,On,zc);if(y.push(">"),zs?.forEach(De,y),St(y,Gd,$i),typeof $i=="string"){y.push(H($i));var Vl=null}else Vl=$i;return Vl;case"form":y.push(hn("form"));var ki=null,Kd=null,ea=null,qa=null,ga=null,mo=null,Or;for(Or in k)if(K.call(k,Or)){var La=k[Or];if(La!=null)switch(Or){case"children":ki=La;break;case"dangerouslySetInnerHTML":Kd=La;break;case"action":ea=La;break;case"encType":qa=La;break;case"method":ga=La;break;case"target":mo=La;break;default:qe(y,Or,La)}}var Lr=null,_n=null;if(typeof ea=="function"){var Ri=$e(O,ea);Ri!==null?(ea=Ri.action||"",qa=Ri.encType,ga=Ri.method,mo=Ri.target,Lr=Ri.data,_n=Ri.name):(y.push(" ","action",'="',tt,'"'),mo=ga=qa=ea=null,an(O,B))}if(ea!=null&&qe(y,"action",ea),qa!=null&&qe(y,"encType",qa),ga!=null&&qe(y,"method",ga),mo!=null&&qe(y,"target",mo),y.push(">"),_n!==null&&(y.push('<input type="hidden"'),Ie(y,"name",_n),y.push("/>"),Lr?.forEach(De,y)),St(y,Kd,ki),typeof ki=="string"){y.push(H(ki));var Ui=null}else Ui=ki;return Ui;case"menuitem":y.push(hn("menuitem"));for(var $a in k)if(K.call(k,$a)){var Wl=k[$a];if(Wl!=null)switch($a){case"children":case"dangerouslySetInnerHTML":throw Error(t(400));default:qe(y,$a,Wl)}}return y.push(">"),null;case"object":y.push(hn("object"));var Ks=null,Fa=null,ta;for(ta in k)if(K.call(k,ta)){var Nn=k[ta];if(Nn!=null)switch(ta){case"children":Ks=Nn;break;case"dangerouslySetInnerHTML":Fa=Nn;break;case"data":var vs=G(""+Nn);if(vs==="")break;y.push(" ","data",'="',H(vs),'"');break;default:qe(y,ta,Nn)}}if(y.push(">"),St(y,Fa,Ks),typeof Ks=="string"){y.push(H(Ks));var Qo=null}else Qo=Ks;return Qo;case"title":var hi=ve.tagScope&1,sh=ve.tagScope&4;if(ve.insertionMode===4||hi||k.itemProp!=null)var Ic=Ps(y,k);else sh?Ic=null:(Ps(B.hoistableChunks,k),Ic=void 0);return Ic;case"link":var Gn=ve.tagScope&1,Zd=ve.tagScope&4,Gl=k.rel,na=k.href,Fr=k.precedence;if(ve.insertionMode===4||Gn||k.itemProp!=null||typeof Gl!="string"||typeof na!="string"||na===""){Lt(y,k);var sa=null}else if(k.rel==="stylesheet")if(typeof Fr!="string"||k.disabled!=null||k.onLoad||k.onError)sa=Lt(y,k);else{var as=B.styles.get(Fr),Yl=O.styleResources.hasOwnProperty(na)?O.styleResources[na]:void 0;if(Yl!==null){O.styleResources[na]=null,as||(as={precedence:H(Fr),rules:[],hrefs:[],sheets:new Map},B.styles.set(Fr,as));var qo={state:0,props:Y({},k,{"data-precedence":k.precedence,precedence:null})};if(Yl){Yl.length===2&&_l(qo.props,Yl);var Jd=B.preloads.stylesheets.get(na);Jd&&0<Jd.length?Jd.length=0:qo.state=1}as.sheets.set(na,qo),$&&$.stylesheets.add(qo)}else if(as){var Bc=as.sheets.get(na);Bc&&$&&$.stylesheets.add(Bc)}ae&&y.push("<!-- -->"),sa=null}else k.onLoad||k.onError?sa=Lt(y,k):(ae&&y.push("<!-- -->"),sa=Zd?null:Lt(B.hoistableChunks,k));return sa;case"script":var zr=ve.tagScope&1,Xl=k.async;if(typeof k.src!="string"||!k.src||!Xl||typeof Xl=="function"||typeof Xl=="symbol"||k.onLoad||k.onError||ve.insertionMode===4||zr||k.itemProp!=null)var Kl=yn(y,k);else{var rs=k.src;if(k.type==="module")var Ir=O.moduleScriptResources,go=B.preloads.moduleScripts;else Ir=O.scriptResources,go=B.preloads.scripts;var Br=Ir.hasOwnProperty(rs)?Ir[rs]:void 0;if(Br!==null){Ir[rs]=null;var po=k;if(Br){Br.length===2&&(po=Y({},k),_l(po,Br));var Hc=go.get(rs);Hc&&(Hc.length=0)}var Zl=[];B.scripts.add(Zl),yn(Zl,po)}ae&&y.push("<!-- -->"),Kl=null}return Kl;case"style":var za=ve.tagScope&1,Di=k.precedence,Vi=k.href,Qd=k.nonce;if(ve.insertionMode===4||za||k.itemProp!=null||typeof Di!="string"||typeof Vi!="string"||Vi===""){y.push(hn("style"));var ia=null,$o=null,pa;for(pa in k)if(K.call(k,pa)){var Ia=k[pa];if(Ia!=null)switch(pa){case"children":ia=Ia;break;case"dangerouslySetInnerHTML":$o=Ia;break;default:qe(y,pa,Ia)}}y.push(">");var xa=Array.isArray(ia)?2>ia.length?ia[0]:null:ia;typeof xa!="function"&&typeof xa!="symbol"&&xa!==null&&xa!==void 0&&y.push((""+xa).replace(ts,ns)),St(y,$o,ia),y.push(ke("style"));var el=null}else{var Mi=B.styles.get(Di);if((O.styleResources.hasOwnProperty(Vi)?O.styleResources[Vi]:void 0)!==null){O.styleResources[Vi]=null,Mi||(Mi={precedence:H(Di),rules:[],hrefs:[],sheets:new Map},B.styles.set(Di,Mi));var qd=B.nonce.style;if(!qd||qd===Qd){Mi.hrefs.push(H(Vi));var er=Mi.rules,Ba=null,tl=null,Wi;for(Wi in k)if(K.call(k,Wi)){var fi=k[Wi];if(fi!=null)switch(Wi){case"children":Ba=fi;break;case"dangerouslySetInnerHTML":tl=fi}}var ba=Array.isArray(Ba)?2>Ba.length?Ba[0]:null:Ba;typeof ba!="function"&&typeof ba!="symbol"&&ba!==null&&ba!==void 0&&er.push((""+ba).replace(ts,ns)),St(er,tl,Ba)}}Mi&&$&&$.styles.add(Mi),ae&&y.push("<!-- -->"),el=void 0}return el;case"meta":var Gi=ve.tagScope&1,Jl=ve.tagScope&4;if(ve.insertionMode===4||Gi||k.itemProp!=null)var nl=vi(y,k,"meta");else ae&&y.push("<!-- -->"),nl=Jl?null:typeof k.charSet=="string"?vi(B.charsetChunks,k,"meta"):k.name==="viewport"?vi(B.viewportChunks,k,"meta"):vi(B.hoistableChunks,k,"meta");return nl;case"listing":case"pre":y.push(hn(S));var tr=null,b=null,v;for(v in k)if(K.call(k,v)){var j=k[v];if(j!=null)switch(v){case"children":tr=j;break;case"dangerouslySetInnerHTML":b=j;break;default:qe(y,v,j)}}if(y.push(">"),b!=null){if(tr!=null)throw Error(t(60));if(typeof b!="object"||!("__html"in b))throw Error(t(61));var P=b.__html;P!=null&&(typeof P=="string"&&0<P.length&&P[0]===`
`?y.push(`
`,P):y.push(""+P))}return typeof tr=="string"&&tr[0]===`
`&&y.push(`
`),tr;case"img":var F=ve.tagScope&3,X=k.src,Q=k.srcSet;if(!(k.loading==="lazy"||!X&&!Q||typeof X!="string"&&X!=null||typeof Q!="string"&&Q!=null||k.fetchPriority==="low"||F)&&(typeof X!="string"||X[4]!==":"||X[0]!=="d"&&X[0]!=="D"||X[1]!=="a"&&X[1]!=="A"||X[2]!=="t"&&X[2]!=="T"||X[3]!=="a"&&X[3]!=="A")&&(typeof Q!="string"||Q[4]!==":"||Q[0]!=="d"&&Q[0]!=="D"||Q[1]!=="a"&&Q[1]!=="A"||Q[2]!=="t"&&Q[2]!=="T"||Q[3]!=="a"&&Q[3]!=="A")){$!==null&&ve.tagScope&64&&($.suspenseyImages=!0);var oe=typeof k.sizes=="string"?k.sizes:void 0,te=Q?Q+`
`+(oe||""):X,de=B.preloads.images,be=de.get(te);if(be)(k.fetchPriority==="high"||10>B.highImagePreloads.size)&&(de.delete(te),B.highImagePreloads.add(be));else if(!O.imageResources.hasOwnProperty(te)){O.imageResources[te]=Pe;var Ne=k.crossOrigin,We=typeof Ne=="string"?Ne==="use-credentials"?Ne:"":void 0,Ye=B.headers,xt;Ye&&0<Ye.remainingCapacity&&typeof k.srcSet!="string"&&(k.fetchPriority==="high"||500>Ye.highImagePreloads.length)&&(xt=zn(X,"image",{imageSrcSet:k.srcSet,imageSizes:k.sizes,crossOrigin:We,integrity:k.integrity,nonce:k.nonce,type:k.type,fetchPriority:k.fetchPriority,referrerPolicy:k.refererPolicy}),0<=(Ye.remainingCapacity-=xt.length+2))?(B.resets.image[te]=Pe,Ye.highImagePreloads&&(Ye.highImagePreloads+=", "),Ye.highImagePreloads+=xt):(be=[],Lt(be,{rel:"preload",as:"image",href:Q?void 0:X,imageSrcSet:Q,imageSizes:oe,crossOrigin:We,integrity:k.integrity,type:k.type,fetchPriority:k.fetchPriority,referrerPolicy:k.referrerPolicy}),k.fetchPriority==="high"||10>B.highImagePreloads.size?B.highImagePreloads.add(be):(B.bulkPreloads.add(be),de.set(te,be)))}}return vi(y,k,"img");case"base":case"area":case"br":case"col":case"embed":case"hr":case"keygen":case"param":case"source":case"track":case"wbr":return vi(y,k,S);case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":break;case"head":if(2>ve.insertionMode){var Pt=J||B.preamble;if(Pt.headChunks)throw Error(t(545,"`<head>`"));J!==null&&y.push("<!--head-->"),Pt.headChunks=[];var _t=ss(Pt.headChunks,k,"head")}else _t=Fn(y,k,"head");return _t;case"body":if(2>ve.insertionMode){var et=J||B.preamble;if(et.bodyChunks)throw Error(t(545,"`<body>`"));J!==null&&y.push("<!--body-->"),et.bodyChunks=[];var bt=ss(et.bodyChunks,k,"body")}else bt=Fn(y,k,"body");return bt;case"html":if(ve.insertionMode===0){var Qt=J||B.preamble;if(Qt.htmlChunks)throw Error(t(545,"`<html>`"));J!==null&&y.push("<!--html-->"),Qt.htmlChunks=[""];var Zs=ss(Qt.htmlChunks,k,"html")}else Zs=Fn(y,k,"html");return Zs;default:if(S.indexOf("-")!==-1){y.push(hn(S));var Js=null,yt=null,js;for(js in k)if(K.call(k,js)){var Ln=k[js];if(Ln!=null){var ws=js;switch(js){case"children":Js=Ln;break;case"dangerouslySetInnerHTML":yt=Ln;break;case"style":He(y,Ln);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"ref":break;case"className":ws="class";default:if(_e(js)&&typeof Ln!="function"&&typeof Ln!="symbol"&&Ln!==!1){if(Ln===!0)Ln="";else if(typeof Ln=="object")continue;y.push(" ",ws,'="',H(Ln),'"')}}}}return y.push(">"),St(y,yt,Js),Js}}return Fn(y,k,S)}var ie=new Map;function ke(y){var S=ie.get(y);return S===void 0&&(S="</"+y+">",ie.set(y,S)),S}function Ge(y,S){y=y.preamble,y.htmlChunks===null&&S.htmlChunks&&(y.htmlChunks=S.htmlChunks),y.headChunks===null&&S.headChunks&&(y.headChunks=S.headChunks),y.bodyChunks===null&&S.bodyChunks&&(y.bodyChunks=S.bodyChunks)}function Ze(y,S){S=S.bootstrapChunks;for(var k=0;k<S.length-1;k++)y.push(S[k]);return k<S.length?(k=S[k],S.length=0,y.push(k)):!0}function pt(y,S,k){if(y.push('<!--$?--><template id="'),k===null)throw Error(t(395));return y.push(S.boundaryPrefix),S=k.toString(16),y.push(S),y.push('"></template>')}function st(y,S,k,O){switch(k.insertionMode){case 0:case 1:case 3:case 2:return y.push('<div hidden id="'),y.push(S.segmentPrefix),S=O.toString(16),y.push(S),y.push('">');case 4:return y.push('<svg aria-hidden="true" style="display:none" id="'),y.push(S.segmentPrefix),S=O.toString(16),y.push(S),y.push('">');case 5:return y.push('<math aria-hidden="true" style="display:none" id="'),y.push(S.segmentPrefix),S=O.toString(16),y.push(S),y.push('">');case 6:return y.push('<table hidden id="'),y.push(S.segmentPrefix),S=O.toString(16),y.push(S),y.push('">');case 7:return y.push('<table hidden><tbody id="'),y.push(S.segmentPrefix),S=O.toString(16),y.push(S),y.push('">');case 8:return y.push('<table hidden><tr id="'),y.push(S.segmentPrefix),S=O.toString(16),y.push(S),y.push('">');case 9:return y.push('<table hidden><colgroup id="'),y.push(S.segmentPrefix),S=O.toString(16),y.push(S),y.push('">');default:throw Error(t(397))}}function Ut(y,S){switch(S.insertionMode){case 0:case 1:case 3:case 2:return y.push("</div>");case 4:return y.push("</svg>");case 5:return y.push("</math>");case 6:return y.push("</table>");case 7:return y.push("</tbody></table>");case 8:return y.push("</tr></table>");case 9:return y.push("</colgroup></table>");default:throw Error(t(397))}}var rn=/[<\u2028\u2029]/g;function dt(y){return JSON.stringify(y).replace(rn,function(S){switch(S){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var ps=/[&><\u2028\u2029]/g;function wi(y){return JSON.stringify(y).replace(ps,function(S){switch(S){case"&":return"\\u0026";case">":return"\\u003e";case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSObjectForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var Vs=!1,wn=!0;function xs(y){var S=y.rules,k=y.hrefs,O=0;if(k.length){for(this.push(Ve.startInlineStyle),this.push(' media="not all" data-precedence="'),this.push(y.precedence),this.push('" data-href="');O<k.length-1;O++)this.push(k[O]),this.push(" ");for(this.push(k[O]),this.push('">'),O=0;O<S.length;O++)this.push(S[O]);wn=this.push("</style>"),Vs=!0,S.length=0,k.length=0}}function fn(y){return y.state!==2?Vs=!0:!1}function Bi(y,S,k){return Vs=!1,wn=!0,Ve=k,S.styles.forEach(xs,y),Ve=null,S.stylesheets.forEach(fn),Vs&&(k.stylesToHoist=!0),wn}function bs(y){for(var S=0;S<y.length;S++)this.push(y[S]);y.length=0}var $t=[];function Os(y){Lt($t,y.props);for(var S=0;S<$t.length;S++)this.push($t[S]);$t.length=0,y.state=2}function Si(y){var S=0<y.sheets.size;y.sheets.forEach(Os,this),y.sheets.clear();var k=y.rules,O=y.hrefs;if(!S||O.length){if(this.push(Ve.startInlineStyle),this.push(' data-precedence="'),this.push(y.precedence),y=0,O.length){for(this.push('" data-href="');y<O.length-1;y++)this.push(O[y]),this.push(" ");this.push(O[y])}for(this.push('">'),y=0;y<k.length;y++)this.push(k[y]);this.push("</style>"),k.length=0,O.length=0}}function io(y){if(y.state===0){y.state=1;var S=y.props;for(Lt($t,{rel:"preload",as:"style",href:y.props.href,crossOrigin:S.crossOrigin,fetchPriority:S.fetchPriority,integrity:S.integrity,media:S.media,hrefLang:S.hrefLang,referrerPolicy:S.referrerPolicy}),y=0;y<$t.length;y++)this.push($t[y]);$t.length=0}}function Nd(y){y.sheets.forEach(io,this),y.sheets.clear()}function Ac(y,S){(S.instructions&32)===0&&(S.instructions|=32,y.push(' id="',H("_"+S.idPrefix+"R_"),'"'))}function gf(y,S){y.push("[");var k="[";S.stylesheets.forEach(function(O){if(O.state!==2)if(O.state===3)y.push(k),O=wi(""+O.props.href),y.push(O),y.push("]"),k=",[";else{y.push(k);var B=O.props["data-precedence"],J=O.props,$=G(""+O.props.href);$=wi($),y.push($),B=""+B,y.push(","),B=wi(B),y.push(B);for(var ve in J)if(K.call(J,ve)&&(B=J[ve],B!=null))switch(ve){case"href":case"rel":case"precedence":case"data-precedence":break;case"children":case"dangerouslySetInnerHTML":throw Error(t(399,"link"));default:gn(y,ve,B)}y.push("]"),k=",[",O.state=3}}),y.push("]")}function gn(y,S,k){var O=S.toLowerCase();switch(typeof k){case"function":case"symbol":return}switch(S){case"innerHTML":case"dangerouslySetInnerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":case"style":case"ref":return;case"className":O="class",S=""+k;break;case"hidden":if(k===!1)return;S="";break;case"src":case"href":k=G(k),S=""+k;break;default:if(2<S.length&&(S[0]==="o"||S[0]==="O")&&(S[1]==="n"||S[1]==="N")||!_e(S))return;S=""+k}y.push(","),O=wi(O),y.push(O),y.push(","),O=wi(S),y.push(O)}function bn(){return{styles:new Set,stylesheets:new Set,suspenseyImages:!1}}function Po(y){var S=Gs||null;if(S){var k=S.resumableState,O=S.renderState;if(typeof y=="string"&&y){if(!k.dnsResources.hasOwnProperty(y)){k.dnsResources[y]=null,k=O.headers;var B,J;(J=k&&0<k.remainingCapacity)&&(J=(B="<"+(""+y).replace(wr,Ad)+">; rel=dns-prefetch",0<=(k.remainingCapacity-=B.length+2))),J?(O.resets.dns[y]=null,k.preconnects&&(k.preconnects+=", "),k.preconnects+=B):(B=[],Lt(B,{href:y,rel:"dns-prefetch"}),O.preconnects.add(B))}Pa(S)}}else Ae.D(y)}function Ls(y,S){var k=Gs||null;if(k){var O=k.resumableState,B=k.renderState;if(typeof y=="string"&&y){var J=S==="use-credentials"?"credentials":typeof S=="string"?"anonymous":"default";if(!O.connectResources[J].hasOwnProperty(y)){O.connectResources[J][y]=null,O=B.headers;var $,ve;if(ve=O&&0<O.remainingCapacity){if(ve="<"+(""+y).replace(wr,Ad)+">; rel=preconnect",typeof S=="string"){var ae=(""+S).replace(Sr,Cc);ve+='; crossorigin="'+ae+'"'}ve=($=ve,0<=(O.remainingCapacity-=$.length+2))}ve?(B.resets.connect[J][y]=null,O.preconnects&&(O.preconnects+=", "),O.preconnects+=$):(J=[],Lt(J,{rel:"preconnect",href:y,crossOrigin:S}),B.preconnects.add(J))}Pa(k)}}else Ae.C(y,S)}function Tl(y,S,k){var O=Gs||null;if(O){var B=O.resumableState,J=O.renderState;if(S&&y){switch(S){case"image":if(k)var $=k.imageSrcSet,ve=k.imageSizes,ae=k.fetchPriority;var we=$?$+`
`+(ve||""):y;if(B.imageResources.hasOwnProperty(we))return;B.imageResources[we]=Pe,B=J.headers;var Oe;B&&0<B.remainingCapacity&&typeof $!="string"&&ae==="high"&&(Oe=zn(y,S,k),0<=(B.remainingCapacity-=Oe.length+2))?(J.resets.image[we]=Pe,B.highImagePreloads&&(B.highImagePreloads+=", "),B.highImagePreloads+=Oe):(B=[],Lt(B,Y({rel:"preload",href:$?void 0:y,as:S},k)),ae==="high"?J.highImagePreloads.add(B):(J.bulkPreloads.add(B),J.preloads.images.set(we,B)));break;case"style":if(B.styleResources.hasOwnProperty(y))return;$=[],Lt($,Y({rel:"preload",href:y,as:S},k)),B.styleResources[y]=!k||typeof k.crossOrigin!="string"&&typeof k.integrity!="string"?Pe:[k.crossOrigin,k.integrity],J.preloads.stylesheets.set(y,$),J.bulkPreloads.add($);break;case"script":if(B.scriptResources.hasOwnProperty(y))return;$=[],J.preloads.scripts.set(y,$),J.bulkPreloads.add($),Lt($,Y({rel:"preload",href:y,as:S},k)),B.scriptResources[y]=!k||typeof k.crossOrigin!="string"&&typeof k.integrity!="string"?Pe:[k.crossOrigin,k.integrity];break;default:if(B.unknownResources.hasOwnProperty(S)){if($=B.unknownResources[S],$.hasOwnProperty(y))return}else $={},B.unknownResources[S]=$;$[y]=Pe,(B=J.headers)&&0<B.remainingCapacity&&S==="font"&&(we=zn(y,S,k),0<=(B.remainingCapacity-=we.length+2))?(J.resets.font[y]=Pe,B.fontPreloads&&(B.fontPreloads+=", "),B.fontPreloads+=we):(B=[],y=Y({rel:"preload",href:y,as:S},k),Lt(B,y),S)==="font"?J.fontPreloads.add(B):J.bulkPreloads.add(B)}Pa(O)}}else Ae.L(y,S,k)}function Oo(y,S){var k=Gs||null;if(k){var O=k.resumableState,B=k.renderState;if(y){var J=S&&typeof S.as=="string"?S.as:"script";switch(J){case"script":if(O.moduleScriptResources.hasOwnProperty(y))return;J=[],O.moduleScriptResources[y]=!S||typeof S.crossOrigin!="string"&&typeof S.integrity!="string"?Pe:[S.crossOrigin,S.integrity],B.preloads.moduleScripts.set(y,J);break;default:if(O.moduleUnknownResources.hasOwnProperty(J)){var $=O.unknownResources[J];if($.hasOwnProperty(y))return}else $={},O.moduleUnknownResources[J]=$;J=[],$[y]=Pe}Lt(J,Y({rel:"modulepreload",href:y},S)),B.bulkPreloads.add(J),Pa(k)}}else Ae.m(y,S)}function Lo(y,S,k){var O=Gs||null;if(O){var B=O.resumableState,J=O.renderState;if(y){S=S||"default";var $=J.styles.get(S),ve=B.styleResources.hasOwnProperty(y)?B.styleResources[y]:void 0;ve!==null&&(B.styleResources[y]=null,$||($={precedence:H(S),rules:[],hrefs:[],sheets:new Map},J.styles.set(S,$)),S={state:0,props:Y({rel:"stylesheet",href:y,"data-precedence":S},k)},ve&&(ve.length===2&&_l(S.props,ve),(J=J.preloads.stylesheets.get(y))&&0<J.length?J.length=0:S.state=1),$.sheets.set(y,S),Pa(O))}}else Ae.S(y,S,k)}function Ts(y,S){var k=Gs||null;if(k){var O=k.resumableState,B=k.renderState;if(y){var J=O.scriptResources.hasOwnProperty(y)?O.scriptResources[y]:void 0;J!==null&&(O.scriptResources[y]=null,S=Y({src:y,async:!0},S),J&&(J.length===2&&_l(S,J),y=B.preloads.scripts.get(y))&&(y.length=0),y=[],B.scripts.add(y),yn(y,S),Pa(k))}}else Ae.X(y,S)}function pf(y,S){var k=Gs||null;if(k){var O=k.resumableState,B=k.renderState;if(y){var J=O.moduleScriptResources.hasOwnProperty(y)?O.moduleScriptResources[y]:void 0;J!==null&&(O.moduleScriptResources[y]=null,S=Y({src:y,type:"module",async:!0},S),J&&(J.length===2&&_l(S,J),y=B.preloads.moduleScripts.get(y))&&(y.length=0),y=[],B.scripts.add(y),yn(y,S),Pa(k))}}else Ae.M(y,S)}function _l(y,S){y.crossOrigin==null&&(y.crossOrigin=S[0]),y.integrity==null&&(y.integrity=S[1])}function zn(y,S,k){y=(""+y).replace(wr,Ad),S=(""+S).replace(Sr,Cc),S="<"+y+'>; rel=preload; as="'+S+'"';for(var O in k)K.call(k,O)&&(y=k[O],typeof y=="string"&&(S+="; "+O.toLowerCase()+'="'+(""+y).replace(Sr,Cc)+'"'));return S}var wr=/[<>\r\n]/g;function Ad(y){switch(y){case"<":return"%3C";case">":return"%3E";case`
`:return"%0A";case"\r":return"%0D";default:throw Error("escapeLinkHrefForHeaderContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}var Sr=/["';,\r\n]/g;function Cc(y){switch(y){case'"':return"%22";case"'":return"%27";case";":return"%3B";case",":return"%2C";case`
`:return"%0A";case"\r":return"%0D";default:throw Error("escapeStringForLinkHeaderQuotedParamValueContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}function ig(y){this.styles.add(y)}function Cd(y){this.stylesheets.add(y)}function Nr(y,S){S.styles.forEach(ig,y),S.stylesheets.forEach(Cd,y),S.suspenseyImages&&(y.suspenseyImages=!0)}function ha(y,S){var k=y.idPrefix,O=[],B=y.bootstrapScriptContent,J=y.bootstrapScripts,$=y.bootstrapModules;B!==void 0&&(O.push("<script"),Ac(O,y),O.push(">",(""+B).replace(Nt,ht),"<\/script>")),B=k+"P:";var ve=k+"S:";k+="B:";var ae=new Set,we=new Set,Oe=new Set,Te=new Map,Xe=new Set,rt=new Set,zt=new Set,kt={images:new Map,stylesheets:new Map,scripts:new Map,moduleScripts:new Map};if(J!==void 0)for(var Tt=0;Tt<J.length;Tt++){var Et=J[Tt],Mt,pn=void 0,Wn=void 0,Zt={rel:"preload",as:"script",fetchPriority:"low",nonce:void 0};typeof Et=="string"?Zt.href=Mt=Et:(Zt.href=Mt=Et.src,Zt.integrity=Wn=typeof Et.integrity=="string"?Et.integrity:void 0,Zt.crossOrigin=pn=typeof Et=="string"||Et.crossOrigin==null?void 0:Et.crossOrigin==="use-credentials"?"use-credentials":""),Et=y;var Jt=Mt;Et.scriptResources[Jt]=null,Et.moduleScriptResources[Jt]=null,Et=[],Lt(Et,Zt),Xe.add(Et),O.push('<script src="',H(Mt),'"'),typeof Wn=="string"&&O.push(' integrity="',H(Wn),'"'),typeof pn=="string"&&O.push(' crossorigin="',H(pn),'"'),Ac(O,y),O.push(' async=""><\/script>')}if($!==void 0)for(J=0;J<$.length;J++)Zt=$[J],pn=Mt=void 0,Wn={rel:"modulepreload",fetchPriority:"low",nonce:void 0},typeof Zt=="string"?Wn.href=Tt=Zt:(Wn.href=Tt=Zt.src,Wn.integrity=pn=typeof Zt.integrity=="string"?Zt.integrity:void 0,Wn.crossOrigin=Mt=typeof Zt=="string"||Zt.crossOrigin==null?void 0:Zt.crossOrigin==="use-credentials"?"use-credentials":""),Zt=y,Et=Tt,Zt.scriptResources[Et]=null,Zt.moduleScriptResources[Et]=null,Zt=[],Lt(Zt,Wn),Xe.add(Zt),O.push('<script type="module" src="',H(Tt),'"'),typeof pn=="string"&&O.push(' integrity="',H(pn),'"'),typeof Mt=="string"&&O.push(' crossorigin="',H(Mt),'"'),Ac(O,y),O.push(' async=""><\/script>');return{placeholderPrefix:B,segmentPrefix:ve,boundaryPrefix:k,startInlineScript:"<script",startInlineStyle:"<style",preamble:{htmlChunks:null,headChunks:null,bodyChunks:null},externalRuntimeScript:null,bootstrapChunks:O,importMapChunks:[],onHeaders:void 0,headers:null,resets:{font:{},dns:{},connect:{default:{},anonymous:{},credentials:{}},image:{},style:{}},charsetChunks:[],viewportChunks:[],hoistableChunks:[],preconnects:ae,fontPreloads:we,highImagePreloads:Oe,styles:Te,bootstrapScripts:Xe,scripts:rt,bulkPreloads:zt,preloads:kt,nonce:{script:void 0,style:void 0},stylesToHoist:!1,generateStaticMarkup:S}}function Ni(y,S,k,O){return k.generateStaticMarkup?(y.push(H(S)),!1):(S===""?y=O:(O&&y.push("<!-- -->"),y.push(H(S)),y=!0),y)}function Ar(y,S,k,O){S.generateStaticMarkup||k&&O&&y.push("<!-- -->")}var Ku=Function.prototype.bind,Zu=Symbol.for("react.client.reference");function jl(y){if(y==null)return null;if(typeof y=="function")return y.$$typeof===Zu?null:y.displayName||y.name||null;if(typeof y=="string")return y;switch(y){case a:return"Fragment";case c:return"Profiler";case o:return"StrictMode";case g:return"Suspense";case x:return"SuspenseList";case E:return"Activity"}if(typeof y=="object")switch(y.$$typeof){case i:return"Portal";case h:return y.displayName||"Context";case u:return(y._context.displayName||"Context")+".Consumer";case f:var S=y.render;return y=y.displayName,y||(y=S.displayName||S.name||"",y=y!==""?"ForwardRef("+y+")":"ForwardRef"),y;case w:return S=y.displayName||null,S!==null?S:jl(y.type)||"Memo";case A:S=y._payload,y=y._init;try{return jl(y(S))}catch{}}return null}var Jn={},Fo=null;function Ai(y,S){if(y!==S){y.context._currentValue2=y.parentValue,y=y.parent;var k=S.parent;if(y===null){if(k!==null)throw Error(t(401))}else{if(k===null)throw Error(t(401));Ai(y,k)}S.context._currentValue2=S.value}}function Ec(y){y.context._currentValue2=y.parentValue,y=y.parent,y!==null&&Ec(y)}function Cr(y){var S=y.parent;S!==null&&Cr(S),y.context._currentValue2=y.value}function Tc(y,S){if(y.context._currentValue2=y.parentValue,y=y.parent,y===null)throw Error(t(402));y.depth===S.depth?Ai(y,S):Tc(y,S)}function ao(y,S){var k=S.parent;if(k===null)throw Error(t(402));y.depth===k.depth?Ai(y,k):ao(y,k),S.context._currentValue2=S.value}function Er(y){var S=Fo;S!==y&&(S===null?Cr(y):y===null?Ec(S):S.depth===y.depth?Ai(S,y):S.depth>y.depth?Tc(S,y):ao(S,y),Fo=y)}var Ju={enqueueSetState:function(y,S){y=y._reactInternals,y.queue!==null&&y.queue.push(S)},enqueueReplaceState:function(y,S){y=y._reactInternals,y.replace=!0,y.queue=[S]},enqueueForceUpdate:function(){}},kl={id:1,overflow:""};function zo(y,S,k){var O=y.id;y=y.overflow;var B=32-_c(O)-1;O&=~(1<<B),k+=1;var J=32-_c(S)+B;if(30<J){var $=B-B%5;return J=(O&(1<<$)-1).toString(32),O>>=$,B-=$,{id:1<<32-_c(S)+B|k<<B|O,overflow:J+y}}return{id:1<<J|k<<B|O,overflow:y}}var _c=Math.clz32?Math.clz32:ag,xf=Math.log,Qu=Math.LN2;function ag(y){return y>>>=0,y===0?32:31-(xf(y)/Qu|0)|0}function Ci(){}var oi=Error(t(460));function Tr(y,S,k){switch(k=y[k],k===void 0?y.push(S):k!==S&&(S.then(Ci,Ci),S=k),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(Ci,Ci):(y=S,y.status="pending",y.then(function(O){if(S.status==="pending"){var B=S;B.status="fulfilled",B.value=O}},function(O){if(S.status==="pending"){var B=S;B.status="rejected",B.reason=O}})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}throw Rl=S,oi}}var Rl=null;function Dl(){if(Rl===null)throw Error(t(459));var y=Rl;return Rl=null,y}function Ml(y,S){return y===S&&(y!==0||1/y===1/S)||y!==y&&S!==S}var Io=typeof Object.is=="function"?Object.is:Ml,Za=null,jc=null,Ed=null,Bo=null,fa=null,Sn=null,_r=!1,Ra=!1,Ho=0,ro=0,Pl=-1,Uo=0,jr=null,kr=null,Ws=0;function Ei(){if(Za===null)throw Error(t(321));return Za}function kc(){if(0<Ws)throw Error(t(312));return{memoizedState:null,queue:null,next:null}}function Vo(){return Sn===null?fa===null?(_r=!1,fa=Sn=kc()):(_r=!0,Sn=fa):Sn.next===null?(_r=!1,Sn=Sn.next=kc()):(_r=!0,Sn=Sn.next),Sn}function Ol(){var y=jr;return jr=null,y}function Wo(){Bo=Ed=jc=Za=null,Ra=!1,fa=null,Ws=0,Sn=kr=null}function Td(y,S){return typeof S=="function"?S(y):S}function Ll(y,S,k){if(Za=Ei(),Sn=Vo(),_r){var O=Sn.queue;if(S=O.dispatch,kr!==null&&(k=kr.get(O),k!==void 0)){kr.delete(O),O=Sn.memoizedState;do O=y(O,k.action),k=k.next;while(k!==null);return Sn.memoizedState=O,[O,S]}return[Sn.memoizedState,S]}return y=y===Td?typeof S=="function"?S():S:k!==void 0?k(S):S,Sn.memoizedState=y,y=Sn.queue={last:null,dispatch:null},y=y.dispatch=bf.bind(null,Za,y),[Sn.memoizedState,y]}function Rc(y,S){if(Za=Ei(),Sn=Vo(),S=S===void 0?null:S,Sn!==null){var k=Sn.memoizedState;if(k!==null&&S!==null){var O=k[1];e:if(O===null)O=!1;else{for(var B=0;B<O.length&&B<S.length;B++)if(!Io(S[B],O[B])){O=!1;break e}O=!0}if(O)return k[0]}}return y=y(),Sn.memoizedState=[y,S],y}function bf(y,S,k){if(25<=Ws)throw Error(t(301));if(y===Za)if(Ra=!0,y={action:k,next:null},kr===null&&(kr=new Map),k=kr.get(S),k===void 0)kr.set(S,y);else{for(S=k;S.next!==null;)S=S.next;S.next=y}}function rg(){throw Error(t(440))}function og(){throw Error(t(394))}function lg(){throw Error(t(479))}function Dc(y,S,k){Ei();var O=ro++,B=Ed;if(typeof y.$$FORM_ACTION=="function"){var J=null,$=Bo;B=B.formState;var ve=y.$$IS_SIGNATURE_EQUAL;if(B!==null&&typeof ve=="function"){var ae=B[1];ve.call(y,B[2],B[3])&&(J=k!==void 0?"p"+k:"k"+V(JSON.stringify([$,null,O]),0),ae===J&&(Pl=O,S=B[0]))}var we=y.bind(null,S);return y=function(Te){we(Te)},typeof we.$$FORM_ACTION=="function"&&(y.$$FORM_ACTION=function(Te){Te=we.$$FORM_ACTION(Te),k!==void 0&&(k+="",Te.action=k);var Xe=Te.data;return Xe&&(J===null&&(J=k!==void 0?"p"+k:"k"+V(JSON.stringify([$,null,O]),0)),Xe.append("$ACTION_KEY",J)),Te}),[S,y,!1]}var Oe=y.bind(null,S);return[S,function(Te){Oe(Te)},!1]}function yf(y){var S=Uo;return Uo+=1,jr===null&&(jr=[]),Tr(jr,y,S)}function cg(){throw Error(t(393))}var vf={readContext:function(y){return y._currentValue2},use:function(y){if(y!==null&&typeof y=="object"){if(typeof y.then=="function")return yf(y);if(y.$$typeof===h)return y._currentValue2}throw Error(t(438,String(y)))},useContext:function(y){return Ei(),y._currentValue2},useMemo:Rc,useReducer:Ll,useRef:function(y){Za=Ei(),Sn=Vo();var S=Sn.memoizedState;return S===null?(y={current:y},Sn.memoizedState=y):S},useState:function(y){return Ll(Td,y)},useInsertionEffect:Ci,useLayoutEffect:Ci,useCallback:function(y,S){return Rc(function(){return y},S)},useImperativeHandle:Ci,useEffect:Ci,useDebugValue:Ci,useDeferredValue:function(y,S){return Ei(),S!==void 0?S:y},useTransition:function(){return Ei(),[!1,og]},useId:function(){var y=jc.treeContext,S=y.overflow;y=y.id,y=(y&~(1<<32-_c(y)-1)).toString(32)+S;var k=_d;if(k===null)throw Error(t(404));return S=Ho++,y="_"+k.idPrefix+"R_"+y,0<S&&(y+="H"+S.toString(32)),y+"_"},useSyncExternalStore:function(y,S,k){if(k===void 0)throw Error(t(407));return k()},useOptimistic:function(y){return Ei(),[y,lg]},useActionState:Dc,useFormState:Dc,useHostTransitionStatus:function(){return Ei(),fe},useMemoCache:function(y){for(var S=Array(y),k=0;k<y;k++)S[k]=D;return S},useCacheRefresh:function(){return cg},useEffectEvent:function(){return rg}},_d=null,dg={getCacheForType:function(){throw Error(t(248))},cacheSignal:function(){throw Error(t(248))}},jd,wf;function Fl(y){if(jd===void 0)try{throw Error()}catch(k){var S=k.stack.trim().match(/\n( *(at )?)/);jd=S&&S[1]||"",wf=-1<k.stack.indexOf(`
    at`)?" (<anonymous>)":-1<k.stack.indexOf("@")?"@unknown:0:0":""}return`
`+jd+y+wf}var qu=!1;function kd(y,S){if(!y||qu)return"";qu=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var O={DetermineComponentFrameRoot:function(){try{if(S){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(rt){var Xe=rt}Reflect.construct(y,[],Te)}else{try{Te.call()}catch(rt){Xe=rt}y.call(Te.prototype)}}else{try{throw Error()}catch(rt){Xe=rt}(Te=y())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(rt){if(rt&&Xe&&typeof rt.stack=="string")return[rt.stack,Xe.stack]}return[null,null]}};O.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var B=Object.getOwnPropertyDescriptor(O.DetermineComponentFrameRoot,"name");B&&B.configurable&&Object.defineProperty(O.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var J=O.DetermineComponentFrameRoot(),$=J[0],ve=J[1];if($&&ve){var ae=$.split(`
`),we=ve.split(`
`);for(B=O=0;O<ae.length&&!ae[O].includes("DetermineComponentFrameRoot");)O++;for(;B<we.length&&!we[B].includes("DetermineComponentFrameRoot");)B++;if(O===ae.length||B===we.length)for(O=ae.length-1,B=we.length-1;1<=O&&0<=B&&ae[O]!==we[B];)B--;for(;1<=O&&0<=B;O--,B--)if(ae[O]!==we[B]){if(O!==1||B!==1)do if(O--,B--,0>B||ae[O]!==we[B]){var Oe=`
`+ae[O].replace(" at new "," at ");return y.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",y.displayName)),Oe}while(1<=O&&0<=B);break}}}finally{qu=!1,Error.prepareStackTrace=k}return(k=y?y.displayName||y.name:"")?Fl(k):""}function Rd(y){if(typeof y=="string")return Fl(y);if(typeof y=="function")return y.prototype&&y.prototype.isReactComponent?kd(y,!0):kd(y,!1);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case f:return kd(y.render,!1);case w:return kd(y.type,!1);case A:var S=y,k=S._payload;S=S._init;try{y=S(k)}catch{return Fl("Lazy")}return Rd(y)}if(typeof y.name=="string"){e:{k=y.name,S=y.env;var O=y.debugLocation;if(O!=null&&(y=Error.prepareStackTrace,Error.prepareStackTrace=void 0,O=O.stack,Error.prepareStackTrace=y,O.startsWith(`Error: react-stack-top-frame
`)&&(O=O.slice(29)),y=O.indexOf(`
`),y!==-1&&(O=O.slice(y+1)),y=O.indexOf("react_stack_bottom_frame"),y!==-1&&(y=O.lastIndexOf(`
`,y)),y=y!==-1?O=O.slice(0,y):"",O=y.lastIndexOf(`
`),y=O===-1?y:y.slice(O+1),y.indexOf(k)!==-1)){k=`
`+y;break e}k=Fl(k+(S?" ["+S+"]":""))}return k}}switch(y){case x:return Fl("SuspenseList");case g:return Fl("Suspense")}return""}function zl(y,S){return(500<S.byteSize||!1)&&S.contentPreamble===null}function ug(y){if(typeof y=="object"&&y!==null&&typeof y.environmentName=="string"){var S=y.environmentName;y=[y].slice(0),typeof y[0]=="string"?y.splice(0,1,"[%s] "+y[0]," "+S+" "):y.splice(0,0,"[%s]"," "+S+" "),y.unshift(console),S=Ku.apply(console.error,y),S()}else console.error(y);return null}function hg(y,S,k,O,B,J,$,ve,ae,we,Oe){var Te=new Set;this.destination=null,this.flushScheduled=!1,this.resumableState=y,this.renderState=S,this.rootFormatContext=k,this.progressiveChunkSize=O===void 0?12800:O,this.status=10,this.fatalError=null,this.pendingRootTasks=this.allPendingTasks=this.nextSegmentId=0,this.completedPreambleSegments=this.completedRootSegment=null,this.byteSize=0,this.abortableTasks=Te,this.pingedTasks=[],this.clientRenderedBoundaries=[],this.completedBoundaries=[],this.partialBoundaries=[],this.trackedPostpones=null,this.onError=B===void 0?ug:B,this.onPostpone=we===void 0?Ci:we,this.onAllReady=J===void 0?Ci:J,this.onShellReady=$===void 0?Ci:$,this.onShellError=ve===void 0?Ci:ve,this.onFatalError=ae===void 0?Ci:ae,this.formState=Oe===void 0?null:Oe}function Sf(y,S,k,O,B,J,$,ve,ae,we,Oe,Te){return S=new hg(S,k,O,B,J,$,ve,ae,we,Oe,Te),k=Go(S,0,null,O,!1,!1),k.parentFlushed=!0,y=Dd(S,null,y,-1,null,k,null,null,S.abortableTasks,null,O,null,kl,null,null),oo(y),S.pingedTasks.push(y),S}var Gs=null;function Il(y,S){y.pingedTasks.push(S),y.pingedTasks.length===1&&(y.flushScheduled=y.destination!==null,Af(y))}function $u(y,S,k,O,B){return k={status:0,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,row:S,completedSegments:[],byteSize:0,fallbackAbortableTasks:k,errorDigest:null,contentState:bn(),fallbackState:bn(),contentPreamble:O,fallbackPreamble:B,trackedContentKeyPath:null,trackedFallbackNode:null},S!==null&&(S.pendingTasks++,O=S.boundaries,O!==null&&(y.allPendingTasks++,k.pendingTasks++,O.push(k)),y=S.inheritedHoistables,y!==null&&Nr(k.contentState,y)),k}function Dd(y,S,k,O,B,J,$,ve,ae,we,Oe,Te,Xe,rt,zt){y.allPendingTasks++,B===null?y.pendingRootTasks++:B.pendingTasks++,rt!==null&&rt.pendingTasks++;var kt={replay:null,node:k,childIndex:O,ping:function(){return Il(y,kt)},blockedBoundary:B,blockedSegment:J,blockedPreamble:$,hoistableState:ve,abortSet:ae,keyPath:we,formatContext:Oe,context:Te,treeContext:Xe,row:rt,componentStack:zt,thenableState:S};return ae.add(kt),kt}function Nf(y,S,k,O,B,J,$,ve,ae,we,Oe,Te,Xe,rt){y.allPendingTasks++,J===null?y.pendingRootTasks++:J.pendingTasks++,Xe!==null&&Xe.pendingTasks++,k.pendingTasks++;var zt={replay:k,node:O,childIndex:B,ping:function(){return Il(y,zt)},blockedBoundary:J,blockedSegment:null,blockedPreamble:null,hoistableState:$,abortSet:ve,keyPath:ae,formatContext:we,context:Oe,treeContext:Te,row:Xe,componentStack:rt,thenableState:S};return ve.add(zt),zt}function Go(y,S,k,O,B,J){return{status:0,parentFlushed:!1,id:-1,index:S,chunks:[],children:[],preambleChildren:[],parentFormatContext:O,boundary:k,lastPushedText:B,textEmbedded:J}}function oo(y){var S=y.node;typeof S=="object"&&S!==null&&S.$$typeof===s&&(y.componentStack={parent:y.componentStack,type:S.type})}function Mc(y){return y===null?null:{parent:y.parent,type:"Suspense Fallback"}}function lo(y){var S={};return y&&Object.defineProperty(S,"componentStack",{configurable:!0,enumerable:!0,get:function(){try{var k="",O=y;do k+=Rd(O.type),O=O.parent;while(O);var B=k}catch(J){B=`
Error generating stack: `+J.message+`
`+J.stack}return Object.defineProperty(S,"componentStack",{value:B}),B}}),S}function Fs(y,S,k){if(y=y.onError,S=y(S,k),S==null||typeof S=="string")return S}function Ja(y,S){var k=y.onShellError,O=y.onFatalError;k(S),O(S),y.destination!==null?(y.status=14,y.destination.destroy(S)):(y.status=13,y.fatalError=S)}function Dn(y,S){Da(y,S.next,S.hoistables)}function Da(y,S,k){for(;S!==null;){k!==null&&(Nr(S.hoistables,k),S.inheritedHoistables=k);var O=S.boundaries;if(O!==null){S.boundaries=null;for(var B=0;B<O.length;B++){var J=O[B];k!==null&&Nr(J.contentState,k),uo(y,J,null,null)}}if(S.pendingTasks--,0<S.pendingTasks)break;k=S.hoistables,S=S.next}}function Md(y,S){var k=S.boundaries;if(k!==null&&S.pendingTasks===k.length){for(var O=!0,B=0;B<k.length;B++){var J=k[B];if(J.pendingTasks!==1||J.parentFlushed||zl(y,J)){O=!1;break}}O&&Da(y,S,S.hoistables)}}function Bl(y){var S={pendingTasks:1,boundaries:null,hoistables:bn(),inheritedHoistables:null,together:!1,next:null};return y!==null&&0<y.pendingTasks&&(S.pendingTasks++,S.boundaries=[],y.next=S),S}function eh(y,S,k,O,B){var J=S.keyPath,$=S.treeContext,ve=S.row;S.keyPath=k,k=O.length;var ae=null;if(S.replay!==null){var we=S.replay.slots;if(we!==null&&typeof we=="object")for(var Oe=0;Oe<k;Oe++){var Te=B!=="backwards"&&B!=="unstable_legacy-backwards"?Oe:k-1-Oe,Xe=O[Te];S.row=ae=Bl(ae),S.treeContext=zo($,k,Te);var rt=we[Te];typeof rt=="number"?(Ld(y,S,rt,Xe,Te),delete we[Te]):_s(y,S,Xe,Te),--ae.pendingTasks===0&&Dn(y,ae)}else for(we=0;we<k;we++)Oe=B!=="backwards"&&B!=="unstable_legacy-backwards"?we:k-1-we,Te=O[Oe],S.row=ae=Bl(ae),S.treeContext=zo($,k,Oe),_s(y,S,Te,Oe),--ae.pendingTasks===0&&Dn(y,ae)}else if(B!=="backwards"&&B!=="unstable_legacy-backwards")for(B=0;B<k;B++)we=O[B],S.row=ae=Bl(ae),S.treeContext=zo($,k,B),_s(y,S,we,B),--ae.pendingTasks===0&&Dn(y,ae);else{for(B=S.blockedSegment,we=B.children.length,Oe=B.chunks.length,Te=k-1;0<=Te;Te--){Xe=O[Te],S.row=ae=Bl(ae),S.treeContext=zo($,k,Te),rt=Go(y,Oe,null,S.formatContext,Te===0?B.lastPushedText:!0,!0),B.children.splice(we,0,rt),S.blockedSegment=rt;try{_s(y,S,Xe,Te),Ar(rt.chunks,y.renderState,rt.lastPushedText,rt.textEmbedded),rt.status=1,--ae.pendingTasks===0&&Dn(y,ae)}catch(zt){throw rt.status=y.status===12?3:4,zt}}S.blockedSegment=B,B.lastPushedText=!1}ve!==null&&ae!==null&&0<ae.pendingTasks&&(ve.pendingTasks++,ae.next=ve),S.treeContext=$,S.row=ve,S.keyPath=J}function Pd(y,S,k,O,B,J){var $=S.thenableState;for(S.thenableState=null,Za={},jc=S,Ed=y,Bo=k,ro=Ho=0,Pl=-1,Uo=0,jr=$,y=O(B,J);Ra;)Ra=!1,ro=Ho=0,Pl=-1,Uo=0,Ws+=1,Sn=null,y=O(B,J);return Wo(),y}function Yo(y,S,k,O,B,J,$){var ve=!1;if(J!==0&&y.formState!==null){var ae=S.blockedSegment;if(ae!==null){ve=!0,ae=ae.chunks;for(var we=0;we<J;we++)we===$?ae.push("<!--F!-->"):ae.push("<!--F-->")}}J=S.keyPath,S.keyPath=k,B?(k=S.treeContext,S.treeContext=zo(k,1,0),_s(y,S,O,-1),S.treeContext=k):ve?_s(y,S,O,-1):ma(y,S,O,-1),S.keyPath=J}function Od(y,S,k,O,B,J){if(typeof O=="function")if(O.prototype&&O.prototype.isReactComponent){var $=B;if("ref"in B){$={};for(var ve in B)ve!=="ref"&&($[ve]=B[ve])}var ae=O.defaultProps;if(ae){$===B&&($=Y({},$,B));for(var we in ae)$[we]===void 0&&($[we]=ae[we])}B=$,$=Jn,ae=O.contextType,typeof ae=="object"&&ae!==null&&($=ae._currentValue2),$=new O(B,$);var Oe=$.state!==void 0?$.state:null;if($.updater=Ju,$.props=B,$.state=Oe,ae={queue:[],replace:!1},$._reactInternals=ae,J=O.contextType,$.context=typeof J=="object"&&J!==null?J._currentValue2:Jn,J=O.getDerivedStateFromProps,typeof J=="function"&&(J=J(B,Oe),Oe=J==null?Oe:Y({},Oe,J),$.state=Oe),typeof O.getDerivedStateFromProps!="function"&&typeof $.getSnapshotBeforeUpdate!="function"&&(typeof $.UNSAFE_componentWillMount=="function"||typeof $.componentWillMount=="function"))if(O=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),O!==$.state&&Ju.enqueueReplaceState($,$.state,null),ae.queue!==null&&0<ae.queue.length)if(O=ae.queue,J=ae.replace,ae.queue=null,ae.replace=!1,J&&O.length===1)$.state=O[0];else{for(ae=J?O[0]:$.state,Oe=!0,J=J?1:0;J<O.length;J++)we=O[J],we=typeof we=="function"?we.call($,ae,B,void 0):we,we!=null&&(Oe?(Oe=!1,ae=Y({},ae,we)):Y(ae,we));$.state=ae}else ae.queue=null;if(O=$.render(),y.status===12)throw null;B=S.keyPath,S.keyPath=k,ma(y,S,O,-1),S.keyPath=B}else{if(O=Pd(y,S,k,O,B,void 0),y.status===12)throw null;Yo(y,S,k,O,Ho!==0,ro,Pl)}else if(typeof O=="string")if($=S.blockedSegment,$===null)$=B.children,ae=S.formatContext,Oe=S.keyPath,S.formatContext=Kt(ae,O,B),S.keyPath=k,_s(y,S,$,-1),S.formatContext=ae,S.keyPath=Oe;else{if(Oe=vn($.chunks,O,B,y.resumableState,y.renderState,S.blockedPreamble,S.hoistableState,S.formatContext,$.lastPushedText),$.lastPushedText=!1,ae=S.formatContext,J=S.keyPath,S.keyPath=k,(S.formatContext=Kt(ae,O,B)).insertionMode===3){k=Go(y,0,null,S.formatContext,!1,!1),$.preambleChildren.push(k),S.blockedSegment=k;try{k.status=6,_s(y,S,Oe,-1),Ar(k.chunks,y.renderState,k.lastPushedText,k.textEmbedded),k.status=1}finally{S.blockedSegment=$}}else _s(y,S,Oe,-1);S.formatContext=ae,S.keyPath=J;e:{switch(S=$.chunks,y=y.resumableState,O){case"title":case"style":case"script":case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break e;case"body":if(1>=ae.insertionMode){y.hasBody=!0;break e}break;case"html":if(ae.insertionMode===0){y.hasHtml=!0;break e}break;case"head":if(1>=ae.insertionMode)break e}S.push(ke(O))}$.lastPushedText=!1}else{switch(O){case T:case o:case c:case a:O=S.keyPath,S.keyPath=k,ma(y,S,B.children,-1),S.keyPath=O;return;case E:O=S.blockedSegment,O===null?B.mode!=="hidden"&&(O=S.keyPath,S.keyPath=k,_s(y,S,B.children,-1),S.keyPath=O):B.mode!=="hidden"&&(y.renderState.generateStaticMarkup||O.chunks.push("<!--&-->"),O.lastPushedText=!1,$=S.keyPath,S.keyPath=k,_s(y,S,B.children,-1),S.keyPath=$,y.renderState.generateStaticMarkup||O.chunks.push("<!--/&-->"),O.lastPushedText=!1);return;case x:e:{if(O=B.children,B=B.revealOrder,B==="forwards"||B==="backwards"||B==="unstable_legacy-backwards"){if(W(O)){eh(y,S,k,O,B);break e}if(($=I(O))&&($=$.call(O))){if(ae=$.next(),!ae.done){do ae=$.next();while(!ae.done);eh(y,S,k,O,B)}break e}}B==="together"?(B=S.keyPath,$=S.row,ae=S.row=Bl(null),ae.boundaries=[],ae.together=!0,S.keyPath=k,ma(y,S,O,-1),--ae.pendingTasks===0&&Dn(y,ae),S.keyPath=B,S.row=$,$!==null&&0<ae.pendingTasks&&($.pendingTasks++,ae.next=$)):(B=S.keyPath,S.keyPath=k,ma(y,S,O,-1),S.keyPath=B)}return;case M:case C:throw Error(t(343));case g:e:if(S.replay!==null){O=S.keyPath,$=S.formatContext,ae=S.row,S.keyPath=k,S.formatContext=ft(y.resumableState,$),S.row=null,k=B.children;try{_s(y,S,k,-1)}finally{S.keyPath=O,S.formatContext=$,S.row=ae}}else{O=S.keyPath,J=S.formatContext;var Te=S.row,Xe=S.blockedBoundary;we=S.blockedPreamble;var rt=S.hoistableState;ve=S.blockedSegment;var zt=B.fallback;B=B.children;var kt=new Set,Tt=$u(y,S.row,kt,null,null);y.trackedPostpones!==null&&(Tt.trackedContentKeyPath=k);var Et=Go(y,ve.chunks.length,Tt,S.formatContext,!1,!1);ve.children.push(Et),ve.lastPushedText=!1;var Mt=Go(y,0,null,S.formatContext,!1,!1);if(Mt.parentFlushed=!0,y.trackedPostpones!==null){$=S.componentStack,ae=[k[0],"Suspense Fallback",k[2]],Oe=[ae[1],ae[2],[],null],y.trackedPostpones.workingMap.set(ae,Oe),Tt.trackedFallbackNode=Oe,S.blockedSegment=Et,S.blockedPreamble=Tt.fallbackPreamble,S.keyPath=ae,S.formatContext=at(y.resumableState,J),S.componentStack=Mc($),Et.status=6;try{_s(y,S,zt,-1),Ar(Et.chunks,y.renderState,Et.lastPushedText,Et.textEmbedded),Et.status=1}catch(pn){throw Et.status=y.status===12?3:4,pn}finally{S.blockedSegment=ve,S.blockedPreamble=we,S.keyPath=O,S.formatContext=J}S=Dd(y,null,B,-1,Tt,Mt,Tt.contentPreamble,Tt.contentState,S.abortSet,k,ft(y.resumableState,S.formatContext),S.context,S.treeContext,null,$),oo(S),y.pingedTasks.push(S)}else{S.blockedBoundary=Tt,S.blockedPreamble=Tt.contentPreamble,S.hoistableState=Tt.contentState,S.blockedSegment=Mt,S.keyPath=k,S.formatContext=ft(y.resumableState,J),S.row=null,Mt.status=6;try{if(_s(y,S,B,-1),Ar(Mt.chunks,y.renderState,Mt.lastPushedText,Mt.textEmbedded),Mt.status=1,Lc(Tt,Mt),Tt.pendingTasks===0&&Tt.status===0){if(Tt.status=1,!zl(y,Tt)){Te!==null&&--Te.pendingTasks===0&&Dn(y,Te),y.pendingRootTasks===0&&S.blockedPreamble&&Ma(y);break e}}else Te!==null&&Te.together&&Md(y,Te)}catch(pn){Tt.status=4,y.status===12?(Mt.status=3,$=y.fatalError):(Mt.status=4,$=pn),ae=lo(S.componentStack),Oe=Fs(y,$,ae),Tt.errorDigest=Oe,zd(y,Tt)}finally{S.blockedBoundary=Xe,S.blockedPreamble=we,S.hoistableState=rt,S.blockedSegment=ve,S.keyPath=O,S.formatContext=J,S.row=Te}S=Dd(y,null,zt,-1,Xe,Et,Tt.fallbackPreamble,Tt.fallbackState,kt,[k[0],"Suspense Fallback",k[2]],at(y.resumableState,S.formatContext),S.context,S.treeContext,S.row,Mc(S.componentStack)),oo(S),y.pingedTasks.push(S)}}return}if(typeof O=="object"&&O!==null)switch(O.$$typeof){case f:if("ref"in B)for(zt in $={},B)zt!=="ref"&&($[zt]=B[zt]);else $=B;O=Pd(y,S,k,O.render,$,J),Yo(y,S,k,O,Ho!==0,ro,Pl);return;case w:Od(y,S,k,O.type,B,J);return;case h:if(ae=B.children,$=S.keyPath,B=B.value,Oe=O._currentValue2,O._currentValue2=B,J=Fo,Fo=O={parent:J,depth:J===null?0:J.depth+1,context:O,parentValue:Oe,value:B},S.context=O,S.keyPath=k,ma(y,S,ae,-1),y=Fo,y===null)throw Error(t(403));y.context._currentValue2=y.parentValue,y=Fo=y.parent,S.context=y,S.keyPath=$;return;case u:B=B.children,O=B(O._context._currentValue2),B=S.keyPath,S.keyPath=k,ma(y,S,O,-1),S.keyPath=B;return;case A:if($=O._init,O=$(O._payload),y.status===12)throw null;Od(y,S,k,O,B,J);return}throw Error(t(130,O==null?O:typeof O,""))}}function Ld(y,S,k,O,B){var J=S.replay,$=S.blockedBoundary,ve=Go(y,0,null,S.formatContext,!1,!1);ve.id=k,ve.parentFlushed=!0;try{S.replay=null,S.blockedSegment=ve,_s(y,S,O,B),ve.status=1,$===null?y.completedRootSegment=ve:(Lc($,ve),$.parentFlushed&&y.partialBoundaries.push($))}finally{S.replay=J,S.blockedSegment=null}}function ma(y,S,k,O){S.replay!==null&&typeof S.replay.slots=="number"?Ld(y,S,S.replay.slots,k,O):(S.node=k,S.childIndex=O,k=S.componentStack,oo(S),Fd(y,S),S.componentStack=k)}function Fd(y,S){var k=S.node,O=S.childIndex;if(k!==null){if(typeof k=="object"){switch(k.$$typeof){case s:var B=k.type,J=k.key,$=k.props;k=$.ref;var ve=k!==void 0?k:null,ae=jl(B),we=J??(O===-1?0:O);if(J=[S.keyPath,ae,we],S.replay!==null)e:{var Oe=S.replay;for(O=Oe.nodes,k=0;k<O.length;k++){var Te=O[k];if(we===Te[1]){if(Te.length===4){if(ae!==null&&ae!==Te[0])throw Error(t(490,Te[0],ae));var Xe=Te[2];ae=Te[3],we=S.node,S.replay={nodes:Xe,slots:ae,pendingTasks:1};try{if(Od(y,S,J,B,$,ve),S.replay.pendingTasks===1&&0<S.replay.nodes.length)throw Error(t(488));S.replay.pendingTasks--}catch(Jt){if(typeof Jt=="object"&&Jt!==null&&(Jt===oi||typeof Jt.then=="function"))throw S.node===we?S.replay=Oe:O.splice(k,1),Jt;S.replay.pendingTasks--,$=lo(S.componentStack),J=y,y=S.blockedBoundary,B=Jt,$=Fs(J,B,$),Dr(J,y,Xe,ae,B,$)}S.replay=Oe}else{if(B!==g)throw Error(t(490,"Suspense",jl(B)||"Unknown"));t:{Oe=void 0,B=Te[5],ve=Te[2],ae=Te[3],we=Te[4]===null?[]:Te[4][2],Te=Te[4]===null?null:Te[4][3];var rt=S.keyPath,zt=S.formatContext,kt=S.row,Tt=S.replay,Et=S.blockedBoundary,Mt=S.hoistableState,pn=$.children,Wn=$.fallback,Zt=new Set;$=$u(y,S.row,Zt,null,null),$.parentFlushed=!0,$.rootSegmentID=B,S.blockedBoundary=$,S.hoistableState=$.contentState,S.keyPath=J,S.formatContext=ft(y.resumableState,zt),S.row=null,S.replay={nodes:ve,slots:ae,pendingTasks:1};try{if(_s(y,S,pn,-1),S.replay.pendingTasks===1&&0<S.replay.nodes.length)throw Error(t(488));if(S.replay.pendingTasks--,$.pendingTasks===0&&$.status===0){$.status=1,y.completedBoundaries.push($);break t}}catch(Jt){$.status=4,Xe=lo(S.componentStack),Oe=Fs(y,Jt,Xe),$.errorDigest=Oe,S.replay.pendingTasks--,y.clientRenderedBoundaries.push($)}finally{S.blockedBoundary=Et,S.hoistableState=Mt,S.replay=Tt,S.keyPath=rt,S.formatContext=zt,S.row=kt}Xe=Nf(y,null,{nodes:we,slots:Te,pendingTasks:0},Wn,-1,Et,$.fallbackState,Zt,[J[0],"Suspense Fallback",J[2]],at(y.resumableState,S.formatContext),S.context,S.treeContext,S.row,Mc(S.componentStack)),oo(Xe),y.pingedTasks.push(Xe)}}O.splice(k,1);break e}}}else Od(y,S,J,B,$,ve);return;case i:throw Error(t(257));case A:if(Xe=k._init,k=Xe(k._payload),y.status===12)throw null;ma(y,S,k,O);return}if(W(k)){Pc(y,S,k,O);return}if((Xe=I(k))&&(Xe=Xe.call(k))){if(k=Xe.next(),!k.done){$=[];do $.push(k.value),k=Xe.next();while(!k.done);Pc(y,S,$,O)}return}if(typeof k.then=="function")return S.thenableState=null,ma(y,S,yf(k),O);if(k.$$typeof===h)return ma(y,S,k._currentValue2,O);throw O=Object.prototype.toString.call(k),Error(t(31,O==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":O))}typeof k=="string"?(O=S.blockedSegment,O!==null&&(O.lastPushedText=Ni(O.chunks,k,y.renderState,O.lastPushedText))):(typeof k=="number"||typeof k=="bigint")&&(O=S.blockedSegment,O!==null&&(O.lastPushedText=Ni(O.chunks,""+k,y.renderState,O.lastPushedText)))}}function Pc(y,S,k,O){var B=S.keyPath;if(O!==-1&&(S.keyPath=[S.keyPath,"Fragment",O],S.replay!==null)){for(var J=S.replay,$=J.nodes,ve=0;ve<$.length;ve++){var ae=$[ve];if(ae[1]===O){O=ae[2],ae=ae[3],S.replay={nodes:O,slots:ae,pendingTasks:1};try{if(Pc(y,S,k,-1),S.replay.pendingTasks===1&&0<S.replay.nodes.length)throw Error(t(488));S.replay.pendingTasks--}catch(Te){if(typeof Te=="object"&&Te!==null&&(Te===oi||typeof Te.then=="function"))throw Te;S.replay.pendingTasks--,k=lo(S.componentStack);var we=S.blockedBoundary,Oe=Te;k=Fs(y,Oe,k),Dr(y,we,O,ae,Oe,k)}S.replay=J,$.splice(ve,1);break}}S.keyPath=B;return}if(J=S.treeContext,$=k.length,S.replay!==null&&(ve=S.replay.slots,ve!==null&&typeof ve=="object")){for(O=0;O<$;O++)ae=k[O],S.treeContext=zo(J,$,O),we=ve[O],typeof we=="number"?(Ld(y,S,we,ae,O),delete ve[O]):_s(y,S,ae,O);S.treeContext=J,S.keyPath=B;return}for(ve=0;ve<$;ve++)O=k[ve],S.treeContext=zo(J,$,ve),_s(y,S,O,ve);S.treeContext=J,S.keyPath=B}function Rr(y,S,k){if(k.status=5,k.rootSegmentID=y.nextSegmentId++,y=k.trackedContentKeyPath,y===null)throw Error(t(486));var O=k.trackedFallbackNode,B=[],J=S.workingMap.get(y);return J===void 0?(k=[y[1],y[2],B,null,O,k.rootSegmentID],S.workingMap.set(y,k),li(k,y[0],S),k):(J[4]=O,J[5]=k.rootSegmentID,J)}function co(y,S,k,O){O.status=5;var B=k.keyPath,J=k.blockedBoundary;if(J===null)O.id=y.nextSegmentId++,S.rootSlots=O.id,y.completedRootSegment!==null&&(y.completedRootSegment.status=5);else{if(J!==null&&J.status===0){var $=Rr(y,S,J);if(J.trackedContentKeyPath===B&&k.childIndex===-1){O.id===-1&&(O.id=O.parentFlushed?J.rootSegmentID:y.nextSegmentId++),$[3]=O.id;return}}if(O.id===-1&&(O.id=O.parentFlushed&&J!==null?J.rootSegmentID:y.nextSegmentId++),k.childIndex===-1)B===null?S.rootSlots=O.id:(k=S.workingMap.get(B),k===void 0?(k=[B[1],B[2],[],O.id],li(k,B[0],S)):k[3]=O.id);else{if(B===null){if(y=S.rootSlots,y===null)y=S.rootSlots={};else if(typeof y=="number")throw Error(t(491))}else if(J=S.workingMap,$=J.get(B),$===void 0)y={},$=[B[1],B[2],[],y],J.set(B,$),li($,B[0],S);else if(y=$[3],y===null)y=$[3]={};else if(typeof y=="number")throw Error(t(491));y[k.childIndex]=O.id}}}function zd(y,S){y=y.trackedPostpones,y!==null&&(S=S.trackedContentKeyPath,S!==null&&(S=y.workingMap.get(S),S!==void 0&&(S.length=4,S[2]=[],S[3]=null)))}function Xo(y,S,k){return Nf(y,k,S.replay,S.node,S.childIndex,S.blockedBoundary,S.hoistableState,S.abortSet,S.keyPath,S.formatContext,S.context,S.treeContext,S.row,S.componentStack)}function Oc(y,S,k){var O=S.blockedSegment,B=Go(y,O.chunks.length,null,S.formatContext,O.lastPushedText,!0);return O.children.push(B),O.lastPushedText=!1,Dd(y,k,S.node,S.childIndex,S.blockedBoundary,B,S.blockedPreamble,S.hoistableState,S.abortSet,S.keyPath,S.formatContext,S.context,S.treeContext,S.row,S.componentStack)}function _s(y,S,k,O){var B=S.formatContext,J=S.context,$=S.keyPath,ve=S.treeContext,ae=S.componentStack,we=S.blockedSegment;if(we===null){we=S.replay;try{return ma(y,S,k,O)}catch(Xe){if(Wo(),k=Xe===oi?Dl():Xe,y.status!==12&&typeof k=="object"&&k!==null){if(typeof k.then=="function"){O=Xe===oi?Ol():null,y=Xo(y,S,O).ping,k.then(y,y),S.formatContext=B,S.context=J,S.keyPath=$,S.treeContext=ve,S.componentStack=ae,S.replay=we,Er(J);return}if(k.message==="Maximum call stack size exceeded"){k=Xe===oi?Ol():null,k=Xo(y,S,k),y.pingedTasks.push(k),S.formatContext=B,S.context=J,S.keyPath=$,S.treeContext=ve,S.componentStack=ae,S.replay=we,Er(J);return}}}}else{var Oe=we.children.length,Te=we.chunks.length;try{return ma(y,S,k,O)}catch(Xe){if(Wo(),we.children.length=Oe,we.chunks.length=Te,k=Xe===oi?Dl():Xe,y.status!==12&&typeof k=="object"&&k!==null){if(typeof k.then=="function"){we=k,k=Xe===oi?Ol():null,y=Oc(y,S,k).ping,we.then(y,y),S.formatContext=B,S.context=J,S.keyPath=$,S.treeContext=ve,S.componentStack=ae,Er(J);return}if(k.message==="Maximum call stack size exceeded"){we=Xe===oi?Ol():null,we=Oc(y,S,we),y.pingedTasks.push(we),S.formatContext=B,S.context=J,S.keyPath=$,S.treeContext=ve,S.componentStack=ae,Er(J);return}}}}throw S.formatContext=B,S.context=J,S.keyPath=$,S.treeContext=ve,Er(J),k}function th(y){var S=y.blockedBoundary,k=y.blockedSegment;k!==null&&(k.status=3,uo(this,S,y.row,k))}function Dr(y,S,k,O,B,J){for(var $=0;$<k.length;$++){var ve=k[$];if(ve.length===4)Dr(y,S,ve[2],ve[3],B,J);else{ve=ve[5];var ae=y,we=J,Oe=$u(ae,null,new Set,null,null);Oe.parentFlushed=!0,Oe.rootSegmentID=ve,Oe.status=4,Oe.errorDigest=we,Oe.parentFlushed&&ae.clientRenderedBoundaries.push(Oe)}}if(k.length=0,O!==null){if(S===null)throw Error(t(487));if(S.status!==4&&(S.status=4,S.errorDigest=J,S.parentFlushed&&y.clientRenderedBoundaries.push(S)),typeof O=="object")for(var Te in O)delete O[Te]}}function Id(y,S,k){var O=y.blockedBoundary,B=y.blockedSegment;if(B!==null){if(B.status===6)return;B.status=3}var J=lo(y.componentStack);if(O===null){if(S.status!==13&&S.status!==14){if(O=y.replay,O===null){S.trackedPostpones!==null&&B!==null?(O=S.trackedPostpones,Fs(S,k,J),co(S,O,y,B),uo(S,null,y.row,B)):(Fs(S,k,J),Ja(S,k));return}O.pendingTasks--,O.pendingTasks===0&&0<O.nodes.length&&(B=Fs(S,k,J),Dr(S,null,O.nodes,O.slots,k,B)),S.pendingRootTasks--,S.pendingRootTasks===0&&Hd(S)}}else{var $=S.trackedPostpones;if(O.status!==4){if($!==null&&B!==null)return Fs(S,k,J),co(S,$,y,B),O.fallbackAbortableTasks.forEach(function(ve){return Id(ve,S,k)}),O.fallbackAbortableTasks.clear(),uo(S,O,y.row,B);O.status=4,B=Fs(S,k,J),O.status=4,O.errorDigest=B,zd(S,O),O.parentFlushed&&S.clientRenderedBoundaries.push(O)}O.pendingTasks--,B=O.row,B!==null&&--B.pendingTasks===0&&Dn(S,B),O.fallbackAbortableTasks.forEach(function(ve){return Id(ve,S,k)}),O.fallbackAbortableTasks.clear()}y=y.row,y!==null&&--y.pendingTasks===0&&Dn(S,y),S.allPendingTasks--,S.allPendingTasks===0&&Ud(S)}function Bd(y,S){try{var k=y.renderState,O=k.onHeaders;if(O){var B=k.headers;if(B){k.headers=null;var J=B.preconnects;if(B.fontPreloads&&(J&&(J+=", "),J+=B.fontPreloads),B.highImagePreloads&&(J&&(J+=", "),J+=B.highImagePreloads),!S){var $=k.styles.values(),ve=$.next();e:for(;0<B.remainingCapacity&&!ve.done;ve=$.next())for(var ae=ve.value.sheets.values(),we=ae.next();0<B.remainingCapacity&&!we.done;we=ae.next()){var Oe=we.value,Te=Oe.props,Xe=Te.href,rt=Oe.props,zt=zn(rt.href,"style",{crossOrigin:rt.crossOrigin,integrity:rt.integrity,nonce:rt.nonce,type:rt.type,fetchPriority:rt.fetchPriority,referrerPolicy:rt.referrerPolicy,media:rt.media});if(0<=(B.remainingCapacity-=zt.length+2))k.resets.style[Xe]=Pe,J&&(J+=", "),J+=zt,k.resets.style[Xe]=typeof Te.crossOrigin=="string"||typeof Te.integrity=="string"?[Te.crossOrigin,Te.integrity]:Pe;else break e}}O(J?{Link:J}:{})}}}catch(kt){Fs(y,kt,{})}}function Hd(y){y.trackedPostpones===null&&Bd(y,!0),y.trackedPostpones===null&&Ma(y),y.onShellError=Ci,y=y.onShellReady,y()}function Ud(y){Bd(y,y.trackedPostpones===null?!0:y.completedRootSegment===null||y.completedRootSegment.status!==5),Ma(y),y=y.onAllReady,y()}function Lc(y,S){if(S.chunks.length===0&&S.children.length===1&&S.children[0].boundary===null&&S.children[0].id===-1){var k=S.children[0];k.id=S.id,k.parentFlushed=!0,k.status!==1&&k.status!==3&&k.status!==4||Lc(y,k)}else y.completedSegments.push(S)}function uo(y,S,k,O){if(k!==null&&(--k.pendingTasks===0?Dn(y,k):k.together&&Md(y,k)),y.allPendingTasks--,S===null){if(O!==null&&O.parentFlushed){if(y.completedRootSegment!==null)throw Error(t(389));y.completedRootSegment=O}y.pendingRootTasks--,y.pendingRootTasks===0&&Hd(y)}else if(S.pendingTasks--,S.status!==4)if(S.pendingTasks===0){if(S.status===0&&(S.status=1),O!==null&&O.parentFlushed&&(O.status===1||O.status===3)&&Lc(S,O),S.parentFlushed&&y.completedBoundaries.push(S),S.status===1)k=S.row,k!==null&&Nr(k.hoistables,S.contentState),zl(y,S)||(S.fallbackAbortableTasks.forEach(th,y),S.fallbackAbortableTasks.clear(),k!==null&&--k.pendingTasks===0&&Dn(y,k)),y.pendingRootTasks===0&&y.trackedPostpones===null&&S.contentPreamble!==null&&Ma(y);else if(S.status===5&&(S=S.row,S!==null)){if(y.trackedPostpones!==null){k=y.trackedPostpones;var B=S.next;if(B!==null&&(O=B.boundaries,O!==null))for(B.boundaries=null,B=0;B<O.length;B++){var J=O[B];Rr(y,k,J),uo(y,J,null,null)}}--S.pendingTasks===0&&Dn(y,S)}}else O===null||!O.parentFlushed||O.status!==1&&O.status!==3||(Lc(S,O),S.completedSegments.length===1&&S.parentFlushed&&y.partialBoundaries.push(S)),S=S.row,S!==null&&S.together&&Md(y,S);y.allPendingTasks===0&&Ud(y)}function Af(y){if(y.status!==14&&y.status!==13){var S=Fo,k=ue.H;ue.H=vf;var O=ue.A;ue.A=dg;var B=Gs;Gs=y;var J=_d;_d=y.resumableState;try{var $=y.pingedTasks,ve;for(ve=0;ve<$.length;ve++){var ae=$[ve],we=y,Oe=ae.blockedSegment;if(Oe===null){var Te=we;if(ae.replay.pendingTasks!==0){Er(ae.context);try{if(typeof ae.replay.slots=="number"?Ld(Te,ae,ae.replay.slots,ae.node,ae.childIndex):Fd(Te,ae),ae.replay.pendingTasks===1&&0<ae.replay.nodes.length)throw Error(t(488));ae.replay.pendingTasks--,ae.abortSet.delete(ae),uo(Te,ae.blockedBoundary,ae.row,null)}catch(Pn){Wo();var Xe=Pn===oi?Dl():Pn;if(typeof Xe=="object"&&Xe!==null&&typeof Xe.then=="function"){var rt=ae.ping;Xe.then(rt,rt),ae.thenableState=Pn===oi?Ol():null}else{ae.replay.pendingTasks--,ae.abortSet.delete(ae);var zt=lo(ae.componentStack);we=void 0;var kt=Te,Tt=ae.blockedBoundary,Et=Te.status===12?Te.fatalError:Xe,Mt=ae.replay.nodes,pn=ae.replay.slots;we=Fs(kt,Et,zt),Dr(kt,Tt,Mt,pn,Et,we),Te.pendingRootTasks--,Te.pendingRootTasks===0&&Hd(Te),Te.allPendingTasks--,Te.allPendingTasks===0&&Ud(Te)}}}}else if(Te=void 0,kt=Oe,kt.status===0){kt.status=6,Er(ae.context);var Wn=kt.children.length,Zt=kt.chunks.length;try{Fd(we,ae),Ar(kt.chunks,we.renderState,kt.lastPushedText,kt.textEmbedded),ae.abortSet.delete(ae),kt.status=1,uo(we,ae.blockedBoundary,ae.row,kt)}catch(Pn){Wo(),kt.children.length=Wn,kt.chunks.length=Zt;var Jt=Pn===oi?Dl():we.status===12?we.fatalError:Pn;if(we.status===12&&we.trackedPostpones!==null){var en=we.trackedPostpones,Mn=lo(ae.componentStack);ae.abortSet.delete(ae),Fs(we,Jt,Mn),co(we,en,ae,kt),uo(we,ae.blockedBoundary,ae.row,kt)}else if(typeof Jt=="object"&&Jt!==null&&typeof Jt.then=="function"){kt.status=0,ae.thenableState=Pn===oi?Ol():null;var qt=ae.ping;Jt.then(qt,qt)}else{var cs=lo(ae.componentStack);ae.abortSet.delete(ae),kt.status=4;var xn=ae.blockedBoundary,Qn=ae.row;if(Qn!==null&&--Qn.pendingTasks===0&&Dn(we,Qn),we.allPendingTasks--,Te=Fs(we,Jt,cs),xn===null)Ja(we,Jt);else if(xn.pendingTasks--,xn.status!==4){xn.status=4,xn.errorDigest=Te,zd(we,xn);var In=xn.row;In!==null&&--In.pendingTasks===0&&Dn(we,In),xn.parentFlushed&&we.clientRenderedBoundaries.push(xn),we.pendingRootTasks===0&&we.trackedPostpones===null&&xn.contentPreamble!==null&&Ma(we)}we.allPendingTasks===0&&Ud(we)}}}}$.splice(0,ve),y.destination!==null&&Hl(y,y.destination)}catch(Pn){Fs(y,Pn,{}),Ja(y,Pn)}finally{_d=J,ue.H=k,ue.A=O,k===vf&&Er(S),Gs=B}}}function Ko(y,S,k){S.preambleChildren.length&&k.push(S.preambleChildren);for(var O=!1,B=0;B<S.children.length;B++)O=Ys(y,S.children[B],k)||O;return O}function Ys(y,S,k){var O=S.boundary;if(O===null)return Ko(y,S,k);var B=O.contentPreamble,J=O.fallbackPreamble;if(B===null||J===null)return!1;switch(O.status){case 1:if(Ge(y.renderState,B),y.byteSize+=O.byteSize,S=O.completedSegments[0],!S)throw Error(t(391));return Ko(y,S,k);case 5:if(y.trackedPostpones!==null)return!0;case 4:if(S.status===1)return Ge(y.renderState,J),Ko(y,S,k);default:return!0}}function Ma(y){if(y.completedRootSegment&&y.completedPreambleSegments===null){var S=[],k=y.byteSize,O=Ys(y,y.completedRootSegment,S),B=y.renderState.preamble;O===!1||B.headChunks&&B.bodyChunks?y.completedPreambleSegments=S:y.byteSize=k}}function Zo(y,S,k,O){switch(k.parentFlushed=!0,k.status){case 0:k.id=y.nextSegmentId++;case 5:return O=k.id,k.lastPushedText=!1,k.textEmbedded=!1,y=y.renderState,S.push('<template id="'),S.push(y.placeholderPrefix),y=O.toString(16),S.push(y),S.push('"></template>');case 1:k.status=2;var B=!0,J=k.chunks,$=0;k=k.children;for(var ve=0;ve<k.length;ve++){for(B=k[ve];$<B.index;$++)S.push(J[$]);B=fo(y,S,B,O)}for(;$<J.length-1;$++)S.push(J[$]);return $<J.length&&(B=S.push(J[$])),B;case 3:return!0;default:throw Error(t(390))}}var ho=0;function fo(y,S,k,O){var B=k.boundary;if(B===null)return Zo(y,S,k,O);if(B.parentFlushed=!0,B.status===4){var J=B.row;return J!==null&&--J.pendingTasks===0&&Dn(y,J),y.renderState.generateStaticMarkup||(B=B.errorDigest,S.push("<!--$!-->"),S.push("<template"),B&&(S.push(' data-dgst="'),B=H(B),S.push(B),S.push('"')),S.push("></template>")),Zo(y,S,k,O),y=y.renderState.generateStaticMarkup?!0:S.push("<!--/$-->"),y}if(B.status!==1)return B.status===0&&(B.rootSegmentID=y.nextSegmentId++),0<B.completedSegments.length&&y.partialBoundaries.push(B),pt(S,y.renderState,B.rootSegmentID),O&&Nr(O,B.fallbackState),Zo(y,S,k,O),S.push("<!--/$-->");if(!Qa&&zl(y,B)&&ho+B.byteSize>y.progressiveChunkSize)return B.rootSegmentID=y.nextSegmentId++,y.completedBoundaries.push(B),pt(S,y.renderState,B.rootSegmentID),Zo(y,S,k,O),S.push("<!--/$-->");if(ho+=B.byteSize,O&&Nr(O,B.contentState),k=B.row,k!==null&&zl(y,B)&&--k.pendingTasks===0&&Dn(y,k),y.renderState.generateStaticMarkup||S.push("<!--$-->"),k=B.completedSegments,k.length!==1)throw Error(t(391));return fo(y,S,k[0],O),y=y.renderState.generateStaticMarkup?!0:S.push("<!--/$-->"),y}function Vd(y,S,k,O){return st(S,y.renderState,k.parentFormatContext,k.id),fo(y,S,k,O),Ut(S,k.parentFormatContext)}function Wd(y,S,k){ho=k.byteSize;for(var O=k.completedSegments,B=0;B<O.length;B++)Jo(y,S,k,O[B]);O.length=0,O=k.row,O!==null&&zl(y,k)&&--O.pendingTasks===0&&Dn(y,O),Bi(S,k.contentState,y.renderState),O=y.resumableState,y=y.renderState,B=k.rootSegmentID,k=k.contentState;var J=y.stylesToHoist;return y.stylesToHoist=!1,S.push(y.startInlineScript),S.push(">"),J?((O.instructions&4)===0&&(O.instructions|=4,S.push('$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};')),(O.instructions&2)===0&&(O.instructions|=2,S.push(`$RB=[];$RV=function(a){$RT=performance.now();for(var b=0;b<a.length;b+=2){var c=a[b],e=a[b+1];null!==e.parentNode&&e.parentNode.removeChild(e);var f=c.parentNode;if(f){var g=c.previousSibling,h=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d||"/&"===d)if(0===h)break;else h--;else"$"!==d&&"$?"!==d&&"$~"!==d&&"$!"!==d&&"&"!==d||h++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;e.firstChild;)f.insertBefore(e.firstChild,c);g.data="$";g._reactRetry&&requestAnimationFrame(g._reactRetry)}}a.length=0};
$RC=function(a,b){if(b=document.getElementById(b))(a=document.getElementById(a))?(a.previousSibling.data="$~",$RB.push(a,b),2===$RB.length&&("number"!==typeof $RT?requestAnimationFrame($RV.bind(null,$RB)):(a=performance.now(),setTimeout($RV.bind(null,$RB),2300>a&&2E3<a?2300-a:$RT+300-a)))):b.parentNode.removeChild(b)};`)),(O.instructions&8)===0?(O.instructions|=8,S.push(`$RM=new Map;$RR=function(n,w,p){function u(q){this._p=null;q()}for(var r=new Map,t=document,h,b,e=t.querySelectorAll("link[data-precedence],style[data-precedence]"),v=[],k=0;b=e[k++];)"not all"===b.getAttribute("media")?v.push(b):("LINK"===b.tagName&&$RM.set(b.getAttribute("href"),b),r.set(b.dataset.precedence,h=b));e=0;b=[];var l,a;for(k=!0;;){if(k){var f=p[e++];if(!f){k=!1;e=0;continue}var c=!1,m=0;var d=f[m++];if(a=$RM.get(d)){var g=a._p;c=!0}else{a=t.createElement("link");a.href=d;a.rel=
"stylesheet";for(a.dataset.precedence=l=f[m++];g=f[m++];)a.setAttribute(g,f[m++]);g=a._p=new Promise(function(q,x){a.onload=u.bind(a,q);a.onerror=u.bind(a,x)});$RM.set(d,a)}d=a.getAttribute("media");!g||d&&!matchMedia(d).matches||b.push(g);if(c)continue}else{a=v[e++];if(!a)break;l=a.getAttribute("data-precedence");a.removeAttribute("media")}c=r.get(l)||h;c===h&&(h=a);r.set(l,a);c?c.parentNode.insertBefore(a,c.nextSibling):(c=t.head,c.insertBefore(a,c.firstChild))}if(p=document.getElementById(n))p.previousSibling.data=
"$~";Promise.all(b).then($RC.bind(null,n,w),$RX.bind(null,n,"CSS failed to load"))};$RR("`)):S.push('$RR("')):((O.instructions&2)===0&&(O.instructions|=2,S.push(`$RB=[];$RV=function(a){$RT=performance.now();for(var b=0;b<a.length;b+=2){var c=a[b],e=a[b+1];null!==e.parentNode&&e.parentNode.removeChild(e);var f=c.parentNode;if(f){var g=c.previousSibling,h=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d||"/&"===d)if(0===h)break;else h--;else"$"!==d&&"$?"!==d&&"$~"!==d&&"$!"!==d&&"&"!==d||h++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;e.firstChild;)f.insertBefore(e.firstChild,c);g.data="$";g._reactRetry&&requestAnimationFrame(g._reactRetry)}}a.length=0};
$RC=function(a,b){if(b=document.getElementById(b))(a=document.getElementById(a))?(a.previousSibling.data="$~",$RB.push(a,b),2===$RB.length&&("number"!==typeof $RT?requestAnimationFrame($RV.bind(null,$RB)):(a=performance.now(),setTimeout($RV.bind(null,$RB),2300>a&&2E3<a?2300-a:$RT+300-a)))):b.parentNode.removeChild(b)};`)),S.push('$RC("')),O=B.toString(16),S.push(y.boundaryPrefix),S.push(O),S.push('","'),S.push(y.segmentPrefix),S.push(O),J?(S.push('",'),gf(S,k)):S.push('"'),k=S.push(")<\/script>"),Ze(S,y)&&k}function Jo(y,S,k,O){if(O.status===2)return!0;var B=k.contentState,J=O.id;if(J===-1){if((O.id=k.rootSegmentID)===-1)throw Error(t(392));return Vd(y,S,O,B)}return J===k.rootSegmentID?Vd(y,S,O,B):(Vd(y,S,O,B),k=y.resumableState,y=y.renderState,S.push(y.startInlineScript),S.push(">"),(k.instructions&1)===0?(k.instructions|=1,S.push('$RS=function(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')):S.push('$RS("'),S.push(y.segmentPrefix),J=J.toString(16),S.push(J),S.push('","'),S.push(y.placeholderPrefix),S.push(J),S=S.push('")<\/script>'),S)}var Qa=!1;function Hl(y,S){try{if(!(0<y.pendingRootTasks)){var k,O=y.completedRootSegment;if(O!==null){if(O.status===5)return;var B=y.completedPreambleSegments;if(B===null)return;ho=y.byteSize;var J=y.resumableState,$=y.renderState,ve=$.preamble,ae=ve.htmlChunks,we=ve.headChunks,Oe;if(ae){for(Oe=0;Oe<ae.length;Oe++)S.push(ae[Oe]);if(we)for(Oe=0;Oe<we.length;Oe++)S.push(we[Oe]);else{var Te=hn("head");S.push(Te),S.push(">")}}else if(we)for(Oe=0;Oe<we.length;Oe++)S.push(we[Oe]);var Xe=$.charsetChunks;for(Oe=0;Oe<Xe.length;Oe++)S.push(Xe[Oe]);Xe.length=0,$.preconnects.forEach(bs,S),$.preconnects.clear();var rt=$.viewportChunks;for(Oe=0;Oe<rt.length;Oe++)S.push(rt[Oe]);rt.length=0,$.fontPreloads.forEach(bs,S),$.fontPreloads.clear(),$.highImagePreloads.forEach(bs,S),$.highImagePreloads.clear(),Ve=$,$.styles.forEach(Si,S),Ve=null;var zt=$.importMapChunks;for(Oe=0;Oe<zt.length;Oe++)S.push(zt[Oe]);zt.length=0,$.bootstrapScripts.forEach(bs,S),$.scripts.forEach(bs,S),$.scripts.clear(),$.bulkPreloads.forEach(bs,S),$.bulkPreloads.clear(),J.instructions|=32;var kt=$.hoistableChunks;for(Oe=0;Oe<kt.length;Oe++)S.push(kt[Oe]);for(J=kt.length=0;J<B.length;J++){var Tt=B[J];for($=0;$<Tt.length;$++)fo(y,S,Tt[$],null)}var Et=y.renderState.preamble,Mt=Et.headChunks;if(Et.htmlChunks||Mt){var pn=ke("head");S.push(pn)}var Wn=Et.bodyChunks;if(Wn)for(B=0;B<Wn.length;B++)S.push(Wn[B]);fo(y,S,O,null),y.completedRootSegment=null;var Zt=y.renderState;if(y.allPendingTasks!==0||y.clientRenderedBoundaries.length!==0||y.completedBoundaries.length!==0||y.trackedPostpones!==null&&(y.trackedPostpones.rootNodes.length!==0||y.trackedPostpones.rootSlots!==null)){var Jt=y.resumableState;if((Jt.instructions&64)===0){if(Jt.instructions|=64,S.push(Zt.startInlineScript),(Jt.instructions&32)===0){Jt.instructions|=32;var en="_"+Jt.idPrefix+"R_";S.push(' id="');var Mn=H(en);S.push(Mn),S.push('"')}S.push(">"),S.push("requestAnimationFrame(function(){$RT=performance.now()});"),S.push("<\/script>")}}Ze(S,Zt)}var qt=y.renderState;O=0;var cs=qt.viewportChunks;for(O=0;O<cs.length;O++)S.push(cs[O]);cs.length=0,qt.preconnects.forEach(bs,S),qt.preconnects.clear(),qt.fontPreloads.forEach(bs,S),qt.fontPreloads.clear(),qt.highImagePreloads.forEach(bs,S),qt.highImagePreloads.clear(),qt.styles.forEach(Nd,S),qt.scripts.forEach(bs,S),qt.scripts.clear(),qt.bulkPreloads.forEach(bs,S),qt.bulkPreloads.clear();var xn=qt.hoistableChunks;for(O=0;O<xn.length;O++)S.push(xn[O]);xn.length=0;var Qn=y.clientRenderedBoundaries;for(k=0;k<Qn.length;k++){var In=Qn[k];qt=S;var Pn=y.resumableState,ci=y.renderState,Pr=In.rootSegmentID,Hi=In.errorDigest;qt.push(ci.startInlineScript),qt.push(">"),(Pn.instructions&4)===0?(Pn.instructions|=4,qt.push('$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};;$RX("')):qt.push('$RX("'),qt.push(ci.boundaryPrefix);var di=Pr.toString(16);if(qt.push(di),qt.push('"'),Hi){qt.push(",");var Oa=dt(Hi||"");qt.push(Oa)}var ds=qt.push(")<\/script>");if(!ds){y.destination=null,k++,Qn.splice(0,k);return}}Qn.splice(0,k);var Ti=y.completedBoundaries;for(k=0;k<Ti.length;k++)if(!Wd(y,S,Ti[k])){y.destination=null,k++,Ti.splice(0,k);return}Ti.splice(0,k),Qa=!0;var _i=y.partialBoundaries;for(k=0;k<_i.length;k++){var is=_i[k];e:{Qn=y,In=S,ho=is.byteSize;var ys=is.completedSegments;for(ds=0;ds<ys.length;ds++)if(!Jo(Qn,In,is,ys[ds])){ds++,ys.splice(0,ds);var ji=!1;break e}ys.splice(0,ds);var Tn=is.row;Tn!==null&&Tn.together&&is.pendingTasks===1&&(Tn.pendingTasks===1?Da(Qn,Tn,Tn.hoistables):Tn.pendingTasks--),ji=Bi(In,is.contentState,Qn.renderState)}if(!ji){y.destination=null,k++,_i.splice(0,k);return}}_i.splice(0,k),Qa=!1;var ui=y.completedBoundaries;for(k=0;k<ui.length;k++)if(!Wd(y,S,ui[k])){y.destination=null,k++,ui.splice(0,k);return}ui.splice(0,k)}}finally{Qa=!1,y.allPendingTasks===0&&y.clientRenderedBoundaries.length===0&&y.completedBoundaries.length===0&&(y.flushScheduled=!1,k=y.resumableState,k.hasBody&&(_i=ke("body"),S.push(_i)),k.hasHtml&&(k=ke("html"),S.push(k)),y.status=14,S.push(null),y.destination=null)}}function Pa(y){if(y.flushScheduled===!1&&y.pingedTasks.length===0&&y.destination!==null){y.flushScheduled=!0;var S=y.destination;S?Hl(y,S):y.flushScheduled=!1}}function Ul(y,S){if(y.status===13)y.status=14,S.destroy(y.fatalError);else if(y.status!==14&&y.destination===null){y.destination=S;try{Hl(y,S)}catch(k){Fs(y,k,{}),Ja(y,k)}}}function nh(y,S){(y.status===11||y.status===10)&&(y.status=12);try{var k=y.abortableTasks;if(0<k.size){var O=S===void 0?Error(t(432)):typeof S=="object"&&S!==null&&typeof S.then=="function"?Error(t(530)):S;y.fatalError=O,k.forEach(function(B){return Id(B,y,O)}),k.clear()}y.destination!==null&&Hl(y,y.destination)}catch(B){Fs(y,B,{}),Ja(y,B)}}function li(y,S,k){if(S===null)k.rootNodes.push(y);else{var O=k.workingMap,B=O.get(S);B===void 0&&(B=[S[1],S[2],[],null],O.set(S,B),li(B,S[0],k)),B[2].push(y)}}function Mr(){}function Fc(y,S,k,O){var B=!1,J=null,$="",ve=!1;if(S=mt(S?S.identifierPrefix:void 0),y=Sf(y,S,ha(S,k),Qe(0,null,0,null),1/0,Mr,void 0,function(){ve=!0},void 0,void 0,void 0),y.flushScheduled=y.destination!==null,Af(y),y.status===10&&(y.status=11),y.trackedPostpones===null&&Bd(y,y.pendingRootTasks===0),nh(y,O),Ul(y,{push:function(ae){return ae!==null&&($+=ae),!0},destroy:function(ae){B=!0,J=ae}}),B&&J!==O)throw J;if(!ve)throw Error(t(426));return $}return up.renderToStaticMarkup=function(y,S){return Fc(y,S,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},up.renderToString=function(y,S){return Fc(y,S,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},up.version="19.2.3",up}var Dh={};var ej;function mZ(){if(ej)return Dh;ej=1;var n=g0(),e=Ay();function t(b){var v="https://react.dev/errors/"+b;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var j=2;j<arguments.length;j++)v+="&args[]="+encodeURIComponent(arguments[j])}return"Minified React error #"+b+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),C=Symbol.for("react.scope"),E=Symbol.for("react.activity"),T=Symbol.for("react.legacy_hidden"),D=Symbol.for("react.memo_cache_sentinel"),M=Symbol.for("react.view_transition"),L=Symbol.iterator;function I(b){return b===null||typeof b!="object"?null:(b=L&&b[L]||b["@@iterator"],typeof b=="function"?b:null)}var W=Array.isArray;function V(b,v){var j=b.length&3,P=b.length-j,F=v;for(v=0;v<P;){var X=b.charCodeAt(v)&255|(b.charCodeAt(++v)&255)<<8|(b.charCodeAt(++v)&255)<<16|(b.charCodeAt(++v)&255)<<24;++v,X=3432918353*(X&65535)+((3432918353*(X>>>16)&65535)<<16)&4294967295,X=X<<15|X>>>17,X=461845907*(X&65535)+((461845907*(X>>>16)&65535)<<16)&4294967295,F^=X,F=F<<13|F>>>19,F=5*(F&65535)+((5*(F>>>16)&65535)<<16)&4294967295,F=(F&65535)+27492+(((F>>>16)+58964&65535)<<16)}switch(X=0,j){case 3:X^=(b.charCodeAt(v+2)&255)<<16;case 2:X^=(b.charCodeAt(v+1)&255)<<8;case 1:X^=b.charCodeAt(v)&255,X=3432918353*(X&65535)+((3432918353*(X>>>16)&65535)<<16)&4294967295,X=X<<15|X>>>17,F^=461845907*(X&65535)+((461845907*(X>>>16)&65535)<<16)&4294967295}return F^=b.length,F^=F>>>16,F=2246822507*(F&65535)+((2246822507*(F>>>16)&65535)<<16)&4294967295,F^=F>>>13,F=3266489909*(F&65535)+((3266489909*(F>>>16)&65535)<<16)&4294967295,(F^F>>>16)>>>0}var Y=new MessageChannel,K=[];Y.port1.onmessage=function(){var b=K.shift();b&&b()};function q(b){K.push(b),Y.port2.postMessage(null)}function ne(b){setTimeout(function(){throw b})}var le=Promise,_e=typeof queueMicrotask=="function"?queueMicrotask:function(b){le.resolve(null).then(b).catch(ne)},xe=null,je=0;function U(b,v){if(v.byteLength!==0)if(2048<v.byteLength)0<je&&(b.enqueue(new Uint8Array(xe.buffer,0,je)),xe=new Uint8Array(2048),je=0),b.enqueue(v);else{var j=xe.length-je;j<v.byteLength&&(j===0?b.enqueue(xe):(xe.set(v.subarray(0,j),je),b.enqueue(xe),v=v.subarray(j)),xe=new Uint8Array(2048),je=0),xe.set(v,je),je+=v.byteLength}}function H(b,v){return U(b,v),!0}function ee(b){xe&&0<je&&(b.enqueue(new Uint8Array(xe.buffer,0,je)),xe=null,je=0)}var he=new TextEncoder;function ce(b){return he.encode(b)}function G(b){return he.encode(b)}function ue(b){return b.byteLength}function Se(b,v){typeof b.error=="function"?b.error(v):b.close()}var fe=Object.assign,Ae=Object.prototype.hasOwnProperty,Pe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ve={},Nt={};function ht(b){return Ae.call(Nt,b)?!0:Ae.call(Ve,b)?!1:Pe.test(b)?Nt[b]=!0:(Ve[b]=!0,!1)}var mt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" ")),Qe=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Kt=/["'&<>]/;function Ke(b){if(typeof b=="boolean"||typeof b=="number"||typeof b=="bigint")return""+b;b=""+b;var v=Kt.exec(b);if(v){var j="",P,F=0;for(P=v.index;P<b.length;P++){switch(b.charCodeAt(P)){case 34:v="&quot;";break;case 38:v="&amp;";break;case 39:v="&#x27;";break;case 60:v="&lt;";break;case 62:v="&gt;";break;default:continue}F!==P&&(j+=b.slice(F,P)),F=P+1,j+=v}b=F!==P?j+b.slice(F,P):j}return b}var at=/([A-Z])/g,ft=/^ms-/,Gt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function He(b){return Gt.test(""+b)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":b}var Je=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ie=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt={pending:!1,data:null,method:null,action:null},De=Ie.d;Ie.d={f:De.f,r:De.r,D:Id,C:Bd,L:Hd,m:Ud,X:uo,S:Lc,M:Af};var Fe=[],$e=null;G('"></template>');var nt=G("<script"),qe=G("<\/script>"),St=G('<script src="'),un=G('<script type="module" src="'),an=G(' nonce="'),Lt=G(' integrity="'),ts=G(' crossorigin="'),ns=G(' async=""><\/script>'),vi=G("<style"),Ps=/(<\/|<)(s)(cript)/gi;function yn(b,v,j,P){return""+v+(j==="s"?"\\u0073":"\\u0053")+P}var ss=G('<script type="importmap">'),Fn=G("<\/script>");function da(b,v,j,P,F,X){j=typeof v=="string"?v:v&&v.script;var Q=j===void 0?nt:G('<script nonce="'+Ke(j)+'"'),oe=typeof v=="string"?void 0:v&&v.style,te=oe===void 0?vi:G('<style nonce="'+Ke(oe)+'"'),de=b.idPrefix,be=[],Ne=b.bootstrapScriptContent,We=b.bootstrapScripts,Ye=b.bootstrapModules;if(Ne!==void 0&&(be.push(Q),Rr(be,b),be.push(bn,ce((""+Ne).replace(Ps,yn)),qe)),Ne=[],P!==void 0&&(Ne.push(ss),Ne.push(ce((""+JSON.stringify(P)).replace(Ps,yn))),Ne.push(Fn)),P=F?{preconnects:"",fontPreloads:"",highImagePreloads:"",remainingCapacity:2+(typeof X=="number"?X:2e3)}:null,F={placeholderPrefix:G(de+"P:"),segmentPrefix:G(de+"S:"),boundaryPrefix:G(de+"B:"),startInlineScript:Q,startInlineStyle:te,preamble:hn(),externalRuntimeScript:null,bootstrapChunks:be,importMapChunks:Ne,onHeaders:F,headers:P,resets:{font:{},dns:{},connect:{default:{},anonymous:{},credentials:{}},image:{},style:{}},charsetChunks:[],viewportChunks:[],hoistableChunks:[],preconnects:new Set,fontPreloads:new Set,highImagePreloads:new Set,styles:new Map,bootstrapScripts:new Set,scripts:new Set,bulkPreloads:new Set,preloads:{images:new Map,stylesheets:new Map,scripts:new Map,moduleScripts:new Map},nonce:{script:j,style:oe},hoistableState:null,stylesToHoist:!1},We!==void 0)for(P=0;P<We.length;P++)de=We[P],oe=Q=void 0,te={rel:"preload",as:"script",fetchPriority:"low",nonce:v},typeof de=="string"?te.href=X=de:(te.href=X=de.src,te.integrity=oe=typeof de.integrity=="string"?de.integrity:void 0,te.crossOrigin=Q=typeof de=="string"||de.crossOrigin==null?void 0:de.crossOrigin==="use-credentials"?"use-credentials":""),de=b,Ne=X,de.scriptResources[Ne]=null,de.moduleScriptResources[Ne]=null,de=[],zn(de,te),F.bootstrapScripts.add(de),be.push(St,ce(Ke(X)),fn),j&&be.push(an,ce(Ke(j)),fn),typeof oe=="string"&&be.push(Lt,ce(Ke(oe)),fn),typeof Q=="string"&&be.push(ts,ce(Ke(Q)),fn),Rr(be,b),be.push(ns);if(Ye!==void 0)for(v=0;v<Ye.length;v++)oe=Ye[v],X=P=void 0,Q={rel:"modulepreload",fetchPriority:"low",nonce:j},typeof oe=="string"?Q.href=We=oe:(Q.href=We=oe.src,Q.integrity=X=typeof oe.integrity=="string"?oe.integrity:void 0,Q.crossOrigin=P=typeof oe=="string"||oe.crossOrigin==null?void 0:oe.crossOrigin==="use-credentials"?"use-credentials":""),oe=b,te=We,oe.scriptResources[te]=null,oe.moduleScriptResources[te]=null,oe=[],zn(oe,Q),F.bootstrapScripts.add(oe),be.push(un,ce(Ke(We)),fn),j&&be.push(an,ce(Ke(j)),fn),typeof X=="string"&&be.push(Lt,ce(Ke(X)),fn),typeof P=="string"&&be.push(ts,ce(Ke(P)),fn),Rr(be,b),be.push(ns);return F}function ua(b,v,j,P,F){return{idPrefix:b===void 0?"":b,nextFormID:0,streamingFormat:0,bootstrapScriptContent:j,bootstrapScripts:P,bootstrapModules:F,instructions:0,hasBody:!1,hasHtml:!1,unknownResources:{},dnsResources:{},connectResources:{default:{},anonymous:{},credentials:{}},imageResources:{},styleResources:{},scriptResources:{},moduleUnknownResources:{},moduleScriptResources:{}}}function hn(){return{htmlChunks:null,headChunks:null,bodyChunks:null}}function vn(b,v,j,P){return{insertionMode:b,selectedValue:v,tagScope:j,viewTransition:P}}function ie(b){return vn(b==="http://www.w3.org/2000/svg"?4:b==="http://www.w3.org/1998/Math/MathML"?5:0,null,0,null)}function ke(b,v,j){var P=b.tagScope&-25;switch(v){case"noscript":return vn(2,null,P|1,null);case"select":return vn(2,j.value!=null?j.value:j.defaultValue,P,null);case"svg":return vn(4,null,P,null);case"picture":return vn(2,null,P|2,null);case"math":return vn(5,null,P,null);case"foreignObject":return vn(2,null,P,null);case"table":return vn(6,null,P,null);case"thead":case"tbody":case"tfoot":return vn(7,null,P,null);case"colgroup":return vn(9,null,P,null);case"tr":return vn(8,null,P,null);case"head":if(2>b.insertionMode)return vn(3,null,P,null);break;case"html":if(b.insertionMode===0)return vn(1,null,P,null)}return 6<=b.insertionMode||2>b.insertionMode?vn(2,null,P,null):b.tagScope!==P?vn(b.insertionMode,b.selectedValue,P,null):b}function Ge(b){return b===null?null:{update:b.update,enter:"none",exit:"none",share:b.update,name:b.autoName,autoName:b.autoName,nameIdx:0}}function Ze(b,v){return v.tagScope&32&&(b.instructions|=128),vn(v.insertionMode,v.selectedValue,v.tagScope|12,Ge(v.viewTransition))}function pt(b,v){b=Ge(v.viewTransition);var j=v.tagScope|16;return b!==null&&b.share!=="none"&&(j|=64),vn(v.insertionMode,v.selectedValue,j,b)}var st=G("<!-- -->");function Ut(b,v,j,P){return v===""?P:(P&&b.push(st),b.push(ce(Ke(v))),!0)}var rn=new Map,dt=G(' style="'),ps=G(":"),wi=G(";");function Vs(b,v){if(typeof v!="object")throw Error(t(62));var j=!0,P;for(P in v)if(Ae.call(v,P)){var F=v[P];if(F!=null&&typeof F!="boolean"&&F!==""){if(P.indexOf("--")===0){var X=ce(Ke(P));F=ce(Ke((""+F).trim()))}else X=rn.get(P),X===void 0&&(X=G(Ke(P.replace(at,"-$1").toLowerCase().replace(ft,"-ms-"))),rn.set(P,X)),F=typeof F=="number"?F===0||mt.has(P)?ce(""+F):ce(F+"px"):ce(Ke((""+F).trim()));j?(j=!1,b.push(dt,X,ps,F)):b.push(wi,X,ps,F)}}j||b.push(fn)}var wn=G(" "),xs=G('="'),fn=G('"'),Bi=G('=""');function bs(b,v,j){j&&typeof j!="function"&&typeof j!="symbol"&&b.push(wn,ce(v),Bi)}function $t(b,v,j){typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&b.push(wn,ce(v),xs,ce(Ke(j)),fn)}var Os=G(Ke("javascript:throw new Error('React form unexpectedly submitted.')")),Si=G('<input type="hidden"');function io(b,v){this.push(Si),Nd(b),$t(this,"name",v),$t(this,"value",b),this.push(Po)}function Nd(b){if(typeof b!="string")throw Error(t(480))}function Ac(b,v){if(typeof v.$$FORM_ACTION=="function"){var j=b.nextFormID++;b=b.idPrefix+j;try{var P=v.$$FORM_ACTION(b);if(P){var F=P.data;F?.forEach(Nd)}return P}catch(X){if(typeof X=="object"&&X!==null&&typeof X.then=="function")throw X}}return null}function gf(b,v,j,P,F,X,Q,oe){var te=null;if(typeof P=="function"){var de=Ac(v,P);de!==null?(oe=de.name,P=de.action||"",F=de.encType,X=de.method,Q=de.target,te=de.data):(b.push(wn,ce("formAction"),xs,Os,fn),Q=X=F=P=oe=null,Ts(v,j))}return oe!=null&&gn(b,"name",oe),P!=null&&gn(b,"formAction",P),F!=null&&gn(b,"formEncType",F),X!=null&&gn(b,"formMethod",X),Q!=null&&gn(b,"formTarget",Q),te}function gn(b,v,j){switch(v){case"className":$t(b,"class",j);break;case"tabIndex":$t(b,"tabindex",j);break;case"dir":case"role":case"viewBox":case"width":case"height":$t(b,v,j);break;case"style":Vs(b,j);break;case"src":case"href":if(j==="")break;case"action":case"formAction":if(j==null||typeof j=="function"||typeof j=="symbol"||typeof j=="boolean")break;j=He(""+j),b.push(wn,ce(v),xs,ce(Ke(j)),fn);break;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":case"ref":break;case"autoFocus":case"multiple":case"muted":bs(b,v.toLowerCase(),j);break;case"xlinkHref":if(typeof j=="function"||typeof j=="symbol"||typeof j=="boolean")break;j=He(""+j),b.push(wn,ce("xlink:href"),xs,ce(Ke(j)),fn);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":typeof j!="function"&&typeof j!="symbol"&&b.push(wn,ce(v),xs,ce(Ke(j)),fn);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":j&&typeof j!="function"&&typeof j!="symbol"&&b.push(wn,ce(v),Bi);break;case"capture":case"download":j===!0?b.push(wn,ce(v),Bi):j!==!1&&typeof j!="function"&&typeof j!="symbol"&&b.push(wn,ce(v),xs,ce(Ke(j)),fn);break;case"cols":case"rows":case"size":case"span":typeof j!="function"&&typeof j!="symbol"&&!isNaN(j)&&1<=j&&b.push(wn,ce(v),xs,ce(Ke(j)),fn);break;case"rowSpan":case"start":typeof j=="function"||typeof j=="symbol"||isNaN(j)||b.push(wn,ce(v),xs,ce(Ke(j)),fn);break;case"xlinkActuate":$t(b,"xlink:actuate",j);break;case"xlinkArcrole":$t(b,"xlink:arcrole",j);break;case"xlinkRole":$t(b,"xlink:role",j);break;case"xlinkShow":$t(b,"xlink:show",j);break;case"xlinkTitle":$t(b,"xlink:title",j);break;case"xlinkType":$t(b,"xlink:type",j);break;case"xmlBase":$t(b,"xml:base",j);break;case"xmlLang":$t(b,"xml:lang",j);break;case"xmlSpace":$t(b,"xml:space",j);break;default:if((!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(v=Qe.get(v)||v,ht(v))){switch(typeof j){case"function":case"symbol":return;case"boolean":var P=v.toLowerCase().slice(0,5);if(P!=="data-"&&P!=="aria-")return}b.push(wn,ce(v),xs,ce(Ke(j)),fn)}}}var bn=G(">"),Po=G("/>");function Ls(b,v,j){if(v!=null){if(j!=null)throw Error(t(60));if(typeof v!="object"||!("__html"in v))throw Error(t(61));v=v.__html,v!=null&&b.push(ce(""+v))}}function Tl(b){var v="";return n.Children.forEach(b,function(j){j!=null&&(v+=j)}),v}var Oo=G(' selected=""'),Lo=G(`addEventListener("submit",function(a){if(!a.defaultPrevented){var c=a.target,d=a.submitter,e=c.action,b=d;if(d){var f=d.getAttribute("formAction");null!=f&&(e=f,b=null)}"javascript:throw new Error('React form unexpectedly submitted.')"===e&&(a.preventDefault(),b?(a=document.createElement("input"),a.name=b.name,a.value=b.value,b.parentNode.insertBefore(a,b),b=new FormData(c),a.parentNode.removeChild(a)):b=new FormData(c),a=c.ownerDocument||c,(a.$$reactFormReplay=a.$$reactFormReplay||[]).push(c,d,b))}});`);function Ts(b,v){if((b.instructions&16)===0){b.instructions|=16;var j=v.preamble,P=v.bootstrapChunks;(j.htmlChunks||j.headChunks)&&P.length===0?(P.push(v.startInlineScript),Rr(P,b),P.push(bn,Lo,qe)):P.unshift(v.startInlineScript,bn,Lo,qe)}}var pf=G("<!--F!-->"),_l=G("<!--F-->");function zn(b,v){b.push(Jn("link"));for(var j in v)if(Ae.call(v,j)){var P=v[j];if(P!=null)switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(t(399,"link"));default:gn(b,j,P)}}return b.push(Po),null}var wr=/(<\/|<)(s)(tyle)/gi;function Ad(b,v,j,P){return""+v+(j==="s"?"\\73 ":"\\53 ")+P}function Sr(b,v,j){b.push(Jn(j));for(var P in v)if(Ae.call(v,P)){var F=v[P];if(F!=null)switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(t(399,j));default:gn(b,P,F)}}return b.push(Po),null}function Cc(b,v){b.push(Jn("title"));var j=null,P=null,F;for(F in v)if(Ae.call(v,F)){var X=v[F];if(X!=null)switch(F){case"children":j=X;break;case"dangerouslySetInnerHTML":P=X;break;default:gn(b,F,X)}}return b.push(bn),v=Array.isArray(j)?2>j.length?j[0]:null:j,typeof v!="function"&&typeof v!="symbol"&&v!==null&&v!==void 0&&b.push(ce(Ke(""+v))),Ls(b,P,j),b.push(Cr("title")),null}var ig=G("<!--head-->"),Cd=G("<!--body-->"),Nr=G("<!--html-->");function ha(b,v){b.push(Jn("script"));var j=null,P=null,F;for(F in v)if(Ae.call(v,F)){var X=v[F];if(X!=null)switch(F){case"children":j=X;break;case"dangerouslySetInnerHTML":P=X;break;default:gn(b,F,X)}}return b.push(bn),Ls(b,P,j),typeof j=="string"&&b.push(ce((""+j).replace(Ps,yn))),b.push(Cr("script")),null}function Ni(b,v,j){b.push(Jn(j));var P=j=null,F;for(F in v)if(Ae.call(v,F)){var X=v[F];if(X!=null)switch(F){case"children":j=X;break;case"dangerouslySetInnerHTML":P=X;break;default:gn(b,F,X)}}return b.push(bn),Ls(b,P,j),j}function Ar(b,v,j){b.push(Jn(j));var P=j=null,F;for(F in v)if(Ae.call(v,F)){var X=v[F];if(X!=null)switch(F){case"children":j=X;break;case"dangerouslySetInnerHTML":P=X;break;default:gn(b,F,X)}}return b.push(bn),Ls(b,P,j),typeof j=="string"?(b.push(ce(Ke(j))),null):j}var Ku=G(`
`),Zu=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,jl=new Map;function Jn(b){var v=jl.get(b);if(v===void 0){if(!Zu.test(b))throw Error(t(65,b));v=G("<"+b),jl.set(b,v)}return v}var Fo=G("<!DOCTYPE html>");function Ai(b,v,j,P,F,X,Q,oe,te){switch(v){case"div":case"span":case"svg":case"path":break;case"a":b.push(Jn("a"));var de=null,be=null,Ne;for(Ne in j)if(Ae.call(j,Ne)){var We=j[Ne];if(We!=null)switch(Ne){case"children":de=We;break;case"dangerouslySetInnerHTML":be=We;break;case"href":We===""?$t(b,"href",""):gn(b,Ne,We);break;default:gn(b,Ne,We)}}if(b.push(bn),Ls(b,be,de),typeof de=="string"){b.push(ce(Ke(de)));var Ye=null}else Ye=de;return Ye;case"g":case"p":case"li":break;case"select":b.push(Jn("select"));var xt=null,Pt=null,_t;for(_t in j)if(Ae.call(j,_t)){var et=j[_t];if(et!=null)switch(_t){case"children":xt=et;break;case"dangerouslySetInnerHTML":Pt=et;break;case"defaultValue":case"value":break;default:gn(b,_t,et)}}return b.push(bn),Ls(b,Pt,xt),xt;case"option":var bt=oe.selectedValue;b.push(Jn("option"));var Qt=null,Zs=null,Js=null,yt=null,js;for(js in j)if(Ae.call(j,js)){var Ln=j[js];if(Ln!=null)switch(js){case"children":Qt=Ln;break;case"selected":Js=Ln;break;case"dangerouslySetInnerHTML":yt=Ln;break;case"value":Zs=Ln;default:gn(b,js,Ln)}}if(bt!=null){var ws=Zs!==null?""+Zs:Tl(Qt);if(W(bt)){for(var Hr=0;Hr<bt.length;Hr++)if(""+bt[Hr]===ws){b.push(Oo);break}}else""+bt===ws&&b.push(Oo)}else Js&&b.push(Oo);return b.push(bn),Ls(b,yt,Qt),Qt;case"textarea":b.push(Jn("textarea"));var Rt=null,nr=null,ya=null,Is;for(Is in j)if(Ae.call(j,Is)){var aa=j[Is];if(aa!=null)switch(Is){case"children":ya=aa;break;case"value":Rt=aa;break;case"defaultValue":nr=aa;break;case"dangerouslySetInnerHTML":throw Error(t(91));default:gn(b,Is,aa)}}if(Rt===null&&nr!==null&&(Rt=nr),b.push(bn),ya!=null){if(Rt!=null)throw Error(t(92));if(W(ya)){if(1<ya.length)throw Error(t(93));Rt=""+ya[0]}Rt=""+ya}return typeof Rt=="string"&&Rt[0]===`
`&&b.push(Ku),Rt!==null&&b.push(ce(Ke(""+Rt))),null;case"input":b.push(Jn("input"));var Uc=null,sl=null,Ur=null,il=null,Qs=null,An=null,Vr=null,Vc=null,$d=null,Wc;for(Wc in j)if(Ae.call(j,Wc)){var qs=j[Wc];if(qs!=null)switch(Wc){case"children":case"dangerouslySetInnerHTML":throw Error(t(399,"input"));case"name":Uc=qs;break;case"formAction":sl=qs;break;case"formEncType":Ur=qs;break;case"formMethod":il=qs;break;case"formTarget":Qs=qs;break;case"defaultChecked":$d=qs;break;case"defaultValue":Vr=qs;break;case"checked":Vc=qs;break;case"value":An=qs;break;default:gn(b,Wc,qs)}}var ih=gf(b,P,F,sl,Ur,il,Qs,Uc);return Vc!==null?bs(b,"checked",Vc):$d!==null&&bs(b,"checked",$d),An!==null?gn(b,"value",An):Vr!==null&&gn(b,"value",Vr),b.push(Po),ih?.forEach(io,b),null;case"button":b.push(Jn("button"));var Gc=null,Cf=null,fg=null,mg=null,gg=null,pg=null,xg=null,eu;for(eu in j)if(Ae.call(j,eu)){var Wr=j[eu];if(Wr!=null)switch(eu){case"children":Gc=Wr;break;case"dangerouslySetInnerHTML":Cf=Wr;break;case"name":fg=Wr;break;case"formAction":mg=Wr;break;case"formEncType":gg=Wr;break;case"formMethod":pg=Wr;break;case"formTarget":xg=Wr;break;default:gn(b,eu,Wr)}}var bg=gf(b,P,F,mg,gg,pg,xg,fg);if(b.push(bn),bg?.forEach(io,b),Ls(b,Cf,Gc),typeof Gc=="string"){b.push(ce(Ke(Gc)));var tx=null}else tx=Gc;return tx;case"form":b.push(Jn("form"));var tu=null,yg=null,Ql=null,Yc=null,nu=null,su=null,iu;for(iu in j)if(Ae.call(j,iu)){var al=j[iu];if(al!=null)switch(iu){case"children":tu=al;break;case"dangerouslySetInnerHTML":yg=al;break;case"action":Ql=al;break;case"encType":Yc=al;break;case"method":nu=al;break;case"target":su=al;break;default:gn(b,iu,al)}}var Ef=null,vg=null;if(typeof Ql=="function"){var ql=Ac(P,Ql);ql!==null?(Ql=ql.action||"",Yc=ql.encType,nu=ql.method,su=ql.target,Ef=ql.data,vg=ql.name):(b.push(wn,ce("action"),xs,Os,fn),su=nu=Yc=Ql=null,Ts(P,F))}if(Ql!=null&&gn(b,"action",Ql),Yc!=null&&gn(b,"encType",Yc),nu!=null&&gn(b,"method",nu),su!=null&&gn(b,"target",su),b.push(bn),vg!==null&&(b.push(Si),$t(b,"name",vg),b.push(Po),Ef?.forEach(io,b)),Ls(b,yg,tu),typeof tu=="string"){b.push(ce(Ke(tu)));var Xc=null}else Xc=tu;return Xc;case"menuitem":b.push(Jn("menuitem"));for(var ah in j)if(Ae.call(j,ah)){var rh=j[ah];if(rh!=null)switch(ah){case"children":case"dangerouslySetInnerHTML":throw Error(t(400));default:gn(b,ah,rh)}}return b.push(bn),null;case"object":b.push(Jn("object"));var $l=null,wg=null,Kc;for(Kc in j)if(Ae.call(j,Kc)){var oh=j[Kc];if(oh!=null)switch(Kc){case"children":$l=oh;break;case"dangerouslySetInnerHTML":wg=oh;break;case"data":var Sg=He(""+oh);if(Sg==="")break;b.push(wn,ce("data"),xs,ce(Ke(Sg)),fn);break;default:gn(b,Kc,oh)}}if(b.push(bn),Ls(b,wg,$l),typeof $l=="string"){b.push(ce(Ke($l)));var Ng=null}else Ng=$l;return Ng;case"title":var nx=oe.tagScope&1,sx=oe.tagScope&4;if(oe.insertionMode===4||nx||j.itemProp!=null)var Tf=Cc(b,j);else sx?Tf=null:(Cc(F.hoistableChunks,j),Tf=void 0);return Tf;case"link":var Ag=oe.tagScope&1,ix=oe.tagScope&4,ax=j.rel,xo=j.href,lh=j.precedence;if(oe.insertionMode===4||Ag||j.itemProp!=null||typeof ax!="string"||typeof xo!="string"||xo===""){zn(b,j);var au=null}else if(j.rel==="stylesheet")if(typeof lh!="string"||j.disabled!=null||j.onLoad||j.onError)au=zn(b,j);else{var ru=F.styles.get(lh),ou=P.styleResources.hasOwnProperty(xo)?P.styleResources[xo]:void 0;if(ou!==null){P.styleResources[xo]=null,ru||(ru={precedence:ce(Ke(lh)),rules:[],hrefs:[],sheets:new Map},F.styles.set(lh,ru));var ch={state:0,props:fe({},j,{"data-precedence":j.precedence,precedence:null})};if(ou){ou.length===2&&Ko(ch.props,ou);var _f=F.preloads.stylesheets.get(xo);_f&&0<_f.length?_f.length=0:ch.state=1}ru.sheets.set(xo,ch),Q&&Q.stylesheets.add(ch)}else if(ru){var jf=ru.sheets.get(xo);jf&&Q&&Q.stylesheets.add(jf)}te&&b.push(st),au=null}else j.onLoad||j.onError?au=zn(b,j):(te&&b.push(st),au=ix?null:zn(F.hoistableChunks,j));return au;case"script":var rx=oe.tagScope&1,kf=j.async;if(typeof j.src!="string"||!j.src||!kf||typeof kf=="function"||typeof kf=="symbol"||j.onLoad||j.onError||oe.insertionMode===4||rx||j.itemProp!=null)var ox=ha(b,j);else{var Rf=j.src;if(j.type==="module")var dh=P.moduleScriptResources,lu=F.preloads.moduleScripts;else dh=P.scriptResources,lu=F.preloads.scripts;var cu=dh.hasOwnProperty(Rf)?dh[Rf]:void 0;if(cu!==null){dh[Rf]=null;var du=j;if(cu){cu.length===2&&(du=fe({},j),Ko(du,cu));var Cg=lu.get(Rf);Cg&&(Cg.length=0)}var Eg=[];F.scripts.add(Eg),ha(Eg,du)}te&&b.push(st),ox=null}return ox;case"style":var uh=oe.tagScope&1,hh=j.precedence,ec=j.href,lx=j.nonce;if(oe.insertionMode===4||uh||j.itemProp!=null||typeof hh!="string"||typeof ec!="string"||ec===""){b.push(Jn("style"));var tc=null,Df=null,uu;for(uu in j)if(Ae.call(j,uu)){var fh=j[uu];if(fh!=null)switch(uu){case"children":tc=fh;break;case"dangerouslySetInnerHTML":Df=fh;break;default:gn(b,uu,fh)}}b.push(bn);var Gr=Array.isArray(tc)?2>tc.length?tc[0]:null:tc;typeof Gr!="function"&&typeof Gr!="symbol"&&Gr!==null&&Gr!==void 0&&b.push(ce((""+Gr).replace(wr,Ad))),Ls(b,Df,tc),b.push(Cr("style"));var Tg=null}else{var nc=F.styles.get(hh);if((P.styleResources.hasOwnProperty(ec)?P.styleResources[ec]:void 0)!==null){P.styleResources[ec]=null,nc||(nc={precedence:ce(Ke(hh)),rules:[],hrefs:[],sheets:new Map},F.styles.set(hh,nc));var _g=F.nonce.style;if(!_g||_g===lx){nc.hrefs.push(ce(Ke(ec)));var mh=nc.rules,Zc=null,Mf=null,gh;for(gh in j)if(Ae.call(j,gh)){var Pf=j[gh];if(Pf!=null)switch(gh){case"children":Zc=Pf;break;case"dangerouslySetInnerHTML":Mf=Pf}}var ph=Array.isArray(Zc)?2>Zc.length?Zc[0]:null:Zc;typeof ph!="function"&&typeof ph!="symbol"&&ph!==null&&ph!==void 0&&mh.push(ce((""+ph).replace(wr,Ad))),Ls(mh,Mf,Zc)}}nc&&Q&&Q.styles.add(nc),te&&b.push(st),Tg=void 0}return Tg;case"meta":var jg=oe.tagScope&1,Bs=oe.tagScope&4;if(oe.insertionMode===4||jg||j.itemProp!=null)var mi=Sr(b,j,"meta");else te&&b.push(st),mi=Bs?null:typeof j.charSet=="string"?Sr(F.charsetChunks,j,"meta"):j.name==="viewport"?Sr(F.viewportChunks,j,"meta"):Sr(F.hoistableChunks,j,"meta");return mi;case"listing":case"pre":b.push(Jn(v));var hu=null,fu=null,mu;for(mu in j)if(Ae.call(j,mu)){var xh=j[mu];if(xh!=null)switch(mu){case"children":hu=xh;break;case"dangerouslySetInnerHTML":fu=xh;break;default:gn(b,mu,xh)}}if(b.push(bn),fu!=null){if(hu!=null)throw Error(t(60));if(typeof fu!="object"||!("__html"in fu))throw Error(t(61));var Yr=fu.__html;Yr!=null&&(typeof Yr=="string"&&0<Yr.length&&Yr[0]===`
`?b.push(Ku,ce(Yr)):b.push(ce(""+Yr)))}return typeof hu=="string"&&hu[0]===`
`&&b.push(Ku),hu;case"img":var cx=oe.tagScope&3,$s=j.src,gi=j.srcSet;if(!(j.loading==="lazy"||!$s&&!gi||typeof $s!="string"&&$s!=null||typeof gi!="string"&&gi!=null||j.fetchPriority==="low"||cx)&&(typeof $s!="string"||$s[4]!==":"||$s[0]!=="d"&&$s[0]!=="D"||$s[1]!=="a"&&$s[1]!=="A"||$s[2]!=="t"&&$s[2]!=="T"||$s[3]!=="a"&&$s[3]!=="A")&&(typeof gi!="string"||gi[4]!==":"||gi[0]!=="d"&&gi[0]!=="D"||gi[1]!=="a"&&gi[1]!=="A"||gi[2]!=="t"&&gi[2]!=="T"||gi[3]!=="a"&&gi[3]!=="A")){Q!==null&&oe.tagScope&64&&(Q.suspenseyImages=!0);var dx=typeof j.sizes=="string"?j.sizes:void 0,rl=gi?gi+`
`+(dx||""):$s,bh=F.preloads.images,sc=bh.get(rl);if(sc)(j.fetchPriority==="high"||10>F.highImagePreloads.size)&&(bh.delete(rl),F.highImagePreloads.add(sc));else if(!P.imageResources.hasOwnProperty(rl)){P.imageResources[rl]=Fe;var Of=j.crossOrigin,kg=typeof Of=="string"?Of==="use-credentials"?Of:"":void 0,ol=F.headers,yh;ol&&0<ol.remainingCapacity&&typeof j.srcSet!="string"&&(j.fetchPriority==="high"||500>ol.highImagePreloads.length)&&(yh=Ys($s,"image",{imageSrcSet:j.srcSet,imageSizes:j.sizes,crossOrigin:kg,integrity:j.integrity,nonce:j.nonce,type:j.type,fetchPriority:j.fetchPriority,referrerPolicy:j.refererPolicy}),0<=(ol.remainingCapacity-=yh.length+2))?(F.resets.image[rl]=Fe,ol.highImagePreloads&&(ol.highImagePreloads+=", "),ol.highImagePreloads+=yh):(sc=[],zn(sc,{rel:"preload",as:"image",href:gi?void 0:$s,imageSrcSet:gi,imageSizes:dx,crossOrigin:kg,integrity:j.integrity,type:j.type,fetchPriority:j.fetchPriority,referrerPolicy:j.referrerPolicy}),j.fetchPriority==="high"||10>F.highImagePreloads.size?F.highImagePreloads.add(sc):(F.bulkPreloads.add(sc),bh.set(rl,sc)))}}return Sr(b,j,"img");case"base":case"area":case"br":case"col":case"embed":case"hr":case"keygen":case"param":case"source":case"track":case"wbr":return Sr(b,j,v);case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":break;case"head":if(2>oe.insertionMode){var vh=X||F.preamble;if(vh.headChunks)throw Error(t(545,"`<head>`"));X!==null&&b.push(ig),vh.headChunks=[];var Rg=Ni(vh.headChunks,j,"head")}else Rg=Ar(b,j,"head");return Rg;case"body":if(2>oe.insertionMode){var wh=X||F.preamble;if(wh.bodyChunks)throw Error(t(545,"`<body>`"));X!==null&&b.push(Cd),wh.bodyChunks=[];var Sh=Ni(wh.bodyChunks,j,"body")}else Sh=Ar(b,j,"body");return Sh;case"html":if(oe.insertionMode===0){var Nh=X||F.preamble;if(Nh.htmlChunks)throw Error(t(545,"`<html>`"));X!==null&&b.push(Nr),Nh.htmlChunks=[Fo];var Dg=Ni(Nh.htmlChunks,j,"html")}else Dg=Ar(b,j,"html");return Dg;default:if(v.indexOf("-")!==-1){b.push(Jn(v));var Ah=null,Mg=null,va;for(va in j)if(Ae.call(j,va)){var Ha=j[va];if(Ha!=null){var ux=va;switch(va){case"children":Ah=Ha;break;case"dangerouslySetInnerHTML":Mg=Ha;break;case"style":Vs(b,Ha);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"ref":break;case"className":ux="class";default:if(ht(va)&&typeof Ha!="function"&&typeof Ha!="symbol"&&Ha!==!1){if(Ha===!0)Ha="";else if(typeof Ha=="object")continue;b.push(wn,ce(ux),xs,ce(Ke(Ha)),fn)}}}}return b.push(bn),Ls(b,Mg,Ah),Ah}}return Ar(b,j,v)}var Ec=new Map;function Cr(b){var v=Ec.get(b);return v===void 0&&(v=G("</"+b+">"),Ec.set(b,v)),v}function Tc(b,v){b=b.preamble,b.htmlChunks===null&&v.htmlChunks&&(b.htmlChunks=v.htmlChunks),b.headChunks===null&&v.headChunks&&(b.headChunks=v.headChunks),b.bodyChunks===null&&v.bodyChunks&&(b.bodyChunks=v.bodyChunks)}function ao(b,v){v=v.bootstrapChunks;for(var j=0;j<v.length-1;j++)U(b,v[j]);return j<v.length?(j=v[j],v.length=0,H(b,j)):!0}var Er=G("requestAnimationFrame(function(){$RT=performance.now()});"),Ju=G('<template id="'),kl=G('"></template>'),zo=G("<!--&-->"),_c=G("<!--/&-->"),xf=G("<!--$-->"),Qu=G('<!--$?--><template id="'),ag=G('"></template>'),Ci=G("<!--$!-->"),oi=G("<!--/$-->"),Tr=G("<template"),Rl=G('"'),Dl=G(' data-dgst="');G(' data-msg="'),G(' data-stck="'),G(' data-cstck="');var Ml=G("></template>");function Io(b,v,j){if(U(b,Qu),j===null)throw Error(t(395));return U(b,v.boundaryPrefix),U(b,ce(j.toString(16))),H(b,ag)}var Za=G('<div hidden id="'),jc=G('">'),Ed=G("</div>"),Bo=G('<svg aria-hidden="true" style="display:none" id="'),fa=G('">'),Sn=G("</svg>"),_r=G('<math aria-hidden="true" style="display:none" id="'),Ra=G('">'),Ho=G("</math>"),ro=G('<table hidden id="'),Pl=G('">'),Uo=G("</table>"),jr=G('<table hidden><tbody id="'),kr=G('">'),Ws=G("</tbody></table>"),Ei=G('<table hidden><tr id="'),kc=G('">'),Vo=G("</tr></table>"),Ol=G('<table hidden><colgroup id="'),Wo=G('">'),Td=G("</colgroup></table>");function Ll(b,v,j,P){switch(j.insertionMode){case 0:case 1:case 3:case 2:return U(b,Za),U(b,v.segmentPrefix),U(b,ce(P.toString(16))),H(b,jc);case 4:return U(b,Bo),U(b,v.segmentPrefix),U(b,ce(P.toString(16))),H(b,fa);case 5:return U(b,_r),U(b,v.segmentPrefix),U(b,ce(P.toString(16))),H(b,Ra);case 6:return U(b,ro),U(b,v.segmentPrefix),U(b,ce(P.toString(16))),H(b,Pl);case 7:return U(b,jr),U(b,v.segmentPrefix),U(b,ce(P.toString(16))),H(b,kr);case 8:return U(b,Ei),U(b,v.segmentPrefix),U(b,ce(P.toString(16))),H(b,kc);case 9:return U(b,Ol),U(b,v.segmentPrefix),U(b,ce(P.toString(16))),H(b,Wo);default:throw Error(t(397))}}function Rc(b,v){switch(v.insertionMode){case 0:case 1:case 3:case 2:return H(b,Ed);case 4:return H(b,Sn);case 5:return H(b,Ho);case 6:return H(b,Uo);case 7:return H(b,Ws);case 8:return H(b,Vo);case 9:return H(b,Td);default:throw Error(t(397))}}var bf=G('$RS=function(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),rg=G('$RS("'),og=G('","'),lg=G('")<\/script>');G('<template data-rsi="" data-sid="'),G('" data-pid="');var Dc=G(`$RB=[];$RV=function(a){$RT=performance.now();for(var b=0;b<a.length;b+=2){var c=a[b],e=a[b+1];null!==e.parentNode&&e.parentNode.removeChild(e);var f=c.parentNode;if(f){var g=c.previousSibling,h=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d||"/&"===d)if(0===h)break;else h--;else"$"!==d&&"$?"!==d&&"$~"!==d&&"$!"!==d&&"&"!==d||h++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;e.firstChild;)f.insertBefore(e.firstChild,c);g.data="$";g._reactRetry&&requestAnimationFrame(g._reactRetry)}}a.length=0};
$RC=function(a,b){if(b=document.getElementById(b))(a=document.getElementById(a))?(a.previousSibling.data="$~",$RB.push(a,b),2===$RB.length&&("number"!==typeof $RT?requestAnimationFrame($RV.bind(null,$RB)):(a=performance.now(),setTimeout($RV.bind(null,$RB),2300>a&&2E3<a?2300-a:$RT+300-a)))):b.parentNode.removeChild(b)};`);ce(`$RV=function(A,g){function k(a,b){var e=a.getAttribute(b);e&&(b=a.style,l.push(a,b.viewTransitionName,b.viewTransitionClass),"auto"!==e&&(b.viewTransitionClass=e),(a=a.getAttribute("vt-name"))||(a="_T_"+K++ +"_"),b.viewTransitionName=a,B=!0)}var B=!1,K=0,l=[];try{var f=document.__reactViewTransition;if(f){f.finished.finally($RV.bind(null,g));return}var m=new Map;for(f=1;f<g.length;f+=2)for(var h=g[f].querySelectorAll("[vt-share]"),d=0;d<h.length;d++){var c=h[d];m.set(c.getAttribute("vt-name"),c)}var u=[];for(h=0;h<g.length;h+=2){var C=g[h],x=C.parentNode;if(x){var v=x.getBoundingClientRect();if(v.left||v.top||v.width||v.height){c=C;for(f=0;c;){if(8===c.nodeType){var r=c.data;if("/$"===r)if(0===f)break;else f--;else"$"!==r&&"$?"!==r&&"$~"!==r&&"$!"!==r||f++}else if(1===c.nodeType){d=c;var D=d.getAttribute("vt-name"),y=m.get(D);k(d,y?"vt-share":"vt-exit");y&&(k(y,"vt-share"),m.set(D,null));var E=d.querySelectorAll("[vt-share]");for(d=0;d<E.length;d++){var F=E[d],G=F.getAttribute("vt-name"),
H=m.get(G);H&&(k(F,"vt-share"),k(H,"vt-share"),m.set(G,null))}}c=c.nextSibling}for(var I=g[h+1],t=I.firstElementChild;t;)null!==m.get(t.getAttribute("vt-name"))&&k(t,"vt-enter"),t=t.nextElementSibling;c=x;do for(var n=c.firstElementChild;n;){var J=n.getAttribute("vt-update");J&&"none"!==J&&!l.includes(n)&&k(n,"vt-update");n=n.nextElementSibling}while((c=c.parentNode)&&1===c.nodeType&&"none"!==c.getAttribute("vt-update"));u.push.apply(u,I.querySelectorAll('img[src]:not([loading="lazy"])'))}}}if(B){var z=
document.__reactViewTransition=document.startViewTransition({update:function(){A(g);for(var a=[document.documentElement.clientHeight,document.fonts.ready],b={},e=0;e<u.length;b={g:b.g},e++)if(b.g=u[e],!b.g.complete){var p=b.g.getBoundingClientRect();0<p.bottom&&0<p.right&&p.top<window.innerHeight&&p.left<window.innerWidth&&(p=new Promise(function(w){return function(q){w.g.addEventListener("load",q);w.g.addEventListener("error",q)}}(b)),a.push(p))}return Promise.race([Promise.all(a),new Promise(function(w){var q=
performance.now();setTimeout(w,2300>q&&2E3<q?2300-q:500)})])},types:[]});z.ready.finally(function(){for(var a=l.length-3;0<=a;a-=3){var b=l[a],e=b.style;e.viewTransitionName=l[a+1];e.viewTransitionClass=l[a+1];""===b.getAttribute("style")&&b.removeAttribute("style")}});z.finished.finally(function(){document.__reactViewTransition===z&&(document.__reactViewTransition=null)});$RB=[];return}}catch(a){}A(g)}.bind(null,$RV);`);var yf=G('$RC("'),cg=G(`$RM=new Map;$RR=function(n,w,p){function u(q){this._p=null;q()}for(var r=new Map,t=document,h,b,e=t.querySelectorAll("link[data-precedence],style[data-precedence]"),v=[],k=0;b=e[k++];)"not all"===b.getAttribute("media")?v.push(b):("LINK"===b.tagName&&$RM.set(b.getAttribute("href"),b),r.set(b.dataset.precedence,h=b));e=0;b=[];var l,a;for(k=!0;;){if(k){var f=p[e++];if(!f){k=!1;e=0;continue}var c=!1,m=0;var d=f[m++];if(a=$RM.get(d)){var g=a._p;c=!0}else{a=t.createElement("link");a.href=d;a.rel=
"stylesheet";for(a.dataset.precedence=l=f[m++];g=f[m++];)a.setAttribute(g,f[m++]);g=a._p=new Promise(function(q,x){a.onload=u.bind(a,q);a.onerror=u.bind(a,x)});$RM.set(d,a)}d=a.getAttribute("media");!g||d&&!matchMedia(d).matches||b.push(g);if(c)continue}else{a=v[e++];if(!a)break;l=a.getAttribute("data-precedence");a.removeAttribute("media")}c=r.get(l)||h;c===h&&(h=a);r.set(l,a);c?c.parentNode.insertBefore(a,c.nextSibling):(c=t.head,c.insertBefore(a,c.firstChild))}if(p=document.getElementById(n))p.previousSibling.data=
"$~";Promise.all(b).then($RC.bind(null,n,w),$RX.bind(null,n,"CSS failed to load"))};$RR("`),vf=G('$RR("'),_d=G('","'),dg=G('",'),jd=G('"'),wf=G(")<\/script>");G('<template data-rci="" data-bid="'),G('<template data-rri="" data-bid="'),G('" data-sid="'),G('" data-sty="');var Fl=G('$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};'),qu=G('$RX=function(b,c,d,e,f){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),f&&(a.cstck=f),b._reactRetry&&b._reactRetry())};;$RX("'),kd=G('$RX("'),Rd=G('"'),zl=G(","),ug=G(")<\/script>");G('<template data-rxi="" data-bid="'),G('" data-dgst="'),G('" data-msg="'),G('" data-stck="'),G('" data-cstck="');var hg=/[<\u2028\u2029]/g;function Sf(b){return JSON.stringify(b).replace(hg,function(v){switch(v){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var Gs=/[&><\u2028\u2029]/g;function Il(b){return JSON.stringify(b).replace(Gs,function(v){switch(v){case"&":return"\\u0026";case">":return"\\u003e";case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSObjectForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var $u=G(' media="not all" data-precedence="'),Dd=G('" data-href="'),Nf=G('">'),Go=G("</style>"),oo=!1,Mc=!0;function lo(b){var v=b.rules,j=b.hrefs,P=0;if(j.length){for(U(this,$e.startInlineStyle),U(this,$u),U(this,b.precedence),U(this,Dd);P<j.length-1;P++)U(this,j[P]),U(this,Pd);for(U(this,j[P]),U(this,Nf),P=0;P<v.length;P++)U(this,v[P]);Mc=H(this,Go),oo=!0,v.length=0,j.length=0}}function Fs(b){return b.state!==2?oo=!0:!1}function Ja(b,v,j){return oo=!1,Mc=!0,$e=j,v.styles.forEach(lo,b),$e=null,v.stylesheets.forEach(Fs),oo&&(j.stylesToHoist=!0),Mc}function Dn(b){for(var v=0;v<b.length;v++)U(this,b[v]);b.length=0}var Da=[];function Md(b){zn(Da,b.props);for(var v=0;v<Da.length;v++)U(this,Da[v]);Da.length=0,b.state=2}var Bl=G(' data-precedence="'),eh=G('" data-href="'),Pd=G(" "),Yo=G('">'),Od=G("</style>");function Ld(b){var v=0<b.sheets.size;b.sheets.forEach(Md,this),b.sheets.clear();var j=b.rules,P=b.hrefs;if(!v||P.length){if(U(this,$e.startInlineStyle),U(this,Bl),U(this,b.precedence),b=0,P.length){for(U(this,eh);b<P.length-1;b++)U(this,P[b]),U(this,Pd);U(this,P[b])}for(U(this,Yo),b=0;b<j.length;b++)U(this,j[b]);U(this,Od),j.length=0,P.length=0}}function ma(b){if(b.state===0){b.state=1;var v=b.props;for(zn(Da,{rel:"preload",as:"style",href:b.props.href,crossOrigin:v.crossOrigin,fetchPriority:v.fetchPriority,integrity:v.integrity,media:v.media,hrefLang:v.hrefLang,referrerPolicy:v.referrerPolicy}),b=0;b<Da.length;b++)U(this,Da[b]);Da.length=0}}function Fd(b){b.sheets.forEach(ma,this),b.sheets.clear()}G('<link rel="expect" href="#'),G('" blocking="render"/>');var Pc=G(' id="');function Rr(b,v){(v.instructions&32)===0&&(v.instructions|=32,b.push(Pc,ce(Ke("_"+v.idPrefix+"R_")),fn))}var co=G("["),zd=G(",["),Xo=G(","),Oc=G("]");function _s(b,v){U(b,co);var j=co;v.stylesheets.forEach(function(P){if(P.state!==2)if(P.state===3)U(b,j),U(b,ce(Il(""+P.props.href))),U(b,Oc),j=zd;else{U(b,j);var F=P.props["data-precedence"],X=P.props,Q=He(""+P.props.href);U(b,ce(Il(Q))),F=""+F,U(b,Xo),U(b,ce(Il(F)));for(var oe in X)if(Ae.call(X,oe)&&(F=X[oe],F!=null))switch(oe){case"href":case"rel":case"precedence":case"data-precedence":break;case"children":case"dangerouslySetInnerHTML":throw Error(t(399,"link"));default:th(b,oe,F)}U(b,Oc),j=zd,P.state=3}}),U(b,Oc)}function th(b,v,j){var P=v.toLowerCase();switch(typeof j){case"function":case"symbol":return}switch(v){case"innerHTML":case"dangerouslySetInnerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":case"style":case"ref":return;case"className":P="class",v=""+j;break;case"hidden":if(j===!1)return;v="";break;case"src":case"href":j=He(j),v=""+j;break;default:if(2<v.length&&(v[0]==="o"||v[0]==="O")&&(v[1]==="n"||v[1]==="N")||!ht(v))return;v=""+j}U(b,Xo),U(b,ce(Il(P))),U(b,Xo),U(b,ce(Il(v)))}function Dr(){return{styles:new Set,stylesheets:new Set,suspenseyImages:!1}}function Id(b){var v=_n||null;if(v){var j=v.resumableState,P=v.renderState;if(typeof b=="string"&&b){if(!j.dnsResources.hasOwnProperty(b)){j.dnsResources[b]=null,j=P.headers;var F,X;(X=j&&0<j.remainingCapacity)&&(X=(F="<"+(""+b).replace(Ma,Zo)+">; rel=dns-prefetch",0<=(j.remainingCapacity-=F.length+2))),X?(P.resets.dns[b]=null,j.preconnects&&(j.preconnects+=", "),j.preconnects+=F):(F=[],zn(F,{href:b,rel:"dns-prefetch"}),P.preconnects.add(F))}fi(v)}}else De.D(b)}function Bd(b,v){var j=_n||null;if(j){var P=j.resumableState,F=j.renderState;if(typeof b=="string"&&b){var X=v==="use-credentials"?"credentials":typeof v=="string"?"anonymous":"default";if(!P.connectResources[X].hasOwnProperty(b)){P.connectResources[X][b]=null,P=F.headers;var Q,oe;if(oe=P&&0<P.remainingCapacity){if(oe="<"+(""+b).replace(Ma,Zo)+">; rel=preconnect",typeof v=="string"){var te=(""+v).replace(ho,fo);oe+='; crossorigin="'+te+'"'}oe=(Q=oe,0<=(P.remainingCapacity-=Q.length+2))}oe?(F.resets.connect[X][b]=null,P.preconnects&&(P.preconnects+=", "),P.preconnects+=Q):(X=[],zn(X,{rel:"preconnect",href:b,crossOrigin:v}),F.preconnects.add(X))}fi(j)}}else De.C(b,v)}function Hd(b,v,j){var P=_n||null;if(P){var F=P.resumableState,X=P.renderState;if(v&&b){switch(v){case"image":if(j)var Q=j.imageSrcSet,oe=j.imageSizes,te=j.fetchPriority;var de=Q?Q+`
`+(oe||""):b;if(F.imageResources.hasOwnProperty(de))return;F.imageResources[de]=Fe,F=X.headers;var be;F&&0<F.remainingCapacity&&typeof Q!="string"&&te==="high"&&(be=Ys(b,v,j),0<=(F.remainingCapacity-=be.length+2))?(X.resets.image[de]=Fe,F.highImagePreloads&&(F.highImagePreloads+=", "),F.highImagePreloads+=be):(F=[],zn(F,fe({rel:"preload",href:Q?void 0:b,as:v},j)),te==="high"?X.highImagePreloads.add(F):(X.bulkPreloads.add(F),X.preloads.images.set(de,F)));break;case"style":if(F.styleResources.hasOwnProperty(b))return;Q=[],zn(Q,fe({rel:"preload",href:b,as:v},j)),F.styleResources[b]=!j||typeof j.crossOrigin!="string"&&typeof j.integrity!="string"?Fe:[j.crossOrigin,j.integrity],X.preloads.stylesheets.set(b,Q),X.bulkPreloads.add(Q);break;case"script":if(F.scriptResources.hasOwnProperty(b))return;Q=[],X.preloads.scripts.set(b,Q),X.bulkPreloads.add(Q),zn(Q,fe({rel:"preload",href:b,as:v},j)),F.scriptResources[b]=!j||typeof j.crossOrigin!="string"&&typeof j.integrity!="string"?Fe:[j.crossOrigin,j.integrity];break;default:if(F.unknownResources.hasOwnProperty(v)){if(Q=F.unknownResources[v],Q.hasOwnProperty(b))return}else Q={},F.unknownResources[v]=Q;Q[b]=Fe,(F=X.headers)&&0<F.remainingCapacity&&v==="font"&&(de=Ys(b,v,j),0<=(F.remainingCapacity-=de.length+2))?(X.resets.font[b]=Fe,F.fontPreloads&&(F.fontPreloads+=", "),F.fontPreloads+=de):(F=[],b=fe({rel:"preload",href:b,as:v},j),zn(F,b),v)==="font"?X.fontPreloads.add(F):X.bulkPreloads.add(F)}fi(P)}}else De.L(b,v,j)}function Ud(b,v){var j=_n||null;if(j){var P=j.resumableState,F=j.renderState;if(b){var X=v&&typeof v.as=="string"?v.as:"script";switch(X){case"script":if(P.moduleScriptResources.hasOwnProperty(b))return;X=[],P.moduleScriptResources[b]=!v||typeof v.crossOrigin!="string"&&typeof v.integrity!="string"?Fe:[v.crossOrigin,v.integrity],F.preloads.moduleScripts.set(b,X);break;default:if(P.moduleUnknownResources.hasOwnProperty(X)){var Q=P.unknownResources[X];if(Q.hasOwnProperty(b))return}else Q={},P.moduleUnknownResources[X]=Q;X=[],Q[b]=Fe}zn(X,fe({rel:"modulepreload",href:b},v)),F.bulkPreloads.add(X),fi(j)}}else De.m(b,v)}function Lc(b,v,j){var P=_n||null;if(P){var F=P.resumableState,X=P.renderState;if(b){v=v||"default";var Q=X.styles.get(v),oe=F.styleResources.hasOwnProperty(b)?F.styleResources[b]:void 0;oe!==null&&(F.styleResources[b]=null,Q||(Q={precedence:ce(Ke(v)),rules:[],hrefs:[],sheets:new Map},X.styles.set(v,Q)),v={state:0,props:fe({rel:"stylesheet",href:b,"data-precedence":v},j)},oe&&(oe.length===2&&Ko(v.props,oe),(X=X.preloads.stylesheets.get(b))&&0<X.length?X.length=0:v.state=1),Q.sheets.set(b,v),fi(P))}}else De.S(b,v,j)}function uo(b,v){var j=_n||null;if(j){var P=j.resumableState,F=j.renderState;if(b){var X=P.scriptResources.hasOwnProperty(b)?P.scriptResources[b]:void 0;X!==null&&(P.scriptResources[b]=null,v=fe({src:b,async:!0},v),X&&(X.length===2&&Ko(v,X),b=F.preloads.scripts.get(b))&&(b.length=0),b=[],F.scripts.add(b),ha(b,v),fi(j))}}else De.X(b,v)}function Af(b,v){var j=_n||null;if(j){var P=j.resumableState,F=j.renderState;if(b){var X=P.moduleScriptResources.hasOwnProperty(b)?P.moduleScriptResources[b]:void 0;X!==null&&(P.moduleScriptResources[b]=null,v=fe({src:b,type:"module",async:!0},v),X&&(X.length===2&&Ko(v,X),b=F.preloads.moduleScripts.get(b))&&(b.length=0),b=[],F.scripts.add(b),ha(b,v),fi(j))}}else De.M(b,v)}function Ko(b,v){b.crossOrigin==null&&(b.crossOrigin=v[0]),b.integrity==null&&(b.integrity=v[1])}function Ys(b,v,j){b=(""+b).replace(Ma,Zo),v=(""+v).replace(ho,fo),v="<"+b+'>; rel=preload; as="'+v+'"';for(var P in j)Ae.call(j,P)&&(b=j[P],typeof b=="string"&&(v+="; "+P.toLowerCase()+'="'+(""+b).replace(ho,fo)+'"'));return v}var Ma=/[<>\r\n]/g;function Zo(b){switch(b){case"<":return"%3C";case">":return"%3E";case`
`:return"%0A";case"\r":return"%0D";default:throw Error("escapeLinkHrefForHeaderContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}var ho=/["';,\r\n]/g;function fo(b){switch(b){case'"':return"%22";case"'":return"%27";case";":return"%3B";case",":return"%2C";case`
`:return"%0A";case"\r":return"%0D";default:throw Error("escapeStringForLinkHeaderQuotedParamValueContextReplacer encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}function Vd(b){this.styles.add(b)}function Wd(b){this.stylesheets.add(b)}function Jo(b,v){v.styles.forEach(Vd,b),v.stylesheets.forEach(Wd,b),v.suspenseyImages&&(b.suspenseyImages=!0)}function Qa(b){return 0<b.stylesheets.size||b.suspenseyImages}var Hl=Function.prototype.bind,Pa=Symbol.for("react.client.reference");function Ul(b){if(b==null)return null;if(typeof b=="function")return b.$$typeof===Pa?null:b.displayName||b.name||null;if(typeof b=="string")return b;switch(b){case a:return"Fragment";case c:return"Profiler";case o:return"StrictMode";case g:return"Suspense";case x:return"SuspenseList";case E:return"Activity"}if(typeof b=="object")switch(b.$$typeof){case i:return"Portal";case h:return b.displayName||"Context";case u:return(b._context.displayName||"Context")+".Consumer";case f:var v=b.render;return b=b.displayName,b||(b=v.displayName||v.name||"",b=b!==""?"ForwardRef("+b+")":"ForwardRef"),b;case w:return v=b.displayName||null,v!==null?v:Ul(b.type)||"Memo";case A:v=b._payload,b=b._init;try{return Ul(b(v))}catch{}}return null}var nh={},li=null;function Mr(b,v){if(b!==v){b.context._currentValue=b.parentValue,b=b.parent;var j=v.parent;if(b===null){if(j!==null)throw Error(t(401))}else{if(j===null)throw Error(t(401));Mr(b,j)}v.context._currentValue=v.value}}function Fc(b){b.context._currentValue=b.parentValue,b=b.parent,b!==null&&Fc(b)}function y(b){var v=b.parent;v!==null&&y(v),b.context._currentValue=b.value}function S(b,v){if(b.context._currentValue=b.parentValue,b=b.parent,b===null)throw Error(t(402));b.depth===v.depth?Mr(b,v):S(b,v)}function k(b,v){var j=v.parent;if(j===null)throw Error(t(402));b.depth===j.depth?Mr(b,j):k(b,j),v.context._currentValue=v.value}function O(b){var v=li;v!==b&&(v===null?y(b):b===null?Fc(v):v.depth===b.depth?Mr(v,b):v.depth>b.depth?S(v,b):k(v,b),li=b)}var B={enqueueSetState:function(b,v){b=b._reactInternals,b.queue!==null&&b.queue.push(v)},enqueueReplaceState:function(b,v){b=b._reactInternals,b.replace=!0,b.queue=[v]},enqueueForceUpdate:function(){}},J={id:1,overflow:""};function $(b,v,j){var P=b.id;b=b.overflow;var F=32-ve(P)-1;P&=~(1<<F),j+=1;var X=32-ve(v)+F;if(30<X){var Q=F-F%5;return X=(P&(1<<Q)-1).toString(32),P>>=Q,F-=Q,{id:1<<32-ve(v)+F|j<<F|P,overflow:X+b}}return{id:1<<X|j<<F|P,overflow:b}}var ve=Math.clz32?Math.clz32:Oe,ae=Math.log,we=Math.LN2;function Oe(b){return b>>>=0,b===0?32:31-(ae(b)/we|0)|0}function Te(){}var Xe=Error(t(460));function rt(b,v,j){switch(j=b[j],j===void 0?b.push(v):j!==v&&(v.then(Te,Te),v=j),v.status){case"fulfilled":return v.value;case"rejected":throw v.reason;default:switch(typeof v.status=="string"?v.then(Te,Te):(b=v,b.status="pending",b.then(function(P){if(v.status==="pending"){var F=v;F.status="fulfilled",F.value=P}},function(P){if(v.status==="pending"){var F=v;F.status="rejected",F.reason=P}})),v.status){case"fulfilled":return v.value;case"rejected":throw v.reason}throw zt=v,Xe}}var zt=null;function kt(){if(zt===null)throw Error(t(459));var b=zt;return zt=null,b}function Tt(b,v){return b===v&&(b!==0||1/b===1/v)||b!==b&&v!==v}var Et=typeof Object.is=="function"?Object.is:Tt,Mt=null,pn=null,Wn=null,Zt=null,Jt=null,en=null,Mn=!1,qt=!1,cs=0,xn=0,Qn=-1,In=0,Pn=null,ci=null,Pr=0;function Hi(){if(Mt===null)throw Error(t(321));return Mt}function di(){if(0<Pr)throw Error(t(312));return{memoizedState:null,queue:null,next:null}}function Oa(){return en===null?Jt===null?(Mn=!1,Jt=en=di()):(Mn=!0,en=Jt):en.next===null?(Mn=!1,en=en.next=di()):(Mn=!0,en=en.next),en}function ds(){var b=Pn;return Pn=null,b}function Ti(){Zt=Wn=pn=Mt=null,qt=!1,Jt=null,Pr=0,en=ci=null}function _i(b,v){return typeof v=="function"?v(b):v}function is(b,v,j){if(Mt=Hi(),en=Oa(),Mn){var P=en.queue;if(v=P.dispatch,ci!==null&&(j=ci.get(P),j!==void 0)){ci.delete(P),P=en.memoizedState;do P=b(P,j.action),j=j.next;while(j!==null);return en.memoizedState=P,[P,v]}return[en.memoizedState,v]}return b=b===_i?typeof v=="function"?v():v:j!==void 0?j(v):v,en.memoizedState=b,b=en.queue={last:null,dispatch:null},b=b.dispatch=ji.bind(null,Mt,b),[en.memoizedState,b]}function ys(b,v){if(Mt=Hi(),en=Oa(),v=v===void 0?null:v,en!==null){var j=en.memoizedState;if(j!==null&&v!==null){var P=j[1];e:if(P===null)P=!1;else{for(var F=0;F<P.length&&F<v.length;F++)if(!Et(v[F],P[F])){P=!1;break e}P=!0}if(P)return j[0]}}return b=b(),en.memoizedState=[b,v],b}function ji(b,v,j){if(25<=Pr)throw Error(t(301));if(b===Mt)if(qt=!0,b={action:j,next:null},ci===null&&(ci=new Map),j=ci.get(v),j===void 0)ci.set(v,b);else{for(v=j;v.next!==null;)v=v.next;v.next=b}}function Tn(){throw Error(t(440))}function ui(){throw Error(t(394))}function $i(){throw Error(t(479))}function Gd(b,v,j){Hi();var P=xn++,F=Wn;if(typeof b.$$FORM_ACTION=="function"){var X=null,Q=Zt;F=F.formState;var oe=b.$$IS_SIGNATURE_EQUAL;if(F!==null&&typeof oe=="function"){var te=F[1];oe.call(b,F[2],F[3])&&(X=j!==void 0?"p"+j:"k"+V(JSON.stringify([Q,null,P]),0),te===X&&(Qn=P,v=F[0]))}var de=b.bind(null,v);return b=function(Ne){de(Ne)},typeof de.$$FORM_ACTION=="function"&&(b.$$FORM_ACTION=function(Ne){Ne=de.$$FORM_ACTION(Ne),j!==void 0&&(j+="",Ne.action=j);var We=Ne.data;return We&&(X===null&&(X=j!==void 0?"p"+j:"k"+V(JSON.stringify([Q,null,P]),0)),We.append("$ACTION_KEY",X)),Ne}),[v,b,!1]}var be=b.bind(null,v);return[v,function(Ne){be(Ne)},!1]}function zc(b){var v=In;return In+=1,Pn===null&&(Pn=[]),rt(Pn,b,v)}function Yd(){throw Error(t(393))}var Xd={readContext:function(b){return b._currentValue},use:function(b){if(b!==null&&typeof b=="object"){if(typeof b.then=="function")return zc(b);if(b.$$typeof===h)return b._currentValue}throw Error(t(438,String(b)))},useContext:function(b){return Hi(),b._currentValue},useMemo:ys,useReducer:is,useRef:function(b){Mt=Hi(),en=Oa();var v=en.memoizedState;return v===null?(b={current:b},en.memoizedState=b):v},useState:function(b){return is(_i,b)},useInsertionEffect:Te,useLayoutEffect:Te,useCallback:function(b,v){return ys(function(){return b},v)},useImperativeHandle:Te,useEffect:Te,useDebugValue:Te,useDeferredValue:function(b,v){return Hi(),v!==void 0?v:b},useTransition:function(){return Hi(),[!1,ui]},useId:function(){var b=pn.treeContext,v=b.overflow;b=b.id,b=(b&~(1<<32-ve(b)-1)).toString(32)+v;var j=us;if(j===null)throw Error(t(404));return v=cs++,b="_"+j.idPrefix+"R_"+b,0<v&&(b+="H"+v.toString(32)),b+"_"},useSyncExternalStore:function(b,v,j){if(j===void 0)throw Error(t(407));return j()},useOptimistic:function(b){return Hi(),[b,$i]},useActionState:Gd,useFormState:Gd,useHostTransitionStatus:function(){return Hi(),tt},useMemoCache:function(b){for(var v=Array(b),j=0;j<b;j++)v[j]=D;return v},useCacheRefresh:function(){return Yd},useEffectEvent:function(){return Tn}},us=null,On={getCacheForType:function(){throw Error(t(248))},cacheSignal:function(){throw Error(t(248))}},Ft,Xs;function zs(b){if(Ft===void 0)try{throw Error()}catch(j){var v=j.stack.trim().match(/\n( *(at )?)/);Ft=v&&v[1]||"",Xs=-1<j.stack.indexOf(`
    at`)?" (<anonymous>)":-1<j.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ft+b+Xs}var Vl=!1;function ki(b,v){if(!b||Vl)return"";Vl=!0;var j=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var P={DetermineComponentFrameRoot:function(){try{if(v){var Ne=function(){throw Error()};if(Object.defineProperty(Ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ne,[])}catch(Ye){var We=Ye}Reflect.construct(b,[],Ne)}else{try{Ne.call()}catch(Ye){We=Ye}b.call(Ne.prototype)}}else{try{throw Error()}catch(Ye){We=Ye}(Ne=b())&&typeof Ne.catch=="function"&&Ne.catch(function(){})}}catch(Ye){if(Ye&&We&&typeof Ye.stack=="string")return[Ye.stack,We.stack]}return[null,null]}};P.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var F=Object.getOwnPropertyDescriptor(P.DetermineComponentFrameRoot,"name");F&&F.configurable&&Object.defineProperty(P.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var X=P.DetermineComponentFrameRoot(),Q=X[0],oe=X[1];if(Q&&oe){var te=Q.split(`
`),de=oe.split(`
`);for(F=P=0;P<te.length&&!te[P].includes("DetermineComponentFrameRoot");)P++;for(;F<de.length&&!de[F].includes("DetermineComponentFrameRoot");)F++;if(P===te.length||F===de.length)for(P=te.length-1,F=de.length-1;1<=P&&0<=F&&te[P]!==de[F];)F--;for(;1<=P&&0<=F;P--,F--)if(te[P]!==de[F]){if(P!==1||F!==1)do if(P--,F--,0>F||te[P]!==de[F]){var be=`
`+te[P].replace(" at new "," at ");return b.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",b.displayName)),be}while(1<=P&&0<=F);break}}}finally{Vl=!1,Error.prepareStackTrace=j}return(j=b?b.displayName||b.name:"")?zs(j):""}function Kd(b){if(typeof b=="string")return zs(b);if(typeof b=="function")return b.prototype&&b.prototype.isReactComponent?ki(b,!0):ki(b,!1);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case f:return ki(b.render,!1);case w:return ki(b.type,!1);case A:var v=b,j=v._payload;v=v._init;try{b=v(j)}catch{return zs("Lazy")}return Kd(b)}if(typeof b.name=="string"){e:{j=b.name,v=b.env;var P=b.debugLocation;if(P!=null&&(b=Error.prepareStackTrace,Error.prepareStackTrace=void 0,P=P.stack,Error.prepareStackTrace=b,P.startsWith(`Error: react-stack-top-frame
`)&&(P=P.slice(29)),b=P.indexOf(`
`),b!==-1&&(P=P.slice(b+1)),b=P.indexOf("react_stack_bottom_frame"),b!==-1&&(b=P.lastIndexOf(`
`,b)),b=b!==-1?P=P.slice(0,b):"",P=b.lastIndexOf(`
`),b=P===-1?b:b.slice(P+1),b.indexOf(j)!==-1)){j=`
`+b;break e}j=zs(j+(v?" ["+v+"]":""))}return j}}switch(b){case x:return zs("SuspenseList");case g:return zs("Suspense")}return""}function ea(b,v){return(500<v.byteSize||Qa(v.contentState))&&v.contentPreamble===null}function qa(b){if(typeof b=="object"&&b!==null&&typeof b.environmentName=="string"){var v=b.environmentName;b=[b].slice(0),typeof b[0]=="string"?b.splice(0,1,"%c%s%c "+b[0],"background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px"," "+v+" ",""):b.splice(0,0,"%c%s%c","background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px"," "+v+" ",""),b.unshift(console),v=Hl.apply(console.error,b),v()}else console.error(b);return null}function ga(b,v,j,P,F,X,Q,oe,te,de,be){var Ne=new Set;this.destination=null,this.flushScheduled=!1,this.resumableState=b,this.renderState=v,this.rootFormatContext=j,this.progressiveChunkSize=P===void 0?12800:P,this.status=10,this.fatalError=null,this.pendingRootTasks=this.allPendingTasks=this.nextSegmentId=0,this.completedPreambleSegments=this.completedRootSegment=null,this.byteSize=0,this.abortableTasks=Ne,this.pingedTasks=[],this.clientRenderedBoundaries=[],this.completedBoundaries=[],this.partialBoundaries=[],this.trackedPostpones=null,this.onError=F===void 0?qa:F,this.onPostpone=de===void 0?Te:de,this.onAllReady=X===void 0?Te:X,this.onShellReady=Q===void 0?Te:Q,this.onShellError=oe===void 0?Te:oe,this.onFatalError=te===void 0?Te:te,this.formState=be===void 0?null:be}function mo(b,v,j,P,F,X,Q,oe,te,de,be,Ne){return v=new ga(v,j,P,F,X,Q,oe,te,de,be,Ne),j=Ks(v,0,null,P,!1,!1),j.parentFlushed=!0,b=$a(v,null,b,-1,null,j,null,null,v.abortableTasks,null,P,null,J,null,null),Fa(b),v.pingedTasks.push(b),v}function Or(b,v,j,P,F,X,Q,oe,te,de,be){return b=mo(b,v,j,P,F,X,Q,oe,te,de,be,void 0),b.trackedPostpones={workingMap:new Map,rootNodes:[],rootSlots:null},b}function La(b,v,j,P,F,X,Q,oe,te){return j=new ga(v.resumableState,j,v.rootFormatContext,v.progressiveChunkSize,P,F,X,Q,oe,te,null),j.nextSegmentId=v.nextSegmentId,typeof v.replaySlots=="number"?(P=Ks(j,0,null,v.rootFormatContext,!1,!1),P.parentFlushed=!0,b=$a(j,null,b,-1,null,P,null,null,j.abortableTasks,null,v.rootFormatContext,null,J,null,null),Fa(b),j.pingedTasks.push(b),j):(b=Wl(j,null,{nodes:v.replayNodes,slots:v.replaySlots,pendingTasks:0},b,-1,null,null,j.abortableTasks,null,v.rootFormatContext,null,J,null,null),Fa(b),j.pingedTasks.push(b),j)}function Lr(b,v,j,P,F,X,Q,oe,te){return b=La(b,v,j,P,F,X,Q,oe,te),b.trackedPostpones={workingMap:new Map,rootNodes:[],rootSlots:null},b}var _n=null;function Ri(b,v){b.pingedTasks.push(v),b.pingedTasks.length===1&&(b.flushScheduled=b.destination!==null,b.trackedPostpones!==null||b.status===10?_e(function(){return Qd(b)}):q(function(){return Qd(b)}))}function Ui(b,v,j,P,F){return j={status:0,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,row:v,completedSegments:[],byteSize:0,fallbackAbortableTasks:j,errorDigest:null,contentState:Dr(),fallbackState:Dr(),contentPreamble:P,fallbackPreamble:F,trackedContentKeyPath:null,trackedFallbackNode:null},v!==null&&(v.pendingTasks++,P=v.boundaries,P!==null&&(b.allPendingTasks++,j.pendingTasks++,P.push(j)),b=v.inheritedHoistables,b!==null&&Jo(j.contentState,b)),j}function $a(b,v,j,P,F,X,Q,oe,te,de,be,Ne,We,Ye,xt){b.allPendingTasks++,F===null?b.pendingRootTasks++:F.pendingTasks++,Ye!==null&&Ye.pendingTasks++;var Pt={replay:null,node:j,childIndex:P,ping:function(){return Ri(b,Pt)},blockedBoundary:F,blockedSegment:X,blockedPreamble:Q,hoistableState:oe,abortSet:te,keyPath:de,formatContext:be,context:Ne,treeContext:We,row:Ye,componentStack:xt,thenableState:v};return te.add(Pt),Pt}function Wl(b,v,j,P,F,X,Q,oe,te,de,be,Ne,We,Ye){b.allPendingTasks++,X===null?b.pendingRootTasks++:X.pendingTasks++,We!==null&&We.pendingTasks++,j.pendingTasks++;var xt={replay:j,node:P,childIndex:F,ping:function(){return Ri(b,xt)},blockedBoundary:X,blockedSegment:null,blockedPreamble:null,hoistableState:Q,abortSet:oe,keyPath:te,formatContext:de,context:be,treeContext:Ne,row:We,componentStack:Ye,thenableState:v};return oe.add(xt),xt}function Ks(b,v,j,P,F,X){return{status:0,parentFlushed:!1,id:-1,index:v,chunks:[],children:[],preambleChildren:[],parentFormatContext:P,boundary:j,lastPushedText:F,textEmbedded:X}}function Fa(b){var v=b.node;typeof v=="object"&&v!==null&&v.$$typeof===s&&(b.componentStack={parent:b.componentStack,type:v.type})}function ta(b){return b===null?null:{parent:b.parent,type:"Suspense Fallback"}}function Nn(b){var v={};return b&&Object.defineProperty(v,"componentStack",{configurable:!0,enumerable:!0,get:function(){try{var j="",P=b;do j+=Kd(P.type),P=P.parent;while(P);var F=j}catch(X){F=`
Error generating stack: `+X.message+`
`+X.stack}return Object.defineProperty(v,"componentStack",{value:F}),F}}),v}function vs(b,v,j){if(b=b.onError,v=b(v,j),v==null||typeof v=="string")return v}function Qo(b,v){var j=b.onShellError,P=b.onFatalError;j(v),P(v),b.destination!==null?(b.status=14,Se(b.destination,v)):(b.status=13,b.fatalError=v)}function hi(b,v){sh(b,v.next,v.hoistables)}function sh(b,v,j){for(;v!==null;){j!==null&&(Jo(v.hoistables,j),v.inheritedHoistables=j);var P=v.boundaries;if(P!==null){v.boundaries=null;for(var F=0;F<P.length;F++){var X=P[F];j!==null&&Jo(X.contentState,j),Vi(b,X,null,null)}}if(v.pendingTasks--,0<v.pendingTasks)break;j=v.hoistables,v=v.next}}function Ic(b,v){var j=v.boundaries;if(j!==null&&v.pendingTasks===j.length){for(var P=!0,F=0;F<j.length;F++){var X=j[F];if(X.pendingTasks!==1||X.parentFlushed||ea(b,X)){P=!1;break}}P&&sh(b,v,v.hoistables)}}function Gn(b){var v={pendingTasks:1,boundaries:null,hoistables:Dr(),inheritedHoistables:null,together:!1,next:null};return b!==null&&0<b.pendingTasks&&(v.pendingTasks++,v.boundaries=[],b.next=v),v}function Zd(b,v,j,P,F){var X=v.keyPath,Q=v.treeContext,oe=v.row;v.keyPath=j,j=P.length;var te=null;if(v.replay!==null){var de=v.replay.slots;if(de!==null&&typeof de=="object")for(var be=0;be<j;be++){var Ne=F!=="backwards"&&F!=="unstable_legacy-backwards"?be:j-1-be,We=P[Ne];v.row=te=Gn(te),v.treeContext=$(Q,j,Ne);var Ye=de[Ne];typeof Ye=="number"?(sa(b,v,Ye,We,Ne),delete de[Ne]):rs(b,v,We,Ne),--te.pendingTasks===0&&hi(b,te)}else for(de=0;de<j;de++)be=F!=="backwards"&&F!=="unstable_legacy-backwards"?de:j-1-de,Ne=P[be],v.row=te=Gn(te),v.treeContext=$(Q,j,be),rs(b,v,Ne,be),--te.pendingTasks===0&&hi(b,te)}else if(F!=="backwards"&&F!=="unstable_legacy-backwards")for(F=0;F<j;F++)de=P[F],v.row=te=Gn(te),v.treeContext=$(Q,j,F),rs(b,v,de,F),--te.pendingTasks===0&&hi(b,te);else{for(F=v.blockedSegment,de=F.children.length,be=F.chunks.length,Ne=j-1;0<=Ne;Ne--){We=P[Ne],v.row=te=Gn(te),v.treeContext=$(Q,j,Ne),Ye=Ks(b,be,null,v.formatContext,Ne===0?F.lastPushedText:!0,!0),F.children.splice(de,0,Ye),v.blockedSegment=Ye;try{rs(b,v,We,Ne),Ye.lastPushedText&&Ye.textEmbedded&&Ye.chunks.push(st),Ye.status=1,Di(b,v.blockedBoundary,Ye),--te.pendingTasks===0&&hi(b,te)}catch(xt){throw Ye.status=b.status===12?3:4,xt}}v.blockedSegment=F,F.lastPushedText=!1}oe!==null&&te!==null&&0<te.pendingTasks&&(oe.pendingTasks++,te.next=oe),v.treeContext=Q,v.row=oe,v.keyPath=X}function Gl(b,v,j,P,F,X){var Q=v.thenableState;for(v.thenableState=null,Mt={},pn=v,Wn=b,Zt=j,xn=cs=0,Qn=-1,In=0,Pn=Q,b=P(F,X);qt;)qt=!1,xn=cs=0,Qn=-1,In=0,Pr+=1,en=null,b=P(F,X);return Ti(),b}function na(b,v,j,P,F,X,Q){var oe=!1;if(X!==0&&b.formState!==null){var te=v.blockedSegment;if(te!==null){oe=!0,te=te.chunks;for(var de=0;de<X;de++)de===Q?te.push(pf):te.push(_l)}}X=v.keyPath,v.keyPath=j,F?(j=v.treeContext,v.treeContext=$(j,1,0),rs(b,v,P,-1),v.treeContext=j):oe?rs(b,v,P,-1):as(b,v,P,-1),v.keyPath=X}function Fr(b,v,j,P,F,X){if(typeof P=="function")if(P.prototype&&P.prototype.isReactComponent){var Q=F;if("ref"in F){Q={};for(var oe in F)oe!=="ref"&&(Q[oe]=F[oe])}var te=P.defaultProps;if(te){Q===F&&(Q=fe({},Q,F));for(var de in te)Q[de]===void 0&&(Q[de]=te[de])}F=Q,Q=nh,te=P.contextType,typeof te=="object"&&te!==null&&(Q=te._currentValue),Q=new P(F,Q);var be=Q.state!==void 0?Q.state:null;if(Q.updater=B,Q.props=F,Q.state=be,te={queue:[],replace:!1},Q._reactInternals=te,X=P.contextType,Q.context=typeof X=="object"&&X!==null?X._currentValue:nh,X=P.getDerivedStateFromProps,typeof X=="function"&&(X=X(F,be),be=X==null?be:fe({},be,X),Q.state=be),typeof P.getDerivedStateFromProps!="function"&&typeof Q.getSnapshotBeforeUpdate!="function"&&(typeof Q.UNSAFE_componentWillMount=="function"||typeof Q.componentWillMount=="function"))if(P=Q.state,typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount(),P!==Q.state&&B.enqueueReplaceState(Q,Q.state,null),te.queue!==null&&0<te.queue.length)if(P=te.queue,X=te.replace,te.queue=null,te.replace=!1,X&&P.length===1)Q.state=P[0];else{for(te=X?P[0]:Q.state,be=!0,X=X?1:0;X<P.length;X++)de=P[X],de=typeof de=="function"?de.call(Q,te,F,void 0):de,de!=null&&(be?(be=!1,te=fe({},te,de)):fe(te,de));Q.state=te}else te.queue=null;if(P=Q.render(),b.status===12)throw null;F=v.keyPath,v.keyPath=j,as(b,v,P,-1),v.keyPath=F}else{if(P=Gl(b,v,j,P,F,void 0),b.status===12)throw null;na(b,v,j,P,cs!==0,xn,Qn)}else if(typeof P=="string")if(Q=v.blockedSegment,Q===null)Q=F.children,te=v.formatContext,be=v.keyPath,v.formatContext=ke(te,P,F),v.keyPath=j,rs(b,v,Q,-1),v.formatContext=te,v.keyPath=be;else{if(be=Ai(Q.chunks,P,F,b.resumableState,b.renderState,v.blockedPreamble,v.hoistableState,v.formatContext,Q.lastPushedText),Q.lastPushedText=!1,te=v.formatContext,X=v.keyPath,v.keyPath=j,(v.formatContext=ke(te,P,F)).insertionMode===3){j=Ks(b,0,null,v.formatContext,!1,!1),Q.preambleChildren.push(j),v.blockedSegment=j;try{j.status=6,rs(b,v,be,-1),j.lastPushedText&&j.textEmbedded&&j.chunks.push(st),j.status=1,Di(b,v.blockedBoundary,j)}finally{v.blockedSegment=Q}}else rs(b,v,be,-1);v.formatContext=te,v.keyPath=X;e:{switch(v=Q.chunks,b=b.resumableState,P){case"title":case"style":case"script":case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break e;case"body":if(1>=te.insertionMode){b.hasBody=!0;break e}break;case"html":if(te.insertionMode===0){b.hasHtml=!0;break e}break;case"head":if(1>=te.insertionMode)break e}v.push(Cr(P))}Q.lastPushedText=!1}else{switch(P){case T:case o:case c:case a:P=v.keyPath,v.keyPath=j,as(b,v,F.children,-1),v.keyPath=P;return;case E:P=v.blockedSegment,P===null?F.mode!=="hidden"&&(P=v.keyPath,v.keyPath=j,rs(b,v,F.children,-1),v.keyPath=P):F.mode!=="hidden"&&(P.chunks.push(zo),P.lastPushedText=!1,Q=v.keyPath,v.keyPath=j,rs(b,v,F.children,-1),v.keyPath=Q,P.chunks.push(_c),P.lastPushedText=!1);return;case x:e:{if(P=F.children,F=F.revealOrder,F==="forwards"||F==="backwards"||F==="unstable_legacy-backwards"){if(W(P)){Zd(b,v,j,P,F);break e}if((Q=I(P))&&(Q=Q.call(P))){if(te=Q.next(),!te.done){do te=Q.next();while(!te.done);Zd(b,v,j,P,F)}break e}}F==="together"?(F=v.keyPath,Q=v.row,te=v.row=Gn(null),te.boundaries=[],te.together=!0,v.keyPath=j,as(b,v,P,-1),--te.pendingTasks===0&&hi(b,te),v.keyPath=F,v.row=Q,Q!==null&&0<te.pendingTasks&&(Q.pendingTasks++,te.next=Q)):(F=v.keyPath,v.keyPath=j,as(b,v,P,-1),v.keyPath=F)}return;case M:case C:throw Error(t(343));case g:e:if(v.replay!==null){P=v.keyPath,Q=v.formatContext,te=v.row,v.keyPath=j,v.formatContext=pt(b.resumableState,Q),v.row=null,j=F.children;try{rs(b,v,j,-1)}finally{v.keyPath=P,v.formatContext=Q,v.row=te}}else{P=v.keyPath,X=v.formatContext;var Ne=v.row;de=v.blockedBoundary,oe=v.blockedPreamble;var We=v.hoistableState,Ye=v.blockedSegment,xt=F.fallback;F=F.children;var Pt=new Set,_t=2>v.formatContext.insertionMode?Ui(b,v.row,Pt,hn(),hn()):Ui(b,v.row,Pt,null,null);b.trackedPostpones!==null&&(_t.trackedContentKeyPath=j);var et=Ks(b,Ye.chunks.length,_t,v.formatContext,!1,!1);Ye.children.push(et),Ye.lastPushedText=!1;var bt=Ks(b,0,null,v.formatContext,!1,!1);if(bt.parentFlushed=!0,b.trackedPostpones!==null){Q=v.componentStack,te=[j[0],"Suspense Fallback",j[2]],be=[te[1],te[2],[],null],b.trackedPostpones.workingMap.set(te,be),_t.trackedFallbackNode=be,v.blockedSegment=et,v.blockedPreamble=_t.fallbackPreamble,v.keyPath=te,v.formatContext=Ze(b.resumableState,X),v.componentStack=ta(Q),et.status=6;try{rs(b,v,xt,-1),et.lastPushedText&&et.textEmbedded&&et.chunks.push(st),et.status=1,Di(b,de,et)}catch(Qt){throw et.status=b.status===12?3:4,Qt}finally{v.blockedSegment=Ye,v.blockedPreamble=oe,v.keyPath=P,v.formatContext=X}v=$a(b,null,F,-1,_t,bt,_t.contentPreamble,_t.contentState,v.abortSet,j,pt(b.resumableState,v.formatContext),v.context,v.treeContext,null,Q),Fa(v),b.pingedTasks.push(v)}else{v.blockedBoundary=_t,v.blockedPreamble=_t.contentPreamble,v.hoistableState=_t.contentState,v.blockedSegment=bt,v.keyPath=j,v.formatContext=pt(b.resumableState,X),v.row=null,bt.status=6;try{if(rs(b,v,F,-1),bt.lastPushedText&&bt.textEmbedded&&bt.chunks.push(st),bt.status=1,Di(b,_t,bt),za(_t,bt),_t.pendingTasks===0&&_t.status===0){if(_t.status=1,!ea(b,_t)){Ne!==null&&--Ne.pendingTasks===0&&hi(b,Ne),b.pendingRootTasks===0&&v.blockedPreamble&&pa(b);break e}}else Ne!==null&&Ne.together&&Ic(b,Ne)}catch(Qt){_t.status=4,b.status===12?(bt.status=3,Q=b.fatalError):(bt.status=4,Q=Qt),te=Nn(v.componentStack),be=vs(b,Q,te),_t.errorDigest=be,zr(b,_t)}finally{v.blockedBoundary=de,v.blockedPreamble=oe,v.hoistableState=We,v.blockedSegment=Ye,v.keyPath=P,v.formatContext=X,v.row=Ne}v=$a(b,null,xt,-1,de,et,_t.fallbackPreamble,_t.fallbackState,Pt,[j[0],"Suspense Fallback",j[2]],Ze(b.resumableState,v.formatContext),v.context,v.treeContext,v.row,ta(v.componentStack)),Fa(v),b.pingedTasks.push(v)}}return}if(typeof P=="object"&&P!==null)switch(P.$$typeof){case f:if("ref"in F)for(Ye in Q={},F)Ye!=="ref"&&(Q[Ye]=F[Ye]);else Q=F;P=Gl(b,v,j,P.render,Q,X),na(b,v,j,P,cs!==0,xn,Qn);return;case w:Fr(b,v,j,P.type,F,X);return;case h:if(te=F.children,Q=v.keyPath,F=F.value,be=P._currentValue,P._currentValue=F,X=li,li=P={parent:X,depth:X===null?0:X.depth+1,context:P,parentValue:be,value:F},v.context=P,v.keyPath=j,as(b,v,te,-1),b=li,b===null)throw Error(t(403));b.context._currentValue=b.parentValue,b=li=b.parent,v.context=b,v.keyPath=Q;return;case u:F=F.children,P=F(P._context._currentValue),F=v.keyPath,v.keyPath=j,as(b,v,P,-1),v.keyPath=F;return;case A:if(Q=P._init,P=Q(P._payload),b.status===12)throw null;Fr(b,v,j,P,F,X);return}throw Error(t(130,P==null?P:typeof P,""))}}function sa(b,v,j,P,F){var X=v.replay,Q=v.blockedBoundary,oe=Ks(b,0,null,v.formatContext,!1,!1);oe.id=j,oe.parentFlushed=!0;try{v.replay=null,v.blockedSegment=oe,rs(b,v,P,F),oe.status=1,Di(b,Q,oe),Q===null?b.completedRootSegment=oe:(za(Q,oe),Q.parentFlushed&&b.partialBoundaries.push(Q))}finally{v.replay=X,v.blockedSegment=null}}function as(b,v,j,P){v.replay!==null&&typeof v.replay.slots=="number"?sa(b,v,v.replay.slots,j,P):(v.node=j,v.childIndex=P,j=v.componentStack,Fa(v),Yl(b,v),v.componentStack=j)}function Yl(b,v){var j=v.node,P=v.childIndex;if(j!==null){if(typeof j=="object"){switch(j.$$typeof){case s:var F=j.type,X=j.key,Q=j.props;j=Q.ref;var oe=j!==void 0?j:null,te=Ul(F),de=X??(P===-1?0:P);if(X=[v.keyPath,te,de],v.replay!==null)e:{var be=v.replay;for(P=be.nodes,j=0;j<P.length;j++){var Ne=P[j];if(de===Ne[1]){if(Ne.length===4){if(te!==null&&te!==Ne[0])throw Error(t(490,Ne[0],te));var We=Ne[2];te=Ne[3],de=v.node,v.replay={nodes:We,slots:te,pendingTasks:1};try{if(Fr(b,v,X,F,Q,oe),v.replay.pendingTasks===1&&0<v.replay.nodes.length)throw Error(t(488));v.replay.pendingTasks--}catch(yt){if(typeof yt=="object"&&yt!==null&&(yt===Xe||typeof yt.then=="function"))throw v.node===de?v.replay=be:P.splice(j,1),yt;v.replay.pendingTasks--,Q=Nn(v.componentStack),X=b,b=v.blockedBoundary,F=yt,Q=vs(X,F,Q),go(X,b,We,te,F,Q)}v.replay=be}else{if(F!==g)throw Error(t(490,"Suspense",Ul(F)||"Unknown"));t:{be=void 0,F=Ne[5],oe=Ne[2],te=Ne[3],de=Ne[4]===null?[]:Ne[4][2],Ne=Ne[4]===null?null:Ne[4][3];var Ye=v.keyPath,xt=v.formatContext,Pt=v.row,_t=v.replay,et=v.blockedBoundary,bt=v.hoistableState,Qt=Q.children,Zs=Q.fallback,Js=new Set;Q=2>v.formatContext.insertionMode?Ui(b,v.row,Js,hn(),hn()):Ui(b,v.row,Js,null,null),Q.parentFlushed=!0,Q.rootSegmentID=F,v.blockedBoundary=Q,v.hoistableState=Q.contentState,v.keyPath=X,v.formatContext=pt(b.resumableState,xt),v.row=null,v.replay={nodes:oe,slots:te,pendingTasks:1};try{if(rs(b,v,Qt,-1),v.replay.pendingTasks===1&&0<v.replay.nodes.length)throw Error(t(488));if(v.replay.pendingTasks--,Q.pendingTasks===0&&Q.status===0){Q.status=1,b.completedBoundaries.push(Q);break t}}catch(yt){Q.status=4,We=Nn(v.componentStack),be=vs(b,yt,We),Q.errorDigest=be,v.replay.pendingTasks--,b.clientRenderedBoundaries.push(Q)}finally{v.blockedBoundary=et,v.hoistableState=bt,v.replay=_t,v.keyPath=Ye,v.formatContext=xt,v.row=Pt}We=Wl(b,null,{nodes:de,slots:Ne,pendingTasks:0},Zs,-1,et,Q.fallbackState,Js,[X[0],"Suspense Fallback",X[2]],Ze(b.resumableState,v.formatContext),v.context,v.treeContext,v.row,ta(v.componentStack)),Fa(We),b.pingedTasks.push(We)}}P.splice(j,1);break e}}}else Fr(b,v,X,F,Q,oe);return;case i:throw Error(t(257));case A:if(We=j._init,j=We(j._payload),b.status===12)throw null;as(b,v,j,P);return}if(W(j)){qo(b,v,j,P);return}if((We=I(j))&&(We=We.call(j))){if(j=We.next(),!j.done){Q=[];do Q.push(j.value),j=We.next();while(!j.done);qo(b,v,Q,P)}return}if(typeof j.then=="function")return v.thenableState=null,as(b,v,zc(j),P);if(j.$$typeof===h)return as(b,v,j._currentValue,P);throw P=Object.prototype.toString.call(j),Error(t(31,P==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":P))}typeof j=="string"?(P=v.blockedSegment,P!==null&&(P.lastPushedText=Ut(P.chunks,j,b.renderState,P.lastPushedText))):(typeof j=="number"||typeof j=="bigint")&&(P=v.blockedSegment,P!==null&&(P.lastPushedText=Ut(P.chunks,""+j,b.renderState,P.lastPushedText)))}}function qo(b,v,j,P){var F=v.keyPath;if(P!==-1&&(v.keyPath=[v.keyPath,"Fragment",P],v.replay!==null)){for(var X=v.replay,Q=X.nodes,oe=0;oe<Q.length;oe++){var te=Q[oe];if(te[1]===P){P=te[2],te=te[3],v.replay={nodes:P,slots:te,pendingTasks:1};try{if(qo(b,v,j,-1),v.replay.pendingTasks===1&&0<v.replay.nodes.length)throw Error(t(488));v.replay.pendingTasks--}catch(Ne){if(typeof Ne=="object"&&Ne!==null&&(Ne===Xe||typeof Ne.then=="function"))throw Ne;v.replay.pendingTasks--,j=Nn(v.componentStack);var de=v.blockedBoundary,be=Ne;j=vs(b,be,j),go(b,de,P,te,be,j)}v.replay=X,Q.splice(oe,1);break}}v.keyPath=F;return}if(X=v.treeContext,Q=j.length,v.replay!==null&&(oe=v.replay.slots,oe!==null&&typeof oe=="object")){for(P=0;P<Q;P++)te=j[P],v.treeContext=$(X,Q,P),de=oe[P],typeof de=="number"?(sa(b,v,de,te,P),delete oe[P]):rs(b,v,te,P);v.treeContext=X,v.keyPath=F;return}for(oe=0;oe<Q;oe++)P=j[oe],v.treeContext=$(X,Q,oe),rs(b,v,P,oe);v.treeContext=X,v.keyPath=F}function Jd(b,v,j){if(j.status=5,j.rootSegmentID=b.nextSegmentId++,b=j.trackedContentKeyPath,b===null)throw Error(t(486));var P=j.trackedFallbackNode,F=[],X=v.workingMap.get(b);return X===void 0?(j=[b[1],b[2],F,null,P,j.rootSegmentID],v.workingMap.set(b,j),Jl(j,b[0],v),j):(X[4]=P,X[5]=j.rootSegmentID,X)}function Bc(b,v,j,P){P.status=5;var F=j.keyPath,X=j.blockedBoundary;if(X===null)P.id=b.nextSegmentId++,v.rootSlots=P.id,b.completedRootSegment!==null&&(b.completedRootSegment.status=5);else{if(X!==null&&X.status===0){var Q=Jd(b,v,X);if(X.trackedContentKeyPath===F&&j.childIndex===-1){P.id===-1&&(P.id=P.parentFlushed?X.rootSegmentID:b.nextSegmentId++),Q[3]=P.id;return}}if(P.id===-1&&(P.id=P.parentFlushed&&X!==null?X.rootSegmentID:b.nextSegmentId++),j.childIndex===-1)F===null?v.rootSlots=P.id:(j=v.workingMap.get(F),j===void 0?(j=[F[1],F[2],[],P.id],Jl(j,F[0],v)):j[3]=P.id);else{if(F===null){if(b=v.rootSlots,b===null)b=v.rootSlots={};else if(typeof b=="number")throw Error(t(491))}else if(X=v.workingMap,Q=X.get(F),Q===void 0)b={},Q=[F[1],F[2],[],b],X.set(F,Q),Jl(Q,F[0],v);else if(b=Q[3],b===null)b=Q[3]={};else if(typeof b=="number")throw Error(t(491));b[j.childIndex]=P.id}}}function zr(b,v){b=b.trackedPostpones,b!==null&&(v=v.trackedContentKeyPath,v!==null&&(v=b.workingMap.get(v),v!==void 0&&(v.length=4,v[2]=[],v[3]=null)))}function Xl(b,v,j){return Wl(b,j,v.replay,v.node,v.childIndex,v.blockedBoundary,v.hoistableState,v.abortSet,v.keyPath,v.formatContext,v.context,v.treeContext,v.row,v.componentStack)}function Kl(b,v,j){var P=v.blockedSegment,F=Ks(b,P.chunks.length,null,v.formatContext,P.lastPushedText,!0);return P.children.push(F),P.lastPushedText=!1,$a(b,j,v.node,v.childIndex,v.blockedBoundary,F,v.blockedPreamble,v.hoistableState,v.abortSet,v.keyPath,v.formatContext,v.context,v.treeContext,v.row,v.componentStack)}function rs(b,v,j,P){var F=v.formatContext,X=v.context,Q=v.keyPath,oe=v.treeContext,te=v.componentStack,de=v.blockedSegment;if(de===null){de=v.replay;try{return as(b,v,j,P)}catch(We){if(Ti(),j=We===Xe?kt():We,b.status!==12&&typeof j=="object"&&j!==null){if(typeof j.then=="function"){P=We===Xe?ds():null,b=Xl(b,v,P).ping,j.then(b,b),v.formatContext=F,v.context=X,v.keyPath=Q,v.treeContext=oe,v.componentStack=te,v.replay=de,O(X);return}if(j.message==="Maximum call stack size exceeded"){j=We===Xe?ds():null,j=Xl(b,v,j),b.pingedTasks.push(j),v.formatContext=F,v.context=X,v.keyPath=Q,v.treeContext=oe,v.componentStack=te,v.replay=de,O(X);return}}}}else{var be=de.children.length,Ne=de.chunks.length;try{return as(b,v,j,P)}catch(We){if(Ti(),de.children.length=be,de.chunks.length=Ne,j=We===Xe?kt():We,b.status!==12&&typeof j=="object"&&j!==null){if(typeof j.then=="function"){de=j,j=We===Xe?ds():null,b=Kl(b,v,j).ping,de.then(b,b),v.formatContext=F,v.context=X,v.keyPath=Q,v.treeContext=oe,v.componentStack=te,O(X);return}if(j.message==="Maximum call stack size exceeded"){de=We===Xe?ds():null,de=Kl(b,v,de),b.pingedTasks.push(de),v.formatContext=F,v.context=X,v.keyPath=Q,v.treeContext=oe,v.componentStack=te,O(X);return}}}}throw v.formatContext=F,v.context=X,v.keyPath=Q,v.treeContext=oe,O(X),j}function Ir(b){var v=b.blockedBoundary,j=b.blockedSegment;j!==null&&(j.status=3,Vi(this,v,b.row,j))}function go(b,v,j,P,F,X){for(var Q=0;Q<j.length;Q++){var oe=j[Q];if(oe.length===4)go(b,v,oe[2],oe[3],F,X);else{oe=oe[5];var te=b,de=X,be=Ui(te,null,new Set,null,null);be.parentFlushed=!0,be.rootSegmentID=oe,be.status=4,be.errorDigest=de,be.parentFlushed&&te.clientRenderedBoundaries.push(be)}}if(j.length=0,P!==null){if(v===null)throw Error(t(487));if(v.status!==4&&(v.status=4,v.errorDigest=X,v.parentFlushed&&b.clientRenderedBoundaries.push(v)),typeof P=="object")for(var Ne in P)delete P[Ne]}}function Br(b,v,j){var P=b.blockedBoundary,F=b.blockedSegment;if(F!==null){if(F.status===6)return;F.status=3}var X=Nn(b.componentStack);if(P===null){if(v.status!==13&&v.status!==14){if(P=b.replay,P===null){v.trackedPostpones!==null&&F!==null?(P=v.trackedPostpones,vs(v,j,X),Bc(v,P,b,F),Vi(v,null,b.row,F)):(vs(v,j,X),Qo(v,j));return}P.pendingTasks--,P.pendingTasks===0&&0<P.nodes.length&&(F=vs(v,j,X),go(v,null,P.nodes,P.slots,j,F)),v.pendingRootTasks--,v.pendingRootTasks===0&&Hc(v)}}else{var Q=v.trackedPostpones;if(P.status!==4){if(Q!==null&&F!==null)return vs(v,j,X),Bc(v,Q,b,F),P.fallbackAbortableTasks.forEach(function(oe){return Br(oe,v,j)}),P.fallbackAbortableTasks.clear(),Vi(v,P,b.row,F);P.status=4,F=vs(v,j,X),P.status=4,P.errorDigest=F,zr(v,P),P.parentFlushed&&v.clientRenderedBoundaries.push(P)}P.pendingTasks--,F=P.row,F!==null&&--F.pendingTasks===0&&hi(v,F),P.fallbackAbortableTasks.forEach(function(oe){return Br(oe,v,j)}),P.fallbackAbortableTasks.clear()}b=b.row,b!==null&&--b.pendingTasks===0&&hi(v,b),v.allPendingTasks--,v.allPendingTasks===0&&Zl(v)}function po(b,v){try{var j=b.renderState,P=j.onHeaders;if(P){var F=j.headers;if(F){j.headers=null;var X=F.preconnects;if(F.fontPreloads&&(X&&(X+=", "),X+=F.fontPreloads),F.highImagePreloads&&(X&&(X+=", "),X+=F.highImagePreloads),!v){var Q=j.styles.values(),oe=Q.next();e:for(;0<F.remainingCapacity&&!oe.done;oe=Q.next())for(var te=oe.value.sheets.values(),de=te.next();0<F.remainingCapacity&&!de.done;de=te.next()){var be=de.value,Ne=be.props,We=Ne.href,Ye=be.props,xt=Ys(Ye.href,"style",{crossOrigin:Ye.crossOrigin,integrity:Ye.integrity,nonce:Ye.nonce,type:Ye.type,fetchPriority:Ye.fetchPriority,referrerPolicy:Ye.referrerPolicy,media:Ye.media});if(0<=(F.remainingCapacity-=xt.length+2))j.resets.style[We]=Fe,X&&(X+=", "),X+=xt,j.resets.style[We]=typeof Ne.crossOrigin=="string"||typeof Ne.integrity=="string"?[Ne.crossOrigin,Ne.integrity]:Fe;else break e}}P(X?{Link:X}:{})}}}catch(Pt){vs(b,Pt,{})}}function Hc(b){b.trackedPostpones===null&&po(b,!0),b.trackedPostpones===null&&pa(b),b.onShellError=Te,b=b.onShellReady,b()}function Zl(b){po(b,b.trackedPostpones===null?!0:b.completedRootSegment===null||b.completedRootSegment.status!==5),pa(b),b=b.onAllReady,b()}function za(b,v){if(v.chunks.length===0&&v.children.length===1&&v.children[0].boundary===null&&v.children[0].id===-1){var j=v.children[0];j.id=v.id,j.parentFlushed=!0,j.status!==1&&j.status!==3&&j.status!==4||za(b,j)}else b.completedSegments.push(v)}function Di(b,v,j){if(ue!==null){j=j.chunks;for(var P=0,F=0;F<j.length;F++)P+=j[F].byteLength;v===null?b.byteSize+=P:v.byteSize+=P}}function Vi(b,v,j,P){if(j!==null&&(--j.pendingTasks===0?hi(b,j):j.together&&Ic(b,j)),b.allPendingTasks--,v===null){if(P!==null&&P.parentFlushed){if(b.completedRootSegment!==null)throw Error(t(389));b.completedRootSegment=P}b.pendingRootTasks--,b.pendingRootTasks===0&&Hc(b)}else if(v.pendingTasks--,v.status!==4)if(v.pendingTasks===0){if(v.status===0&&(v.status=1),P!==null&&P.parentFlushed&&(P.status===1||P.status===3)&&za(v,P),v.parentFlushed&&b.completedBoundaries.push(v),v.status===1)j=v.row,j!==null&&Jo(j.hoistables,v.contentState),ea(b,v)||(v.fallbackAbortableTasks.forEach(Ir,b),v.fallbackAbortableTasks.clear(),j!==null&&--j.pendingTasks===0&&hi(b,j)),b.pendingRootTasks===0&&b.trackedPostpones===null&&v.contentPreamble!==null&&pa(b);else if(v.status===5&&(v=v.row,v!==null)){if(b.trackedPostpones!==null){j=b.trackedPostpones;var F=v.next;if(F!==null&&(P=F.boundaries,P!==null))for(F.boundaries=null,F=0;F<P.length;F++){var X=P[F];Jd(b,j,X),Vi(b,X,null,null)}}--v.pendingTasks===0&&hi(b,v)}}else P===null||!P.parentFlushed||P.status!==1&&P.status!==3||(za(v,P),v.completedSegments.length===1&&v.parentFlushed&&b.partialBoundaries.push(v)),v=v.row,v!==null&&v.together&&Ic(b,v);b.allPendingTasks===0&&Zl(b)}function Qd(b){if(b.status!==14&&b.status!==13){var v=li,j=Je.H;Je.H=Xd;var P=Je.A;Je.A=On;var F=_n;_n=b;var X=us;us=b.resumableState;try{var Q=b.pingedTasks,oe;for(oe=0;oe<Q.length;oe++){var te=Q[oe],de=b,be=te.blockedSegment;if(be===null){var Ne=de;if(te.replay.pendingTasks!==0){O(te.context);try{if(typeof te.replay.slots=="number"?sa(Ne,te,te.replay.slots,te.node,te.childIndex):Yl(Ne,te),te.replay.pendingTasks===1&&0<te.replay.nodes.length)throw Error(t(488));te.replay.pendingTasks--,te.abortSet.delete(te),Vi(Ne,te.blockedBoundary,te.row,null)}catch(Is){Ti();var We=Is===Xe?kt():Is;if(typeof We=="object"&&We!==null&&typeof We.then=="function"){var Ye=te.ping;We.then(Ye,Ye),te.thenableState=Is===Xe?ds():null}else{te.replay.pendingTasks--,te.abortSet.delete(te);var xt=Nn(te.componentStack);de=void 0;var Pt=Ne,_t=te.blockedBoundary,et=Ne.status===12?Ne.fatalError:We,bt=te.replay.nodes,Qt=te.replay.slots;de=vs(Pt,et,xt),go(Pt,_t,bt,Qt,et,de),Ne.pendingRootTasks--,Ne.pendingRootTasks===0&&Hc(Ne),Ne.allPendingTasks--,Ne.allPendingTasks===0&&Zl(Ne)}}}}else if(Ne=void 0,Pt=be,Pt.status===0){Pt.status=6,O(te.context);var Zs=Pt.children.length,Js=Pt.chunks.length;try{Yl(de,te),Pt.lastPushedText&&Pt.textEmbedded&&Pt.chunks.push(st),te.abortSet.delete(te),Pt.status=1,Di(de,te.blockedBoundary,Pt),Vi(de,te.blockedBoundary,te.row,Pt)}catch(Is){Ti(),Pt.children.length=Zs,Pt.chunks.length=Js;var yt=Is===Xe?kt():de.status===12?de.fatalError:Is;if(de.status===12&&de.trackedPostpones!==null){var js=de.trackedPostpones,Ln=Nn(te.componentStack);te.abortSet.delete(te),vs(de,yt,Ln),Bc(de,js,te,Pt),Vi(de,te.blockedBoundary,te.row,Pt)}else if(typeof yt=="object"&&yt!==null&&typeof yt.then=="function"){Pt.status=0,te.thenableState=Is===Xe?ds():null;var ws=te.ping;yt.then(ws,ws)}else{var Hr=Nn(te.componentStack);te.abortSet.delete(te),Pt.status=4;var Rt=te.blockedBoundary,nr=te.row;if(nr!==null&&--nr.pendingTasks===0&&hi(de,nr),de.allPendingTasks--,Ne=vs(de,yt,Hr),Rt===null)Qo(de,yt);else if(Rt.pendingTasks--,Rt.status!==4){Rt.status=4,Rt.errorDigest=Ne,zr(de,Rt);var ya=Rt.row;ya!==null&&--ya.pendingTasks===0&&hi(de,ya),Rt.parentFlushed&&de.clientRenderedBoundaries.push(Rt),de.pendingRootTasks===0&&de.trackedPostpones===null&&Rt.contentPreamble!==null&&pa(de)}de.allPendingTasks===0&&Zl(de)}}}}Q.splice(0,oe),b.destination!==null&&tl(b,b.destination)}catch(Is){vs(b,Is,{}),Qo(b,Is)}finally{us=X,Je.H=j,Je.A=P,j===Xd&&O(v),_n=F}}}function ia(b,v,j){v.preambleChildren.length&&j.push(v.preambleChildren);for(var P=!1,F=0;F<v.children.length;F++)P=$o(b,v.children[F],j)||P;return P}function $o(b,v,j){var P=v.boundary;if(P===null)return ia(b,v,j);var F=P.contentPreamble,X=P.fallbackPreamble;if(F===null||X===null)return!1;switch(P.status){case 1:if(Tc(b.renderState,F),b.byteSize+=P.byteSize,v=P.completedSegments[0],!v)throw Error(t(391));return ia(b,v,j);case 5:if(b.trackedPostpones!==null)return!0;case 4:if(v.status===1)return Tc(b.renderState,X),ia(b,v,j);default:return!0}}function pa(b){if(b.completedRootSegment&&b.completedPreambleSegments===null){var v=[],j=b.byteSize,P=$o(b,b.completedRootSegment,v),F=b.renderState.preamble;P===!1||F.headChunks&&F.bodyChunks?b.completedPreambleSegments=v:b.byteSize=j}}function Ia(b,v,j,P){switch(j.parentFlushed=!0,j.status){case 0:j.id=b.nextSegmentId++;case 5:return P=j.id,j.lastPushedText=!1,j.textEmbedded=!1,b=b.renderState,U(v,Ju),U(v,b.placeholderPrefix),b=ce(P.toString(16)),U(v,b),H(v,kl);case 1:j.status=2;var F=!0,X=j.chunks,Q=0;j=j.children;for(var oe=0;oe<j.length;oe++){for(F=j[oe];Q<F.index;Q++)U(v,X[Q]);F=el(b,v,F,P)}for(;Q<X.length-1;Q++)U(v,X[Q]);return Q<X.length&&(F=H(v,X[Q])),F;case 3:return!0;default:throw Error(t(390))}}var xa=0;function el(b,v,j,P){var F=j.boundary;if(F===null)return Ia(b,v,j,P);if(F.parentFlushed=!0,F.status===4){var X=F.row;X!==null&&--X.pendingTasks===0&&hi(b,X),F=F.errorDigest,H(v,Ci),U(v,Tr),F&&(U(v,Dl),U(v,ce(Ke(F))),U(v,Rl)),H(v,Ml),Ia(b,v,j,P)}else if(F.status!==1)F.status===0&&(F.rootSegmentID=b.nextSegmentId++),0<F.completedSegments.length&&b.partialBoundaries.push(F),Io(v,b.renderState,F.rootSegmentID),P&&Jo(P,F.fallbackState),Ia(b,v,j,P);else if(!Ba&&ea(b,F)&&(xa+F.byteSize>b.progressiveChunkSize||Qa(F.contentState)))F.rootSegmentID=b.nextSegmentId++,b.completedBoundaries.push(F),Io(v,b.renderState,F.rootSegmentID),Ia(b,v,j,P);else{if(xa+=F.byteSize,P&&Jo(P,F.contentState),j=F.row,j!==null&&ea(b,F)&&--j.pendingTasks===0&&hi(b,j),H(v,xf),j=F.completedSegments,j.length!==1)throw Error(t(391));el(b,v,j[0],P)}return H(v,oi)}function Mi(b,v,j,P){return Ll(v,b.renderState,j.parentFormatContext,j.id),el(b,v,j,P),Rc(v,j.parentFormatContext)}function qd(b,v,j){xa=j.byteSize;for(var P=j.completedSegments,F=0;F<P.length;F++)er(b,v,j,P[F]);P.length=0,P=j.row,P!==null&&ea(b,j)&&--P.pendingTasks===0&&hi(b,P),Ja(v,j.contentState,b.renderState),P=b.resumableState,b=b.renderState,F=j.rootSegmentID,j=j.contentState;var X=b.stylesToHoist;return b.stylesToHoist=!1,U(v,b.startInlineScript),U(v,bn),X?((P.instructions&4)===0&&(P.instructions|=4,U(v,Fl)),(P.instructions&2)===0&&(P.instructions|=2,U(v,Dc)),(P.instructions&8)===0?(P.instructions|=8,U(v,cg)):U(v,vf)):((P.instructions&2)===0&&(P.instructions|=2,U(v,Dc)),U(v,yf)),P=ce(F.toString(16)),U(v,b.boundaryPrefix),U(v,P),U(v,_d),U(v,b.segmentPrefix),U(v,P),X?(U(v,dg),_s(v,j)):U(v,jd),j=H(v,wf),ao(v,b)&&j}function er(b,v,j,P){if(P.status===2)return!0;var F=j.contentState,X=P.id;if(X===-1){if((P.id=j.rootSegmentID)===-1)throw Error(t(392));return Mi(b,v,P,F)}return X===j.rootSegmentID?Mi(b,v,P,F):(Mi(b,v,P,F),j=b.resumableState,b=b.renderState,U(v,b.startInlineScript),U(v,bn),(j.instructions&1)===0?(j.instructions|=1,U(v,bf)):U(v,rg),U(v,b.segmentPrefix),X=ce(X.toString(16)),U(v,X),U(v,og),U(v,b.placeholderPrefix),U(v,X),v=H(v,lg),v)}var Ba=!1;function tl(b,v){xe=new Uint8Array(2048),je=0;try{if(!(0<b.pendingRootTasks)){var j,P=b.completedRootSegment;if(P!==null){if(P.status===5)return;var F=b.completedPreambleSegments;if(F===null)return;xa=b.byteSize;var X=b.resumableState,Q=b.renderState,oe=Q.preamble,te=oe.htmlChunks,de=oe.headChunks,be;if(te){for(be=0;be<te.length;be++)U(v,te[be]);if(de)for(be=0;be<de.length;be++)U(v,de[be]);else U(v,Jn("head")),U(v,bn)}else if(de)for(be=0;be<de.length;be++)U(v,de[be]);var Ne=Q.charsetChunks;for(be=0;be<Ne.length;be++)U(v,Ne[be]);Ne.length=0,Q.preconnects.forEach(Dn,v),Q.preconnects.clear();var We=Q.viewportChunks;for(be=0;be<We.length;be++)U(v,We[be]);We.length=0,Q.fontPreloads.forEach(Dn,v),Q.fontPreloads.clear(),Q.highImagePreloads.forEach(Dn,v),Q.highImagePreloads.clear(),$e=Q,Q.styles.forEach(Ld,v),$e=null;var Ye=Q.importMapChunks;for(be=0;be<Ye.length;be++)U(v,Ye[be]);Ye.length=0,Q.bootstrapScripts.forEach(Dn,v),Q.scripts.forEach(Dn,v),Q.scripts.clear(),Q.bulkPreloads.forEach(Dn,v),Q.bulkPreloads.clear(),te||de||(X.instructions|=32);var xt=Q.hoistableChunks;for(be=0;be<xt.length;be++)U(v,xt[be]);for(X=xt.length=0;X<F.length;X++){var Pt=F[X];for(Q=0;Q<Pt.length;Q++)el(b,v,Pt[Q],null)}var _t=b.renderState.preamble,et=_t.headChunks;(_t.htmlChunks||et)&&U(v,Cr("head"));var bt=_t.bodyChunks;if(bt)for(F=0;F<bt.length;F++)U(v,bt[F]);el(b,v,P,null),b.completedRootSegment=null;var Qt=b.renderState;if(b.allPendingTasks!==0||b.clientRenderedBoundaries.length!==0||b.completedBoundaries.length!==0||b.trackedPostpones!==null&&(b.trackedPostpones.rootNodes.length!==0||b.trackedPostpones.rootSlots!==null)){var Zs=b.resumableState;if((Zs.instructions&64)===0){if(Zs.instructions|=64,U(v,Qt.startInlineScript),(Zs.instructions&32)===0){Zs.instructions|=32;var Js="_"+Zs.idPrefix+"R_";U(v,Pc),U(v,ce(Ke(Js))),U(v,fn)}U(v,bn),U(v,Er),H(v,qe)}}ao(v,Qt)}var yt=b.renderState;P=0;var js=yt.viewportChunks;for(P=0;P<js.length;P++)U(v,js[P]);js.length=0,yt.preconnects.forEach(Dn,v),yt.preconnects.clear(),yt.fontPreloads.forEach(Dn,v),yt.fontPreloads.clear(),yt.highImagePreloads.forEach(Dn,v),yt.highImagePreloads.clear(),yt.styles.forEach(Fd,v),yt.scripts.forEach(Dn,v),yt.scripts.clear(),yt.bulkPreloads.forEach(Dn,v),yt.bulkPreloads.clear();var Ln=yt.hoistableChunks;for(P=0;P<Ln.length;P++)U(v,Ln[P]);Ln.length=0;var ws=b.clientRenderedBoundaries;for(j=0;j<ws.length;j++){var Hr=ws[j];yt=v;var Rt=b.resumableState,nr=b.renderState,ya=Hr.rootSegmentID,Is=Hr.errorDigest;U(yt,nr.startInlineScript),U(yt,bn),(Rt.instructions&4)===0?(Rt.instructions|=4,U(yt,qu)):U(yt,kd),U(yt,nr.boundaryPrefix),U(yt,ce(ya.toString(16))),U(yt,Rd),Is&&(U(yt,zl),U(yt,ce(Sf(Is||""))));var aa=H(yt,ug);if(!aa){b.destination=null,j++,ws.splice(0,j);return}}ws.splice(0,j);var Uc=b.completedBoundaries;for(j=0;j<Uc.length;j++)if(!qd(b,v,Uc[j])){b.destination=null,j++,Uc.splice(0,j);return}Uc.splice(0,j),ee(v),xe=new Uint8Array(2048),je=0,Ba=!0;var sl=b.partialBoundaries;for(j=0;j<sl.length;j++){var Ur=sl[j];e:{ws=b,Hr=v,xa=Ur.byteSize;var il=Ur.completedSegments;for(aa=0;aa<il.length;aa++)if(!er(ws,Hr,Ur,il[aa])){aa++,il.splice(0,aa);var Qs=!1;break e}il.splice(0,aa);var An=Ur.row;An!==null&&An.together&&Ur.pendingTasks===1&&(An.pendingTasks===1?sh(ws,An,An.hoistables):An.pendingTasks--),Qs=Ja(Hr,Ur.contentState,ws.renderState)}if(!Qs){b.destination=null,j++,sl.splice(0,j);return}}sl.splice(0,j),Ba=!1;var Vr=b.completedBoundaries;for(j=0;j<Vr.length;j++)if(!qd(b,v,Vr[j])){b.destination=null,j++,Vr.splice(0,j);return}Vr.splice(0,j)}}finally{Ba=!1,b.allPendingTasks===0&&b.clientRenderedBoundaries.length===0&&b.completedBoundaries.length===0?(b.flushScheduled=!1,j=b.resumableState,j.hasBody&&U(v,Cr("body")),j.hasHtml&&U(v,Cr("html")),ee(v),b.status=14,v.close(),b.destination=null):ee(v)}}function Wi(b){b.flushScheduled=b.destination!==null,_e(function(){return Qd(b)}),q(function(){b.status===10&&(b.status=11),b.trackedPostpones===null&&po(b,b.pendingRootTasks===0)})}function fi(b){b.flushScheduled===!1&&b.pingedTasks.length===0&&b.destination!==null&&(b.flushScheduled=!0,q(function(){var v=b.destination;v?tl(b,v):b.flushScheduled=!1}))}function ba(b,v){if(b.status===13)b.status=14,Se(v,b.fatalError);else if(b.status!==14&&b.destination===null){b.destination=v;try{tl(b,v)}catch(j){vs(b,j,{}),Qo(b,j)}}}function Gi(b,v){(b.status===11||b.status===10)&&(b.status=12);try{var j=b.abortableTasks;if(0<j.size){var P=v===void 0?Error(t(432)):typeof v=="object"&&v!==null&&typeof v.then=="function"?Error(t(530)):v;b.fatalError=P,j.forEach(function(F){return Br(F,b,P)}),j.clear()}b.destination!==null&&tl(b,b.destination)}catch(F){vs(b,F,{}),Qo(b,F)}}function Jl(b,v,j){if(v===null)j.rootNodes.push(b);else{var P=j.workingMap,F=P.get(v);F===void 0&&(F=[v[1],v[2],[],null],P.set(v,F),Jl(F,v[0],j)),F[2].push(b)}}function nl(b){var v=b.trackedPostpones;if(v===null||v.rootNodes.length===0&&v.rootSlots===null)return b.trackedPostpones=null;if(b.completedRootSegment===null||b.completedRootSegment.status!==5&&b.completedPreambleSegments!==null){var j=b.nextSegmentId,P=v.rootSlots,F=b.resumableState;F.bootstrapScriptContent=void 0,F.bootstrapScripts=void 0,F.bootstrapModules=void 0}else{j=0,P=-1,F=b.resumableState;var X=b.renderState;F.nextFormID=0,F.hasBody=!1,F.hasHtml=!1,F.unknownResources={font:X.resets.font},F.dnsResources=X.resets.dns,F.connectResources=X.resets.connect,F.imageResources=X.resets.image,F.styleResources=X.resets.style,F.scriptResources={},F.moduleUnknownResources={},F.moduleScriptResources={},F.instructions=0}return{nextSegmentId:j,rootFormatContext:b.rootFormatContext,progressiveChunkSize:b.progressiveChunkSize,resumableState:b.resumableState,replayNodes:v.rootNodes,replaySlots:P}}function tr(){var b=n.version;if(b!=="19.2.3")throw Error(t(527,b,"19.2.3"))}return tr(),tr(),Dh.prerender=function(b,v){return new Promise(function(j,P){var F=v?v.onHeaders:void 0,X;F&&(X=function(be){F(new Headers(be))});var Q=ua(v?v.identifierPrefix:void 0,v?v.unstable_externalRuntimeSrc:void 0,v?v.bootstrapScriptContent:void 0,v?v.bootstrapScripts:void 0,v?v.bootstrapModules:void 0),oe=Or(b,Q,da(Q,void 0,v?v.unstable_externalRuntimeSrc:void 0,v?v.importMap:void 0,X,v?v.maxHeadersLength:void 0),ie(v?v.namespaceURI:void 0),v?v.progressiveChunkSize:void 0,v?v.onError:void 0,function(){var be=new ReadableStream({type:"bytes",pull:function(Ne){ba(oe,Ne)},cancel:function(Ne){oe.destination=null,Gi(oe,Ne)}},{highWaterMark:0});be={postponed:nl(oe),prelude:be},j(be)},void 0,void 0,P,v?v.onPostpone:void 0);if(v&&v.signal){var te=v.signal;if(te.aborted)Gi(oe,te.reason);else{var de=function(){Gi(oe,te.reason),te.removeEventListener("abort",de)};te.addEventListener("abort",de)}}Wi(oe)})},Dh.renderToReadableStream=function(b,v){return new Promise(function(j,P){var F,X,Q=new Promise(function(Ye,xt){X=Ye,F=xt}),oe=v?v.onHeaders:void 0,te;oe&&(te=function(Ye){oe(new Headers(Ye))});var de=ua(v?v.identifierPrefix:void 0,v?v.unstable_externalRuntimeSrc:void 0,v?v.bootstrapScriptContent:void 0,v?v.bootstrapScripts:void 0,v?v.bootstrapModules:void 0),be=mo(b,de,da(de,v?v.nonce:void 0,v?v.unstable_externalRuntimeSrc:void 0,v?v.importMap:void 0,te,v?v.maxHeadersLength:void 0),ie(v?v.namespaceURI:void 0),v?v.progressiveChunkSize:void 0,v?v.onError:void 0,X,function(){var Ye=new ReadableStream({type:"bytes",pull:function(xt){ba(be,xt)},cancel:function(xt){be.destination=null,Gi(be,xt)}},{highWaterMark:0});Ye.allReady=Q,j(Ye)},function(Ye){Q.catch(function(){}),P(Ye)},F,v?v.onPostpone:void 0,v?v.formState:void 0);if(v&&v.signal){var Ne=v.signal;if(Ne.aborted)Gi(be,Ne.reason);else{var We=function(){Gi(be,Ne.reason),Ne.removeEventListener("abort",We)};Ne.addEventListener("abort",We)}}Wi(be)})},Dh.resume=function(b,v,j){return new Promise(function(P,F){var X,Q,oe=new Promise(function(Ne,We){Q=Ne,X=We}),te=La(b,v,da(v.resumableState,j?j.nonce:void 0,void 0,void 0,void 0,void 0),j?j.onError:void 0,Q,function(){var Ne=new ReadableStream({type:"bytes",pull:function(We){ba(te,We)},cancel:function(We){te.destination=null,Gi(te,We)}},{highWaterMark:0});Ne.allReady=oe,P(Ne)},function(Ne){oe.catch(function(){}),F(Ne)},X,j?j.onPostpone:void 0);if(j&&j.signal){var de=j.signal;if(de.aborted)Gi(te,de.reason);else{var be=function(){Gi(te,de.reason),de.removeEventListener("abort",be)};de.addEventListener("abort",be)}}Wi(te)})},Dh.resumeAndPrerender=function(b,v,j){return new Promise(function(P,F){var X=Lr(b,v,da(v.resumableState,void 0,void 0,void 0,void 0,void 0),j?j.onError:void 0,function(){var te=new ReadableStream({type:"bytes",pull:function(de){ba(X,de)},cancel:function(de){X.destination=null,Gi(X,de)}},{highWaterMark:0});te={postponed:nl(X),prelude:te},P(te)},void 0,void 0,F,j?j.onPostpone:void 0);if(j&&j.signal){var Q=j.signal;if(Q.aborted)Gi(X,Q.reason);else{var oe=function(){Gi(X,Q.reason),Q.removeEventListener("abort",oe)};Q.addEventListener("abort",oe)}}Wi(X)})},Dh.version="19.2.3",Dh}var tj;function gZ(){if(tj)return Rh;tj=1;var n,e;return n=fZ(),e=mZ(),Rh.version=n.version,Rh.renderToString=n.renderToString,Rh.renderToStaticMarkup=n.renderToStaticMarkup,Rh.renderToReadableStream=e.renderToReadableStream,Rh.resume=e.resume,Rh}var pl=gZ();const uw=(n,e,t="Document",s=[],i=null)=>{const a=pl.renderToStaticMarkup(r.jsx(by,{data:n,content:e,zoom:1,printing:!0,signatures:s,businessLogo:i}));return`
    <!DOCTYPE html>
    <html>
        <head>
            <meta charset="utf-8">
            <title>${t}</title>
            <style>
                * { box-sizing: border-box; }
                body { 
                    font-family: 'Times New Roman', serif; 
                    line-height: 1.5; 
                    color: #333; 
                    font-size: 12pt; 
                    margin: 0; 
                    padding: 40px; 
                }
                .text-center { text-align: center; }
                .uppercase { text-transform: uppercase; }
                .font-bold { font-weight: bold; }
                .text-sm { font-size: 10pt; }
                .text-xs { font-size: 9pt; }
                .text-justify { text-align: justify; }
                .mb-2 { margin-bottom: 0.5rem; }
                .mb-4 { margin-bottom: 1rem; }
                .mb-6 { margin-bottom: 1.5rem; }
                .mb-8 { margin-bottom: 2rem; }
                .mb-10 { margin-bottom: 2.5rem; }
                .pb-2 { padding-bottom: 0.5rem; }
                .mt-12 { margin-top: 3rem; }
                .border-b { border-bottom: 1px solid #000; }
                .border-b-2 { border-bottom: 2px solid #000; }
                
                @page { margin: 40px; }
                
                h1 { 
                    font-size: 16pt; 
                    text-transform: uppercase; 
                    border-bottom: 2px solid #000; 
                    padding-bottom: 10px; 
                    margin-bottom: 30px; 
                    text-align: center; 
                    font-weight: bold; 
                    letter-spacing: 2px; 
                }
                p { margin-bottom: 12px; }
                
                table { width: 100%; border-collapse: collapse; }
                td { vertical-align: top; }
            </style>
        </head>
        <body>
            ${a}
        </body>
    </html>
    `},qm=()=>Math.random().toString(36).substr(2,9),nj={fontFamily:"font-sans",fontSize:"text-[11pt]",lineHeight:"leading-relaxed",textColor:"#1e293b",headingColor:"#0f172a",accentColor:"#4f46e5",pageMargin:"p-[10mm]",paragraphSpacing:"mb-6"},G0=(n={})=>{const[e,t]=R.useState({...nj,...n}),s=R.useCallback((a,o)=>{t(c=>({...c,[a]:o}))},[]),i=R.useCallback(()=>{t(nj)},[]);return{styles:e,updateStyle:s,resetStyles:i}},pZ=n=>{const[e,t]=R.useState(hZ),[s,i]=R.useState(uZ),[a,o]=R.useState("Untitled NDA"),[c,u]=R.useState(null),[h,f]=R.useState(!!n),[g,x]=R.useState(!1),{styles:w,updateStyle:A,resetStyles:C}=G0(),E=R.useRef(null);R.useEffect(()=>{(async()=>{if(n)try{f(!0);const H=await B0(n);H.data.name&&o(H.data.name),H.data.sent_at&&u(H.data.sent_at);let ee=H.data?.content||H.content;if(typeof ee=="string")try{ee=JSON.parse(ee)}catch(he){console.error(he)}ee=ee||{},ee.formData&&t(he=>({...he,...ee.formData})),ee.docContent&&i(ee.docContent),ee.signatures&&le(ee.signatures),ee.styles&&Object.entries(ee.styles).forEach(([he,ce])=>A(he,ce))}catch(H){console.error("Failed to load document",H),Be.error("Failed to load document")}finally{f(!1)}else try{const H=await vr();H&&t(ee=>({...ee,disclosingPartyName:H.name||"",disclosingPartyAddress:[H.address,H.city,H.state,H.country].filter(Boolean).join(", ")}))}catch(H){console.error("Failed to load business details",H)}})()},[n]);const T=U=>{const{name:H,value:ee}=U.target;t(he=>({...he,[H]:ee}))},D=U=>{const{name:H,value:ee}=U.target;i(he=>({...he,[H]:ee}))},M=()=>{i(U=>({...U,sections:[...U.sections,{id:qm(),title:"New Section",content:"Enter the details of this new clause here..."}]}))},L=U=>{i(H=>({...H,sections:H.sections.filter(ee=>ee.id!==U)}))},I=(U,H,ee)=>{i(he=>({...he,sections:he.sections.map(ce=>ce.id===U?{...ce,[H]:ee}:ce)}))},W=U=>{i(H=>({...H,sections:U}))},V=async U=>{x(!0);try{const H={name:a,type_slug:"nda",content:{formData:e,docContent:s,signatures:ne,styles:w},status:"draft"};if(n)return await U0(n,H),Be.success("Document updated successfully"),n;{const ee=await H0(H);return Be.success("Document created successfully"),U&&U(`/documents/nda/${ee.data.id}`,{replace:!0}),ee.data.id}}catch(H){throw console.error("Failed to save",H),(!H.response||H.response.status!==422)&&Be.error("Failed to save document"),H}finally{setTimeout(()=>x(!1),500)}},Y=U=>{E.current||(E.current={formData:e,docContent:s});let H=U.content;if(typeof H=="string")try{H=JSON.parse(H)}catch{}return H.formData&&t(H.formData),H.docContent&&i(H.docContent),H},K=()=>{E.current&&(t(E.current.formData),i(E.current.docContent),E.current=null)},q=U=>{if(U&&U.content){let H=U.content;if(typeof H=="string")try{H=JSON.parse(H)}catch{}H.formData&&t(H.formData),H.docContent&&i(H.docContent),H.styles&&Object.entries(H.styles).forEach(([ee,he])=>A(ee,he))}E.current=null},[ne,le]=R.useState([]);return{formData:e,docContent:s,signatures:ne,documentName:a,setDocumentName:o,sentAt:c,setSentAt:u,isLoading:h,isSaving:g,handleFormChange:T,handleContentChange:D,addSection:M,removeSection:L,updateSection:I,reorderSections:W,addSignature:U=>{le(H=>[...H,U])},updateSignature:(U,H)=>{le(ee=>ee.map(he=>he.id===U?{...he,...H}:he))},removeSignature:U=>{le(H=>H.filter(ee=>ee.id!==U))},saveDocument:V,enterPreviewMode:Y,exitPreviewMode:K,restoreVersion:q,styles:w,updateStyle:A,resetStyles:C}},xZ=()=>`
    /* ===============================
       RESET + PRINT SAFETY
    ================================ */
    * {
        box-sizing: border-box;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
    }

    /* ===============================
       PAGE SETUP (CRITICAL)
    ================================ */
    @page {
        size: A4;
        margin: 15mm 12mm 22mm 12mm; /* bottom space reserved for footer */
    }

    body {
        font-family: Helvetica, Arial, sans-serif;
        font-size: 10pt;
        line-height: 1.5;
        color: #1e293b;
        margin: 0;
        padding: 0;
        min-height: 100%;
    }

    /* ===============================
       UTILITIES
    ================================ */
    .text-center { text-align: center; }
    .text-right { text-align: right; }
    .text-left { text-align: left; }
    .text-justify { text-align: justify; }

    .uppercase { text-transform: uppercase; }
    .italic { font-style: italic; }

    .font-bold { font-weight: bold; }
    .font-semibold { font-weight: 600; }
    .font-medium { font-weight: 500; }

    /* ===============================
       TEXT SIZES
    ================================ */
    .text-2xl { font-size: 24pt; line-height: 1.2; }
    .text-lg  { font-size: 14pt; }
    .text-base { font-size: 11pt; }
    .text-sm { font-size: 9pt; }
    .text-xs { font-size: 8pt; }

    /* ===============================
       COLORS
    ================================ */
    .text-slate-900 { color: #0f172a; }
    .text-slate-800 { color: #1e293b; }
    .text-slate-600 { color: #475569; }
    .text-slate-400 { color: #94a3b8; }

    .bg-slate-50 { background-color: #f8fafc; }
    .bg-slate-100 { background-color: #f1f5f9; }
    .bg-slate-800 { background-color: #1e293b; }

    /* ===============================
       SPACING
    ================================ */
    .p-1 { padding: 4px; }
    .p-2 { padding: 8px; }
    .p-3 { padding: 12px; }
    .p-4 { padding: 16px; }

    .mt-2 { margin-top: 8px; }
    .mt-4 { margin-top: 16px; }
    .mb-1 { margin-bottom: 4px; }
    .mb-2 { margin-bottom: 8px; }
    .mb-4 { margin-bottom: 16px; }
    .mb-6 { margin-bottom: 24px; }
    .mb-8 { margin-bottom: 32px; }
    .mb-10 { margin-bottom: 40px; }
    .mb-12 { margin-bottom: 48px; }
    .mb-20 { margin-bottom: 80px; }

    /* ===============================
       BORDERS
    ================================ */
    .rounded { border-radius: 4px; }
    .border { border: 1px solid #e2e8f0; }
    .border-b { border-bottom: 1px solid #e2e8f0; }
    .border-b-2 { border-bottom: 2px solid #1e293b; }

    /* ===============================
       TABLES (PDF SAFE)
    ================================ */
    table {
        width: 100%;
        border-collapse: collapse;
        page-break-inside: auto;
    }

    thead {
        display: table-header-group;
    }

    tr {
        page-break-inside: avoid;
    }

    th {
        text-align: left;
        font-weight: bold;
    }

    td {
        vertical-align: top;
    }

    /* ===============================
       PAGE BREAK HELPERS
    ================================ */
    .page-break {
        page-break-before: always;
    }

    .avoid-break {
        page-break-inside: avoid;
    }

    /* ===============================
       WATERMARK
    ================================ */
    .watermark {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) rotate(-30deg);
        font-size: 60pt;
        color: rgba(15, 23, 42, 0.08);
        z-index: -1;
        pointer-events: none;
        user-select: none;
        white-space: nowrap;
    }

    /* ===============================
       FOOTER
    ================================ */
    .footer {
        position: fixed;
        bottom: 8mm;
        left: 0;
        right: 0;
        text-align: center;
        font-size: 9pt;
        color: #94a3b8;
        letter-spacing: 2px;
        text-transform: uppercase;
    }
`,iN=(n,e,t=null)=>`
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>${e}</title>
    <style>
        ${xZ()}
    </style>
</head>
<body>
    ${t?`<div class="watermark">${t}</div>`:""}

    ${n}

    <div class="footer">POWERED BY DOCFORGE</div>
</body>
</html>
`,Ya=async(n,e,t,s=null)=>{const i=iN(e,t,s);return aZ(n,i)},sj=()=>{const n=yi(),{id:e}=vd(),t=Ym("(min-width: 1024px)"),[s,i]=R.useState("edit"),[a,o]=R.useState(1),[c,u]=R.useState(!1),[h,f]=R.useState(!1),[g,x]=R.useState(!1),[w,A]=R.useState(!1),[C,E]=R.useState(!1),[T,D]=R.useState(null),[M,L]=R.useState(null),[I,W]=R.useState(null),[V,Y]=R.useState(null),{formData:K,docContent:q,signatures:ne,documentName:le,setDocumentName:_e,sentAt:xe,setSentAt:je,isLoading:U,isSaving:H,handleFormChange:ee,handleContentChange:he,addSection:ce,removeSection:G,updateSection:ue,reorderSections:Se,addSignature:fe,updateSignature:Ae,removeSignature:Pe,saveDocument:Ve,enterPreviewMode:Nt,exitPreviewMode:ht,restoreVersion:mt,styles:Qe,updateStyle:Kt,resetStyles:Ke}=pZ(e),[at,ft]=R.useState({isOpen:!1,data:null}),Gt=gt.useDeferredValue(K),He=gt.useDeferredValue(q),Je=Zm(Nc(Xu,{activationConstraint:{distance:8}}),Nc(ev,{activationConstraint:{delay:250,tolerance:5}})),Ie=gt.useRef(null),tt=()=>n("/documents"),De=()=>o(ie=>Math.min(ie+.1,1.5)),Fe=()=>o(ie=>Math.max(ie-.1,.5)),$e=()=>{const ie=K.receivingPartyName?.trim();ie?(_e(`NDA - ${ie}`),L(null),W(null),Be.success("Generated smart name!")):Be.error("Enter 'Receiving Party Name' in the form first.")},nt=async ie=>{try{if(ie&&ie.includes("/storage/")){const Ze=`http://localhost:8000/api/v1/file-proxy?path=${encodeURIComponent(ie)}`,st=await(await fetch(Ze)).blob();return new Promise((Ut,rn)=>{const dt=new FileReader;dt.onloadend=()=>Ut(dt.result),dt.onerror=rn,dt.readAsDataURL(st)})}const Ge=await(await fetch(ie)).blob();return new Promise((Ze,pt)=>{const st=new FileReader;st.onloadend=()=>Ze(st.result),st.onerror=pt,st.readAsDataURL(Ge)})}catch(ke){return console.error("Failed to convert image to base64",ke),null}};gt.useEffect(()=>{(async()=>{try{const ke=await vr();ke&&ke.logo&&Y(ke.logo)}catch(ke){console.error("Failed to fetch business logo",ke)}})()},[]);const qe=async()=>{const ie=le?.trim(),ke=["Untitled NDA","Untitled Proposal"];if(L(null),W(null),!ie||ke.some(Ge=>ie.toLowerCase()===Ge.toLowerCase())){L("Please enter a valid document name."),Ie.current&&Ie.current.focus();return}try{await Ve(n)}catch(Ge){if(Ge.response&&Ge.response.status===422&&Ge.response.data.suggested_name){const Ze=Ge.response.data.suggested_name;L(`Name "${ie}" is already taken.`),W(Ze),Ie.current&&Ie.current.focus()}}},[St,un]=R.useState(null),an=ie=>{un(ie.active)},Lt=ie=>{const{active:ke,over:Ge}=ie;if(un(null),!!Ge&&Ge.id==="document-canvas"){const Ze=document.getElementById("printable-document");if(Ze&&ke.rect.current.translated){const pt=Ze.getBoundingClientRect(),st=(ke.rect.current.translated.left-pt.left)/a,Ut=(ke.rect.current.translated.top-pt.top)/a;if(ke.data.current?.type==="toolbar-item")ft({isOpen:!0,data:{id:null,position:{x:st,y:Ut},type:"all",required:!0,order:ne.length+1}});else if(ke.data.current?.type==="signature-field"){const rn=ke.id;Ae(rn,{position:{x:st,y:Ut}})}}}},ts=ie=>{if(ie.id)Ae(ie.id,{metadata:{signeeName:ie.signeeName,signeeEmail:ie.signeeEmail,type:ie.type,required:ie.required,order:ie.order}});else{const ke={id:qm(),position:at.data.position,metadata:{signeeName:ie.signeeName,signeeEmail:ie.signeeEmail,type:ie.type,required:ie.required,order:ie.order}};fe(ke)}},ns=ie=>{ft({isOpen:!0,data:{id:ie.id,...ie.metadata}})},vi=()=>{ft({isOpen:!0,data:{id:null,position:{x:50,y:100},type:"all",required:!0,order:ne.length+1}})},Ps=async()=>{if(!e){Be.error("Please save the document before printing.");return}x(!0);try{let ie=V;if(V&&!V.startsWith("data:")){const Ze=await nt(V);Ze&&(ie=Ze)}const ke=renderToStaticMarkup(r.jsx(by,{data:K,content:q,zoom:1,printing:!0,styles:Qe,signatures:ne,businessLogo:ie})),Ge=await Ya(e,ke,le);Ge.url&&window.open(Ge.url,"_blank")}catch(ie){console.error("PDF Generation failed",ie),Be.error("Failed to generate PDF. Please try again.")}finally{x(!1)}},yn=async()=>{if(!e){Be.error("Please save the document before exporting.");return}A(!0),A(!0);try{let ie=V;if(V&&!V.startsWith("data:")){const pt=await nt(V);pt&&(ie=pt)}const Ge=uw(K,q,le,ne,ie),Ze=await Ya(e,Ge,le);if(Ze.url){const pt=document.createElement("a");pt.href=Ze.url,pt.download=`${le.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.pdf`,document.body.appendChild(pt),pt.click(),document.body.removeChild(pt),Be.success("Document exported successfully")}}catch(ie){console.error("Export failed",ie),Be.error("Failed to export document")}finally{A(!1)}},ss=()=>{if(!e){Be.error("Please save the document before sending.");return}E(!0)},Fn=ie=>{ie&&ie.sent_at&&je(ie.sent_at)},da=ie=>{Nt(ie),D(ie),u(!1),Be.success(`Previewing Version ${ie.version_number}`)},ua=()=>{ht(),D(null),Be.success("Exited preview mode")},hn=ie=>{mt(ie),D(null)},vn=async ie=>{const ke=Be.loading("Preparing version PDF...");try{let Ge=ie.content;if(typeof Ge=="string")try{Ge=JSON.parse(Ge)}catch{}const Ze=Ge.formData||K,pt=Ge.docContent||q;let st=V;if(V&&!V.startsWith("data:")){const dt=await nt(V);dt&&(st=dt)}const Ut=uw(Ze,pt,`${le} - v${ie.version_number}`,[],st),rn=await Ya(e,Ut,`${le} - v${ie.version_number}`);if(rn.url){const dt=document.createElement("a");dt.href=rn.url,dt.download=`${le.replace(/[^a-z0-9]/gi,"_")}_v${ie.version_number}.pdf`,document.body.appendChild(dt),dt.click(),document.body.removeChild(dt),Be.success(`Version ${ie.version_number} downloaded`,{id:ke})}}catch(Ge){console.error("Version download failed",Ge),Be.error("Failed to download version PDF",{id:ke})}};return U?r.jsx("div",{className:"flex h-screen items-center justify-center bg-slate-50",children:r.jsxs("div",{className:"text-center",children:[r.jsx(gs,{size:40,className:"animate-spin text-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-500 font-medium",children:"Loading Document..."})]})}):r.jsx(Qm,{sensors:Je,onDragStart:an,onDragEnd:Lt,children:r.jsxs("div",{className:"flex flex-col h-screen bg-slate-100 overflow-hidden",children:[r.jsx(lv,{isOpen:at.isOpen,onClose:()=>ft({isOpen:!1,data:null}),onSave:ts,initialData:at.data,parties:{disclosingPartyName:K.disclosingPartyName,receivingPartyName:K.receivingPartyName,disclosingSignatoryName:K.disclosingSignatoryName,receivingSignatoryName:K.receivingSignatoryName}}),r.jsx(iv,{dropAnimation:{sideEffects:({active:ie})=>(document.body.style.cursor="grabbing",()=>{document.body.style.cursor=""})},children:St?St.data.current?.type==="toolbar-item"?r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-indigo-500 bg-white shadow-xl opacity-90 cursor-grabbing ring-2 ring-indigo-500/20 w-48",children:[r.jsx("div",{className:"p-2 rounded-md bg-indigo-100 text-indigo-600",children:r.jsx("div",{className:"w-5 h-5 flex items-center justify-center font-bold",children:"+"})}),r.jsx("span",{className:"text-sm font-medium text-slate-900",children:"Placing Field..."})]}):St.data.current?.type==="signature-field"?r.jsxs("div",{className:"w-64 bg-white/95 backdrop-blur-sm border-2 border-indigo-500 rounded-lg shadow-2xl p-3 flex flex-col cursor-grabbing",children:[r.jsx("div",{className:"flex items-center gap-2 text-indigo-700 font-semibold border-b pb-2 mb-2",children:r.jsx("span",{children:St.data.current.signeeName||"Signature"})}),r.jsx("div",{className:"h-10 flex items-center justify-center text-indigo-200",children:"Sign Here"})]}):null:null}),T&&r.jsxs("div",{className:"bg-amber-100 border-b border-amber-200 px-4 py-2 flex items-center justify-between text-amber-800 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jo,{size:16}),r.jsxs("span",{className:"font-medium",children:["Previewing Version ",T.version_number]}),r.jsxs("span",{className:"text-amber-600 hidden md:inline",children:["(",new Date(T.created_at).toLocaleString(),")"]})]}),r.jsxs("button",{onClick:ua,className:"text-amber-700 hover:text-amber-900 font-medium hover:underline flex items-center gap-1",children:[r.jsx(ja,{size:14})," Exit Preview"]})]}),r.jsx(W0,{isOpen:C,onClose:()=>E(!1),documentId:e,documentName:le,isReminder:!!xe,onSuccess:Fn,getHtmlContent:async()=>{let ie=V;if(V&&!V.startsWith("data:")){const ke=await nt(V);ke&&(ie=ke)}return uw(K,q,le,ne,ie)},signatures:ne}),r.jsxs("header",{className:"no-print h-14 md:h-16 bg-white/80 backdrop-blur-md border-b border-slate-200/60 px-4 md:px-6 flex items-center justify-between flex-shrink-0 z-30 shadow-sm relative transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[r.jsx("button",{onClick:tt,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors flex-shrink-0",title:"Back to Documents",children:r.jsx(vl,{size:20})}),r.jsxs("div",{className:"min-w-0 relative group/input",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{ref:Ie,type:"text",value:le,onChange:ie=>{_e(ie.target.value),M&&L(null)},className:`font-bold text-sm md:text-lg bg-transparent border-b-2 focus:ring-0 p-0 m-0 w-auto min-w-[150px] max-w-[300px] placeholder-slate-400 truncate transition-colors ${M?"border-red-500 text-slate-800 ring-4 ring-red-500/10 rounded-sm px-1 -mx-1":"border-transparent hover:border-slate-200 text-slate-800"}`,placeholder:"Enter Document Name"}),M&&r.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 bg-white rounded-lg shadow-xl border border-red-100 z-50 p-3 animate-in fade-in slide-in-from-top-2",children:[r.jsxs("div",{className:"flex items-start gap-2 text-red-600 mb-2",children:[r.jsx(xr,{size:16,className:"mt-0.5 flex-shrink-0"}),r.jsx("p",{className:"text-xs font-semibold leading-tight",children:M})]}),I&&r.jsxs("div",{className:"bg-slate-50 rounded p-2 border border-slate-100",children:[r.jsx("p",{className:"text-[10px] text-slate-500 mb-1 uppercase tracking-wide font-bold",children:"Suggestion:"}),r.jsx("button",{onClick:()=>{_e(I),L(null),W(null)},className:"w-full text-left text-sm font-bold text-indigo-600 hover:text-indigo-700 hover:underline truncate",title:"Click to use this name",children:I})]})]})]}),r.jsx("button",{onClick:$e,className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-md transition-colors",title:"Auto-generate name from Form Data",children:r.jsx(RS,{size:16})}),xe&&r.jsxs("span",{className:"hidden lg:inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-emerald-50 text-emerald-600 text-[10px] font-medium border border-emerald-100",children:[r.jsx(ii,{size:10})," Sent"]})]}),r.jsx("p",{className:"text-[10px] md:text-xs text-slate-400 font-medium whitespace-nowrap hidden sm:block mt-0.5",children:e?"Autosaved locally":"Draft"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[r.jsxs("div",{className:"hidden lg:flex items-center bg-slate-100 rounded-lg p-1 mr-4",children:[r.jsx("button",{onClick:Fe,className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-slate-500 transition-all",children:r.jsx(Um,{size:16})}),r.jsxs("span",{className:"text-xs font-semibold text-slate-600 w-12 text-center",children:[Math.round(a*100),"%"]}),r.jsx("button",{onClick:De,className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-slate-500 transition-all",children:r.jsx(Hm,{size:16})})]}),r.jsxs("button",{onClick:()=>u(!0),className:"hidden lg:flex items-center gap-2 px-4 py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all",title:"Version History",children:[r.jsx(Xa,{size:18}),r.jsx("span",{children:"History"})]}),r.jsxs("button",{onClick:Ps,disabled:g,className:"hidden lg:flex items-center gap-2 px-4 py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all disabled:opacity-50",children:[g?r.jsx(gs,{size:18,className:"animate-spin"}):r.jsx(tf,{size:18}),r.jsx("span",{children:g?"Generating...":"Print"})]}),r.jsxs("button",{onClick:ss,className:`hidden lg:flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg border border-transparent transition-all ${xe?"text-amber-600 hover:bg-amber-50 hover:border-amber-200":"text-slate-600 hover:bg-slate-50 hover:border-slate-200"}`,children:[xe?r.jsx(wc,{size:18}):r.jsx(ri,{size:18}),r.jsx("span",{children:xe?"Remind":"Send"})]}),r.jsxs("button",{onClick:yn,disabled:w,className:"hidden lg:flex items-center gap-2 px-4 py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all disabled:opacity-50",children:[w?r.jsx(gs,{size:18,className:"animate-spin"}):r.jsx(wl,{size:18}),r.jsx("span",{children:w?"Exporting...":"Export"})]}),r.jsxs("button",{onClick:qe,className:`hidden lg:flex items-center gap-2 px-5 py-2 rounded-lg text-white font-medium shadow-md transition-all ${H?"bg-emerald-500":"bg-indigo-600 hover:bg-indigo-700"}`,children:[H?r.jsx(ii,{size:18}):r.jsx(Sl,{size:18}),r.jsx("span",{children:H?"Saved!":"Save"})]})]})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row flex-1 overflow-hidden relative pb-[70px] lg:pb-0",children:[r.jsx("div",{className:`
                        no-print w-full lg:w-[400px] h-full bg-white border-b lg:border-b-0 lg:border-r border-slate-200 
                        overflow-y-auto z-20 shadow-sm flex-shrink-0 lg:order-1
                        ${t||s==="edit"?"block":"hidden"}
                    `,children:r.jsx(iZ,{formData:K,onChange:ee,docContent:q,onContentChange:he,addSection:ce,removeSection:G,updateSection:ue,reorderSections:Se,styles:Qe,onStyleUpdate:Kt,onStyleReset:Ke})}),r.jsxs("div",{className:`
                        flex-1 h-full overflow-y-auto bg-slate-50/50 p-4 md:p-8 sm:p-12 
                        flex justify-center items-start scrollbar-thin scrollbar-thumb-slate-300 lg:order-2
                        ${t||s==="preview"?"flex":"hidden"}
                    `,style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"20px 20px"},children:[r.jsx(by,{data:Gt,content:He,zoom:a,signatures:ne,onUpdateSignature:Ae,onRemoveSignature:Pe,onEditSignature:ns,businessLogo:V,styles:Qe}),!t&&s==="preview"&&r.jsx("button",{onClick:vi,className:"fixed bottom-24 right-6 w-14 h-14 bg-indigo-600 text-white rounded-full shadow-lg shadow-indigo-600/30 flex items-center justify-center hover:bg-indigo-700 transition-transform active:scale-95 z-30",title:"Add Signature",children:r.jsx("span",{className:"text-2xl font-bold",children:"+"})})]})]}),r.jsx(V0,{documentId:e,isOpen:c,onClose:()=>u(!1),onPreview:da,onDownload:vn,onRestore:hn}),!t&&r.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 flex justify-between items-center px-6 py-3 pb-safe z-40 safe-area-bottom",children:[r.jsxs("button",{onClick:()=>i("edit"),className:`flex flex-col items-center gap-1 ${s==="edit"?"text-indigo-600":"text-slate-400"}`,children:[r.jsx(ls,{size:24,strokeWidth:s==="edit"?2.5:2}),r.jsx("span",{className:"text-[10px] font-medium",children:"Editor"})]}),r.jsxs("button",{onClick:()=>i("preview"),className:`flex flex-col items-center gap-1 ${s==="preview"?"text-indigo-600":"text-slate-400"}`,children:[r.jsx(jo,{size:24,strokeWidth:s==="preview"?2.5:2}),r.jsx("span",{className:"text-[10px] font-medium",children:"Preview"})]}),r.jsxs("button",{onClick:qe,className:`flex flex-col items-center gap-1 ${H?"text-emerald-500":"text-slate-400 transition-colors active:text-indigo-600"}`,children:[H?r.jsx(ii,{size:24,strokeWidth:2.5}):r.jsx(Sl,{size:24}),r.jsx("span",{className:"text-[10px] font-medium",children:H?"Saved":"Save"})]}),r.jsxs("button",{onClick:()=>f(!0),className:`flex flex-col items-center gap-1 ${h?"text-indigo-600":"text-slate-400"}`,children:[r.jsx(TS,{size:24}),r.jsx("span",{className:"text-[10px] font-medium",children:"More"})]})]}),!t&&h&&r.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col justify-end",children:[r.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm animate-in fade-in",onClick:()=>f(!1)}),r.jsxs("div",{className:"relative bg-white rounded-t-2xl p-6 pb-safe animate-in slide-in-from-bottom shadow-2xl space-y-2",children:[r.jsx("div",{className:"w-12 h-1.5 bg-slate-200 rounded-full mx-auto mb-6"}),r.jsx("h3",{className:"text-sm font-semibold text-slate-400 uppercase tracking-wider mb-2 px-2",children:"Actions"}),r.jsxs("button",{onClick:()=>{f(!1),u(!0)},className:"w-full flex items-center gap-3 p-3 text-slate-700 font-medium hover:bg-slate-50 rounded-xl transition-colors",children:[r.jsx("div",{className:"p-2 bg-indigo-50 text-indigo-600 rounded-lg",children:r.jsx(Xa,{size:20})}),"Version History"]}),r.jsxs("button",{onClick:()=>{f(!1),ss()},className:"w-full flex items-center gap-3 p-3 text-slate-700 font-medium hover:bg-slate-50 rounded-xl transition-colors",children:[r.jsx("div",{className:"p-2 bg-amber-50 text-amber-600 rounded-lg",children:xe?r.jsx(wc,{size:20}):r.jsx(ri,{size:20})}),xe?"Send Reminder":"Send to Client"]}),r.jsxs("button",{onClick:()=>{f(!1),Ps()},disabled:g,className:"w-full flex items-center gap-3 p-3 text-slate-700 font-medium hover:bg-slate-50 rounded-xl transition-colors disabled:opacity-50",children:[r.jsx("div",{className:"p-2 bg-sky-50 text-sky-600 rounded-lg",children:g?r.jsx(gs,{size:20,className:"animate-spin"}):r.jsx(tf,{size:20})}),g?"Generating PDF...":"Print / Download PDF"]}),r.jsxs("button",{onClick:()=>{f(!1),yn()},disabled:w,className:"w-full flex items-center gap-3 p-3 text-slate-700 font-medium hover:bg-slate-50 rounded-xl transition-colors disabled:opacity-50",children:[r.jsx("div",{className:"p-2 bg-emerald-50 text-emerald-600 rounded-lg",children:w?r.jsx(gs,{size:20,className:"animate-spin"}):r.jsx(wl,{size:20})}),w?"Exporting...":"Export"]}),r.jsx("button",{onClick:()=>f(!1),className:"w-full mt-4 p-3 bg-slate-100 text-slate-600 font-semibold rounded-xl",children:"Cancel"})]})]})]})})},hp=({title:n,icon:e,isOpen:t,onClick:s,children:i})=>r.jsxs("div",{className:"border-b border-slate-100 last:border-none",children:[r.jsxs("button",{onClick:s,className:`w-full flex items-center justify-between p-4 transition-colors ${t?"bg-slate-50 text-indigo-600":"text-slate-700 hover:bg-slate-50"}`,children:[r.jsxs("div",{className:"flex items-center gap-3 font-semibold text-sm",children:[e&&r.jsx(e,{size:18,className:t?"text-indigo-500":"text-slate-400"}),r.jsx("span",{children:n})]}),r.jsx(ze.div,{animate:{rotate:t?180:0},transition:{duration:.2},children:r.jsx(Im,{size:16})})]}),r.jsx(Zn,{initial:!1,children:t&&r.jsx(ze.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:r.jsx("div",{className:"p-4 pt-0 space-y-4",children:i})})})]}),dr=({label:n,name:e,value:t,onChange:s,placeholder:i,type:a="text",rows:o})=>r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wide mb-1.5",children:n}),o?r.jsx("textarea",{name:e,value:t||"",onChange:s,placeholder:i,rows:o,className:"w-full px-3 py-2.5 bg-white border border-slate-200 rounded-lg text-sm text-slate-700 shadow-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all placeholder-slate-400 resize-y"}):r.jsx("input",{type:a,name:e,value:t||"",onChange:s,placeholder:i,className:"w-full px-3 py-2.5 bg-white border border-slate-200 rounded-lg text-sm text-slate-700 shadow-sm focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all placeholder-slate-400"})]}),bZ=({formData:n,onChange:e,docContent:t,onContentChange:s,addSection:i,removeSection:a,updateSection:o,reorderSections:c,updateTimeline:u,addTimelineRow:h,removeTimelineRow:f,styles:g,onStyleUpdate:x,onStyleReset:w})=>{const[A,C]=R.useState("cover"),[E,T]=R.useState("fill"),D=M=>{C(A===M?null:M)};return r.jsxs("div",{className:"bg-white min-h-full pb-20",children:[r.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 sticky top-0 z-10 backdrop-blur-sm",children:[r.jsxs("div",{className:"flex gap-1 bg-slate-200/50 p-1 rounded-lg mb-4",children:[r.jsxs("button",{onClick:()=>T("fill"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${E==="fill"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,children:[r.jsx(j0,{size:16}),"Fill Details"]}),r.jsxs("button",{onClick:()=>T("edit"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${E==="edit"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,children:[r.jsx(k0,{size:16}),"Builder"]}),r.jsxs("button",{onClick:()=>T("style"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${E==="style"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,children:[r.jsx(uf,{size:16}),"Style"]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold text-slate-900",children:E==="fill"?"Proposal Details":E==="edit"?"Structure Builder":"Styling & Appearance"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:E==="fill"?"Enter project specifics and pricing":E==="edit"?"Customize layout and clauses":"Fonts, colors and spacing"})]})]}),E==="fill"&&r.jsxs(r.Fragment,{children:[r.jsxs(hp,{title:"Cover Page",icon:ls,isOpen:A==="cover",onClick:()=>D("cover"),children:[r.jsx(dr,{label:"Proposal Title",name:"proposalTitle",value:n.proposalTitle,onChange:e,placeholder:"e.g. Mobile App Development"}),r.jsx(dr,{label:"Project Description (Short)",name:"projectDescription",value:n.projectDescription,onChange:e,placeholder:"Brief summary...",rows:2}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(dr,{label:"Date",name:"proposalDate",value:n.proposalDate,onChange:e,placeholder:"DD/MM/YYYY"}),r.jsx(dr,{label:"Ref No.",name:"referenceNo",value:n.referenceNo,onChange:e,placeholder:"Optional"})]})]}),r.jsx(hp,{title:"Document Branding",icon:lf,isOpen:A==="branding",onClick:()=>D("branding"),children:r.jsx(I0,{formData:n,onChange:e})}),r.jsx(hp,{title:"Parties Involved",icon:Mo,isOpen:A==="parties",onClick:()=>D("parties"),children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-3 bg-indigo-50 rounded-lg border border-indigo-100",children:[r.jsx("h4",{className:"text-xs font-bold text-indigo-900 uppercase mb-3",children:"Prepared For (Client)"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(dr,{label:"Client Name",name:"clientName",value:n.clientName,onChange:e,placeholder:"Contact Person"}),r.jsx(dr,{label:"Company",name:"clientCompany",value:n.clientCompany,onChange:e,placeholder:"Client Company"}),r.jsx(dr,{label:"Address",name:"clientAddress",value:n.clientAddress,onChange:e,placeholder:"Full Address",rows:2})]})]}),r.jsxs("div",{className:"p-3 bg-emerald-50 rounded-lg border border-emerald-100",children:[r.jsx("h4",{className:"text-xs font-bold text-emerald-900 uppercase mb-3",children:"Prepared By (Provider)"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(dr,{label:"Your Name",name:"providerName",value:n.providerName,onChange:e,placeholder:"Your Name"}),r.jsx(dr,{label:"Company",name:"providerCompany",value:n.providerCompany,onChange:e,placeholder:"Your Company"}),r.jsx(dr,{label:"Address",name:"providerAddress",value:n.providerAddress,onChange:e,placeholder:"Full Address",rows:2})]})]})]})}),r.jsx(hp,{title:"Project Timeline",icon:jS,isOpen:A==="timeline",onClick:()=>D("timeline"),children:r.jsxs("div",{className:"space-y-4",children:[n.timeline.map((M,L)=>r.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-3 relative group",children:[r.jsxs("div",{className:"grid grid-cols-[1fr_80px] gap-2 mb-2",children:[r.jsx("input",{value:M.phase||"",onChange:I=>u(L,"phase",I.target.value),className:"bg-white border border-slate-200 rounded px-2 py-1 text-xs font-bold text-slate-700",placeholder:"Phase"}),r.jsx("input",{value:M.duration||"",onChange:I=>u(L,"duration",I.target.value),className:"bg-white border border-slate-200 rounded px-2 py-1 text-xs text-slate-500 text-right",placeholder:"Duration"})]}),r.jsx("textarea",{value:M.description||"",onChange:I=>u(L,"description",I.target.value),rows:2,className:"w-full bg-white border border-slate-200 rounded px-2 py-1 text-xs text-slate-600 resize-none",placeholder:"Phase Description..."}),r.jsx("button",{onClick:()=>f(L),className:"absolute -top-2 -right-2 bg-white text-slate-400 hover:text-red-500 rounded-full p-1 shadow-sm border border-slate-100 opacity-0 group-hover:opacity-100 transition-all",children:r.jsx(ko,{size:12})})]},L)),r.jsxs("button",{onClick:h,className:"w-full py-2 border border-dashed border-slate-300 text-slate-500 hover:text-indigo-600 hover:border-indigo-300 rounded-lg text-xs font-medium transition-colors flex items-center justify-center gap-2",children:[r.jsx(df,{size:14})," Add Phase"]})]})}),r.jsxs(hp,{title:"Commercials",icon:ES,isOpen:A==="commercials",onClick:()=>D("commercials"),children:[r.jsx(dr,{label:"Total Project Cost",name:"totalProjectCost",value:n.totalProjectCost,onChange:e,placeholder:"e.g. $5,000 USD"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[r.jsx(dr,{label:"Payment Days",name:"paymentDays",value:n.paymentDays,onChange:e,placeholder:"15"}),r.jsx(dr,{label:"Validity (Days)",name:"validityDays",value:n.validityDays,onChange:e,placeholder:"30"})]}),r.jsx("div",{className:"h-px bg-slate-100 my-3"}),r.jsx(dr,{label:"Jurisdiction",name:"jurisdiction",value:n.jurisdiction,onChange:e,placeholder:"State/Country"})]})]}),E==="edit"&&r.jsx("div",{className:"p-4 space-y-4 pb-20",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute left-[7px] top-4 bottom-0 w-[2px] bg-slate-100"}),r.jsx("p",{className:"font-bold text-[10px] uppercase tracking-widest text-slate-400 pl-8 mb-4",children:"Proposal Structure"}),r.jsx(zy,{axis:"y",values:t.sections,onReorder:c,className:"space-y-0",children:t.sections.map((M,L)=>r.jsx(Iy,{value:M,className:"relative mb-2",children:r.jsx(sf,{section:M,onUpdate:(I,W)=>o(M.id,I,W),onRemove:()=>a(M.id),placeholderTitle:"Section Title",placeholderContent:"Section content..."})},M.id))}),r.jsx(av,{onClick:i})]})})]})};function zh({data:n,content:e,zoom:t=1,printing:s=!1,readOnly:i=!1,styles:a}){const o=a||{fontFamily:"font-serif",fontSize:"text-[11pt]",lineHeight:"leading-relaxed",textColor:"#1e293b",headingColor:"#0f172a",accentColor:"#4f46e5",pageMargin:"p-[25mm]"},c=x=>{if(!x)return"bg-slate-100 text-slate-600 border-slate-200";const w=["bg-indigo-50 text-indigo-700 border-indigo-200","bg-emerald-50 text-emerald-700 border-emerald-200","bg-amber-50 text-amber-700 border-amber-200","bg-rose-50 text-rose-700 border-rose-200","bg-violet-50 text-violet-700 border-violet-200","bg-sky-50 text-sky-700 border-sky-200"];let A=0;for(let C=0;C<x.length;C++)A=x.charCodeAt(C)+((A<<5)-A);return w[Math.abs(A)%w.length]},u=({value:x,placeholder:w,name:A,className:C=""})=>{const E=c(A);return x?i||s?r.jsx("span",{className:`font-medium text-slate-900 ${C}`,children:x}):r.jsx("span",{className:`px-1.5 py-0.5 rounded border ${E} font-medium mx-0.5 transition-all hover:brightness-95 ${C}`,children:x}):i||s?r.jsx("span",{className:`text-slate-500 italic ${C}`,children:w}):r.jsx("span",{className:`px-1.5 py-0.5 rounded border border-dashed ${E} bg-opacity-50 font-medium text-xs mx-0.5 ${C}`,children:w})},h=({template:x,values:w})=>{if(!x)return null;const A=x.split(/(\*\*[^*]+\*\*)/g);return r.jsx("span",{children:A.map((C,E)=>{if(C.startsWith("**")&&C.endsWith("**"))return r.jsx("strong",{children:C.slice(2,-2)},E);const T=C.split(/(\{\{[^}]+\}\})/g);return r.jsx("span",{children:T.map((D,M)=>{if(D.startsWith("{{")&&D.endsWith("}}")){const L=D.slice(2,-2).trim();return r.jsx(u,{value:w[L],name:L,placeholder:`[${L}]`},M)}return D.split(`
`).map((L,I)=>r.jsxs(gt.Fragment,{children:[I>0&&r.jsx("br",{}),L]},I))})},E)})})},f=s?"div":ze.div,g=s?"div":ze.section;return r.jsxs(f,{id:"printable-document",...s?{}:{initial:{opacity:0,y:20},animate:{opacity:1,y:0}},style:{transform:s?"none":`scale(${t})`,transformOrigin:"top center",color:o.textColor},className:`w-[210mm] min-h-[297mm] bg-white relative mb-20 origin-top
                ${s?"":"shadow-[0_8px_30px_rgb(0,0,0,0.12)] border border-slate-200/60"}
                ${o.fontFamily} ${o.fontSize} ${o.lineHeight} ${o.pageMargin}
            `,children:[r.jsx("div",{className:"no-print absolute inset-0 shadow-[0_2px_4px_rgba(0,0,0,0.05),0_12px_24px_rgba(0,0,0,0.1)] rounded-sm pointer-events-none"}),r.jsxs("div",{className:"p-[10mm] h-full flex flex-col relative z-10 min-h-[297mm]",children:[r.jsxs("div",{className:`flex-1 flex flex-col justify-center ${n.logoAlignment==="left"?"items-start text-left":n.logoAlignment==="right"?"items-end text-right":"items-center text-center"} border-b-2 border-slate-900 mb-12 pb-12 break-after-page`,style:s?{textAlign:n.logoAlignment||"center"}:{},children:[n.businessLogo&&n.brandingEnabled!==!1&&n.brandingEnabled!=="false"&&r.jsx("div",{className:"mb-8 w-full",children:r.jsx("img",{src:n.businessLogo,alt:"Company Logo",style:{height:`${n.logoSize||80}px`,objectFit:"contain",marginLeft:n.logoAlignment==="right"||n.logoAlignment==="center"?"auto":"0",marginRight:n.logoAlignment==="left"||n.logoAlignment==="center"?"auto":"0",display:"block"},className:`object-contain ${n.logoAlignment==="left"?"":n.logoAlignment==="right"?"ml-auto":"mx-auto"}`})}),r.jsx("div",{className:"mb-4",children:r.jsx("span",{className:"uppercase tracking-[0.2em] text-slate-400 text-sm font-sans",children:"Project Proposal"})}),r.jsx("h1",{className:"text-4xl font-bold mb-2 max-w-lg leading-tight",style:{color:o.headingColor},children:r.jsx(u,{value:n.proposalTitle,placeholder:"[Project Name]"})}),r.jsx("div",{className:"w-16 h-1 bg-indigo-500 my-8"}),r.jsxs("div",{className:`grid grid-cols-1 gap-12 w-full max-w-md mt-8 ${n.logoAlignment==="right"?"text-right":"text-left"}`,children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase font-bold text-slate-400 mb-2 font-sans",children:"Prepared For"}),r.jsx("div",{className:"text-lg font-medium",children:r.jsx(u,{value:n.clientName,placeholder:"[Client Name]"})}),r.jsx("div",{className:"text-slate-600",children:r.jsx(u,{value:n.clientCompany,placeholder:"[Client Company]"})}),r.jsx("div",{className:"text-slate-500 text-sm mt-1 whitespace-pre-wrap",children:r.jsx(u,{value:n.clientAddress,placeholder:"[Client Address]"})})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase font-bold text-slate-400 mb-2 font-sans",children:"Prepared By"}),r.jsx("div",{className:"text-lg font-medium",children:r.jsx(u,{value:n.providerName,placeholder:"[Your Name]"})}),r.jsx("div",{className:"text-slate-600",children:r.jsx(u,{value:n.providerCompany,placeholder:"[Your Company]"})}),r.jsx("div",{className:"text-slate-500 text-sm mt-1 whitespace-pre-wrap",children:r.jsx(u,{value:n.providerAddress,placeholder:"[Your Address]"})})]})]}),r.jsxs("div",{className:"mt-auto grid grid-cols-2 gap-8 w-full max-w-md text-sm border-t border-slate-100 pt-8",children:[r.jsxs("div",{className:n.logoAlignment==="right"?"text-right order-2":"",children:[r.jsx("span",{className:"text-slate-400",children:"Date:"})," ",r.jsx(u,{value:n.proposalDate,placeholder:"DD/MM/YYYY"})]}),r.jsxs("div",{className:n.logoAlignment==="right"?"text-left order-1":"text-right",children:[r.jsx("span",{className:"text-slate-400",children:"Ref:"})," ",r.jsx(u,{value:n.referenceNo,placeholder:"-"})]})]})]}),r.jsx("div",{className:"space-y-8",children:r.jsx(Zn,{children:e.sections&&e.sections.map((x,w)=>r.jsxs(g,{...s?{}:{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95}},children:[r.jsxs("h2",{className:"font-bold text-lg uppercase mb-3 border-l-4 pl-3",style:{color:o.headingColor,borderColor:o.accentColor},children:[w+2,". ",x.title]}),r.jsx("div",{className:"text-justify text-slate-700",children:r.jsx(h,{template:x.content,values:n})}),x.title.includes("Timeline")&&r.jsx("div",{className:"mt-6 mb-8 overflow-hidden rounded-lg border border-slate-200",children:r.jsxs("table",{className:"w-full text-sm text-left",children:[r.jsx("thead",{className:"bg-slate-100 text-slate-700 font-bold uppercase text-xs",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3",children:"Phase"}),r.jsx("th",{className:"px-4 py-3",children:"Description"}),r.jsx("th",{className:"px-4 py-3 text-right",children:"Duration"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:n.timeline.map((A,C)=>r.jsxs("tr",{className:"bg-white",children:[r.jsx("td",{className:"px-4 py-3 font-medium text-slate-900",children:A.phase}),r.jsx("td",{className:"px-4 py-3 text-slate-600",children:A.description}),r.jsx("td",{className:"px-4 py-3 text-right text-slate-500",children:A.duration})]},C))})]})})]},x.id))})}),r.jsxs("section",{className:"mt-16 break-inside-avoid border-t-2 border-slate-900 pt-8",children:[r.jsxs("h2",{className:"font-bold text-lg uppercase mb-6 text-slate-900 pl-3 border-l-4 border-indigo-500",children:[e.sections.length+2,". Acceptance"]}),r.jsx("p",{className:"mb-8",children:"By signing below, both parties agree to the terms and conditions outlined in this proposal."}),s?r.jsx("table",{style:{width:"100%",marginTop:"20px"},children:r.jsx("tbody",{children:r.jsxs("tr",{children:[r.jsxs("td",{style:{width:"48%",verticalAlign:"top",paddingRight:"2%"},children:[r.jsx("p",{style:{fontWeight:"bold",textTransform:"uppercase",fontSize:"10pt",marginBottom:"20px",backgroundColor:"#f1f5f9",padding:"5px"},children:"For Client"}),r.jsx("table",{style:{width:"100%"},children:r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{style:{width:"80px",paddingBottom:"15px"},children:"Name:"}),r.jsx("td",{style:{borderBottom:"1px solid #ccc"}})]}),r.jsxs("tr",{children:[r.jsx("td",{style:{width:"80px",paddingBottom:"15px"},children:"Designation:"}),r.jsx("td",{style:{borderBottom:"1px solid #ccc"}})]}),r.jsxs("tr",{children:[r.jsx("td",{style:{width:"80px",paddingBottom:"15px"},children:"Signature:"}),r.jsx("td",{style:{borderBottom:"1px solid #ccc",height:"40px"}})]}),r.jsxs("tr",{children:[r.jsx("td",{style:{width:"80px"},children:"Date:"}),r.jsx("td",{style:{borderBottom:"1px solid #ccc"}})]})]})})]}),r.jsx("td",{style:{width:"4%"}}),r.jsxs("td",{style:{width:"48%",verticalAlign:"top"},children:[r.jsx("p",{style:{fontWeight:"bold",textTransform:"uppercase",fontSize:"10pt",marginBottom:"20px",backgroundColor:"#f1f5f9",padding:"5px"},children:"For Service Provider"}),r.jsx("table",{style:{width:"100%"},children:r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{style:{width:"80px",paddingBottom:"15px"},children:"Name:"}),r.jsx("td",{style:{borderBottom:"1px solid #ccc"},children:n.providerName})]}),r.jsxs("tr",{children:[r.jsx("td",{style:{width:"80px",paddingBottom:"15px"},children:"Designation:"}),r.jsx("td",{style:{borderBottom:"1px solid #ccc"}})]}),r.jsxs("tr",{children:[r.jsx("td",{style:{width:"80px",paddingBottom:"15px"},children:"Signature:"}),r.jsx("td",{style:{borderBottom:"1px solid #ccc",height:"40px"}})]}),r.jsxs("tr",{children:[r.jsx("td",{style:{width:"80px"},children:"Date:"}),r.jsx("td",{style:{borderBottom:"1px solid #ccc"}})]})]})})]})]})})}):r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-16",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"font-bold uppercase text-xs tracking-wider mb-8 bg-slate-100 p-2 inline-block rounded",children:"For Client"}),r.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-x-2 gap-y-4 items-baseline text-sm",children:[r.jsx("span",{className:"font-medium text-slate-500",children:"Name:"}),r.jsx("div",{className:"border-b border-slate-300 h-6"}),r.jsx("span",{className:"font-medium text-slate-500",children:"Designation:"}),r.jsx("div",{className:"border-b border-slate-300 h-6"}),r.jsx("span",{className:"font-medium text-slate-500",children:"Signature:"}),r.jsx("div",{className:"border-b border-slate-300 h-10"}),r.jsx("span",{className:"font-medium text-slate-500",children:"Date:"}),r.jsx("div",{className:"border-b border-slate-300 h-6"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"font-bold uppercase text-xs tracking-wider mb-8 bg-slate-100 p-2 inline-block rounded",children:"For Service Provider"}),r.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-x-2 gap-y-4 items-baseline text-sm",children:[r.jsx("span",{className:"font-medium text-slate-500",children:"Name:"}),r.jsx("div",{className:"border-b border-slate-300 h-6 text-slate-900",children:n.providerName}),r.jsx("span",{className:"font-medium text-slate-500",children:"Designation:"}),r.jsx("div",{className:"border-b border-slate-300 h-6"}),r.jsx("span",{className:"font-medium text-slate-500",children:"Signature:"}),r.jsx("div",{className:"border-b border-slate-300 h-10"}),r.jsx("span",{className:"font-medium text-slate-500",children:"Date:"}),r.jsx("div",{className:"border-b border-slate-300 h-6"})]})]})]})]}),!s&&r.jsx("div",{className:"mt-auto pt-12 text-center",children:r.jsx("p",{className:"text-[9px] text-slate-300 uppercase tracking-widest font-sans",children:"Generated by DocForge"})})]})]})}const T5=({children:n})=>{const[e,t]=R.useState(null);return R.useEffect(()=>{const s=document.getElementById("print-root");if(s)t(s);else{const i=document.createElement("div");i.id="print-root",document.body.appendChild(i),t(i)}},[]),e?yL.createPortal(n,e):null},yZ=()=>Math.random().toString(36).substr(2,9),vZ={title:"Business / Project Proposal",sections:[{id:"1",title:"Introduction",content:"This proposal is submitted by {{providerCompany}} to {{clientName}} to outline the scope, deliverables, timelines, and commercial terms for {{projectDescription}}. This document is intended to present a clear understanding of the proposed engagement and to serve as a basis for mutual agreement."},{id:"2",title:"Client Objectives",content:`The objective of this proposal is to assist {{clientCompany}} in achieving the following goals:

1. [Objective 1]
2. [Objective 2]
3. [Objective 3]`},{id:"3",title:"Scope of Work",content:`The scope of work under this proposal shall include, but is not limited to, the following services:

**4.1 Services Included**
[Service 1]
[Service 2]

**4.2 Services Excluded**
Any services not explicitly mentioned above shall be considered outside the scope and may be provided under a separate agreement or change request.`},{id:"4",title:"Deliverables",content:`The following deliverables shall be provided as part of this engagement:

1. [Deliverable 1]
2. [Deliverable 2]

All deliverables shall be submitted in the agreed format and within the defined timeline.`},{id:"5",title:"Project Timeline",content:"The estimated timeline for completion of the project is as follows (see table below). Timelines are indicative and subject to client approvals and dependencies."},{id:"6",title:"Commercials & Pricing",content:`The total professional fees for the services described in this proposal shall be: {{totalProjectCost}}.

**Payment Terms**
- [Percentage] payable upon acceptance
- [Percentage] payable upon milestone completion
- [Percentage] payable upon final delivery

All payments shall be made within {{paymentDays}} days from the date of invoice.`},{id:"7",title:"Client Responsibilities",content:`The Client agrees to:
- Provide accurate and timely information
- Share necessary access, approvals, and feedback
- Assign a single point of contact for communication

Delays caused due to client dependencies may impact project timelines.`},{id:"8",title:"Confidentiality",content:"Both parties agree to maintain strict confidentiality of all proprietary, technical, commercial, and business information exchanged during the course of this engagement. Confidential information shall not be disclosed to any third party without prior written consent."},{id:"9",title:"Intellectual Property Rights",content:`Unless otherwise agreed in writing:
- All intellectual property developed during the project shall remain the property of {{providerCompany}} until full payment is received.
- Upon full payment, ownership or license rights shall be transferred as mutually agreed.`},{id:"10",title:"Limitation of Liability",content:"In no event shall either party be liable for indirect, incidental, or consequential damages. The total liability of {{providerCompany}} shall not exceed the total fees paid under this proposal."},{id:"11",title:"Term & Termination",content:"This proposal shall remain valid for {{validityDays}} days from the proposal date. Either party may terminate the engagement by providing {{noticeDays}} days written notice. Fees for work completed up to the termination date shall be payable."},{id:"12",title:"Governing Law",content:"This proposal shall be governed by and construed in accordance with the laws of {{jurisdiction}}, and courts of {{courtCity}} shall have exclusive jurisdiction."}]},ij=()=>{const n=yi(),{id:e}=vd(),t=Ym("(min-width: 1024px)"),[s,i]=R.useState("edit"),[a,o]=R.useState(1),[c,u]=R.useState(!1),[h,f]=R.useState("Untitled Proposal"),[g,x]=R.useState(!1),[w,A]=R.useState(null),C=gt.useRef(null),[E,T]=R.useState({proposalTitle:"Website Redesign Project",proposalDate:new Date().toLocaleDateString(),logoSize:80,logoAlignment:"center",brandingEnabled:!0,referenceNo:"",clientName:"",clientCompany:"",clientAddress:"",providerName:"",providerCompany:"",providerAddress:"",projectDescription:"",totalProjectCost:"",paymentDays:"15",validityDays:"30",noticeDays:"30",jurisdiction:"",courtCity:"",timeline:[{phase:"Phase 1",description:"Requirement Analysis",duration:"5 days"},{phase:"Phase 2",description:"Execution / Development",duration:"15 days"},{phase:"Phase 3",description:"Review & Final Delivery",duration:"5 days"}]}),[D,M]=R.useState(vZ),{styles:L,updateStyle:I,resetStyles:W}=G0(),V=gt.useDeferredValue(E),Y=gt.useDeferredValue(D);R.useEffect(()=>{e&&K(e)},[e]);const K=async De=>{try{const Fe=await B0(De);Fe.data.name&&f(Fe.data.name);let $e=Fe.data.content||{};if(typeof $e=="string")try{$e=JSON.parse($e)}catch(nt){console.error(nt)}$e.formData&&T(nt=>({...nt,...$e.formData})),$e.docContent&&M($e.docContent),$e.styles&&Object.entries($e.styles).forEach(([nt,qe])=>I(nt,qe))}catch(Fe){console.error("Failed to load",Fe)}};R.useEffect(()=>{e||(async()=>{try{const Fe=await vr();Fe&&T($e=>({...$e,providerName:Fe.name||"",providerCompany:Fe.name||"",providerAddress:[Fe.address,Fe.city,Fe.state,Fe.country].filter(Boolean).join(", "),businessLogo:Fe.logo||null}))}catch(Fe){console.error("Failed to load business details",Fe)}})()},[e]);const q=De=>{const{name:Fe,value:$e}=De.target;T(nt=>({...nt,[Fe]:$e}))},ne=De=>{const{name:Fe,value:$e}=De.target;M(nt=>({...nt,[Fe]:$e}))},le=(De,Fe,$e)=>{const nt=[...E.timeline];nt[De][Fe]=$e,T(qe=>({...qe,timeline:nt}))},_e=()=>{T(De=>({...De,timeline:[...De.timeline,{phase:"New Phase",description:"",duration:""}]}))},xe=De=>{E.timeline.length<=1||T(Fe=>({...Fe,timeline:Fe.timeline.filter(($e,nt)=>nt!==De)}))},je=()=>{const De={id:yZ(),title:"New Section",content:"Enter the details of this new clause here..."};M(Fe=>({...Fe,sections:[...Fe.sections,De]}))},U=De=>{M(Fe=>({...Fe,sections:Fe.sections.filter($e=>$e.id!==De)}))},H=(De,Fe,$e)=>{M(nt=>({...nt,sections:nt.sections.map(qe=>qe.id===De?{...qe,[Fe]:$e}:qe)}))},ee=De=>{M(Fe=>({...Fe,sections:De}))},he=()=>n("/documents"),ce=()=>o(De=>Math.min(De+.1,1.5)),G=()=>o(De=>Math.max(De-.1,.5)),ue=async()=>{u(!0);try{const De={name:h,type_slug:"proposal",content:{formData:E,docContent:D,styles:L},status:"draft"};if(e)await U0(e,De),Be.success("Proposal updated successfully");else{const Fe=await H0(De);Be.success("Proposal created successfully"),n(`/documents/proposal/${Fe.data.id}`,{replace:!0})}}catch(De){console.error("Failed to save",De),Be.error("Failed to save proposal")}finally{setTimeout(()=>u(!1),500)}},Se=async De=>{try{if(De&&De.includes("/storage/")){const nt=`http://localhost:8000/api/v1/file-proxy?path=${encodeURIComponent(De)}`,St=await(await fetch(nt)).blob();return new Promise((un,an)=>{const Lt=new FileReader;Lt.onloadend=()=>un(Lt.result),Lt.onerror=an,Lt.readAsDataURL(St)})}const $e=await(await fetch(De)).blob();return new Promise((nt,qe)=>{const St=new FileReader;St.onloadend=()=>nt(St.result),St.onerror=qe,St.readAsDataURL($e)})}catch(Fe){return console.error("Failed to convert image to base64",Fe),null}},[fe,Ae]=R.useState(!1);gt.useRef(null);const[Pe,Ve]=R.useState(null),Nt=async()=>{if(!e){Be.error("Please save the document before printing.");return}Ae(!0);try{let De=E.businessLogo;if(E.businessLogo&&!E.businessLogo.startsWith("data:")){const qe=await Se(E.businessLogo);qe&&(De=qe)}const Fe={...E,businessLogo:De},$e=pl.renderToStaticMarkup(r.jsx(zh,{data:Fe,content:D,zoom:1,printing:!0,styles:L})),nt=await Ya(e,$e,h);nt.url&&window.open(nt.url,"_blank")}catch(De){console.error("PDF Generation failed",De),Be.error("Failed to generate PDF")}finally{Ae(!1)}},[ht,mt]=R.useState(!1),[Qe,Kt]=R.useState(null),Ke=()=>{if(!e){Be.error("Please save the document before sending.");return}mt(!0)},at=De=>{De&&De.sent_at&&Kt(De.sent_at)},[ft,Gt]=R.useState(!1),He=async()=>{if(!e){Be.error("Please save the document before exporting.");return}Gt(!0);try{const De=pl.renderToStaticMarkup(r.jsx(zh,{data:E,content:D,zoom:1,printing:!0})),Fe=await Ya(e,De,h);if(Fe.url){const $e=document.createElement("a");$e.href=Fe.url,$e.download=`${h.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.pdf`,document.body.appendChild($e),$e.click(),document.body.removeChild($e),Be.success("Proposal exported successfully")}}catch(De){console.error("Export failed",De),Be.error("Failed to export proposal")}finally{Gt(!1)}},Je=De=>{C.current||(C.current={formData:E,docContent:D});let Fe=De.content;if(typeof Fe=="string")try{Fe=JSON.parse(Fe)}catch{}Fe.formData&&T(Fe.formData),Fe.docContent&&M(Fe.docContent),A(De),x(!1),Be.success(`Previewing Version ${De.version_number}`)},Ie=()=>{C.current&&(T(C.current.formData),M(C.current.docContent),C.current=null),A(null),Be.success("Exited preview mode")},tt=async De=>{const Fe=Be.loading("Preparing version PDF...");try{let $e=De.content;if(typeof $e=="string")try{$e=JSON.parse($e)}catch{}const nt=pl.renderToStaticMarkup(r.jsx(zh,{data:$e.formData||E,content:$e.docContent||D,zoom:1,printing:!0})),qe=await Ya(e,nt,`${h} - v${De.version_number}`);if(qe.url){const St=document.createElement("a");St.href=qe.url,St.download=`${h.replace(/[^a-z0-9]/gi,"_")}_v${De.version_number}.pdf`,document.body.appendChild(St),St.click(),document.body.removeChild(St),Be.success(`Version ${De.version_number} downloaded`,{id:Fe})}}catch($e){console.error("Version download failed",$e),Be.error("Failed to download version PDF",{id:Fe})}};return r.jsxs("div",{className:"flex flex-col h-screen bg-slate-100 overflow-hidden",children:[w&&r.jsxs("div",{className:"bg-amber-100 border-b border-amber-200 px-4 py-2 flex items-center justify-between text-amber-800 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jo,{size:16}),r.jsxs("span",{className:"font-medium",children:["Previewing Version ",w.version_number]}),r.jsxs("span",{className:"text-amber-600 hidden md:inline",children:["(",new Date(w.created_at).toLocaleString(),")"]})]}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs("button",{onClick:Ie,className:"text-amber-700 hover:text-amber-900 font-medium hover:underline flex items-center gap-1",children:[r.jsx(ja,{size:14})," Exit Preview"]})})]}),fe&&r.jsx(T5,{children:r.jsx(zh,{data:E,content:D,zoom:1})}),r.jsx(W0,{isOpen:ht,onClose:()=>mt(!1),documentId:e,documentName:h,isReminder:!!Qe,onSuccess:at,getHtmlContent:async()=>{const De=pl.renderToStaticMarkup(r.jsx(zh,{data:E,content:D,zoom:1,printing:!0}));return iN(De,h)}}),r.jsxs("header",{className:"no-print h-16 bg-white/80 backdrop-blur-md border-b border-slate-200/60 px-4 md:px-6 flex items-center justify-between flex-shrink-0 z-30 shadow-sm transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center gap-2 md:gap-4 overflow-hidden",children:[r.jsx("button",{onClick:he,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors flex-shrink-0",title:"Back to Documents",children:r.jsx(vl,{size:20})}),r.jsxs("div",{className:"min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"text",value:h,onChange:De=>f(De.target.value),className:"font-bold text-slate-800 text-sm md:text-lg bg-transparent border-none focus:ring-0 p-0 m-0 w-auto min-w-[120px] max-w-[200px] placeholder-slate-400 truncate",placeholder:"Enter Document Name"}),Qe&&r.jsxs("span",{className:"hidden lg:inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-emerald-50 text-emerald-600 text-[10px] font-medium border border-emerald-100",children:[r.jsx(ii,{size:10})," Sent"]})]}),r.jsx("p",{className:"text-[10px] md:text-xs text-slate-400 font-medium whitespace-nowrap hidden sm:block",children:"Last saved: Just now"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[r.jsxs("div",{className:"hidden lg:flex items-center bg-slate-100 rounded-lg p-1 mr-4",children:[r.jsx("button",{onClick:G,className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-slate-500 transition-all",children:r.jsx(Um,{size:16})}),r.jsxs("span",{className:"text-xs font-semibold text-slate-600 w-12 text-center",children:[Math.round(a*100),"%"]}),r.jsx("button",{onClick:ce,className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-slate-500 transition-all",children:r.jsx(Hm,{size:16})})]}),r.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 p-2 md:px-4 md:py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all",children:[r.jsx(Xa,{size:18}),r.jsx("span",{className:"hidden lg:inline",children:"History"})]}),r.jsxs("button",{onClick:Nt,className:"hidden md:flex items-center gap-2 p-2 md:px-4 md:py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all",children:[r.jsx(tf,{size:18}),r.jsx("span",{className:"hidden lg:inline",children:"Print"})]}),r.jsxs("button",{onClick:Ke,className:`flex items-center gap-2 px-2 md:px-4 py-2 text-sm font-medium rounded-lg border border-transparent transition-all ${Qe?"text-amber-600 hover:bg-amber-50 hover:border-amber-200":"text-slate-600 hover:bg-slate-50 hover:border-slate-200"}`,children:[Qe?r.jsx(wc,{size:18}):r.jsx(ri,{size:18}),r.jsx("span",{className:"hidden lg:inline",children:Qe?"Remind":"Send"})]}),r.jsxs("button",{onClick:He,disabled:ft,className:"flex items-center gap-2 px-2 md:px-4 py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all disabled:opacity-50",children:[ft?r.jsx(gs,{size:18,className:"animate-spin"}):r.jsx(wl,{size:18}),r.jsx("span",{className:"hidden lg:inline",children:ft?"Exporting...":"Export"})]}),r.jsxs("button",{onClick:ue,className:`flex items-center gap-2 px-3 md:px-5 py-2 rounded-lg text-white font-medium shadow-md transition-all ${c?"bg-emerald-500":"bg-indigo-600 hover:bg-indigo-700"}`,children:[c?r.jsx(ii,{size:18}):r.jsx(Sl,{size:18}),r.jsx("span",{className:"hidden md:inline",children:c?"Saved!":"Save"})]})]})]}),!t&&r.jsxs("div",{className:"flex bg-white border-b border-slate-200 px-4",children:[r.jsx("button",{onClick:()=>i("edit"),className:`flex-1 py-3 text-sm font-medium border-b-2 transition-colors ${s==="edit"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Edit"}),r.jsx("button",{onClick:()=>i("preview"),className:`flex-1 py-3 text-sm font-medium border-b-2 transition-colors ${s==="preview"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Preview"})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row flex-1 overflow-hidden relative",children:[r.jsx("div",{className:`
                    no-print w-full lg:w-[400px] h-full bg-white border-b lg:border-b-0 lg:border-r border-slate-200 
                    overflow-y-auto z-20 shadow-sm flex-shrink-0 lg:order-1
                    ${t||s==="edit"?"block":"hidden"}
                `,children:r.jsx(bZ,{formData:E,onChange:q,docContent:D,onContentChange:ne,addSection:je,removeSection:U,updateSection:H,reorderSections:ee,updateTimeline:le,addTimelineRow:_e,removeTimelineRow:xe,styles:L,onStyleUpdate:I,onStyleReset:W})}),r.jsx("div",{className:`
                    flex-1 h-full overflow-y-auto bg-slate-50/50 p-4 md:p-8 sm:p-12 
                    flex justify-center items-start scrollbar-thin scrollbar-thumb-slate-300 lg:order-2
                    ${t||s==="preview"?"flex":"hidden"}
                `,style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"20px 20px"},children:r.jsx(zh,{data:V,content:Y,zoom:a,styles:L})})]}),r.jsx(V0,{documentId:e,isOpen:g,onClose:()=>x(!1),onPreview:Je,onDownload:tt,onRestore:De=>{if(De&&De.content){let Fe=De.content;if(typeof Fe=="string")try{Fe=JSON.parse(Fe)}catch{}Fe.formData&&T(Fe.formData),Fe.docContent&&M(Fe.docContent)}A(null),C.current=null}})]})},wZ=({formData:n,onChange:e,updateItem:t,addItem:s,removeItem:i,totals:a,styles:o,onStyleUpdate:c,onStyleReset:u})=>{const[h,f]=R.useState("details"),[g,x]=R.useState("fill"),w=A=>{f(h===A?null:A)};return r.jsxs("div",{className:"bg-white min-h-full pb-20",children:[r.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 sticky top-0 z-10 backdrop-blur-sm",children:[r.jsxs("div",{className:"flex gap-1 bg-slate-200/50 p-1 rounded-lg mb-4",children:[r.jsxs("button",{onClick:()=>x("fill"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${g==="fill"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,children:[r.jsx(ls,{size:16}),"Invoice Details"]}),r.jsxs("button",{onClick:()=>x("style"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${g==="style"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,children:[r.jsx(uf,{size:16}),"Appearance"]})]}),r.jsx("h2",{className:"text-lg font-bold text-slate-900",children:g==="fill"?"Invoice Details":"Styling & Appearance"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:g==="fill"?"Configure invoice data and line items":"Fonts, colors and spacing"}),g==="fill"&&r.jsxs("div",{className:"mt-4 bg-emerald-50 border border-emerald-100 p-3 rounded-lg flex justify-between items-center",children:[r.jsx("span",{className:"text-xs font-bold text-emerald-800 uppercase",children:"Grand Total"}),r.jsx("span",{className:"text-lg font-bold text-emerald-600",children:a.grandTotal.toLocaleString()})]})]}),g==="fill"?r.jsxs(r.Fragment,{children:[r.jsxs(AccordionItem,{title:"Invoice Basics",icon:ls,isOpen:h==="details",onClick:()=>w("details"),children:[r.jsx(InputGroup,{label:"Invoice Title",name:"invoiceTitle",value:n.invoiceTitle,onChange:e,placeholder:"INVOICE"}),r.jsx(InputGroup,{label:"Invoice Number",name:"invoiceNumber",value:n.invoiceNumber,onChange:e,placeholder:"INV-001"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(InputGroup,{label:"Date",name:"invoiceDate",value:n.invoiceDate,onChange:e,placeholder:"DD/MM/YYYY"}),r.jsx(InputGroup,{label:"Due Date",name:"dueDate",value:n.dueDate,onChange:e,placeholder:"DD/MM/YYYY"})]}),r.jsx(InputGroup,{label:"Place of Supply",name:"placeOfSupply",value:n.placeOfSupply,onChange:e,placeholder:"State/Country"})]}),r.jsx(AccordionItem,{title:"Document Branding",icon:lf,isOpen:h==="branding",onClick:()=>w("branding"),children:r.jsx(I0,{formData:n,onChange:e})}),r.jsx(AccordionItem,{title:"Parties Involved",icon:Mo,isOpen:h==="parties",onClick:()=>w("parties"),children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-3 bg-indigo-50 rounded-lg border border-indigo-100",children:[r.jsx("h4",{className:"text-xs font-bold text-indigo-900 uppercase mb-3",children:"Seller (You)"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(InputGroup,{label:"Name",name:"sellerName",value:n.sellerName,onChange:e,placeholder:"Your Company"}),r.jsx(InputGroup,{label:"Address",name:"sellerAddress",value:n.sellerAddress,onChange:e,placeholder:"Address",rows:2}),r.jsx(InputGroup,{label:"Tax ID (GST/PAN)",name:"sellerTaxId",value:n.sellerTaxId,onChange:e,placeholder:"Optional"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(InputGroup,{label:"Email",name:"sellerEmail",value:n.sellerEmail,onChange:e,placeholder:"Email"}),r.jsx(InputGroup,{label:"Phone",name:"sellerPhone",value:n.sellerPhone,onChange:e,placeholder:"Phone"})]})]})]}),r.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border border-slate-200",children:[r.jsx("h4",{className:"text-xs font-bold text-slate-700 uppercase mb-3",children:"Bill To (Client)"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(InputGroup,{label:"Client Name",name:"clientName",value:n.clientName,onChange:e,placeholder:"Client Name"}),r.jsx(InputGroup,{label:"Address",name:"clientAddress",value:n.clientAddress,onChange:e,placeholder:"Client Address",rows:2}),r.jsx(InputGroup,{label:"Tax ID (GSTIN)",name:"clientTaxId",value:n.clientTaxId,onChange:e,placeholder:"Optional"})]})]})]})}),r.jsx(AccordionItem,{title:"Line Items",icon:$U,isOpen:h==="items",onClick:()=>w("items"),children:r.jsxs("div",{className:"space-y-4",children:[n.items.map((A,C)=>r.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-3 relative group shadow-sm",children:[r.jsxs("div",{className:"mb-2",children:[r.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-wide mb-1",children:"Description"}),r.jsx("input",{value:A.description,onChange:E=>t(C,"description",E.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm outline-none focus:border-indigo-400 transition-colors",placeholder:"Item Name"})]}),r.jsxs("div",{className:"grid grid-cols-[1fr_1fr_1fr] gap-2 items-end",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-wide mb-1",children:"Qty"}),r.jsx("input",{type:"number",value:A.quantity,onChange:E=>t(C,"quantity",E.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm text-center font-mono"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-wide mb-1",children:"Rate"}),r.jsx("input",{type:"number",value:A.rate,onChange:E=>t(C,"rate",E.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded px-2 py-1.5 text-sm text-right font-mono"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-wide mb-1",children:"Amount"}),r.jsx("div",{className:"w-full bg-slate-100 border border-slate-200 rounded px-2 py-1.5 text-sm text-right font-bold text-slate-600 font-mono",children:A.amount})]})]}),r.jsx("button",{onClick:()=>i(C),className:"absolute top-2 right-2 text-slate-300 hover:text-red-500 p-1 transition-colors",children:r.jsx(ko,{size:14})})]},C)),r.jsxs("button",{onClick:s,className:"w-full py-2 border border-dashed border-slate-300 text-slate-500 hover:text-indigo-600 hover:border-indigo-300 rounded-lg text-xs font-medium transition-colors flex items-center justify-center gap-2",children:[r.jsx(df,{size:14})," Add Item"]})]})}),r.jsx(AccordionItem,{title:"Tax Details",icon:EU,isOpen:h==="tax",onClick:()=>w("tax"),children:r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(InputGroup,{label:"Tax Type",name:"taxType",value:n.taxType,onChange:e,placeholder:"GST"}),r.jsx(InputGroup,{label:"Tax Rate (%)",name:"taxRate",value:n.taxRate,onChange:e,placeholder:"18",type:"number"})]})}),r.jsx(AccordionItem,{title:"Bank & Payment",icon:eU,isOpen:h==="bank",onClick:()=>w("bank"),children:r.jsxs("div",{className:"space-y-3",children:[r.jsx(InputGroup,{label:"Account Name",name:"accountName",value:n.accountName,onChange:e,placeholder:"Account Holder"}),r.jsx(InputGroup,{label:"Bank Name",name:"bankName",value:n.bankName,onChange:e,placeholder:"Bank Name"}),r.jsx(InputGroup,{label:"Account Number",name:"accountNumber",value:n.accountNumber,onChange:e,placeholder:"XXXX XXXX XXXX"}),r.jsx(InputGroup,{label:"IFSC / SWIFT",name:"ifscCode",value:n.ifscCode,onChange:e,placeholder:"Code"})]})}),r.jsxs(AccordionItem,{title:"Notes & Signatory",icon:qH,isOpen:h==="notes",onClick:()=>w("notes"),children:[r.jsx(InputGroup,{label:"Authorized Signatory Name",name:"signatoryName",value:n.signatoryName,onChange:e,placeholder:"Name"}),r.jsx("div",{className:"h-2"}),r.jsx(InputGroup,{label:"Notes / Terms",name:"notes",value:n.notes,onChange:e,placeholder:"Terms...",rows:3})]})]}):r.jsx("div",{className:"p-4 pb-20",children:r.jsx(rv,{styles:o,onUpdate:c,onReset:u})})]})};function Ih({data:n,totals:e,zoom:t=1,printing:s=!1,readOnly:i=!1,styles:a}){const o=a||{fontFamily:"font-sans",fontSize:"text-[10pt]",lineHeight:"leading-relaxed",textColor:"#1e293b",headingColor:"#0f172a"},c=n.logoSize||60,u=n.logoAlignment||"left",h=({className:x="",style:w={}})=>n.businessLogo&&n.brandingEnabled!==!1&&n.brandingEnabled!=="false"?r.jsx("img",{src:n.businessLogo,alt:"Business Logo",className:`${x}`,style:{height:`${c}px`,objectFit:"contain",...w}}):null,f=({value:x,placeholder:w,className:A=""})=>x?i||s?r.jsx("span",{className:`font-medium text-slate-900 ${A}`,children:x}):r.jsx("span",{className:`font-medium text-slate-900 border-b border-transparent hover:border-indigo-200 hover:bg-indigo-50 transition-all px-0.5 rounded ${A}`,children:x}):i||s?r.jsx("span",{className:`text-slate-500 italic ${A}`,children:w}):r.jsx("span",{className:`bg-blue-50/50 px-1 border-b border-blue-200 text-slate-400 italic transition-colors hover:bg-blue-100 ${A}`,children:w}),g=s?"div":ze.div;return r.jsxs(g,{id:"printable-document",...s?{}:{initial:{opacity:0,y:20},animate:{opacity:1,y:0}},style:{transform:s?"none":`scale(${t})`,transformOrigin:"top center",color:o.textColor},className:`w-[210mm] min-h-[297mm] bg-white relative mb-20 origin-top
                ${s?"":"shadow-[0_8px_30px_rgb(0,0,0,0.12)] border border-slate-200/60"}
                ${o.fontFamily} ${o.fontSize} ${o.lineHeight}
            `,children:[!s&&r.jsx("div",{className:"no-print absolute inset-0 rounded-sm pointer-events-none bg-gradient-to-b from-white to-slate-50/20"}),r.jsxs("div",{className:`p-[10mm] ${s?"block h-auto":"flex flex-col h-full"} relative z-10`,children:[s?r.jsx("table",{style:{width:"100%",marginBottom:"20px",borderBottom:"2px solid #000",paddingBottom:"20px"},children:r.jsxs("tbody",{children:[u==="center"&&n.businessLogo&&r.jsx("tr",{children:r.jsx("td",{colSpan:"2",style:{textAlign:"center",paddingBottom:"20px"},children:r.jsx(h,{style:{marginBottom:"15px"}})})}),r.jsxs("tr",{children:[r.jsxs("td",{style:{verticalAlign:"top",width:"50%"},children:[u==="left"&&r.jsx("div",{style:{marginBottom:"15px"},children:r.jsx(h,{})}),r.jsx("h1",{className:"text-2xl font-bold uppercase tracking-wider mb-2",style:{color:o.headingColor},children:n.invoiceTitle||"Invoice"}),r.jsxs("div",{className:"mt-4 text-sm",children:[r.jsx("h2",{className:"font-bold text-lg",children:r.jsx(f,{value:n.sellerName,placeholder:"[Your Company Name]"})}),r.jsx("div",{className:"text-slate-600 max-w-[250px] whitespace-pre-wrap",children:r.jsx(f,{value:n.sellerAddress,placeholder:"[Full Address]"})}),n.sellerTaxId&&r.jsxs("div",{className:"mt-1",children:[r.jsx("span",{className:"font-bold text-xs uppercase",children:"GSTIN/Tax ID:"})," ",n.sellerTaxId]}),r.jsxs("div",{className:"mt-1 text-xs",children:[n.sellerEmail&&r.jsx("div",{children:n.sellerEmail}),n.sellerPhone&&r.jsx("div",{children:n.sellerPhone})]})]})]}),r.jsxs("td",{style:{verticalAlign:"top",width:"50%",textAlign:"right"},children:[u==="right"&&r.jsx("div",{style:{marginBottom:"15px",display:"flex",justifyContent:"flex-end"},children:r.jsx(h,{})}),r.jsx("table",{style:{float:"right",width:"auto",padding:"10px"},children:r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{style:{fontWeight:"bold",color:"#64748b",paddingRight:"10px"},children:"Invoice #:"}),r.jsx("td",{className:"font-mono",children:r.jsx(f,{value:n.invoiceNumber,placeholder:"INV-0001"})})]}),r.jsxs("tr",{children:[r.jsx("td",{style:{fontWeight:"bold",color:"#64748b",paddingRight:"10px"},children:"Date:"}),r.jsx("td",{children:r.jsx(f,{value:n.invoiceDate,placeholder:"DD/MM/YYYY"})})]}),r.jsxs("tr",{children:[r.jsx("td",{style:{fontWeight:"bold",color:"#64748b",paddingRight:"10px"},children:"Due Date:"}),r.jsx("td",{children:r.jsx(f,{value:n.dueDate,placeholder:"DD/MM/YYYY"})})]}),r.jsxs("tr",{children:[r.jsx("td",{style:{fontWeight:"bold",color:"#64748b",paddingRight:"10px"},children:"Place of Supply:"}),r.jsx("td",{children:r.jsx(f,{value:n.placeOfSupply,placeholder:"State"})})]})]})})]})]})]})}):r.jsxs("div",{className:"flex flex-col gap-6 mb-8 border-b-2 border-slate-900 pb-6",children:[u==="center"&&r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx(h,{})}),r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-6 md:gap-0",children:[r.jsxs("div",{children:[u==="left"&&r.jsx("div",{className:"mb-4",children:r.jsx(h,{})}),r.jsx("h1",{className:"text-2xl font-bold uppercase tracking-wider mb-4",style:{color:o.headingColor},children:n.invoiceTitle||"Invoice"}),r.jsxs("div",{className:"mt-4 text-sm",children:[r.jsx("h2",{className:"font-bold text-lg",children:r.jsx(f,{value:n.sellerName,placeholder:"[Your Company Name]"})}),r.jsx("div",{className:"text-slate-600 max-w-[250px] whitespace-pre-wrap",children:r.jsx(f,{value:n.sellerAddress,placeholder:"[Full Address]"})}),n.sellerTaxId&&r.jsxs("div",{className:"mt-1",children:[r.jsx("span",{className:"font-bold text-xs uppercase",children:"GSTIN/Tax ID:"})," ",n.sellerTaxId]}),r.jsxs("div",{className:"mt-1 text-xs",children:[n.sellerEmail&&r.jsx("div",{children:n.sellerEmail}),n.sellerPhone&&r.jsx("div",{children:n.sellerPhone})]})]})]}),r.jsxs("div",{className:"text-right flex flex-col items-end",children:[u==="right"&&r.jsx("div",{className:"mb-4",children:r.jsx(h,{})}),r.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-100 text-sm min-w-[200px]",children:[r.jsxs("div",{className:"flex justify-between mb-1 gap-4",children:[r.jsx("span",{className:"text-slate-500 font-bold",children:"Invoice #:"}),r.jsx(f,{value:n.invoiceNumber,placeholder:"INV-0001",className:"font-mono"})]}),r.jsxs("div",{className:"flex justify-between mb-1 gap-4",children:[r.jsx("span",{className:"text-slate-500 font-bold",children:"Date:"}),r.jsx(f,{value:n.invoiceDate,placeholder:"DD/MM/YYYY"})]}),r.jsxs("div",{className:"flex justify-between mb-1 gap-4",children:[r.jsx("span",{className:"text-slate-500 font-bold",children:"Due Date:"}),r.jsx(f,{value:n.dueDate,placeholder:"DD/MM/YYYY"})]}),r.jsxs("div",{className:"flex justify-between gap-4",children:[r.jsx("span",{className:"text-slate-500 font-bold",children:"Place of Supply:"}),r.jsx(f,{value:n.placeOfSupply,placeholder:"State"})]})]})]})]})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("p",{className:"text-xs uppercase font-bold text-slate-400 mb-1",children:"Bill To"}),r.jsx("div",{className:"text-lg font-bold",children:r.jsx(f,{value:n.clientName,placeholder:"[Client Name]"})}),r.jsx("div",{className:"text-slate-600 max-w-[300px] whitespace-pre-wrap",children:r.jsx(f,{value:n.clientAddress,placeholder:"[Client Address]"})}),n.clientTaxId&&r.jsxs("div",{className:"mt-1 text-sm",children:[r.jsx("span",{className:"font-semibold",children:"GSTIN/Tax ID:"})," ",n.clientTaxId]})]}),r.jsx("div",{className:"mb-8",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-slate-800 text-white uppercase text-xs",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2 text-left w-12",children:"Sr."}),r.jsx("th",{className:"px-3 py-2 text-left",children:"Description"}),r.jsx("th",{className:"px-3 py-2 text-center w-20",children:"Qty"}),r.jsx("th",{className:"px-3 py-2 text-right w-24",children:"Rate"}),r.jsx("th",{className:"px-3 py-2 text-right w-32",children:"Amount"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200 border-b border-slate-200",children:n.items.map((x,w)=>r.jsxs("tr",{className:"even:bg-slate-50",children:[r.jsx("td",{className:"px-3 py-2 text-slate-500",children:w+1}),r.jsx("td",{className:"px-3 py-2 font-medium",children:x.description}),r.jsx("td",{className:"px-3 py-2 text-center",children:x.quantity}),r.jsx("td",{className:"px-3 py-2 text-right",children:Number(x.rate).toLocaleString()}),r.jsx("td",{className:"px-3 py-2 text-right font-bold",children:Number(x.amount).toLocaleString()})]},w))})]})}),s?r.jsx("table",{style:{width:"100%",marginBottom:"20px"},children:r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{style:{width:"50%"}})," ",r.jsx("td",{style:{width:"50%"},children:r.jsx("table",{className:"w-full text-sm",children:r.jsxs("tbody",{className:"divide-y divide-slate-100",children:[r.jsxs("tr",{children:[r.jsx("td",{className:"py-2 text-slate-600 font-medium",children:"Subtotal"}),r.jsx("td",{className:"py-2 text-right font-bold",children:e.subtotal.toLocaleString()})]}),n.taxType&&Number(n.taxRate)>0&&r.jsxs("tr",{children:[r.jsxs("td",{className:"py-2 text-slate-600 font-medium",children:[n.taxType," (",n.taxRate,"%)"]}),r.jsx("td",{className:"py-2 text-right font-bold",children:e.taxAmount.toLocaleString()})]}),r.jsxs("tr",{className:"border-t-2 border-slate-800 text-base",children:[r.jsx("td",{className:"py-2 font-extrabold text-slate-900",children:"Total"}),r.jsx("td",{className:"py-2 text-right font-extrabold text-indigo-700",children:e.grandTotal.toLocaleString()})]})]})})})]}),r.jsxs("tr",{children:[r.jsx("td",{style:{width:"50%"}}),r.jsxs("td",{style:{width:"50%",textAlign:"right",fontSize:"10px",fontStyle:"italic",color:"#64748b"},children:["Amount in Words: ",r.jsx("span",{className:"font-semibold text-slate-700",children:e.amountInWords})]})]})]})}):r.jsx("div",{className:"flex justify-end mb-8 break-inside-avoid",children:r.jsxs("div",{className:"w-[300px]",children:[r.jsx("table",{className:"w-full text-sm",children:r.jsxs("tbody",{className:"divide-y divide-slate-100",children:[r.jsxs("tr",{children:[r.jsx("td",{className:"py-2 text-slate-600 font-medium",children:"Subtotal"}),r.jsx("td",{className:"py-2 text-right font-bold",children:e.subtotal.toLocaleString()})]}),n.taxType&&Number(n.taxRate)>0&&r.jsxs("tr",{children:[r.jsxs("td",{className:"py-2 text-slate-600 font-medium",children:[n.taxType," (",n.taxRate,"%)"]}),r.jsx("td",{className:"py-2 text-right font-bold",children:e.taxAmount.toLocaleString()})]}),r.jsxs("tr",{className:"border-t-2 border-slate-800 text-base",children:[r.jsx("td",{className:"py-2 font-extrabold text-slate-900",children:"Total"}),r.jsx("td",{className:"py-2 text-right font-extrabold text-indigo-700",children:e.grandTotal.toLocaleString()})]})]})}),r.jsxs("div",{className:"mt-2 text-right text-xs text-slate-500 italic border-t border-slate-100 pt-1",children:["Amount in Words: ",r.jsx("span",{className:"font-semibold text-slate-700",children:e.amountInWords})]})]})}),s?r.jsx("div",{className:"mt-4 pt-4 border-t border-slate-200",style:{breakInside:"avoid"},children:r.jsx("table",{style:{width:"100%"},children:r.jsx("tbody",{children:r.jsxs("tr",{children:[r.jsxs("td",{style:{verticalAlign:"top",width:"60%"},children:[r.jsx("p",{className:"font-bold uppercase text-xs text-slate-400 mb-2",children:"Bank Details"}),r.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-100",style:{fontSize:"12px"},children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-semibold",children:"Account Name:"})," ",n.accountName||"-"]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-semibold",children:"Bank Name:"})," ",n.bankName||"-"]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-semibold",children:"Account No.:"})," ",n.accountNumber||"-"]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-semibold",children:"IFSC/SWIFT:"})," ",n.ifscCode||"-"]})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("p",{className:"font-bold uppercase text-xs text-slate-400 mb-1",children:"Terms"}),r.jsx("p",{className:"text-xs text-slate-500",children:n.notes})]})]}),r.jsxs("td",{style:{verticalAlign:"bottom",width:"40%",textAlign:"right"},children:[r.jsxs("p",{className:"font-bold text-sm text-slate-900 mb-4",children:["For ",n.sellerName||"[Company Name]"]}),r.jsx("table",{style:{width:"100%"},children:r.jsx("tbody",{children:r.jsx("tr",{children:r.jsxs("td",{style:{borderTop:"1px solid #94a3b8",paddingTop:"8px",textAlign:"center"},children:[r.jsx("p",{className:"font-bold",children:n.signatoryName||"Authorized Signatory"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Authorized Signature"})]})})})})]})]})})})}):r.jsxs("div",{className:"mt-auto grid grid-cols-2 gap-12 border-t border-slate-200 pt-8 break-inside-avoid",children:[r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"font-bold uppercase text-xs text-slate-400 mb-2",children:"Bank Details"}),r.jsx("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-100",children:r.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-1 text-slate-700",children:[r.jsx("span",{className:"font-semibold",children:"Account Name:"})," ",r.jsx("span",{children:n.accountName||"-"}),r.jsx("span",{className:"font-semibold",children:"Bank Name:"})," ",r.jsx("span",{children:n.bankName||"-"}),r.jsx("span",{className:"font-semibold",children:"Account No.:"})," ",r.jsx("span",{className:"font-mono",children:n.accountNumber||"-"}),r.jsx("span",{className:"font-semibold",children:"IFSC/SWIFT:"})," ",r.jsx("span",{className:"font-mono",children:n.ifscCode||"-"})]})}),r.jsxs("div",{className:"mt-4",children:[r.jsx("p",{className:"font-bold uppercase text-xs text-slate-400 mb-1",children:"Terms"}),r.jsx("p",{className:"text-xs text-slate-500",children:n.notes})]})]}),r.jsxs("div",{className:"text-right flex flex-col items-end",children:[r.jsxs("p",{className:"font-bold text-sm text-slate-900 mb-16",children:["For ",n.sellerName||"[Company Name]"]}),r.jsxs("div",{className:"border-t border-slate-400 w-48 pt-2 text-center",children:[r.jsx("p",{className:"font-bold",children:n.signatoryName||"Authorized Signatory"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Authorized Signature"})]})]})]}),!s&&r.jsx("div",{className:"mt-8 pt-4 text-center border-t border-transparent",children:r.jsx("p",{className:"text-[9px] text-slate-300 uppercase tracking-widest font-sans",children:"Powered by DocForge"})})]})]})}const aj=()=>{const n=yi(),{id:e}=vd(),t=Ym("(min-width: 1024px)"),[s,i]=R.useState("edit"),[a,o]=R.useState(1),[c,u]=R.useState(!1),[h,f]=R.useState("Untitled Invoice"),[g,x]=R.useState(!1),[w,A]=R.useState(null),C=gt.useRef(null),[E,T]=R.useState({invoiceTitle:"INVOICE",invoiceNumber:"",invoiceDate:new Date().toLocaleDateString(),dueDate:new Date(Date.now()+360*60*60*1e3).toLocaleDateString(),placeOfSupply:"State/Country",logoSize:60,logoAlignment:"left",brandingEnabled:!0,sellerName:"",sellerAddress:"",sellerTaxId:"",sellerEmail:"",sellerPhone:"",clientName:"",clientAddress:"",clientTaxId:"",items:[{description:"Web Development Services",quantity:1,rate:5e3,amount:5e3}],taxType:"GST",taxRate:18,accountName:"",bankName:"",accountNumber:"",ifscCode:"",notes:"This invoice is generated electronically and does not require a physical signature.",disputeDays:"7",signatoryName:""}),[D,M]=R.useState({subtotal:0,taxAmount:0,grandTotal:0,amountInWords:"Zero Only"}),{styles:L,updateStyle:I,resetStyles:W}=G0(),V=gt.useDeferredValue(E),Y=gt.useDeferredValue(D);R.useEffect(()=>{e&&K(e)},[e]);const K=async He=>{try{const Je=await B0(He);Je.data.name&&f(Je.data.name),Je.data.sent_at&&Nt(Je.data.sent_at);let Ie=Je.data.content||{};if(typeof Ie=="string")try{Ie=JSON.parse(Ie)}catch(tt){console.error(tt)}Ie.formData&&T(tt=>({...tt,...Ie.formData})),Ie.styles&&Object.entries(Ie.styles).forEach(([tt,De])=>I(tt,De))}catch(Je){console.error("Failed to load invoice",Je)}};R.useEffect(()=>{if(!e){const He=async()=>{try{const Ie=await vr();Ie&&T(tt=>({...tt,sellerName:Ie.name||"",sellerAddress:[Ie.address,Ie.city,Ie.state,Ie.country,Ie.zip].filter(Boolean).join(", "),sellerEmail:Ie.email||"",sellerPhone:Ie.phone||"",taxType:Ie.tax_label||"Tax",taxRate:Ie.tax_percentage||0,businessLogo:Ie.logo||null,currencySymbol:Ie.currency_symbol||"$"}))}catch(Ie){console.error("Failed to load business details",Ie)}},Je=async()=>{try{const Ie=await rZ();Ie&&Ie.next_number&&(T(tt=>({...tt,invoiceNumber:Ie.next_number})),f(`Invoice #${Ie.next_number}`))}catch(Ie){console.error("Failed to fetch next invoice number",Ie),T(tt=>({...tt,invoiceNumber:"INV-0001"})),f("Invoice #INV-0001")}};He(),Je()}},[e]),R.useEffect(()=>{const He=E.items.reduce((tt,De)=>tt+(Number(De.amount)||0),0),Je=He*Number(E.taxRate)/100,Ie=He+Je;M({subtotal:He,taxAmount:Je,grandTotal:Ie,amountInWords:`${Ie.toLocaleString()} Only`})},[E.items,E.taxRate]);const q=He=>{const{name:Je,value:Ie}=He.target;T(tt=>({...tt,[Je]:Ie})),Je==="invoiceNumber"&&f(`Invoice #${Ie}`)},ne=(He,Je,Ie)=>{const tt=[...E.items];if(tt[He][Je]=Ie,Je==="quantity"||Je==="rate"){const De=Number(Je==="quantity"?Ie:tt[He].quantity)||0,Fe=Number(Je==="rate"?Ie:tt[He].rate)||0;tt[He].amount=De*Fe}T(De=>({...De,items:tt}))},le=()=>{T(He=>({...He,items:[...He.items,{description:"",quantity:1,rate:0,amount:0}]}))},_e=He=>{E.items.length<=1||T(Je=>({...Je,items:Je.items.filter((Ie,tt)=>tt!==He)}))},xe=()=>n("/documents"),je=()=>o(He=>Math.min(He+.1,1.5)),U=()=>o(He=>Math.max(He-.1,.5)),H=async()=>{u(!0);try{const He={name:`Invoice #${E.invoiceNumber}`||"Untitled Invoice",type_slug:"invoice",content:{formData:E,styles:L},status:"draft"};if(e)await U0(e,He),Be.success("Invoice updated successfully");else{const Je=await H0(He);Be.success("Invoice created successfully"),n(`/documents/invoice/${Je.data.id}`,{replace:!0})}}catch(He){console.error("Failed to save",He),Be.error("Failed to save invoice")}finally{setTimeout(()=>u(!1),500)}},[ee,he]=R.useState(!1),ce=gt.useRef(null),[G,ue]=R.useState(null),Se=async He=>{try{if(He&&He.includes("/storage/")){const tt=`http://localhost:8000/api/v1/file-proxy?path=${encodeURIComponent(He)}`,Fe=await(await fetch(tt)).blob();return new Promise(($e,nt)=>{const qe=new FileReader;qe.onloadend=()=>$e(qe.result),qe.onerror=nt,qe.readAsDataURL(Fe)})}const Ie=await(await fetch(He)).blob();return new Promise((tt,De)=>{const Fe=new FileReader;Fe.onloadend=()=>tt(Fe.result),Fe.onerror=De,Fe.readAsDataURL(Ie)})}catch(Je){return console.error("Failed to convert image to base64",Je),null}},fe=async()=>{if(!e){Be.error("Please save the document before printing.");return}const He=JSON.stringify({formData:E,totals:D});if(G&&ce.current===He){window.open(G,"_blank");return}he(!0);try{let Je=E.businessLogo;if(E.businessLogo&&!E.businessLogo.startsWith("data:")){const Fe=await Se(E.businessLogo);Fe&&(Je=Fe)}const Ie={...E,businessLogo:Je},tt=pl.renderToStaticMarkup(r.jsx(Ih,{data:Ie,totals:D,zoom:1,printing:!0,styles:L})),De=await Ya(e,tt,E.invoiceNumber?`Invoice #${E.invoiceNumber}`:"Invoice");De.url&&(ue(De.url),ce.current=He,window.open(De.url,"_blank"))}catch(Je){console.error("PDF Generation failed",Je),Be.error("Failed to generate PDF")}finally{he(!1)}},[Ae,Pe]=R.useState(!1),[Ve,Nt]=R.useState(null),ht=()=>{if(!e){Be.error("Please save the document before sending.");return}Pe(!0)},mt=He=>{He&&He.sent_at&&Nt(He.sent_at)},[Qe,Kt]=R.useState(!1),Ke=async()=>{if(!e){Be.error("Please save the document before exporting.");return}Kt(!0);try{let He=E.businessLogo;if(E.businessLogo&&!E.businessLogo.startsWith("data:")){const De=await Se(E.businessLogo);De&&(He=De)}const Je={...E,businessLogo:He},Ie=pl.renderToStaticMarkup(r.jsx(Ih,{data:Je,totals:D,zoom:1,printing:!0})),tt=await Ya(e,Ie,E.invoiceNumber?`Invoice #${E.invoiceNumber}`:"Invoice");if(tt.url){const De=document.createElement("a");De.href=tt.url,De.download=`${(E.invoiceNumber?`Invoice_${E.invoiceNumber}`:"Invoice").replace(/[^a-z0-9]/gi,"_")}.pdf`,document.body.appendChild(De),De.click(),document.body.removeChild(De),Be.success("Invoice exported successfully")}}catch(He){console.error("Export failed",He),Be.error("Failed to export invoice")}finally{Kt(!1)}},at=He=>{C.current||(C.current={formData:E});let Je=He.content;if(typeof Je=="string")try{Je=JSON.parse(Je)}catch{}Je.formData&&T(Je.formData),A(He),x(!1),Be.success(`Previewing Version ${He.version_number}`)},ft=()=>{C.current&&(T(C.current.formData),C.current=null),A(null),Be.success("Exited preview mode")},Gt=async He=>{const Je=Be.loading("Preparing version PDF...");try{let Ie=He.content;if(typeof Ie=="string")try{Ie=JSON.parse(Ie)}catch{}const tt=Ie.formData||E,De=(tt.items||[]).reduce((un,an)=>un+(Number(an.amount)||0),0),Fe=De*Number(tt.taxRate)/100,$e=De+Fe,nt={subtotal:De,taxAmount:Fe,grandTotal:$e,amountInWords:`${$e.toLocaleString()} Only`},qe=pl.renderToStaticMarkup(r.jsx(Ih,{data:tt,totals:nt,zoom:1,printing:!0})),St=await Ya(e,qe,`${h} - v${He.version_number}`);if(St.url){const un=document.createElement("a");un.href=St.url,un.download=`${h.replace(/[^a-z0-9]/gi,"_")}_v${He.version_number}.pdf`,document.body.appendChild(un),un.click(),document.body.removeChild(un),Be.success(`Version ${He.version_number} downloaded`,{id:Je})}}catch(Ie){console.error("Version download failed",Ie),Be.error("Failed to download version PDF",{id:Je})}};return r.jsxs("div",{className:"flex flex-col h-screen bg-slate-50",children:[w&&r.jsxs("div",{className:"bg-amber-100 border-b border-amber-200 px-4 py-2 flex items-center justify-between text-amber-800 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jo,{size:16}),r.jsxs("span",{className:"font-medium",children:["Previewing Version ",w.version_number]}),r.jsxs("span",{className:"text-amber-600 hidden md:inline",children:["(",new Date(w.created_at).toLocaleString(),")"]})]}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs("button",{onClick:ft,className:"text-amber-700 hover:text-amber-900 font-medium hover:underline flex items-center gap-1",children:[r.jsx(ja,{size:14})," Exit Preview"]})})]}),ee&&r.jsx(T5,{children:r.jsx(Ih,{data:E,totals:D,zoom:1})}),r.jsx(W0,{isOpen:Ae,onClose:()=>Pe(!1),documentId:e,documentName:`Invoice #${E.invoiceNumber}`,isReminder:!!Ve,onSuccess:mt,getHtmlContent:async()=>{let He=E.businessLogo;if(E.businessLogo&&!E.businessLogo.startsWith("data:")){const tt=await Se(E.businessLogo);tt&&(He=tt)}const Je={...E,businessLogo:He},Ie=pl.renderToStaticMarkup(r.jsx(Ih,{data:Je,totals:D,zoom:1,printing:!0}));return iN(Ie,`Invoice #${E.invoiceNumber}`)}}),r.jsxs("header",{className:"no-print h-16 bg-white/80 backdrop-blur-md border-b border-slate-200/60 px-4 md:px-6 flex items-center justify-between sticky top-0 z-30 shadow-sm transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center gap-2 md:gap-4 overflow-hidden",children:[r.jsx("button",{onClick:xe,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors flex-shrink-0",title:"Back to Documents",children:r.jsx(vl,{size:20})}),r.jsxs("div",{className:"min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h1",{className:"font-bold text-slate-800 text-sm md:text-lg truncate",children:"Service Invoice"}),Ve&&r.jsxs("span",{className:"hidden lg:inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-emerald-50 text-emerald-600 text-[10px] font-medium border border-emerald-100",children:[r.jsx(ii,{size:10})," Sent"]})]}),r.jsxs("p",{className:"text-[10px] md:text-xs text-slate-400 font-medium whitespace-nowrap hidden sm:block",children:["#",E.invoiceNumber]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[r.jsxs("div",{className:"hidden lg:flex items-center bg-slate-100 rounded-lg p-1 mr-4",children:[r.jsx("button",{onClick:U,className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-slate-500 transition-all",children:r.jsx(Um,{size:16})}),r.jsxs("span",{className:"text-xs font-semibold text-slate-600 w-12 text-center",children:[Math.round(a*100),"%"]}),r.jsx("button",{onClick:je,className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-slate-500 transition-all",children:r.jsx(Hm,{size:16})})]}),r.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 p-2 md:px-4 md:py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all",children:[r.jsx(Xa,{size:18}),r.jsx("span",{className:"hidden lg:inline",children:"History"})]}),r.jsxs("button",{onClick:fe,className:"hidden md:flex items-center gap-2 p-2 md:px-4 md:py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all",children:[r.jsx(tf,{size:18}),r.jsx("span",{className:"hidden lg:inline",children:"Print"})]}),r.jsxs("button",{onClick:ht,className:`flex items-center gap-2 px-2 md:px-4 py-2 text-sm font-medium rounded-lg border border-transparent transition-all ${Ve?"text-amber-600 hover:bg-amber-50 hover:border-amber-200":"text-slate-600 hover:bg-slate-50 hover:border-slate-200"}`,children:[Ve?r.jsx(wc,{size:18}):r.jsx(ri,{size:18}),r.jsx("span",{className:"hidden lg:inline",children:Ve?"Remind":"Send"})]}),r.jsxs("button",{onClick:Ke,disabled:Qe,className:"flex items-center gap-2 px-2 md:px-4 py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all disabled:opacity-50",children:[Qe?r.jsx(gs,{size:18,className:"animate-spin"}):r.jsx(wl,{size:18}),r.jsx("span",{className:"hidden lg:inline",children:Qe?"Exporting...":"Export"})]}),r.jsxs("button",{onClick:H,className:`flex items-center gap-2 px-3 md:px-5 py-2 rounded-lg text-white font-medium shadow-md transition-all ${c?"bg-emerald-500":"bg-indigo-600 hover:bg-indigo-700"}`,children:[c?r.jsx(ii,{size:18}):r.jsx(Sl,{size:18}),r.jsx("span",{className:"hidden md:inline",children:c?"Saved!":"Save"})]})]})]}),!t&&r.jsxs("div",{className:"flex bg-white border-b border-slate-200 px-4",children:[r.jsx("button",{onClick:()=>i("edit"),className:`flex-1 py-3 text-sm font-medium border-b-2 transition-colors ${s==="edit"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Edit"}),r.jsx("button",{onClick:()=>i("preview"),className:`flex-1 py-3 text-sm font-medium border-b-2 transition-colors ${s==="preview"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Preview"})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row flex-1 overflow-hidden relative",children:[r.jsx("div",{className:`
                    no-print w-full lg:w-[400px] h-full bg-white border-b lg:border-b-0 lg:border-r border-slate-200 
                    overflow-y-auto z-20 shadow-sm flex-shrink-0 lg:order-1
                    ${t||s==="edit"?"block":"hidden"}
                `,children:r.jsx(wZ,{formData:E,onChange:q,updateItem:ne,addItem:le,removeItem:_e,totals:D,styles:L,onStyleUpdate:I,onStyleReset:W})}),r.jsx("div",{className:`
                    flex-1 h-full overflow-y-auto bg-slate-50/50 p-4 md:p-8 sm:p-12 
                    flex justify-center items-start scrollbar-thin scrollbar-thumb-slate-300 lg:order-2
                    ${t||s==="preview"?"flex":"hidden"}
                `,style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"20px 20px"},children:r.jsx(Ih,{data:V,totals:Y,zoom:a,styles:L})})]}),r.jsx(V0,{documentId:e,isOpen:g,onClose:()=>x(!1),onPreview:at,onDownload:Gt,onRestore:He=>{if(He&&He.content){let Je=He.content;if(typeof Je=="string")try{Je=JSON.parse(Je)}catch{}Je.formData&&T(Je.formData)}A(null),C.current=null}})]})},SZ=({formData:n,onChange:e,docContent:t,onContentChange:s,addSection:i,removeSection:a,updateSection:o,reorderSections:c,styles:u,onStyleUpdate:h,onStyleReset:f})=>{const[g,x]=R.useState("parties"),[w,A]=R.useState("fill"),[C,E]=R.useState({isOpen:!1,sectionId:null}),T=K=>{x(g===K?null:K)},D=n.effectiveDateDay&&n.effectiveDateMonth&&n.effectiveDateYear,M=n.employerName&&n.candidateName,L=n.position&&n.startDate&&n.salary,I=n.employerSignatoryName,W=K=>{E({isOpen:!0,sectionId:K})},V=()=>{C.sectionId&&(a(C.sectionId),E({isOpen:!1,sectionId:null}))},Y=async()=>{try{const K=await vr();if(K){e({target:{name:"employerName",value:K.name||""}});const q=[K.address,K.city,K.state,K.country].filter(Boolean).join(", ");e({target:{name:"employerAddress",value:q||""}}),Be.success("Business details populated")}else Be.error("No business profile found")}catch(K){console.error("Failed to fetch business info",K),Be.error("Failed to load business info")}};return r.jsxs("div",{className:"bg-white min-h-full pb-20 relative",children:[r.jsx(ov,{isOpen:C.isOpen,onClose:()=>E({isOpen:!1,sectionId:null}),onConfirm:V,title:"Delete Section",message:"Are you sure you want to remove this section? This action cannot be undone.",confirmText:"Delete Section",isDestructive:!0}),r.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 sticky top-0 z-10 backdrop-blur-sm",children:[r.jsxs("div",{className:"flex gap-1 bg-slate-200/50 p-1 rounded-lg mb-4",children:[r.jsx("button",{onClick:()=>A("fill"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${w==="fill"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,children:r.jsx(j0,{size:16})}),r.jsx("button",{onClick:()=>A("edit"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${w==="edit"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,title:"Structure",children:r.jsx(k0,{size:16})}),r.jsx("button",{onClick:()=>A("style"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${w==="style"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,title:"Appearance",children:r.jsx(uf,{size:16})})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold text-slate-900",children:w==="fill"?"Offer Letter Details":w==="edit"?"Structure Builder":"Styling & Appearance"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:w==="fill"?"Enter candidate and job details":w==="edit"?"Customize letter layout":"Fonts, colors and spacing"})]})]}),w==="fill"&&r.jsxs(r.Fragment,{children:[r.jsx(Aa,{title:"Letter Date",icon:Gu,isOpen:g==="date",isComplete:D,onClick:()=>T("date"),children:r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsx(Ot,{label:"Day",name:"effectiveDateDay",value:n.effectiveDateDay,onChange:e,placeholder:"DD"}),r.jsx(Ot,{label:"Month",name:"effectiveDateMonth",value:n.effectiveDateMonth,onChange:e,placeholder:"Month"}),r.jsx(Ot,{label:"Year",name:"effectiveDateYear",value:n.effectiveDateYear,onChange:e,placeholder:"YY"})]})}),r.jsx(Aa,{title:"Parties Involved",icon:Mo,isOpen:g==="parties",isComplete:M,onClick:()=>T("parties"),children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-3 bg-indigo-50 rounded-lg border border-indigo-100",children:[r.jsxs("h4",{className:"text-xs font-bold text-indigo-900 uppercase mb-3 flex items-center justify-between",children:[r.jsx("span",{className:"flex items-center gap-2",children:"Employer"}),r.jsxs("button",{onClick:Y,className:"text-[10px] bg-white border border-indigo-200 text-indigo-600 px-2 py-1 rounded hover:bg-indigo-50 transition-colors flex items-center gap-1",children:[r.jsx(wd,{size:10})," Use Profile"]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Ot,{label:"Company Name",name:"employerName",value:n.employerName,onChange:e,placeholder:"Acme Inc."}),r.jsx(Ot,{label:"Full Address",name:"employerAddress",value:n.employerAddress,onChange:e,placeholder:"Standard Address",rows:2})]})]}),r.jsxs("div",{className:"p-3 bg-emerald-50 rounded-lg border border-emerald-100",children:[r.jsx("h4",{className:"text-xs font-bold text-emerald-900 uppercase mb-3",children:"Candidate"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Ot,{label:"Candidate Name",name:"candidateName",value:n.candidateName,onChange:e,placeholder:"John Doe"}),r.jsx(Ot,{label:"Current Address",name:"candidateAddress",value:n.candidateAddress,onChange:e,placeholder:"Candidate Address",rows:2})]})]})]})}),r.jsx(Aa,{title:"Position Details",icon:_0,isOpen:g==="position",isComplete:L,onClick:()=>T("position"),children:r.jsxs("div",{className:"space-y-3",children:[r.jsx(Ot,{label:"Job Title",name:"position",value:n.position,onChange:e,placeholder:"Senior Developer"}),r.jsx(Ot,{label:"Reports To",name:"managerName",value:n.managerName,onChange:e,placeholder:"CTO"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Ot,{label:"Start Date",name:"startDate",value:n.startDate,onChange:e,placeholder:"Jan 1, 2026"}),r.jsx(Ot,{label:"Salary",name:"salary",value:n.salary,onChange:e,placeholder:"$120,000"})]})]})}),r.jsx(Aa,{title:"Document Branding",icon:lf,isOpen:g==="branding",isComplete:!0,onClick:()=>T("branding"),children:r.jsx(I0,{formData:n,onChange:e})}),r.jsx(Aa,{title:"Signatories",icon:cf,isOpen:g==="signatures",isComplete:I,onClick:()=>T("signatures"),children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-bold text-slate-400 mb-2 uppercase",children:"For Employer"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Ot,{label:"Name",name:"employerSignatoryName",value:n.employerSignatoryName,onChange:e,placeholder:"Hiring Manager"}),r.jsx(Ot,{label:"Title",name:"employerSignatoryTitle",value:n.employerSignatoryTitle,onChange:e,placeholder:"HR Director"})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-bold text-slate-400 mb-2 uppercase",children:"For Candidate"}),r.jsxs("div",{className:"p-2 bg-slate-50 text-slate-500 text-xs rounded border border-slate-100",children:["Candidate Name will be used for signature block: ",r.jsx("strong",{children:n.candidateName||"(Enter Candidate Name)"})]})]})]})})]}),w==="edit"&&r.jsxs("div",{className:"p-4 space-y-6 pb-20",children:[r.jsx(sf,{isFixed:!0,section:{title:"Letter Header"},onUpdate:()=>{},children:r.jsx("div",{className:"space-y-3 mt-3",children:r.jsx("textarea",{name:"partiesDisclosing",value:t.partiesDisclosing||"",onChange:s,rows:3,className:"w-full text-xs p-3 rounded-lg border border-slate-200 bg-slate-50 resize-y",placeholder:"Recipient Address Block..."})})}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute left-[7px] top-[-24px] bottom-0 w-[2px] bg-slate-100"}),r.jsx("p",{className:"font-bold text-[10px] uppercase tracking-widest text-slate-400 pl-8 mb-4",children:"Body Sections"}),r.jsx(zy,{axis:"y",values:t.sections,onReorder:c,className:"space-y-0",children:t.sections.map(K=>r.jsx(Iy,{value:K,className:"relative mb-2",children:r.jsx(sf,{section:K,onUpdate:(q,ne)=>o(K.id,q,ne),onRemove:()=>W(K.id),placeholderTitle:"Section Title",placeholderContent:"Body text..."})},K.id))}),r.jsx(av,{onClick:i})]})]}),w==="style"&&r.jsx("div",{className:"p-4 pb-20",children:r.jsx(rv,{styles:u,onUpdate:h,onReset:f})})]})};function y2({data:n,content:e,zoom:t=1,printing:s=!1,readOnly:i=!1,signatures:a=[],onUpdateSignature:o,onRemoveSignature:c,onEditSignature:u,businessLogo:h,styles:f}){const g=T=>{if(!T)return"bg-slate-100 text-slate-600 border-slate-200";const D=["bg-indigo-50 text-indigo-700 border-indigo-200","bg-emerald-50 text-emerald-700 border-emerald-200","bg-amber-50 text-amber-700 border-amber-200","bg-rose-50 text-rose-700 border-rose-200","bg-violet-50 text-violet-700 border-violet-200","bg-sky-50 text-sky-700 border-sky-200"];let M=0;for(let L=0;L<T.length;L++)M=T.charCodeAt(L)+((M<<5)-M);return D[Math.abs(M)%D.length]},x=({value:T,placeholder:D,name:M,className:L=""})=>{const I=g(M);return T?i||s?r.jsx("span",{className:`font-medium text-slate-900 ${L}`,children:T}):r.jsx("span",{className:`px-1.5 py-0.5 rounded border ${I} font-medium mx-0.5 transition-all hover:brightness-95 ${L}`,children:T}):i||s?r.jsx("span",{className:`text-slate-500 italic ${L}`,children:D}):r.jsx("span",{className:`px-1.5 py-0.5 rounded border border-dashed ${I} bg-opacity-50 font-medium text-xs mx-0.5 ${L}`,children:D})},w=({template:T,values:D})=>{if(!T)return null;const M=T.split(/(\{\{[^}]+\}\})/g);return r.jsx("span",{children:M.map((L,I)=>{if(L.startsWith("{{")&&L.endsWith("}}")){const W=L.slice(2,-2).trim(),V=D[W];return W.toLowerCase().includes("address")&&V?r.jsx("span",{className:"whitespace-pre-line",children:r.jsx(x,{value:V,name:W,placeholder:`[${W}]`})},I):r.jsx(x,{value:D[W],name:W,placeholder:`[${W}]`},I)}return r.jsx("span",{children:L},I)})})},A=s?"div":ze.div,C=s?"div":ze.section,E=f||{fontFamily:"font-sans",fontSize:"text-[11pt]",lineHeight:"leading-relaxed",textColor:"#1e293b",headingColor:"#0f172a",pageMargin:"p-[10mm]",paragraphSpacing:"mb-6"};return r.jsxs(A,{id:"printable-document",...s?{}:{initial:{opacity:0,y:20},animate:{opacity:1,y:0}},style:{transform:s?"none":`scale(${t})`,transformOrigin:"top center",color:E.textColor},className:`
                w-[210mm] min-h-[297mm] bg-white relative mb-20 origin-top 
                ${s?"":"shadow-[0_8px_30px_rgb(0,0,0,0.12)] border border-slate-200/60"}
                ${E.fontFamily} ${E.fontSize} ${E.lineHeight}
            `,children:[!s&&r.jsx("div",{className:"no-print absolute inset-0 rounded-sm pointer-events-none bg-gradient-to-b from-white to-slate-50/20"}),r.jsxs("div",{className:`${E.pageMargin} relative z-10`,children:[h&&n.brandingEnabled!==!1&&n.brandingEnabled!=="false"&&r.jsx("div",{className:`flex mb-8 ${n.logoAlignment==="left"?"justify-start":n.logoAlignment==="right"?"justify-end":"justify-center"}`,style:s?{textAlign:n.logoAlignment||"center"}:{},children:r.jsx("img",{src:h,alt:"Company Logo",style:{height:`${n.logoSize||70}px`,objectFit:"contain"}})})," ",r.jsxs("div",{className:"mb-8",children:[r.jsx("p",{className:`font-medium ${E.paragraphSpacing}`,children:r.jsx(w,{template:e.preamble,values:n})}),r.jsx("div",{className:`whitespace-pre-line ${E.paragraphSpacing}`,children:r.jsx(w,{template:e.partiesDisclosing,values:n})}),r.jsx("p",{className:`${E.paragraphSpacing}`,children:r.jsx(w,{template:e.partiesFooter,values:n})})]}),r.jsx("div",{className:`text-justify ${E.paragraphSpacing}`}),r.jsx("div",{className:"space-y-6 min-h-[100px]",children:r.jsx(Zn,{mode:"popLayout",children:e.sections&&e.sections.map((T,D)=>r.jsxs(C,{className:E.paragraphSpacing,...s?{}:{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95}},children:[r.jsx("h2",{className:"font-bold text-sm uppercase mb-2",style:{color:E.headingColor},children:T.title}),r.jsx("p",{className:"text-justify",children:r.jsx(w,{template:T.content,values:n})})]},T.id))})}),r.jsxs("div",{className:"mt-12 break-inside-avoid",children:[r.jsx("p",{className:"mb-8",children:"Sincerely,"}),s?r.jsx("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"20px"},children:r.jsx("tbody",{children:r.jsxs("tr",{children:[r.jsxs("td",{style:{width:"48%",verticalAlign:"top",paddingRight:"2%"},children:[r.jsxs("p",{className:"font-bold uppercase text-xs tracking-wider mb-8",children:["For ",n.employerName||"The Company"]}),r.jsx("div",{className:"relative border-b border-slate-800 h-8 mb-2",style:{borderBottom:"1px solid #000",height:"40px",marginBottom:"10px"},children:n.employerSignatoryName&&r.jsx("span",{style:{fontFamily:"cursive",fontSize:"16pt",color:"#1e3a8a"},children:n.employerSignatoryName})}),r.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Authorized Signature"}),r.jsx("table",{style:{width:"100%",marginTop:"15px"},children:r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{style:{width:"60px",fontWeight:"bold",fontSize:"10pt"},children:"Name:"}),r.jsx("td",{style:{borderBottom:"1px solid #ccc"},children:n.employerSignatoryName})]}),r.jsxs("tr",{children:[r.jsx("td",{style:{paddingBottom:"5px"}}),r.jsx("td",{})]}),r.jsxs("tr",{children:[r.jsx("td",{style:{width:"60px",fontWeight:"bold",fontSize:"10pt"},children:"Title:"}),r.jsx("td",{style:{borderBottom:"1px solid #ccc"},children:n.employerSignatoryTitle})]})]})})]}),r.jsx("td",{style:{width:"4%"}}),r.jsxs("td",{style:{width:"48%",verticalAlign:"top"},children:[r.jsx("p",{className:"font-bold uppercase text-xs tracking-wider mb-8",children:"Accepted By"}),r.jsx("div",{className:"relative border-b border-slate-800 h-8 mb-2",style:{borderBottom:"1px solid #000",height:"40px",marginBottom:"10px"},children:n.candidateSignatoryName&&r.jsx("span",{style:{fontFamily:"cursive",fontSize:"16pt",color:"#1e3a8a"},children:n.candidateSignatoryName})}),r.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Candidate Signature"}),r.jsx("table",{style:{width:"100%",marginTop:"15px"},children:r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{style:{width:"60px",fontWeight:"bold",fontSize:"10pt"},children:"Name:"}),r.jsx("td",{style:{borderBottom:"1px solid #ccc"},children:n.candidateName})]}),r.jsxs("tr",{children:[r.jsx("td",{style:{paddingBottom:"5px"}}),r.jsx("td",{})]}),r.jsxs("tr",{children:[r.jsx("td",{style:{width:"60px",fontWeight:"bold",fontSize:"10pt"},children:"Date:"}),r.jsx("td",{style:{borderBottom:"1px solid #ccc"}})]})]})})]})]})})}):r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-16",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs("p",{className:"font-bold uppercase text-xs tracking-wider mb-8",children:["For ",n.employerName||"The Company"]}),r.jsx("div",{className:"relative border-b border-slate-800 h-8 mb-2",children:n.employerSignatoryName&&r.jsx("span",{className:"absolute bottom-1 left-2 font-cursive text-xl text-blue-900 opacity-80 rotate-[-2deg]",children:n.employerSignatoryName})}),r.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Authorized Signature"}),r.jsxs("div",{className:"pt-4 grid grid-cols-[60px_1fr] gap-x-2 gap-y-1 items-baseline",children:[r.jsx("span",{className:"text-sm font-medium",children:"Name:"}),r.jsx("span",{className:"border-b border-slate-300 w-full inline-block h-5 pl-1",children:n.employerSignatoryName}),r.jsx("span",{className:"text-sm font-medium",children:"Title:"}),r.jsx("span",{className:"border-b border-slate-300 w-full inline-block h-5 pl-1",children:n.employerSignatoryTitle})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"font-bold uppercase text-xs tracking-wider mb-8",children:"Accepted By"}),r.jsx("div",{className:"relative border-b border-slate-800 h-8 mb-2",children:n.candidateSignatoryName&&r.jsx("span",{className:"absolute bottom-1 left-2 font-cursive text-xl text-blue-900 opacity-80 rotate-[-2deg]",children:n.candidateSignatoryName})}),r.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Candidate Signature"}),r.jsxs("div",{className:"pt-4 grid grid-cols-[60px_1fr] gap-x-2 gap-y-1 items-baseline",children:[r.jsx("span",{className:"text-sm font-medium",children:"Name:"}),r.jsx("span",{className:"border-b border-slate-300 w-full inline-block h-5 pl-1",children:n.candidateName}),r.jsx("span",{className:"text-sm font-medium",children:"Date:"}),r.jsx("span",{className:"border-b border-slate-300 w-full inline-block h-5 pl-1"})]})]})]})]}),!s&&r.jsx("div",{className:"absolute bottom-4 left-0 right-0 text-center",children:r.jsx("p",{className:"text-[9px] text-slate-300 uppercase tracking-widest font-sans",children:"Powered by DocForge"})})]})]})}const rj={title:"Employment Offer Letter",preamble:"{{effectiveDateDay}} {{effectiveDateMonth}}, 20{{effectiveDateYear}}",partiesDisclosing:`To,
{{candidateName}}
{{candidateAddress}}`,partiesReceiving:"",partiesFooter:"Dear {{candidateName}},",sections:[{id:"1",title:"Welcome",content:'We are pleased to offer you the position of {{position}} at {{employerName}} ("Company"). We believe your skills and experience are an excellent match for our company.'},{id:"2",title:"Position and Duties",content:"You will be working as {{position}}, reporting to {{managerName}}. Your start date will be {{startDate}}. Your primary duties will be those consistent with this position and as assigned by your manager."},{id:"3",title:"Compensation",content:"Your starting salary will be {{salary}} per year, payable in accordance with the Company's standard payroll schedule. This salary is subject to adjustment pursuant to the Company's employee compensation policies."},{id:"4",title:"Benefits",content:"You will be eligible to participate in the Company's standard employee benefit plans, including health insurance, vacation, and 401(k), provided to employees at your level."},{id:"5",title:"At-Will Employment",content:'Your employment with the Company is for no specified period and constitutes "at-will" employment. This means that either you or the Company may terminate the employment relationship at any time, with or without cause or notice.'},{id:"6",title:"Acceptance",content:"To accept this offer, please sign and date this letter below and return it to us by {{expirationDate}}."}]},oj={effectiveDateDay:"",effectiveDateMonth:"",effectiveDateYear:"",logoSize:80,logoAlignment:"left",brandingEnabled:!0,employerName:"",employerAddress:"",candidateName:"",candidateAddress:"",position:"",managerName:"",startDate:"",salary:"",expirationDate:"",employerSignatoryName:"",employerSignatoryTitle:"",candidateSignatoryName:""},NZ=n=>{const[e,t]=R.useState(oj),[s,i]=R.useState(rj),[a,o]=R.useState("Untitled Offer Letter"),[c,u]=R.useState(null),[h,f]=R.useState(!!n),[g,x]=R.useState(!1),{styles:w,updateStyle:A,resetStyles:C}=G0(),E=R.useRef(null);R.useEffect(()=>{(async()=>{if(n)try{f(!0);const H=await B0(n);H.data.name&&o(H.data.name),H.data.sent_at&&u(H.data.sent_at);let ee=H.data?.content||H.content;if(ee){let he=ee;if(typeof he=="string")try{he=JSON.parse(he)}catch(ce){console.error("Failed to parse document content JSON",ce)}he=he||{},t(ce=>({...ce,...he.formData||oj})),i(he.docContent||rj),he.styles&&Object.entries(he.styles).forEach(([ce,G])=>A(ce,G)),he.signatures&&le(he.signatures)}}catch(H){console.error("Failed to load document",H),Be.error("Failed to load document")}finally{f(!1)}else try{const H=await vr();H&&t(ee=>({...ee,employerName:H.name||"",employerAddress:[H.address,H.city,H.state,H.country].filter(Boolean).join(", ")}))}catch(H){console.error("Failed to load business details",H)}})()},[n]);const T=U=>{const{name:H,value:ee}=U.target;t(he=>({...he,[H]:ee}))},D=U=>{const{name:H,value:ee}=U.target;i(he=>({...he,[H]:ee}))},M=()=>{i(U=>({...U,sections:[...U.sections,{id:qm(),title:"New Section",content:"Enter the details of this new clause here..."}]}))},L=U=>{i(H=>({...H,sections:H.sections.filter(ee=>ee.id!==U)}))},I=(U,H,ee)=>{i(he=>({...he,sections:he.sections.map(ce=>ce.id===U?{...ce,[H]:ee}:ce)}))},W=U=>{i(H=>({...H,sections:U}))},V=async U=>{x(!0);try{const ee={name:a,type_slug:"offer-letter",content:{formData:e,docContent:s,styles:w,signatures:ne},status:"draft"};if(n)return await U0(n,ee),Be.success("Document updated successfully"),n;{const he=await H0(ee);return Be.success("Document created successfully"),U&&U(`/documents/offer-letter/${he.data.id}`,{replace:!0}),he.data.id}}catch(H){throw console.error("Failed to save",H),(!H.response||H.response.status!==422)&&Be.error("Failed to save document"),H}finally{setTimeout(()=>x(!1),500)}},Y=U=>{E.current||(E.current={formData:e,docContent:s});let H=U.content;if(typeof H=="string")try{H=JSON.parse(H)}catch{}return H.formData&&t(H.formData),H.docContent&&i(H.docContent),H},K=()=>{E.current&&(t(E.current.formData),i(E.current.docContent),E.current=null)},q=U=>{if(U&&U.content){let H=U.content;if(typeof H=="string")try{H=JSON.parse(H)}catch{}H.formData&&t(H.formData),H.docContent&&i(H.docContent)}E.current=null},[ne,le]=R.useState([]);return{formData:e,docContent:s,signatures:ne,documentName:a,setDocumentName:o,sentAt:c,setSentAt:u,isLoading:h,isSaving:g,handleFormChange:T,handleContentChange:D,addSection:M,removeSection:L,updateSection:I,reorderSections:W,addSignature:U=>{le(H=>[...H,U])},updateSignature:(U,H)=>{le(ee=>ee.map(he=>he.id===U?{...he,...H}:he))},removeSignature:U=>{le(H=>H.filter(ee=>ee.id!==U))},saveDocument:V,enterPreviewMode:Y,exitPreviewMode:K,restoreVersion:q,styles:w,updateStyle:A,resetStyles:C}},hw=(n,e,t="Document",s=[],i=null)=>{const a=pl.renderToStaticMarkup(r.jsx(y2,{data:n,content:e,zoom:1,printing:!0,signatures:s,businessLogo:i}));return`
    <!DOCTYPE html>
    <html>
        <head>
            <meta charset="utf-8">
            <title>${t}</title>
            <style>
                * { box-sizing: border-box; }
                body { 
                    font-family: 'Times New Roman', serif; 
                    line-height: 1.5; 
                    color: #333; 
                    font-size: 11pt; 
                    margin: 0; 
                    padding: 40px; 
                }
                .text-center { text-align: center; }
                .uppercase { text-transform: uppercase; }
                .font-bold { font-weight: bold; }
                .text-sm { font-size: 10pt; }
                .text-xs { font-size: 9pt; }
                .text-justify { text-align: justify; }
                .mb-2 { margin-bottom: 0.5rem; }
                .mb-4 { margin-bottom: 1rem; }
                .mb-6 { margin-bottom: 1.5rem; }
                .mb-8 { margin-bottom: 2rem; }
                .mb-10 { margin-bottom: 2.5rem; }
                .pb-2 { padding-bottom: 0.5rem; }
                .mt-12 { margin-top: 3rem; }
                .border-b { border-bottom: 1px solid #000; }
                .border-b-2 { border-bottom: 2px solid #000; }
                
                @page { margin: 40px; }
                
                h1 { 
                    font-size: 16pt; 
                    text-transform: uppercase; 
                    border-bottom: 2px solid #000; 
                    padding-bottom: 10px; 
                    margin-bottom: 30px; 
                    text-align: center; 
                    font-weight: bold; 
                    letter-spacing: 2px; 
                }
                p { margin-bottom: 12px; }
                
                table { width: 100%; border-collapse: collapse; }
                td { vertical-align: top; }
                
                .font-cursive { font-family: cursive; font-style: italic; }
            </style>
        </head>
        <body>
            ${a}
        </body>
    </html>
    `},lj=()=>{const n=yi(),{id:e}=vd(),t=Ym("(min-width: 1024px)"),[s,i]=R.useState("edit"),[a,o]=R.useState(1),[c,u]=R.useState(!1),[h,f]=R.useState(!1),[g,x]=R.useState(!1),[w,A]=R.useState(!1),[C,E]=R.useState(!1),[T,D]=R.useState(null),[M,L]=R.useState(null),[I,W]=R.useState(null),[V,Y]=R.useState(null),{formData:K,docContent:q,signatures:ne,documentName:le,setDocumentName:_e,sentAt:xe,setSentAt:je,isLoading:U,isSaving:H,handleFormChange:ee,handleContentChange:he,addSection:ce,removeSection:G,updateSection:ue,reorderSections:Se,addSignature:fe,updateSignature:Ae,removeSignature:Pe,saveDocument:Ve,enterPreviewMode:Nt,exitPreviewMode:ht,restoreVersion:mt,styles:Qe,updateStyle:Kt,resetStyles:Ke}=NZ(e),[at,ft]=R.useState({isOpen:!1,data:null}),Gt=gt.useDeferredValue(K),He=gt.useDeferredValue(q),Je=Zm(Nc(Xu,{activationConstraint:{distance:8}}),Nc(ev,{activationConstraint:{delay:250,tolerance:5}})),Ie=gt.useRef(null),tt=()=>n("/documents"),De=()=>o(ie=>Math.min(ie+.1,1.5)),Fe=()=>o(ie=>Math.max(ie-.1,.5)),$e=()=>{const ie=K.candidateName?.trim();ie?(_e(`Offer Letter - ${ie}`),L(null),W(null),Be.success("Generated smart name!")):Be.error("Enter 'Candidate Name' in the form first.")},nt=async ie=>{try{if(ie&&ie.includes("/storage/")){const Ze=`http://localhost:8000/api/v1/file-proxy?path=${encodeURIComponent(ie)}`,st=await(await fetch(Ze)).blob();return new Promise((Ut,rn)=>{const dt=new FileReader;dt.onloadend=()=>Ut(dt.result),dt.onerror=rn,dt.readAsDataURL(st)})}const Ge=await(await fetch(ie)).blob();return new Promise((Ze,pt)=>{const st=new FileReader;st.onloadend=()=>Ze(st.result),st.onerror=pt,st.readAsDataURL(Ge)})}catch(ke){return console.error("Failed to convert image to base64",ke),null}};gt.useEffect(()=>{(async()=>{try{const ke=await vr();ke&&ke.logo&&Y(ke.logo)}catch(ke){console.error("Failed to fetch business logo",ke)}})()},[]);const qe=async()=>{const ie=le?.trim();if(!ie||["Untitled Offer Letter"].includes(ie)){L("Please enter a valid document name."),Ie.current&&Ie.current.focus();return}try{await Ve(n)}catch(ke){if(ke.response&&ke.response.status===422&&ke.response.data.suggested_name){const Ge=ke.response.data.suggested_name;L(`Name "${ie}" is already taken.`),W(Ge),Ie.current&&Ie.current.focus()}}},[St,un]=R.useState(null),an=ie=>{un(ie.active)},Lt=ie=>{const{active:ke,over:Ge}=ie;if(un(null),!!Ge&&Ge.id==="document-canvas"){const Ze=document.getElementById("printable-document");if(Ze&&ke.rect.current.translated){const pt=Ze.getBoundingClientRect(),st=(ke.rect.current.translated.left-pt.left)/a,Ut=(ke.rect.current.translated.top-pt.top)/a;ke.data.current?.type==="toolbar-item"?ft({isOpen:!0,data:{id:null,position:{x:st,y:Ut},type:"all",required:!0,order:ne.length+1}}):ke.data.current?.type==="signature-field"&&Ae(ke.id,{position:{x:st,y:Ut}})}}},ts=ie=>{if(ie.id)Ae(ie.id,{metadata:{signeeName:ie.signeeName,signeeEmail:ie.signeeEmail,type:ie.type,required:ie.required,order:ie.order}});else{const ke={id:qm(),position:at.data.position,metadata:{signeeName:ie.signeeName,signeeEmail:ie.signeeEmail,type:ie.type,required:ie.required,order:ie.order}};fe(ke)}},ns=ie=>{ft({isOpen:!0,data:{id:ie.id,...ie.metadata}})},vi=()=>{ft({isOpen:!0,data:{id:null,position:{x:50,y:100},type:"all",required:!0,order:ne.length+1}})},Ps=async()=>{if(!e){Be.error("Please save the document before printing.");return}x(!0);try{let ie=V;if(V&&!V.startsWith("data:")){const pt=await nt(V);pt&&(ie=pt)}const ke={...K,brandingEnabled:K.brandingEnabled!==!1&&K.brandingEnabled!=="false",logoAlignment:K.logoAlignment||"center",logoSize:K.logoSize||70,businessLogo:ie},Ge=renderToStaticMarkup(r.jsx(y2,{data:ke,content:q,signatures:ne,zoom:1,printing:!0,styles:Qe,businessLogo:ie})),Ze=await Ya(e,Ge,le);Ze.url&&window.open(Ze.url,"_blank")}catch(ie){console.error("PDF Generation failed",ie),Be.error("Failed to generate PDF. Please try again.")}finally{x(!1)}},yn=async()=>{if(!e){Be.error("Please save the document before exporting.");return}A(!0);try{let ie=V;if(V&&!V.startsWith("data:")){const Ze=await nt(V);Ze&&(ie=Ze)}const ke=hw(K,q,le,ne,ie),Ge=await Ya(e,ke,le);if(Ge.url){const Ze=document.createElement("a");Ze.href=Ge.url,Ze.download=`${le.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.pdf`,document.body.appendChild(Ze),Ze.click(),document.body.removeChild(Ze),Be.success("Document exported successfully")}}catch(ie){console.error("Export failed",ie),Be.error("Failed to export document")}finally{A(!1)}},ss=()=>{if(!e){Be.error("Please save the document before sending.");return}E(!0)},Fn=ie=>{ie&&ie.sent_at&&je(ie.sent_at)},da=ie=>{Nt(ie),D(ie),u(!1),Be.success(`Previewing Version ${ie.version_number}`)},ua=()=>{ht(),D(null),Be.success("Exited preview mode")},hn=ie=>{mt(ie),D(null)},vn=async ie=>{const ke=Be.loading("Preparing version PDF...");try{let Ge=ie.content;if(typeof Ge=="string")try{Ge=JSON.parse(Ge)}catch{}const Ze=Ge.formData||K,pt=Ge.docContent||q;let st=V;if(V&&!V.startsWith("data:")){const dt=await nt(V);dt&&(st=dt)}const Ut=hw(Ze,pt,`${le} - v${ie.version_number}`,[],st),rn=await Ya(e,Ut,`${le} - v${ie.version_number}`);if(rn.url){const dt=document.createElement("a");dt.href=rn.url,dt.download=`${le.replace(/[^a-z0-9]/gi,"_")}_v${ie.version_number}.pdf`,document.body.appendChild(dt),dt.click(),document.body.removeChild(dt),Be.success(`Version ${ie.version_number} downloaded`,{id:ke})}}catch(Ge){console.error("Version download failed",Ge),Be.error("Failed to download version PDF",{id:ke})}};return U?r.jsx("div",{className:"flex h-screen items-center justify-center bg-slate-50",children:r.jsxs("div",{className:"text-center",children:[r.jsx(gs,{size:40,className:"animate-spin text-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-500 font-medium",children:"Loading Document..."})]})}):r.jsx(Qm,{sensors:Je,onDragStart:an,onDragEnd:Lt,children:r.jsxs("div",{className:"flex flex-col h-screen bg-slate-100 overflow-hidden",children:[r.jsx(lv,{isOpen:at.isOpen,onClose:()=>ft({isOpen:!1,data:null}),onSave:ts,initialData:at.data,parties:{disclosingPartyName:K.employerName,receivingPartyName:K.candidateName,disclosingSignatoryName:K.employerSignatoryName,receivingSignatoryName:K.candidateName}}),r.jsx(iv,{dropAnimation:{sideEffects:({active:ie})=>(document.body.style.cursor="grabbing",()=>{document.body.style.cursor=""})},children:St?St.data.current?.type==="toolbar-item"?r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-indigo-500 bg-white shadow-xl opacity-90 cursor-grabbing ring-2 ring-indigo-500/20 w-48",children:[r.jsx("div",{className:"p-2 rounded-md bg-indigo-100 text-indigo-600",children:r.jsx("div",{className:"w-5 h-5 flex items-center justify-center font-bold",children:"+"})}),r.jsx("span",{className:"text-sm font-medium text-slate-900",children:"Placing Field..."})]}):St.data.current?.type==="signature-field"?r.jsxs("div",{className:"w-64 bg-white/95 backdrop-blur-sm border-2 border-indigo-500 rounded-lg shadow-2xl p-3 flex flex-col cursor-grabbing",children:[r.jsx("div",{className:"flex items-center gap-2 text-indigo-700 font-semibold border-b pb-2 mb-2",children:r.jsx("span",{children:St.data.current.signeeName||"Signature"})}),r.jsx("div",{className:"h-10 flex items-center justify-center text-indigo-200",children:"Sign Here"})]}):null:null}),T&&r.jsxs("div",{className:"bg-amber-100 border-b border-amber-200 px-4 py-2 flex items-center justify-between text-amber-800 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jo,{size:16}),r.jsxs("span",{className:"font-medium",children:["Previewing Version ",T.version_number]})]}),r.jsxs("button",{onClick:ua,className:"text-amber-700 hover:text-amber-900 font-medium hover:underline flex items-center gap-1",children:[r.jsx(ja,{size:14})," Exit Preview"]})]}),r.jsx(W0,{isOpen:C,onClose:()=>E(!1),documentId:e,documentName:le,isReminder:!!xe,onSuccess:Fn,getHtmlContent:async()=>{let ie=V;if(V&&!V.startsWith("data:")){const ke=await nt(V);ke&&(ie=ke)}return hw(K,q,le,ne,ie)},signatures:ne}),r.jsxs("header",{className:"no-print h-14 md:h-16 bg-white/80 backdrop-blur-md border-b border-slate-200/60 px-4 md:px-6 flex items-center justify-between flex-shrink-0 z-30 shadow-sm relative transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[r.jsx("button",{onClick:tt,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors flex-shrink-0",children:r.jsx(vl,{size:20})}),r.jsxs("div",{className:"min-w-0 relative group/input",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{ref:Ie,type:"text",value:le,onChange:ie=>{_e(ie.target.value),M&&L(null)},className:`font-bold text-sm md:text-lg bg-transparent border-b-2 focus:ring-0 p-0 m-0 w-auto min-w-[150px] max-w-[300px] placeholder-slate-400 truncate transition-colors ${M?"border-red-500 text-slate-800 ring-4 ring-red-500/10 rounded-sm px-1 -mx-1":"border-transparent hover:border-slate-200 text-slate-800"}`,placeholder:"Enter Document Name"}),M&&r.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 bg-white rounded-lg shadow-xl border border-red-100 z-50 p-3 animate-in fade-in slide-in-from-top-2",children:[r.jsxs("div",{className:"flex items-start gap-2 text-red-600 mb-2",children:[r.jsx(xr,{size:16}),r.jsx("p",{className:"text-xs font-semibold",children:M})]}),I&&r.jsxs("div",{className:"bg-slate-50 rounded p-2 border border-slate-100",children:[r.jsx("p",{className:"text-[10px] text-slate-500 mb-1 uppercase font-bold",children:"Suggestion:"}),r.jsx("button",{onClick:()=>{_e(I),L(null)},className:"text-sm font-bold text-indigo-600 hover:text-indigo-700 hover:underline",children:I})]})]})]}),r.jsx("button",{onClick:$e,className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-md transition-colors",children:r.jsx(RS,{size:16})}),xe&&r.jsxs("span",{className:"hidden lg:inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-emerald-50 text-emerald-600 text-[10px] font-medium border border-emerald-100",children:[r.jsx(ii,{size:10})," Sent"]})]}),r.jsx("p",{className:"text-[10px] md:text-xs text-slate-400 font-medium whitespace-nowrap hidden sm:block mt-0.5",children:e?"Autosaved locally":"Draft"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[r.jsxs("div",{className:"hidden lg:flex items-center bg-slate-100 rounded-lg p-1 mr-4",children:[r.jsx("button",{onClick:Fe,className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-slate-500 transition-all",children:r.jsx(Um,{size:16})}),r.jsxs("span",{className:"text-xs font-semibold text-slate-600 w-12 text-center",children:[Math.round(a*100),"%"]}),r.jsx("button",{onClick:De,className:"p-1.5 hover:bg-white hover:shadow-sm rounded-md text-slate-500 transition-all",children:r.jsx(Hm,{size:16})})]}),r.jsxs("button",{onClick:()=>u(!0),className:"hidden lg:flex items-center gap-2 px-4 py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all",children:[r.jsx(Xa,{size:18}),r.jsx("span",{children:"History"})]}),r.jsxs("button",{onClick:Ps,disabled:g,className:"hidden lg:flex items-center gap-2 px-4 py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all disabled:opacity-50",children:[g?r.jsx(gs,{size:18,className:"animate-spin"}):r.jsx(tf,{size:18}),r.jsx("span",{children:"Print"})]}),r.jsxs("button",{onClick:ss,className:`hidden lg:flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg border border-transparent transition-all ${xe?"text-amber-600 hover:bg-amber-50 hover:border-amber-200":"text-slate-600 hover:bg-slate-50 hover:border-slate-200"}`,children:[xe?r.jsx(wc,{size:18}):r.jsx(ri,{size:18}),r.jsx("span",{children:xe?"Remind":"Send"})]}),r.jsxs("button",{onClick:yn,disabled:w,className:"hidden lg:flex items-center gap-2 px-4 py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all disabled:opacity-50",children:[w?r.jsx(gs,{size:18,className:"animate-spin"}):r.jsx(wl,{size:18}),r.jsx("span",{children:"Export"})]}),r.jsxs("button",{onClick:qe,className:`hidden lg:flex items-center gap-2 px-5 py-2 rounded-lg text-white font-medium shadow-md transition-all ${H?"bg-emerald-500":"bg-indigo-600 hover:bg-indigo-700"}`,children:[H?r.jsx(ii,{size:18}):r.jsx(Sl,{size:18}),r.jsx("span",{children:H?"Saved!":"Save"})]})]})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row flex-1 overflow-hidden relative pb-[70px] lg:pb-0",children:[r.jsx("div",{className:`
                        no-print w-full lg:w-[400px] h-full bg-white border-b lg:border-b-0 lg:border-r border-slate-200 
                        overflow-y-auto z-20 shadow-sm flex-shrink-0 lg:order-1
                        ${t||s==="edit"?"block":"hidden"}
                    `,children:r.jsx(SZ,{formData:K,onChange:ee,docContent:q,onContentChange:he,addSection:ce,removeSection:G,updateSection:ue,reorderSections:Se,styles:Qe,onStyleUpdate:Kt,onStyleReset:Ke})}),r.jsxs("div",{className:`
                        flex-1 h-full overflow-y-auto bg-slate-50/50 p-4 md:p-8 sm:p-12 
                        flex justify-center items-start scrollbar-thin scrollbar-thumb-slate-300 lg:order-2
                        ${t||s==="preview"?"flex":"hidden"}
                    `,style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"20px 20px"},children:[r.jsx(y2,{data:Gt,content:He,zoom:a,signatures:ne,onUpdateSignature:Ae,onRemoveSignature:Pe,onEditSignature:ns,businessLogo:V,styles:Qe}),!t&&s==="preview"&&r.jsx("button",{onClick:vi,className:"fixed bottom-24 right-6 w-14 h-14 bg-indigo-600 text-white rounded-full shadow-lg shadow-indigo-600/30 flex items-center justify-center hover:bg-indigo-700 transition-transform active:scale-95 z-30",children:r.jsx("span",{className:"text-2xl font-bold",children:"+"})})]})]}),r.jsx(V0,{documentId:e,isOpen:c,onClose:()=>u(!1),onPreview:da,onDownload:vn,onRestore:hn}),!t&&r.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 flex justify-between items-center px-6 py-3 pb-safe z-40 safe-area-bottom",children:[r.jsxs("button",{onClick:()=>i("edit"),className:`flex flex-col items-center gap-1 ${s==="edit"?"text-indigo-600":"text-slate-400"}`,children:[r.jsx(ls,{size:24,strokeWidth:s==="edit"?2.5:2}),r.jsx("span",{className:"text-[10px] font-medium",children:"Editor"})]}),r.jsxs("button",{onClick:()=>i("preview"),className:`flex flex-col items-center gap-1 ${s==="preview"?"text-indigo-600":"text-slate-400"}`,children:[r.jsx(jo,{size:24,strokeWidth:s==="preview"?2.5:2}),r.jsx("span",{className:"text-[10px] font-medium",children:"Preview"})]}),r.jsxs("button",{onClick:qe,className:`flex flex-col items-center gap-1 ${H?"text-emerald-500":"text-slate-400 transition-colors active:text-indigo-600"}`,children:[H?r.jsx(ii,{size:24,strokeWidth:2.5}):r.jsx(Sl,{size:24}),r.jsx("span",{className:"text-[10px] font-medium",children:H?"Saved":"Save"})]}),r.jsxs("button",{onClick:()=>f(!0),className:`flex flex-col items-center gap-1 ${h?"text-indigo-600":"text-slate-400"}`,children:[r.jsx(TS,{size:24}),r.jsx("span",{className:"text-[10px] font-medium",children:"More"})]})]}),!t&&h&&r.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col justify-end",children:[r.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm animate-in fade-in",onClick:()=>f(!1)}),r.jsxs("div",{className:"relative bg-white rounded-t-2xl p-6 pb-safe animate-in slide-in-from-bottom shadow-2xl space-y-2",children:[r.jsx("div",{className:"w-12 h-1.5 bg-slate-200 rounded-full mx-auto mb-6"}),r.jsx("h3",{className:"text-sm font-semibold text-slate-400 uppercase tracking-wider mb-2 px-2",children:"Actions"}),r.jsxs("button",{onClick:()=>{f(!1),u(!0)},className:"w-full flex items-center gap-3 p-3 text-slate-700 font-medium hover:bg-slate-50 rounded-xl transition-colors",children:[r.jsx("div",{className:"p-2 bg-indigo-50 text-indigo-600 rounded-lg",children:r.jsx(Xa,{size:20})}),"Version History"]}),r.jsxs("button",{onClick:()=>{f(!1),ss()},className:"w-full flex items-center gap-3 p-3 text-slate-700 font-medium hover:bg-slate-50 rounded-xl transition-colors",children:[r.jsx("div",{className:"p-2 bg-amber-50 text-amber-600 rounded-lg",children:xe?r.jsx(wc,{size:20}):r.jsx(ri,{size:20})}),xe?"Send Reminder":"Send to Client"]}),r.jsxs("button",{onClick:()=>{f(!1),Ps()},disabled:g,className:"w-full flex items-center gap-3 p-3 text-slate-700 font-medium hover:bg-slate-50 rounded-xl transition-colors disabled:opacity-50",children:[r.jsx("div",{className:"p-2 bg-sky-50 text-sky-600 rounded-lg",children:g?r.jsx(gs,{size:20,className:"animate-spin"}):r.jsx(tf,{size:20})}),g?"Generating PDF...":"Print / Download PDF"]}),r.jsxs("button",{onClick:()=>{f(!1),yn()},disabled:w,className:"w-full flex items-center gap-3 p-3 text-slate-700 font-medium hover:bg-slate-50 rounded-xl transition-colors disabled:opacity-50",children:[r.jsx("div",{className:"p-2 bg-emerald-50 text-emerald-600 rounded-lg",children:w?r.jsx(gs,{size:20,className:"animate-spin"}):r.jsx(wl,{size:20})}),w?"Exporting...":"Export"]}),r.jsx("button",{onClick:()=>f(!1),className:"w-full mt-4 p-3 bg-slate-100 text-slate-600 font-semibold rounded-xl",children:"Cancel"})]})]})]})})},AZ=({formData:n,onChange:e,docContent:t,onContentChange:s,addSection:i,removeSection:a,updateSection:o,reorderSections:c,styles:u,onStyleUpdate:h,onStyleReset:f})=>{const[g,x]=R.useState("parties"),[w,A]=R.useState("fill"),[C,E]=R.useState({isOpen:!1,sectionId:null}),T=K=>{x(g===K?null:K)},D=n.effectiveDateDay&&n.effectiveDateMonth&&n.effectiveDateYear,M=n.clientName&&n.consultantName,L=n.startDate&&n.endDate&&n.feeAmount,I=n.clientSignatoryName&&n.consultantSignatoryName,W=K=>{E({isOpen:!0,sectionId:K})},V=()=>{C.sectionId&&(a(C.sectionId),E({isOpen:!1,sectionId:null}))},Y=async()=>{try{const K=await vr();if(K){e({target:{name:"clientName",value:K.name||""}});const q=[K.address,K.city,K.state,K.country].filter(Boolean).join(", ");e({target:{name:"clientAddress",value:q||""}}),Be.success("Business details populated")}else Be.error("No business profile found")}catch(K){console.error("Failed to fetch business info",K),Be.error("Failed to load business info")}};return r.jsxs("div",{className:"bg-white min-h-full pb-20 relative",children:[r.jsx(ov,{isOpen:C.isOpen,onClose:()=>E({isOpen:!1,sectionId:null}),onConfirm:V,title:"Delete Section",message:"Are you sure you want to remove this section? This action cannot be undone.",confirmText:"Delete Section",isDestructive:!0}),r.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 sticky top-0 z-10 backdrop-blur-sm",children:[r.jsxs("div",{className:"flex gap-1 bg-slate-200/50 p-1 rounded-lg mb-4",children:[r.jsx("button",{onClick:()=>A("fill"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${w==="fill"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,children:r.jsx(j0,{size:16})}),r.jsx("button",{onClick:()=>A("edit"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${w==="edit"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,title:"Structure",children:r.jsx(k0,{size:16})}),r.jsx("button",{onClick:()=>A("style"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-sm font-medium transition-all ${w==="style"?"bg-white shadow-sm text-indigo-600":"text-slate-500 hover:text-slate-700"}`,title:"Appearance",children:r.jsx(uf,{size:16})})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold text-slate-900",children:w==="fill"?"Contract Details":w==="edit"?"Structure Builder":"Styling & Appearance"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:w==="fill"?"Enter contract terms":w==="edit"?"Customize layout":"Fonts, colors and spacing"})]})]}),w==="fill"&&r.jsxs(r.Fragment,{children:[r.jsx(Aa,{title:"Effective Date",icon:Gu,isOpen:g==="date",isComplete:D,onClick:()=>T("date"),children:r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsx(Ot,{label:"Day",name:"effectiveDateDay",value:n.effectiveDateDay,onChange:e,placeholder:"DD"}),r.jsx(Ot,{label:"Month",name:"effectiveDateMonth",value:n.effectiveDateMonth,onChange:e,placeholder:"Month"}),r.jsx(Ot,{label:"Year",name:"effectiveDateYear",value:n.effectiveDateYear,onChange:e,placeholder:"YY"})]})}),r.jsx(Aa,{title:"Parties Involved",icon:Mo,isOpen:g==="parties",isComplete:M,onClick:()=>T("parties"),children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-3 bg-indigo-50 rounded-lg border border-indigo-100",children:[r.jsxs("h4",{className:"text-xs font-bold text-indigo-900 uppercase mb-3 flex items-center justify-between",children:[r.jsx("span",{className:"flex items-center gap-2",children:"Client"}),r.jsxs("button",{onClick:Y,className:"text-[10px] bg-white border border-indigo-200 text-indigo-600 px-2 py-1 rounded hover:bg-indigo-50 transition-colors flex items-center gap-1",children:[r.jsx(wd,{size:10})," Use Profile"]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Ot,{label:"Client",name:"clientName",value:n.clientName,onChange:e,placeholder:"Company A"}),r.jsx(Ot,{label:"Full Address",name:"clientAddress",value:n.clientAddress,onChange:e,placeholder:"Address",rows:2})]})]}),r.jsxs("div",{className:"p-3 bg-emerald-50 rounded-lg border border-emerald-100",children:[r.jsx("h4",{className:"text-xs font-bold text-emerald-900 uppercase mb-3",children:"Consultant"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Ot,{label:"Consultant",name:"consultantName",value:n.consultantName,onChange:e,placeholder:"Jane Doe"}),r.jsx(Ot,{label:"Full Address",name:"consultantAddress",value:n.consultantAddress,onChange:e,placeholder:"Address",rows:2})]})]})]})}),r.jsx(Aa,{title:"Terms & Payment",icon:ES,isOpen:g==="terms",isComplete:L,onClick:()=>T("terms"),children:r.jsxs("div",{className:"space-y-3",children:[r.jsx(Ot,{label:"Services Description",name:"servicesDescription",value:n.servicesDescription,onChange:e,placeholder:"Describe services...",rows:3}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Ot,{label:"Start Date",name:"startDate",value:n.startDate,onChange:e,placeholder:"Date"}),r.jsx(Ot,{label:"End Date",name:"endDate",value:n.endDate,onChange:e,placeholder:"Date"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Ot,{label:"Fee Amount",name:"feeAmount",value:n.feeAmount,onChange:e,placeholder:"$5,000"}),r.jsx(Ot,{label:"Notice (Days)",name:"noticePeriod",value:n.noticePeriod,onChange:e,placeholder:"30"})]}),r.jsx(Ot,{label:"Payment Terms",name:"paymentTerms",value:n.paymentTerms,onChange:e,placeholder:"Net 30, Upon Completion, etc."})]})}),r.jsx(Aa,{title:"Document Branding",icon:lf,isOpen:g==="branding",isComplete:!0,onClick:()=>T("branding"),children:r.jsx(I0,{formData:n,onChange:e})}),r.jsx(Aa,{title:"Signatories",icon:cf,isOpen:g==="signatures",isComplete:I,onClick:()=>T("signatures"),children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-bold text-slate-400 mb-2 uppercase",children:"For Client"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Ot,{label:"Name",name:"clientSignatoryName",value:n.clientSignatoryName,onChange:e,placeholder:"Client Rep"}),r.jsx(Ot,{label:"Title",name:"clientSignatoryTitle",value:n.clientSignatoryTitle,onChange:e,placeholder:"Director"})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-bold text-slate-400 mb-2 uppercase",children:"For Consultant"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(Ot,{label:"Name",name:"consultantSignatoryName",value:n.consultantSignatoryName,onChange:e,placeholder:"Consultant Name"}),r.jsx(Ot,{label:"Title",name:"consultantSignatoryTitle",value:n.consultantSignatoryTitle,onChange:e,placeholder:"Title"})]})]})]})})]}),w==="edit"&&r.jsxs("div",{className:"p-4 space-y-6 pb-20",children:[r.jsx(sf,{isFixed:!0,section:{title:"Preamble & Parties"},onUpdate:()=>{},children:r.jsxs("div",{className:"space-y-3 mt-3",children:[r.jsx("textarea",{name:"preamble",value:t.preamble||"",onChange:s,rows:3,className:"w-full text-xs p-3 rounded-lg border border-slate-200 bg-slate-50 resize-y",placeholder:"Preamble..."}),r.jsxs("div",{className:"grid gap-3",children:[r.jsx("textarea",{name:"partiesDisclosing",value:t.partiesDisclosing||"",onChange:s,rows:2,className:"w-full text-xs p-3 rounded-lg border border-slate-200 bg-slate-50 resize-y",placeholder:"Client Clause..."}),r.jsx("textarea",{name:"partiesReceiving",value:t.partiesReceiving||"",onChange:s,rows:2,className:"w-full text-xs p-3 rounded-lg border border-slate-200 bg-slate-50 resize-y",placeholder:"Consultant Clause..."})]})]})}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute left-[7px] top-[-24px] bottom-0 w-[2px] bg-slate-100"}),r.jsx("p",{className:"font-bold text-[10px] uppercase tracking-widest text-slate-400 pl-8 mb-4",children:"Contract Sections"}),r.jsx(zy,{axis:"y",values:t.sections,onReorder:c,className:"space-y-0",children:t.sections.map(K=>r.jsx(Iy,{value:K,className:"relative mb-2",children:r.jsx(sf,{section:K,onUpdate:(q,ne)=>o(K.id,q,ne),onRemove:()=>W(K.id),placeholderTitle:"Section Title",placeholderContent:"Body text..."})},K.id))}),r.jsx(av,{onClick:i})]})]}),w==="style"&&r.jsx("div",{className:"p-4 pb-20",children:r.jsx(rv,{styles:u,onUpdate:h,onReset:f})})]})};function v2({data:n,content:e,zoom:t=1,printing:s=!1,readOnly:i=!1,signatures:a=[],onUpdateSignature:o,onRemoveSignature:c,onEditSignature:u,businessLogo:h,styles:f}){const g=T=>{if(!T)return"bg-slate-100 text-slate-600 border-slate-200";const D=["bg-indigo-50 text-indigo-700 border-indigo-200","bg-emerald-50 text-emerald-700 border-emerald-200","bg-amber-50 text-amber-700 border-amber-200","bg-rose-50 text-rose-700 border-rose-200","bg-violet-50 text-violet-700 border-violet-200","bg-sky-50 text-sky-700 border-sky-200"];let M=0;for(let L=0;L<T.length;L++)M=T.charCodeAt(L)+((M<<5)-M);return D[Math.abs(M)%D.length]},x=({value:T,placeholder:D,name:M,className:L=""})=>{const I=g(M);return T?i||s?r.jsx("span",{className:`font-medium text-slate-900 ${L}`,children:T}):r.jsx("span",{className:`px-1.5 py-0.5 rounded border ${I} font-medium mx-0.5 transition-all hover:brightness-95 ${L}`,children:T}):i||s?r.jsx("span",{className:`text-slate-500 italic ${L}`,children:D}):r.jsx("span",{className:`px-1.5 py-0.5 rounded border border-dashed ${I} bg-opacity-50 font-medium text-xs mx-0.5 ${L}`,children:D})},w=({template:T,values:D})=>{if(!T)return null;const M=T.split(/(\{\{[^}]+\}\})/g);return r.jsx("span",{children:M.map((L,I)=>{if(L.startsWith("{{")&&L.endsWith("}}")){const W=L.slice(2,-2).trim();return r.jsx(x,{value:D[W],name:W,placeholder:`[${W}]`},I)}return r.jsx("span",{children:L},I)})})},A=s?"div":ze.div,C=s?"div":ze.section,E=f||{fontFamily:"font-serif",fontSize:"text-[11pt]",lineHeight:"leading-relaxed",textColor:"#1e293b",headingColor:"#0f172a",pageMargin:"p-[10mm]",paragraphSpacing:"mb-6"};return r.jsxs(A,{id:"printable-document",...s?{}:{initial:{opacity:0,y:20},animate:{opacity:1,y:0}},style:{transform:s?"none":`scale(${t})`,transformOrigin:"top center",color:E.textColor},className:`
                w-[210mm] min-h-[297mm] bg-white relative mb-20 origin-top 
                ${s?"":"shadow-[0_8px_30px_rgb(0,0,0,0.12)] border border-slate-200/60"}
                ${E.fontFamily} ${E.fontSize} ${E.lineHeight}
            `,children:[!s&&r.jsx("div",{className:"no-print absolute inset-0 rounded-sm pointer-events-none bg-gradient-to-b from-white to-slate-50/20"}),!s&&!i&&r.jsx(C5,{signatures:a,onUpdateSignature:o,onRemoveSignature:c,onEditSignature:u}),(s||i)&&a.length>0&&r.jsx("div",{className:"absolute inset-0 z-50 pointer-events-none",children:a.map(T=>r.jsxs("div",{style:{position:"absolute",left:`${T.position.x}px`,top:`${T.position.y}px`,width:"200px",height:"60px",borderBottom:"1px solid #000",display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:[r.jsx("div",{style:{fontFamily:"cursive",fontSize:"14pt",color:"#1e3a8a",marginBottom:"4px"},children:T.metadata.signeeName||"Sign Here"}),r.jsx("div",{style:{fontSize:"8pt",color:"#64748b",textTransform:"uppercase",letterSpacing:"0.05em"},children:T.metadata.type==="date"?"Date":"Authorized Signature"})]},T.id))}),r.jsxs("div",{className:`${E.pageMargin} relative z-10`,children:[h&&n.brandingEnabled!==!1&&n.brandingEnabled!=="false"&&r.jsx("div",{className:`flex mb-8 ${n.logoAlignment==="left"?"justify-start":n.logoAlignment==="right"?"justify-end":"justify-center"}`,style:s?{textAlign:n.logoAlignment||"center"}:{},children:r.jsx("img",{src:h,alt:"Company Logo",style:{height:`${n.logoSize||70}px`,objectFit:"contain"}})}),r.jsx("h1",{className:"text-xl font-bold text-center mb-10 uppercase tracking-widest border-b-2 border-slate-900 pb-2",style:{borderColor:E.headingColor,color:E.headingColor},children:e.title}),r.jsx("p",{className:`text-justify ${E.paragraphSpacing}`,children:r.jsx(w,{template:e.preamble,values:n})}),r.jsxs("div",{className:"mb-8 pl-4 border-l-4 border-slate-100",children:[r.jsx("p",{className:"font-bold text-xs uppercase text-slate-400 mb-1",children:"BY AND BETWEEN"}),r.jsx("p",{className:`text-justify ${E.paragraphSpacing}`,children:r.jsx(w,{template:e.partiesDisclosing,values:n})}),r.jsx("p",{className:"font-bold text-xs uppercase text-slate-400 mb-1",children:"AND"}),r.jsx("p",{className:`text-justify ${E.paragraphSpacing}`,children:r.jsx(w,{template:e.partiesReceiving,values:n})})]}),r.jsx("p",{className:`text-justify ${E.paragraphSpacing}`,children:r.jsx(w,{template:e.partiesFooter,values:n})}),r.jsx("div",{className:"space-y-6 min-h-[100px]",children:r.jsx(Zn,{mode:"popLayout",children:e.sections&&e.sections.map((T,D)=>r.jsxs(C,{className:E.paragraphSpacing,...s?{}:{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95}},children:[r.jsx("h2",{className:"font-bold text-sm uppercase mb-2",style:{color:E.headingColor},children:T.title}),r.jsx("p",{className:"text-justify",children:r.jsx(w,{template:T.content,values:n})})]},T.id))})}),r.jsxs("div",{className:"mt-12 break-inside-avoid",children:[r.jsxs("h2",{className:"font-bold text-sm uppercase mb-6 border-b border-slate-900 pb-1",style:{borderColor:E.headingColor,color:E.headingColor},children:[e.sections.length+1,". Signatures"]}),r.jsx("p",{className:"mb-8",children:"IN WITNESS WHEREOF, the Parties have executed this Agreement as of the date first written above."}),s?r.jsx("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"20px"},children:r.jsx("tbody",{children:r.jsxs("tr",{children:[r.jsxs("td",{style:{width:"48%",verticalAlign:"top",paddingRight:"2%"},children:[r.jsx("p",{className:"font-bold uppercase text-xs tracking-wider mb-8",children:"For Client"}),r.jsx("div",{className:"relative border-b border-slate-800 h-8 mb-2",style:{borderBottom:"1px solid #000",height:"40px",marginBottom:"10px"},children:n.clientSignatoryName&&r.jsx("span",{style:{fontFamily:"cursive",fontSize:"16pt",color:"#1e3a8a"},children:n.clientSignatoryName})}),r.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Authorized Signature"}),r.jsx("table",{style:{width:"100%",marginTop:"15px"},children:r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{style:{width:"60px",fontWeight:"bold",fontSize:"10pt"},children:"Name:"}),r.jsx("td",{style:{borderBottom:"1px solid #ccc"},children:n.clientSignatoryName})]}),r.jsxs("tr",{children:[r.jsx("td",{style:{paddingBottom:"5px"}}),r.jsx("td",{})]}),r.jsxs("tr",{children:[r.jsx("td",{style:{width:"60px",fontWeight:"bold",fontSize:"10pt"},children:"Title:"}),r.jsx("td",{style:{borderBottom:"1px solid #ccc"},children:n.clientSignatoryTitle})]})]})})]}),r.jsx("td",{style:{width:"4%"}}),r.jsxs("td",{style:{width:"48%",verticalAlign:"top"},children:[r.jsx("p",{className:"font-bold uppercase text-xs tracking-wider mb-8",children:"For Consultant"}),r.jsx("div",{className:"relative border-b border-slate-800 h-8 mb-2",style:{borderBottom:"1px solid #000",height:"40px",marginBottom:"10px"},children:n.consultantSignatoryName&&r.jsx("span",{style:{fontFamily:"cursive",fontSize:"16pt",color:"#1e3a8a"},children:n.consultantSignatoryName})}),r.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Authorized Signature"}),r.jsx("table",{style:{width:"100%",marginTop:"15px"},children:r.jsxs("tbody",{children:[r.jsxs("tr",{children:[r.jsx("td",{style:{width:"60px",fontWeight:"bold",fontSize:"10pt"},children:"Name:"}),r.jsx("td",{style:{borderBottom:"1px solid #ccc"},children:n.consultantSignatoryName})]}),r.jsxs("tr",{children:[r.jsx("td",{style:{paddingBottom:"5px"}}),r.jsx("td",{})]}),r.jsxs("tr",{children:[r.jsx("td",{style:{width:"60px",fontWeight:"bold",fontSize:"10pt"},children:"Title:"}),r.jsx("td",{style:{borderBottom:"1px solid #ccc"},children:n.consultantSignatoryTitle})]})]})})]})]})})}):r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-16",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"font-bold uppercase text-xs tracking-wider mb-8",children:"For Client"}),r.jsx("div",{className:"relative border-b border-slate-800 h-8 mb-2",children:n.clientSignatoryName&&r.jsx("span",{className:"absolute bottom-1 left-2 font-cursive text-xl text-blue-900 opacity-80 rotate-[-2deg]",children:n.clientSignatoryName})}),r.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Authorized Signature"}),r.jsxs("div",{className:"pt-4 grid grid-cols-[60px_1fr] gap-x-2 gap-y-1 items-baseline",children:[r.jsx("span",{className:"text-sm font-medium",children:"Name:"}),r.jsx("span",{className:"border-b border-slate-300 w-full inline-block h-5 pl-1",children:n.clientSignatoryName}),r.jsx("span",{className:"text-sm font-medium",children:"Title:"}),r.jsx("span",{className:"border-b border-slate-300 w-full inline-block h-5 pl-1",children:n.clientSignatoryTitle})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"font-bold uppercase text-xs tracking-wider mb-8",children:"For Consultant"}),r.jsx("div",{className:"relative border-b border-slate-800 h-8 mb-2",children:n.consultantSignatoryName&&r.jsx("span",{className:"absolute bottom-1 left-2 font-cursive text-xl text-blue-900 opacity-80 rotate-[-2deg]",children:n.consultantSignatoryName})}),r.jsx("p",{className:"text-xs uppercase text-slate-500",children:"Authorized Signature"}),r.jsxs("div",{className:"pt-4 grid grid-cols-[60px_1fr] gap-x-2 gap-y-1 items-baseline",children:[r.jsx("span",{className:"text-sm font-medium",children:"Name:"}),r.jsx("span",{className:"border-b border-slate-300 w-full inline-block h-5 pl-1",children:n.consultantSignatoryName}),r.jsx("span",{className:"text-sm font-medium",children:"Title:"}),r.jsx("span",{className:"border-b border-slate-300 w-full inline-block h-5 pl-1",children:n.consultantSignatoryTitle})]})]})]})]}),!s&&r.jsx("div",{className:"absolute bottom-4 left-0 right-0 text-center",children:r.jsx("p",{className:"text-[9px] text-slate-300 uppercase tracking-widest font-sans",children:"Powered by DocForge"})})]})]})}const CZ={title:"Consulting Services Agreement",preamble:"This Consulting Services Agreement (Agreement) is made and entered into on this {{effectiveDateDay}} day of {{effectiveDateMonth}}, 20{{effectiveDateYear}} (Effective Date),",partiesDisclosing:'{{clientName}}, having its principal place of business at {{clientAddress}} (hereinafter referred to as the "Client"),',partiesReceiving:'{{consultantName}}, having its principal place of business at {{consultantAddress}} (hereinafter referred to as the "Consultant").',partiesFooter:'The Client and the Consultant may hereinafter be collectively referred to as the "Parties" and individually as a "Party".',sections:[{id:"1",title:"Services",content:"The Consultant agrees to perform the following services for the Client: {{servicesDescription}} (Services). The Consultant shall perform the Services in a professional and workmanlike manner."},{id:"2",title:"Term",content:"The term of this Agreement shall commence on {{startDate}} and shall continue until {{endDate}}, unless earlier terminated in accordance with this Agreement."},{id:"3",title:"Compensation",content:"In consideration for the Services, the Client shall pay the Consultant a fee of {{feeAmount}}. Payment shall be made according to the following terms: {{paymentTerms}}."},{id:"4",title:"Independent Contractor",content:"The Consultant is an independent contractor and not an employee of the Client. The Consultant shall be solely responsible for all taxes, withholdings, and other statutory obligations."},{id:"5",title:"Confidentiality",content:"The Consultant agrees to keep confidential all non-public information obtained from the Client during the course of providing Services and shall not disclose it to any third party without prior written consent."},{id:"6",title:"Intellectual Property",content:'Any work product created by the Consultant specifically for the Client under this Agreement shall be considered "work made for hire" and shall be the sole property of the Client.'},{id:"7",title:"Termination",content:"Either party may terminate this Agreement upon {{noticePeriod}} days' written notice to the other party."}]},EZ={effectiveDateDay:"",effectiveDateMonth:"",effectiveDateYear:"",logoSize:70,logoAlignment:"center",brandingEnabled:!0,clientName:"",clientAddress:"",consultantName:"",consultantAddress:"",servicesDescription:"",startDate:"",endDate:"",feeAmount:"",paymentTerms:"",noticePeriod:"30",clientSignatoryName:"",clientSignatoryTitle:"",consultantSignatoryName:"",consultantSignatoryTitle:""},TZ=n=>{const[e,t]=R.useState(EZ),[s,i]=R.useState(CZ),[a,o]=R.useState("Untitled Consulting Agreement"),[c,u]=R.useState(null),[h,f]=R.useState(!!n),[g,x]=R.useState(!1),{styles:w,updateStyle:A,resetStyles:C}=G0(),E=R.useRef(null);R.useEffect(()=>{(async()=>{if(n)try{f(!0);const H=await B0(n);H.data.name&&o(H.data.name),H.data.sent_at&&u(H.data.sent_at);let ee=H.data?.content||H.content;if(typeof ee=="string")try{ee=JSON.parse(ee)}catch(he){console.error(he)}ee=ee||{},ee.formData&&t(he=>({...he,...ee.formData})),ee.docContent&&i(ee.docContent),ee.signatures&&le(ee.signatures),ee.styles&&Object.entries(ee.styles).forEach(([he,ce])=>A(he,ce))}catch(H){console.error("Failed to load document",H),Be.error("Failed to load document")}finally{f(!1)}else try{const H=await vr();H&&t(ee=>({...ee,clientName:H.name||"",clientAddress:[H.address,H.city,H.state,H.country].filter(Boolean).join(", ")}))}catch(H){console.error("Failed to load business details",H)}})()},[n]);const T=U=>{const{name:H,value:ee}=U.target;t(he=>({...he,[H]:ee}))},D=U=>{const{name:H,value:ee}=U.target;i(he=>({...he,[H]:ee}))},M=()=>{i(U=>({...U,sections:[...U.sections,{id:qm(),title:"New Section",content:"Enter the details of this new clause here..."}]}))},L=U=>{i(H=>({...H,sections:H.sections.filter(ee=>ee.id!==U)}))},I=(U,H,ee)=>{i(he=>({...he,sections:he.sections.map(ce=>ce.id===U?{...ce,[H]:ee}:ce)}))},W=U=>{i(H=>({...H,sections:U}))},V=async U=>{x(!0);try{const H={name:a,type_slug:"consulting-agreement",content:{formData:e,docContent:s,signatures:ne,styles:w},status:"draft"};if(n)return await U0(n,H),Be.success("Document updated successfully"),n;{const ee=await H0(H);return Be.success("Document created successfully"),U&&U(`/documents/consulting-agreement/${ee.data.id}`,{replace:!0}),ee.data.id}}catch(H){throw console.error("Failed to save",H),(!H.response||H.response.status!==422)&&Be.error("Failed to save document"),H}finally{setTimeout(()=>x(!1),500)}},Y=U=>{E.current||(E.current={formData:e,docContent:s});let H=U.content;if(typeof H=="string")try{H=JSON.parse(H)}catch{}return H.formData&&t(H.formData),H.docContent&&i(H.docContent),H},K=()=>{E.current&&(t(E.current.formData),i(E.current.docContent),E.current=null)},q=U=>{if(U&&U.content){let H=U.content;if(typeof H=="string")try{H=JSON.parse(H)}catch{}H.formData&&t(H.formData),H.docContent&&i(H.docContent)}E.current=null},[ne,le]=R.useState([]);return{formData:e,docContent:s,signatures:ne,documentName:a,setDocumentName:o,sentAt:c,setSentAt:u,isLoading:h,isSaving:g,handleFormChange:T,handleContentChange:D,addSection:M,removeSection:L,updateSection:I,reorderSections:W,addSignature:U=>{le(H=>[...H,U])},updateSignature:(U,H)=>{le(ee=>ee.map(he=>he.id===U?{...he,...H}:he))},removeSignature:U=>{le(H=>H.filter(ee=>ee.id!==U))},saveDocument:V,enterPreviewMode:Y,exitPreviewMode:K,restoreVersion:q,styles:w,updateStyle:A,resetStyles:C}},fw=(n,e,t="Document",s=[],i=null)=>{const a=pl.renderToStaticMarkup(r.jsx(v2,{data:n,content:e,zoom:1,printing:!0,signatures:s,businessLogo:i}));return`
    <!DOCTYPE html>
    <html>
        <head>
            <meta charset="utf-8">
            <title>${t}</title>
            <style>
                * { box-sizing: border-box; }
                body { 
                    font-family: 'Times New Roman', serif; 
                    line-height: 1.5; 
                    color: #333; 
                    font-size: 11pt; 
                    margin: 0; 
                    padding: 40px; 
                }
                .text-center { text-align: center; }
                .uppercase { text-transform: uppercase; }
                .font-bold { font-weight: bold; }
                .text-sm { font-size: 10pt; }
                .text-xs { font-size: 9pt; }
                .text-justify { text-align: justify; }
                .mb-2 { margin-bottom: 0.5rem; }
                .mb-4 { margin-bottom: 1rem; }
                .mb-6 { margin-bottom: 1.5rem; }
                .mb-8 { margin-bottom: 2rem; }
                .mb-10 { margin-bottom: 2.5rem; }
                .pb-2 { padding-bottom: 0.5rem; }
                .mt-12 { margin-top: 3rem; }
                .border-b { border-bottom: 1px solid #000; }
                .border-b-2 { border-bottom: 2px solid #000; }
                
                @page { margin: 40px; }
                
                h1 { 
                    font-size: 16pt; 
                    text-transform: uppercase; 
                    border-bottom: 2px solid #000; 
                    padding-bottom: 10px; 
                    margin-bottom: 30px; 
                    text-align: center; 
                    font-weight: bold; 
                    letter-spacing: 2px; 
                }
                p { margin-bottom: 12px; }
                
                table { width: 100%; border-collapse: collapse; }
                td { vertical-align: top; }
                
                .font-cursive { font-family: cursive; font-style: italic; }
            </style>
        </head>
        <body>
            ${a}
        </body>
    </html>
    `},cj=()=>{const n=yi(),{id:e}=vd(),t=Ym("(min-width: 1024px)"),[s,i]=R.useState("edit"),[a,o]=R.useState(1),[c,u]=R.useState(!1),[h,f]=R.useState(!1),[g,x]=R.useState(!1),[w,A]=R.useState(!1),[C,E]=R.useState(!1),[T,D]=R.useState(null),[M,L]=R.useState(null),[I,W]=R.useState(null),[V,Y]=R.useState(null),{formData:K,docContent:q,signatures:ne,documentName:le,setDocumentName:_e,sentAt:xe,setSentAt:je,isLoading:U,isSaving:H,handleFormChange:ee,handleContentChange:he,addSection:ce,removeSection:G,updateSection:ue,reorderSections:Se,addSignature:fe,updateSignature:Ae,removeSignature:Pe,saveDocument:Ve,enterPreviewMode:Nt,exitPreviewMode:ht,restoreVersion:mt,styles:Qe,updateStyle:Kt,resetStyles:Ke}=TZ(e),[at,ft]=R.useState({isOpen:!1,data:null}),Gt=gt.useDeferredValue(K),He=gt.useDeferredValue(q),Je=Zm(Nc(Xu,{activationConstraint:{distance:8}}),Nc(ev,{activationConstraint:{delay:250,tolerance:5}})),Ie=gt.useRef(null),tt=()=>n("/documents"),De=()=>o(ie=>Math.min(ie+.1,1.5)),Fe=()=>o(ie=>Math.max(ie-.1,.5)),$e=()=>{const ie=K.clientName?.trim(),ke=K.consultantName?.trim();ie&&ke?(_e(`Consulting Agreement - ${ie} & ${ke}`),L(null),W(null),Be.success("Generated smart name!")):Be.error("Enter Client and Consultant names first.")},nt=async ie=>{try{if(ie&&ie.includes("/storage/")){const Ze=`http://localhost:8000/api/v1/file-proxy?path=${encodeURIComponent(ie)}`,st=await(await fetch(Ze)).blob();return new Promise((Ut,rn)=>{const dt=new FileReader;dt.onloadend=()=>Ut(dt.result),dt.onerror=rn,dt.readAsDataURL(st)})}const Ge=await(await fetch(ie)).blob();return new Promise((Ze,pt)=>{const st=new FileReader;st.onloadend=()=>Ze(st.result),st.onerror=pt,st.readAsDataURL(Ge)})}catch(ke){return console.error("Failed to convert image to base64",ke),null}};gt.useEffect(()=>{(async()=>{try{const ke=await vr();ke&&ke.logo&&Y(ke.logo)}catch(ke){console.error("Failed to fetch business logo",ke)}})()},[]);const qe=async()=>{const ie=le?.trim();if(!ie||["Untitled Consulting Agreement"].includes(ie)){L("Please enter a valid document name."),Ie.current&&Ie.current.focus();return}try{await Ve(n)}catch(ke){if(ke.response&&ke.response.status===422&&ke.response.data.suggested_name){const Ge=ke.response.data.suggested_name;L(`Name "${ie}" is already taken.`),W(Ge),Ie.current&&Ie.current.focus()}}},[St,un]=R.useState(null),an=ie=>{un(ie.active)},Lt=ie=>{const{active:ke,over:Ge}=ie;if(un(null),!!Ge&&Ge.id==="document-canvas"){const Ze=document.getElementById("printable-document");if(Ze&&ke.rect.current.translated){const pt=Ze.getBoundingClientRect(),st=(ke.rect.current.translated.left-pt.left)/a,Ut=(ke.rect.current.translated.top-pt.top)/a;ke.data.current?.type==="toolbar-item"?ft({isOpen:!0,data:{id:null,position:{x:st,y:Ut},type:"all",required:!0,order:ne.length+1}}):ke.data.current?.type==="signature-field"&&Ae(ke.id,{position:{x:st,y:Ut}})}}},ts=ie=>{if(ie.id)Ae(ie.id,{metadata:{signeeName:ie.signeeName,signeeEmail:ie.signeeEmail,type:ie.type,required:ie.required,order:ie.order}});else{const ke={id:qm(),position:at.data.position,metadata:{signeeName:ie.signeeName,signeeEmail:ie.signeeEmail,type:ie.type,required:ie.required,order:ie.order}};fe(ke)}},ns=ie=>{ft({isOpen:!0,data:{id:ie.id,...ie.metadata}})},vi=()=>{ft({isOpen:!0,data:{id:null,position:{x:50,y:100},type:"all",required:!0,order:ne.length+1}})},Ps=async()=>{if(!e){Be.error("Please save the document before printing.");return}x(!0);try{let ie=V;if(V&&!V.startsWith("data:")){const Ze=await nt(V);Ze&&(ie=Ze)}const ke=renderToStaticMarkup(r.jsx(v2,{data:K,content:q,zoom:1,printing:!0,styles:Qe,signatures:ne,businessLogo:ie})),Ge=await Ya(e,ke,le);Ge.url&&window.open(Ge.url,"_blank")}catch(ie){console.error("PDF Generation failed",ie),Be.error("Failed to generate PDF. Please try again.")}finally{x(!1)}},yn=async()=>{if(!e){Be.error("Please save the document before exporting.");return}A(!0);try{let ie=V;if(V&&!V.startsWith("data:")){const Ze=await nt(V);Ze&&(ie=Ze)}const ke=fw(K,q,le,ne,ie),Ge=await Ya(e,ke,le);if(Ge.url){const Ze=document.createElement("a");Ze.href=Ge.url,Ze.download=`${le.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.pdf`,document.body.appendChild(Ze),Ze.click(),document.body.removeChild(Ze),Be.success("Document exported successfully")}}catch(ie){console.error("Export failed",ie),Be.error("Failed to export document")}finally{A(!1)}},ss=()=>{if(!e){Be.error("Please save the document before sending.");return}E(!0)},Fn=ie=>{ie&&ie.sent_at&&je(ie.sent_at)},da=ie=>{Nt(ie),D(ie),u(!1),Be.success(`Previewing Version ${ie.version_number}`)},ua=()=>{ht(),D(null),Be.success("Exited preview mode")},hn=ie=>{mt(ie),D(null)},vn=async ie=>{const ke=Be.loading("Preparing version PDF...");try{let Ge=ie.content;if(typeof Ge=="string")try{Ge=JSON.parse(Ge)}catch{}const Ze=Ge.formData||K,pt=Ge.docContent||q;let st=V;if(V&&!V.startsWith("data:")){const dt=await nt(V);dt&&(st=dt)}const Ut=fw(Ze,pt,`${le} - v${ie.version_number}`,[],st),rn=await Ya(e,Ut,`${le} - v${ie.version_number}`);if(rn.url){const dt=document.createElement("a");dt.href=rn.url,dt.download=`${le.replace(/[^a-z0-9]/gi,"_")}_v${ie.version_number}.pdf`,document.body.appendChild(dt),dt.click(),document.body.removeChild(dt),Be.success(`Version ${ie.version_number} downloaded`,{id:ke})}}catch(Ge){console.error("Version download failed",Ge),Be.error("Failed to download version PDF",{id:ke})}};return U?r.jsx("div",{className:"flex h-screen items-center justify-center bg-slate-50",children:r.jsxs("div",{className:"text-center",children:[r.jsx(gs,{size:40,className:"animate-spin text-indigo-600 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-500 font-medium",children:"Loading Document..."})]})}):r.jsx(Qm,{sensors:Je,onDragStart:an,onDragEnd:Lt,children:r.jsxs("div",{className:"flex flex-col h-screen bg-slate-100 overflow-hidden",children:[r.jsx(lv,{isOpen:at.isOpen,onClose:()=>ft({isOpen:!1,data:null}),onSave:ts,initialData:at.data,parties:{disclosingPartyName:K.clientName,receivingPartyName:K.consultantName,disclosingSignatoryName:K.clientSignatoryName,receivingSignatoryName:K.consultantSignatoryName}}),r.jsx(iv,{dropAnimation:{sideEffects:({active:ie})=>(document.body.style.cursor="grabbing",()=>{document.body.style.cursor=""})},children:St?St.data.current?.type==="toolbar-item"?r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-indigo-500 bg-white shadow-xl opacity-90 cursor-grabbing ring-2 ring-indigo-500/20 w-48",children:[r.jsx("div",{className:"p-2 rounded-md bg-indigo-100 text-indigo-600",children:r.jsx("div",{className:"w-5 h-5 flex items-center justify-center font-bold",children:"+"})}),r.jsx("span",{className:"text-sm font-medium text-slate-900",children:"Placing Field..."})]}):St.data.current?.type==="signature-field"?r.jsxs("div",{className:"w-64 bg-white/95 backdrop-blur-sm border-2 border-indigo-500 rounded-lg shadow-2xl p-3 flex flex-col cursor-grabbing",children:[r.jsx("div",{className:"flex items-center gap-2 text-indigo-700 font-semibold border-b pb-2 mb-2",children:r.jsx("span",{children:St.data.current.signeeName||"Signature"})}),r.jsx("div",{className:"h-10 flex items-center justify-center text-indigo-200",children:"Sign Here"})]}):null:null}),T&&r.jsxs("div",{className:"bg-amber-100 border-b border-amber-200 px-4 py-2 flex items-center justify-between text-amber-800 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jo,{size:16}),r.jsxs("span",{className:"font-medium",children:["Previewing Version ",T.version_number]})]}),r.jsxs("button",{onClick:ua,className:"text-amber-700 hover:text-amber-900 font-medium hover:underline flex items-center gap-1",children:[r.jsx(ja,{size:14})," Exit Preview"]})]}),r.jsx(W0,{isOpen:C,onClose:()=>E(!1),documentId:e,documentName:le,isReminder:!!xe,onSuccess:Fn,getHtmlContent:async()=>{let ie=V;if(V&&!V.startsWith("data:")){const ke=await nt(V);ke&&(ie=ke)}return fw(K,q,le,ne,ie)},signatures:ne}),r.jsxs("header",{className:"no-print h-14 md:h-16 bg-white/80 backdrop-blur-md border-b border-slate-200/60 px-4 md:px-6 flex items-center justify-between flex-shrink-0 z-30 shadow-sm relative transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[r.jsx("button",{onClick:tt,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors flex-shrink-0",children:r.jsx(vl,{size:20})}),r.jsxs("div",{className:"min-w-0 relative",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{ref:Ie,type:"text",value:le,onChange:ie=>{_e(ie.target.value),M&&L(null)},className:`font-bold text-sm md:text-lg bg-transparent border-b-2 focus:ring-0 p-0 m-0 w-auto min-w-[150px] max-w-[300px] placeholder-slate-400 truncate transition-colors ${M?"border-red-500 text-slate-800 ring-4 ring-red-500/10 rounded-sm px-1 -mx-1":"border-transparent hover:border-slate-200 text-slate-800"}`,placeholder:"Enter Document Name"}),M&&r.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 bg-white rounded-lg shadow-xl border border-red-100 z-50 p-3",children:[r.jsxs("div",{className:"flex items-start gap-2 text-red-600 mb-2",children:[r.jsx(xr,{size:16}),r.jsx("p",{className:"text-xs font-semibold",children:M})]}),I&&r.jsxs("div",{className:"bg-slate-50 rounded p-2",children:[r.jsx("p",{className:"text-[10px] text-slate-500 mb-1 uppercase font-bold",children:"Suggestion:"}),r.jsx("button",{onClick:()=>{_e(I),L(null)},className:"text-sm font-bold text-indigo-600 hover:underline",children:I})]})]})]}),r.jsx("button",{onClick:$e,className:"p-1.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-md transition-colors",children:r.jsx(RS,{size:16})}),xe&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-emerald-50 text-emerald-600 text-[10px] font-medium border border-emerald-100",children:[r.jsx(ii,{size:10})," Sent"]})]}),r.jsx("p",{className:"text-[10px] md:text-xs text-slate-400 font-medium whitespace-nowrap hidden sm:block mt-0.5",children:e?"Autosaved locally":"Draft"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[r.jsxs("div",{className:"hidden lg:flex items-center bg-slate-100 rounded-lg p-1 mr-4",children:[r.jsx("button",{onClick:Fe,className:"p-1.5 hover:bg-white rounded-md text-slate-500",children:r.jsx(Um,{size:16})}),r.jsxs("span",{className:"text-xs font-semibold text-slate-600 w-12 text-center",children:[Math.round(a*100),"%"]}),r.jsx("button",{onClick:De,className:"p-1.5 hover:bg-white rounded-md text-slate-500",children:r.jsx(Hm,{size:16})})]}),r.jsxs("button",{onClick:()=>u(!0),className:"hidden lg:flex items-center gap-2 px-4 py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all",children:[r.jsx(Xa,{size:18}),r.jsx("span",{children:"History"})]}),r.jsxs("button",{onClick:Ps,disabled:g,className:"hidden lg:flex items-center gap-2 px-4 py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all disabled:opacity-50",children:[g?r.jsx(gs,{size:18,className:"animate-spin"}):r.jsx(tf,{size:18}),r.jsx("span",{children:"Print"})]}),r.jsxs("button",{onClick:ss,className:`hidden lg:flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg border border-transparent transition-all ${xe?"text-amber-600 hover:bg-amber-50 hover:border-amber-200":"text-slate-600 hover:bg-slate-50 hover:border-slate-200"}`,children:[xe?r.jsx(wc,{size:18}):r.jsx(ri,{size:18}),r.jsx("span",{children:xe?"Remind":"Send"})]}),r.jsxs("button",{onClick:yn,disabled:w,className:"hidden lg:flex items-center gap-2 px-4 py-2 text-slate-600 text-sm font-medium hover:bg-slate-50 rounded-lg border border-transparent hover:border-slate-200 transition-all disabled:opacity-50",children:[w?r.jsx(gs,{size:18,className:"animate-spin"}):r.jsx(wl,{size:18}),r.jsx("span",{children:"Export"})]}),r.jsxs("button",{onClick:qe,className:`hidden lg:flex items-center gap-2 px-5 py-2 rounded-lg text-white font-medium shadow-md transition-all ${H?"bg-emerald-500":"bg-indigo-600 hover:bg-indigo-700"}`,children:[H?r.jsx(ii,{size:18}):r.jsx(Sl,{size:18}),r.jsx("span",{children:H?"Saved!":"Save"})]})]})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row flex-1 overflow-hidden relative pb-[70px] lg:pb-0",children:[r.jsx("div",{className:`no-print w-full lg:w-[400px] h-full bg-white border-r border-slate-200 overflow-y-auto z-20 shadow-sm flex-shrink-0 lg:order-1 ${t||s==="edit"?"block":"hidden"}`,children:r.jsx(AZ,{formData:K,onChange:ee,docContent:q,onContentChange:he,addSection:ce,removeSection:G,updateSection:ue,reorderSections:Se,styles:Qe,onStyleUpdate:Kt,onStyleReset:Ke})}),r.jsxs("div",{className:`flex-1 h-full overflow-y-auto bg-slate-50/50 p-4 md:p-8 sm:p-12 flex justify-center items-start scrollbar-thin scrollbar-thumb-slate-300 lg:order-2 ${t||s==="preview"?"flex":"hidden"}`,style:{backgroundImage:"radial-gradient(#cbd5e1 1px, transparent 1px)",backgroundSize:"20px 20px"},children:[r.jsx(v2,{data:Gt,content:He,zoom:a,signatures:ne,onRemoveSignature:Pe,onEditSignature:ns,businessLogo:V,styles:Qe}),!t&&s==="preview"&&r.jsx("button",{onClick:vi,className:"fixed bottom-24 right-6 w-14 h-14 bg-indigo-600 text-white rounded-full shadow-lg flex items-center justify-center z-30",children:"+"})]})]}),r.jsx(V0,{documentId:e,isOpen:c,onClose:()=>u(!1),onPreview:da,onDownload:vn,onRestore:hn}),!t&&r.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 flex justify-between items-center px-6 py-3 pb-safe z-40 safe-area-bottom",children:[r.jsxs("button",{onClick:()=>i("edit"),className:`flex flex-col items-center gap-1 ${s==="edit"?"text-indigo-600":"text-slate-400"}`,children:[r.jsx(ls,{size:24}),r.jsx("span",{className:"text-[10px]",children:"Editor"})]}),r.jsxs("button",{onClick:()=>i("preview"),className:`flex flex-col items-center gap-1 ${s==="preview"?"text-indigo-600":"text-slate-400"}`,children:[r.jsx(jo,{size:24}),r.jsx("span",{className:"text-[10px]",children:"Preview"})]}),r.jsxs("button",{onClick:qe,className:`flex flex-col items-center gap-1 ${H?"text-emerald-500":"text-slate-400"}`,children:[r.jsx(Sl,{size:24}),r.jsx("span",{className:"text-[10px]",children:"Save"})]}),r.jsxs("button",{onClick:()=>f(!0),className:`flex flex-col items-center gap-1 ${h?"text-indigo-600":"text-slate-400"}`,children:[r.jsx(TS,{size:24}),r.jsx("span",{className:"text-[10px]",children:"More"})]})]})]})})},_Z=[{id:"nda",title:"Non-Disclosure Agreement",description:"Standard confidentiality agreement for business partnerships.",icon:zH,color:"bg-indigo-500",available:!0,route:"/documents/nda"},{id:"offer-letter",title:"Employment Offer Letter",description:"Formal job offer with compensation and benefits details.",icon:_0,color:"bg-blue-500",available:!0,route:"/documents/offer-letter"},{id:"consulting-agreement",title:"Consulting Agreement",description:"Contract defining scope, services, and payment terms.",icon:XH,color:"bg-violet-500",available:!0,route:"/documents/consulting-agreement"},{id:"proposal",title:"Business Proposal",description:"Comprehensive proposal with timeline, scope, and pricing.",icon:ls,color:"bg-emerald-500",available:!0,route:"/documents/proposal"},{id:"invoice",title:"Service Invoice",description:"Professional invoice template with tax calculations.",icon:BH,color:"bg-orange-500",available:!0,route:"/documents/invoice"}],jZ=({isOpen:n,onClose:e})=>{const t=yi(),[s,i]=R.useState("grid"),a=o=>{o.available&&(t(o.route),e())};return Hh.createPortal(r.jsx(Zn,{children:n&&r.jsxs(r.Fragment,{children:[r.jsx(ze.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-[9998]",onClick:e},"backdrop"),r.jsx(ze.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-0 m-auto max-w-4xl h-fit max-h-[90vh] z-[9999] p-4 pointer-events-none flex items-center justify-center",children:r.jsxs("div",{className:"bg-white/95 backdrop-blur-md w-full rounded-2xl shadow-2xl overflow-hidden border border-white/20 relative pointer-events-auto flex flex-col max-h-full",children:[r.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-start bg-gradient-to-br from-slate-50 to-white/50",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-900 tracking-tight",children:"Create New Document"}),r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Select a premium template to get started with your document."})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-lg border border-slate-200",children:[r.jsx("button",{onClick:()=>i("grid"),className:`p-1.5 rounded-md transition-all ${s==="grid"?"bg-white shadow text-indigo-600":"text-slate-400 hover:text-slate-600"}`,title:"Grid View",children:r.jsx(WD,{size:18})}),r.jsx("button",{onClick:()=>i("list"),className:`p-1.5 rounded-md transition-all ${s==="list"?"bg-white shadow text-indigo-600":"text-slate-400 hover:text-slate-600"}`,title:"List View",children:r.jsx(jS,{size:18})})]}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-full transition-colors text-slate-400 hover:text-slate-600",children:r.jsx(ja,{size:24})})]})]}),r.jsx("div",{className:`p-6 overflow-y-auto ${s==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"flex flex-col gap-3"}`,children:_Z.map(o=>r.jsxs("button",{onClick:()=>a(o),disabled:!o.available,className:`group relative transition-all text-left outline-none focus:ring-2 ring-indigo-500/20 rounded-xl
                                            ${s==="grid"?"p-6 border border-slate-200 hover:border-indigo-300 hover:shadow-lg hover:-translate-y-1 bg-white flex flex-col items-start gap-4":"p-4 border border-slate-200 hover:border-indigo-300 hover:bg-indigo-50/30 flex items-center gap-4 bg-white"}
                                            ${!o.available&&"opacity-60 cursor-not-allowed grayscale"}
                                        `,children:[r.jsx("div",{className:`
                                            flex items-center justify-center text-white shadow-lg rounded-xl transition-transform group-hover:scale-110 duration-300
                                            ${s==="grid"?"w-14 h-14 mb-2":"w-12 h-12"}
                                            ${o.color}
                                        `,children:r.jsx(o.icon,{size:s==="grid"?28:24})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("h3",{className:`font-bold text-slate-800 flex items-center gap-2 ${s==="grid"?"text-lg":"text-base"}`,children:[o.title,!o.available&&r.jsx("span",{className:"text-[10px] uppercase tracking-wider font-bold bg-slate-200 text-slate-500 px-2 py-0.5 rounded-full",children:"Soon"})]}),r.jsx("p",{className:`text-slate-500 leading-relaxed ${s==="grid"?"text-sm mt-2 line-clamp-3":"text-sm mt-0.5 line-clamp-1"}`,children:o.description})]}),o.available&&r.jsx("div",{className:`
                                                text-slate-300 group-hover:text-indigo-500 transition-colors
                                                ${s==="grid"?"absolute top-6 right-6 opacity-0 group-hover:opacity-100 -translate-x-2 group-hover:translate-x-0 transition-all duration-300":""}
                                            `,children:r.jsx(Qp,{size:20})})]},o.id))}),r.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-100 text-center text-xs text-slate-400 font-medium",children:["Can't find what you're looking for? ",r.jsx("button",{className:"text-indigo-600 hover:underline",children:"Request a template"})]})]})},"modal")]})}),document.body)},kZ=({isOpen:n,onClose:e,history:t,loading:s})=>n?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/20 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[80vh] flex flex-col overflow-hidden",children:[r.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between bg-slate-50",children:[r.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[r.jsx(ri,{size:18,className:"text-slate-500"})," Share History"]}),r.jsx("button",{onClick:e,className:"p-1 hover:bg-slate-200 rounded text-slate-500 transition-colors",children:r.jsx(ja,{size:20})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:s?r.jsx("div",{className:"text-center py-8 text-slate-500",children:"Loading history..."}):t.length===0?r.jsxs("div",{className:"text-center py-12 text-slate-400",children:[r.jsx(ri,{size:48,className:"mx-auto mb-2 opacity-20"}),r.jsx("p",{children:"No share history found for this document."})]}):t.map(i=>r.jsxs("div",{className:"bg-white border border-slate-100 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4 mb-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 flex-shrink-0",children:r.jsx(Mo,{size:20})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-slate-900",children:i.recipient_email}),r.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-2 mt-1",children:[r.jsx(Gu,{size:12}),new Date(i.sent_at).toLocaleString()]})]})]}),r.jsxs("div",{className:"text-xs text-slate-400 bg-slate-50 px-2 py-1 rounded h-fit whitespace-nowrap",children:["Sent by: ",i.sender?.name||"System"]})]}),i.message&&r.jsxs("div",{className:"bg-slate-50 rounded-md p-3 text-sm text-slate-600 mt-2 flex gap-2",children:[r.jsx(yU,{size:16,className:"text-slate-400 flex-shrink-0 mt-0.5"}),r.jsxs("p",{className:"italic",children:['"',i.message,'"']})]})]},i.id))})]})}):null,cv=({title:n,subtitle:e,children:t})=>r.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-900 tracking-tight",children:n}),e&&r.jsx("p",{className:"text-slate-500 mt-1 text-sm",children:e})]}),r.jsx("div",{className:"flex items-center gap-3",children:t})]}),hb=43200,dj=1440,uj=Symbol.for("constructDateFrom");function aN(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&uj in n?n[uj](e):n instanceof Date?new n.constructor(e):new Date(e)}function Hu(n,e){return aN(n,n)}let RZ={};function DZ(){return RZ}function hj(n){const e=Hu(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function rN(n,...e){const t=aN.bind(null,n||e.find(s=>typeof s=="object"));return e.map(t)}function Ub(n,e){const t=+Hu(n)-+Hu(e);return t<0?-1:t>0?1:t}function MZ(n){return aN(n,Date.now())}function PZ(n,e,t){const[s,i]=rN(t?.in,n,e),a=s.getFullYear()-i.getFullYear(),o=s.getMonth()-i.getMonth();return a*12+o}function OZ(n){return e=>{const s=(n?Math[n]:Math.trunc)(e);return s===0?0:s}}function LZ(n,e){return+Hu(n)-+Hu(e)}function FZ(n,e){const t=Hu(n);return t.setHours(23,59,59,999),t}function zZ(n,e){const t=Hu(n),s=t.getMonth();return t.setFullYear(t.getFullYear(),s+1,0),t.setHours(23,59,59,999),t}function IZ(n,e){const t=Hu(n);return+FZ(t)==+zZ(t)}function BZ(n,e,t){const[s,i,a]=rN(t?.in,n,n,e),o=Ub(i,a),c=Math.abs(PZ(i,a));if(c<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*c);let u=Ub(i,a)===-o;IZ(s)&&c===1&&Ub(s,a)===1&&(u=!1);const h=o*(c-+u);return h===0?0:h}function HZ(n,e,t){const s=LZ(n,e)/1e3;return OZ(t?.roundingMethod)(s)}const UZ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},VZ=(n,e,t)=>{let s;const i=UZ[n];return typeof i=="string"?s=i:e===1?s=i.one:s=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+s:s+" ago":s};function mw(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const WZ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},GZ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},YZ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},XZ={date:mw({formats:WZ,defaultWidth:"full"}),time:mw({formats:GZ,defaultWidth:"full"}),dateTime:mw({formats:YZ,defaultWidth:"full"})},KZ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ZZ=(n,e,t,s)=>KZ[n];function fp(n){return(e,t)=>{const s=t?.context?String(t.context):"standalone";let i;if(s==="formatting"&&n.formattingValues){const o=n.defaultFormattingWidth||n.defaultWidth,c=t?.width?String(t.width):o;i=n.formattingValues[c]||n.formattingValues[o]}else{const o=n.defaultWidth,c=t?.width?String(t.width):n.defaultWidth;i=n.values[c]||n.values[o]}const a=n.argumentCallback?n.argumentCallback(e):e;return i[a]}}const JZ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},QZ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},qZ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$Z={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eJ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},tJ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},nJ=(n,e)=>{const t=Number(n),s=t%100;if(s>20||s<10)switch(s%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},sJ={ordinalNumber:nJ,era:fp({values:JZ,defaultWidth:"wide"}),quarter:fp({values:QZ,defaultWidth:"wide",argumentCallback:n=>n-1}),month:fp({values:qZ,defaultWidth:"wide"}),day:fp({values:$Z,defaultWidth:"wide"}),dayPeriod:fp({values:eJ,defaultWidth:"wide",formattingValues:tJ,defaultFormattingWidth:"wide"})};function mp(n){return(e,t={})=>{const s=t.width,i=s&&n.matchPatterns[s]||n.matchPatterns[n.defaultMatchWidth],a=e.match(i);if(!a)return null;const o=a[0],c=s&&n.parsePatterns[s]||n.parsePatterns[n.defaultParseWidth],u=Array.isArray(c)?aJ(c,g=>g.test(o)):iJ(c,g=>g.test(o));let h;h=n.valueCallback?n.valueCallback(u):u,h=t.valueCallback?t.valueCallback(h):h;const f=e.slice(o.length);return{value:h,rest:f}}}function iJ(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function aJ(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function rJ(n){return(e,t={})=>{const s=e.match(n.matchPattern);if(!s)return null;const i=s[0],a=e.match(n.parsePattern);if(!a)return null;let o=n.valueCallback?n.valueCallback(a[0]):a[0];o=t.valueCallback?t.valueCallback(o):o;const c=e.slice(i.length);return{value:o,rest:c}}}const oJ=/^(\d+)(th|st|nd|rd)?/i,lJ=/\d+/i,cJ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},dJ={any:[/^b/i,/^(a|c)/i]},uJ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},hJ={any:[/1/i,/2/i,/3/i,/4/i]},fJ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},mJ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},gJ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},pJ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},xJ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},bJ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},yJ={ordinalNumber:rJ({matchPattern:oJ,parsePattern:lJ,valueCallback:n=>parseInt(n,10)}),era:mp({matchPatterns:cJ,defaultMatchWidth:"wide",parsePatterns:dJ,defaultParseWidth:"any"}),quarter:mp({matchPatterns:uJ,defaultMatchWidth:"wide",parsePatterns:hJ,defaultParseWidth:"any",valueCallback:n=>n+1}),month:mp({matchPatterns:fJ,defaultMatchWidth:"wide",parsePatterns:mJ,defaultParseWidth:"any"}),day:mp({matchPatterns:gJ,defaultMatchWidth:"wide",parsePatterns:pJ,defaultParseWidth:"any"}),dayPeriod:mp({matchPatterns:xJ,defaultMatchWidth:"any",parsePatterns:bJ,defaultParseWidth:"any"})},vJ={code:"en-US",formatDistance:VZ,formatLong:XZ,formatRelative:ZZ,localize:sJ,match:yJ,options:{weekStartsOn:0,firstWeekContainsDate:1}};function wJ(n,e,t){const s=DZ(),i=t?.locale??s.locale??vJ,a=2520,o=Ub(n,e);if(isNaN(o))throw new RangeError("Invalid time value");const c=Object.assign({},t,{addSuffix:t?.addSuffix,comparison:o}),[u,h]=rN(t?.in,...o>0?[e,n]:[n,e]),f=HZ(h,u),g=(hj(h)-hj(u))/1e3,x=Math.round((f-g)/60);let w;if(x<2)return t?.includeSeconds?f<5?i.formatDistance("lessThanXSeconds",5,c):f<10?i.formatDistance("lessThanXSeconds",10,c):f<20?i.formatDistance("lessThanXSeconds",20,c):f<40?i.formatDistance("halfAMinute",0,c):f<60?i.formatDistance("lessThanXMinutes",1,c):i.formatDistance("xMinutes",1,c):x===0?i.formatDistance("lessThanXMinutes",1,c):i.formatDistance("xMinutes",x,c);if(x<45)return i.formatDistance("xMinutes",x,c);if(x<90)return i.formatDistance("aboutXHours",1,c);if(x<dj){const A=Math.round(x/60);return i.formatDistance("aboutXHours",A,c)}else{if(x<a)return i.formatDistance("xDays",1,c);if(x<hb){const A=Math.round(x/dj);return i.formatDistance("xDays",A,c)}else if(x<hb*2)return w=Math.round(x/hb),i.formatDistance("aboutXMonths",w,c)}if(w=BZ(h,u),w<12){const A=Math.round(x/hb);return i.formatDistance("xMonths",A,c)}else{const A=w%12,C=Math.trunc(w/12);return A<3?i.formatDistance("aboutXYears",C,c):A<9?i.formatDistance("overXYears",C,c):i.formatDistance("almostXYears",C+1,c)}}function SJ(n,e){return wJ(n,MZ(n),e)}const NJ=({viewMode:n})=>r.jsxs("div",{className:`animate-pulse ${n==="list"?"flex items-center gap-6 py-4 px-6 border-b border-slate-100 last:border-0":"bg-white border border-slate-200 rounded-lg p-6"}`,children:[r.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-lg"}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx("div",{className:"h-4 bg-slate-100 rounded w-1/3"}),r.jsx("div",{className:"h-3 bg-slate-50 rounded w-1/4"})]}),n==="list"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden md:block w-24 h-4 bg-slate-100 rounded"}),r.jsx("div",{className:"hidden md:block w-32 h-4 bg-slate-100 rounded"})]})]}),AJ=({doc:n,navigate:e,getStatusStyle:t,variants:s,onViewHistory:i})=>r.jsxs(ze.div,{variants:s,className:"bg-white rounded-lg border border-slate-200 p-5 cursor-pointer shadow-sm hover:shadow-md hover:border-indigo-300 transition-all group flex flex-col justify-between h-full",onClick:()=>e(`/documents/${n.type?.slug||n.type}/${n.id}`),children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsx("div",{className:"p-2.5 bg-indigo-50 text-indigo-600 rounded-lg group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:r.jsx(ls,{size:20,strokeWidth:2})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:a=>i(a,n.id),className:"px-2 py-0.5 rounded text-xs font-semibold bg-slate-50 text-slate-500 border border-slate-200 hover:text-indigo-600 hover:border-indigo-200 transition-colors flex items-center gap-1",title:"View Share History",children:[r.jsx(ri,{size:12})," History"]}),r.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold border ${t(n.status)}`,children:n.status})]})]}),r.jsx("h3",{className:"font-bold text-base text-slate-900 mb-1 group-hover:text-indigo-600 transition-colors line-clamp-1",children:n.title||n.name}),r.jsx("p",{className:"text-xs font-medium text-slate-400 mb-4 uppercase tracking-wider",children:n.type?.name||n.type})]}),r.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-slate-100 mt-auto",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[n.creator?.avatar_url?r.jsx("img",{src:n.creator.avatar_url,alt:n.creator.name,className:"w-5 h-5 rounded-full object-cover border border-slate-200"}):r.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-[8px] font-bold text-white border border-transparent shadow-sm",children:n.creator?.name?n.creator.name.substring(0,2).toUpperCase():"NA"}),r.jsx("span",{className:"text-xs font-medium text-slate-600 truncate max-w-[100px]",title:n.creator?.name,children:n.creator?.name||"Unknown"})]}),r.jsxs("span",{className:"text-[10px] font-medium text-slate-400 flex items-center gap-1",children:[r.jsx(Xa,{size:10})," ",new Date(n.updated_at).toLocaleDateString()]})]})]}),CJ=({doc:n,navigate:e,getStatusStyle:t,variants:s,permissions:i,onViewHistory:a,isSelected:o,toggleSelect:c,showCheckbox:u,activeMenuId:h,setActiveMenuId:f,handleView:g,handleDelete:x,handleRestore:w,viewMode:A})=>r.jsxs(ze.div,{variants:s,className:`px-6 py-3 grid grid-cols-[auto_2fr_1fr_1fr_1fr_1fr_auto] gap-6 items-center hover:bg-slate-50 transition-colors group cursor-pointer border-l-2 border-transparent hover:border-indigo-600 border-b border-slate-50 last:border-b-0 ${o?"bg-indigo-50/30":""}`,onClick:()=>e(`/documents/${n.type?.slug||n.type}/${n.id}`),children:[r.jsx("div",{onClick:C=>{C.stopPropagation(),c(n.id)},children:o?r.jsx(JD,{size:18,className:"text-indigo-600"}):r.jsx(QD,{size:18,className:"text-slate-300 group-hover:text-slate-400"})}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg transition-colors ${o?"bg-indigo-100 text-indigo-600":"bg-slate-100 text-slate-500 group-hover:bg-indigo-600 group-hover:text-white"}`,children:r.jsx(ls,{size:18,strokeWidth:2})}),r.jsx("div",{children:r.jsx("span",{className:`font-semibold block text-sm transition-colors ${o?"text-indigo-900":"text-slate-900 group-hover:text-indigo-600"}`,children:n.title||n.name})})]}),r.jsx("div",{className:"text-sm font-medium text-slate-500 capitalize",children:n.type?.name||n.type}),r.jsx("div",{children:r.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-semibold border ${t(n.status)}`,children:n.status})}),r.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1.5 font-medium",children:[r.jsx(Xa,{size:12,className:"text-slate-400"})," ",SJ(new Date(n.updated_at),{addSuffix:!0})]}),r.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-2",children:[n.creator?.avatar_url?r.jsx("img",{src:n.creator.avatar_url,alt:n.creator.name,className:"w-6 h-6 rounded-full object-cover border border-slate-200 shadow-sm"}):r.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-[10px] font-bold text-white border border-transparent shadow-sm",children:n.creator?.name?n.creator.name.substring(0,2).toUpperCase():"NA"}),r.jsx("span",{className:"font-medium text-slate-700",children:n.creator?.name||"Unknown"})]}),r.jsxs("div",{className:"text-right flex items-center justify-end gap-2 relative",children:[r.jsx("button",{onClick:C=>a(C,n.id),className:"p-1.5 hover:bg-indigo-50 rounded text-slate-400 hover:text-indigo-600 transition-colors",title:"View Share History",children:r.jsx(ri,{size:16})}),r.jsx("button",{onClick:C=>{C.stopPropagation(),f(h===n.id?null:n.id)},className:"p-1.5 hover:bg-slate-200 rounded text-slate-400 hover:text-indigo-600 transition-colors",children:r.jsx(UD,{size:16})}),r.jsx(Zn,{children:h===n.id&&r.jsx(ze.div,{initial:{opacity:0,scale:.95,y:0,x:-10},animate:{opacity:1,scale:1,y:0,x:0},exit:{opacity:0,scale:.95},className:"absolute right-0 top-8 w-48 bg-white border border-slate-100 rounded-xl shadow-xl z-50 p-1.5 flex flex-col gap-0.5",onClick:C=>C.stopPropagation(),children:A==="active"?r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>{e(`/documents/${n.type?.slug||n.type}/${n.id}`),f(null)},className:"w-full text-left flex items-center gap-2.5 px-3 py-2 text-sm font-medium text-slate-600 hover:bg-slate-50 hover:text-indigo-600 rounded-lg transition-colors",children:[r.jsx(jo,{size:16})," View/Edit"]}),r.jsxs("button",{onClick:()=>{x(n.id),f(null)},className:"w-full text-left flex items-center gap-2.5 px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[r.jsx(ko,{size:16})," Delete"]})]}):r.jsxs("button",{onClick:()=>{w(n.id),f(null)},className:"w-full text-left flex items-center gap-2.5 px-3 py-2 text-sm font-medium text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors",children:[r.jsx(kS,{size:16})," Restore"]})})})]})]}),EJ=()=>{const n=yi(),{can:e}=Gm(),[t,s]=R.useState(!1),[i,a]=R.useState(()=>localStorage.getItem("documentViewMode")||"list"),[o,c]=R.useState(!0),[u,h]=R.useState([]),[f,g]=R.useState(!1),[x,w]=R.useState([]),[A,C]=R.useState({current_page:1,last_page:1,per_page:10,total:0,from:0,to:0}),[E,T]=R.useState(null),[D,M]=R.useState({search:"",status:"all",type:"all"}),L={canEdit:e("document.edit"),canDelete:e("document.delete"),canCreate:e("document.create")},I=fe=>{a(fe),localStorage.setItem("documentViewMode",fe)},W=R.useCallback(async(fe=1)=>{try{c(!0);const Ae={page:fe,per_page:A.per_page,search:D.search,status:D.status,type:D.type,view_mode:f?"trash":"active"},Pe=await Dt.get("/documents",{params:Ae});h(Pe.data.data||[]),Pe.data.meta&&C(Ve=>({...Ve,current_page:Pe.data.meta.current_page,last_page:Pe.data.meta.last_page,total:Pe.data.meta.total,from:Pe.data.meta.from,to:Pe.data.meta.to}))}catch(Ae){console.error("Failed to fetch documents",Ae),h([])}finally{c(!1)}},[D,f,A.per_page]),[V,Y]=R.useState(!1),[K,q]=R.useState([]),[ne,le]=R.useState(!1),_e=async(fe,Ae)=>{fe.stopPropagation(),Y(!0),le(!0);try{const Pe=await E5(Ae);q(Pe.data||[])}catch(Pe){console.error("Failed to load history",Pe)}finally{le(!1)}};R.useEffect(()=>{const fe=setTimeout(()=>{W(1)},300);return()=>clearTimeout(fe)},[W]),R.useEffect(()=>{const fe=()=>T(null);return document.addEventListener("click",fe),()=>document.removeEventListener("click",fe)},[]);const xe=(fe,Ae)=>{M(Pe=>({...Pe,[fe]:Ae}))},je=fe=>{switch(fe){case"draft":return"bg-slate-100 text-slate-700 border-slate-200";case"sent":return"bg-blue-50 text-blue-700 border-blue-200";case"signed":return"bg-emerald-50 text-emerald-700 border-emerald-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}},U=()=>{x.length===u.length&&u.length>0?w([]):w(u.map(fe=>fe.id))},H=fe=>{w(Ae=>Ae.includes(fe)?Ae.filter(Pe=>Pe!==fe):[...Ae,fe])},ee=async fe=>{if(window.confirm("Are you sure you want to move this document to trash?"))try{await Dt.delete(`/documents/${fe}`),Be.success("Document moved to trash"),W(A.current_page)}catch{Be.error("Failed to delete document")}},he=async()=>{if(window.confirm(`Delete ${x.length} documents?`))try{await Dt.post("/documents/bulk-delete",{ids:x}),Be.success(`${x.length} documents moved to trash`),w([]),W(A.current_page)}catch{Be.error("Failed to bulk delete")}},ce=async fe=>{try{await Dt.post(`/documents/${fe}/restore`),Be.success("Document restored"),W(A.current_page)}catch{Be.error("Failed to restore document")}},G=fe=>{n(`/documents/${fe.document_type?.slug||fe.type}/${fe.id}`)},ue={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},Se={hidden:{opacity:0,y:5},show:{opacity:1,y:0}};return r.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[r.jsx(cv,{title:"Documents",subtitle:"Manage, organize, and track your legal documents.",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:()=>{g(fe=>!fe),C(fe=>({...fe,current_page:1})),w([])},className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${f?"bg-red-100 text-red-700 border border-red-200":"bg-white text-slate-600 border border-slate-200 hover:bg-slate-50"}`,children:[f?r.jsx(kS,{size:16}):r.jsx(ko,{size:16}),f?"Back to All":"Trash"]}),L.canCreate&&!f&&r.jsxs("button",{onClick:()=>s(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-semibold flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-md shadow-indigo-600/20 text-sm",children:[r.jsx(df,{size:18,strokeWidth:2.5}),r.jsx("span",{children:"New Document"})]})]})}),r.jsxs("div",{className:"bg-white p-4 rounded-lg border border-slate-200 shadow-sm flex flex-col xl:flex-row gap-4 justify-between items-center",children:[r.jsxs("div",{className:"relative flex-1 w-full xl:max-w-lg group",children:[r.jsx(qp,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-indigo-600 transition-colors",size:18}),r.jsx("input",{type:"text",value:D.search,onChange:fe=>xe("search",fe.target.value),placeholder:"Search documents by name...",className:"w-full pl-10 pr-4 py-2 bg-slate-50 border-transparent rounded-lg text-sm focus:bg-white focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all placeholder-slate-400 text-slate-900 outline-none"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full xl:w-auto items-center",children:[r.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[r.jsx(VH,{size:16,className:"text-slate-400"}),r.jsxs("select",{value:D.type,onChange:fe=>xe("type",fe.target.value),className:"px-3 py-2 bg-slate-50 border-transparent hover:bg-slate-100 rounded-lg text-sm text-slate-600 font-medium outline-none focus:ring-2 focus:ring-indigo-100 cursor-pointer transition-colors w-full sm:w-auto",children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"nda",children:"NDA"}),r.jsx("option",{value:"proposal",children:"Proposal"}),r.jsx("option",{value:"invoice",children:"Invoice"})]})]}),r.jsx("div",{className:"w-px h-6 bg-slate-200 hidden sm:block"}),r.jsxs("select",{value:D.status,onChange:fe=>xe("status",fe.target.value),className:"px-3 py-2 bg-slate-50 border-transparent hover:bg-slate-100 rounded-lg text-sm text-slate-600 font-medium outline-none focus:ring-2 focus:ring-indigo-100 cursor-pointer transition-colors w-full sm:w-auto",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"draft",children:"Draft"}),r.jsx("option",{value:"sent",children:"Sent"}),r.jsx("option",{value:"signed",children:"Signed"})]}),r.jsx("div",{className:"w-px h-6 bg-slate-200 hidden sm:block"}),r.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-lg border border-slate-200",children:[r.jsx("button",{onClick:()=>I("list"),className:`p-1.5 rounded-md transition-all ${i==="list"?"bg-white shadow-sm text-indigo-600":"text-slate-400 hover:text-slate-600"}`,children:r.jsx(jS,{size:16})}),r.jsx("button",{onClick:()=>I("grid"),className:`p-1.5 rounded-md transition-all ${i==="grid"?"bg-white shadow-sm text-indigo-600":"text-slate-400 hover:text-slate-600"}`,children:r.jsx(WD,{size:16})})]})]})]}),x.length>0&&r.jsxs("div",{className:"flex items-center gap-4 w-full bg-slate-50 p-2 rounded-lg border border-slate-200 animate-in fade-in slide-in-from-top-2",children:[r.jsxs("span",{className:"text-sm font-semibold text-slate-700 ml-2",children:[x.length," selected"]}),r.jsx("div",{className:"h-6 w-px bg-slate-300"}),r.jsxs("button",{onClick:he,className:"flex items-center gap-2 text-red-600 hover:bg-red-50 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[r.jsx(ko,{size:16})," Delete Selected"]})]}),r.jsxs("div",{className:`${i==="list"?"bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden":""}`,children:[o?r.jsx("div",{className:`p-6 ${i==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-0"}`,children:[1,2,3,4,5].map(fe=>r.jsx(NJ,{viewMode:i},fe))}):r.jsx(ze.div,{variants:ue,initial:"hidden",animate:"show",className:i==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"overflow-x-auto",children:i==="list"?r.jsxs("div",{className:"min-w-[800px]",children:[r.jsxs("div",{className:"bg-slate-50 border-b border-slate-200 px-6 py-3 grid grid-cols-[auto_2fr_1fr_1fr_1fr_1fr_auto] gap-6 text-xs font-bold text-slate-500 uppercase tracking-wider",children:[r.jsx("div",{className:"w-6",children:r.jsx("button",{onClick:U,children:u.length>0&&x.length===u.length?r.jsx(JD,{size:18,className:"text-slate-900"}):r.jsx(QD,{size:18})})}),r.jsx("div",{children:"Document Name"}),r.jsx("div",{children:"Type"}),r.jsx("div",{children:"Status"}),r.jsx("div",{children:"Updated"}),r.jsx("div",{children:"Owner"}),r.jsx("div",{className:"text-right",children:"Action"})]}),r.jsx("div",{className:"divide-y divide-slate-100",children:u.map(fe=>r.jsx(CJ,{doc:fe,navigate:n,getStatusStyle:je,variants:Se,permissions:L,onViewHistory:_e,isSelected:x.includes(fe.id),toggleSelect:H,showCheckbox:!0,activeMenuId:E,setActiveMenuId:T,handleView:G,handleDelete:ee,handleRestore:ce,viewMode:f?"trash":"active"},fe.id))})]}):u.map(fe=>r.jsx(AJ,{doc:fe,navigate:n,getStatusStyle:je,variants:Se,onViewHistory:_e},fe.id))},i),!o&&u.length===0&&r.jsxs("div",{className:"text-center py-20 col-span-full flex flex-col items-center justify-center",children:[r.jsx("div",{className:"p-4 bg-slate-50 rounded-full mb-4 ring-1 ring-slate-100",children:r.jsx(ls,{size:32,className:"text-slate-300",strokeWidth:1.5})}),r.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No documents found"}),r.jsx("p",{className:"text-slate-500 max-w-sm mx-auto mb-6 text-sm leading-relaxed",children:f?"Trash is empty.":"Start by creating your first document."})]})]}),A.total>0&&r.jsxs("div",{className:"border-t border-slate-200 p-4 bg-slate-50 flex flex-col sm:flex-row items-center justify-between gap-4 text-sm mt-auto rounded-b-xl",children:[r.jsxs("div",{className:"text-slate-500 font-medium",children:["Showing ",r.jsx("span",{className:"text-slate-900 font-bold",children:A.from})," to ",r.jsx("span",{className:"text-slate-900 font-bold",children:A.to})," of ",r.jsx("span",{className:"text-slate-900 font-bold",children:A.total})," results"]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("select",{value:A.per_page,onChange:fe=>C(Ae=>({...Ae,per_page:Number(fe.target.value),current_page:1})),className:"border border-slate-200 rounded-lg text-sm py-1.5 pl-2 pr-8 bg-white focus:outline-none focus:ring-2 focus:ring-slate-900/10 cursor-pointer font-medium text-slate-600",children:[r.jsx("option",{value:10,children:"10 per page"}),r.jsx("option",{value:20,children:"20 per page"}),r.jsx("option",{value:50,children:"50 per page"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>W(A.current_page-1),disabled:A.current_page<=1,className:"p-2 rounded-lg border border-slate-200 bg-white text-slate-600 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r.jsx(ey,{size:16})}),r.jsx("span",{className:"px-2 font-bold text-slate-700 min-w-[20px] text-center",children:A.current_page}),r.jsx("button",{onClick:()=>W(A.current_page+1),disabled:A.current_page>=A.last_page,className:"p-2 rounded-lg border border-slate-200 bg-white text-slate-600 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r.jsx(gl,{size:16})})]})]})]}),r.jsx(jZ,{isOpen:t,onClose:()=>s(!1)}),r.jsx(kZ,{isOpen:V,onClose:()=>Y(!1),history:K,loading:ne})]})},xl=({title:n,description:e,children:t,className:s=""})=>r.jsxs("div",{className:`p-0 md:p-0 ${s} mb-8`,children:[r.jsxs("div",{className:"mb-5 pb-4 border-b border-slate-200",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800 tracking-tight",children:n}),e&&r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:e})]}),r.jsx("div",{className:"space-y-5",children:t})]}),fs=({label:n,error:e,className:t="",...s})=>r.jsxs("div",{className:t,children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:n}),r.jsx("div",{className:"relative",children:r.jsx("input",{className:`block w-full rounded-lg border-slate-300 bg-white shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 sm:text-sm px-3.5 py-2.5 border transition-all duration-200 outline-none placeholder-slate-400 text-slate-900 ${e?"border-red-300 focus:border-red-500 focus:ring-red-200":"hover:border-slate-400"}`,...s})}),e&&r.jsxs("p",{className:"mt-1.5 text-xs font-medium text-red-600 flex items-center gap-1",children:[r.jsx(xr,{size:12})," ",e]})]}),fj=({label:n,error:e,className:t="",...s})=>r.jsxs("div",{className:t,children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:n}),r.jsx("textarea",{className:`block w-full rounded-lg border-slate-300 bg-white shadow-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 sm:text-sm px-3.5 py-2.5 border transition-all duration-200 outline-none placeholder-slate-400 text-slate-900 ${e?"border-red-300 focus:border-red-500 focus:ring-red-200":"hover:border-slate-400"}`,...s}),e&&r.jsxs("p",{className:"mt-1.5 text-xs font-medium text-red-600 flex items-center gap-1",children:[r.jsx(xr,{size:12})," ",e]})]}),$m=({loading:n,saved:e,onClick:t,label:s="Save Changes"})=>r.jsx("div",{className:"flex justify-end pt-6 border-t border-slate-200 mt-8",children:r.jsxs(ze.button,{whileHover:{scale:1.01},whileTap:{scale:.99},type:"submit",disabled:n,onClick:t,className:`inline-flex justify-center items-center py-2.5 px-6 border border-transparent shadow-sm text-sm font-semibold rounded-lg text-white transition-all duration-200 
                ${e?"bg-emerald-600 hover:bg-emerald-700":"bg-indigo-600 hover:bg-indigo-700"} 
                disabled:opacity-70 disabled:cursor-not-allowed`,children:[n?r.jsx(ty,{className:"animate-spin mr-2",size:16,strokeWidth:2.5}):e?r.jsx(ii,{className:"mr-2",size:16,strokeWidth:3}):r.jsx(Sl,{className:"mr-2",size:16,strokeWidth:2.5}),e?"Changes Saved":s]})}),eg=({message:n})=>r.jsxs(ze.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0},className:"flex items-center gap-3 text-emerald-700 text-sm font-medium bg-emerald-50 px-4 py-3 rounded-lg border border-emerald-200 mb-6",children:[r.jsx(ii,{size:16,strokeWidth:2.5,className:"text-emerald-600"}),n]}),tg=({message:n})=>r.jsxs(ze.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0},className:"flex items-center gap-3 text-red-700 text-sm font-medium bg-red-50 px-4 py-3 rounded-lg border border-red-200 mb-6",children:[r.jsx(xr,{size:16,strokeWidth:2.5,className:"text-red-500"}),n]}),TJ=({business:n,onUpdate:e})=>{const[t,s]=R.useState({name:"",email:"",phone:"",website:"",address:"",city:"",state:"",zip:"",country:"",industry:"",social_links:{linkedin:"",twitter:"",facebook:"",instagram:""}}),[i,a]=R.useState(!1),[o,c]=R.useState(!1),[u,h]=R.useState(null);R.useEffect(()=>{n&&s({name:n.name||"",email:n.email||"",phone:n.phone||"",website:n.website||"",address:n.address||"",city:n.city||"",state:n.state||"",zip:n.zip||"",country:n.country||"",industry:n.industry||"",social_links:n.social_links||{linkedin:"",twitter:"",facebook:"",instagram:""}})},[n]);const f=x=>{const{name:w,value:A}=x.target;if(w.startsWith("social_")){const C=w.replace("social_","");s(E=>({...E,social_links:{...E.social_links,[C]:A}}))}else s({...t,[w]:A});c(!1)},g=async x=>{x.preventDefault(),a(!0),h(null);try{const w=await P0(t);e(w.data),c(!0),setTimeout(()=>c(!1),3e3)}catch(w){console.error(w),h(w.response?.data?.message||"Failed to update settings")}finally{a(!1)}};return r.jsxs("form",{onSubmit:g,className:"max-w-3xl",children:[u&&r.jsx(tg,{message:u}),o&&r.jsx("div",{className:"mb-4",children:r.jsx(eg,{message:"Settings updated successfully."})}),r.jsx(xl,{title:"Business Information",description:"Basic contact information for your business.",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx("div",{className:"md:col-span-2",children:r.jsx(fs,{label:"Business Name",name:"name",value:t.name,onChange:f,required:!0})}),r.jsx(fs,{label:"Email",type:"email",name:"email",value:t.email,onChange:f}),r.jsx(fs,{label:"Phone",name:"phone",value:t.phone,onChange:f}),r.jsx("div",{className:"md:col-span-2",children:r.jsx(fs,{label:"Website",type:"url",name:"website",value:t.website,onChange:f,placeholder:"https://example.com"})})]})}),r.jsx(xl,{title:"Address Details",description:"Your business physical location.",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx("div",{className:"md:col-span-2",children:r.jsx(fs,{label:"Address",name:"address",value:t.address,onChange:f})}),r.jsx(fs,{label:"City",name:"city",value:t.city,onChange:f}),r.jsx(fs,{label:"State",name:"state",value:t.state,onChange:f}),r.jsx(fs,{label:"Zip / Postal Code",name:"zip",value:t.zip,onChange:f}),r.jsx(fs,{label:"Country",name:"country",value:t.country,onChange:f})]})}),r.jsx(xl,{title:"Social Profiles",description:"Connect your social media accounts.",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(fs,{label:"LinkedIn",type:"url",name:"social_linkedin",value:t.social_links?.linkedin||"",onChange:f,placeholder:"https://linkedin.com/in/..."}),r.jsx(fs,{label:"Twitter (X)",type:"url",name:"social_twitter",value:t.social_links?.twitter||"",onChange:f,placeholder:"https://twitter.com/..."}),r.jsx(fs,{label:"Facebook",type:"url",name:"social_facebook",value:t.social_links?.facebook||"",onChange:f,placeholder:"https://facebook.com/..."}),r.jsx(fs,{label:"Instagram",type:"url",name:"social_instagram",value:t.social_links?.instagram||"",onChange:f,placeholder:"https://instagram.com/..."})]})}),r.jsx("div",{className:"flex justify-end pt-2",children:r.jsx($m,{loading:i,saved:o})})]})},_J=({business:n,onUpdate:e})=>{const[t,s]=R.useState({invoice_prefix:"",invoice_terms:"",default_invoice_notes:"",bank_details:{account_name:"",bank_name:"",account_number:"",ifsc_code:"",swift_code:""}}),[i,a]=R.useState(!1),[o,c]=R.useState(!1),[u,h]=R.useState(null);R.useEffect(()=>{n&&s({invoice_prefix:n.invoice_prefix||"",invoice_terms:n.invoice_terms||"",default_invoice_notes:n.default_invoice_notes||"",bank_details:n.bank_details||{account_name:"",bank_name:"",account_number:"",ifsc_code:"",swift_code:""}})},[n]);const f=x=>{const{name:w,value:A}=x.target;if(w.startsWith("bank_")){const C=w.replace("bank_","");s(E=>({...E,bank_details:{...E.bank_details,[C]:A}}))}else s(C=>({...C,[w]:A}));c(!1)},g=async x=>{x.preventDefault(),a(!0),h(null);try{const w=await P0(t);e(w.data),c(!0),setTimeout(()=>c(!1),3e3)}catch(w){console.error(w),h(w.response?.data?.message||"Failed to update settings")}finally{a(!1)}};return r.jsxs("form",{onSubmit:g,className:"max-w-3xl",children:[u&&r.jsx(tg,{message:u}),o&&r.jsx("div",{className:"mb-4",children:r.jsx(eg,{message:"Invoice settings updated successfully."})}),r.jsx(xl,{title:"General Configuration",description:"Set your invoice number prefix.",children:r.jsxs("div",{children:[r.jsx(fs,{label:"Invoice Prefix",name:"invoice_prefix",value:t.invoice_prefix,onChange:f,placeholder:"INV-"}),r.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Prefix for invoice numbers (e.g., INV-0001)"})]})}),r.jsx(xl,{title:"Bank Account Details",description:"These details will be displayed on invoices for payments.",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx("div",{className:"md:col-span-2",children:r.jsx(fs,{label:"Account Name / Beneficiary Name",name:"bank_account_name",value:t.bank_details?.account_name||"",onChange:f})}),r.jsx("div",{className:"md:col-span-2",children:r.jsx(fs,{label:"Bank Name",name:"bank_bank_name",value:t.bank_details?.bank_name||"",onChange:f})}),r.jsx(fs,{label:"Account Number / IBAN",name:"bank_account_number",value:t.bank_details?.account_number||"",onChange:f}),r.jsx(fs,{label:"IFSC / SWIFT Code",name:"bank_ifsc_code",value:t.bank_details?.ifsc_code||"",onChange:f})]})}),r.jsx(xl,{title:"Defaults",description:"Default texts for new invoices.",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx(fj,{label:"Default Terms & Conditions",name:"invoice_terms",rows:4,value:t.invoice_terms,onChange:f,placeholder:"e.g. Payment due within 30 days..."}),r.jsx(fj,{label:"Default Invoice Notes",name:"default_invoice_notes",rows:2,value:t.default_invoice_notes,onChange:f,placeholder:"e.g. Thank you for your business!"})]})}),r.jsx("div",{className:"flex justify-end pt-2",children:r.jsx($m,{loading:i,saved:o})})]})},jJ=({business:n,onUpdate:e})=>{const[t,s]=R.useState({tax_label:"",tax_percentage:""}),[i,a]=R.useState(!1),[o,c]=R.useState(!1),[u,h]=R.useState(null),[f,g]=R.useState([]),[x,w]=R.useState(!0);R.useEffect(()=>{(async()=>{try{const D=await Dt.get("/tax-rates");g(D.data.data)}catch(D){console.error("Failed to load tax rates",D)}finally{w(!1)}})(),n&&s({tax_label:n.tax_label||"",tax_percentage:n.tax_percentage||""})},[n]);const A=T=>{const D=T.target.value,M=f.find(L=>L.name===D);M&&s({...t,tax_label:M.name,tax_percentage:M.rate}),c(!1)},C=T=>{s({...t,[T.target.name]:T.target.value}),c(!1)},E=async T=>{T.preventDefault(),a(!0),h(null);try{const D=await P0(t);e(D.data),c(!0),setTimeout(()=>c(!1),3e3)}catch(D){console.error(D),h(D.response?.data?.message||"Failed to update settings")}finally{a(!1)}};return r.jsxs("form",{onSubmit:E,className:"max-w-3xl",children:[u&&r.jsx(tg,{message:u}),o&&r.jsx("div",{className:"mb-4",children:r.jsx(eg,{message:"Tax settings updated successfully."})}),r.jsx(xl,{title:"Tax Configuration",description:"Configure your tax settings for invoices.",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Tax Type"}),r.jsxs("select",{name:"tax_label",value:t.tax_label,onChange:A,className:"w-full rounded-md border border-slate-300 bg-white py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 sm:text-sm",disabled:x,children:[r.jsx("option",{value:"",children:"Select Tax"}),f.map(T=>r.jsxs("option",{value:T.name,children:[T.name," (",Number(T.rate).toFixed(2),"%)"]},T.id))]})]}),r.jsx(fs,{label:"Tax Percentage (%)",type:"number",step:"0.01",name:"tax_percentage",value:t.tax_percentage,onChange:C,placeholder:"0.00",disabled:!0})]})}),r.jsx("div",{className:"flex justify-end pt-2",children:r.jsx($m,{loading:i,saved:o})})]})},kJ=({business:n,onUpdate:e})=>{const[t,s]=R.useState({currency_symbol:"",currency_code:"",currency_country:""}),[i,a]=R.useState(!1),[o,c]=R.useState(!1),[u,h]=R.useState(null),[f,g]=R.useState([]),[x,w]=R.useState(!0);R.useEffect(()=>{(async()=>{try{const D=await Dt.get("/currencies");g(D.data.data)}catch(D){console.error("Failed to load currencies",D)}finally{w(!1)}})(),n&&s({currency_symbol:n.currency_symbol||"",currency_code:n.currency_code||"",currency_country:n.currency_country||""})},[n]);const A=T=>{const D=T.target.value,M=f.find(L=>L.code===D);M&&s({...t,currency_code:M.code,currency_symbol:M.symbol,currency_country:M.name}),c(!1)},C=T=>{s({...t,[T.target.name]:T.target.value}),c(!1)},E=async T=>{T.preventDefault(),a(!0),h(null);try{const D=await P0(t);e(D.data),c(!0),setTimeout(()=>c(!1),3e3)}catch(D){console.error(D),h(D.response?.data?.message||"Failed to update settings")}finally{a(!1)}};return r.jsxs("form",{onSubmit:E,className:"max-w-3xl",children:[u&&r.jsx(tg,{message:u}),o&&r.jsx("div",{className:"mb-4",children:r.jsx(eg,{message:"Currency settings updated successfully."})}),r.jsx(xl,{title:"Currency & Region",description:"Set your preferred currency for invoices and financial reports.",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Currency"}),r.jsxs("select",{name:"currency_code",value:t.currency_code,onChange:A,className:"w-full rounded-md border border-slate-300 bg-white py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 sm:text-sm",disabled:x,children:[r.jsx("option",{value:"",children:"Select Currency"}),f.map(T=>r.jsxs("option",{value:T.code,children:[T.code," - ",T.name," (",T.symbol,")"]},T.id))]})]}),r.jsx(fs,{label:"Symbol",name:"currency_symbol",value:t.currency_symbol,onChange:C,placeholder:"$",disabled:!0}),r.jsx(fs,{label:"Country",name:"currency_country",value:t.currency_country,onChange:C,placeholder:"United States",disabled:!0})]})}),r.jsx("div",{className:"flex justify-end pt-2",children:r.jsx($m,{loading:i,saved:o})})]})},RJ=({business:n,onUpdate:e})=>{const[t,s]=R.useState(null),[i,a]=R.useState(null),[o,c]=R.useState(null),[u,h]=R.useState(null),[f,g]=R.useState(!1),[x,w]=R.useState(!1),[A,C]=R.useState(null);R.useEffect(()=>{n&&(n.logo&&a(n.logo),n.favicon&&h(n.favicon))},[n]);const E=(M,L,I)=>{const W=M.target.files[0];if(W){L(W);const V=new FileReader;V.onloadend=()=>{I(V.result)},V.readAsDataURL(W),w(!1)}},T=async M=>{M.preventDefault(),g(!0),C(null);const L=new FormData;if(t&&L.append("logo",t),o&&L.append("favicon",o),!t&&!o){g(!1);return}try{const I=await P0(L);e(I.data),w(!0),setTimeout(()=>w(!1),3e3),s(null),c(null)}catch(I){console.error(I),C("Failed to update branding settings")}finally{g(!1)}},D=M=>M?M.startsWith("http")||M.startsWith("data:")?M:`http://127.0.0.1:8000/api/v1${M}`:null;return r.jsxs("form",{onSubmit:T,className:"max-w-3xl",children:[A&&r.jsx(tg,{message:A}),x&&r.jsx("div",{className:"mb-4",children:r.jsx(eg,{message:"Branding settings updated successfully."})}),r.jsx(xl,{title:"Brand Assets",description:"Upload your business logo and favicon.",children:r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Business Logo"}),r.jsxs("div",{className:"flex items-start gap-6",children:[r.jsx("div",{className:"w-32 h-32 border-2 border-dashed border-slate-300 rounded-lg flex items-center justify-center overflow-hidden bg-slate-50 relative group transition-all hover:border-indigo-400",children:i?r.jsx("img",{src:D(i),alt:"Logo Preview",className:"w-full h-full object-contain p-2"}):r.jsx("span",{className:"text-slate-400 text-xs font-medium",children:"No Logo"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("input",{type:"file",accept:"image/*",id:"logo-upload",className:"hidden",onChange:M=>E(M,s,a)}),r.jsxs("label",{htmlFor:"logo-upload",className:"inline-flex items-center px-4 py-2 border border-slate-300 shadow-sm text-sm font-medium rounded-lg text-slate-700 bg-white hover:bg-slate-50 cursor-pointer transition-colors",children:[r.jsx(Sm,{className:"mr-2 h-4 w-4"}),"Upload Logo"]}),r.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Recommended size: 512x512px. Max file size: 2MB."})]})]})]}),r.jsx("div",{className:"border-t border-slate-100 my-6"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Favicon"}),r.jsxs("div",{className:"flex items-start gap-6",children:[r.jsx("div",{className:"w-16 h-16 border-2 border-dashed border-slate-300 rounded-lg flex items-center justify-center overflow-hidden bg-slate-50 transition-all hover:border-indigo-400",children:u?r.jsx("img",{src:D(u),alt:"Favicon Preview",className:"w-8 h-8 object-contain"}):r.jsx("span",{className:"text-slate-400 text-xs font-medium",children:"No Icon"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("input",{type:"file",accept:"image/x-icon,image/png,image/jpeg,image/svg+xml",id:"favicon-upload",className:"hidden",onChange:M=>E(M,c,h)}),r.jsxs("label",{htmlFor:"favicon-upload",className:"inline-flex items-center px-4 py-2 border border-slate-300 shadow-sm text-sm font-medium rounded-lg text-slate-700 bg-white hover:bg-slate-50 cursor-pointer transition-colors",children:[r.jsx(Sm,{className:"mr-2 h-4 w-4"}),"Upload Favicon"]}),r.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"Recommended size: 32x32px or 16x16px. Formats: .ico, .png, .svg."})]})]})]})]})}),r.jsx("div",{className:"flex justify-end pt-2",children:r.jsx($m,{loading:f,saved:x,disabled:!t&&!o,label:"Save Branding"})})]})},DJ=()=>{const{user:n,setUser:e}=so(),[t,s]=R.useState({name:"",email:"",password:"",password_confirmation:""}),[i,a]=R.useState(!1),[o,c]=R.useState(!1),[u,h]=R.useState(null),[f,g]=R.useState(null),[x,w]=R.useState(null);R.useEffect(()=>{n&&(s(T=>({...T,name:n.name||"",email:n.email||""})),n.avatar_url&&w(n.avatar_url))},[n]);const A=T=>{s({...t,[T.target.name]:T.target.value}),c(!1)},C=T=>{const D=T.target.files[0];D&&(g(D),w(URL.createObjectURL(D)),c(!1))},E=async T=>{T.preventDefault(),a(!0),h(null);const D=new FormData;D.append("name",t.name),D.append("email",t.email),t.password&&(D.append("password",t.password),D.append("password_confirmation",t.password_confirmation)),f&&D.append("avatar",f);try{const M=await T6(D);c(!0),e(M.data),s(L=>({...L,password:"",password_confirmation:""})),g(null),setTimeout(()=>c(!1),3e3)}catch(M){console.error(M),h(M.response?.data?.message||"Failed to update profile")}finally{a(!1)}};return r.jsxs("form",{onSubmit:E,className:"max-w-3xl",children:[u&&r.jsx(tg,{message:u}),o&&r.jsx("div",{className:"mb-4",children:r.jsx(eg,{message:"Profile updated successfully."})}),r.jsx(xl,{title:"Personal Information",description:"Manage your personal account details.",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"md:col-span-2 flex items-center gap-6",children:[r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"h-20 w-20 rounded-full overflow-hidden bg-slate-100 border border-slate-200",children:x?r.jsx("img",{src:x,alt:"Profile",className:"h-full w-full object-cover"}):r.jsx("div",{className:"h-full w-full flex items-center justify-center text-slate-400 font-bold text-2xl",children:t.name.charAt(0)})}),r.jsx("label",{htmlFor:"avatar-upload",className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer rounded-full text-white text-xs font-medium",children:"Change"}),r.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:C,className:"hidden"})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"text-sm font-medium text-slate-800",children:"Profile Picture"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Upload a JPG or PNG. Max size 2MB."})]})]}),r.jsx("div",{className:"md:col-span-2",children:r.jsx(fs,{label:"Full Name",name:"name",value:t.name,onChange:A,required:!0})}),r.jsx("div",{className:"md:col-span-2",children:r.jsx(fs,{label:"Email Address",type:"email",name:"email",value:t.email,onChange:A,required:!0})})]})}),r.jsx(xl,{title:"Security",description:"Update your password (leave blank to keep current).",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(fs,{label:"New Password",type:"password",name:"password",value:t.password,onChange:A,placeholder:"Min. 8 characters"}),r.jsx(fs,{label:"Confirm Password",type:"password",name:"password_confirmation",value:t.password_confirmation,onChange:A,placeholder:"Re-enter password"})]})}),r.jsx("div",{className:"flex justify-end pt-2",children:r.jsx($m,{loading:i,saved:o,label:"Update Profile"})})]})},MJ=()=>{const[n,e]=R.useState("profile"),[t,s]=R.useState(null),[i,a]=R.useState(!0);R.useEffect(()=>{o()},[]);const o=async()=>{try{const h=await vr();s(h)}catch(h){console.error("Failed to load business settings",h)}finally{a(!1)}},c=h=>{s(h)},u=[{id:"profile",label:"My Profile",icon:Mo,desc:"Personal & Security"},{id:"general",label:"Business Info",icon:wd,desc:"Organization Details"},{id:"branding",label:"Branding",icon:lf,desc:"Logos & Colors"},{id:"invoice",label:"Invoicing",icon:ls,desc:"Prefix & Terms"},{id:"tax",label:"Taxation",icon:PU,desc:"VAT/GST Setup"},{id:"currency",label:"Currency",icon:ES,desc:"Region & Symbol"}];return i?r.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:r.jsx(ty,{className:"animate-spin text-indigo-600",size:32})}):r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsx(cv,{title:"Settings",subtitle:"Manage your personal and workspace preferences."}),r.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-start",children:[r.jsx("div",{className:"w-full md:w-64 flex-shrink-0 overflow-x-auto md:overflow-visible pb-4 md:pb-0",children:r.jsx("nav",{className:"flex md:flex-col space-x-2 md:space-x-0 md:space-y-0.5 min-w-max md:min-w-0",children:u.map(h=>{const f=h.icon,g=n===h.id;return r.jsxs("button",{onClick:()=>e(h.id),className:`flex items-center gap-3 px-3 py-2 text-left rounded-md transition-colors whitespace-nowrap ${g?"bg-slate-100 text-slate-900 font-medium":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"}`,children:[r.jsx(f,{size:18,className:g?"text-indigo-600":"text-slate-400"}),r.jsx("span",{className:"text-sm",children:h.label})]},h.id)})})}),r.jsx("div",{className:"flex-1 min-w-0 bg-white rounded-lg border border-slate-200 shadow-sm p-6 md:p-8",children:r.jsx(Zn,{mode:"wait",children:r.jsxs(ze.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[n==="profile"&&r.jsx(DJ,{}),n==="general"&&r.jsx(TJ,{business:t,onUpdate:c}),n==="branding"&&r.jsx(RJ,{business:t,onUpdate:c}),n==="invoice"&&r.jsx(_J,{business:t,onUpdate:c}),n==="tax"&&r.jsx(jJ,{business:t,onUpdate:c}),n==="currency"&&r.jsx(kJ,{business:t,onUpdate:c})]},n)})})]})]})},PJ=({isOpen:n,onClose:e,onInvite:t})=>{const{matrix:s}=Gm(),[i,a]=R.useState(""),[o,c]=R.useState("member"),[u,h]=R.useState([]),[f,g]=R.useState(!1),[x,w]=R.useState(!1),A=gt.useMemo(()=>s.permissions?s.permissions.reduce((M,L)=>{const I=L.key.split(".")[0];return M[I]||(M[I]=[]),M[I].push(L),M},{}):{},[s.permissions]);R.useEffect(()=>{},[n]),R.useEffect(()=>{if(!s.permissions)return;const M=s.permissions.filter(L=>L.roles.includes(o)).map(L=>L.key);h(M)},[o,s]);const C=M=>{h(L=>L.includes(M)?L.filter(I=>I!==M):[...L,M])},E=M=>{switch(M){case"admin":return r.jsx(Bm,{className:"text-purple-600",size:24});case"editor":return r.jsx(ls,{className:"text-blue-600",size:24});case"member":return r.jsx(vc,{className:"text-slate-600",size:24});case"viewer":return r.jsx(ii,{className:"text-emerald-600",size:24});default:return r.jsx(vc,{className:"text-slate-600",size:24})}},T=async M=>{M.preventDefault(),g(!0);try{await t({email:i,role:o,permissions:u}),D()}catch(L){console.error(L)}finally{g(!1)}},D=()=>{a(""),c("member"),w(!1)};return n?r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[r.jsx(ze.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm"}),r.jsxs(ze.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[r.jsxs("div",{className:"relative px-8 py-6 bg-slate-900 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 opacity-10 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-indigo-500 via-slate-900 to-slate-900"}),r.jsxs("div",{className:"relative flex items-center justify-between z-10",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-white",children:"Invite Team Member"}),r.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Send an invitation to join your workspace."})]}),r.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white transition-colors bg-white/10 hover:bg-white/20 rounded-full p-2 backdrop-blur-sm",children:r.jsx(ja,{size:20})})]})]}),r.jsx("div",{className:"p-8 overflow-y-auto custom-scrollbar",children:r.jsxs("form",{id:"inviteForm",onSubmit:T,className:"space-y-8",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Email Address"}),r.jsxs("div",{className:"relative group",children:[r.jsx(ri,{className:"absolute left-4 top-3.5 text-slate-400 group-focus-within:text-indigo-600 transition-colors",size:20}),r.jsx("input",{type:"email",required:!0,value:i,onChange:M=>a(M.target.value),placeholder:"colleague@company.com",className:"w-full pl-12 pr-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all placeholder:text-slate-400 text-slate-700 bg-slate-50 focus:bg-white"})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Select Role"}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:["admin","editor","member","viewer"].map(M=>r.jsxs("label",{className:`
                                            relative flex items-start gap-4 p-4 border rounded-xl cursor-pointer transition-all duration-200
                                            ${o===M?"border-indigo-600 bg-indigo-50/50 ring-1 ring-indigo-600 shadow-sm":"border-slate-200 hover:border-indigo-200 hover:bg-slate-50"}
                                        `,children:[r.jsx("input",{type:"radio",name:"role",value:M,checked:o===M,onChange:L=>c(L.target.value),className:"sr-only"}),r.jsx("div",{className:`mt-1 p-2 rounded-lg ${o===M?"bg-indigo-100":"bg-slate-100"}`,children:E(M)}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:`font-semibold capitalize ${o===M?"text-indigo-900":"text-slate-900"}`,children:M}),o===M&&r.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-600"})]}),r.jsxs("div",{className:"text-xs text-slate-500 mt-1 leading-relaxed",children:[M==="admin"&&"Full workspace access. Can manage settings & team.",M==="editor"&&"Can create, edit, and delete content.",M==="member"&&"Can view and comment on shared documents.",M==="viewer"&&"Read-only access to specific items."]})]})]},M))})]}),r.jsxs("div",{className:"border-t border-slate-100 pt-6",children:[r.jsxs("button",{type:"button",onClick:()=>w(!x),className:"flex items-center gap-2 text-sm font-medium text-slate-600 hover:text-indigo-600 transition-colors",children:[x?r.jsx(Im,{size:16}):r.jsx(gl,{size:16}),r.jsx(Iu,{size:16}),r.jsx("span",{children:"Advanced Permission Settings"}),!x&&r.jsxs("span",{className:"ml-auto text-xs text-slate-400 bg-slate-100 px-2 py-1 rounded-full",children:[u.length," selected"]})]}),r.jsx(Zn,{children:x&&r.jsx(ze.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:r.jsx("div",{className:"pt-4 space-y-6",children:Object.entries(A).map(([M,L])=>r.jsxs("div",{className:"space-y-3",children:[r.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider flex items-center gap-2",children:[M==="document"&&r.jsx(ls,{size:12}),M==="team"&&r.jsx(vc,{size:12}),M==="settings"&&r.jsx(R0,{size:12}),M," Permissions"]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:L.map(I=>{const W=u.includes(I.key);return r.jsxs("label",{className:`
                                                                    flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all
                                                                    ${W?"bg-indigo-50 border-indigo-200":"bg-white border-slate-200 hover:border-slate-300"}
                                                                `,children:[r.jsxs("div",{className:`
                                                                        w-5 h-5 rounded border flex items-center justify-center transition-colors
                                                                        ${W?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300"}
                                                                    `,children:[W&&r.jsx(ii,{size:12,className:"text-white"}),r.jsx("input",{type:"checkbox",checked:W,onChange:()=>C(I.key),className:"hidden"})]}),r.jsx("div",{className:"flex-1",children:r.jsx("div",{className:`text-sm font-medium ${W?"text-indigo-900":"text-slate-700"}`,children:I.label})})]},I.key)})})]},M))})})})]})]})}),r.jsxs("div",{className:"px-8 py-5 border-t border-slate-200 bg-slate-50 flex justify-end gap-3 sticky bottom-0 z-20",children:[r.jsx("button",{type:"button",onClick:e,className:"px-5 py-2.5 text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-200/50 rounded-xl transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",form:"inviteForm",disabled:f,className:"px-8 py-2.5 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-xl shadow-lg shadow-indigo-200 transition-all hover:-translate-y-0.5 disabled:opacity-70 disabled:cursor-not-allowed flex items-center gap-2",children:f?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Sending Invitation..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ri,{size:18}),"Send Invitation"]})})]})]})]}):null},OJ=({isOpen:n,onClose:e,member:t,onUpdate:s})=>{const{matrix:i}=Gm(),[a,o]=R.useState("member"),[c,u]=R.useState([]),[h,f]=R.useState(!1),[g,x]=R.useState(!1),w=gt.useMemo(()=>i.permissions?i.permissions.reduce((D,M)=>{const L=M.key.split(".")[0];return D[L]||(D[L]=[]),D[L].push(M),D},{}):{},[i.permissions]);R.useEffect(()=>{if(t){if(o(t.role),t.permissions&&Array.isArray(t.permissions))u(t.permissions);else if(i.permissions){const D=i.permissions.filter(M=>M.roles.includes(t.role)).map(M=>M.key);u(D)}}},[t,n,i]);const A=D=>{if(o(D),i.permissions){const M=i.permissions.filter(L=>L.roles.includes(D)).map(L=>L.key);u(M)}},C=D=>{u(M=>M.includes(D)?M.filter(L=>L!==D):[...M,D])},E=async D=>{D.preventDefault(),f(!0);try{await s(t.id,{role:a,permissions:c}),e()}catch(M){console.error(M)}finally{f(!1)}},T=D=>{switch(D){case"admin":return r.jsx(Bm,{className:"text-purple-600",size:20});case"editor":return r.jsx(ls,{className:"text-blue-600",size:20});case"member":return r.jsx(vc,{className:"text-slate-600",size:20});case"viewer":return r.jsx(ii,{className:"text-emerald-600",size:20});default:return r.jsx(Mo,{className:"text-slate-600",size:20})}};return!n||!t?null:r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[r.jsx(ze.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm"}),r.jsxs(ze.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[r.jsxs("div",{className:"relative px-8 py-6 bg-slate-900",children:[r.jsx("div",{className:"absolute inset-0 opacity-10 bg-[radial-gradient(circle_at_top_right,_var(--tw-gradient-stops))] from-indigo-500 via-slate-900 to-slate-900"}),r.jsxs("div",{className:"relative flex items-center justify-between z-10",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-500/20 flex items-center justify-center text-white font-bold border-2 border-indigo-500/30",children:t.child?.name?.charAt(0).toUpperCase()||"?"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:t.child?.name}),r.jsx("p",{className:"text-slate-400 text-sm mt-0.5",children:t.child?.email})]})]}),r.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white transition-colors bg-white/10 hover:bg-white/20 rounded-full p-2 backdrop-blur-sm",children:r.jsx(ja,{size:20})})]})]}),r.jsx("div",{className:"p-8 overflow-y-auto custom-scrollbar",children:r.jsxs("form",{id:"editForm",onSubmit:E,className:"space-y-8",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-sm font-semibold text-slate-700",children:"Role Allocation"}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:["admin","editor","member","viewer"].map(D=>r.jsxs("label",{className:`
                                            relative flex items-center gap-4 p-4 border rounded-xl cursor-pointer transition-all duration-200
                                            ${a===D?"border-indigo-600 bg-indigo-50/50 ring-1 ring-indigo-600 shadow-sm":"border-slate-200 hover:border-indigo-200 hover:bg-slate-50"}
                                        `,children:[r.jsx("input",{type:"radio",name:"role",value:D,checked:a===D,onChange:M=>A(M.target.value),className:"sr-only"}),r.jsx("div",{className:`p-2 rounded-lg ${a===D?"bg-indigo-100":"bg-slate-100"}`,children:T(D)}),r.jsx("div",{children:r.jsx("span",{className:`font-semibold capitalize ${a===D?"text-indigo-900":"text-slate-900"}`,children:D})}),a===D&&r.jsx(ii,{size:16,className:"text-indigo-600 ml-auto"})]},D))})]}),r.jsxs("div",{className:"border-t border-slate-100 pt-6",children:[r.jsxs("button",{type:"button",onClick:()=>x(!g),className:"flex items-center gap-2 text-sm font-medium text-slate-600 hover:text-indigo-600 transition-colors",children:[g?r.jsx(Im,{size:16}):r.jsx(gl,{size:16}),r.jsx(Iu,{size:16}),r.jsx("span",{children:"Advanced Access Control"}),!g&&r.jsxs("span",{className:"ml-auto text-xs text-slate-400 bg-slate-100 px-2 py-1 rounded-full",children:[c.length," selected"]})]}),r.jsx(Zn,{children:g&&r.jsx(ze.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:r.jsx("div",{className:"pt-4 space-y-6",children:Object.entries(w).map(([D,M])=>r.jsxs("div",{className:"space-y-3",children:[r.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider flex items-center gap-2",children:[D==="document"&&r.jsx(ls,{size:12}),D==="team"&&r.jsx(vc,{size:12}),D==="settings"&&r.jsx(R0,{size:12}),D," Permissions"]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:M.map(L=>{const I=c.includes(L.key);return r.jsxs("label",{className:`
                                                                    flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all
                                                                    ${I?"bg-indigo-50 border-indigo-200":"bg-white border-slate-200 hover:border-slate-300"}
                                                                `,children:[r.jsxs("div",{className:`
                                                                        w-5 h-5 rounded border flex items-center justify-center transition-colors
                                                                        ${I?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300"}
                                                                    `,children:[I&&r.jsx(ii,{size:12,className:"text-white"}),r.jsx("input",{type:"checkbox",checked:I,onChange:()=>C(L.key),className:"hidden"})]}),r.jsx("div",{className:"flex-1",children:r.jsx("div",{className:`text-sm font-medium ${I?"text-indigo-900":"text-slate-700"}`,children:L.label})})]},L.key)})})]},D))})})})]})]})}),r.jsxs("div",{className:"px-8 py-5 border-t border-slate-200 bg-slate-50 flex justify-end gap-3 sticky bottom-0 z-20",children:[r.jsx("button",{type:"button",onClick:e,className:"px-5 py-2.5 text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-200/50 rounded-xl transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",form:"editForm",disabled:h,className:"px-8 py-2.5 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-xl shadow-lg shadow-indigo-200 transition-all hover:-translate-y-0.5 disabled:opacity-70 disabled:cursor-not-allowed flex items-center gap-2",children:h?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Sl,{size:18}),"Save Changes"]})})]})]})]})},LJ=()=>{const{user:n}=so(),{matrix:e}=Gm(),[t,s]=R.useState([]),[i,a]=R.useState(!0),[o,c]=R.useState(""),[u,h]=R.useState(!1),[f,g]=R.useState(null),[x,w]=R.useState("members"),[A,C]=R.useState(null);R.useEffect(()=>{E()},[]);const E=async()=>{try{a(!0);const V=await L9();s(V.data)}catch(V){console.error("Failed to fetch team",V)}finally{a(!1)}},T=async(V,Y)=>{try{await z9(V,Y),E(),Be.success("Member updated successfully")}catch(K){console.error("Failed to update member",K),Be.error("Failed to update member: "+(K.response?.data?.message||K.message))}},D=async V=>{if(confirm("Are you sure you want to remove this member?")){try{await I9(V),s(t.filter(Y=>Y.id!==V)),Be.success("Member removed successfully")}catch(Y){console.error("Failed to remove member",Y),Be.error("Failed to remove member")}C(null)}},M=async V=>{try{await F9(V),E(),h(!1),Be.success("Invitation sent successfully")}catch(Y){console.error("Failed to invite member",Y),Be.error("Failed to invite member: "+(Y.response?.data?.message||Y.message))}},L=t.filter(V=>V.child?.name?.toLowerCase().includes(o.toLowerCase())||V.child?.email?.toLowerCase().includes(o.toLowerCase())),I=V=>{switch(V){case"admin":return"bg-purple-100 text-purple-700 border-purple-200";case"editor":return"bg-blue-100 text-blue-700 border-blue-200";case"member":return"bg-slate-100 text-slate-700 border-slate-200";case"viewer":return"bg-emerald-100 text-emerald-700 border-emerald-200";default:return"bg-slate-100 text-slate-700"}},W=V=>{switch(V){case"active":return"bg-emerald-50 text-emerald-700 border-emerald-100";case"pending":return"bg-amber-50 text-amber-700 border-amber-100";default:return"bg-slate-100 text-slate-500"}};return r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsx(cv,{title:"Team Management",subtitle:"Manage your team members and their roles.",children:r.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors shadow-md shadow-indigo-600/20 text-sm",children:[r.jsx(df,{size:18,strokeWidth:2.5}),"Invite Member"]})}),r.jsx("div",{className:"border-b border-slate-200 mb-6",children:r.jsxs("div",{className:"flex gap-6",children:[r.jsxs("button",{onClick:()=>w("members"),className:`pb-3 text-sm font-medium transition-colors relative ${x==="members"?"text-indigo-600":"text-slate-500 hover:text-slate-700"}`,children:["Members",x==="members"&&r.jsx(ze.div,{layoutId:"tab-underline",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-600"})]}),r.jsxs("button",{onClick:()=>w("roles"),className:`pb-3 text-sm font-medium transition-colors relative ${x==="roles"?"text-indigo-600":"text-slate-500 hover:text-slate-700"}`,children:["Roles & Permissions",x==="roles"&&r.jsx(ze.div,{layoutId:"tab-underline",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-600"})]})]})}),r.jsx(Zn,{mode:"wait",children:x==="members"?r.jsxs(ze.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[r.jsxs("div",{className:"bg-white p-4 rounded-lg border border-slate-200 shadow-sm mb-6 flex items-center gap-3",children:[r.jsx(qp,{className:"text-slate-400",size:20}),r.jsx("input",{type:"text",placeholder:"Search members by name or email...",className:"flex-1 outline-none text-slate-700 placeholder:text-slate-400",value:o,onChange:V=>c(V.target.value)})]}),r.jsx("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden min-h-[400px]",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200",children:[r.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"User"}),r.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Role"}),r.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider text-right",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:i?r.jsx("tr",{children:r.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-slate-500",children:r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})})})}):L.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-slate-500",children:r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[r.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mb-4",children:r.jsx(Bm,{className:"text-slate-300",size:32})}),r.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-1",children:"No team members yet"}),r.jsx("p",{className:"text-slate-500 text-sm max-w-sm",children:"Invite your colleagues to collaborate on documents and manage your business together."})]})})}):L.map(V=>r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-700 font-bold border-2 border-white shadow-sm",children:V.child?.name?.charAt(0).toUpperCase()||"?"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-slate-900",children:V.child?.name||"Unknown User"}),r.jsx("div",{className:"text-sm text-slate-500",children:V.child?.email})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex flex-col items-start gap-1",children:[r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${I(V.role)} capitalize`,children:V.role||"Member"}),V.permissions&&r.jsxs("span",{className:"text-[10px] text-slate-400 flex items-center gap-0.5",children:[r.jsx(Iu,{size:10}),"Custom Access"]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-medium border ${W(V.status)}`,children:[r.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${V.status==="active"?"bg-emerald-500":"bg-amber-500"}`}),V.status==="active"?"Active":"Pending"]})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsx("div",{className:"relative group inline-block text-left",children:r.jsx("button",{onClick:Y=>{Y.stopPropagation();const K=Y.currentTarget.getBoundingClientRect();C(A===V.id?null:{id:V.id,top:K.bottom+window.scrollY,left:K.right-192})},className:"p-1.5 hover:bg-slate-100 rounded-md text-slate-400 hover:text-slate-600 transition-colors",children:r.jsx(UD,{size:16})})})})]},V.id))})]})})})]},"members"):r.jsx(ze.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:r.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden",children:[r.jsxs("div",{className:"p-6 border-b border-slate-200 bg-slate-50",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Role Permissions"}),r.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"View access levels for each role. (Read-only reference)"})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-white border-b border-slate-200",children:[r.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider w-1/3 border-r border-slate-100",children:"Permission"}),e.roles&&Object.keys(e.roles).map(V=>r.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-center text-slate-500 uppercase tracking-wider w-1/6",children:e.roles[V]},V))]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:e.permissions&&e.permissions.map(V=>r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-slate-700 border-r border-slate-100",children:[V.label,r.jsx("div",{className:"text-xs text-slate-400 font-normal mt-0.5",children:V.key})]}),Object.keys(e.roles).map(Y=>{const K=V.roles.includes(Y);return r.jsx("td",{className:"px-6 py-4 text-center",children:K?r.jsx(br,{size:18,className:"mx-auto text-emerald-500"}):r.jsx("div",{className:"w-1.5 h-1.5 bg-slate-200 rounded-full mx-auto"})},Y)})]},V.key))})]})})]})},"roles")}),A&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>C(null)}),r.jsxs("div",{className:"fixed z-50 w-48 bg-white rounded-lg shadow-xl border border-slate-200 py-1 overflow-hidden animate-in fade-in zoom-in duration-200 origin-top-right",style:{top:A.top+5,left:A.left},children:[r.jsxs("button",{onClick:()=>{const V=t.find(Y=>Y.id===A.id);V&&g(V),C(null)},className:"w-full text-left px-4 py-2.5 text-sm text-slate-700 hover:bg-slate-50 flex items-center gap-2 border-b border-slate-100",children:[r.jsx(k0,{size:14}),"Edit Access"]}),r.jsxs("button",{onClick:()=>{D(A.id),C(null)},className:"w-full text-left px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2 mt-1",children:[r.jsx(ko,{size:14}),"Remove Member"]})]})]}),r.jsx(PJ,{isOpen:u,onClose:()=>h(!1),onInvite:M}),r.jsx(OJ,{isOpen:!!f,onClose:()=>g(null),member:f,onUpdate:T})]})},FJ=({onFileUpload:n})=>{const[e,t]=R.useState(!1),[s,i]=R.useState(null),[a,o]=R.useState(null),[c,u]=R.useState(!1),h=10*1024*1024,f=D=>(o(null),D.type!=="application/pdf"?(o("Only PDF files are allowed"),!1):D.size>h?(o("File size must be less than 10MB"),!1):!0),g=R.useCallback(D=>{D.preventDefault(),D.stopPropagation(),D.type==="dragenter"||D.type==="dragover"?t(!0):D.type==="dragleave"&&t(!1)},[]),x=R.useCallback(D=>{D.preventDefault(),D.stopPropagation(),t(!1),D.dataTransfer.files&&D.dataTransfer.files[0]&&w(D.dataTransfer.files[0])},[]),w=D=>{u(!0),setTimeout(()=>{f(D)?(i(D),o(null)):i(null),u(!1)},500)},A=D=>{D.target.files&&D.target.files[0]&&w(D.target.files[0])},C=()=>{s&&n(s)},E=()=>{i(null),o(null)},T=D=>{if(D===0)return"0 Bytes";const M=1024,L=["Bytes","KB","MB"],I=Math.floor(Math.log(D)/Math.log(M));return Math.round(D/Math.pow(M,I)*100)/100+" "+L[I]};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-8 md:p-12",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Upload Your Document"}),r.jsx("p",{className:"text-slate-600",children:"Upload a PDF document to add signatures"})]}),r.jsx("div",{onDragEnter:g,onDragLeave:g,onDragOver:g,onDrop:x,className:`
                        relative border-2 border-dashed rounded-2xl p-12 transition-all duration-300
                        ${e?"border-indigo-500 bg-indigo-50":s?"border-emerald-300 bg-emerald-50/50":a?"border-red-300 bg-red-50/50":"border-slate-300 bg-slate-50/50 hover:border-indigo-400 hover:bg-indigo-50/30"}
                    `,children:c?r.jsxs("div",{className:"text-center",children:[r.jsx(ze.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-16 h-16 border-4 border-indigo-200 border-t-indigo-600 rounded-full mx-auto mb-4"}),r.jsx("p",{className:"text-slate-600 font-medium",children:"Validating file..."})]}):s?r.jsxs(ze.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-emerald-500 to-green-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-xl shadow-emerald-200",children:r.jsx(br,{size:40,className:"text-white",strokeWidth:2.5})}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:s.name}),r.jsx("p",{className:"text-sm text-slate-500 mb-4",children:T(s.size)}),r.jsxs("button",{onClick:E,className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors",children:[r.jsx(ja,{size:16}),"Remove File"]})]}):a?r.jsxs(ze.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:r.jsx(xr,{size:40,className:"text-red-600",strokeWidth:2.5})}),r.jsx("h3",{className:"text-lg font-bold text-red-600 mb-2",children:"Upload Failed"}),r.jsx("p",{className:"text-sm text-red-500 mb-4",children:a}),r.jsx("button",{onClick:()=>o(null),className:"text-sm font-medium text-red-600 hover:text-red-700",children:"Try Again"})]}):r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:r.jsx(Sm,{size:40,className:"text-indigo-600",strokeWidth:2.5})}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:e?"Drop your file here":"Drag & drop your PDF here"}),r.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"or click to browse your files"}),r.jsxs("label",{className:"inline-block cursor-pointer",children:[r.jsx("span",{className:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-medium rounded-lg shadow-lg shadow-indigo-200 hover:shadow-xl hover:shadow-indigo-300 transition-all inline-block",children:"Choose File"}),r.jsx("input",{type:"file",accept:".pdf,application/pdf",onChange:A,className:"hidden"})]})]})}),r.jsxs("div",{className:"mt-6 p-4 bg-slate-50 rounded-xl border border-slate-200",children:[r.jsx("h4",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider mb-3",children:"File Requirements"}),r.jsxs("ul",{className:"space-y-2 text-sm text-slate-600",children:[r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full"}),"File format: PDF only"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full"}),"Maximum size: 10MB"]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full"}),"Ensure document is readable and properly formatted"]})]})]}),s&&!a&&r.jsx(ze.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-8 text-center",children:r.jsx("button",{onClick:C,className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold text-lg rounded-xl shadow-xl shadow-indigo-200 hover:shadow-2xl hover:shadow-indigo-300 transition-all transform hover:scale-105",children:"Continue to Place Signatures"})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:[r.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center mb-4",children:r.jsx(ls,{size:24,className:"text-indigo-600"})}),r.jsx("h3",{className:"text-sm font-bold text-slate-800 mb-2",children:"Secure Upload"}),r.jsx("p",{className:"text-xs text-slate-600",children:"Your documents are encrypted and secure"})]}),r.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:[r.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mb-4",children:r.jsx(br,{size:24,className:"text-purple-600"})}),r.jsx("h3",{className:"text-sm font-bold text-slate-800 mb-2",children:"Easy Process"}),r.jsx("p",{className:"text-xs text-slate-600",children:"Simple drag-and-drop signature placement"})]}),r.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200",children:[r.jsx("div",{className:"w-12 h-12 bg-emerald-100 rounded-xl flex items-center justify-center mb-4",children:r.jsx(Sm,{size:24,className:"text-emerald-600"})}),r.jsx("h3",{className:"text-sm font-bold text-slate-800 mb-2",children:"Instant Download"}),r.jsx("p",{className:"text-xs text-slate-600",children:"Get your signed document immediately"})]})]})]})},Ua=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),w2=[.001,0,0,.001,0,0],gw=1.35,Jr={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},xc={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},c0="pdfjs_internal_editor_",Bt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},cn={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},_5={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},oa={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Vp={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ei={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},$f={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Y0={ERRORS:0,WARNINGS:1,INFOS:5},Tm={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},fb={moveTo:0,lineTo:1,curveTo:2,closePath:3},j5={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let dv=Y0.WARNINGS;function zJ(n){Number.isInteger(n)&&(dv=n)}function IJ(){return dv}function uv(n){dv>=Y0.INFOS&&console.info(`Info: ${n}`)}function Ht(n){dv>=Y0.WARNINGS&&console.warn(`Warning: ${n}`)}function es(n){throw new Error(n)}function mn(n,e){n||es(e)}function BJ(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function oN(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"&&(t.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),t.tryConvertEncoding))try{n=GJ(n)}catch{}const s=e?URL.parse(n,e):URL.parse(n);return BJ(s)?s:null}function lN(n,e,t=!1){const s=URL.parse(n);return s?(s.hash=e,s.href):t&&oN(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Xt(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const ff=(function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e})();class mj extends ff{constructor(e,t){super(e,"PasswordException"),this.code=t}}class pw extends ff{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class yy extends ff{constructor(e){super(e,"InvalidPDFException")}}class d0 extends ff{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class HJ extends ff{constructor(e){super(e,"FormatError")}}class bd extends ff{constructor(e){super(e,"AbortException")}}function k5(n){(typeof n!="object"||n?.length===void 0)&&es("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let i=0;i<e;i+=t){const a=Math.min(i+t,e),o=n.subarray(i,a);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function X0(n){typeof n!="string"&&es("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function UJ(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function VJ(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function WJ(){try{return new Function(""),!0}catch{return!1}}class qi{static get isLittleEndian(){return Xt(this,"isLittleEndian",VJ())}static get isEvalSupported(){return Xt(this,"isEvalSupported",WJ())}static get isOffscreenCanvasSupported(){return Xt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Xt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Xt(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return Xt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const xw=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class lt{static makeHexColor(e,t,s){return`#${xw[e]}${xw[t]}${xw[s]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,s=0){const i=e[s],a=e[s+1];e[s]=i*t[0]+a*t[2]+t[4],e[s+1]=i*t[1]+a*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const i=t[0],a=t[1],o=t[2],c=t[3],u=t[4],h=t[5];for(let f=0;f<6;f+=2){const g=e[s+f],x=e[s+f+1];e[s+f]=g*i+x*o+u,e[s+f+1]=g*a+x*c+h}}static applyInverseTransform(e,t){const s=e[0],i=e[1],a=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/a,e[1]=(-s*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/a}static axialAlignedBoundingBox(e,t,s){const i=t[0],a=t[1],o=t[2],c=t[3],u=t[4],h=t[5],f=e[0],g=e[1],x=e[2],w=e[3];let A=i*f+u,C=A,E=i*x+u,T=E,D=c*g+h,M=D,L=c*w+h,I=L;if(a!==0||o!==0){const W=a*f,V=a*x,Y=o*g,K=o*w;A+=Y,T+=Y,E+=K,C+=K,D+=W,I+=W,L+=V,M+=V}s[0]=Math.min(s[0],A,E,C,T),s[1]=Math.min(s[1],D,L,M,I),s[2]=Math.max(s[2],A,E,C,T),s[3]=Math.max(s[3],D,L,M,I)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],i=e[1],a=e[2],o=e[3],c=s**2+i**2,u=s*a+i*o,h=a**2+o**2,f=(c+h)/2,g=Math.sqrt(f**2-(c*h-u**2));t[0]=Math.sqrt(f+g||1),t[1]=Math.sqrt(f-g||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>i)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return a>o?null:[s,a,i,o]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,i,a){a[0]=Math.min(a[0],e,s),a[1]=Math.min(a[1],t,i),a[2]=Math.max(a[2],e,s),a[3]=Math.max(a[3],t,i)}static#e(e,t,s,i,a,o,c,u,h,f){if(h<=0||h>=1)return;const g=1-h,x=h*h,w=x*h,A=g*(g*(g*e+3*h*t)+3*x*s)+w*i,C=g*(g*(g*a+3*h*o)+3*x*c)+w*u;f[0]=Math.min(f[0],A),f[1]=Math.min(f[1],C),f[2]=Math.max(f[2],A),f[3]=Math.max(f[3],C)}static#t(e,t,s,i,a,o,c,u,h,f,g,x){if(Math.abs(h)<1e-12){Math.abs(f)>=1e-12&&this.#e(e,t,s,i,a,o,c,u,-g/f,x);return}const w=f**2-4*g*h;if(w<0)return;const A=Math.sqrt(w),C=2*h;this.#e(e,t,s,i,a,o,c,u,(-f+A)/C,x),this.#e(e,t,s,i,a,o,c,u,(-f-A)/C,x)}static bezierBoundingBox(e,t,s,i,a,o,c,u,h){h[0]=Math.min(h[0],e,c),h[1]=Math.min(h[1],t,u),h[2]=Math.max(h[2],e,c),h[3]=Math.max(h[3],t,u),this.#t(e,s,a,c,t,i,o,u,3*(-e+3*(s-a)+c),6*(e-2*s+a),3*(s-e),h),this.#t(e,s,a,c,t,i,o,u,3*(-t+3*(i-o)+u),6*(t-2*i+o),3*(i-t),h)}}function GJ(n){return decodeURIComponent(escape(n))}let bw=null,gj=null;function R5(n){return bw||(bw=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,gj=new Map([["","t"]])),n.replaceAll(bw,(e,t,s)=>t?t.normalize("NFKC"):gj.get(s))}function cN(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),k5(n)}const dN="pdfjs_internal_id_";function YJ(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,i,...a]=t;if(!n(s)&&!Number.isInteger(s)||!e(i))return!1;const o=a.length;let c=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;c=!1;break;default:return!1}for(const u of a)if(!(typeof u=="number"||c&&u===null))return!1;return!0}function Na(n,e,t){return Math.min(Math.max(n,e),t)}function D5(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(k5(n))}function XJ(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):X0(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class u0{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function i(a){if(!a)return;let o=null;const c=a.name;if(c==="#text")o=a.value;else if(u0.shouldBuildText(c))a?.attributes?.textContent?o=a.attributes.textContent:a.value&&(o=a.value);else return;if(o!==null&&t.push({str:o}),!!a.children)for(const u of a.children)i(u)}return i(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class uN{static setupStorage(e,t,s,i,a){const o=i.getValue(t,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),a==="print")break;e.addEventListener("input",c=>{i.setValue(t,{value:c.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?e.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",c=>{i.setValue(t,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),a==="print")break;e.addEventListener("input",c=>{i.setValue(t,{value:c.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const c of s.children)c.attributes.value===o.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}e.addEventListener("input",c=>{const u=c.target.options,h=u.selectedIndex===-1?"":u[u.selectedIndex].value;i.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:i,linkService:a}){const{attributes:o}=t,c=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[u,h]of Object.entries(o))if(h!=null)switch(u){case"class":h.length&&e.setAttribute(u,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!c||u!=="href"&&u!=="newWindow")&&e.setAttribute(u,h)}c&&a.addLinkAttributes(e,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(e,o.dataId,t,s)}static render(e){const t=e.annotationStorage,s=e.linkService,i=e.xfaHtml,a=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:a,linkService:s});const c=a!=="richText",u=e.div;if(u.append(o),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;u.style.transform=g}c&&u.setAttribute("class","xfaLayer xfaFont");const h=[];if(i.children.length===0){if(i.value){const g=document.createTextNode(i.value);o.append(g),c&&u0.shouldBuildText(i.name)&&h.push(g)}return{textDivs:h}}const f=[[i,-1,o]];for(;f.length>0;){const[g,x,w]=f.at(-1);if(x+1===g.children.length){f.pop();continue}const A=g.children[++f.at(-1)[1]];if(A===null)continue;const{name:C}=A;if(C==="#text"){const T=document.createTextNode(A.value);h.push(T),w.append(T);continue}const E=A?.attributes?.xmlns?document.createElementNS(A.attributes.xmlns,C):document.createElement(C);if(w.append(E),A.attributes&&this.setAttributes({html:E,element:A,storage:t,intent:a,linkService:s}),A.children?.length>0)f.push([A,-1,E]);else if(A.value){const T=document.createTextNode(A.value);c&&u0.shouldBuildText(C)&&h.push(T),E.append(T)}}for(const g of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const ld="http://www.w3.org/2000/svg";class af{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function ng(n,e="text"){if(Ep(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class K0{constructor({viewBox:e,userUnit:t,scale:s,rotation:i,offsetX:a=0,offsetY:o=0,dontFlip:c=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=i,this.offsetX=a,this.offsetY=o,s*=t;const u=(e[2]+e[0])/2,h=(e[3]+e[1])/2;let f,g,x,w;switch(i%=360,i<0&&(i+=360),i){case 180:f=-1,g=0,x=0,w=1;break;case 90:f=0,g=1,x=1,w=0;break;case 270:f=0,g=-1,x=-1,w=0;break;case 0:f=1,g=0,x=0,w=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(x=-x,w=-w);let A,C,E,T;f===0?(A=Math.abs(h-e[1])*s+a,C=Math.abs(u-e[0])*s+o,E=(e[3]-e[1])*s,T=(e[2]-e[0])*s):(A=Math.abs(u-e[0])*s+a,C=Math.abs(h-e[1])*s+o,E=(e[2]-e[0])*s,T=(e[3]-e[1])*s),this.transform=[f*s,g*s,x*s,w*s,A-f*s*u-x*s*h,C-g*s*u-w*s*h],this.width=E,this.height=T}get rawDims(){const e=this.viewBox;return Xt(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new K0({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:a})}convertToViewportPoint(e,t){const s=[e,t];return lt.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];lt.applyTransform(t,this.transform);const s=[e[2],e[3]];return lt.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return lt.applyInverseTransform(s,this.transform),s}}class hv extends ff{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Z0(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function fv(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function M5(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function P5(n,e="document.pdf"){if(typeof n!="string")return e;if(Z0(n))return Ht('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(c=>{try{return new URL(c)}catch{try{return new URL(decodeURIComponent(c))}catch{try{return new URL(c,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(c),"https://foo.bar")}catch{return null}}}}})(n);if(!s)return e;const i=c=>{try{let u=decodeURIComponent(c);return u.includes("/")?(u=u.split("/").at(-1),u.test(/^\.pdf$/i)?u:c):u}catch{return c}},a=/\.pdf$/i,o=s.pathname.split("/").at(-1);if(a.test(o))return i(o);if(s.searchParams.size>0){const c=Array.from(s.searchParams.values()).reverse();for(const h of c)if(a.test(h))return i(h);const u=Array.from(s.searchParams.keys()).reverse();for(const h of u)if(a.test(h))return i(h)}if(s.hash){const u=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(u)return i(u[0])}return e}class pj{started=Object.create(null);times=[];time(e){e in this.started&&Ht(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ht(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:i,end:a}of this.times)e.push(`${s.padEnd(t)} ${a-i}ms
`);return e.join("")}}function Ep(n,e){const t=e?URL.parse(n,e):URL.parse(n);return t?.protocol==="http:"||t?.protocol==="https:"}function to(n){n.preventDefault()}function Rs(n){n.preventDefault(),n.stopPropagation()}function KJ(n){console.log("Deprecated API usage: "+n)}class vy{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const s=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let a=parseInt(t[3],10);a=a>=1&&a<=31?a:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let c=parseInt(t[5],10);c=c>=0&&c<=59?c:0;let u=parseInt(t[6],10);u=u>=0&&u<=59?u:0;const h=t[7]||"Z";let f=parseInt(t[8],10);f=f>=0&&f<=23?f:0;let g=parseInt(t[9],10)||0;return g=g>=0&&g<=59?g:0,h==="-"?(o+=f,c+=g):h==="+"&&(o-=f,c-=g),new Date(Date.UTC(s,i,a,o,c,u))}}function O5(n,{scale:e=1,rotation:t=0}){const{width:s,height:i}=n.attributes.style,a=[0,0,parseInt(s),parseInt(i)];return new K0({viewBox:a,userUnit:1,scale:e,rotation:t})}function sg(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ht(`Not a valid color format: "${n}"`),[0,0,0])}function ZJ(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,sg(s))}e.remove()}function ks(n){const{a:e,b:t,c:s,d:i,e:a,f:o}=n.getTransform();return[e,t,s,i,a,o]}function dc(n){const{a:e,b:t,c:s,d:i,e:a,f:o}=n.getTransform().invertSelf();return[e,t,s,i,a,o]}function Uu(n,e,t=!1,s=!0){if(e instanceof K0){const{pageWidth:i,pageHeight:a}=e.rawDims,{style:o}=n,c=qi.isCSSRoundSupported,u=`var(--total-scale-factor) * ${i}px`,h=`var(--total-scale-factor) * ${a}px`,f=c?`round(down, ${u}, var(--scale-round-x))`:`calc(${u})`,g=c?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!t||e.rotation%180===0?(o.width=f,o.height=g):(o.width=g,o.height=f)}s&&n.setAttribute("data-main-rotation",e.rotation)}class Cl{constructor(){const{pixelRatio:e}=Cl;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,i,a=-1){let o=1/0,c=1/0,u=1/0;s=Cl.capPixels(s,a),s>0&&(o=Math.sqrt(s/(e*t))),i!==-1&&(c=i/e,u=i/t);const h=Math.min(o,c,u);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const wy=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class JJ{static get isDarkMode(){return Xt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class L5{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:s}=window.getComputedStyle(e);return e.remove(),Xt(this,"commentForegroundColor",sg(s))}}function F5(n,e,t,s){s=Math.min(Math.max(s??1,0),1);const i=255*(1-s);return n=Math.round(n*s+i),e=Math.round(e*s+i),t=Math.round(t*s+i),[n,e,t]}function xj(n,e){const t=n[0]/255,s=n[1]/255,i=n[2]/255,a=Math.max(t,s,i),o=Math.min(t,s,i),c=(a+o)/2;if(a===o)e[0]=e[1]=0;else{const u=a-o;switch(e[1]=c<.5?u/(a+o):u/(2-a-o),a){case t:e[0]=((s-i)/u+(s<i?6:0))*60;break;case s:e[0]=((i-t)/u+2)*60;break;case i:e[0]=((t-s)/u+4)*60;break}}e[2]=c}function S2(n,e){const t=n[0],s=n[1],i=n[2],a=(1-Math.abs(2*i-1))*s,o=a*(1-Math.abs(t/60%2-1)),c=i-a/2;switch(Math.floor(t/60)){case 0:e[0]=a+c,e[1]=o+c,e[2]=c;break;case 1:e[0]=o+c,e[1]=a+c,e[2]=c;break;case 2:e[0]=c,e[1]=a+c,e[2]=o+c;break;case 3:e[0]=c,e[1]=o+c,e[2]=a+c;break;case 4:e[0]=o+c,e[1]=c,e[2]=a+c;break;case 5:case 6:e[0]=a+c,e[1]=c,e[2]=o+c;break}}function bj(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function yj(n,e,t){S2(n,t),t.map(bj);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];S2(e,t),t.map(bj);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];return s>i?(s+.05)/(i+.05):(i+.05)/(s+.05)}const vj=new Map;function z5(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let s=vj.get(t);if(s)return s;const i=new Float32Array(9),a=i.subarray(0,3),o=i.subarray(3,6);xj(n,o);const c=i.subarray(6,9);xj(e,c);const u=c[2]<.5,h=u?12:4.5;if(o[2]=u?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),yj(o,c,a)<h){let f,g;u?(f=o[2],g=1):(f=0,g=o[2]);const x=.005;for(;g-f>x;){const w=o[2]=(f+g)/2;u===yj(o,c,a)<h?f=w:g=w}o[2]=u?g:f}return S2(o,a),s=lt.makeHexColor(Math.round(a[0]*255),Math.round(a[1]*255),Math.round(a[2]*255)),vj.set(t,s),s}function hN({html:n,dir:e,className:t},s){const i=document.createDocumentFragment();if(typeof n=="string"){const a=document.createElement("p");a.dir=e||"auto";const o=n.split(/(?:\r\n?|\n)/);for(let c=0,u=o.length;c<u;++c){const h=o[c];a.append(document.createTextNode(h)),c<u-1&&a.append(document.createElement("br"))}i.append(a)}else uN.render({xfaHtml:n,div:i,intent:"richText"});i.firstChild.classList.add("richText",t),s.append(i)}class Wp{#e=null;#t=null;#s;#n=null;#r=null;#i=null;#a=null;#o=null;static#c=null;constructor(e){this.#s=e,Wp.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#s._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",to,{signal:t}),e.addEventListener("pointerdown",Wp.#l,{signal:t}));const s=this.#n=document.createElement("div");s.className="buttons",e.append(s);const i=this.#s.toolbarPosition;if(i){const{style:a}=e,o=this.#s._uiManager.direction==="ltr"?1-i[0]:i[0];a.insetInlineEnd=`${100*o}%`,a.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#h(e){this.#s._focusEventsAllowed=!1,Rs(e)}#u(e){this.#s._focusEventsAllowed=!0,Rs(e)}#f(e){const t=this.#s._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",to,{signal:t}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#r?.shown(),this.#i?.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=this.#s,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",Wp.#c[e]),this.#f(s)&&s.addEventListener("click",i=>{t.delete()},{signal:t._signal}),this.#n.append(s)}get#p(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#f(t),this.#n.append(t,this.#p),this.#r=e}addComment(e,t=null){if(this.#i)return;const s=e.renderForToolbar();if(!s)return;this.#f(s);const i=this.#a=this.#p;t?(this.#n.insertBefore(s,t),this.#n.insertBefore(i,t)):this.#n.append(s,i),this.#i=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;const t=e.renderButton();this.#f(t),this.#n.append(t,this.#p)}async addEditSignatureButton(e){const t=this.#o=await e.renderEditButton(this.#s);this.#f(t),this.#n.append(t,this.#p)}removeButton(e){e==="comment"&&(this.#i?.removeToolbarCommentButton(),this.#i=null,this.#a?.remove(),this.#a=null)}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,s){const i=this.#n.querySelector(s);i&&e==="comment"&&this.addComment(t,i)}updateEditSignatureButton(e){this.#o&&(this.#o.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class QJ{#e=null;#t=null;#s;constructor(e){this.#s=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const t=this.#s._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",to,{signal:t});const s=this.#e=document.createElement("div");return s.className="buttons",e.append(s),this.#s.hasCommentManager()&&this.#i("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#s.commentSelection("floating_button")}),this.#i("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#s.highlightSelection("floating_button")}),e}#r(e,t){let s=0,i=0;for(const a of e){const o=a.y+a.height;if(o<s)continue;const c=a.x+(t?a.width:0);if(o>s){i=c,s=o;continue}t?c>i&&(i=c):c<i&&(i=c)}return[t?1-i:i,s]}show(e,t,s){const[i,a]=this.#r(t,s),{style:o}=this.#t||=this.#n();e.append(this.#t),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#i(e,t,s,i){const a=document.createElement("button");a.classList.add("basic",e),a.tabIndex=0,a.setAttribute("data-l10n-id",t);const o=document.createElement("span");a.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",s);const c=this.#s._signal;c instanceof AbortSignal&&!c.aborted&&(a.addEventListener("contextmenu",to,{signal:c}),a.addEventListener("click",i,{signal:c})),this.#e.append(a)}}function I5(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}class qJ{#e=0;get id(){return`${c0}${this.#e++}`}}class fN{#e=cN();#t=0;#s=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const a=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Xt(this,"_isSVGFittingCanvas",a)}async#n(e,t){this.#s||=new Map;let s=this.#s.get(e);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let i;if(typeof t=="string"?(s.url=t,i=await ng(t,"blob")):t instanceof File?i=s.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const a=fN._isSVGFittingCanvas,o=new FileReader,c=new Image,u=new Promise((h,f)=>{c.onload=()=>{s.bitmap=c,s.isSvg=!0,h()},o.onload=async()=>{const g=s.svgUrl=o.result;c.src=await a?`${g}#svgView(preserveAspectRatio(none))`:g},c.onerror=o.onerror=f});o.readAsDataURL(i),await u}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){Ht(i),s=null}return this.#s.set(e,s),s&&this.#s.set(s.id,s),s}async getFromFile(e){const{lastModified:t,name:s,size:i,type:a}=e;return this.#n(`${t}_${s}_${i}_${a}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,t){const s=await t;return this.#n(e,s)}async getFromId(e){this.#s||=new Map;const t=this.#s.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#s||=new Map;let s=this.#s.get(e);if(s?.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#s.set(e,s),this.#s.set(s.id,s),s}getSvgUrl(e){const t=this.#s.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#s||=new Map;const t=this.#s.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(s.width,s.height);i.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=i.convertToBlob()}s.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class $J{#e=[];#t=!1;#s;#n=-1;constructor(e=128){this.#s=e}add({cmd:e,undo:t,post:s,mustExec:i,type:a=NaN,overwriteIfSameType:o=!1,keepUndo:c=!1}){if(i&&e(),this.#t)return;const u={cmd:e,undo:t,post:s,type:a};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(u);return}if(o&&this.#e[this.#n].type===a){c&&(u.undo=this.#e[this.#n].undo),this.#e[this.#n]=u;return}const h=this.#n+1;h===this.#s?this.#e.splice(0,1):(this.#n=h,h<this.#e.length&&this.#e.splice(h)),this.#e.push(u)}undo(){if(this.#n===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(this.#n!==-1){for(let t=this.#n;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#n-t),this.#n=t;return}this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}}class J0{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=qi.platform;for(const[s,i,a={}]of e)for(const o of s){const c=o.startsWith("mac+");t&&c?(this.callbacks.set(o.slice(4),{callback:i,options:a}),this.allKeys.add(o.split("+").at(-1))):!t&&!c&&(this.callbacks.set(o,{callback:i,options:a}),this.allKeys.add(o.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(this.#e(t));if(!s)return;const{callback:i,options:{bubbles:a=!1,args:o=[],checker:c=null}}=s;c&&!c(e,t)||(i.bind(e,...o,t)(),a||Rs(t))}}class mN{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return ZJ(e),Xt(this,"_colors",e)}convert(e){const t=sg(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,i]of this._colors)if(i.every((a,o)=>a===t[o]))return mN._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?lt.makeHexColor(...t):e}}class yd{#e=new AbortController;#t=null;#s=null;#n=new Map;#r=new Map;#i=null;#a=null;#o=null;#c=new $J;#l=null;#h=null;#u=null;#f=0;#p=new Set;#m=null;#d=null;#g=new Set;_editorUndoBar=null;#x=!1;#y=!1;#b=!1;#C=null;#N=null;#v=null;#T=null;#S=!1;#A=null;#k=new qJ;#_=!1;#j=!1;#F=!1;#D=null;#P=null;#z=null;#O=null;#W=null;#E=Bt.NONE;#w=new Set;#M=null;#I=null;#H=null;#X=null;#Y=null;#K={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#U=[0,0];#L=null;#G=null;#q=null;#$=null;#B=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=yd.prototype,t=o=>o.#G.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:c})=>{if(c instanceof HTMLInputElement){const{type:u}=c;return u!=="text"&&u!=="number"}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Xt(this,"_keyboardManager",new J0([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&o.#G.contains(c)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&o.#G.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:t}]]))}constructor(e,t,s,i,a,o,c,u,h,f,g,x,w,A,C,E){const T=this._signal=this.#e.signal;this.#G=e,this.#q=t,this.#$=s,this.#i=i,this.#l=a,this.#I=o,this.#Y=u,this._eventBus=c,c._on("editingaction",this.onEditingAction.bind(this),{signal:T}),c._on("pagechanging",this.onPageChanging.bind(this),{signal:T}),c._on("scalechanging",this.onScaleChanging.bind(this),{signal:T}),c._on("rotationchanging",this.onRotationChanging.bind(this),{signal:T}),c._on("setpreference",this.onSetPreference.bind(this),{signal:T}),c._on("switchannotationeditorparams",D=>this.updateParams(D.type,D.value),{signal:T}),window.addEventListener("pointerdown",()=>{this.#j=!0},{capture:!0,signal:T}),window.addEventListener("pointerup",()=>{this.#j=!1},{capture:!0,signal:T}),this.#le(),this.#he(),this.#te(),this.#a=u.annotationStorage,this.#C=u.filterFactory,this.#H=h,this.#T=f||null,this.#x=g,this.#y=x,this.#b=w,this.#W=A||null,this.viewParameters={realScale:af.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=C||null,this._supportsPinchToZoom=E!==!1,a?.setSidebarUiManager(this)}destroy(){this.#B?.resolve(),this.#B=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#r.values())e.destroy();this.#r.clear(),this.#n.clear(),this.#g.clear(),this.#O?.clear(),this.#t=null,this.#w.clear(),this.#c.destroy(),this.#i?.destroy(),this.#l?.destroy(),this.#I?.destroy(),this.#A?.hide(),this.#A=null,this.#z?.destroy(),this.#z=null,this.#s=null,this.#N&&(clearTimeout(this.#N),this.#N=null),this.#L&&(clearTimeout(this.#L),this.#L=null),this._editorUndoBar?.destroy(),this.#Y=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#W}get useNewAltTextFlow(){return this.#y}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return Xt(this,"hcmFilter",this.#H?this.#C.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return Xt(this,"direction",getComputedStyle(this.#G).direction)}get _highlightColors(){return Xt(this,"_highlightColors",this.#T?new Map(this.#T.split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Xt(this,"highlightColors",null);const t=new Map,s=!!this.#H;for(const[i,a]of e){const o=i.endsWith("_HCM");if(s&&o){t.set(i.replace("_HCM",""),a);continue}!s&&!o&&t.set(i,a)}return Xt(this,"highlightColors",t)}get highlightColorNames(){return Xt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#u=e}setMainHighlightColorPicker(e){this.#z=e}editAltText(e,t=!1){this.#i?.editAltText(this,e,t)}hasCommentManager(){return!!this.#l}editComment(e,t,s,i){this.#l?.showDialog(this,e,t,s,i)}selectComment(e,t){this.#r.get(e)?.getEditorByUID(t)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}toggleComment(e,t,s=void 0){this.#l?.toggleCommentPopup(e,t,s)}makeCommentColor(e,t){return e&&this.#l?.makeCommentColor(e,t)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#r.has(e-1))return;const{resolve:t,promise:s}=Promise.withResolvers(),i=a=>{a.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await s}getSignature(e){this.#I?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#I}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){e==="enableNewAltTextWhenAddingImage"&&(this.#b=t)}onPageChanging({pageNumber:e}){this.#f=e-1}focusMainContainer(){this.#G.focus()}findParent(e,t){for(const s of this.#r.values()){const{x:i,y:a,width:o,height:c}=s.div.getBoundingClientRect();if(e>=i&&e<=i+o&&t>=a&&t<=a+c)return s}return null}disableUserSelect(e=!1){this.#q.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#g.add(e)}removeShouldRescale(e){this.#g.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*af.PDF_TO_CSS_UNITS;for(const t of this.#g)t.onScaleChanging();this.#u?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#Q({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of this.#r.values())if(s.hasTextLayer(e))return s;return null}highlightSelection(e="",t=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:i,anchorOffset:a,focusNode:o,focusOffset:c}=s,u=s.toString(),f=this.#Q(s).closest(".textLayer"),g=this.getSelectionBoxes(f);if(!g)return;s.empty();const x=this.#ee(f),w=this.#E===Bt.NONE,A=()=>{const C=x?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:i,anchorOffset:a,focusNode:o,focusOffset:c,text:u});w&&this.showAllEditors("highlight",!0,!0),t&&C?.editComment()};if(w){this.switchToMode(Bt.HIGHLIGHT,A);return}A()}commentSelection(e=""){this.highlightSelection(e,!0)}#re(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=this.#Q(e).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(this.#A||=new QJ(this),this.#A.show(s,i,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#a)return null;const t=`${c0}${e}`,s=this.#a.getRawValue(t);return s&&this.#a.remove(t),s}addToAnnotationStorage(e){!e.isEmpty()&&this.#a&&!this.#a.has(e.id)&&this.#a.setValue(e.id,e)}a11yAlert(e,t=null){const s=this.#$;s&&(s.setAttribute("data-l10n-id",e),t?s.setAttribute("data-l10n-args",JSON.stringify(t)):s.removeAttribute("data-l10n-args"))}#oe(){const e=document.getSelection();if(!e||e.isCollapsed){this.#M&&(this.#A?.hide(),this.#M=null,this.#R({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#M)return;const i=this.#Q(e).closest(".textLayer");if(!i){this.#M&&(this.#A?.hide(),this.#M=null,this.#R({hasSelectedText:!1}));return}if(this.#A?.hide(),this.#M=t,this.#R({hasSelectedText:!0}),!(this.#E!==Bt.HIGHLIGHT&&this.#E!==Bt.NONE)&&(this.#E===Bt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const a=this.#E===Bt.HIGHLIGHT?this.#ee(i):null;if(a?.toggleDrawing(),this.#j){const o=new AbortController,c=this.combinedSignal(o),u=h=>{h.type==="pointerup"&&h.button!==0||(o.abort(),a?.toggleDrawing(!0),h.type==="pointerup"&&this.#Z("main_toolbar"))};window.addEventListener("pointerup",u,{signal:c}),window.addEventListener("blur",u,{signal:c})}else a?.toggleDrawing(!0),this.#Z("main_toolbar")}}#Z(e=""){this.#E===Bt.HIGHLIGHT?this.highlightSelection(e):this.#x&&this.#re()}#le(){document.addEventListener("selectionchange",this.#oe.bind(this),{signal:this._signal})}#ce(){if(this.#v)return;this.#v=new AbortController;const e=this.combinedSignal(this.#v);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#de(){this.#v?.abort(),this.#v=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#Z("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#w)if(t.div.contains(e)){this.#P=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#P)return;const[e,t]=this.#P;this.#P=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#te(){if(this.#D)return;this.#D=new AbortController;const e=this.combinedSignal(this.#D);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#ue(){this.#D?.abort(),this.#D=null}#ne(){if(this.#h)return;this.#h=new AbortController;const e=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#se(){this.#h?.abort(),this.#h=null}#he(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.#ne()}removeEditListeners(){this.#ue(),this.#se()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of this.#d)if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of this.#d)if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of this.#w){const i=s.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const a of t.items)for(const o of this.#d)if(o.isHandlingMimeForPasting(a.type)){o.paste(a,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(a){Ht(`paste: "${a.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const a=[];for(const u of s){const h=await i.deserialize(u);if(!h)return;a.push(h)}const o=()=>{for(const u of a)this.#ie(u);this.#ae(a)},c=()=>{for(const u of a)u.remove()};this.addCommands({cmd:o,undo:c,mustExec:!0})}catch(a){Ht(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#E!==Bt.NONE&&!this.isEditorHandlingKeyboard&&yd._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#Z("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#R(e){Object.entries(e).some(([s,i])=>this.#K[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#K,e)}),this.#E===Bt.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#V([[cn.HIGHLIGHT_FREE,!0]]))}#V(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ce(),this.#ne(),this.#R({isEditing:this.#E!==Bt.NONE,isEmpty:this.#J(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#de(),this.#se(),this.#R({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#d){this.#d=e;for(const t of this.#d)this.#V(t.defaultPropertiesToUpdate)}}getId(){return this.#k.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(e){return this.#r.get(e)}get currentPageIndex(){return this.#f}addLayer(e){this.#r.set(e.pageIndex,e),this.#_?e.enable():e.disable()}removeLayer(e){this.#r.delete(e.pageIndex)}async updateMode(e,t=null,s=!1,i=!1,a=!1){if(this.#E!==e&&!(this.#B&&(await this.#B.promise,!this.#B))){if(this.#B=Promise.withResolvers(),this.#u?.commitOrRemove(),this.#E===Bt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#E=e,e===Bt.NONE){this.setEditingState(!1),this.#me();for(const o of this.#n.values())o.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#B.resolve();return}for(const o of this.#n.values())o.addStandaloneCommentButton();e===Bt.SIGNATURE&&await this.#I?.loadSignatures(),this.setEditingState(!0),await this.#fe(),this.unselectAll();for(const o of this.#r.values())o.updateMode(e);if(e===Bt.POPUP){this.#s||=await this.#Y.getAnnotationsByType(new Set(this.#d.map(u=>u._editorType)));const o=new Set,c=[];for(const u of this.#n.values()){const{annotationElementId:h,hasComment:f,deleted:g}=u;h&&o.add(h),f&&!g&&c.push(u.getData())}for(const u of this.#s){const{id:h,popupRef:f,contentsObj:g}=u;f&&g?.str&&!o.has(h)&&!this.#p.has(h)&&c.push(u)}this.#l?.showSidebar(c)}if(!t){s&&this.addNewEditorFromKeyboard(),this.#B.resolve();return}for(const o of this.#n.values())o.uid===t?(this.setSelected(o),a?o.editComment():i?o.enterInEditMode():o.focus()):o.unselect();this.#B.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#E&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(this.#d){switch(e){case cn.CREATE:this.currentLayer.addNewEditor(t);return;case cn.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#X||=new Map).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const s of this.#w)s.updateParams(e,t);else for(const s of this.#d)s.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){for(const a of this.#n.values())a.editorType===e&&a.show(t);(this.#X?.get(cn.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#V([[cn.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#F!==e){this.#F=e;for(const t of this.#r.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#fe(){if(!this.#_){this.#_=!0;const e=[];for(const t of this.#r.values())e.push(t.enable());await Promise.all(e);for(const t of this.#n.values())t.enable()}}#me(){if(this.unselectAll(),this.#_){this.#_=!1;for(const e of this.#r.values())e.disable();for(const e of this.#n.values())e.disable()}}*getEditors(e){for(const t of this.#n.values())t.pageIndex===e&&(yield t)}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#N&&clearTimeout(this.#N),this.#N=setTimeout(()=>{this.focusMainContainer(),this.#N=null},0)),this.#n.delete(e.id),e.annotationElementId&&this.#O?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#p.has(e.annotationElementId))&&this.#a?.remove(e.id)}addDeletedAnnotationElement(e){this.#p.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#p.has(e)}removeDeletedAnnotationElement(e){this.#p.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ie(e){const t=this.#r.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#V(e.propertiesToUpdate))}get#ge(){let e=null;for(e of this.#w);return e}updateUI(e){this.#ge===e&&this.#V(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#V(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#w.has(e)){this.#w.delete(e),e.unselect(),this.#R({hasSelectedEditor:this.hasSelection});return}this.#w.add(e),e.select(),this.#V(e.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.id}),this.#u?.commitOrRemove();for(const t of this.#w)t!==e&&t.unselect();this.#w.clear(),this.#w.add(e),e.select(),this.#V(e.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}isSelected(e){return this.#w.has(e)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(e){e.unselect(),this.#w.delete(e),this.#R({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#R({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#J()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#J()})}addCommands(e){this.#c.add(e),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#J()})}cleanUndoStack(e){this.#c.cleanType(e)}#J(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#w],s=()=>{this._editorUndoBar?.show(i,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},i=()=>{for(const a of t)this.#ie(a)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#ae(e){for(const t of this.#w)t.unselect();this.#w.clear();for(const t of e)t.isEmpty()||(this.#w.add(t),t.select());this.#R({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#w)e.commit();this.#ae(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#E!==Bt.NONE))&&!this.#u?.commitOrRemove()&&this.hasSelection){for(const e of this.#w)e.unselect();this.#w.clear(),this.#R({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#U[0]+=e,this.#U[1]+=t;const[i,a]=this.#U,o=[...this.#w],c=1e3;this.#L&&clearTimeout(this.#L),this.#L=setTimeout(()=>{this.#L=null,this.#U[0]=this.#U[1]=0,this.addCommands({cmd:()=>{for(const u of o)this.#n.has(u.id)&&(u.translateInPage(i,a),u.translationDone())},undo:()=>{for(const u of o)this.#n.has(u.id)&&(u.translateInPage(-i,-a),u.translationDone())},mustExec:!1})},c);for(const u of o)u.translateInPage(e,t),u.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(const e of this.#w)this.#m.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);const e=this.#m;this.#m=null;let t=!1;for(const[{x:i,y:a,pageIndex:o},c]of e)c.newX=i,c.newY=a,c.newPageIndex=o,t||=i!==c.savedX||a!==c.savedY||o!==c.savedPageIndex;if(!t)return!1;const s=(i,a,o,c)=>{if(this.#n.has(i.id)){const u=this.#r.get(c);u?i._setParentAndPosition(u,a,o):(i.pageIndex=c,i.x=a,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:a,newY:o,newPageIndex:c}]of e)s(i,a,o,c)},undo:()=>{for(const[i,{savedX:a,savedY:o,savedPageIndex:c}]of e)s(i,a,o,c)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#m)for(const s of this.#m.keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#E}isEditingMode(){return this.#E!==Bt.NONE}get imageManager(){return Xt(this,"imageManager",new fN)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,f=t.rangeCount;h<f;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:s,y:i,width:a,height:o}=e.getBoundingClientRect();let c;switch(e.getAttribute("data-main-rotation")){case"90":c=(h,f,g,x)=>({x:(f-i)/o,y:1-(h+g-s)/a,width:x/o,height:g/a});break;case"180":c=(h,f,g,x)=>({x:1-(h+g-s)/a,y:1-(f+x-i)/o,width:g/a,height:x/o});break;case"270":c=(h,f,g,x)=>({x:1-(f+x-i)/o,y:(h-s)/a,width:x/o,height:g/a});break;default:c=(h,f,g,x)=>({x:(h-s)/a,y:(f-i)/o,width:g/a,height:x/o});break}const u=[];for(let h=0,f=t.rangeCount;h<f;h++){const g=t.getRangeAt(h);if(!g.collapsed)for(const{x,y:w,width:A,height:C}of g.getClientRects())A===0||C===0||u.push(c(x,w,A,C))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#o||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#o?.delete(e)}renderAnnotationElement(e){const t=this.#o?.get(e.data.id);if(!t)return;const s=this.#a.getRawValue(t);s&&(this.#E===Bt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){const i=this.#O?.get(e);i&&(i.setCanvas(t,s),this.#O.delete(e))}addMissingCanvas(e,t){(this.#O||=new Map).set(e,t)}}class gc{#e=null;#t=!1;#s=null;#n=null;#r=null;#i=null;#a=!1;#o=null;#c=null;#l=null;#h=null;#u=!1;static#f=null;static _l10n=null;constructor(e){this.#c=e,this.#u=e._uiManager.useNewAltTextFlow,gc.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){gc._l10n??=e}async render(){const e=this.#s=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#n=document.createElement("span");e.append(t),this.#u?(e.classList.add("new"),e.setAttribute("data-l10n-id",gc.#f.missing),t.setAttribute("data-l10n-id",gc.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;e.addEventListener("contextmenu",to,{signal:s}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:s});const i=a=>{a.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#u&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#p}})};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(this.#a=!0,i(a))},{signal:s}),await this.#m(),e}get#p(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#s&&(this.#s.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#u?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#u?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#h=await gc._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#m())}toggleAltTextBadge(e=!1){if(!this.#u||this.#e){this.#o?.remove(),this.#o=null;return}if(!this.#o){const t=this.#o=document.createElement("div");t.className="noAltTextBadge",this.#c.div.append(t)}this.#o.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#l===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:i,cancel:a=!1}){s&&(this.#l=s,this.#h=i),!(this.#e===e&&this.#t===t)&&(a||(this.#e=e,this.#t=t),this.#m())}toggle(e=!1){this.#s&&(!e&&this.#i&&(clearTimeout(this.#i),this.#i=null),this.#s.disabled=!e)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#s?.remove(),this.#s=null,this.#n=null,this.#r=null,this.#o?.remove(),this.#o=null}async#m(){const e=this.#s;if(!e)return;if(this.#u){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",gc.#f[this.#p]),this.#n?.setAttribute("data-l10n-id",gc.#f[`${this.#p}-label`]),!this.#e){this.#r?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#r?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#r;if(!t){this.#r=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#c.id}`;const i=100,a=this.#c._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#i),this.#i=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#i=setTimeout(()=>{this.#i=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:a}),e.addEventListener("mouseleave",()=>{this.#i&&(clearTimeout(this.#i),this.#i=null),this.#r?.classList.remove("show")},{signal:a})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#c.getElementForAltText()?.setAttribute("aria-describedby",t.id)}}class mb{#e=null;#t=null;#s=!1;#n=null;#r=null;#i=null;#a=null;#o=null;#c=!1;#l=null;constructor(e){this.#n=e}renderForToolbar(){const e=this.#t=document.createElement("button");return e.className="comment",this.#h(e,!1)}renderForStandalone(){const e=this.#e=document.createElement("button");e.className="annotationCommentButton";const t=this.#n.commentButtonPosition;if(t){const{style:s}=e;s.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const i=this.#n.commentButtonColor;i&&(s.backgroundColor=i)}return this.#h(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;const e=this.#n.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;const{x:e,y:t,height:s}=this.#e.getBoundingClientRect(),{x:i,y:a,width:o,height:c}=this.#n.parent.boundingClientRect;return[(e-i)/o,(t+s-a)/c]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:t}){this.#e&&(this.#e.classList.toggle("selected",e),this.#e.ariaExpanded=t)}#h(e,t){if(!this.#n._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const s=this.#n._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return e;e.addEventListener("contextmenu",to,{signal:s}),t&&(e.addEventListener("focusin",a=>{this.#n._focusEventsAllowed=!1,Rs(a)},{capture:!0,signal:s}),e.addEventListener("focusout",a=>{this.#n._focusEventsAllowed=!0,Rs(a)},{capture:!0,signal:s})),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:s});const i=a=>{a.preventDefault(),e===this.#t?this.edit():this.#n.toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(this.#s=!0,i(a))},{signal:s}),e.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:s}),e.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:s}),e}edit(e){const t=this.commentPopupPositionInLayer;let s,i;if(t)[s,i]=t;else{[s,i]=this.#n.commentButtonPosition;const{width:f,height:g,x,y:w}=this.#n;s=x+s*f,i=w+i*g}const a=this.#n.parent.boundingClientRect,{x:o,y:c,width:u,height:h}=a;this.#n._uiManager.editComment(this.#n,o+s*u,c+i*h,{...e,parentDimensions:a})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#s}),this.#s=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#r}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#i,date:this.#o,deleted:this.isDeleted()}}set data(e){if(e!==this.#a&&(this.#i=null),e===null){this.#a="",this.#c=!0;return}this.#a=e,this.#o=new Date,this.#c=!1}setInitialText(e,t=null){this.#r=e,this.data=e,this.#o=null,this.#i=t}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#a="",this.#i=null,this.#o=null,this.#n=null,this.#s=!1,this.#c=!1}}class Q0{#e;#t=!1;#s=null;#n;#r;#i;#a;#o=null;#c;#l=null;#h;#u=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:a=null,onPinchEnd:o=null,signal:c}){this.#e=e,this.#s=s,this.#n=t,this.#r=i,this.#i=a,this.#a=o,this.#h=new AbortController,this.#c=AbortSignal.any([c,this.#h.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Cl.pixelRatio}#f(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#o)return;const i=this.#o=new AbortController,a=AbortSignal.any([this.#c,i.signal]),o=this.#e,c={capture:!0,signal:a,passive:!1},u=h=>{h.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};o.addEventListener("pointerdown",h=>{h.pointerType==="touch"&&(Rs(h),u(h))},c),o.addEventListener("pointerup",u,c),o.addEventListener("pointercancel",u,c);return}if(!this.#u){this.#u=new AbortController;const i=AbortSignal.any([this.#c,this.#u.signal]),a=this.#e,o={signal:i,capture:!1,passive:!1};a.addEventListener("touchmove",this.#p.bind(this),o);const c=this.#m.bind(this);a.addEventListener("touchend",c,o),a.addEventListener("touchcancel",c,o),o.capture=!0,a.addEventListener("pointerdown",Rs,o),a.addEventListener("pointermove",Rs,o),a.addEventListener("pointercancel",Rs,o),a.addEventListener("pointerup",Rs,o),this.#r?.()}if(Rs(e),e.touches.length!==2||this.#s?.()){this.#l=null;return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),this.#l={touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#p(e){if(!this.#l||e.touches.length!==2)return;Rs(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:i,screenY:a}=t,{screenX:o,screenY:c}=s,u=this.#l,{touch0X:h,touch0Y:f,touch1X:g,touch1Y:x}=u,w=g-h,A=x-f,C=o-i,E=c-a,T=Math.hypot(C,E)||1,D=Math.hypot(w,A)||1;if(!this.#t&&Math.abs(D-T)<=Q0.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(u.touch0X=i,u.touch0Y=a,u.touch1X=o,u.touch1Y=c,!this.#t){this.#t=!0;return}const M=[(i+o)/2,(a+c)/2];this.#i?.(M,D,T)}#m(e){e.touches.length>=2||(this.#u&&(this.#u.abort(),this.#u=null,this.#a?.()),this.#l&&(Rs(e),this.#l=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#o?.abort(),this.#o=null}}class wt{#e=null;#t=null;#s=null;#n=null;#r=null;#i=!1;#a=null;#o="";#c=null;#l=null;#h=null;#u=null;#f=null;#p="";#m=!1;#d=null;#g=!1;#x=!1;#y=!1;#b=null;#C=0;#N=0;#v=null;#T=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#S=!1;#A=wt._zIndex++;static _borderLineWidth=-1;static _colorManager=new mN;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=wt.prototype._resizeWithKeyboard,t=yd.TRANSLATE_SMALL,s=yd.TRANSLATE_BIG;return Xt(this,"_resizerKeyboardManager",new J0([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],wt.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:i,pageX:a,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[a,o];const[c,u]=this.parentDimensions;this.x=e.x/c,this.y=e.y/u,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Xt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new eQ({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(wt._l10n??=e,wt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),wt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);wt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){es("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#S}set _isDraggable(e){this.#S=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#A}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#L(),this.#u?.remove(),this.#u=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,i){const[a,o]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(e+s)/a,this.y=(t+i)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,i]=this.parentDimensions;this.setAt(e*s,t*i,this.width*s,this.height*i),this._onTranslated()}#k([e,t],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#k(this.parentDimensions,e,t)}translateInPage(e,t){this.#d||=[this.x,this.y,this.width,this.height],this.#k(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#d||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[i,a]}=this;if(this.x+=e/i,this.y+=t/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y:x}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,x)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:c}=this;const[u,h]=this.getBaseTranslation();o+=u,c+=h;const{style:f}=s;f.left=`${(100*o).toFixed(2)}%`,f.top=`${(100*c).toFixed(2)}%`,this._onTranslating(o,c),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#d&&(this.#d[0]!==this.x||this.#d[1]!==this.y)}get _hasBeenResized(){return!!this.#d&&(this.#d[2]!==this.width||this.#d[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=wt,i=s/e,a=s/t;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,i]}=this;let{x:a,y:o,width:c,height:u}=this;if(c*=s,u*=i,a*=s,o*=i,this._mustFixPosition)switch(e){case 0:a=Na(a,0,s-c),o=Na(o,0,i-u);break;case 90:a=Na(a,0,s-u),o=Na(o,c,i);break;case 180:a=Na(a,c,s),o=Na(o,u,i);break;case 270:a=Na(a,u,s),o=Na(o,0,i-c);break}this.x=a/=s,this.y=o/=i;const[h,f]=this.getBaseTranslation();a+=h,o+=f,t.left=`${(100*a).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#_(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return wt.#_(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return wt.#_(e,t,360-this.parentRotation)}#j(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(){const{div:{style:e},width:t,height:s}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#F(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const i=document.createElement("div");this.#c.append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",this.#D.bind(this,s),{signal:t}),i.addEventListener("contextmenu",to,{signal:t}),i.tabIndex=-1}this.div.prepend(this.#c)}#D(e,t){t.preventDefault();const{isMac:s}=qi.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#s?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,this.#l=[t.screenX,t.screenY];const a=new AbortController,o=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#O.bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Rs,{passive:!1,signal:o}),window.addEventListener("contextmenu",to,{signal:o}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const c=this.parent.div.style.cursor,u=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const h=()=>{a.abort(),this.parent.togglePointerEvents(!0),this.#s?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=c,this.div.style.cursor=u,this.#z()};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})}#P(e,t,s,i){this.width=s,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#z(){if(!this.#h)return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:i}=this.#h;this.#h=null;const a=this.x,o=this.y,c=this.width,u=this.height;a===e&&o===t&&c===s&&u===i||this.addCommands({cmd:this.#P.bind(this,a,o,c,u),undo:this.#P.bind(this,e,t,s,i),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#O(e,t){const[s,i]=this.parentDimensions,a=this.x,o=this.y,c=this.width,u=this.height,h=wt.MIN_SIZE/s,f=wt.MIN_SIZE/i,g=this.#j(this.rotation),x=(U,H)=>[g[0]*U+g[2]*H,g[1]*U+g[3]*H],w=this.#j(360-this.rotation),A=(U,H)=>[w[0]*U+w[2]*H,w[1]*U+w[3]*H];let C,E,T=!1,D=!1;switch(e){case"topLeft":T=!0,C=(U,H)=>[0,0],E=(U,H)=>[U,H];break;case"topMiddle":C=(U,H)=>[U/2,0],E=(U,H)=>[U/2,H];break;case"topRight":T=!0,C=(U,H)=>[U,0],E=(U,H)=>[0,H];break;case"middleRight":D=!0,C=(U,H)=>[U,H/2],E=(U,H)=>[0,H/2];break;case"bottomRight":T=!0,C=(U,H)=>[U,H],E=(U,H)=>[0,0];break;case"bottomMiddle":C=(U,H)=>[U/2,H],E=(U,H)=>[U/2,0];break;case"bottomLeft":T=!0,C=(U,H)=>[0,H],E=(U,H)=>[U,0];break;case"middleLeft":D=!0,C=(U,H)=>[0,H/2],E=(U,H)=>[U,H/2];break}const M=C(c,u),L=E(c,u);let I=x(...L);const W=wt._round(a+I[0]),V=wt._round(o+I[1]);let Y=1,K=1,q,ne;if(t.fromKeyboard)({deltaX:q,deltaY:ne}=t);else{const{screenX:U,screenY:H}=t,[ee,he]=this.#l;[q,ne]=this.screenToPageTranslation(U-ee,H-he),this.#l[0]=U,this.#l[1]=H}if([q,ne]=A(q/s,ne/i),T){const U=Math.hypot(c,u);Y=K=Math.max(Math.min(Math.hypot(L[0]-M[0]-q,L[1]-M[1]-ne)/U,1/c,1/u),h/c,f/u)}else D?Y=Na(Math.abs(L[0]-M[0]-q),h,1)/c:K=Na(Math.abs(L[1]-M[1]-ne),f,1)/u;const le=wt._round(c*Y),_e=wt._round(u*K);I=x(...E(le,_e));const xe=W-I[0],je=V-I[1];this.#d||=[this.x,this.y,this.width,this.height],this.width=le,this.height=_e,this.x=xe,this.y=je,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#s?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#x)return this._editToolbar;this._editToolbar=new Wp(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,s]of e)await this._editToolbar.addButton(t,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#s?.destroy()}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#s||(gc.initialize(wt._l10n),this.#s=new gc(this),this.#e&&(this.#s.data=this.#e,this.#e=null)),this.#s}get altTextData(){return this.#s?.data}set altTextData(e){this.#s&&(this.#s.data=e)}get guessedAltText(){return this.#s?.guessedText}async setGuessedAltText(e){await this.#s?.setGuessedText(e)}serializeAltText(e){return this.#s?.serialize(e)}hasAltText(){return!!this.#s&&!this.#s.isEmpty()}hasAltTextData(){return this.#s?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new mb(this)}addStandaloneCommentButton(){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#n.renderForStandalone(),this.div.append(this.#r))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:s,deleted:i}}=this.#n;return{text:t,richText:e,date:s,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#n||=new mb(this),this.#n.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:s}){if(!t||(this.#n||=new mb(this),this.#n.setInitialText(e,s),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(e){this.#n||=new mb(this),this.#n.edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){this.#n.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[a]=this.pageDimensions,[o]=this.pageTranslation,c=o+a+1,u=i-100,h=c+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[c,u,h,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){this.#n.data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#i?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#H();const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[i,a]=this.getInitialTranslation();return this.translate(i,a),I5(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#T||=new Q0({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#W.bind(this),onPinching:this.#E.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#W(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#s?.toggle(!1),this.parent.togglePointerEvents(!1)}#E(e,t,s){let a=.7*(s/t)+1-.7;if(a===1)return;const o=this.#j(this.rotation),c=(W,V)=>[o[0]*W+o[2]*V,o[1]*W+o[3]*V],[u,h]=this.parentDimensions,f=this.x,g=this.y,x=this.width,w=this.height,A=wt.MIN_SIZE/u,C=wt.MIN_SIZE/h;a=Math.max(Math.min(a,1/x,1/w),A/x,C/w);const E=wt._round(x*a),T=wt._round(w*a);if(E===x&&T===w)return;this.#d||=[f,g,x,w];const D=c(x/2,w/2),M=wt._round(f+D[0]),L=wt._round(g+D[1]),I=c(E/2,T/2);this.x=M-I[0],this.y=L-I[1],this.width=E,this.height=T,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#s?.toggle(!0),this.parent.togglePointerEvents(!0),this.#z()}pointerdown(e){const{isMac:t}=qi.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#I(e);return}this.#M(e)}#M(e){const{isMac:t}=qi.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#I(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:a},c=h=>{i.abort(),this.#a=null,this.#m=!1,this._uiManager.endDragSession()||this.#M(h),s&&this._onStopDragging()};t&&(this.#C=e.clientX,this.#N=e.clientY,this.#a=e.pointerId,this.#o=e.pointerType,window.addEventListener("pointermove",h=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:f,clientY:g,pointerId:x}=h;if(x!==this.#a){Rs(h);return}const[w,A]=this.screenToPageTranslation(f-this.#C,g-this.#N);this.#C=f,this.#N=g,this._uiManager.dragSelectedEditors(w,A)},o),window.addEventListener("touchmove",Rs,o),window.addEventListener("pointerdown",h=>{h.pointerType===this.#o&&(this.#T||h.isPrimary)&&c(h),Rs(h)},o));const u=h=>{if(!this.#a||this.#a===h.pointerId){c(h);return}Rs(h)};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const i=this.parentScale,[a,o]=this.pageDimensions,[c,u]=this.pageTranslation,h=e/i,f=t/i,g=this.x*a,x=this.y*o,w=this.width*a,A=this.height*o;switch(s){case 0:return[g+h+c,o-x-f-A+u,g+h+w+c,o-x-f+u];case 90:return[g+f+c,o-x+h+u,g+f+A+c,o-x+h+w+u];case 180:return[g-h-w+c,o-x+f+u,g-h+c,o-x+f+A+u];case 270:return[g-f-A+c,o-x-h-w+u,g-f+c,o-x-h+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,i,a,o]=e,c=a-s,u=o-i;switch(this.rotation){case 0:return[s,t-o,c,u];case 90:return[s,t-i,u,c];case 180:return[a,t-i,c,u];case 270:return[a,t-o,u,c];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&wt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:s,opacity:i,deleted:a,richText:o},uid:c,pageIndex:u,creationDate:h,modificationDate:f}=this;return{id:c,pageIndex:u,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:h,modificationDate:s||f,popupRef:!a,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#x=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#x=!1,!0):!1}isInEditMode(){return this.#x}shouldGetKeyboardEvents(){return this.#y}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:i}=this.getClientDimensions(),{innerHeight:a,innerWidth:o}=window;return t<o&&i>0&&e<a&&s>0}#H(){if(this.#f||!this.div)return;this.#f=new AbortController;const e=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#H()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,t,s){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,i.#e=e.accessibilityData,i._isCopy=e.isCopy||!1;const[a,o]=i.pageDimensions,[c,u,h,f]=i.getRectInCurrentCoords(e.rect,o);return i.x=c/a,i.y=u/o,i.width=h/a,i.height=f/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#L(),this.removeEditToolbar(),this.#v){for(const e of this.#v.values())clearTimeout(e);this.#v=null}this.parent=null,this.#T?.destroy(),this.#T=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#F(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[s,i,a,o]=this.getPDFRect();return[wt._round(s+(a-s)*e),wt._round(i+(o-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(e){this.#n.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#n.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#c.children;if(!this.#t){this.#t=Array.from(t);const o=this.#X.bind(this),c=this.#Y.bind(this),u=this._uiManager._signal;for(const h of this.#t){const f=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",o,{signal:u}),h.addEventListener("blur",c,{signal:u}),h.addEventListener("focus",this.#K.bind(this,f),{signal:u}),h.setAttribute("data-l10n-id",wt._l10nResizer[f])}}const s=this.#t[0];let i=0;for(const o of t){if(o===s)break;i++}const a=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(a!==i){if(a<i)for(let c=0;c<i-a;c++)this.#c.append(this.#c.firstChild);else if(a>i)for(let c=0;c<a-i;c++)this.#c.firstChild.before(this.#c.lastChild);let o=0;for(const c of t){const h=this.#t[o++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",wt._l10nResizer[h])}}this.#U(0),this.#y=!0,this.#c.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#X(e){wt._resizerKeyboardManager.exec(this,e)}#Y(e){this.#y&&e.relatedTarget?.parentNode!==this.#c&&this.#L()}#K(e){this.#p=this.#y?e:""}#U(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#y&&this.#O(this.#p,{deltaX:e,deltaY:t,fromKeyboard:!0})}#L(){this.#y=!1,this.#U(-1),this.#z()}_stopResizingWithKeyboard(){this.#L(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#s?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#s?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#g}set isEditing(e){this.#g=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#v||=new Map;const{action:s}=e;let i=this.#v.get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),this.#v.delete(s),this.#v.size===0&&(this.#v=null)},wt._telemetryTimeout),this.#v.set(s,i);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}updateFakeAnnotationElement(e){if(!this.#u&&!this.deleted){this.#u=e.addFakeAnnotation(this);return}if(this.deleted){this.#u.remove(),this.#u=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#u.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class eQ extends wt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const wj=3285377520,wo=4294901760,uc=65535;class B5{constructor(e){this.h1=e?e&4294967295:wj,this.h2=e?e&4294967295:wj}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let C=0,E=e.length;C<E;C++){const T=e.charCodeAt(C);T<=255?t[s++]=T:(t[s++]=T>>>8,t[s++]=T&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,a=s-i*4,o=new Uint32Array(t.buffer,0,i);let c=0,u=0,h=this.h1,f=this.h2;const g=3432918353,x=461845907,w=g&uc,A=x&uc;for(let C=0;C<i;C++)C&1?(c=o[C],c=c*g&wo|c*w&uc,c=c<<15|c>>>17,c=c*x&wo|c*A&uc,h^=c,h=h<<13|h>>>19,h=h*5+3864292196):(u=o[C],u=u*g&wo|u*w&uc,u=u<<15|u>>>17,u=u*x&wo|u*A&uc,f^=u,f=f<<13|f>>>19,f=f*5+3864292196);switch(c=0,a){case 3:c^=t[i*4+2]<<16;case 2:c^=t[i*4+1]<<8;case 1:c^=t[i*4],c=c*g&wo|c*w&uc,c=c<<15|c>>>17,c=c*x&wo|c*A&uc,i&1?h^=c:f^=c}this.h1=h,this.h2=f}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&wo|e*36045&uc,t=t*4283543511&wo|((t<<16|e>>>16)*2950163797&wo)>>>16,e^=t>>>1,e=e*444984403&wo|e*60499&uc,t=t*3301882366&wo|((t<<16|e>>>16)*3120437893&wo)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const N2=Object.freeze({map:null,hash:"",transfer:void 0});class gN{#e=!1;#t=null;#s=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=this.#n.get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return this.#n.get(e)}remove(e){const t=this.#n.get(e);if(t!==void 0&&(t instanceof wt&&this.#s.delete(t.annotationElementId),this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#n.values())if(s instanceof wt)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=this.#n.get(e);let i=!1;if(s!==void 0)for(const[a,o]of Object.entries(t))s[a]!==o&&(i=!0,s[a]=o);else i=!0,this.#n.set(e,t);i&&this.#r(),t instanceof wt&&((this.#s||=new Map).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return this.#n.has(e)}get size(){return this.#n.size}#r(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new H5(this)}get serializable(){if(this.#n.size===0)return N2;const e=new Map,t=new B5,s=[],i=Object.create(null);let a=!1;for(const[o,c]of this.#n){const u=c instanceof wt?c.serialize(!1,i):c;u&&(e.set(o,u),t.update(`${o}:${JSON.stringify(u)}`),a||=!!u.bitmap)}if(a)for(const o of e.values())o.bitmap&&s.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:N2}get editorStats(){let e=null;const t=new Map;let s=0,i=0;for(const a of this.#n.values()){if(!(a instanceof wt)){a.popup&&(a.popup.deleted?i+=1:s+=1);continue}a.isCommentDeleted?i+=1:a.hasEditedComment&&(s+=1);const o=a.telemetryFinalData;if(!o)continue;const{type:c}=o;t.has(c)||t.set(c,Object.getPrototypeOf(a).constructor),e||=Object.create(null);const u=e[c]||=new Map;for(const[h,f]of Object.entries(o)){if(h==="type")continue;let g=u.get(h);g||(g=new Map,u.set(h,g));const x=g.get(f)??0;g.set(f,x+1)}}if((i>0||s>0)&&(e||=Object.create(null),e.comments={deleted:i,edited:s}),!e)return null;for(const[a,o]of t)e[a]=o.computeTelemetryFinalData(e[a]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,t){const s=this.#s?.get(e);return s?(s.updateFromAnnotationLayer(t),!0):!1}getEditor(e){return this.#s?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;const e=[];if(this.#s)for(const t of this.#s.values())t.serialize()&&e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class H5 extends gN{#e;constructor(e){super();const{map:t,hash:s,transfer:i}=e.serializable,a=structuredClone(t,i?{transfer:i}:null);this.#e={map:a,hash:s,transfer:i}}get print(){es("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return Xt(this,"modifiedIds",{ids:new Set,hash:""})}}class tQ{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||this.#e.has(e.loadedName))){if(mn(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:a,style:o}=e,c=new FontFace(i,a,o);this.addNativeFontFace(c);try{await c.load(),this.#e.add(i),s?.(e)}catch{Ht(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}es("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw Ht(`Failed to load font '${s.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return Xt(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Xt(this,"isSyncFontLoadingSupported",Ua||qi.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(mn(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const a=s.shift();setTimeout(a.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:t,callback:e};return s.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Xt(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(L,I){return L.charCodeAt(I)<<24|L.charCodeAt(I+1)<<16|L.charCodeAt(I+2)<<8|L.charCodeAt(I+3)&255}function i(L,I,W,V){const Y=L.substring(0,I),K=L.substring(I+W);return Y+V+K}let a,o;const c=this._document.createElement("canvas");c.width=1,c.height=1;const u=c.getContext("2d");let h=0;function f(L,I){if(++h>30){Ht("Load test font never loaded."),I();return}if(u.font="30px "+L,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){I();return}setTimeout(f.bind(null,L,I))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let x=this._loadTestFont;x=i(x,976,g.length,g);const A=16,C=1482184792;let E=s(x,A);for(a=0,o=g.length-3;a<o;a+=4)E=E-C+s(g,a)|0;a<g.length&&(E=E-C+s(g+"XXX",a)|0),x=i(x,A,4,UJ(E));const T=`url(data:font/opentype;base64,${btoa(x)});`,D=`@font-face {font-family:"${g}";src:${T}}`;this.insertRule(D);const M=this._document.createElement("div");M.style.visibility="hidden",M.style.width=M.style.height="10px",M.style.position="absolute",M.style.top=M.style.left="0px";for(const L of[e.loadedName,g]){const I=this._document.createElement("span");I.textContent="Hi",I.style.fontFamily=L,M.append(I)}this._document.body.append(M),f(g,()=>{M.remove(),t.complete()})}}class nQ{#e;constructor(e,t=null,s,i){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=t,s&&Object.assign(this,s),i&&(this.charProcOperatorList=i)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${D5(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let i;try{i=e.get(s)}catch(o){Ht(`getPathGenerator - ignoring character: "${o}".`)}const a=new Path2D(i||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=a}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}}function sQ(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Ua)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function iQ(n){if(Ua&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return X0(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function gb(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const A2=n=>typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0,aQ=n=>typeof n=="object"&&typeof n?.name=="string",U5=YJ.bind(null,A2,aQ);class rQ{#e=new Map;#t=Promise.resolve();postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[i]of this.#e)i.call(this,s)})}addEventListener(e,t,s=null){let i=null;if(s?.signal instanceof AbortSignal){const{signal:a}=s;if(a.aborted){Ht("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);i=()=>a.removeEventListener("abort",o),a.addEventListener("abort",o)}this.#e.set(t,i)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const pb={DATA:1,ERROR:2},xi={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Sj(){}function ur(n){if(n instanceof bd||n instanceof yy||n instanceof mj||n instanceof d0||n instanceof pw)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||es('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new bd(n.message);case"InvalidPDFException":return new yy(n.message);case"PasswordException":return new mj(n.message,n.code);case"ResponseException":return new d0(n.message,n.status,n.missing);case"UnknownErrorException":return new pw(n.message,n.details)}return new pw(n.message,n.toString())}class Tp{#e=new AbortController;constructor(e,t,s){this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const s=e.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===pb.DATA)i.resolve(e.data);else if(e.callback===pb.ERROR)i.reject(ur(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,i=e.sourceName,a=this.comObj;Promise.try(t,e.data).then(function(o){a.postMessage({sourceName:s,targetName:i,callback:pb.DATA,callbackId:e.callbackId,data:o})},function(o){a.postMessage({sourceName:s,targetName:i,callback:pb.ERROR,callbackId:e.callbackId,reason:ur(o)})});return}if(e.streamId){this.#s(e);return}t(e.data)}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},s)}catch(o){a.reject(o)}return a.promise}sendWithStream(e,t,s,i){const a=this.streamId++,o=this.sourceName,c=this.targetName,u=this.comObj;return new ReadableStream({start:h=>{const f=Promise.withResolvers();return this.streamControllers[a]={controller:h,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:o,targetName:c,action:e,streamId:a,data:t,desiredSize:h.desiredSize},i),f.promise},pull:h=>{const f=Promise.withResolvers();return this.streamControllers[a].pullCall=f,u.postMessage({sourceName:o,targetName:c,stream:xi.PULL,streamId:a,desiredSize:h.desiredSize}),f.promise},cancel:h=>{mn(h instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[a].cancelCall=f,this.streamControllers[a].isClosed=!0,u.postMessage({sourceName:o,targetName:c,stream:xi.CANCEL,streamId:a,reason:ur(h)}),f.promise}},s)}#s(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,a=this.comObj,o=this,c=this.actionHandler[e.action],u={enqueue(h,f=1,g){if(this.isCancelled)return;const x=this.desiredSize;this.desiredSize-=f,x>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:s,targetName:i,stream:xi.ENQUEUE,streamId:t,chunk:h},g)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:s,targetName:i,stream:xi.CLOSE,streamId:t}),delete o.streamSinks[t])},error(h){mn(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:s,targetName:i,stream:xi.ERROR,streamId:t,reason:ur(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[t]=u,Promise.try(c,e.data,u).then(function(){a.postMessage({sourceName:s,targetName:i,stream:xi.START_COMPLETE,streamId:t,success:!0})},function(h){a.postMessage({sourceName:s,targetName:i,stream:xi.START_COMPLETE,streamId:t,reason:ur(h)})})}#n(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,a=this.comObj,o=this.streamControllers[t],c=this.streamSinks[t];switch(e.stream){case xi.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(ur(e.reason));break;case xi.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(ur(e.reason));break;case xi.PULL:if(!c){a.postMessage({sourceName:s,targetName:i,stream:xi.PULL_COMPLETE,streamId:t,success:!0});break}c.desiredSize<=0&&e.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=e.desiredSize,Promise.try(c.onPull||Sj).then(function(){a.postMessage({sourceName:s,targetName:i,stream:xi.PULL_COMPLETE,streamId:t,success:!0})},function(h){a.postMessage({sourceName:s,targetName:i,stream:xi.PULL_COMPLETE,streamId:t,reason:ur(h)})});break;case xi.ENQUEUE:if(mn(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case xi.CLOSE:if(mn(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#r(o,t);break;case xi.ERROR:mn(o,"error should have stream controller"),o.controller.error(ur(e.reason)),this.#r(o,t);break;case xi.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(ur(e.reason)),this.#r(o,t);break;case xi.CANCEL:if(!c)break;const u=ur(e.reason);Promise.try(c.onCancel||Sj,u).then(function(){a.postMessage({sourceName:s,targetName:i,stream:xi.CANCEL_COMPLETE,streamId:t,success:!0})},function(h){a.postMessage({sourceName:s,targetName:i,stream:xi.CANCEL_COMPLETE,streamId:t,reason:ur(h)})}),c.sinkCapability.reject(u),c.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#r(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class V5{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){es("Abstract method `_createCanvas` called.")}}class oQ extends V5{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class W5{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){es("Abstract method `_fetch` called.")}}class Nj extends W5{async _fetch(e){const t=await ng(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):X0(t)}}class G5{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,i,a){return"none"}destroy(e=!1){}}class lQ extends G5{#e;#t;#s;#n;#r;#i;#a=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#n=e,this.#r=t}get#o(){return this.#t||=new Map}get#c(){return this.#i||=new Map}get#l(){if(!this.#s){const e=this.#r.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const s=this.#r.createElementNS(ld,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#s=this.#r.createElementNS(ld,"defs"),e.append(s),s.append(this.#s),this.#r.body.append(e)}return this.#s}#h(e){if(e.length===1){const u=e[0],h=new Array(256);for(let g=0;g<256;g++)h[g]=u[g]/255;const f=h.join(",");return[f,f,f]}const[t,s,i]=e,a=new Array(256),o=new Array(256),c=new Array(256);for(let u=0;u<256;u++)a[u]=t[u]/255,o[u]=s[u]/255,c[u]=i[u]/255;return[a.join(","),o.join(","),c.join(",")]}#u(e){if(this.#e===void 0){this.#e="";const t=this.#r.URL;t!==this.#r.baseURI&&(Z0(t)?Ht('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=lN(t,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#o.get(e);if(t)return t;const[s,i,a]=this.#h(e),o=e.length===1?s:`${s}${i}${a}`;if(t=this.#o.get(o),t)return this.#o.set(e,t),t;const c=`g_${this.#n}_transfer_map_${this.#a++}`,u=this.#u(c);this.#o.set(e,u),this.#o.set(o,u);const h=this.#m(c);return this.#g(s,i,a,h),u}addHCMFilter(e,t){const s=`${e}-${t}`,i="base";let a=this.#c.get(i);if(a?.key===s||(a?(a.filter?.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},this.#c.set(i,a)),!e||!t))return a.url;const o=this.#y(e);e=lt.makeHexColor(...o);const c=this.#y(t);if(t=lt.makeHexColor(...c),this.#l.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return a.url;const u=new Array(256);for(let w=0;w<=255;w++){const A=w/255;u[w]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const h=u.join(","),f=`g_${this.#n}_hcm_filter`,g=a.filter=this.#m(f);this.#g(h,h,h,g),this.#p(g);const x=(w,A)=>{const C=o[w]/255,E=c[w]/255,T=new Array(A+1);for(let D=0;D<=A;D++)T[D]=C+D/A*(E-C);return T.join(",")};return this.#g(x(0,5),x(1,5),x(2,5),g),a.url=this.#u(f),a.url}addAlphaFilter(e){let t=this.#o.get(e);if(t)return t;const[s]=this.#h([e]),i=`alpha_${s}`;if(t=this.#o.get(i),t)return this.#o.set(e,t),t;const a=`g_${this.#n}_alpha_map_${this.#a++}`,o=this.#u(a);this.#o.set(e,o),this.#o.set(i,o);const c=this.#m(a);return this.#x(s,c),o}addLuminosityFilter(e){let t=this.#o.get(e||"luminosity");if(t)return t;let s,i;if(e?([s]=this.#h([e]),i=`luminosity_${s}`):i="luminosity",t=this.#o.get(i),t)return this.#o.set(e,t),t;const a=`g_${this.#n}_luminosity_map_${this.#a++}`,o=this.#u(a);this.#o.set(e,o),this.#o.set(i,o);const c=this.#m(a);return this.#f(c),e&&this.#x(s,c),o}addHighlightHCMFilter(e,t,s,i,a){const o=`${t}-${s}-${i}-${a}`;let c=this.#c.get(e);if(c?.key===o||(c?(c.filter?.remove(),c.key=o,c.url="none",c.filter=null):(c={key:o,url:"none",filter:null},this.#c.set(e,c)),!t||!s))return c.url;const[u,h]=[t,s].map(this.#y.bind(this));let f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),g=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[x,w]=[i,a].map(this.#y.bind(this));g<f&&([f,g,x,w]=[g,f,w,x]),this.#l.style.color="";const A=(T,D,M)=>{const L=new Array(256),I=(g-f)/M,W=T/255,V=(D-T)/(255*M);let Y=0;for(let K=0;K<=M;K++){const q=Math.round(f+K*I),ne=W+K*V;for(let le=Y;le<=q;le++)L[le]=ne;Y=q+1}for(let K=Y;K<256;K++)L[K]=L[Y-1];return L.join(",")},C=`g_${this.#n}_hcm_${e}_filter`,E=c.filter=this.#m(C);return this.#p(E),this.#g(A(x[0],w[0],5),A(x[1],w[1],5),A(x[2],w[2],5),E),c.url=this.#u(C),c.url}destroy(e=!1){e&&this.#i?.size||(this.#s?.parentNode.parentNode.remove(),this.#s=null,this.#t?.clear(),this.#t=null,this.#i?.clear(),this.#i=null,this.#a=0)}#f(e){const t=this.#r.createElementNS(ld,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#p(e){const t=this.#r.createElementNS(ld,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#m(e){const t=this.#r.createElementNS(ld,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#l.append(t),t}#d(e,t,s){const i=this.#r.createElementNS(ld,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),e.append(i)}#g(e,t,s,i){const a=this.#r.createElementNS(ld,"feComponentTransfer");i.append(a),this.#d(a,"feFuncR",e),this.#d(a,"feFuncG",t),this.#d(a,"feFuncB",s)}#x(e,t){const s=this.#r.createElementNS(ld,"feComponentTransfer");t.append(s),this.#d(s,"feFuncA",e)}#y(e){return this.#l.style.color=e,sg(getComputedStyle(this.#l).getPropertyValue("color"))}}class Y5{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){es("Abstract method `_fetch` called.")}}class Aj extends Y5{async _fetch(e){const t=await ng(e,"arraybuffer");return new Uint8Array(t)}}class X5{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){es("Abstract method `_fetch` called.")}}class Cj extends X5{async _fetch(e){const t=await ng(e,"arraybuffer");return new Uint8Array(t)}}Ua&&Ht("Please use the `legacy` build in Node.js environments.");async function pN(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class cQ extends G5{}class dQ extends V5{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class uQ extends W5{async _fetch(e){return pN(e)}}class hQ extends Y5{async _fetch(e){return pN(e)}}class fQ extends X5{async _fetch(e){return pN(e)}}const Qf="__forcedDependency",{floor:Ej,ceil:Tj}=Math;function xb(n,e,t,s,i,a){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],s),n[e*4+2]=Math.max(n[e*4+2],i),n[e*4+3]=Math.max(n[e*4+3],a)}const C2=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class mQ{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===C2}minX(e){return this.#t[e*4+0]/256}minY(e){return this.#t[e*4+1]/256}maxX(e){return(this.#t[e*4+2]+1)/256}maxY(e){return(this.#t[e*4+3]+1)/256}}const bb=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};class gQ{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[Qf]:[]};#s=new Map;#n=[];#r=[];#i=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#h=new Map;#u=new Map;#f;#p;#m;#d;#g;constructor(e,t,s=!1){this.#f=e.width,this.#p=e.height,this.#x(t),s&&(this.#g=new Map)}growOperationsCount(e){e>=this.#d.length&&this.#x(e,this.#d)}#x(e,t){const s=new ArrayBuffer(e*4);this.#m=new Uint8ClampedArray(s),this.#d=new Uint32Array(s),t&&t.length>0?(this.#d.set(t),this.#d.fill(C2,t.length)):this.#d.fill(C2)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[Qf]:{__proto__:this.#t[Qf]}},this.#a={__proto__:this.#a},this.#n.push(e),this}restore(e){const t=Object.getPrototypeOf(this.#e);if(t===null)return this;this.#e=t,this.#t=Object.getPrototypeOf(this.#t),this.#a=Object.getPrototypeOf(this.#a);const s=this.#n.pop();return s!==void 0&&(bb(this.#g,e)?.dependencies.add(s),this.#d[e]=this.#d[s]),this}recordOpenMarker(e){return this.#n.push(e),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(e){const t=this.#n.pop();return t!==void 0&&(bb(this.#g,e)?.dependencies.add(t),this.#d[e]=this.#d[t]),this}beginMarkedContent(e){return this.#r.push(e),this}endMarkedContent(e){const t=this.#r.pop();return t!==void 0&&(bb(this.#g,e)?.dependencies.add(t),this.#d[e]=this.#d[t]),this}pushBaseTransform(e){return this.#i.push(lt.multiplyByDOMMatrix(this.#i.at(-1),e.getTransform())),this}popBaseTransform(){return this.#i.length>1&&this.#i.pop(),this}recordSimpleData(e,t){return this.#e[e]=t,this}recordIncrementalData(e,t){return this.#t[e].push(t),this}resetIncrementalData(e,t){return this.#t[e].length=0,this}recordNamedData(e,t){return this.#s.set(e,t),this}recordSimpleDataFromNamed(e,t,s){this.#e[e]=this.#s.get(t)??s}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Qf,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in this.#e&&this.recordFutureForcedDependency(t,this.#e[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(Qf,e);return this}resetBBox(e){return this.#c!==e&&(this.#c=e,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(e,t,s,i,a,o){const c=lt.multiplyByDOMMatrix(this.#i.at(-1),t.getTransform()),u=[1/0,1/0,-1/0,-1/0];lt.axialAlignedBoundingBox([s,a,i,o],c,u);const h=lt.intersect(this.#a,u);return h?(this.#a[0]=h[0],this.#a[1]=h[1],this.#a[2]=h[2],this.#a[3]=h[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(e,t,s,i,a,o){const c=this.#a;if(c[0]===1/0)return this;const u=lt.multiplyByDOMMatrix(this.#i.at(-1),t.getTransform());if(c[0]===-1/0)return lt.axialAlignedBoundingBox([s,a,i,o],u,this.#o),this;const h=[1/0,1/0,-1/0,-1/0];return lt.axialAlignedBoundingBox([s,a,i,o],u,h),this.#o[0]=Math.min(this.#o[0],Math.max(h[0],c[0])),this.#o[1]=Math.min(this.#o[1],Math.max(h[1],c[1])),this.#o[2]=Math.max(this.#o[2],Math.min(h[2],c[2])),this.#o[3]=Math.max(this.#o[3],Math.min(h[3],c[3])),this}recordCharacterBBox(e,t,s,i=1,a=0,o=0,c){const u=s.bbox;let h,f;if(u&&(h=u[2]!==u[0]&&u[3]!==u[1]&&this.#u.get(s),h!==!1&&(f=[0,0,0,0],lt.axialAlignedBoundingBox(u,s.fontMatrix,f),(i!==1||a!==0||o!==0)&&lt.scaleMinMax([i,0,0,-i,a,o],f),h)))return this.recordBBox(e,t,f[0],f[2],f[1],f[3]);if(!c)return this.recordFullPageBBox(e);const g=c();return u&&f&&h===void 0&&(h=f[0]<=a-g.actualBoundingBoxLeft&&f[2]>=a+g.actualBoundingBoxRight&&f[1]<=o-g.actualBoundingBoxAscent&&f[3]>=o+g.actualBoundingBoxDescent,this.#u.set(s,h),h)?this.recordBBox(e,t,f[0],f[2],f[1],f[3]):this.recordBBox(e,t,a-g.actualBoundingBoxLeft,a+g.actualBoundingBoxRight,o-g.actualBoundingBoxAscent,o+g.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#p,this.#a[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,t){const s=this.#l,i=this.#e,a=this.#t;for(const o of t)o in this.#e?s.add(i[o]):o in a&&a[o].forEach(s.add,s);return this}recordNamedDependency(e,t){return this.#s.has(t)&&this.#l.add(this.#s.get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[Qf]),this.#g){const s=bb(this.#g,e),{dependencies:i}=s;this.#l.forEach(i.add,i),this.#n.forEach(i.add,i),this.#r.forEach(i.add,i),i.delete(e),s.isRenderingOperation=!0}if(this.#c===e){const s=Ej(this.#o[0]*256/this.#f),i=Ej(this.#o[1]*256/this.#p),a=Tj(this.#o[2]*256/this.#f),o=Tj(this.#o[3]*256/this.#p);xb(this.#m,e,s,i,a,o);for(const c of this.#l)c!==e&&xb(this.#m,c,s,i,a,o);for(const c of this.#n)c!==e&&xb(this.#m,c,s,i,a,o);for(const c of this.#r)c!==e&&xb(this.#m,c,s,i,a,o);t||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(e,t=!1){const s=Array.from(this.#l);this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const i of s)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,t=!1){return this.#c===e&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),t||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const t=this.#h.get(e);return this.#h.delete(e),t}_pushPendingDependencies(e){for(const t of e)this.#l.add(t)}take(){return this.#u.clear(),new mQ(this.#d,this.#m)}takeDebugMetadata(){return this.#g}}class Sy{#e;#t;#s;#n=0;#r=0;constructor(e,t,s){if(e instanceof Sy&&e.#s===!!s)return e;this.#e=e,this.#t=t,this.#s=!!s}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#r++,this.#e.save(this.#t),this}restore(e){return this.#r>0&&(this.#e.restore(this.#t),this.#r--),this}recordOpenMarker(e){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#n--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,t){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,t){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,t){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,s){return this.#e.recordSimpleDataFromNamed(e,t,this.#t),this}recordFutureForcedDependency(e,t){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#s||this.#e.resetBBox(this.#t),this}recordClipBox(e,t,s,i,a,o){return this.#s||this.#e.recordClipBox(this.#t,t,s,i,a,o),this}recordBBox(e,t,s,i,a,o){return this.#s||this.#e.recordBBox(this.#t,t,s,i,a,o),this}recordCharacterBBox(e,t,s,i,a,o,c){return this.#s||this.#e.recordCharacterBBox(this.#t,t,s,i,a,o,c),this}recordFullPageBBox(e){return this.#s||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,t){return this.#e.recordDependencies(this.#t,t),this}recordNamedDependency(e,t){return this.#e.recordNamedDependency(this.#t,t),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#s||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const So={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},ca={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function E2(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,s),n.clip(i)}class xN{isModifyingCurrentTransform(){return!1}getPattern(){es("Abstract method `getPattern` called.")}}class pQ extends xN{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,i){let a;if(i===ca.STROKE||i===ca.FILL){const o=t.current.getClippedPathBoundingBox(i,ks(e))||[0,0,0,0],c=Math.ceil(o[2]-o[0])||1,u=Math.ceil(o[3]-o[1])||1,h=t.cachedCanvases.getCanvas("pattern",c,u),f=h.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-o[0],-o[1]),s=lt.transform(s,[1,0,0,1,o[0],o[1]]),f.transform(...t.baseTransform),this.matrix&&f.transform(...this.matrix),E2(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),a=e.createPattern(h.canvas,"no-repeat");const g=new DOMMatrix(s);a.setTransform(g)}else E2(e,this._bbox),a=this._createGradient(e);return a}}function yw(n,e,t,s,i,a,o,c){const u=e.coords,h=e.colors,f=n.data,g=n.width*4;let x;u[t+1]>u[s+1]&&(x=t,t=s,s=x,x=a,a=o,o=x),u[s+1]>u[i+1]&&(x=s,s=i,i=x,x=o,o=c,c=x),u[t+1]>u[s+1]&&(x=t,t=s,s=x,x=a,a=o,o=x);const w=(u[t]+e.offsetX)*e.scaleX,A=(u[t+1]+e.offsetY)*e.scaleY,C=(u[s]+e.offsetX)*e.scaleX,E=(u[s+1]+e.offsetY)*e.scaleY,T=(u[i]+e.offsetX)*e.scaleX,D=(u[i+1]+e.offsetY)*e.scaleY;if(A>=D)return;const M=h[a],L=h[a+1],I=h[a+2],W=h[o],V=h[o+1],Y=h[o+2],K=h[c],q=h[c+1],ne=h[c+2],le=Math.round(A),_e=Math.round(D);let xe,je,U,H,ee,he,ce,G;for(let ue=le;ue<=_e;ue++){if(ue<E){const Ve=ue<A?0:(A-ue)/(A-E);xe=w-(w-C)*Ve,je=M-(M-W)*Ve,U=L-(L-V)*Ve,H=I-(I-Y)*Ve}else{let Ve;ue>D?Ve=1:E===D?Ve=0:Ve=(E-ue)/(E-D),xe=C-(C-T)*Ve,je=W-(W-K)*Ve,U=V-(V-q)*Ve,H=Y-(Y-ne)*Ve}let Se;ue<A?Se=0:ue>D?Se=1:Se=(A-ue)/(A-D),ee=w-(w-T)*Se,he=M-(M-K)*Se,ce=L-(L-q)*Se,G=I-(I-ne)*Se;const fe=Math.round(Math.min(xe,ee)),Ae=Math.round(Math.max(xe,ee));let Pe=g*ue+fe*4;for(let Ve=fe;Ve<=Ae;Ve++)Se=(xe-Ve)/(xe-ee),Se<0?Se=0:Se>1&&(Se=1),f[Pe++]=je-(je-he)*Se|0,f[Pe++]=U-(U-ce)*Se|0,f[Pe++]=H-(H-G)*Se|0,f[Pe++]=255}}function xQ(n,e,t){const s=e.coords,i=e.colors;let a,o;switch(e.type){case"lattice":const c=e.verticesPerRow,u=Math.floor(s.length/c)-1,h=c-1;for(a=0;a<u;a++){let f=a*c;for(let g=0;g<h;g++,f++)yw(n,t,s[f],s[f+1],s[f+c],i[f],i[f+1],i[f+c]),yw(n,t,s[f+c+1],s[f+1],s[f+c],i[f+c+1],i[f+1],i[f+c])}break;case"triangles":for(a=0,o=s.length;a<o;a+=3)yw(n,t,s[a],s[a+1],s[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class bQ extends xN{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const c=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-c,f=Math.ceil(this._bounds[3])-u,g=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),x=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),w=h/g,A=f/x,C={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-u,scaleX:1/w,scaleY:1/A},E=g+4,T=x+4,D=s.getCanvas("mesh",E,T),M=D.context,L=M.createImageData(g,x);if(t){const W=L.data;for(let V=0,Y=W.length;V<Y;V+=4)W[V]=t[0],W[V+1]=t[1],W[V+2]=t[2],W[V+3]=255}for(const W of this._figures)xQ(L,W,C);return M.putImageData(L,2,2),{canvas:D.canvas,offsetX:c-2*w,offsetY:u-2*A,scaleX:w,scaleY:A}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,i){E2(e,this._bbox);const a=new Float32Array(2);if(i===ca.SHADING)lt.singularValueDecompose2dScale(ks(e),a);else if(this.matrix){lt.singularValueDecompose2dScale(this.matrix,a);const[c,u]=a;lt.singularValueDecompose2dScale(t.baseTransform,a),a[0]*=c,a[1]*=u}else lt.singularValueDecompose2dScale(t.baseTransform,a);const o=this._createMeshCanvas(a,i===ca.SHADING?null:this._background,t.cachedCanvases);return i!==ca.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class yQ extends xN{getPattern(){return"hotpink"}}function vQ(n){switch(n[0]){case"RadialAxial":return new pQ(n);case"Mesh":return new bQ(n);case"Dummy":return new yQ}throw new Error(`Unknown IR type: ${n[0]}`)}const _j={COLORED:1,UNCOLORED:2};class bN{static MAX_PATTERN_SIZE=3e3;constructor(e,t,s,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(e,t){const{bbox:s,operatorList:i,paintType:a,tilingType:o,color:c,canvasGraphicsFactory:u}=this;let{xstep:h,ystep:f}=this;h=Math.abs(h),f=Math.abs(f),uv("TilingType: "+o);const g=s[0],x=s[1],w=s[2],A=s[3],C=w-g,E=A-x,T=new Float32Array(2);lt.singularValueDecompose2dScale(this.matrix,T);const[D,M]=T;lt.singularValueDecompose2dScale(this.baseTransform,T);const L=D*T[0],I=M*T[1];let W=C,V=E,Y=!1,K=!1;const q=Math.ceil(h*L),ne=Math.ceil(f*I),le=Math.ceil(C*L),_e=Math.ceil(E*I);q>=le?W=h:Y=!0,ne>=_e?V=f:K=!0;const xe=this.getSizeAndScale(W,this.ctx.canvas.width,L),je=this.getSizeAndScale(V,this.ctx.canvas.height,I),U=e.cachedCanvases.getCanvas("pattern",xe.size,je.size),H=U.context,ee=u.createCanvasGraphics(H,t);if(ee.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(ee,a,c),H.translate(-xe.scale*g,-je.scale*x),ee.transform(0,xe.scale,0,0,je.scale,0,0),H.save(),ee.dependencyTracker?.save(),this.clipBbox(ee,g,x,w,A),ee.baseTransform=ks(ee.ctx),ee.executeOperatorList(i),ee.endDrawing(),ee.dependencyTracker?.restore(),H.restore(),Y||K){const he=U.canvas;Y&&(W=h),K&&(V=f);const ce=this.getSizeAndScale(W,this.ctx.canvas.width,L),G=this.getSizeAndScale(V,this.ctx.canvas.height,I),ue=ce.size,Se=G.size,fe=e.cachedCanvases.getCanvas("pattern-workaround",ue,Se),Ae=fe.context,Pe=Y?Math.floor(C/h):0,Ve=K?Math.floor(E/f):0;for(let Nt=0;Nt<=Pe;Nt++)for(let ht=0;ht<=Ve;ht++)Ae.drawImage(he,ue*Nt,Se*ht,ue,Se,0,0,ue,Se);return{canvas:fe.canvas,scaleX:ce.scale,scaleY:G.scale,offsetX:g,offsetY:x}}return{canvas:U.canvas,scaleX:xe.scale,scaleY:je.scale,offsetX:g,offsetY:x}}getSizeAndScale(e,t,s){const i=Math.max(bN.MAX_PATTERN_SIZE,t);let a=Math.ceil(e*s);return a>=i?a=i:s=a/e,{scale:s,size:a}}clipBbox(e,t,s,i,a){const o=i-t,c=a-s;e.ctx.rect(t,s,o,c),lt.axialAlignedBoundingBox([t,s,i,a],ks(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const i=e.ctx,a=e.current;switch(t){case _j.COLORED:const{fillStyle:o,strokeStyle:c}=this.ctx;i.fillStyle=a.fillColor=o,i.strokeStyle=a.strokeColor=c;break;case _j.UNCOLORED:i.fillStyle=i.strokeStyle=s,a.fillColor=a.strokeColor=s;break;default:throw new HJ(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,i,a){let o=s;i!==ca.SHADING&&(o=lt.transform(o,t.baseTransform),this.matrix&&(o=lt.transform(o,this.matrix)));const c=this.createPatternCanvas(t,a);let u=new DOMMatrix(o);u=u.translate(c.offsetX,c.offsetY),u=u.scale(1/c.scaleX,1/c.scaleY);const h=e.createPattern(c.canvas,"repeat");return h.setTransform(u),h}}function wQ({src:n,srcPos:e=0,dest:t,width:s,height:i,nonBlackColor:a=4294967295,inverseDecode:o=!1}){const c=qi.isLittleEndian?4278190080:255,[u,h]=o?[a,c]:[c,a],f=s>>3,g=s&7,x=n.length;t=new Uint32Array(t.buffer);let w=0;for(let A=0;A<i;A++){for(const E=e+f;e<E;e++){const T=e<x?n[e]:255;t[w++]=T&128?h:u,t[w++]=T&64?h:u,t[w++]=T&32?h:u,t[w++]=T&16?h:u,t[w++]=T&8?h:u,t[w++]=T&4?h:u,t[w++]=T&2?h:u,t[w++]=T&1?h:u}if(g===0)continue;const C=e<x?n[e++]:255;for(let E=0;E<g;E++)t[w++]=C&1<<7-E?h:u}return{srcPos:e,destPos:w}}const jj=16,kj=100,SQ=15,Rj=10,hr=16,vw=new DOMMatrix,$r=new Float32Array(2),rm=new Float32Array([1/0,1/0,-1/0,-1/0]);function NQ(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},n.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},n.transform=function(t,s,i,a,o,c){e.transform(t,s,i,a,o,c),this.__originalTransform(t,s,i,a,o,c)},n.setTransform=function(t,s,i,a,o,c){e.setTransform(t,s,i,a,o,c),this.__originalSetTransform(t,s,i,a,o,c)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,i,a,o,c){e.bezierCurveTo(t,s,i,a,o,c),this.__originalBezierCurveTo(t,s,i,a,o,c)},n.rect=function(t,s,i,a){e.rect(t,s,i,a),this.__originalRect(t,s,i,a)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class AQ{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,s)):(i=this.canvasFactory.create(t,s),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function yb(n,e,t,s,i,a,o,c,u,h){const[f,g,x,w,A,C]=ks(n);if(g===0&&x===0){const D=o*f+A,M=Math.round(D),L=c*w+C,I=Math.round(L),W=(o+u)*f+A,V=Math.abs(Math.round(W)-M)||1,Y=(c+h)*w+C,K=Math.abs(Math.round(Y)-I)||1;return n.setTransform(Math.sign(f),0,0,Math.sign(w),M,I),n.drawImage(e,t,s,i,a,0,0,V,K),n.setTransform(f,g,x,w,A,C),[V,K]}if(f===0&&w===0){const D=c*x+A,M=Math.round(D),L=o*g+C,I=Math.round(L),W=(c+h)*x+A,V=Math.abs(Math.round(W)-M)||1,Y=(o+u)*g+C,K=Math.abs(Math.round(Y)-I)||1;return n.setTransform(0,Math.sign(g),Math.sign(x),0,M,I),n.drawImage(e,t,s,i,a,0,0,K,V),n.setTransform(f,g,x,w,A,C),[K,V]}n.drawImage(e,t,s,i,a,o,c,u,h);const E=Math.hypot(f,g),T=Math.hypot(x,w);return[E*u,T*h]}class Dj{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=w2;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=oa.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,t,s){s?.(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=rm.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=ca.FILL,t=null){const s=this.minMax.slice();if(e===ca.STROKE){t||es("Stroke bounding box must include transform."),lt.singularValueDecompose2dScale(t,$r);const i=$r[0]*this.lineWidth/2,a=$r[1]*this.lineWidth/2;s[0]-=i,s[1]-=a,s[2]+=i,s[3]+=a}return s}updateClipFromPath(){const e=lt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(rm,0)}getClippedPathBoundingBox(e=ca.FILL,t=null){return lt.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Mj(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,i=t%hr,a=(t-i)/hr,o=i===0?a:a+1,c=n.createImageData(s,hr);let u=0,h;const f=e.data,g=c.data;let x,w,A,C;if(e.kind===Vp.GRAYSCALE_1BPP){const E=f.byteLength,T=new Uint32Array(g.buffer,0,g.byteLength>>2),D=T.length,M=s+7>>3,L=4294967295,I=qi.isLittleEndian?4278190080:255;for(x=0;x<o;x++){for(A=x<a?hr:i,h=0,w=0;w<A;w++){const W=E-u;let V=0;const Y=W>M?s:W*8-7,K=Y&-8;let q=0,ne=0;for(;V<K;V+=8)ne=f[u++],T[h++]=ne&128?L:I,T[h++]=ne&64?L:I,T[h++]=ne&32?L:I,T[h++]=ne&16?L:I,T[h++]=ne&8?L:I,T[h++]=ne&4?L:I,T[h++]=ne&2?L:I,T[h++]=ne&1?L:I;for(;V<Y;V++)q===0&&(ne=f[u++],q=128),T[h++]=ne&q?L:I,q>>=1}for(;h<D;)T[h++]=0;n.putImageData(c,0,x*hr)}}else if(e.kind===Vp.RGBA_32BPP){for(w=0,C=s*hr*4,x=0;x<a;x++)g.set(f.subarray(u,u+C)),u+=C,n.putImageData(c,0,w),w+=hr;x<o&&(C=s*i*4,g.set(f.subarray(u,u+C)),n.putImageData(c,0,w))}else if(e.kind===Vp.RGB_24BPP)for(A=hr,C=s*A,x=0;x<o;x++){for(x>=a&&(A=i,C=s*A),h=0,w=C;w--;)g[h++]=f[u++],g[h++]=f[u++],g[h++]=f[u++],g[h++]=255;n.putImageData(c,0,x*hr)}else throw new Error(`bad image kind: ${e.kind}`)}function Pj(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,i=t%hr,a=(t-i)/hr,o=i===0?a:a+1,c=n.createImageData(s,hr);let u=0;const h=e.data,f=c.data;for(let g=0;g<o;g++){const x=g<a?hr:i;({srcPos:u}=wQ({src:h,srcPos:u,dest:f,width:s,height:x,nonBlackColor:0})),n.putImageData(c,0,g*hr)}}function gp(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function vb(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function Oj(n,e){if(e)return!0;lt.singularValueDecompose2dScale(n,$r);const t=Math.fround(Cl.pixelRatio*af.PDF_TO_CSS_UNITS);return $r[0]<=t&&$r[1]<=t}const CQ=["butt","round","square"],EQ=["miter","round","bevel"],TQ={},Lj={};class mm{constructor(e,t,s,i,a,{optionalContentConfig:o,markedContentStack:c=null},u,h,f){this.ctx=e,this.current=new Dj(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=o,this.cachedCanvases=new AQ(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(e,t,s=null){return typeof t=="string"?(this.dependencyTracker?.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):s}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:i=null}){const a=this.ctx.canvas.width,o=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,o),this.ctx.fillStyle=c,s){const u=this.cachedCanvases.getCanvas("transparent",a,o);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform(...ks(this.compositeCtx))}this.ctx.save(),vb(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=ks(this.ctx)}executeOperatorList(e,t,s,i,a){const o=e.argsArray,c=e.fnArray;let u=t||0;const h=o.length;if(h===u)return u;const f=h-u>Rj&&typeof s=="function",g=f?Date.now()+SQ:0;let x=0;const w=this.commonObjs,A=this.objs;let C,E;for(;;){if(i!==void 0&&u===i.nextBreakPoint)return i.breakIt(u,s),u;if(!a||a(u))if(C=c[u],E=o[u]??null,C!==Tm.dependency)E===null?this[C](u):this[C](u,...E);else for(const T of E){this.dependencyTracker?.recordNamedData(T,u);const D=T.startsWith("g_")?w:A;if(!D.has(T))return D.get(T,s),u}if(u++,u===h)return u;if(f&&++x>Rj){if(Date.now()>g)return s(),u;x=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const s=e.width??e.displayWidth,i=e.height??e.displayHeight;let a=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),c=s,u=i,h="prescale1",f,g;for(;a>2&&c>1||o>2&&u>1;){let x=c,w=u;a>2&&c>1&&(x=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),a/=c/x),o>2&&u>1&&(w=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,o/=u/w),f=this.cachedCanvases.getCanvas(h,x,w),g=f.context,g.clearRect(0,0,x,w),g.drawImage(e,0,0,c,u,0,0,x,w),e=f.canvas,c=x,u=w,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:c,paintHeight:u}}_createMaskCanvas(e,t){const s=this.ctx,{width:i,height:a}=t,o=this.current.fillColor,c=this.current.patternFill,u=ks(s);let h,f,g,x;if((t.bitmap||t.data)&&t.count>1){const q=t.bitmap||t.data.buffer;f=JSON.stringify(c?u:[u.slice(0,4),o]),h=this._cachedBitmapsMap.get(q),h||(h=new Map,this._cachedBitmapsMap.set(q,h));const ne=h.get(f);if(ne&&!c){const le=Math.round(Math.min(u[0],u[2])+u[4]),_e=Math.round(Math.min(u[1],u[3])+u[5]);return this.dependencyTracker?.recordDependencies(e,So.transformAndFill),{canvas:ne,offsetX:le,offsetY:_e}}g=ne}g||(x=this.cachedCanvases.getCanvas("maskCanvas",i,a),Pj(x.context,t));let w=lt.transform(u,[1/i,0,0,-1/a,0,0]);w=lt.transform(w,[1,0,0,1,0,-a]);const A=rm.slice();lt.axialAlignedBoundingBox([0,0,i,a],w,A);const[C,E,T,D]=A,M=Math.round(T-C)||1,L=Math.round(D-E)||1,I=this.cachedCanvases.getCanvas("fillCanvas",M,L),W=I.context,V=C,Y=E;W.translate(-V,-Y),W.transform(...w),g||(g=this._scaleImage(x.canvas,dc(W)),g=g.img,h&&c&&h.set(f,g)),W.imageSmoothingEnabled=Oj(ks(W),t.interpolate),yb(W,g,0,0,g.width,g.height,0,0,i,a),W.globalCompositeOperation="source-in";const K=lt.transform(dc(W),[1,0,0,1,-V,-Y]);return W.fillStyle=c?o.getPattern(s,this,K,ca.FILL,e):o,W.fillRect(0,0,i,a),h&&!c&&(this.cachedCanvases.delete("fillCanvas"),h.set(f,I.canvas)),this.dependencyTracker?.recordDependencies(e,So.transformAndFill),{canvas:I.canvas,offsetX:Math.round(V),offsetY:Math.round(Y)}}setLineWidth(e,t){this.dependencyTracker?.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=CQ[t]}setLineJoin(e,t){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=EQ[t]}setMiterLimit(e,t){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,s){this.dependencyTracker?.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=s)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){for(const[s,i]of t)switch(s){case"LW":this.setLineWidth(e,i);break;case"LC":this.setLineCap(e,i);break;case"LJ":this.setLineJoin(e,i);break;case"ML":this.setMiterLimit(e,i);break;case"D":this.setDash(e,i[0],i[1]);break;case"RI":this.setRenderingIntent(e,i);break;case"FL":this.setFlatness(e,i);break;case"Font":this.setFont(e,i[0],i[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=i;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=i;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,s=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(i,t,s);this.suspendedCtx=this.ctx;const o=this.ctx=a.context;o.setTransform(this.suspendedCtx.getTransform()),gp(this.suspendedCtx,o),NQ(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),gp(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,i){const a=i[0],o=i[1],c=i[2]-a,u=i[3]-o;c===0||u===0||(this.genericComposeSMask(t.context,s,c,u,t.subtype,t.backdrop,t.transferMap,a,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,i,a,o,c,u,h,f,g){let x=e.canvas,w=u-f,A=h-g;if(o)if(w<0||A<0||w+s>x.width||A+i>x.height){const E=this.cachedCanvases.getCanvas("maskExtension",s,i),T=E.context;T.drawImage(x,-w,-A),T.globalCompositeOperation="destination-atop",T.fillStyle=o,T.fillRect(0,0,s,i),T.globalCompositeOperation="source-over",x=E.canvas,w=A=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(w,A,s,i),e.clip(E),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(w,A,s,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),a==="Alpha"&&c?t.filter=this.filterFactory.addAlphaFilter(c):a==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(c));const C=new Path2D;C.rect(u,h,s,i),t.clip(C),t.globalCompositeOperation="destination-in",t.drawImage(x,w,A,s,i,u,h,s,i),t.restore()}save(e){this.inSMaskMode&&gp(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&gp(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,i,a,o,c){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(t,s,i,a,o,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s,i){let[a]=s;if(!i){a||=s[0]=new Path2D,this[t](e,a);return}if(this.dependencyTracker!==null){const o=t===Tm.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-o,i[2]+o,i[1]-o,i[3]+o).recordDependencies(e,["transform"])}if(!(a instanceof Path2D)){const o=s[0]=new Path2D;for(let c=0,u=a.length;c<u;)switch(a[c++]){case fb.moveTo:o.moveTo(a[c++],a[c++]);break;case fb.lineTo:o.lineTo(a[c++],a[c++]);break;case fb.curveTo:o.bezierCurveTo(a[c++],a[c++],a[c++],a[c++],a[c++],a[c++]);break;case fb.closePath:o.closePath();break;default:Ht(`Unrecognized drawing path operator: ${a[c-1]}`);break}a=o}lt.axialAlignedBoundingBox(i,ks(this.ctx),this.current.minMax),this[t](e,a),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,s=!0){const i=this.ctx,a=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&a?.getPattern){const o=a.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=a.getPattern(i,this,dc(i),ca.STROKE,e),o){const c=new Path2D;c.addPath(t,i.getTransform().invertSelf().multiplySelf(o)),t=c}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);this.dependencyTracker?.recordDependencies(e,So.stroke),s&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(ca.STROKE,ks(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,s=!0){const i=this.ctx,a=this.current.fillColor,o=this.current.patternFill;let c=!1;if(o){const h=a.isModifyingCurrentTransform()?i.getTransform():null;if(this.dependencyTracker?.save(e),i.save(),i.fillStyle=a.getPattern(i,this,dc(i),ca.FILL,e),h){const f=new Path2D;f.addPath(t,i.getTransform().invertSelf().multiplySelf(h)),t=f}c=!0}const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),this.dependencyTracker?.recordDependencies(e,So.fill),c&&(i.restore(),this.dependencyTracker?.restore(e)),s&&this.consumePath(e,t,u)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){this.ctx.fill(t),this.dependencyTracker?.recordDependencies(e,So.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=TQ}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=Lj}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){const i=new Path2D,a=s.getTransform().invertSelf();for(const{transform:o,x:c,y:u,fontSize:h,path:f}of t)f&&i.addPath(f,new DOMMatrix(o).preMultiplySelf(a).translate(c,u).scale(h,-h));s.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,s){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const i=this.commonObjs.get(t),a=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(a.fontMatrix=i.fontMatrix||w2,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&Ht("Invalid font matrix for font "+t),s<0?(s=-s,a.fontDirection=-1):a.fontDirection=1,this.current.font=i,this.current.fontSize=s,i.isType3Font)return;const o=i.loadedName||"sans-serif",c=i.systemFontInfo?.css||`"${o}", ${i.fallbackName}`;let u="normal";i.black?u="900":i.bold&&(u="bold");const h=i.italic?"italic":"normal";let f=s;s<jj?f=jj:s>kj&&(f=kj),this.current.fontSizeScale=s/f,this.ctx.font=`${h} ${u} ${f}px ${c}`}setTextRenderingMode(e,t){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=s}setLeadingMoveText(e,t,s){this.setLeading(e,-s),this.moveText(e,t,s)}setTextMatrix(e,t){this.dependencyTracker?.recordSimpleData("textMatrix",e);const{current:s}=this;s.textMatrix=t,s.textMatrixScale=Math.hypot(t[0],t[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#s(e,t,s){const i=new Path2D;return i.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),i}paintChar(e,t,s,i,a,o){const c=this.ctx,u=this.current,h=u.font,f=u.textRenderingMode,g=u.fontSize/u.fontSizeScale,x=f&oa.FILL_STROKE_MASK,w=!!(f&oa.ADD_TO_PATH_FLAG),A=u.patternFill&&!h.missingFile,C=u.patternStroke&&!h.missingFile;let E;if((h.disableFontFace||w||A||C)&&!h.missingFile&&(E=h.getPathGenerator(this.commonObjs,t)),E&&(h.disableFontFace||A||C)){c.save(),c.translate(s,i),c.scale(g,-g),this.dependencyTracker?.recordCharacterBBox(e,c,h);let T;if(x===oa.FILL||x===oa.FILL_STROKE)if(a){T=c.getTransform(),c.setTransform(...a);const D=this.#s(E,T,a);c.fill(D)}else c.fill(E);if(x===oa.STROKE||x===oa.FILL_STROKE)if(o){T||=c.getTransform(),c.setTransform(...o);const{a:D,b:M,c:L,d:I}=T,W=lt.inverseTransform(o),V=lt.transform([D,M,L,I,0,0],W);lt.singularValueDecompose2dScale(V,$r),c.lineWidth*=Math.max($r[0],$r[1])/g,c.stroke(this.#s(E,T,o))}else c.lineWidth/=g,c.stroke(E);c.restore()}else(x===oa.FILL||x===oa.FILL_STROKE)&&(c.fillText(t,s,i),this.dependencyTracker?.recordCharacterBBox(e,c,h,g,s,i,()=>c.measureText(t))),(x===oa.STROKE||x===oa.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,c,h,g,s,i,()=>c.measureText(t)).recordDependencies(e,So.stroke),c.strokeText(t,s,i));w&&((this.pendingTextPaths||=[]).push({transform:ks(c),x:s,y:i,fontSize:g,path:E}),this.dependencyTracker?.recordCharacterBBox(e,c,h,g,s,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){s=!0;break}return Xt(this,"isFontSubpixelAAEnabled",s)}showText(e,t){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,So.showText).resetBBox(e),this.current.textRenderingMode&oa.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,i=s.font;if(i.isType3Font){this.showType3Text(e,t),this.dependencyTracker?.recordShowTextOperation(e);return}const a=s.fontSize;if(a===0){this.dependencyTracker?.recordOperation(e);return}const o=this.ctx,c=s.fontSizeScale,u=s.charSpacing,h=s.wordSpacing,f=s.fontDirection,g=s.textHScale*f,x=t.length,w=i.vertical,A=w?1:-1,C=i.defaultVMetrics,E=a*s.fontMatrix[0],T=s.textRenderingMode===oa.FILL&&!i.disableFontFace&&!s.patternFill;o.save(),s.textMatrix&&o.transform(...s.textMatrix),o.translate(s.x,s.y+s.textRise),f>0?o.scale(g,-1):o.scale(g,1);let D,M;if(s.patternFill){o.save();const Y=s.fillColor.getPattern(o,this,dc(o),ca.FILL,e);D=ks(o),o.restore(),o.fillStyle=Y}if(s.patternStroke){o.save();const Y=s.strokeColor.getPattern(o,this,dc(o),ca.STROKE,e);M=ks(o),o.restore(),o.strokeStyle=Y}let L=s.lineWidth;const I=s.textMatrixScale;if(I===0||L===0){const Y=s.textRenderingMode&oa.FILL_STROKE_MASK;(Y===oa.STROKE||Y===oa.FILL_STROKE)&&(L=this.getSinglePixelWidth())}else L/=I;if(c!==1&&(o.scale(c,c),L/=c),o.lineWidth=L,i.isInvalidPDFjsFont){const Y=[];let K=0;for(const ne of t)Y.push(ne.unicode),K+=ne.width;const q=Y.join("");if(o.fillText(q,0,0),this.dependencyTracker!==null){const ne=o.measureText(q);this.dependencyTracker.recordBBox(e,this.ctx,-ne.actualBoundingBoxLeft,ne.actualBoundingBoxRight,-ne.actualBoundingBoxAscent,ne.actualBoundingBoxDescent).recordShowTextOperation(e)}s.x+=K*E*g,o.restore(),this.compose();return}let W=0,V;for(V=0;V<x;++V){const Y=t[V];if(typeof Y=="number"){W+=A*Y*a/1e3;continue}let K=!1;const q=(Y.isSpace?h:0)+u,ne=Y.fontChar,le=Y.accent;let _e,xe,je=Y.width;if(w){const ee=Y.vmetric||C,he=-(Y.vmetric?ee[1]:je*.5)*E,ce=ee[2]*E;je=ee?-ee[0]:je,_e=he/c,xe=(W+ce)/c}else _e=W/c,xe=0;let U;if(i.remeasure&&je>0){U=o.measureText(ne);const ee=U.width*1e3/a*c;if(je<ee&&this.isFontSubpixelAAEnabled){const he=je/ee;K=!0,o.save(),o.scale(he,1),_e/=he}else je!==ee&&(_e+=(je-ee)/2e3*a/c)}if(this.contentVisible&&(Y.isInFont||i.missingFile)){if(T&&!le)o.fillText(ne,_e,xe),this.dependencyTracker?.recordCharacterBBox(e,o,U?{bbox:null}:i,a/c,_e,xe,()=>U??o.measureText(ne));else if(this.paintChar(e,ne,_e,xe,D,M),le){const ee=_e+a*le.offset.x/c,he=xe-a*le.offset.y/c;this.paintChar(e,le.fontChar,ee,he,D,M)}}const H=w?je*E-q*f:je*E+q*f;W+=H,K&&o.restore()}w?s.y-=W:s.x+=W*g,o.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,t){const s=this.ctx,i=this.current,a=i.font,o=i.fontSize,c=i.fontDirection,u=a.vertical?1:-1,h=i.charSpacing,f=i.wordSpacing,g=i.textHScale*c,x=i.fontMatrix||w2,w=t.length,A=i.textRenderingMode===oa.INVISIBLE;let C,E,T,D;if(A||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),i.textMatrix&&s.transform(...i.textMatrix),s.translate(i.x,i.y+i.textRise),s.scale(g,c);const M=this.dependencyTracker;for(this.dependencyTracker=M?new Sy(M,e):null,C=0;C<w;++C){if(E=t[C],typeof E=="number"){D=u*E*o/1e3,this.ctx.translate(D,0),i.x+=D*g;continue}const L=(E.isSpace?f:0)+h,I=a.charProcOperatorList[E.operatorListId];I?this.contentVisible&&(this.save(),s.scale(o,o),s.transform(...x),this.executeOperatorList(I),this.restore()):Ht(`Type3 character "${E.operatorListId}" is not available.`);const W=[E.width,0];lt.applyTransform(W,x),T=W[0]*o+L,s.translate(T,0),i.x+=T*g}s.restore(),M&&(this.dependencyTracker=M)}setCharWidth(e,t,s){}setCharWidthAndBounds(e,t,s,i,a,o,c){const u=new Path2D;u.rect(i,a,o-i,c-a),this.ctx.clip(u),this.dependencyTracker?.recordBBox(e,this.ctx,i,o,a,c).recordClipBox(e,this.ctx,i,o,a,c),this.endPath(e)}getColorN_Pattern(e,t){let s;if(t[0]==="TilingPattern"){const i=this.baseTransform||ks(this.ctx),a={createCanvasGraphics:(o,c)=>new mm(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Sy(this.dependencyTracker,c,!0):null)};s=new bN(t,this.ctx,a,i)}else s=this._getPattern(e,t[1],t[2]);return s}setStrokeColorN(e,...t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,s=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=vQ(this.getObject(e,t)),this.cachedPatterns.set(t,i)),s&&(i.matrix=s),i}shadingFill(e,t){if(!this.contentVisible)return;const s=this.ctx;this.save(e);const i=this._getPattern(e,t);s.fillStyle=i.getPattern(s,this,dc(s),ca.SHADING,e);const a=dc(s);if(a){const{width:o,height:c}=s.canvas,u=rm.slice();lt.axialAlignedBoundingBox([0,0,o,c],a,u);const[h,f,g,x]=u;this.ctx.fillRect(h,f,g-h,x-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,So.transform).recordDependencies(e,So.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){es("Should not call beginInlineImage")}beginImageData(){es("Should not call beginImageData")}paintFormXObjectBegin(e,t,s){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=ks(this.ctx),s)){lt.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[i,a,o,c]=s,u=new Path2D;u.rect(i,a,o-i,c-a),this.ctx.clip(u),this.dependencyTracker?.recordClipBox(e,this.ctx,i,o,a,c),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;t.isolated||uv("TODO: Support non-isolated groups."),t.knockout&&Ht("Knockout groups not supported.");const i=ks(s);if(t.matrix&&s.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=rm.slice();lt.axialAlignedBoundingBox(t.bbox,ks(s),a);const o=[0,0,s.canvas.width,s.canvas.height];a=lt.intersect(a,o)||[0,0,0,0];const c=Math.floor(a[0]),u=Math.floor(a[1]),h=Math.max(Math.ceil(a[2])-c,1),f=Math.max(Math.ceil(a[3])-u,1);this.current.startNewPathAndClipBox([0,0,h,f]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const x=this.cachedCanvases.getCanvas(g,h,f),w=x.context;w.translate(-c,-u),w.transform(...i);let A=new Path2D;const[C,E,T,D]=t.bbox;if(A.rect(C,E,T-C,D-E),t.matrix){const M=new Path2D;M.addPath(A,new DOMMatrix(t.matrix)),A=M}w.clip(A),t.smask&&this.smaskStack.push({canvas:x.canvas,context:w,offsetX:c,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(c,u),s.save()),gp(s,w),this.ctx=w,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(e,t){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=ks(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...a);const o=rm.slice();lt.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],a,o),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,s,i,a,o){if(this.#e(),vb(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const c=s[2]-s[0],u=s[3]-s[1];if(o&&this.annotationCanvasMap){i=i.slice(),i[4]-=s[0],i[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=c,s[3]=u,lt.singularValueDecompose2dScale(ks(this.ctx),$r);const{viewportScale:h}=this,f=Math.ceil(c*this.outputScaleX*h),g=Math.ceil(u*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(f,g);const{canvas:x,context:w}=this.annotationCanvas;this.annotationCanvasMap.set(t,x),this.annotationCanvas.savedCtx=this.ctx,this.ctx=w,this.ctx.save(),this.ctx.setTransform($r[0],0,0,-$r[1],0,u*$r[1]),vb(this.ctx)}else{vb(this.ctx),this.endPath(e);const h=new Path2D;h.rect(s[0],s[1],c,u),this.ctx.clip(h)}}this.current=new Dj(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...a)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){if(!this.contentVisible)return;const s=t.count;t=this.getObject(e,t.data,t),t.count=s;const i=this.ctx,a=this._createMaskCanvas(e,t),o=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,a.offsetX,a.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,a.offsetX,a.offsetX+o.width,a.offsetY,a.offsetY+o.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s,i=0,a=0,o,c){if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const u=this.ctx;u.save();const h=ks(u);u.transform(s,i,a,o,0,0);const f=this._createMaskCanvas(e,t);u.setTransform(1,0,0,1,f.offsetX-h[4],f.offsetY-h[5]),this.dependencyTracker?.resetBBox(e);for(let g=0,x=c.length;g<x;g+=2){const w=lt.transform(h,[s,i,a,o,c[g],c[g+1]]);u.drawImage(f.canvas,w[4],w[5]),this.dependencyTracker?.recordBBox(e,this.ctx,w[4],w[4]+f.canvas.width,w[5],w[5]+f.canvas.height)}u.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,t){if(!this.contentVisible)return;const s=this.ctx,i=this.current.fillColor,a=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,So.transformAndFill);for(const o of t){const{data:c,width:u,height:h,transform:f}=o,g=this.cachedCanvases.getCanvas("maskCanvas",u,h),x=g.context;x.save();const w=this.getObject(e,c,o);Pj(x,w),x.globalCompositeOperation="source-in",x.fillStyle=a?i.getPattern(x,this,dc(s),ca.FILL,e):i,x.fillRect(0,0,u,h),x.restore(),s.save(),s.transform(...f),s.scale(1,-1),yb(s,g.canvas,0,0,u,h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,s,0,u,0,h),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s){Ht("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,s)}paintImageXObjectRepeat(e,t,s,i,a){if(!this.contentVisible)return;const o=this.getObject(e,t);if(!o){Ht("Dependent image isn't ready yet");return}const c=o.width,u=o.height,h=[];for(let f=0,g=a.length;f<g;f+=2)h.push({transform:[s,0,0,i,a[f],a[f+1]],x:0,y:0,w:c,h:u});this.paintInlineImageXObjectGroup(e,o,h)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:i}=e,a=this.cachedCanvases.getCanvas("inlineImage",s,i),o=a.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",a.canvas}paintInlineImageXObject(e,t){if(!this.contentVisible)return;const s=t.width,i=t.height,a=this.ctx;this.save(e);const{filter:o}=a;o!=="none"&&o!==""&&(a.filter="none"),a.scale(1/s,-1/i);let c;if(t.bitmap)c=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)c=t;else{const f=this.cachedCanvases.getCanvas("inlineImage",s,i).context;Mj(f,t),c=this.applyTransferMapsToCanvas(f)}const u=this._scaleImage(c,dc(a));a.imageSmoothingEnabled=Oj(ks(a),t.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,a,0,s,-i,0).recordDependencies(e,So.imageXObject).recordOperation(e),yb(a,u.img,0,0,u.paintWidth,u.paintHeight,0,-i,s,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,s){if(!this.contentVisible)return;const i=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const o=t.width,c=t.height,h=this.cachedCanvases.getCanvas("inlineImage",o,c).context;Mj(h,t),a=this.applyTransferMapsToCanvas(h)}this.dependencyTracker?.resetBBox(e);for(const o of s)i.save(),i.transform(...o.transform),i.scale(1,-1),yb(i,a,o.x,o.y,o.w,o.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,i,0,1,-1,0),i.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,So.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,s){}beginMarkedContent(e,t){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,s){this.dependencyTracker?.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,s){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const a=this.ctx;this.pendingClip?(i||(this.pendingClip===Lj?a.clip(t,"evenodd"):a.clip(t)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=ks(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:i,d:a}=this.ctx.getTransform();let o,c;if(s===0&&i===0){const u=Math.abs(t),h=Math.abs(a);if(u===h)if(e===0)o=c=1/u;else{const f=u*e;o=c=f<1?1/f:1}else if(e===0)o=1/u,c=1/h;else{const f=u*e,g=h*e;o=f<1?1/f:1,c=g<1?1/g:1}}else{const u=Math.abs(t*a-s*i),h=Math.hypot(t,s),f=Math.hypot(i,a);if(e===0)o=f/u,c=h/u;else{const g=e*u;o=f>g?f/g:1,c=h>g?h/g:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:i}}=this,[a,o]=this.getScaleForStroking();if(a===o){s.lineWidth=(i||1)*a,s.stroke(e);return}const c=s.getLineDash();t&&s.save(),s.scale(a,o),vw.a=1/a,vw.d=1/o;const u=new Path2D;if(u.addPath(e,vw),c.length>0){const h=Math.max(a,o);s.setLineDash(c.map(f=>f/h)),s.lineDashOffset/=h}s.lineWidth=i||1,s.stroke(u),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const n in Tm)mm.prototype[n]!==void 0&&(mm.prototype[Tm[n]]=mm.prototype[n]);class gm{#e;#t;#s;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){const t=new TextEncoder,s={};let i=0;for(const h of gm.strings){const f=t.encode(e[h]);s[h]=f,i+=4+f.length}const a=new ArrayBuffer(i),o=new Uint8Array(a),c=new DataView(a);let u=0;for(const h of gm.strings){const f=s[h],g=f.length;c.setUint32(u,g),o.set(f,u+4),u+=4+g}return mn(u===a.byteLength,"CssFontInfo.write: Buffer overflow"),a}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#s=new TextDecoder}#n(e){mn(e<gm.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=this.#t.getUint32(t)+4;const s=this.#t.getUint32(t);return this.#s.decode(new Uint8Array(this.#e,t+4,s))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class pm{#e;#t;#s;static strings=["css","loadedName","baseFontName","src"];static write(e){const t=new TextEncoder,s={};let i=0;for(const x of pm.strings){const w=t.encode(e[x]);s[x]=w,i+=4+w.length}i+=4;let a,o,c=1+i;e.style&&(a=t.encode(e.style.style),o=t.encode(e.style.weight),c+=4+a.length+4+o.length);const u=new ArrayBuffer(c),h=new Uint8Array(u),f=new DataView(u);let g=0;f.setUint8(g++,e.guessFallback?1:0),f.setUint32(g,0),g+=4,i=0;for(const x of pm.strings){const w=s[x],A=w.length;i+=4+A,f.setUint32(g,A),h.set(w,g+4),g+=4+A}return f.setUint32(g-i-4,i),e.style&&(f.setUint32(g,a.length),h.set(a,g+4),g+=4+a.length,f.setUint32(g,o.length),h.set(o,g+4),g+=4+o.length),mn(g<=u.byteLength,"SubstitionInfo.write: Buffer overflow"),u.transferToFixedLength(g)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#s=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#n(e){mn(e<pm.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=this.#t.getUint32(t)+4;const s=this.#t.getUint32(t);return this.#s.decode(new Uint8Array(this.#e,t+4,s))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);const t=this.#t.getUint32(e),s=this.#s.decode(new Uint8Array(this.#e,e+4,t));e+=4+t;const i=this.#t.getUint32(e),a=this.#s.decode(new Uint8Array(this.#e,e+4,i));return{style:s,weight:a}}}class Kn{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#s=this.#t+1+8;static#n=this.#s+1+48;static#r=this.#n+1+6;#i;#a;#o;constructor({data:e,extra:t}){this.#i=e,this.#a=new TextDecoder,this.#o=new DataView(this.#i),t&&Object.assign(this,t)}#c(e){mn(e<Kn.bools.length,"Invalid boolean index");const t=Math.floor(e/4),s=e*2%8,i=this.#o.getUint8(t)>>s&3;return i===0?void 0:i===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(e){return mn(e<Kn.numbers.length,"Invalid number index"),this.#o.getFloat64(Kn.#e+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=Kn.#t;if(this.#o.getUint8(e)===0)return;e+=1;const s=[];for(let i=0;i<4;i++)s.push(this.#o.getInt16(e,!0)),e+=2;return s}get fontMatrix(){let e=Kn.#s;if(this.#o.getUint8(e)===0)return;e+=1;const s=[];for(let i=0;i<6;i++)s.push(this.#o.getFloat64(e,!0)),e+=8;return s}get defaultVMetrics(){let e=Kn.#n;if(this.#o.getUint8(e)===0)return;e+=1;const s=[];for(let i=0;i<3;i++)s.push(this.#o.getInt16(e,!0)),e+=2;return s}#h(e){mn(e<Kn.strings.length,"Invalid string index");let t=Kn.#r+4;for(let a=0;a<e;a++)t+=this.#o.getUint32(t)+4;const s=this.#o.getUint32(t),i=new Uint8Array(s);return i.set(new Uint8Array(this.#i,t+4,s)),this.#a.decode(i)}get fallbackName(){return this.#h(0)}get loadedName(){return this.#h(1)}get mimetype(){return this.#h(2)}get name(){return this.#h(3)}get data(){let e=Kn.#r;const t=this.#o.getUint32(e);e+=4+t;const s=this.#o.getUint32(e);e+=4+s;const i=this.#o.getUint32(e);e+=4+i;const a=this.#o.getUint32(e);if(a!==0)return new Uint8Array(this.#i,e+4,a)}clearData(){let e=Kn.#r;const t=this.#o.getUint32(e);e+=4+t;const s=this.#o.getUint32(e);e+=4+s;const i=this.#o.getUint32(e);e+=4+i;const a=this.#o.getUint32(e);new Uint8Array(this.#i,e+4,a).fill(0),this.#o.setUint32(e,0)}get cssFontInfo(){let e=Kn.#r;const t=this.#o.getUint32(e);e+=4+t;const s=this.#o.getUint32(e);e+=4+s;const i=this.#o.getUint32(e);if(i===0)return null;const a=new Uint8Array(i);return a.set(new Uint8Array(this.#i,e+4,i)),new gm(a.buffer)}get systemFontInfo(){let e=Kn.#r;const t=this.#o.getUint32(e);e+=4+t;const s=this.#o.getUint32(e);if(s===0)return null;const i=new Uint8Array(s);return i.set(new Uint8Array(this.#i,e+4,s)),new pm(i.buffer)}static write(e){const t=e.systemFontInfo?pm.write(e.systemFontInfo):null,s=e.cssFontInfo?gm.write(e.cssFontInfo):null,i=new TextEncoder,a={};let o=0;for(const C of Kn.strings)a[C]=i.encode(e[C]),o+=4+a[C].length;const c=Kn.#r+4+o+4+(t?t.byteLength:0)+4+(s?s.byteLength:0)+4+(e.data?e.data.length:0),u=new ArrayBuffer(c),h=new Uint8Array(u),f=new DataView(u);let g=0;const x=Kn.bools.length;let w=0,A=0;for(let C=0;C<x;C++){const E=e[Kn.bools[C]];w|=(E===void 0?0:E?2:1)<<A,A+=2,(A===8||C===x-1)&&(f.setUint8(g++,w),w=0,A=0)}mn(g===Kn.#e,"FontInfo.write: Boolean properties offset mismatch");for(const C of Kn.numbers)f.setFloat64(g,e[C]),g+=8;if(mn(g===Kn.#t,"FontInfo.write: Number properties offset mismatch"),e.bbox){f.setUint8(g++,4);for(const C of e.bbox)f.setInt16(g,C,!0),g+=2}else f.setUint8(g++,0),g+=8;if(mn(g===Kn.#s,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){f.setUint8(g++,6);for(const C of e.fontMatrix)f.setFloat64(g,C,!0),g+=8}else f.setUint8(g++,0),g+=48;if(mn(g===Kn.#n,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){f.setUint8(g++,1);for(const C of e.defaultVMetrics)f.setInt16(g,C,!0),g+=2}else f.setUint8(g++,0),g+=6;mn(g===Kn.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),f.setUint32(Kn.#r,0),g+=4;for(const C of Kn.strings){const E=a[C],T=E.length;f.setUint32(g,T),h.set(E,g+4),g+=4+T}if(f.setUint32(Kn.#r,g-Kn.#r-4),!t)f.setUint32(g,0),g+=4;else{const C=t.byteLength;f.setUint32(g,C),mn(g+4+C<=u.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),h.set(new Uint8Array(t),g+4),g+=4+C}if(!s)f.setUint32(g,0),g+=4;else{const C=s.byteLength;f.setUint32(g,C),mn(g+4+C<=u.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),h.set(new Uint8Array(s),g+4),g+=4+C}return e.data===void 0?(f.setUint32(g,0),g+=4):(f.setUint32(g,e.data.length),h.set(e.data,g+4),g+=4+e.data.length),mn(g<=u.byteLength,"FontInfo.write: Buffer overflow"),u.transferToFixedLength(g)}}class Fu{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class _Q{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const em=Symbol("INTERNAL");class jQ{#e=!1;#t=!1;#s=!1;#n=!0;constructor(e,{name:t,intent:s,usage:i,rbGroups:a}){this.#e=!!(e&Jr.DISPLAY),this.#t=!!(e&Jr.PRINT),this.name=t,this.intent=s,this.usage=i,this.rbGroups=a}get visible(){if(this.#s)return this.#n;if(!this.#n)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,s=!1){e!==em&&es("Internal method `_setVisible` called."),this.#s=s,this.#n=t}}class kQ{#e=null;#t=new Map;#s=null;#n=null;constructor(e,t=Jr.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const s of e.groups)this.#t.set(s.id,new jQ(t,s));if(e.baseState==="OFF")for(const s of this.#t.values())s._setVisible(em,!1);for(const s of e.on)this.#t.get(s)._setVisible(em,!0);for(const s of e.off)this.#t.get(s)._setVisible(em,!1);this.#s=this.getHash()}}#r(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let i=1;i<t;i++){const a=e[i];let o;if(Array.isArray(a))o=this.#r(a);else if(this.#t.has(a))o=this.#t.get(a).visible;else return Ht(`Optional content group not found: ${a}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return uv("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(Ht(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#r(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return Ht(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return Ht(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return Ht(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return Ht(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return Ht(`Unknown optional content policy ${e.policy}.`),!0}return Ht(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){const i=this.#t.get(e);if(!i){Ht(`Optional content group not found: ${e}`);return}if(s&&t&&i.rbGroups.length)for(const a of i.rbGroups)for(const o of a)o!==e&&this.#t.get(o)?._setVisible(em,!1,!0);i._setVisible(em,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let s;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const a=this.#t.get(i);if(a)switch(s){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!a.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#s===null||this.getHash()===this.#s}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new B5;for(const[t,s]of this.#t)e.update(`${t}:${s.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class RQ{constructor(e,{disableRange:t=!1,disableStream:s=!1}){mn(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:a,progressiveDone:o,contentDispositionFilename:c}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=c,a?.length>0){const u=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((u,h)=>{this._onReceiveData({begin:u,chunk:h})}),e.addProgressListener((u,h)=>{this._onProgress({loaded:u,total:h})}),e.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(s),!0)});mn(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){mn(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new DQ(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new MQ(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class DQ{constructor(e,t,s=!1,i=null){this._stream=e,this._done=s||!1,this._filename=fv(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class MQ{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function PQ(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let f=c(t);return f=unescape(f),f=u(f),f=h(f),a(f)}if(t=o(n),t){const f=h(t);return a(f)}if(t=s("filename","i").exec(n),t){t=t[1];let f=c(t);return f=h(f),a(f)}function s(f,g){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function i(f,g){if(f){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const x=new TextDecoder(f,{fatal:!0}),w=X0(g);g=x.decode(w),e=!1}catch{}}return g}function a(f){return e&&/[\x80-\xff]/.test(f)&&(f=i("utf-8",f),e&&(f=i("iso-8859-1",f))),f}function o(f){const g=[];let x;const w=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(x=w.exec(f))!==null;){let[,C,E,T]=x;if(C=parseInt(C,10),C in g){if(C===0)break;continue}g[C]=[E,T]}const A=[];for(let C=0;C<g.length&&C in g;++C){let[E,T]=g[C];T=c(T),E&&(T=unescape(T),C===0&&(T=u(T))),A.push(T)}return A.join("")}function c(f){if(f.startsWith('"')){const g=f.slice(1).split('\\"');for(let x=0;x<g.length;++x){const w=g[x].indexOf('"');w!==-1&&(g[x]=g[x].slice(0,w),g.length=x+1),g[x]=g[x].replaceAll(/\\(.)/g,"$1")}f=g.join('"')}return f}function u(f){const g=f.indexOf("'");if(g===-1)return f;const x=f.slice(0,g),A=f.slice(g+1).replace(/^[^']*'/,"");return i(x,A)}function h(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,x,w,A){if(w==="q"||w==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,E){return String.fromCharCode(parseInt(E,16))}),i(x,A);try{A=atob(A)}catch{}return i(x,A)})}return""}function K5(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const i=e[s];i!==void 0&&t.append(s,i)}return t}function mv(n){return URL.parse(n)?.origin??null}function Z5({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(n.get("Content-Length"),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function J5(n){const e=n.get("Content-Disposition");if(e){let t=PQ(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(fv(t))return t}return null}function q0(n,e){return new d0(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function Q5(n){return n===200||n===206}function q5(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function $5(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Ht(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class OQ{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=K5(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return mn(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new LQ(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new FQ(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class LQ{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),i=t.url;fetch(i,q5(s,this._withCredentials,this._abortController)).then(a=>{if(e._responseOrigin=mv(a.url),!Q5(a.status))throw q0(a.status,i);this._reader=a.body.getReader(),this._headersCapability.resolve();const o=a.headers,{allowRangeRequests:c,suggestedLength:u}=Z5({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=u||this._contentLength,this._filename=J5(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new bd("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:$5(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class FQ{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range",`bytes=${t}-${s-1}`);const o=i.url;fetch(o,q5(a,this._withCredentials,this._abortController)).then(c=>{const u=mv(c.url);if(u!==e._responseOrigin)throw new Error(`Expected range response-origin "${u}" to match "${e._responseOrigin}".`);if(!Q5(c.status))throw q0(c.status,o);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:$5(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const ww=200,Sw=206;function zQ(n){const e=n.response;return typeof e!="string"?e:X0(e).buffer}class IQ{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:s}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=K5(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[a,o]of this.headers)t.setRequestHeader(a,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=Sw):i.expectedStatus=ww,t.responseType="arraybuffer",mn(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){const s=this.pendingRequests[e];s&&s.onProgress?.(t)}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){s.onError(i.status);return}const a=i.status||ww;if(!(a===ww&&s.expectedStatus===Sw)&&a!==s.expectedStatus){s.onError(i.status);return}const c=zQ(i);if(a===Sw){const u=i.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);h?s.onDone({begin:parseInt(h[1],10),chunk:c}):(Ht('Missing or invalid "Content-Range" header.'),s.onError(0))}else c?s.onDone({begin:0,chunk:c}):s.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class BQ{constructor(e){this._source=e,this._manager=new IQ(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return mn(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new HQ(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new UQ(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class HQ{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=mv(t.responseURL);const s=t.getAllResponseHeaders(),i=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[u,...h]=c.split(": ");return[u,h.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:o}=Z5({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=J5(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=q0(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class UQ{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=mv(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=q0(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const VQ=/^[a-z][a-z0-9\-+.]+:/i;function WQ(n){if(VQ.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class GQ{constructor(e){this.source=e,this.url=WQ(e.url),mn(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return mn(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new YQ(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new XQ(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class YQ{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=q0(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new bd("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class XQ{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const pp=Symbol("INITIAL_DATA");class eP{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:pp}}get(e,t=null){if(t){const i=this.#t(e);return i.promise.then(()=>t(i.data)),null}const s=this.#e[e];if(!s||s.data===pp)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=this.#e[e];return!!t&&t.data!==pp}delete(e){const t=this.#e[e];return!t||t.data===pp?!1:(delete this.#e[e],!0)}resolve(e,t=null){const s=this.#t(e);s.data=t,s.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==pp&&(yield[e,t])}}}const KQ=1e5,Fj=30;let h0=class No{#e=Promise.withResolvers();#t=null;#s=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#i=null;#a=0;#o=0;#c=null;#l=null;#h=0;#u=0;#f=Object.create(null);#p=[];#m=null;#d=[];#g=new WeakMap;#x=null;static#y=new Map;static#b=new Map;static#C=new WeakMap;static#N=null;static#v=new Set;constructor({textContentSource:e,container:t,viewport:s}){if(e instanceof ReadableStream)this.#m=e;else if(typeof e=="object")this.#m=new ReadableStream({start(u){u.enqueue(e),u.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=t,this.#u=s.scale*Cl.pixelRatio,this.#h=s.rotation,this.#i={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:a,pageX:o,pageY:c}=s.rawDims;this.#x=[1,0,0,-1,-o,c+a],this.#o=i,this.#a=a,No.#j(),Uu(t,s),this.#e.promise.finally(()=>{No.#v.delete(this),this.#i=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=qi.platform;return Xt(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#c.read().then(({value:t,done:s})=>{if(s){this.#e.resolve();return}this.#r??=t.lang,Object.assign(this.#f,t.styles),this.#T(t.items),e()},this.#e.reject)};return this.#c=this.#m.getReader(),No.#v.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const s=e.scale*Cl.pixelRatio,i=e.rotation;if(i!==this.#h&&(t?.(),this.#h=i,Uu(this.#l,{rotation:i})),s!==this.#u){t?.(),this.#u=s;const a={div:null,properties:null,ctx:No.#k(this.#r)};for(const o of this.#d)a.properties=this.#g.get(o),a.div=o,this.#A(a)}}cancel(){const e=new bd("TextLayer task cancelled.");this.#c?.cancel(e).catch(()=>{}),this.#c=null,this.#e.reject(e)}get textDivs(){return this.#d}get textContentItemsStr(){return this.#p}#T(e){if(this.#s)return;this.#i.ctx??=No.#k(this.#r);const t=this.#d,s=this.#p;for(const i of e){if(t.length>KQ){Ht("Ignoring additional textDivs for performance reasons."),this.#s=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const a=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),i.id&&this.#t.setAttribute("id",`${i.id}`),a.append(this.#t)}else i.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}s.push(i.str),this.#S(i)}}#S(e){const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#d.push(t);const i=lt.transform(this.#x,e.transform);let a=Math.atan2(i[1],i[0]);const o=this.#f[e.fontName];o.vertical&&(a+=Math.PI/2);let c=this.#n&&o.fontSubstitution||o.fontFamily;c=No.fontFamilyMap.get(c)||c;const u=Math.hypot(i[2],i[3]),h=u*No.#F(c,o,this.#r);let f,g;a===0?(f=i[4],g=i[5]-h):(f=i[4]+h*Math.sin(a),g=i[5]-h*Math.cos(a));const x="calc(var(--total-scale-factor) *",w=t.style;this.#t===this.#l?(w.left=`${(100*f/this.#o).toFixed(2)}%`,w.top=`${(100*g/this.#a).toFixed(2)}%`):(w.left=`${x}${f.toFixed(2)}px)`,w.top=`${x}${g.toFixed(2)}px)`),w.fontSize=`${x}${(No.#N*u).toFixed(2)}px)`,w.fontFamily=c,s.fontSize=u,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#n&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),a!==0&&(s.angle=a*(180/Math.PI));let A=!1;if(e.str.length>1)A=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const C=Math.abs(e.transform[0]),E=Math.abs(e.transform[3]);C!==E&&Math.max(C,E)/Math.min(C,E)>1.5&&(A=!0)}if(A&&(s.canvasWidth=o.vertical?e.height:e.width),this.#g.set(t,s),this.#i.div=t,this.#i.properties=s,this.#A(this.#i),s.hasText&&this.#t.append(t),s.hasEOL){const C=document.createElement("br");C.setAttribute("role","presentation"),this.#t.append(C)}}#A(e){const{div:t,properties:s,ctx:i}=e,{style:a}=t;let o="";if(No.#N>1&&(o=`scale(${1/No.#N})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=a,{canvasWidth:u,fontSize:h}=s;No.#_(i,h*this.#u,c);const{width:f}=i.measureText(t.textContent);f>0&&(o=`scaleX(${u*this.#u/f}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(a.transform=o)}static cleanup(){if(!(this.#v.size>0)){this.#y.clear();for(const{canvas:e}of this.#b.values())e.remove();this.#b.clear()}}static#k(e=null){let t=this.#b.get(e||="");if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(e,t),this.#C.set(t,{size:0,family:""})}return t}static#_(e,t,s){const i=this.#C.get(e);t===i.size&&s===i.family||(e.font=`${t}px ${s}`,i.size=t,i.family=s)}static#j(){if(this.#N!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#N=e.getBoundingClientRect().height,e.remove()}static#F(e,t,s){const i=this.#y.get(e);if(i)return i;const a=this.#k(s);a.canvas.width=a.canvas.height=Fj,this.#_(a,Fj,e);const o=a.measureText(""),c=o.fontBoundingBoxAscent,u=Math.abs(o.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let h=.8;return c?h=c/(c+u):(qi.platform.isFirefox&&Ht("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?h=t.ascent:t.descent&&(h=1+t.descent)),this.#y.set(e,h),h}};const ZQ=100;function yN(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new vN,{docId:t}=e,s=n.url?sQ(n.url):null,i=n.data?iQ(n.data):null,a=n.httpHeaders||null,o=n.withCredentials===!0,c=n.password??null,u=n.range instanceof wN?n.range:null,h=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let f=n.worker instanceof _m?n.worker:null;const g=n.verbosity,x=typeof n.docBaseUrl=="string"&&!Z0(n.docBaseUrl)?n.docBaseUrl:null,w=gb(n.cMapUrl),A=n.cMapPacked!==!1,C=n.CMapReaderFactory||(Ua?uQ:Nj),E=gb(n.iccUrl),T=gb(n.standardFontDataUrl),D=n.StandardFontDataFactory||(Ua?hQ:Aj),M=gb(n.wasmUrl),L=n.WasmFactory||(Ua?fQ:Cj),I=n.stopAtErrors!==!0,W=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,V=n.isEvalSupported!==!1,Y=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Ua,K=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Ua&&(qi.platform.isFirefox||!globalThis.chrome),q=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,ne=typeof n.disableFontFace=="boolean"?n.disableFontFace:Ua,le=n.fontExtraProperties===!0,_e=n.enableXfa===!0,xe=n.ownerDocument||globalThis.document,je=n.disableRange===!0,U=n.disableStream===!0,H=n.disableAutoFetch===!0,ee=n.pdfBug===!0,he=n.CanvasFactory||(Ua?dQ:oQ),ce=n.FilterFactory||(Ua?cQ:lQ),G=n.enableHWA===!0,ue=n.useWasm!==!1,Se=u?u.length:n.length??NaN,fe=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Ua&&!ne,Ae=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(C===Nj&&D===Aj&&L===Cj&&w&&T&&M&&Ep(w,document.baseURI)&&Ep(T,document.baseURI)&&Ep(M,document.baseURI)),Pe=null;zJ(g);const Ve={canvasFactory:new he({ownerDocument:xe,enableHWA:G}),filterFactory:new ce({docId:t,ownerDocument:xe}),cMapReaderFactory:Ae?null:new C({baseUrl:w,isCompressed:A}),standardFontDataFactory:Ae?null:new D({baseUrl:T}),wasmFactory:Ae?null:new L({baseUrl:M})};f||(f=_m.create({verbosity:g,port:Fu.workerPort}),e._worker=f);const Nt={docId:t,apiVersion:"5.4.296",data:i,password:c,disableAutoFetch:H,rangeChunkSize:h,length:Se,docBaseUrl:x,enableXfa:_e,evaluatorOptions:{maxImageSize:W,disableFontFace:ne,ignoreErrors:I,isEvalSupported:V,isOffscreenCanvasSupported:Y,isImageDecoderSupported:K,canvasMaxAreaInBytes:q,fontExtraProperties:le,useSystemFonts:fe,useWasm:ue,useWorkerFetch:Ae,cMapUrl:w,iccUrl:E,standardFontDataUrl:T,wasmUrl:M}},ht={ownerDocument:xe,pdfBug:ee,styleElement:Pe,loadingParams:{disableAutoFetch:H,enableXfa:_e}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const mt=f.messageHandler.sendWithPromise("GetDocRequest",Nt,i?[i.buffer]:null);let Qe;if(u)Qe=new RQ(u,{disableRange:je,disableStream:U});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Kt=Ep(s)?OQ:Ua?GQ:BQ;Qe=new Kt({url:s,length:Se,httpHeaders:a,withCredentials:o,rangeChunkSize:h,disableRange:je,disableStream:U})}return mt.then(Kt=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Ke=new Tp(t,Kt,f.port),at=new qQ(Ke,e,Qe,ht,Ve,G);e._transport=at,Ke.send("Ready",null)})}).catch(e._capability.reject),e}class vN{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${vN.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let wN=class{#e=Promise.withResolvers();#t=[];#s=[];#n=[];#r=[];constructor(e,t,s=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=i}addRangeListener(e){this.#r.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#s.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(const s of this.#r)s(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(const s of this.#n)s(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const t of this.#s)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){es("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class JQ{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Xt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class QQ{#e=!1;constructor(e,t,s,i=!1){this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=i?new pj:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new eP,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:a=!1}={}){return new K0({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Xt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:t=e.canvas,viewport:s,intent:i="display",annotationMode:a=xc.ENABLE,transform:o=null,background:c=null,optionalContentConfigPromise:u=null,annotationCanvasMap:h=null,pageColors:f=null,printAnnotationStorage:g=null,isEditing:x=!1,recordOperations:w=!1,operationsFilter:A=null}){this._stats?.time("Overall");const C=this._transport.getRenderingIntent(i,a,g,x),{renderingIntent:E,cacheKey:T}=C;this.#e=!1,u||=this._transport.getOptionalContentConfig(E);let D=this._intentStates.get(T);D||(D=Object.create(null),this._intentStates.set(T,D)),D.streamReaderCancelTimeout&&(clearTimeout(D.streamReaderCancelTimeout),D.streamReaderCancelTimeout=null);const M=!!(E&Jr.PRINT);D.displayReadyCapability||(D.displayReadyCapability=Promise.withResolvers(),D.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(C));const L=!!(this._pdfBug&&globalThis.StepperManager?.enabled),I=!this.recordedBBoxes&&(w||L),W=K=>{if(D.renderTasks.delete(V),I){const q=V.gfx?.dependencyTracker.take();q&&(V.stepper&&V.stepper.setOperatorBBoxes(q,V.gfx.dependencyTracker.takeDebugMetadata()),w&&(this.recordedBBoxes=q))}M&&(this.#e=!0),this.#t(),K?(V.capability.reject(K),this._abortOperatorList({intentState:D,reason:K instanceof Error?K:new Error(K)})):V.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},V=new om({callback:W,params:{canvas:t,canvasContext:e,dependencyTracker:I?new gQ(t,D.operatorList.length,L):null,viewport:s,transform:o,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:D.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!M,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,operationsFilter:A});(D.renderTasks||=new Set).add(V);const Y=V.task;return Promise.all([D.displayReadyCapability.promise,u]).then(([K,q])=>{if(this.destroyed){W();return}if(this._stats?.time("Rendering"),!(q.renderingIntent&E))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");V.initializeGraphics({transparency:K,optionalContentConfig:q}),V.operatorListChanged()}).catch(W),Y}getOperatorList({intent:e="display",annotationMode:t=xc.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){function a(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(u))}const o=this._transport.getRenderingIntent(e,t,s,i,!0);let c=this._intentStates.get(o.cacheKey);c||(c=Object.create(null),this._intentStates.set(o.cacheKey,c));let u;return c.opListReadCapability||(u=Object.create(null),u.operatorListChanged=a,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||=new Set).add(u),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>u0.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,i){function a(){o.read().then(function({value:u,done:h}){if(h){s(c);return}c.lang??=u.lang,Object.assign(c.styles,u.styles),c.items.push(...u.items),a()},i)}const o=t.getReader(),c={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const t=this.#t();return e&&t&&(this._stats&&=new pj),t}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){const s=this._intentStates.get(t);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let s=0,i=e.length;s<i;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:i}){const{map:a,transfer:o}=s,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:a,modifiedIds:i},o).getReader(),h=this._intentStates.get(t);h.streamReader=u;const f=()=>{u.read().then(({value:g,done:x})=>{if(x){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,h),f())},g=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const x of h.renderTasks)x.operatorListChanged();this.#t()}if(h.displayReadyCapability)h.displayReadyCapability.reject(g);else if(h.opListReadCapability)h.opListReadCapability.reject(g);else throw g}})};f()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof hv){let i=ZQ;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new bd(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,a]of this._intentStates)if(a===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}var Ru,hl,dd,Kh,Ny,Zh,Jh,Ga,Vb,tP,nP,_p,ym,Wb;const As=class As{constructor({name:e=null,port:t=null,verbosity:s=IJ()}={}){rc(this,Ga);rc(this,Ru,Promise.withResolvers());rc(this,hl,null);rc(this,dd,null);rc(this,Kh,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(Ns(As,Jh).has(t))throw new Error("Cannot use more than one PDFWorker per port.");Ns(As,Jh).set(t,this),oc(this,Ga,tP).call(this,t)}else oc(this,Ga,nP).call(this)}get promise(){return Ns(this,Ru).promise}get port(){return Ns(this,dd)}get messageHandler(){return Ns(this,hl)}destroy(){this.destroyed=!0,Ns(this,Kh)?.terminate(),lr(this,Kh,null),Ns(As,Jh).delete(Ns(this,dd)),lr(this,dd,null),Ns(this,hl)?.destroy(),lr(this,hl,null)}static create(e){const t=Ns(this,Jh).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new As(e)}static get workerSrc(){if(Fu.workerSrc)return Fu.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Xt(this,"_setupFakeWorkerGlobal",(async()=>Ns(this,ym,Wb)?Ns(this,ym,Wb):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ru=new WeakMap,hl=new WeakMap,dd=new WeakMap,Kh=new WeakMap,Ny=new WeakMap,Zh=new WeakMap,Jh=new WeakMap,Ga=new WeakSet,Vb=function(){Ns(this,Ru).resolve(),Ns(this,hl).send("configure",{verbosity:this.verbosity})},tP=function(e){lr(this,dd,e),lr(this,hl,new Tp("main","worker",e)),Ns(this,hl).on("ready",()=>{}),oc(this,Ga,Vb).call(this)},nP=function(){if(Ns(As,Zh)||Ns(As,ym,Wb)){oc(this,Ga,_p).call(this);return}let{workerSrc:e}=As;try{As._isSameOrigin(window.location,e)||(e=As._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new Tp("main","worker",t),i=()=>{a.abort(),s.destroy(),t.terminate(),this.destroyed?Ns(this,Ru).reject(new Error("Worker was destroyed")):oc(this,Ga,_p).call(this)},a=new AbortController;t.addEventListener("error",()=>{Ns(this,Kh)||i()},{signal:a.signal}),s.on("test",c=>{if(a.abort(),this.destroyed||!c){i();return}lr(this,hl,s),lr(this,dd,t),lr(this,Kh,t),oc(this,Ga,Vb).call(this)}),s.on("ready",c=>{if(a.abort(),this.destroyed){i();return}try{o()}catch{oc(this,Ga,_p).call(this)}});const o=()=>{const c=new Uint8Array;s.send("test",c,[c.buffer])};o();return}catch{uv("The worker has been disabled.")}oc(this,Ga,_p).call(this)},_p=function(){Ns(As,Zh)||(Ht("Setting up fake worker."),lr(As,Zh,!0)),As._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){Ns(this,Ru).reject(new Error("Worker was destroyed"));return}const t=new rQ;lr(this,dd,t);const s=`fake${oC(As,Ny)._++}`,i=new Tp(s+"_worker",s,t);e.setup(i,t),lr(this,hl,new Tp(s,s+"_worker",t)),oc(this,Ga,Vb).call(this)}).catch(e=>{Ns(this,Ru).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},ym=new WeakSet,Wb=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},rc(As,ym),rc(As,Ny,0),rc(As,Zh,!1),rc(As,Jh,new WeakMap),Ua&&(lr(As,Zh,!0),Fu.workerSrc||="./pdf.worker.mjs"),As._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!s?.origin||s.origin==="null")return!1;const i=new URL(t,s);return s.origin===i.origin},As._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},As.fromPort=e=>{if(KJ("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return As.create(e)};let _m=As;class qQ{#e=new Map;#t=new Map;#s=new Map;#n=new Map;#r=null;constructor(e,t,s,i,a,o){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new eP,this.fontLoader=new tQ({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}#i(e,t=null){const s=this.#e.get(e);if(s)return s;const i=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,i),i}get annotationStorage(){return Xt(this,"annotationStorage",new gN)}getRenderingIntent(e,t=xc.ENABLE,s=null,i=!1,a=!1){let o=Jr.DISPLAY,c=N2;switch(e){case"any":o=Jr.ANY;break;case"display":break;case"print":o=Jr.PRINT;break;default:Ht(`getRenderingIntent - invalid intent: ${e}`)}const u=o&Jr.PRINT&&s instanceof H5?s:this.annotationStorage;switch(t){case xc.DISABLE:o+=Jr.ANNOTATIONS_DISABLE;break;case xc.ENABLE:break;case xc.ENABLE_FORMS:o+=Jr.ANNOTATIONS_FORMS;break;case xc.ENABLE_STORAGE:o+=Jr.ANNOTATIONS_STORAGE,c=u.serializable;break;default:Ht(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(o+=Jr.IS_EDITING),a&&(o+=Jr.OPLIST);const{ids:h,hash:f}=u.modifiedIds,g=[o,c.hash,f];return{renderingIntent:o,cacheKey:g.join("_"),annotationStorageSerializable:c,modifiedIds:h}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of this.#t.values())e.push(s._destroy());this.#t.clear(),this.#s.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),h0.cleanup(),this._networkStream?.cancelAllRequests(new bd("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,i)=>{mn(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},i.onPull=()=>{this._fullReader.read().then(function({value:a,done:o}){if(o){i.close();return}mn(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{this._fullReader.cancel(a),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:a,contentLength:o}=this._fullReader;return(!i||!a)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=c=>{t.onProgress?.({loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:a,contentLength:o}}),e.on("GetRangeReader",(s,i)=>{mn(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(s.begin,s.end);if(!a){i.close();return}i.onPull=()=>{a.read().then(function({value:o,done:c}){if(c){i.close();return}mn(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{a.cancel(o),i.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new JQ(s,this))}),e.on("DocException",s=>{t._capability.reject(ur(s))}),e.on("PasswordRequest",s=>{this.#r=Promise.withResolvers();try{if(!t.onPassword)throw ur(s);const i=a=>{a instanceof Error?this.#r.reject(a):this.#r.resolve({password:a})};t.onPassword(i,s.code)}catch(i){this.#r.reject(i)}return this.#r.promise}),e.on("DataLoaded",s=>{t.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;this.#t.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,i,a])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":if("error"in a){const f=a.error;Ht(`Error during font loading: ${f}`),this.commonObjs.resolve(s,f);break}const o=new Kn(a),c=this._params.pdfBug&&globalThis.FontInspector?.enabled?(f,g)=>globalThis.FontInspector.fontAdded(f,g):null,u=new nQ(o,c,a.extra,a.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(s,u)});break;case"CopyLocalImage":const{imageRef:h}=a;mn(h,"The imageRef must be defined.");for(const f of this.#t.values())for(const[,g]of f.objs)if(g?.ref===h)return g.dataLen?(this.commonObjs.resolve(s,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,a);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([s,i,a,o])=>{if(this.destroyed)return;const c=this.#t.get(i);if(!c.objs.has(s)){if(c._intentStates.size===0){o?.bitmap?.close();return}switch(a){case"Image":case"Pattern":c.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",s=>{this.destroyed||t.onProgress?.({loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[s.type];if(!i)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Ht("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=this.#s.get(t);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&this.#n.set(a.refStr,e);const o=new QQ(t,a,this,this._params.pdfBug);return this.#t.set(t,o),o});return this.#s.set(t,i),i}getPageIndex(e){return A2(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#i("GetFieldObjects")}hasJSActions(){return this.#i("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return this.#i("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#i("GetOptionalContentConfig").then(t=>new kQ(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new _Q(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),h0.cleanup()}}cachedPageNumber(e){if(!A2(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#n.get(t)??null}}class $Q{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class om{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:s,commonObjs:i,annotationCanvasMap:a,operatorList:o,pageIndex:c,canvasFactory:u,filterFactory:h,useRequestAnimationFrame:f=!1,pdfBug:g=!1,pageColors:x=null,enableHWA:w=!1,operationsFilter:A=null}){this.callback=e,this.params=t,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=c,this.canvasFactory=u,this.filterFactory=h,this._pdfBug=g,this.pageColors=x,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new $Q(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=w,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=A}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(om.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");om.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:i,background:a,dependencyTracker:o}=this.params,c=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new mm(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:i,viewport:s,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),om.#t.delete(this._canvas),e||=new hv(`Rendering cancelled, page ${this._pageIndex+1}`,t),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),om.#t.delete(this._canvas),this.callback())))}}const SN="5.4.296",sP="f56dc8601";class Qr{#e=null;#t=null;#s;#n=null;#r=!1;#i=!1;#a=null;#o;#c=null;#l=null;static#h=null;static get _keyboardManager(){return Xt(this,"_keyboardManager",new J0([[["Escape","mac+Escape"],Qr.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Qr.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Qr.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Qr.prototype._moveToPrevious],[["Home","mac+Home"],Qr.prototype._moveToBeginning],[["End","mac+End"],Qr.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#i=!1,this.#a=e):this.#i=!0,this.#l=e?._uiManager||t,this.#o=this.#l._eventBus,this.#s=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Qr.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#a&&(e.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const t=this.#l._signal;e.addEventListener("click",this.#m.bind(this),{signal:t}),e.addEventListener("keydown",this.#p.bind(this),{signal:t});const s=this.#t=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#s,e.append(s),e}renderMainDropdown(){const e=this.#n=this.#u();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#u(){const e=document.createElement("div"),t=this.#l._signal;e.addEventListener("contextmenu",to,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(e.id=`${this.#a.id}_colorpicker_dropdown`);for(const[s,i]of this.#l.highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",i),a.title=s,a.setAttribute("data-l10n-id",Qr.#h[s]);const o=document.createElement("span");a.append(o),o.className="swatch",o.style.backgroundColor=i,a.ariaSelected=i===this.#s,a.addEventListener("click",this.#f.bind(this,i),{signal:t}),e.append(a)}return e.addEventListener("keydown",this.#p.bind(this),{signal:t}),e}#f(e,t){t.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:cn.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#m(e);return}const t=e.target.getAttribute("data-color");t&&this.#f(t,e)}_moveToNext(e){if(!this.#g){this.#m(e);return}if(e.target===this.#e){this.#n.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstChild||e.target===this.#e){this.#g&&this._hideDropdownFromKeyboard();return}this.#g||this.#m(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#g){this.#m(e);return}this.#n.firstChild?.focus()}_moveToEnd(e){if(!this.#g){this.#m(e);return}this.#n.lastChild?.focus()}#p(e){Qr._keyboardManager.exec(this,e)}#m(e){if(this.#g){this.hideDropdown();return}if(this.#r=e.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#d.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#e.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const t=this.#n=this.#u();this.#e.append(t)}#d(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#g(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#i){if(!this.#g){this.#a?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const t=this.#l.highlightColors.values();for(const s of this.#n.children)s.ariaSelected=t.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class f0{#e=null;#t=null;#s=null;static#n=null;constructor(e){this.#t=e,this.#s=e._uiManager,f0.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:t,colorValue:s}=this.#t,i=this.#e=document.createElement("input");return i.type="color",i.value=s||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",f0.#n[e]),i.addEventListener("input",()=>{this.#s.updateParams(t,i.value)},{signal:this.#s._signal}),i}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function zj(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function xp(n){return Math.max(0,Math.min(255,255*n))}class Ij{static CMYK_G([e,t,s,i]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=xp(e),[e,e,e]}static G_HTML([e]){const t=zj(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(xp)}static RGB_HTML(e){return`#${e.map(zj).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,s+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,s,i]){return[xp(1-Math.min(1,e+i)),xp(1-Math.min(1,s+i)),xp(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const i=1-e,a=1-t,o=1-s,c=Math.min(i,a,o);return["CMYK",i,a,o,c]}}class eq{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){es("Abstract method `_createSVG` called.")}}class m0 extends eq{_createSVG(e){return document.createElementNS(ld,e)}}const tq=9,rf=new WeakSet,nq=new Date().getTimezoneOffset()*60*1e3;class Bj{static create(e){switch(e.data.annotationType){case ei.LINK:return new NN(e);case ei.TEXT:return new iq(e);case ei.WIDGET:switch(e.data.fieldType){case"Tx":return new aq(e);case"Btn":return e.data.radioButton?new iP(e):e.data.checkBox?new oq(e):new lq(e);case"Ch":return new cq(e);case"Sig":return new rq(e)}return new mf(e);case ei.POPUP:return new T2(e);case ei.FREETEXT:return new aP(e);case ei.LINE:return new uq(e);case ei.SQUARE:return new hq(e);case ei.CIRCLE:return new fq(e);case ei.POLYLINE:return new rP(e);case ei.CARET:return new gq(e);case ei.INK:return new AN(e);case ei.POLYGON:return new mq(e);case ei.HIGHLIGHT:return new oP(e);case ei.UNDERLINE:return new pq(e);case ei.SQUIGGLY:return new xq(e);case ei.STRIKEOUT:return new bq(e);case ei.STAMP:return new lP(e);case ei.FILEATTACHMENT:return new yq(e);default:return new Ms(e)}}}class Ms{#e=null;#t=!1;#s=null;constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Ms._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,t=this.annotationStorage?.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:s,rect:i}=this.data;let a=-1/0,o=-1/0;if(t?.length>=8){for(let c=0;c<t.length;c+=8)t[c+1]>o?(o=t[c+1],a=t[c+2]):t[c+1]===o&&(a=Math.max(a,t[c+2]));return[a,o]}if(s?.length>=1){for(const c of s)for(let u=0,h=c.length;u<h;u+=2)c[u+1]>o?(o=c[u+1],a=c[u]):c[u+1]===o&&(a=Math.max(a,c[u]));if(a!==1/0)return[a,o]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:s,pageHeight:i,pageX:a,pageY:o}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-a)/s,e[1]=100*(e[1]-o)/i,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${c0}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:t}=this,s={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:s})||this.annotationStorage.setValue(`${c0}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#s?.popup||this.popup)?.remove(),this.#s=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:t,popup:s}=e;t&&this.#n(t);let i=this.#s?.popup||this.popup;!i&&s?.text&&(this._createPopup(s),i=this.#s.popup),i&&(i.updateEdited(e),s?.deleted&&(i.remove(),this.#s=null,this.popup=null))}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#s?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:t},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:o,pageX:c,pageY:u}}}}=this;s?.splice(0,4,...e),t.left=`${100*(e[0]-c)/a}%`,t.top=`${100*(o-e[3]+u)/o}%`,i===0?(t.width=`${100*(e[2]-e[0])/a}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(i)}_createContainer(e){const{data:t,parent:{page:s,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",t.id),!(this instanceof mf)&&!(this instanceof NN)&&(a.tabIndex=0);const{style:o}=a;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(a.title=t.alternativeText),t.noRotate&&a.classList.add("norotate"),!t.rect||this instanceof T2){const{rotation:C}=t;return!t.hasOwnCanvas&&C!==0&&this.setRotation(C,a),a}const{width:c,height:u}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const C=t.borderStyle.horizontalCornerRadius,E=t.borderStyle.verticalCornerRadius;if(C>0||E>0){const D=`calc(${C}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;o.borderRadius=D}else if(this instanceof iP){const D=`calc(${c}px * var(--total-scale-factor)) / calc(${u}px * var(--total-scale-factor))`;o.borderRadius=D}switch(t.borderStyle.style){case $f.SOLID:o.borderStyle="solid";break;case $f.DASHED:o.borderStyle="dashed";break;case $f.BEVELED:Ht("Unimplemented border style: beveled");break;case $f.INSET:Ht("Unimplemented border style: inset");break;case $f.UNDERLINE:o.borderBottomStyle="solid";break}const T=t.borderColor||null;T?(this.#t=!0,o.borderColor=lt.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):o.borderWidth=0}const h=lt.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:f,pageHeight:g,pageX:x,pageY:w}=i.rawDims;o.left=`${100*(h[0]-x)/f}%`,o.top=`${100*(h[1]-w)/g}%`;const{rotation:A}=t;return t.hasOwnCanvas||A===0?(o.width=`${100*c/f}%`,o.height=`${100*u/g}%`):this.setRotation(A,a),a}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims;let{width:a,height:o}=this;e%180!==0&&([a,o]=[o,a]),t.style.width=`${100*a/s}%`,t.style.height=`${100*o/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,i)=>{const a=i.detail[t],o=a[0],c=a.slice(1);i.target.style[s]=Ij[`${o}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[s]:Ij[`${o}_rgb`](c)})};return Xt(this,"_commonActions",{display:t=>{const{display:s}=t.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const i of Object.keys(t.detail))(e[i]||s[i])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[i,a]of Object.entries(t)){const o=s[i];if(o){const c={detail:{[i]:a},target:e};o(c),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,i,a]=this.data.rect.map(C=>Math.fround(C));if(e.length===8){const[C,E,T,D]=e.subarray(2,6);if(i===C&&a===E&&t===T&&s===D)return}const{style:o}=this.container;let c;if(this.#t){const{borderColor:C,borderWidth:E}=o;o.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${C}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const u=i-t,h=a-s,{svgFactory:f}=this,g=f.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0),g.role="none";const x=f.createElement("defs");g.append(x);const w=f.createElement("clipPath"),A=`clippath_${this.data.id}`;w.setAttribute("id",A),w.setAttribute("clipPathUnits","objectBoundingBox"),x.append(w);for(let C=2,E=e.length;C<E;C+=8){const T=e[C],D=e[C+1],M=e[C+2],L=e[C+3],I=f.createElement("rect"),W=(M-t)/u,V=(a-D)/h,Y=(T-M)/u,K=(D-L)/h;I.setAttribute("x",W),I.setAttribute("y",V),I.setAttribute("width",Y),I.setAttribute("height",K),w.append(I),c?.push(`<rect vector-effect="non-scaling-stroke" x="${W}" y="${V}" width="${Y}" height="${K}"/>`)}this.#t&&(c.push("</g></svg>')"),o.backgroundImage=c.join("")),this.container.append(g),this.container.style.clipPath=`url(#${A})`}_createPopup(e=null){const{data:t}=this;let s,i;e?(s={str:e.text},i=e.date):(s=t.contentsObj,i=t.modificationDate);const a=this.#s=new T2({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:s,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(a.render())}get hasPopupElement(){return!!(this.#s||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#s}render(){es("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:a,id:o,exportValues:c}of i){if(a===-1||o===t)continue;const u=typeof c=="string"?c:null,h=document.querySelector(`[data-element-id="${o}"]`);if(h&&!rf.has(h)){Ht(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:u,domElement:h})}return s}for(const i of document.getElementsByName(e)){const{exportValue:a}=i,o=i.getAttribute("data-element-id");o!==t&&rf.has(i)&&s.push({id:o,exportValue:a,domElement:i})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class sq extends Ms{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class NN extends Ms{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(s,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(s,e.action,e.overlaidText),i=!0):e.attachment?(this.#t(s,e.attachment,e.overlaidText,e.attachmentDest),i=!0):e.setOCGState?(this.#s(s,e.setOCGState,e.overlaidText),i=!0):e.dest?(this._bindLink(s,e.dest,e.overlaidText),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),i=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(s),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t,s=""){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e(),s&&(e.title=s)}_bindNamedAction(e,t,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),s&&(e.title=s),this.#e()}#t(e,t,s="",i=null){e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:s&&(e.title=s),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,i),!1),this.#e()}#s(e,t,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),s&&(e.title=s),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const a=s.get(i);a&&(e[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1))}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){Ht('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{s?.();const{fields:i,refs:a,include:o}=t,c=[];if(i.length!==0||a.length!==0){const f=new Set(a);for(const g of i){const x=this._fieldObjects[g]||[];for(const{id:w}of x)f.add(w)}for(const g of Object.values(this._fieldObjects))for(const x of g)f.has(x.id)===o&&c.push(x)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:g}=f;switch(h.push(g),f.type){case"text":{const w=f.defaultValue||"";u.setValue(g,{value:w});break}case"checkbox":case"radiobutton":{const w=f.defaultValue===f.exportValues;u.setValue(g,{value:w});break}case"combobox":case"listbox":{const w=f.defaultValue||"";u.setValue(g,{value:w});break}default:continue}const x=document.querySelector(`[data-element-id="${g}"]`);if(x){if(!rf.has(x)){Ht(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;x.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}}),!1}}}class iq extends Ms{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class mf extends Ms{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return qi.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,i,a){s.includes("mouse")?e.addEventListener(s,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(s,o=>{if(s==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(o)}})})}_setEventListeners(e,t,s,i){for(const[a,o]of s)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,a,o,i),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":lt.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||tq,a=e.style;let o;const c=2,u=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-c),f=Math.round(h/(gw*i))||1,g=h/f;o=Math.min(i,u(g/gw))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-c);o=Math.min(i,u(h/gw))}a.fontSize=`calc(${o}px * var(--total-scale-factor))`,a.color=lt.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(a.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class aq extends mf{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,i){const a=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=s),a.setValue(o.id,{[i]:s})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const i=e.getValue(t,{value:this.data.fieldValue});let a=i.value||"";const o=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let c=i.formattedValue||this.data.textContent?.join(`
`)||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const u={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=c??a,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",c??a),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),rf.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:h,datetimeType:f,timeStep:g}=this.data,x=!!f&&this.enableScripting;h&&(s.title=h),this._setRequired(s,this.data.required),o&&(s.maxLength=o),s.addEventListener("input",A=>{e.setValue(t,{value:A.target.value}),this.setPropertyOnSiblings(s,"value",A.target.value,"value"),u.formattedValue=null}),s.addEventListener("resetform",A=>{const C=this.data.defaultFieldValue??"";s.value=u.userValue=C,u.formattedValue=null});let w=A=>{const{formattedValue:C}=u;C!=null&&(A.target.value=C),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",C=>{if(u.focused)return;const{target:E}=C;if(x&&(E.type=f,g&&(E.step=g)),u.userValue){const T=u.userValue;if(x)if(f==="time"){const D=new Date(T),M=[D.getHours(),D.getMinutes(),D.getSeconds()];E.value=M.map(L=>L.toString().padStart(2,"0")).join(":")}else E.value=new Date(T-nq).toISOString().split(f==="date"?"T":".",1)[0];else E.value=T}u.lastCommittedValue=E.value,u.commitKey=1,this.data.actions?.Focus||(u.focused=!0)}),s.addEventListener("updatefromsandbox",C=>{this.showElementAndHideCanvas(C.target);const E={value(T){u.userValue=T.detail.value??"",x||e.setValue(t,{value:u.userValue.toString()}),T.target.value=u.userValue},formattedValue(T){const{formattedValue:D}=T.detail;u.formattedValue=D,D!=null&&T.target!==document.activeElement&&(T.target.value=D);const M={formattedValue:D};x&&(M.value=D),e.setValue(t,M)},selRange(T){T.target.setSelectionRange(...T.detail.selRange)},charLimit:T=>{const{charLimit:D}=T.detail,{target:M}=T;if(D===0){M.removeAttribute("maxLength");return}M.setAttribute("maxLength",D);let L=u.userValue;!L||L.length<=D||(L=L.slice(0,D),M.value=u.userValue=L,e.setValue(t,{value:L}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:L,willCommit:!0,commitKey:1,selStart:M.selectionStart,selEnd:M.selectionEnd}}))}};this._dispatchEventFromSandbox(E,C)}),s.addEventListener("keydown",C=>{u.commitKey=1;let E=-1;if(C.key==="Escape"?E=0:C.key==="Enter"&&!this.data.multiLine?E=2:C.key==="Tab"&&(u.commitKey=3),E===-1)return;const{value:T}=C.target;u.lastCommittedValue!==T&&(u.lastCommittedValue=T,u.userValue=T,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:T,willCommit:!0,commitKey:E,selStart:C.target.selectionStart,selEnd:C.target.selectionEnd}}))});const A=w;w=null,s.addEventListener("blur",C=>{if(!u.focused||!C.relatedTarget)return;this.data.actions?.Blur||(u.focused=!1);const{target:E}=C;let{value:T}=E;if(x){if(T&&f==="time"){const D=T.split(":").map(M=>parseInt(M,10));T=new Date(2e3,0,1,D[0],D[1],D[2]||0).valueOf(),E.step=""}else T.includes("T")||(T=`${T}T00:00`),T=new Date(T).valueOf();E.type="text"}u.userValue=T,u.lastCommittedValue!==T&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:T,willCommit:!0,commitKey:u.commitKey,selStart:C.target.selectionStart,selEnd:C.target.selectionEnd}}),A(C)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",C=>{u.lastCommittedValue=null;const{data:E,target:T}=C,{value:D,selectionStart:M,selectionEnd:L}=T;let I=M,W=L;switch(C.inputType){case"deleteWordBackward":{const V=D.substring(0,M).match(/\w*[^\w]*$/);V&&(I-=V[0].length);break}case"deleteWordForward":{const V=D.substring(M).match(/^[^\w]*\w*/);V&&(W+=V[0].length);break}case"deleteContentBackward":M===L&&(I-=1);break;case"deleteContentForward":M===L&&(W+=1);break}C.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:D,change:E||"",willCommit:!1,selStart:I,selEnd:W}})}),this._setEventListeners(s,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],C=>C.target.value)}if(w&&s.addEventListener("blur",w),this.data.comb){const C=(this.data.rect[2]-this.data.rect[0])/o;s.classList.add("comb"),s.style.letterSpacing=`calc(${C}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class rq extends mf{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class oq extends mf{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return rf.add(a),a.setAttribute("data-element-id",s),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.setAttribute("exportValue",t.exportValue),a.tabIndex=0,a.addEventListener("change",o=>{const{name:c,checked:u}=o.target;for(const h of this._getElementsByName(c,s)){const f=u&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}e.setValue(s,{value:u})}),a.addEventListener("resetform",o=>{const c=t.defaultFieldValue||"Off";o.target.checked=c===t.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",o=>{const c={value(u){u.target.checked=u.detail.value!=="Off",e.setValue(s,{value:u.target.checked})}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class iP extends mf{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(s,{value:i})),i)for(const o of this._getElementsByName(t.fieldName,s))e.setValue(o.id,{value:!1});const a=document.createElement("input");if(rf.add(a),a.setAttribute("data-element-id",s),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",o=>{const{name:c,checked:u}=o.target;for(const h of this._getElementsByName(c,s))e.setValue(h.id,{value:!1});e.setValue(s,{value:u})}),a.addEventListener("resetform",o=>{const c=t.defaultFieldValue;o.target.checked=c!=null&&c===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;a.addEventListener("updatefromsandbox",c=>{const u={value:h=>{const f=o===h.detail.value;for(const g of this._getElementsByName(h.target.name)){const x=f&&g.id===s;g.domElement&&(g.domElement.checked=x),e.setValue(g.id,{value:x})}}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class lq extends NN{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class cq extends mf{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");rf.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",f=>{const g=this.data.defaultFieldValue;for(const x of i.options)x.selected=x.value===g});for(const f of this.data.options){const g=document.createElement("option");g.textContent=f.displayValue,g.value=f.exportValue,s.value.includes(f.exportValue)&&(g.setAttribute("selected",!0),a=!1),i.append(g)}let o=null;if(a){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),i.prepend(f),o=()=>{f.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const c=f=>{const g=f?"value":"textContent",{options:x,multiple:w}=i;return w?Array.prototype.filter.call(x,A=>A.selected).map(A=>A[g]):x.selectedIndex===-1?null:x[x.selectedIndex][g]};let u=c(!1);const h=f=>{const g=f.target.options;return Array.prototype.map.call(g,x=>({displayValue:x.textContent,exportValue:x.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",f=>{const g={value(x){o?.();const w=x.detail.value,A=new Set(Array.isArray(w)?w:[w]);for(const C of i.options)C.selected=A.has(C.value);e.setValue(t,{value:c(!0)}),u=c(!1)},multipleSelection(x){i.multiple=!0},remove(x){const w=i.options,A=x.detail.remove;w[A].selected=!1,i.remove(A),w.length>0&&Array.prototype.findIndex.call(w,E=>E.selected)===-1&&(w[0].selected=!0),e.setValue(t,{value:c(!0),items:h(x)}),u=c(!1)},clear(x){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),u=c(!1)},insert(x){const{index:w,displayValue:A,exportValue:C}=x.detail.insert,E=i.children[w],T=document.createElement("option");T.textContent=A,T.value=C,E?E.before(T):i.append(T),e.setValue(t,{value:c(!0),items:h(x)}),u=c(!1)},items(x){const{items:w}=x.detail;for(;i.length!==0;)i.remove(0);for(const A of w){const{displayValue:C,exportValue:E}=A,T=document.createElement("option");T.textContent=C,T.value=E,i.append(T)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:c(!0),items:h(x)}),u=c(!1)},indices(x){const w=new Set(x.detail.indices);for(const A of x.target.options)A.selected=w.has(A.index);e.setValue(t,{value:c(!0)}),u=c(!1)},editable(x){x.target.disabled=!x.detail.editable}};this._dispatchEventFromSandbox(g,f)}),i.addEventListener("input",f=>{const g=c(!0),x=c(!1);e.setValue(t,{value:g}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:u,change:x,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):i.addEventListener("input",function(f){e.setValue(t,{value:c(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class T2 extends Ms{constructor(e){const{data:t,elements:s,parent:i}=e,a=!!i._commentManager;if(super(e,{isRenderable:!a&&Ms._hasPopupData(t)}),this.elements=s,a&&Ms._hasPopupData(t)){const o=this.popup=this.#e();for(const c of s)c.popup=o}else this.popup=null}#e(){return new dq({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=this.#e(),s=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",s.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(i=>`${dN}${i}`).join(",")),this.container}}class dq{#e=null;#t=this.#W.bind(this);#s=this.#I.bind(this);#n=this.#M.bind(this);#r=this.#w.bind(this);#i=null;#a=null;#o=null;#c=null;#l=null;#h=null;#u=null;#f=!1;#p=null;#m=null;#d=null;#g=null;#x=null;#y=null;#b=null;#C=null;#N=null;#v=null;#T=!1;#S=null;#A=null;constructor({container:e,color:t,elements:s,titleObj:i,modificationDate:a,contentsObj:o,richText:c,parent:u,rect:h,parentRect:f,open:g,commentManager:x=null}){this.#a=e,this.#N=i,this.#o=o,this.#C=c,this.#h=u,this.#i=t,this.#b=h,this.#u=f,this.#l=s,this.#e=x,this.#S=s[0],this.#c=vy.toDateObject(a),this.trigger=s.flatMap(w=>w.getElementsToTriggerPopup()),x?this.renderCommentButton():(this.#k(),this.#a.hidden=!0,g&&this.#w())}#k(){if(this.#m)return;this.#m=new AbortController;const{signal:e}=this.#m;for(const t of this.trigger)t.addEventListener("click",this.#r,{signal:e}),t.addEventListener("pointerenter",this.#n,{signal:e}),t.addEventListener("pointerleave",this.#s,{signal:e}),t.classList.add("popupTriggerArea");for(const t of this.#l)t.container?.addEventListener("keydown",this.#t,{signal:e})}#_(){const e=this.#l.find(t=>t.hasCommentButton);e&&(this.#x=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#g||(this.#x||this.#_(),!this.#x))return;const{signal:e}=this.#m=new AbortController,t=!!this.#S.extraPopupElement,s=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!t)},i=()=>{this.#e.toggleCommentPopup(this,!1,!0,!t)},a=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(t){this.#g=this.#S.container;for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",this.#t,{signal:e}),o.addEventListener("click",s,{signal:e}),o.addEventListener("pointerenter",i,{signal:e}),o.addEventListener("pointerleave",a,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=this.#g=document.createElement("button");o.className="annotationCommentButton";const c=this.#S.container;o.style.zIndex=c.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#F(),this.#j(),o.addEventListener("keydown",this.#t,{signal:e}),o.addEventListener("click",s,{signal:e}),o.addEventListener("pointerenter",i,{signal:e}),o.addEventListener("pointerleave",a,{signal:e}),c.after(o)}}#j(){if(this.#S.extraPopupElement&&!this.#S.editor)return;this.renderCommentButton();const[e,t]=this.#x,{style:s}=this.#g;s.left=`calc(${e}%)`,s.top=`calc(${t}% - var(--comment-button-dim))`}#F(){this.#S.extraPopupElement||(this.renderCommentButton(),this.#g.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:t}=this.#S.commentData;return e?this.#h._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{this.#g?.focus()},0)}getData(){const{richText:e,color:t,opacity:s,creationDate:i,modificationDate:a}=this.#S.commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:s,creationDate:i,modificationDate:a}}get elementBeforePopup(){return this.#g}get comment(){return this.#A||=this.#S.commentText,this.#A}set comment(e){e!==this.comment&&(this.#S.commentText=this.#A=e)}get parentBoundingClientRect(){return this.#S.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){this.#g&&(this.#g.classList.toggle("selected",e),this.#g.ariaExpanded=t)}setSelectedCommentButton(e){this.#g.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#y)return this.#y;const{x:e,y:t,height:s}=this.#g.getBoundingClientRect(),{x:i,y:a,width:o,height:c}=this.#S.layer.getBoundingClientRect();return[(e-i)/o,(t+s-a)/c]}set commentPopupPosition(e){this.#y=e}hasDefaultPopupPosition(){return this.#y===null}get commentButtonPosition(){return this.#x}get commentButtonWidth(){return this.#g.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,s]=this.#y||this.commentButtonPosition.map(h=>h/100),i=this.parentBoundingClientRect,{x:a,y:o,width:c,height:u}=i;this.#e.showDialog(null,this,a+t*c,o+s*u,{...e,parentDimensions:i})}render(){if(this.#p)return;const e=this.#p=document.createElement("div");if(e.className="popup",this.#i){const s=e.style.outlineColor=lt.makeHexColor(...this.#i);e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const t=document.createElement("span");if(t.className="header",this.#N?.str){const s=document.createElement("span");s.className="title",t.append(s),{dir:s.dir,str:s.textContent}=this.#N}if(e.append(t),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),t.append(s)}hN({html:this.#D||this.#o.str,dir:this.#o?.dir,className:"popupContent"},e),this.#a.append(e)}get#D(){const e=this.#C,t=this.#o;return e?.str&&(!t?.str||t.str===e.str)&&this.#C.html||null}get#P(){return this.#D?.attributes?.style?.fontSize||0}get#z(){return this.#D?.attributes?.style?.color||null}#O(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:this.#z,fontSize:this.#P?`calc(${this.#P}px * var(--total-scale-factor))`:""}};for(const a of e.split(`
`))t.push({name:"span",value:a,attributes:i});return s}#W(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:e,popup:t,deleted:s}){if(this.#e){s?(this.remove(),this.#A=null):t&&(t.deleted?this.remove():(this.#F(),this.#A=t.text)),e&&(this.#x=null,this.#_(),this.#j());return}if(s||t?.deleted){this.remove();return}this.#k(),this.#v||={contentsObj:this.#o,richText:this.#C},e&&(this.#d=null),t&&t.text&&(this.#C=this.#O(t.text),this.#c=vy.toDateObject(t.date),this.#o=null),this.#p?.remove(),this.#p=null}resetEdited(){this.#v&&({contentsObj:this.#o,richText:this.#C}=this.#v,this.#v=null,this.#p?.remove(),this.#p=null,this.#d=null)}remove(){if(this.#m?.abort(),this.#m=null,this.#p?.remove(),this.#p=null,this.#T=!1,this.#f=!1,this.#g?.remove(),this.#g=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#E(){if(this.#d!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:i,pageY:a}}}=this.#h;let o=!!this.#u,c=o?this.#u:this.#b;for(const A of this.#l)if(!c||lt.intersect(A.data.rect,c)!==null){c=A.data.rect,o=!0;break}const u=lt.normalizeRect([c[0],e[3]-c[1]+e[1],c[2],e[3]-c[3]+e[1]]),f=o?c[2]-c[0]+5:0,g=u[0]+f,x=u[1];this.#d=[100*(g-i)/t,100*(x-a)/s];const{style:w}=this.#a;w.left=`${this.#d[0]}%`,w.top=`${this.#d[1]}%`}#w(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#M(),this.#a.addEventListener("click",this.#r),this.#a.addEventListener("keydown",this.#t)):(this.#I(),this.#a.removeEventListener("click",this.#r),this.#a.removeEventListener("keydown",this.#t))}#M(){this.#p||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#E(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#I(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#T=this.isVisible,this.#T&&(this.#a.hidden=!0)}maybeShow(){this.#e||(this.#k(),this.#T&&(this.#p||this.#M(),this.#T=!1,this.#a.hidden=!1))}get isVisible(){return this.#e?!1:this.#a.hidden===!1}}class aP extends Ms{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Bt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class uq extends Ms{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:s}=this,i=this.svgFactory.create(t,s,!0),a=this.#e=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class hq extends Ms{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:s}=this,i=this.svgFactory.create(t,s,!0),a=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",t-a),o.setAttribute("height",s-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class fq extends Ms{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:s}=this,i=this.svgFactory.create(t,s,!0),a=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",t/2),o.setAttribute("cy",s/2),o.setAttribute("rx",t/2-a/2),o.setAttribute("ry",s/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class rP extends Ms{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:s,popupRef:i},width:a,height:o}=this;if(!t)return this.container;const c=this.svgFactory.create(a,o,!0);let u=[];for(let f=0,g=t.length;f<g;f+=2){const x=t[f]-e[0],w=e[3]-t[f+1];u.push(`${x},${w}`)}u=u.join(" ");const h=this.#e=this.svgFactory.createElement(this.svgElementName);return h.setAttribute("points",u),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class mq extends rP{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class gq extends Ms{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class AN extends Ms{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Bt.HIGHLIGHT:Bt.INK}#s(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:s,borderStyle:i,popupRef:a}}=this,{transform:o,width:c,height:u}=this.#s(t,e),h=this.svgFactory.create(c,u,!0),f=this.#e=this.svgFactory.createElement("svg:g");h.append(f),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",o);for(let g=0,x=s.length;g<x;g++){const w=this.svgFactory.createElement(this.svgElementName);this.#t.push(w),w.setAttribute("points",s[g].join(",")),f.append(w)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:s,rect:i}=e,a=this.#e;if(t>=0&&a.setAttribute("stroke-width",t||1),s)for(let o=0,c=this.#t.length;o<c;o++)this.#t[o].setAttribute("points",s[o].join(","));if(i){const{transform:o,width:c,height:u}=this.#s(this.data.rotation,i);a.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class oP extends Ms{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Bt.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class pq extends Ms{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class xq extends Ms{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class bq extends Ms{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class lP extends Ms{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Bt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class yq extends Ms{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let s;t.hasAppearance||t.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#t.bind(this)),this.#e=s;const{isMac:i}=qi.platform;return e.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let CN=class cP{#e=null;#t=null;#s=null;#n=new Map;#r=null;#i=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:i,page:a,viewport:o,structTreeLayer:c,commentManager:u,linkService:h,annotationStorage:f}){this.div=e,this.#e=t,this.#t=s,this.#r=c||null,this.#i=h||null,this.#s=f||new gN,this.page=a,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=u||null}hasEditableAnnotations(){return this.#n.size>0}async#a(e,t,s){const i=e.firstChild||e,a=i.id=`${dN}${t}`,o=await this.#r?.getAriaAttributes(a);if(o)for(const[c,u]of o)i.setAttribute(c,u);s?s.at(-1).container.after(e):(this.div.append(e),this.#e?.moveElementInDOM(this.div,e,i,!1))}async render(e){const{annotations:t}=e,s=this.div;Uu(s,this.viewport);const i=new Map,a={data:null,layer:s,linkService:this.#i,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new m0,annotationStorage:this.#s,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const c=o.annotationType===ei.POPUP;if(c){const f=i.get(o.id);if(!f)continue;a.elements=f}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;a.data=o;const u=Bj.create(a);if(!u.isRenderable)continue;if(!c&&o.popupRef){const f=i.get(o.popupRef);f?f.push(u):i.set(o.popupRef,[u])}const h=u.render();o.hidden&&(h.style.visibility="hidden"),await this.#a(h,o.id,a.elements),u.extraPopupElement?.popup?.renderCommentButton(),u._isEditable&&(this.#n.set(u.data.id,u),this._annotationEditorUIManager?.renderAnnotationElement(u))}this.#o()}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:this.#i,svgFactory:new m0,parent:this};for(const s of e){s.borderStyle||=cP._defaultBorderStyle,t.data=s;const i=Bj.create(t);if(!i.isRenderable)continue;const a=i.render();await this.#a(a,s.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Uu(t,{rotation:e.rotation}),this.#o(),t.hidden=!1}#o(){if(!this.#t)return;const e=this.div;for(const[t,s]of this.#t){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:a}=i;a?a.nodeName==="CANVAS"?a.replaceWith(s):a.classList.contains("annotationContent")?a.after(s):a.before(s):i.append(s);const o=this.#n.get(t);o&&(o._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,i.id,s),o._hasNoCanvas=!1):o.canvas=s)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}addFakeAnnotation(e){const{div:t}=this,{id:s,rotation:i}=e,a=new sq({data:{id:s,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:this.#i,annotationStorage:this.#s}),o=a.render();return t.append(o),this.#e?.moveElementInDOM(t,o,o,!1),a.createOrUpdatePopup(),a}static get _defaultBorderStyle(){return Xt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:$f.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const wb=/\r\n?|\n/g;class Xi extends wt{#e="";#t=`${this.id}-editor`;#s=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=Xi.prototype,t=a=>a.isEmpty(),s=yd.TRANSLATE_SMALL,i=yd.TRANSLATE_BIG;return Xt(this,"_keyboardManager",new J0([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}static _type="freetext";static _editorType=Bt.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||Xi._defaultColor||wt._defaultLineColor,this.#n=e.fontSize||Xi._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,t){wt.initialize(e,t);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case cn.FREETEXT_SIZE:Xi._defaultFontSize=t;break;case cn.FREETEXT_COLOR:Xi._defaultColor=t;break}}updateParams(e,t){switch(e){case cn.FREETEXT_SIZE:this.#r(t);break;case cn.FREETEXT_COLOR:this.#i(t);break}}static get defaultPropertiesToUpdate(){return[[cn.FREETEXT_SIZE,Xi._defaultFontSize],[cn.FREETEXT_COLOR,Xi._defaultColor||wt._defaultLineColor]]}get propertiesToUpdate(){return[[cn.FREETEXT_SIZE,this.#n],[cn.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new f0(this),[["colorPicker",this._colorPicker]]}get colorType(){return cn.FREETEXT_COLOR}#r(e){const t=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-this.#n)*this.parentScale),this.#n=i,this.#o()},s=this.#n;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:cn.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#i(e){const t=i=>{this.color=i,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:cn.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-Xi._internalPadding*e,-(Xi._internalPadding+this.#n)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#s=new AbortController;const e=this._uiManager.combinedSignal(this.#s);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#s?.abort(),this.#s=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const e=[];this.editorDiv.normalize();let t=null;for(const s of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(e.push(Xi.#c(s)),t=s);return e.join(`
`)}#o(){const[e,t]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,o=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),s=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/t):(this.width=s.height/e,this.height=s.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#e,t=this.#e=this.#a().trimEnd();if(e===t)return;const s=i=>{if(this.#e=i,!i){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{s(t)},undo:()=>{s(e)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Xi._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,f]=this.pageDimensions,[g,x]=this.pageTranslation;let w,A;switch(this.rotation){case 0:w=e+(o[0]-g)/h,A=t+this.height-(o[1]-x)/f;break;case 90:w=e+(o[0]-g)/h,A=t-(o[1]-x)/f,[c,u]=[u,-c];break;case 180:w=e-this.width+(o[0]-g)/h,A=t-(o[1]-x)/f,[c,u]=[-c,-u];break;case 270:w=e+(o[0]-g-this.height*f)/h,A=t+(o[1]-x-this.width*h)/f,[c,u]=[-u,c];break}this.setAt(w*i,A*a,c,u)}else this._moveAfterPaste(e,t);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(wb,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:s}=t;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const i=Xi.#u(t.getData("text")||"").replaceAll(wb,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!i.includes(`
`)){o.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:u}=o,h=[],f=[];if(c.nodeType===Node.TEXT_NODE){const w=c.parentElement;if(f.push(c.nodeValue.slice(u).replaceAll(wb,"")),w!==this.editorDiv){let A=h;for(const C of this.editorDiv.childNodes){if(C===w){A=f;continue}A.push(Xi.#c(C))}}h.push(c.nodeValue.slice(0,u).replaceAll(wb,""))}else if(c===this.editorDiv){let w=h,A=0;for(const C of this.editorDiv.childNodes)A++===u&&(w=f),w.push(Xi.#c(C))}this.#e=`${h.join(`
`)}${i}${f.join(`
`)}`,this.#l();const g=new Range;let x=Math.sumPrecise(h.map(w=>w.length));for(const{firstChild:w}of this.editorDiv.childNodes)if(w.nodeType===Node.TEXT_NODE){const A=w.nodeValue.length;if(x<=A){g.setStart(w,x),g.setEnd(w,x);break}x-=A}a.removeAllRanges(),a.addRange(g)}#l(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const e of this.#e.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#h(){return this.#e.replaceAll(""," ")}static#u(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Xi._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,t,s){let i=null;if(e instanceof aP){const{data:{defaultAppearanceData:{fontSize:o,fontColor:c},rect:u,rotation:h,id:f,popupRef:g,richText:x,contentsObj:w,creationDate:A,modificationDate:C},textContent:E,textPosition:T,parent:{page:{pageNumber:D}}}=e;if(!E||E.length===0)return null;i=e={annotationType:Bt.FREETEXT,color:Array.from(c),fontSize:o,value:E.join(`
`),position:T,pageIndex:D-1,rect:u.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:g,comment:w?.str||null,richText:x,creationDate:A,modificationDate:C}}const a=await super.deserialize(e,t,s);return a.#n=e.fontSize,a.color=lt.makeHexColor(...e.color),a.#e=Xi.#u(e.value),a._initialData=i,e.comment&&a.setCommentData(e),a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=wt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(e),{color:t,fontSize:this.#n,value:this.#h()});return this.addComment(s),e?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(e){const{value:t,fontSize:s,color:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==s||e.color.some((o,c)=>o!==i[c])||e.pageIndex!==a}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:s}=t;s.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,s.color=this.color,t.replaceChildren();for(const i of this.#e.split(`
`)){const a=document.createElement("div");a.append(i?document.createTextNode(i):document.createElement("br")),t.append(a)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class ot{static PRECISION=1e-4;toSVGPath(){es("Abstract method `toSVGPath` must be implemented.")}get box(){es("Abstract getter `box` must be implemented.")}serialize(e,t){es("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,i,a,o){o||=new Float32Array(e.length);for(let c=0,u=e.length;c<u;c+=2)o[c]=t+e[c]*i,o[c+1]=s+e[c+1]*a;return o}static _rescaleAndSwap(e,t,s,i,a,o){o||=new Float32Array(e.length);for(let c=0,u=e.length;c<u;c+=2)o[c]=t+e[c+1]*i,o[c+1]=s+e[c]*a;return o}static _translate(e,t,s,i){i||=new Float32Array(e.length);for(let a=0,o=e.length;a<o;a+=2)i[a]=t+e[a],i[a+1]=s+e[a+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,i,a){switch(a){case 90:return[1-t/s,e/i];case 180:return[1-e/s,1-t/i];case 270:return[t/s,1-e/i];default:return[e/s,t/i]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,i,a,o){return[(e+5*s)/6,(t+5*i)/6,(5*s+a)/6,(5*i+o)/6,(s+a)/2,(i+o)/2]}}class Xh{#e;#t=[];#s;#n;#r=[];#i=new Float32Array(18);#a;#o;#c;#l;#h;#u;#f=[];static#p=8;static#m=2;static#d=Xh.#p+Xh.#m;constructor({x:e,y:t},s,i,a,o,c=0){this.#e=s,this.#u=a*i,this.#n=o,this.#i.set([NaN,NaN,NaN,NaN,e,t],6),this.#s=c,this.#l=Xh.#p*i,this.#c=Xh.#d*i,this.#h=i,this.#f.push(e,t)}isEmpty(){return isNaN(this.#i[8])}#g(){const e=this.#i.subarray(4,6),t=this.#i.subarray(16,18),[s,i,a,o]=this.#e;return[(this.#a+(e[0]-t[0])/2-s)/a,(this.#o+(e[1]-t[1])/2-i)/o,(this.#a+(t[0]-e[0])/2-s)/a,(this.#o+(t[1]-e[1])/2-i)/o]}add({x:e,y:t}){this.#a=e,this.#o=t;const[s,i,a,o]=this.#e;let[c,u,h,f]=this.#i.subarray(8,12);const g=e-h,x=t-f,w=Math.hypot(g,x);if(w<this.#c)return!1;const A=w-this.#l,C=A/w,E=C*g,T=C*x;let D=c,M=u;c=h,u=f,h+=E,f+=T,this.#f?.push(e,t);const L=-T/A,I=E/A,W=L*this.#u,V=I*this.#u;return this.#i.set(this.#i.subarray(2,8),0),this.#i.set([h+W,f+V],4),this.#i.set(this.#i.subarray(14,18),12),this.#i.set([h-W,f-V],16),isNaN(this.#i[6])?(this.#r.length===0&&(this.#i.set([c+W,u+V],2),this.#r.push(NaN,NaN,NaN,NaN,(c+W-s)/a,(u+V-i)/o),this.#i.set([c-W,u-V],14),this.#t.push(NaN,NaN,NaN,NaN,(c-W-s)/a,(u-V-i)/o)),this.#i.set([D,M,c,u,h,f],6),!this.isEmpty()):(this.#i.set([D,M,c,u,h,f],6),Math.abs(Math.atan2(M-u,D-c)-Math.atan2(T,E))<Math.PI/2?([c,u,h,f]=this.#i.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((c+h)/2-s)/a,((u+f)/2-i)/o),[c,u,D,M]=this.#i.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((D+c)/2-s)/a,((M+u)/2-i)/o),!0):([D,M,c,u,h,f]=this.#i.subarray(0,6),this.#r.push(((D+5*c)/6-s)/a,((M+5*u)/6-i)/o,((5*c+h)/6-s)/a,((5*u+f)/6-i)/o,((c+h)/2-s)/a,((u+f)/2-i)/o),[h,f,c,u,D,M]=this.#i.subarray(12,18),this.#t.push(((D+5*c)/6-s)/a,((M+5*u)/6-i)/o,((5*c+h)/6-s)/a,((5*u+f)/6-i)/o,((c+h)/2-s)/a,((u+f)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#r,t=this.#t;if(isNaN(this.#i[6])&&!this.isEmpty())return this.#x();const s=[];s.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);this.#b(s);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?s.push(`L${t[i+4]} ${t[i+5]}`):s.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return this.#y(s),s.join(" ")}#x(){const[e,t,s,i]=this.#e,[a,o,c,u]=this.#g();return`M${(this.#i[2]-e)/s} ${(this.#i[3]-t)/i} L${(this.#i[4]-e)/s} ${(this.#i[5]-t)/i} L${a} ${o} L${c} ${u} L${(this.#i[16]-e)/s} ${(this.#i[17]-t)/i} L${(this.#i[14]-e)/s} ${(this.#i[15]-t)/i} Z`}#y(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#b(e){const[t,s,i,a]=this.#e,o=this.#i.subarray(4,6),c=this.#i.subarray(16,18),[u,h,f,g]=this.#g();e.push(`L${(o[0]-t)/i} ${(o[1]-s)/a} L${u} ${h} L${f} ${g} L${(c[0]-t)/i} ${(c[1]-s)/a}`)}newFreeDrawOutline(e,t,s,i,a,o){return new dP(e,t,s,i,a,o)}getOutlines(){const e=this.#r,t=this.#t,s=this.#i,[i,a,o,c]=this.#e,u=new Float32Array((this.#f?.length??0)+2);for(let g=0,x=u.length-2;g<x;g+=2)u[g]=(this.#f[g]-i)/o,u[g+1]=(this.#f[g+1]-a)/c;if(u[u.length-2]=(this.#a-i)/o,u[u.length-1]=(this.#o-a)/c,isNaN(s[6])&&!this.isEmpty())return this.#C(u);const h=new Float32Array(this.#r.length+24+this.#t.length);let f=e.length;for(let g=0;g<f;g+=2){if(isNaN(e[g])){h[g]=h[g+1]=NaN;continue}h[g]=e[g],h[g+1]=e[g+1]}f=this.#v(h,f);for(let g=t.length-6;g>=6;g-=6)for(let x=0;x<6;x+=2){if(isNaN(t[g+x])){h[f]=h[f+1]=NaN,f+=2;continue}h[f]=t[g+x],h[f+1]=t[g+x+1],f+=2}return this.#N(h,f),this.newFreeDrawOutline(h,u,this.#e,this.#h,this.#s,this.#n)}#C(e){const t=this.#i,[s,i,a,o]=this.#e,[c,u,h,f]=this.#g(),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(t[2]-s)/a,(t[3]-i)/o,NaN,NaN,NaN,NaN,(t[4]-s)/a,(t[5]-i)/o,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(t[16]-s)/a,(t[17]-i)/o,NaN,NaN,NaN,NaN,(t[14]-s)/a,(t[15]-i)/o],0),this.newFreeDrawOutline(g,e,this.#e,this.#h,this.#s,this.#n)}#N(e,t){const s=this.#t;return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6}#v(e,t){const s=this.#i.subarray(4,6),i=this.#i.subarray(16,18),[a,o,c,u]=this.#e,[h,f,g,x]=this.#g();return e.set([NaN,NaN,NaN,NaN,(s[0]-a)/c,(s[1]-o)/u,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,g,x,NaN,NaN,NaN,NaN,(i[0]-a)/c,(i[1]-o)/u],t),t+=24}}class dP extends ot{#e;#t=new Float32Array(4);#s;#n;#r;#i;#a;constructor(e,t,s,i,a,o){super(),this.#a=e,this.#r=t,this.#e=s,this.#i=i,this.#s=a,this.#n=o,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(o);const[c,u,h,f]=this.#t;for(let g=0,x=e.length;g<x;g+=2)e[g]=(e[g]-c)/h,e[g+1]=(e[g+1]-u)/f;for(let g=0,x=t.length;g<x;g+=2)t[g]=(t[g]-c)/h,t[g+1]=(t[g+1]-u)/f}toSVGPath(){const e=[`M${this.#a[4]} ${this.#a[5]}`];for(let t=6,s=this.#a.length;t<s;t+=6){if(isNaN(this.#a[t])){e.push(`L${this.#a[t+4]} ${this.#a[t+5]}`);continue}e.push(`C${this.#a[t]} ${this.#a[t+1]} ${this.#a[t+2]} ${this.#a[t+3]} ${this.#a[t+4]} ${this.#a[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,s,i],a){const o=s-e,c=i-t;let u,h;switch(a){case 0:u=ot._rescale(this.#a,e,i,o,-c),h=ot._rescale(this.#r,e,i,o,-c);break;case 90:u=ot._rescaleAndSwap(this.#a,e,t,o,c),h=ot._rescaleAndSwap(this.#r,e,t,o,c);break;case 180:u=ot._rescale(this.#a,s,t,-o,c),h=ot._rescale(this.#r,s,t,-o,c);break;case 270:u=ot._rescaleAndSwap(this.#a,s,i,-o,-c),h=ot._rescaleAndSwap(this.#r,s,i,-o,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}#o(e){const t=this.#a;let s=t[4],i=t[5];const a=[s,i,s,i];let o=s,c=i,u=s,h=i;const f=e?Math.max:Math.min,g=new Float32Array(4);for(let w=6,A=t.length;w<A;w+=6){const C=t[w+4],E=t[w+5];isNaN(t[w])?(lt.pointBoundingBox(C,E,a),c>E?(o=C,c=E):c===E&&(o=f(o,C)),h<E?(u=C,h=E):h===E&&(u=f(u,C))):(g[0]=g[1]=1/0,g[2]=g[3]=-1/0,lt.bezierBoundingBox(s,i,...t.slice(w,w+6),g),lt.rectBoundingBox(g[0],g[1],g[2],g[3],a),c>g[1]?(o=g[0],c=g[1]):c===g[1]&&(o=f(o,g[0])),h<g[3]?(u=g[2],h=g[3]):h===g[3]&&(u=f(u,g[2]))),s=C,i=E}const x=this.#t;x[0]=a[0]-this.#s,x[1]=a[1]-this.#s,x[2]=a[2]-a[0]+2*this.#s,x[3]=a[3]-a[1]+2*this.#s,this.firstPoint=[o,c],this.lastPoint=[u,h]}get box(){return this.#t}newOutliner(e,t,s,i,a,o=0){return new Xh(e,t,s,i,a,o)}getNewOutline(e,t){const[s,i,a,o]=this.#t,[c,u,h,f]=this.#e,g=a*h,x=o*f,w=s*h+c,A=i*f+u,C=this.newOutliner({x:this.#r[0]*g+w,y:this.#r[1]*x+A},this.#e,this.#i,e,this.#n,t??this.#s);for(let E=2;E<this.#r.length;E+=2)C.add({x:this.#r[E]*g+w,y:this.#r[E+1]*x+A});return C.getOutlines()}}class _2{#e;#t;#s;#n=[];#r=[];constructor(e,t=0,s=0,i=!0){const a=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:C,y:E,width:T,height:D}of e){const M=Math.floor((C-t)/o)*o,L=Math.ceil((C+T+t)/o)*o,I=Math.floor((E-t)/o)*o,W=Math.ceil((E+D+t)/o)*o,V=[M,I,W,!0],Y=[L,I,W,!1];this.#n.push(V,Y),lt.rectBoundingBox(M,I,L,W,a)}const c=a[2]-a[0]+2*s,u=a[3]-a[1]+2*s,h=a[0]-s,f=a[1]-s;let g=i?-1/0:1/0,x=1/0;const w=this.#n.at(i?-1:-2),A=[w[0],w[2]];for(const C of this.#n){const[E,T,D,M]=C;!M&&i?T<x?(x=T,g=E):T===x&&(g=Math.max(g,E)):M&&!i&&(T<x?(x=T,g=E):T===x&&(g=Math.min(g,E))),C[0]=(E-h)/c,C[1]=(T-f)/u,C[2]=(D-f)/u}this.#e=new Float32Array([h,f,c,u]),this.#t=[g,x],this.#s=A}getOutlines(){this.#n.sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of this.#n)t[3]?(e.push(...this.#l(t)),this.#o(t)):(this.#c(t),e.push(...this.#l(t)));return this.#i(e)}#i(e){const t=[],s=new Set;for(const o of e){const[c,u,h]=o;t.push([c,u,o],[c,h,o])}t.sort((o,c)=>o[1]-c[1]||o[0]-c[0]);for(let o=0,c=t.length;o<c;o+=2){const u=t[o][2],h=t[o+1][2];u.push(h),h.push(u),s.add(u),s.add(h)}const i=[];let a;for(;s.size>0;){const o=s.values().next().value;let[c,u,h,f,g]=o;s.delete(o);let x=c,w=u;for(a=[c,h],i.push(a);;){let A;if(s.has(f))A=f;else if(s.has(g))A=g;else break;s.delete(A),[c,u,h,f,g]=A,x!==c&&(a.push(x,w,c,w===u?u:h),x=c),w=w===u?h:u}a.push(x,w)}return new vq(i,this.#e,this.#t,this.#s)}#a(e){const t=this.#r;let s=0,i=t.length-1;for(;s<=i;){const a=s+i>>1,o=t[a][0];if(o===e)return a;o<e?s=a+1:i=a-1}return i+1}#o([,e,t]){const s=this.#a(e);this.#r.splice(s,0,[e,t])}#c([,e,t]){const s=this.#a(e);for(let i=s;i<this.#r.length;i++){const[a,o]=this.#r[i];if(a!==e)break;if(a===e&&o===t){this.#r.splice(i,1);return}}for(let i=s-1;i>=0;i--){const[a,o]=this.#r[i];if(a!==e)break;if(a===e&&o===t){this.#r.splice(i,1);return}}}#l(e){const[t,s,i]=e,a=[[t,s,i]],o=this.#a(i);for(let c=0;c<o;c++){const[u,h]=this.#r[c];for(let f=0,g=a.length;f<g;f++){const[,x,w]=a[f];if(!(h<=x||w<=u)){if(x>=u){if(w>h)a[f][1]=h;else{if(g===1)return[];a.splice(f,1),f--,g--}continue}a[f][2]=u,w>h&&a.push([t,h,w])}}}return a}}class vq extends ot{#e;#t;constructor(e,t,s,i){super(),this.#t=e,this.#e=t,this.firstPoint=s,this.lastPoint=i}toSVGPath(){const e=[];for(const t of this.#t){let[s,i]=t;e.push(`M${s} ${i}`);for(let a=2;a<t.length;a+=2){const o=t[a],c=t[a+1];o===s?(e.push(`V${c}`),i=c):c===i&&(e.push(`H${o}`),s=o)}e.push("Z")}return e.join(" ")}serialize([e,t,s,i],a){const o=[],c=s-e,u=i-t;for(const h of this.#t){const f=new Array(h.length);for(let g=0;g<h.length;g+=2)f[g]=e+h[g]*c,f[g+1]=i-h[g+1]*u;o.push(f)}return o}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class j2 extends Xh{newFreeDrawOutline(e,t,s,i,a,o){return new wq(e,t,s,i,a,o)}}class wq extends dP{newOutliner(e,t,s,i,a,o=0){return new j2(e,t,s,i,a,o)}}class ti extends wt{#e=null;#t=0;#s;#n=null;#r=null;#i=null;#a=null;#o=0;#c=null;#l=null;#h=null;#u=!1;#f=null;#p=null;#m=null;#d="";#g;#x="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Bt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=ti.prototype;return Xt(this,"_keyboardManager",new J0([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||ti._defaultColor,this.#g=e.thickness||ti._defaultThickness,this.opacity=e.opacity||ti._defaultOpacity,this.#s=e.boxes||null,this.#x=e.methodOfCreation||"",this.#d=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#u=!0,this.#b(e),this.#S()):this.#s&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#a=e.focusNode,this.#o=e.focusOffset,this.#y(),this.#S(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#u?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#g,methodOfCreation:this.#x}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#y(){const e=new _2(this.#s,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const t=new _2(this.#s,.0025,.001,this._uiManager.direction==="ltr");this.#i=t.getOutlines();const{firstPoint:s}=this.#l;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:i}=this.#i;this.#p=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#b({highlightOutlines:e,highlightId:t,clipPathId:s}){this.#l=e;const i=1.5;if(this.#i=e.getNewOutline(this.#g/2+i,.0025),t>=0)this.#h=t,this.#n=s,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},!0);else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:ti.#A(this.#l.box,(g-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:ti.#A(this.#i.box,g),path:{d:this.#i.toSVGPath()}})}const[a,o,c,u]=e.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=c,this.height=u;break;case 90:{const[g,x]=this.parentDimensions;this.x=o,this.y=1-a,this.width=c*x/g,this.height=u*g/x;break}case 180:this.x=1-a,this.y=1-o,this.width=c,this.height=u;break;case 270:{const[g,x]=this.parentDimensions;this.x=1-o,this.y=a,this.width=c*x/g,this.height=u*g/x;break}}const{firstPoint:h}=e;this.#f=[(h[0]-a)/c,(h[1]-o)/u];const{lastPoint:f}=this.#i;this.#p=[(f[0]-a)/c,(f[1]-o)/u]}static initialize(e,t){wt.initialize(e,t),ti._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case cn.HIGHLIGHT_COLOR:ti._defaultColor=t;break;case cn.HIGHLIGHT_THICKNESS:ti._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#p}get commentButtonPosition(){return this.#f}updateParams(e,t){switch(e){case cn.HIGHLIGHT_COLOR:this.#C(t);break;case cn.HIGHLIGHT_THICKNESS:this.#N(t);break}}static get defaultPropertiesToUpdate(){return[[cn.HIGHLIGHT_COLOR,ti._defaultColor],[cn.HIGHLIGHT_THICKNESS,ti._defaultThickness]]}get propertiesToUpdate(){return[[cn.HIGHLIGHT_COLOR,this.color||ti._defaultColor],[cn.HIGHLIGHT_THICKNESS,this.#g||ti._defaultThickness],[cn.HIGHLIGHT_FREE,this.#u]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#C(e){const t=(a,o)=>{this.color=a,this.opacity=o,this.onUpdatedColor()},s=this.color,i=this.opacity;this.addCommands({cmd:t.bind(this,e,ti._defaultOpacity),undo:t.bind(this,s,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:cn.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#N(e){const t=this.#g,s=i=>{this.#g=i,this.#v(i)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:cn.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new Qr({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#j())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#j())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#S(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#T():e&&(this.#S(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#v(e){this.#u&&(this.#b({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#T(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#S(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#u},path:{d:this.#l.toSVGPath()}},!1,!0),this.#m=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#u},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},this.#u),this.#c&&(this.#c.style.clipPath=this.#n))}static#A([e,t,s,i],a){switch(a){case 90:return[1-t-i,e,i,s];case 180:return[1-e-s,1-t-i,s,i];case 270:return[t,1-e-s,i,s]}return[e,t,s,i]}rotate(e){const{drawLayer:t}=this.parent;let s;this.#u?(e=(e-this.rotation+360)%360,s=ti.#A(this.#l.box,e)):s=ti.#A([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:s,root:{"data-main-rotation":e}}),t.updateProperties(this.#m,{bbox:ti.#A(this.#i.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#d&&(e.setAttribute("aria-label",this.#d),e.setAttribute("role","mark")),this.#u?e.classList.add("free"):this.div.addEventListener("keydown",this.#k.bind(this),{signal:this._uiManager._signal});const t=this.#c=document.createElement("div");return e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#n,this.setDims(this.width,this.height),I5(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#k(e){ti._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#_(!0);break;case 1:case 3:this.#_(!1);break}}#_(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#a,this.#o)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#u||this.#_(!1))}get _mustFixPosition(){return!this.#u}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!e}}))}#j(){return this.#u?this.rotation:0}#F(){if(this.#u)return null;const[e,t]=this.pageDimensions,[s,i]=this.pageTranslation,a=this.#s,o=new Float32Array(a.length*8);let c=0;for(const{x:u,y:h,width:f,height:g}of a){const x=u*e+s,w=(1-h)*t+i;o[c]=o[c+4]=x,o[c+1]=o[c+3]=w,o[c+2]=o[c+6]=x+f*e,o[c+5]=o[c+7]=w-g*t,c+=8}return o}#D(e){return this.#l.serialize(e,this.#j())}static startHighlighting(e,t,{target:s,x:i,y:a}){const{x:o,y:c,width:u,height:h}=s.getBoundingClientRect(),f=new AbortController,g=e.combinedSignal(f),x=w=>{f.abort(),this.#z(e,w)};window.addEventListener("blur",x,{signal:g}),window.addEventListener("pointerup",x,{signal:g}),window.addEventListener("pointerdown",Rs,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",to,{signal:g}),s.addEventListener("pointermove",this.#P.bind(this,e),{signal:g}),this._freeHighlight=new j2({x:i,y:a},[o,c,u,h],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#P(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#z(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,s){let i=null;if(e instanceof oP){const{data:{quadPoints:A,rect:C,rotation:E,id:T,color:D,opacity:M,popupRef:L,richText:I,contentsObj:W,creationDate:V,modificationDate:Y},parent:{page:{pageNumber:K}}}=e;i=e={annotationType:Bt.HIGHLIGHT,color:Array.from(D),opacity:M,quadPoints:A,boxes:null,pageIndex:K-1,rect:C.slice(0),rotation:E,annotationElementId:T,id:T,deleted:!1,popupRef:L,richText:I,comment:W?.str||null,creationDate:V,modificationDate:Y}}else if(e instanceof AN){const{data:{inkLists:A,rect:C,rotation:E,id:T,color:D,borderStyle:{rawWidth:M},popupRef:L,richText:I,contentsObj:W,creationDate:V,modificationDate:Y},parent:{page:{pageNumber:K}}}=e;i=e={annotationType:Bt.HIGHLIGHT,color:Array.from(D),thickness:M,inkLists:A,boxes:null,pageIndex:K-1,rect:C.slice(0),rotation:E,annotationElementId:T,id:T,deleted:!1,popupRef:L,richText:I,comment:W?.str||null,creationDate:V,modificationDate:Y}}const{color:a,quadPoints:o,inkLists:c,opacity:u}=e,h=await super.deserialize(e,t,s);h.color=lt.makeHexColor(...a),h.opacity=u||1,c&&(h.#g=e.thickness),h._initialData=i,e.comment&&h.setCommentData(e);const[f,g]=h.pageDimensions,[x,w]=h.pageTranslation;if(o){const A=h.#s=[];for(let C=0;C<o.length;C+=8)A.push({x:(o[C]-x)/f,y:1-(o[C+1]-w)/g,width:(o[C+2]-o[C])/f,height:(o[C+1]-o[C+5])/g});h.#y(),h.#S(),h.rotate(h.rotation)}else if(c){h.#u=!0;const A=c[0],C={x:A[0]-x,y:g-(A[1]-w)},E=new j2(C,[0,0,f,g],1,h.#g/2,!0,.001);for(let M=0,L=A.length;M<L;M+=2)C.x=A[M]-x,C.y=g-(A[M+1]-w),E.add(C);const{id:T,clipPathId:D}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);h.#b({highlightOutlines:E.getOutlines(),highlightId:T,clipPathId:D}),h.#S(),h.rotate(h.parentRotation)}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=wt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(e);return Object.assign(s,{color:t,opacity:this.opacity,thickness:this.#g,quadPoints:this.#F(),outlines:this.#D(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#O(s)?null:(s.id=this.annotationElementId,s)}#O(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((s,i)=>s!==t[i])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class uP{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){es("Not implemented")}}class Ct extends wt{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#s=null;static#n=null;static#r=null;static#i=NaN;static#a=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#l(e),this.#f())}#l({drawOutlines:e,drawId:t,drawingOptions:s}){this.#e=e,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#h(e,this.parent),this.#d(e.box)}#h(e,t){const{id:s}=t.drawLayer.draw(Ct._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(e,t){const s=new Set(Object.keys(e));for(const[i,a]of Object.entries(t))s.has(i)?Object.assign(e[i],a):e[i]=a;return e}static getDefaultDrawingOptions(e){es("Not implemented")}static get typesMap(){es("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,t),this._currentParent&&(Ct.#s.updateProperty(s,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[s,i]of this.typesMap)e.push([s,t[i]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[s,i]of this.constructor.typesMap)e.push([s,t[i]]);return e}_updateProperty(e,t,s){const i=this._drawingOptions,a=i[t],o=c=>{i.updateProperty(t,c);const u=this.#e.updateProperty(t,c);u&&this.#d(u),this.parent?.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:o.bind(this,s),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Ct._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#m()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Ct._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#m()),{bbox:this.#g()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Ct._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#m(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#u(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#d(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#u()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#u(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,e)}}#p([e,t,s,i]){const{parentDimensions:[a,o],rotation:c}=this;switch(c){case 90:return[t,1-e,s*(o/a),i*(a/o)];case 180:return[1-e,1-t,s,i];case 270:return[1-t,e,s*(o/a),i*(a/o)];default:return[e,t,s,i]}}#m(){const{x:e,y:t,width:s,height:i,parentDimensions:[a,o],rotation:c}=this;switch(c){case 90:return[1-t,e,s*(a/o),i*(o/a)];case 180:return[1-e,1-t,s,i];case 270:return[t,1-e,s*(a/o),i*(o/a)];default:return[e,t,s,i]}}#d(e){[this.x,this.y,this.width,this.height]=this.#p(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#g(){const{x:e,y:t,width:s,height:i,rotation:a,parentRotation:o,parentDimensions:[c,u]}=this;switch((a*4+o)/90){case 1:return[1-t-i,e,i,s];case 2:return[1-e-s,1-t-i,s,i];case 3:return[t,1-e-s,i,s];case 4:return[e,t-s*(c/u),i*(u/c),s*(c/u)];case 5:return[1-t,e,s*(c/u),i*(u/c)];case 6:return[1-e-i*(u/c),1-t,i*(u/c),s*(c/u)];case 7:return[t-s*(c/u),1-e-i*(u/c),s*(c/u),i*(u/c)];case 8:return[e-s,t-i,s,i];case 9:return[1-t,e-s,i,s];case 10:return[1-e,1-t,s,i];case 11:return[t-i,1-e,i,s];case 12:return[e-i*(u/c),t,i*(u/c),s*(c/u)];case 13:return[1-t-s*(c/u),e-i*(u/c),s*(c/u),i*(u/c)];case 14:return[1-e,1-t-s*(c/u),i*(u/c),s*(c/u)];case 15:return[t,1-e,s*(c/u),i*(u/c)];default:return[e,t,s,i]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ct._mergeSVGProperties({bbox:this.#g()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#d(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const s=super.render();s.classList.add("draw");const i=document.createElement("div");return s.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),s}static createDrawerInstance(e,t,s,i,a){es("Not implemented")}static startDrawing(e,t,s,i){const{target:a,offsetX:o,offsetY:c,pointerId:u,pointerType:h}=i;if(Ct.#a&&Ct.#a!==h)return;const{viewport:{rotation:f}}=e,{width:g,height:x}=a.getBoundingClientRect(),w=Ct.#n=new AbortController,A=e.combinedSignal(w);if(Ct.#i||=u,Ct.#a??=h,window.addEventListener("pointerup",C=>{Ct.#i===C.pointerId?this._endDraw(C):Ct.#o?.delete(C.pointerId)},{signal:A}),window.addEventListener("pointercancel",C=>{Ct.#i===C.pointerId?this._currentParent.endDrawingSession():Ct.#o?.delete(C.pointerId)},{signal:A}),window.addEventListener("pointerdown",C=>{Ct.#a===C.pointerType&&((Ct.#o||=new Set).add(C.pointerId),Ct.#s.isCancellable()&&(Ct.#s.removeLastElement(),Ct.#s.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",to,{signal:A}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:A}),a.addEventListener("touchmove",C=>{C.timeStamp===Ct.#c&&Rs(C)},{signal:A}),e.toggleDrawing(),t._editorUndoBar?.hide(),Ct.#s){e.drawLayer.updateProperties(this._currentDrawId,Ct.#s.startNew(o,c,g,x,f));return}t.updateUIForDefaultProperties(this),Ct.#s=this.createDrawerInstance(o,c,g,x,f),Ct.#r=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(Ct.#r.toSVGProperties(),Ct.#s.defaultSVGProperties),!0,!1)}static _drawMove(e){if(Ct.#c=-1,!Ct.#s)return;const{offsetX:t,offsetY:s,pointerId:i}=e;if(Ct.#i===i){if(Ct.#o?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Ct.#s.add(t,s)),Ct.#c=e.timeStamp,Rs(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,Ct.#s=null,Ct.#r=null,Ct.#a=null,Ct.#c=NaN),Ct.#n&&(Ct.#n.abort(),Ct.#n=null,Ct.#i=NaN,Ct.#o=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e?.target===t.div&&t.drawLayer.updateProperties(this._currentDrawId,Ct.#s.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=Ct.#s,i=this._currentDrawId,a=s.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(i,s.setLastElement(a))},undo:()=>{t.drawLayer.updateProperties(i,s.removeLastElement())},mustExec:!1,type:cn.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(cn.DRAW_STEP),!Ct.#s.isEmpty()){const{pageDimensions:[s,i],scale:a}=t,o=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Ct.#s.getOutlines(s*a,i*a,a,this._INNER_MARGIN),drawingOptions:Ct.#r,mustBeCommitted:!e});return this._cleanup(!0),o}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,s,i,a,o){es("Not implemented")}static async deserialize(e,t,s){const{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:c}}=t.viewport,u=this.deserializeDraw(o,c,i,a,this._INNER_MARGIN,e),h=await super.deserialize(e,t,s);return h.createDrawingOptions(e),h.#l({drawOutlines:u}),h.#f(),h.onScaleChanging(),h.rotate(),h}serializeDraw(e){const[t,s]=this.pageTranslation,[i,a]=this.pageDimensions;return this.#e.serialize([t,s,i,a],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class Sq{#e=new Float64Array(6);#t;#s;#n;#r;#i;#a="";#o=0;#c=new $0;#l;#h;constructor(e,t,s,i,a,o){this.#l=s,this.#h=i,this.#n=a,this.#r=o,[e,t]=this.#u(e,t);const c=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t],this.#s=[{line:c,points:this.#i}],this.#e.set(c,0)}updateProperty(e,t){e==="stroke-width"&&(this.#r=t)}#u(e,t){return ot._normalizePoint(e,t,this.#l,this.#h,this.#n)}isEmpty(){return!this.#s||this.#s.length===0}isCancellable(){return this.#i.length<=10}add(e,t){[e,t]=this.#u(e,t);const[s,i,a,o]=this.#e.subarray(2,6),c=e-a,u=t-o;return Math.hypot(this.#l*c,this.#h*u)<=2?null:(this.#i.push(e,t),isNaN(s)?(this.#e.set([a,o,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([s,i,a,o,e,t],0),this.#t.push(...ot.createBezierPoints(s,i,a,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(this.#i.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,i,a){this.#l=s,this.#h=i,this.#n=a,[e,t]=this.#u(e,t);const o=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t];const c=this.#s.at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),this.#s.push({line:o,points:this.#i}),this.#e.set(o,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#s.at(-1)}setLastElement(e){return this.#s?(this.#s.push(e),this.#t=e.line,this.#i=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(e)}removeLastElement(){if(!this.#s)return this.#c.removeLastElement();this.#s.pop(),this.#a="";for(let e=0,t=this.#s.length;e<t;e++){const{line:s,points:i}=this.#s[e];this.#t=s,this.#i=i,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const e=ot.svgRound(this.#t[4]),t=ot.svgRound(this.#t[5]);if(this.#i.length===2)return this.#a=`${this.#a} M ${e} ${t} Z`,this.#a;if(this.#i.length<=6){const i=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,i)} M ${e} ${t}`,this.#o=6}if(this.#i.length===4){const i=ot.svgRound(this.#t[10]),a=ot.svgRound(this.#t[11]);return this.#a=`${this.#a} L ${i} ${a}`,this.#o=12,this.#a}const s=[];this.#o===0&&(s.push(`M ${e} ${t}`),this.#o=6);for(let i=this.#o,a=this.#t.length;i<a;i+=6){const[o,c,u,h,f,g]=this.#t.slice(i,i+6).map(ot.svgRound);s.push(`C${o} ${c} ${u} ${h} ${f} ${g}`)}return this.#a+=s.join(" "),this.#o=this.#t.length,this.#a}getOutlines(e,t,s,i){const a=this.#s.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#c.build(this.#s,e,t,s,this.#n,this.#r,i),this.#e=null,this.#t=null,this.#s=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class $0 extends ot{#e;#t=0;#s;#n;#r;#i;#a;#o;#c;build(e,t,s,i,a,o,c){this.#r=t,this.#i=s,this.#a=i,this.#o=a,this.#c=o,this.#s=c??0,this.#n=e,this.#u()}get thickness(){return this.#c}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#n){if(e.push(`M${ot.svgRound(t[4])} ${ot.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12&&isNaN(t[6])){e.push(`L${ot.svgRound(t[10])} ${ot.svgRound(t[11])}`);continue}for(let s=6,i=t.length;s<i;s+=6){const[a,o,c,u,h,f]=t.subarray(s,s+6).map(ot.svgRound);e.push(`C${a} ${o} ${c} ${u} ${h} ${f}`)}}return e.join("")}serialize([e,t,s,i],a){const o=[],c=[],[u,h,f,g]=this.#h();let x,w,A,C,E,T,D,M,L;switch(this.#o){case 0:L=ot._rescale,x=e,w=t+i,A=s,C=-i,E=e+u*s,T=t+(1-h-g)*i,D=e+(u+f)*s,M=t+(1-h)*i;break;case 90:L=ot._rescaleAndSwap,x=e,w=t,A=s,C=i,E=e+h*s,T=t+u*i,D=e+(h+g)*s,M=t+(u+f)*i;break;case 180:L=ot._rescale,x=e+s,w=t,A=-s,C=i,E=e+(1-u-f)*s,T=t+h*i,D=e+(1-u)*s,M=t+(h+g)*i;break;case 270:L=ot._rescaleAndSwap,x=e+s,w=t+i,A=-s,C=-i,E=e+(1-h-g)*s,T=t+(1-u-f)*i,D=e+(1-h)*s,M=t+(1-u)*i;break}for(const{line:I,points:W}of this.#n)o.push(L(I,x,w,A,C,a?new Array(I.length):null)),c.push(L(W,x,w,A,C,a?new Array(W.length):null));return{lines:o,points:c,rect:[E,T,D,M]}}static deserialize(e,t,s,i,a,{paths:{lines:o,points:c},rotation:u,thickness:h}){const f=[];let g,x,w,A,C;switch(u){case 0:C=ot._rescale,g=-e/s,x=t/i+1,w=1/s,A=-1/i;break;case 90:C=ot._rescaleAndSwap,g=-t/i,x=-e/s,w=1/i,A=1/s;break;case 180:C=ot._rescale,g=e/s+1,x=-t/i,w=-1/s,A=1/i;break;case 270:C=ot._rescaleAndSwap,g=t/i+1,x=e/s+1,w=-1/i,A=-1/s;break}if(!o){o=[];for(const T of c){const D=T.length;if(D===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,T[0],T[1]]));continue}if(D===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,T[0],T[1],NaN,NaN,NaN,NaN,T[2],T[3]]));continue}const M=new Float32Array(3*(D-2));o.push(M);let[L,I,W,V]=T.subarray(0,4);M.set([NaN,NaN,NaN,NaN,L,I],0);for(let Y=4;Y<D;Y+=2){const K=T[Y],q=T[Y+1];M.set(ot.createBezierPoints(L,I,W,V,K,q),(Y-2)*3),[L,I,W,V]=[W,V,K,q]}}}for(let T=0,D=o.length;T<D;T++)f.push({line:C(o[T].map(M=>M??NaN),g,x,w,A),points:C(c[T].map(M=>M??NaN),g,x,w,A)});const E=new this.prototype.constructor;return E.build(f,s,i,1,u,h,a),E}#l(e=this.#c){const t=this.#s+e/2*this.#a;return this.#o%180===0?[t/this.#r,t/this.#i]:[t/this.#i,t/this.#r]}#h(){const[e,t,s,i]=this.#e,[a,o]=this.#l(0);return[e+a,t+o,s-2*a,i-2*o]}#u(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:i}of this.#n){if(i.length<=12){for(let c=4,u=i.length;c<u;c+=6)lt.pointBoundingBox(i[c],i[c+1],e);continue}let a=i[4],o=i[5];for(let c=6,u=i.length;c<u;c+=6){const[h,f,g,x,w,A]=i.subarray(c,c+6);lt.bezierBoundingBox(a,o,h,f,g,x,w,A,e),a=w,o=A}}const[t,s]=this.#l();e[0]=Na(e[0]-t,0,1),e[1]=Na(e[1]-s,0,1),e[2]=Na(e[2]+t,0,1),e[3]=Na(e[3]+s,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,s]=this.#l();this.#c=e;const[i,a]=this.#l(),[o,c]=[i-t,a-s],u=this.#e;return u[0]-=o,u[1]-=c,u[2]+=2*o,u[3]+=2*c,u}updateParentDimensions([e,t],s){const[i,a]=this.#l();this.#r=e,this.#i=t,this.#a=s;const[o,c]=this.#l(),u=o-i,h=c-a,f=this.#e;return f[0]-=u,f[1]-=h,f[2]+=2*u,f[3]+=2*h,f}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(ot.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ot.svgRound(e)} ${ot.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let s=0,i=0,a=0,o=0,c=0,u=0;switch(this.#t){case 90:i=t/e,a=-e/t,c=e;break;case 180:s=-1,o=-1,c=e,u=t;break;case 270:i=-t/e,a=e/t,u=t;break;default:return""}return`matrix(${s} ${i} ${a} ${o} ${ot.svgRound(c)} ${ot.svgRound(u)})`}getPathResizingSVGProperties([e,t,s,i]){const[a,o]=this.#l(),[c,u,h,f]=this.#e;if(Math.abs(h-a)<=ot.PRECISION||Math.abs(f-o)<=ot.PRECISION){const C=e+s/2-(c+h/2),E=t+i/2-(u+f/2);return{path:{"transform-origin":`${ot.svgRound(e)} ${ot.svgRound(t)}`,transform:`${this.rotationTransform} translate(${C} ${E})`}}}const g=(s-2*a)/(h-2*a),x=(i-2*o)/(f-2*o),w=h/s,A=f/i;return{path:{"transform-origin":`${ot.svgRound(c)} ${ot.svgRound(u)}`,transform:`${this.rotationTransform} scale(${w} ${A}) translate(${ot.svgRound(a)} ${ot.svgRound(o)}) scale(${g} ${x}) translate(${ot.svgRound(-a)} ${ot.svgRound(-o)})`}}}getPathResizedSVGProperties([e,t,s,i]){const[a,o]=this.#l(),c=this.#e,[u,h,f,g]=c;if(c[0]=e,c[1]=t,c[2]=s,c[3]=i,Math.abs(f-a)<=ot.PRECISION||Math.abs(g-o)<=ot.PRECISION){const E=e+s/2-(u+f/2),T=t+i/2-(h+g/2);for(const{line:D,points:M}of this.#n)ot._translate(D,E,T,D),ot._translate(M,E,T,M);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ot.svgRound(e)} ${ot.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const x=(s-2*a)/(f-2*a),w=(i-2*o)/(g-2*o),A=-x*(u+a)+e+a,C=-w*(h+o)+t+o;if(x!==1||w!==1||A!==0||C!==0)for(const{line:E,points:T}of this.#n)ot._rescale(E,A,C,x,w,E),ot._rescale(T,A,C,x,w,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ot.svgRound(e)} ${ot.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],s){const[i,a]=s,o=this.#e,c=e-o[0],u=t-o[1];if(this.#r===i&&this.#i===a)for(const{line:h,points:f}of this.#n)ot._translate(h,c,u,h),ot._translate(f,c,u,f);else{const h=this.#r/i,f=this.#i/a;this.#r=i,this.#i=a;for(const{line:g,points:x}of this.#n)ot._rescale(g,c,u,h,f,g),ot._rescale(x,c,u,h,f,x);o[2]*=h,o[3]*=f}return o[0]=e,o[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ot.svgRound(e)} ${ot.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ot.svgRound(e[0])} ${ot.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class gv extends uP{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:wt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new gv(this._viewParameters);return e.updateAll(this),e}}class EN extends Ct{static _type="ink";static _editorType=Bt.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){wt.initialize(e,t),this._defaultDrawingOptions=new gv(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return Xt(this,"typesMap",new Map([[cn.INK_THICKNESS,"stroke-width"],[cn.INK_COLOR,"stroke"],[cn.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,s,i,a){return new Sq(e,t,s,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,s,i,a,o){return $0.deserialize(e,t,s,i,a,o)}static async deserialize(e,t,s){let i=null;if(e instanceof AN){const{data:{inkLists:o,rect:c,rotation:u,id:h,color:f,opacity:g,borderStyle:{rawWidth:x},popupRef:w,richText:A,contentsObj:C,creationDate:E,modificationDate:T},parent:{page:{pageNumber:D}}}=e;i=e={annotationType:Bt.INK,color:Array.from(f),thickness:x,opacity:g,paths:{points:o},boxes:null,pageIndex:D-1,rect:c.slice(0),rotation:u,annotationElementId:h,id:h,deleted:!1,popupRef:w,richText:A,comment:C?.str||null,creationDate:E,modificationDate:T}}const a=await super.deserialize(e,t,s);return a._initialData=i,e.comment&&a.setCommentData(e),a}get toolbarButtons(){return this._colorPicker||=new f0(this),[["colorPicker",this._colorPicker]]}get colorType(){return cn.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:s}=this;t.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:s}){this._drawingOptions=EN.getDefaultDrawingOptions({stroke:lt.makeHexColor(...e),"stroke-width":t,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:s}=this.serializeDraw(e),{_drawingOptions:{stroke:i,"stroke-opacity":a,"stroke-width":o}}=this,c=Object.assign(super.serialize(e),{color:wt._colorManager.convert(i),opacity:a,thickness:o,paths:{lines:t,points:s}});return this.addComment(c),e?(c.isCopy=!0,c):this.annotationElementId&&!this.#e(c)?null:(c.id=this.annotationElementId,c)}#e(e){const{color:t,thickness:s,opacity:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((o,c)=>o!==t[c])||e.thickness!==s||e.opacity!==i||e.pageIndex!==a}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:t,popup:this.comment}),null}}class k2 extends $0{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Sb=8,bp=3;class Bh{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,s,i){return s-=e,i-=t,s===0?i>0?0:4:s===1?i+6:2-i}static#s=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,t,s,i,a,o,c){const u=this.#t(s,i,a,o);for(let h=0;h<8;h++){const f=(-h+u-c+16)%8,g=this.#s[2*f],x=this.#s[2*f+1];if(e[(s+g)*t+(i+x)]!==0)return f}return-1}static#r(e,t,s,i,a,o,c){const u=this.#t(s,i,a,o);for(let h=0;h<8;h++){const f=(h+u+c+16)%8,g=this.#s[2*f],x=this.#s[2*f+1];if(e[(s+g)*t+(i+x)]!==0)return f}return-1}static#i(e,t,s,i){const a=e.length,o=new Int32Array(a);for(let f=0;f<a;f++)o[f]=e[f]<=i?1:0;for(let f=1;f<s-1;f++)o[f*t]=o[f*t+t-1]=0;for(let f=0;f<t;f++)o[f]=o[t*s-1-f]=0;let c=1,u;const h=[];for(let f=1;f<s-1;f++){u=1;for(let g=1;g<t-1;g++){const x=f*t+g,w=o[x];if(w===0)continue;let A=f,C=g;if(w===1&&o[x-1]===0)c+=1,C-=1;else if(w>=1&&o[x+1]===0)c+=1,C+=1,w>1&&(u=w);else{w!==1&&(u=Math.abs(w));continue}const E=[g,f],T=C===g+1,D={isHole:T,points:E,id:c,parent:0};h.push(D);let M;for(const ne of h)if(ne.id===u){M=ne;break}M?M.isHole?D.parent=T?M.parent:u:D.parent=T?u:M.parent:D.parent=T?u:0;const L=this.#n(o,t,f,g,A,C,0);if(L===-1){o[x]=-c,o[x]!==1&&(u=Math.abs(o[x]));continue}let I=this.#s[2*L],W=this.#s[2*L+1];const V=f+I,Y=g+W;A=V,C=Y;let K=f,q=g;for(;;){const ne=this.#r(o,t,K,q,A,C,1);I=this.#s[2*ne],W=this.#s[2*ne+1];const le=K+I,_e=q+W;E.push(_e,le);const xe=K*t+q;if(o[xe+1]===0?o[xe]=-c:o[xe]===1&&(o[xe]=c),le===f&&_e===g&&K===V&&q===Y){o[x]!==1&&(u=Math.abs(o[x]));break}else A=K,C=q,K=le,q=_e}}}return h}static#a(e,t,s,i){if(s-t<=4){for(let V=t;V<s-2;V+=2)i.push(e[V],e[V+1]);return}const a=e[t],o=e[t+1],c=e[s-4]-a,u=e[s-3]-o,h=Math.hypot(c,u),f=c/h,g=u/h,x=f*o-g*a,w=u/c,A=1/h,C=Math.atan(w),E=Math.cos(C),T=Math.sin(C),D=A*(Math.abs(E)+Math.abs(T)),M=A*(1-D+D**2),L=Math.max(Math.atan(Math.abs(T+E)*M),Math.atan(Math.abs(T-E)*M));let I=0,W=t;for(let V=t+2;V<s-2;V+=2){const Y=Math.abs(x-f*e[V+1]+g*e[V]);Y>I&&(W=V,I=Y)}I>(h*L)**2?(this.#a(e,t,W+2,i),this.#a(e,W,s,i)):i.push(a,o)}static#o(e){const t=[],s=e.length;return this.#a(e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t}static#c(e,t,s,i,a,o){const c=new Float32Array(o**2),u=-2*i**2,h=o>>1;for(let C=0;C<o;C++){const E=(C-h)**2;for(let T=0;T<o;T++)c[C*o+T]=Math.exp((E+(T-h)**2)/u)}const f=new Float32Array(256),g=-2*a**2;for(let C=0;C<256;C++)f[C]=Math.exp(C**2/g);const x=e.length,w=new Uint8Array(x),A=new Uint32Array(256);for(let C=0;C<s;C++)for(let E=0;E<t;E++){const T=C*t+E,D=e[T];let M=0,L=0;for(let W=0;W<o;W++){const V=C+W-h;if(!(V<0||V>=s))for(let Y=0;Y<o;Y++){const K=E+Y-h;if(K<0||K>=t)continue;const q=e[V*t+K],ne=c[W*o+Y]*f[Math.abs(q-D)];M+=q*ne,L+=ne}}const I=w[T]=Math.round(M/L);A[I]++}return[w,A]}static#l(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t}static#h(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let i=-1/0,a=1/0;for(let c=0,u=s.length;c<u;c++){const h=s[c]=e[c<<2];i=Math.max(i,h),a=Math.min(a,h)}const o=255/(i-a);for(let c=0,u=s.length;c<u;c++)s[c]=(s[c]-a)*o;return s}static#u(e){let t,s=-1/0,i=-1/0;const a=e.findIndex(u=>u!==0);let o=a,c=a;for(t=a;t<256;t++){const u=e[t];u>s&&(t-o>i&&(i=t-o,c=t-1),s=u,o=t)}for(t=c-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#f(e){const t=e,{width:s,height:i}=e,{maxDim:a}=this.#e;let o=s,c=i;if(s>a||i>a){let x=s,w=i,A=Math.log2(Math.max(s,i)/a);const C=Math.floor(A);A=A===C?C-1:C;for(let T=0;T<A;T++){o=Math.ceil(x/2),c=Math.ceil(w/2);const D=new OffscreenCanvas(o,c);D.getContext("2d").drawImage(e,0,0,x,w,0,0,o,c),x=o,w=c,e!==t&&e.close(),e=D.transferToImageBitmap()}const E=Math.min(a/o,a/c);o=Math.round(o*E),c=Math.round(c*E)}const h=new OffscreenCanvas(o,c).getContext("2d",{willReadFrequently:!0});h.fillStyle="white",h.fillRect(0,0,o,c),h.filter="grayscale(1)",h.drawImage(e,0,0,e.width,e.height,0,0,o,c);const f=h.getImageData(0,0,o,c).data;return[this.#h(f),o,c]}static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:i},a,o,c,u){let h=new OffscreenCanvas(1,1),f=h.getContext("2d",{alpha:!1});const g=200,x=f.font=`${s} ${i} ${g}px ${t}`,{actualBoundingBoxLeft:w,actualBoundingBoxRight:A,actualBoundingBoxAscent:C,actualBoundingBoxDescent:E,fontBoundingBoxAscent:T,fontBoundingBoxDescent:D,width:M}=f.measureText(e),L=1.5,I=Math.ceil(Math.max(Math.abs(w)+Math.abs(A)||0,M)*L),W=Math.ceil(Math.max(Math.abs(C)+Math.abs(E)||g,Math.abs(T)+Math.abs(D)||g)*L);h=new OffscreenCanvas(I,W),f=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=x,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,I,W),f.fillStyle="black",f.fillText(e,I*(L-1)/2,W*(3-L)/2);const V=this.#h(f.getImageData(0,0,I,W).data),Y=this.#l(V),K=this.#u(Y),q=this.#i(V,I,W,K);return this.processDrawnLines({lines:{curves:q,width:I,height:W},pageWidth:a,pageHeight:o,rotation:c,innerMargin:u,mustSmooth:!0,areContours:!0})}static process(e,t,s,i,a){const[o,c,u]=this.#f(e),[h,f]=this.#c(o,c,u,Math.hypot(c,u)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),g=this.#u(f),x=this.#i(h,c,u,g);return this.processDrawnLines({lines:{curves:x,width:c,height:u},pageWidth:t,pageHeight:s,rotation:i,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:i,innerMargin:a,mustSmooth:o,areContours:c}){i%180!==0&&([t,s]=[s,t]);const{curves:u,width:h,height:f}=e,g=e.thickness??0,x=[],w=Math.min(t/h,s/f),A=w/t,C=w/s,E=[];for(const{points:D}of u){const M=o?this.#o(D):D;if(!M)continue;E.push(M);const L=M.length,I=new Float32Array(L),W=new Float32Array(3*(L===2?2:L-2));if(x.push({line:W,points:I}),L===2){I[0]=M[0]*A,I[1]=M[1]*C,W.set([NaN,NaN,NaN,NaN,I[0],I[1]],0);continue}let[V,Y,K,q]=M;V*=A,Y*=C,K*=A,q*=C,I.set([V,Y,K,q],0),W.set([NaN,NaN,NaN,NaN,V,Y],0);for(let ne=4;ne<L;ne+=2){const le=I[ne]=M[ne]*A,_e=I[ne+1]=M[ne+1]*C;W.set(ot.createBezierPoints(V,Y,K,q,le,_e),(ne-2)*3),[V,Y,K,q]=[K,q,le,_e]}}if(x.length===0)return null;const T=c?new k2:new $0;return T.build(x,t,s,1,i,c?0:g,a),{outline:T,newCurves:E,areContours:c,thickness:g,width:h,height:f}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:i,height:a}){let o=1/0,c=-1/0,u=0;for(const M of e){u+=M.length;for(let L=2,I=M.length;L<I;L++){const W=M[L]-M[L-2];o=Math.min(o,W),c=Math.max(c,W)}}let h;o>=-128&&c<=127?h=Int8Array:o>=-32768&&c<=32767?h=Int16Array:h=Int32Array;const f=e.length,g=Sb+bp*f,x=new Uint32Array(g);let w=0;x[w++]=g*Uint32Array.BYTES_PER_ELEMENT+(u-2*f)*h.BYTES_PER_ELEMENT,x[w++]=0,x[w++]=i,x[w++]=a,x[w++]=t?0:1,x[w++]=Math.max(0,Math.floor(s??0)),x[w++]=f,x[w++]=h.BYTES_PER_ELEMENT;for(const M of e)x[w++]=M.length-2,x[w++]=M[0],x[w++]=M[1];const A=new CompressionStream("deflate-raw"),C=A.writable.getWriter();await C.ready,C.write(x);const E=h.prototype.constructor;for(const M of e){const L=new E(M.length-2);for(let I=2,W=M.length;I<W;I++)L[I-2]=M[I]-M[I-2];C.write(L)}C.close();const T=await new Response(A.readable).arrayBuffer(),D=new Uint8Array(T);return D5(D)}static async decompressSignature(e){try{const t=XJ(e),{readable:s,writable:i}=new DecompressionStream("deflate-raw"),a=i.getWriter();await a.ready,a.write(t).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let o=null,c=0;for await(const M of s)o||=new Uint8Array(new Uint32Array(M.buffer,0,4)[0]),o.set(M,c),c+=M.length;const u=new Uint32Array(o.buffer,0,o.length>>2),h=u[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const f=u[2],g=u[3],x=u[4]===0,w=u[5],A=u[6],C=u[7],E=[],T=(Sb+bp*A)*Uint32Array.BYTES_PER_ELEMENT;let D;switch(C){case Int8Array.BYTES_PER_ELEMENT:D=new Int8Array(o.buffer,T);break;case Int16Array.BYTES_PER_ELEMENT:D=new Int16Array(o.buffer,T);break;case Int32Array.BYTES_PER_ELEMENT:D=new Int32Array(o.buffer,T);break}c=0;for(let M=0;M<A;M++){const L=u[bp*M+Sb],I=new Float32Array(L+2);E.push(I);for(let W=0;W<bp-1;W++)I[W]=u[bp*M+Sb+W+1];for(let W=0;W<L;W++)I[W+2]=I[W]+D[c++]}return{areContours:x,thickness:w,outlines:E,width:f,height:g}}catch(t){return Ht(`decompressSignature: ${t}`),null}}}class TN extends uP{constructor(){super(),super.updateProperties({fill:wt._defaultLineColor,"stroke-width":0})}clone(){const e=new TN;return e.updateAll(this),e}}class _N extends gv{constructor(e){super(e),super.updateProperties({stroke:wt._defaultLineColor,"stroke-width":1})}clone(){const e=new _N(this._viewParameters);return e.updateAll(this),e}}class mc extends Ct{#e=!1;#t=null;#s=null;#n=null;static _type="signature";static _editorType=Bt.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#s=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){wt.initialize(e,t),this._defaultDrawingOptions=new TN,this._defaultDrawnSignatureOptions=new _N(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return Xt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),this._drawId===null)if(this.#s){const{lines:i,mustSmooth:a,areContours:o,description:c,uuid:u,heightInPage:h}=this.#s,{rawDims:{pageWidth:f,pageHeight:g},rotation:x}=this.parent.viewport,w=Bh.processDrawnLines({lines:i,pageWidth:f,pageHeight:g,rotation:x,innerMargin:mc._INNER_MARGIN,mustSmooth:a,areContours:o});this.addSignature(w,h,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:s,width:i,height:a}=this.#s,o=Math.max(i,a),c=Bh.processDrawnLines({lines:{curves:e.map(u=>({points:u})),thickness:s,width:i,height:a},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t});return{areContours:t,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,s,i){const{x:a,y:o}=this,{outline:c}=this.#s=e;this.#e=c instanceof k2,this.description=s;let u;this.#e?u=mc.getDefaultDrawingOptions():(u=mc._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});const[,h]=this.pageDimensions;let f=t/h;f=f>=1?.5:f,this.width*=f/this.height,this.width>=1&&(f*=.9/this.width,this.width=.9),this.height=f,this.setDims(),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:s},rotation:i}=this.parent.viewport;return Bh.process(e,t,s,i,mc._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:s,pageHeight:i},rotation:a}=this.parent.viewport;return Bh.extractContoursFromText(e,t,s,i,a,mc._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:s},rotation:i}=this.parent.viewport;return Bh.processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:i,innerMargin:mc._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:t}){e?this._drawingOptions=mc.getDefaultDrawingOptions():(this._drawingOptions=mc._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":t}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:t,points:s}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":i}}=this,a=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:i});return this.addComment(a),e?(a.paths={lines:t,points:s},a.uuid=this.#n,a.isCopy=!0):a.lines=t,this.#t&&(a.accessibilityData={type:"Figure",alt:this.#t}),a}static deserializeDraw(e,t,s,i,a,o){return o.areContours?k2.deserialize(e,t,s,i,a,o):$0.deserialize(e,t,s,i,a,o)}static async deserialize(e,t,s){const i=await super.deserialize(e,t,s);return i.#e=e.areContours,i.description=e.accessibilityData?.alt||"",i.#n=e.uuid,i}}class Nq extends wt{#e=null;#t=null;#s=null;#n=null;#r=null;#i="";#a=null;#o=!1;#c=null;#l=!1;#h=!1;static _type="stamp";static _editorType=Bt.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#r=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){wt.initialize(e,t)}static isHandlingMimeForPasting(e){return wy.includes(e)}static paste(e,t){t.pasteEditor({mode:Bt.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#u(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#i=e.file.name),this.#m()}#f(){if(this.#s=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:o}=e||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:i,width:a,height:o,channels:i.length/(a*o)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),t&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}#p(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(s=>this.#u(s,!0)).finally(()=>this.#f());return}if(this.#n){const s=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromUrl(s).then(i=>this.#u(i)).finally(()=>this.#f());return}if(this.#r){const s=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromFile(s).then(i=>this.#u(i)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=wy.join(",");const t=this._uiManager._signal;this.#s=new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#u(i)}s()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:t})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#p();return}super.rebuild(),this.div!==null&&(this.#t&&this.#a===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#s||this.#e||this.#n||this.#r||this.#t||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#e?this.#m():this.#p()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:s,bitmap:i}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#t=s,i&&(this.#e=i),this.#o=!1,this.#m())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const e=200;this.#c=setTimeout(()=>{this.#c=null,this.#g()},e)}#m(){const{div:e}=this;let{width:t,height:s}=this.#e;const[i,a]=this.pageDimensions,o=.75;if(this.width)t=this.width*i,s=this.height*a;else if(t>o*i||s>o*a){const u=Math.min(o*i/t,o*a/s);t*=u,s*=u}this._uiManager.enableWaiting(!1);const c=this.#a=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),this.width=t/i,this.height=s/a,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#g(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#i&&this.div.setAttribute("aria-description",this.#i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,t,s=!1){e||(e=224);const{width:i,height:a}=this.#e,o=new Cl;let c=this.#e,u=i,h=a,f=null;if(t){if(i>t||a>t){const W=Math.min(t/i,t/a);u=Math.floor(i*W),h=Math.floor(a*W)}f=document.createElement("canvas");const x=f.width=Math.ceil(u*o.sx),w=f.height=Math.ceil(h*o.sy);this.#l||(c=this.#d(x,w));const A=f.getContext("2d");A.filter=this._uiManager.hcmFilter;let C="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":JJ.isDarkMode&&(C="#8f8f9d",E="#42414d");const T=15,D=T*o.sx,M=T*o.sy,L=new OffscreenCanvas(D*2,M*2),I=L.getContext("2d");I.fillStyle=C,I.fillRect(0,0,D*2,M*2),I.fillStyle=E,I.fillRect(0,0,D,M),I.fillRect(D,M,D,M),A.fillStyle=A.createPattern(L,"repeat"),A.fillRect(0,0,x,w),A.drawImage(c,0,0,c.width,c.height,0,0,x,w)}let g=null;if(s){let x,w;if(o.symmetric&&c.width<e&&c.height<e)x=c.width,w=c.height;else if(c=this.#e,i>e||a>e){const E=Math.min(e/i,e/a);x=Math.floor(i*E),w=Math.floor(a*E),this.#l||(c=this.#d(x,w))}const C=new OffscreenCanvas(x,w).getContext("2d",{willReadFrequently:!0});C.drawImage(c,0,0,c.width,c.height,0,0,x,w),g={width:x,height:w,data:C.getImageData(0,0,x,w).data}}return{canvas:f,width:u,height:h,imageData:g}}#d(e,t){const{width:s,height:i}=this.#e;let a=s,o=i,c=this.#e;for(;a>2*e||o>2*t;){const u=a,h=o;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const f=new OffscreenCanvas(a,o);f.getContext("2d").drawImage(c,0,0,u,h,0,0,a,o),c=f.transferToImageBitmap()}return c}#g(){const[e,t]=this.parentDimensions,{width:s,height:i}=this,a=new Cl,o=Math.ceil(s*e*a.sx),c=Math.ceil(i*t*a.sy),u=this.#a;if(!u||u.width===o&&u.height===c)return;u.width=o,u.height=c;const h=this.#l?this.#e:this.#d(o,c),f=u.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(h,0,0,h.width,h.height,0,0,o,c)}#x(e){if(e){if(this.#l){const i=this._uiManager.imageManager.getSvgUrl(this.#t);if(i)return i}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#l){const[t,s]=this.pageDimensions,i=Math.round(this.width*t*af.PDF_TO_CSS_UNITS),a=Math.round(this.height*s*af.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(i,a);return o.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,i,a),o.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,s){let i=null,a=!1;if(e instanceof lP){const{data:{rect:C,rotation:E,id:T,structParent:D,popupRef:M,richText:L,contentsObj:I,creationDate:W,modificationDate:V},container:Y,parent:{page:{pageNumber:K}},canvas:q}=e;let ne,le;q?(delete e.canvas,{id:ne,bitmap:le}=s.imageManager.getFromCanvas(Y.id,q),q.remove()):(a=!0,e._hasNoCanvas=!0);const _e=(await t._structTree.getAriaAttributes(`${dN}${T}`))?.get("aria-label")||"";i=e={annotationType:Bt.STAMP,bitmapId:ne,bitmap:le,pageIndex:K-1,rect:C.slice(0),rotation:E,annotationElementId:T,id:T,deleted:!1,accessibilityData:{decorative:!1,altText:_e},isSvg:!1,structParent:D,popupRef:M,richText:L,comment:I?.str||null,creationDate:W,modificationDate:V}}const o=await super.deserialize(e,t,s),{rect:c,bitmap:u,bitmapUrl:h,bitmapId:f,isSvg:g,accessibilityData:x}=e;a?(s.addMissingCanvas(e.id,o),o.#o=!0):f&&s.imageManager.isValidId(f)?(o.#t=f,u&&(o.#e=u)):o.#n=h,o.#l=g;const[w,A]=o.pageDimensions;return o.width=(c[2]-c[0])/w,o.height=(c[3]-c[1])/A,x&&(o.altTextData=x),o._initialData=i,e.comment&&o.setCommentData(e),o.#h=!!i,o}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(s),e)return s.bitmapUrl=this.#x(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(s.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=this.#y(s);return c.isSame?null:(c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(t===null)return s;t.stamps||=new Map;const o=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:o,serialized:s}),s.bitmap=this.#x(!1);else if(this.#l){const c=t.stamps.get(this.#t);o>c.area&&(c.area=o,c.serialized.bitmap.close(),c.serialized.bitmap=this.#x(!1))}return s}#y(e){const{pageIndex:t,accessibilityData:{altText:s}}=this._initialData,i=e.pageIndex===t,a=(e.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&a,isSameAltText:a}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class pc{#e;#t=!1;#s=null;#n=null;#r=null;#i=new Map;#a=!1;#o=!1;#c=!1;#l=null;#h=null;#u=null;#f=null;#p=null;#m=-1;#d;static _initialized=!1;static#g=new Map([Xi,EN,Nq,ti,mc].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:i,accessibilityManager:a,annotationLayer:o,drawLayer:c,textLayer:u,viewport:h,l10n:f}){const g=[...pc.#g.values()];if(!pc._initialized){pc._initialized=!0;for(const x of g)x.initialize(f,e)}e.registerEditorTypes(g),this.#d=e,this.pageIndex=t,this.div=s,this.#e=a,this.#s=o,this.viewport=h,this.#u=u,this.drawLayer=c,this._structTree=i,this.#d.addLayer(this)}get isEmpty(){return this.#i.size===0}get isInvisible(){return this.isEmpty&&this.#d.getMode()===Bt.NONE}updateToolbar(e){this.#d.updateToolbar(e)}updateMode(e=this.#d.getMode()){switch(this.#v(),e){case Bt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Bt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Bt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Bt.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const s of pc.#g.values())t.toggle(`${s._type}Editing`,e===s._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#u?.div}setEditingState(e){this.#d.setEditingState(e)}addCommands(e){this.#d.addCommands(e)}cleanUndoStack(e){this.#d.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#s?.div.classList.toggle("disabled",!e)}get#x(){return this.#i.size!==0?this.#i.values():this.#d.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#p?.abort(),this.#p=null;const e=new Set;for(const s of this.#x)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#d.removeChangedExistingAnnotation(s),e.add(s.annotationElementId));const t=this.#s;if(t)for(const s of t.getEditableAnnotations()){if(s.hide(),this.#d.isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}this.#c=!1,this.#d._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#u&&!this.#p){this.#p=new AbortController;const s=this.#d.combinedSignal(this.#p);this.#u.div.addEventListener("pointerdown",i=>{const{clientX:o,clientY:c,timeStamp:u}=i,h=this.#m;if(u-h>500){this.#m=u;return}this.#m=-1;const{classList:f}=this.div;f.toggle("getElements",!0);const g=document.elementsFromPoint(o,c);if(f.toggle("getElements",!1),!this.div.contains(g[0]))return;let x;const w=new RegExp(`^${c0}[0-9]+$`);for(const C of g)if(w.test(C.id)){x=C.id;break}if(!x)return;const A=this.#i.get(x);A?.annotationElementId===null&&(i.stopPropagation(),i.preventDefault(),A.dblclick(i))},{signal:s,capture:!0})}const e=this.#s;if(e){const s=new Map,i=new Map;for(const o of this.#x){if(o.disableEditing(),!o.annotationElementId){o.updateFakeAnnotationElement(e);continue}if(o.serialize()!==null){s.set(o.annotationElementId,o);continue}else i.set(o.annotationElementId,o);this.getEditableAnnotation(o.annotationElementId)?.show(),o.remove()}const a=e.getEditableAnnotations();for(const o of a){const{id:c}=o.data;if(this.#d.isDeletedAnnotationElement(c)){o.updateEdited({deleted:!0});continue}let u=i.get(c);if(u){u.resetAnnotationElement(o),u.show(!1),o.show();continue}u=s.get(c),u&&(this.#d.addChangedExistingAnnotation(u),u.renderAnnotationElement(o)&&u.show(!1)),o.show()}}this.#v(),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const s of pc.#g.values())t.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(e){return this.#s?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#d.getActive()!==e&&this.#d.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#u?.div&&!this.#f){this.#f=new AbortController;const e=this.#d.combinedSignal(this.#f);this.#u.div.addEventListener("pointerdown",this.#y.bind(this),{signal:e}),this.#u.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#u?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#u.div.classList.remove("highlighting"))}#y(e){this.#d.unselectAll();const{target:t}=e;if(t===this.#u.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#u.div.contains(t)){const{isMac:s}=qi.platform;if(e.button!==0||e.ctrlKey&&s)return;this.#d.showAllEditors("highlight",!0,!0),this.#u.div.classList.add("free"),this.toggleDrawing(),ti.startHighlighting(this,this.#d.direction==="ltr",{target:this.#u.div,x:e.x,y:e.y}),this.#u.div.addEventListener("pointerup",()=>{this.#u.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#d._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#d.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#i.set(e.id,e);const{annotationElementId:t}=e;t&&this.#d.isDeletedAnnotationElement(t)&&this.#d.removeDeletedAnnotationElement(e)}detach(e){this.#i.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#d.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#d.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#d.addDeletedAnnotationElement(e.annotationElementId),wt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#d.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#c),this.#d.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#r&&(e._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#d._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getEditorByUID(e){for(const t of this.#i.values())if(t.uid===e)return t;return null}getNextId(){return this.#d.getId()}get#b(){return pc.#g.get(this.#d.getMode())}combinedSignal(e){return this.#d.combinedSignal(e)}#C(e){const t=this.#b;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await this.#d.updateMode(e.mode);const{offsetX:s,offsetY:i}=this.#N(),a=this.getNextId(),o=this.#C({parent:this,id:a,x:s,y:i,uiManager:this.#d,isCentered:!0,...t});o&&this.add(o)}async deserialize(e){return await pc.#g.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#d)||null}createAndAddNewEditor(e,t,s={}){const i=this.getNextId(),a=this.#C({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:this.#d,isCentered:t,...s});return a&&this.add(a),a}get boundingClientRect(){return this.div.getBoundingClientRect()}#N(){const{x:e,y:t,width:s,height:i}=this.boundingClientRect,a=Math.max(0,e),o=Math.max(0,t),c=Math.min(window.innerWidth,e+s),u=Math.min(window.innerHeight,t+i),h=(a+c)/2-e,f=(o+u)/2-t,[g,x]=this.viewport.rotation%180===0?[h,f]:[f,h];return{offsetX:g,offsetY:x}}addNewEditor(e={}){this.createAndAddNewEditor(this.#N(),!0,e)}setSelected(e){this.#d.setSelected(e)}toggleSelected(e){this.#d.toggleSelected(e)}unselect(e){this.#d.unselect(e)}pointerup(e){const{isMac:t}=qi.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!this.#a||(this.#a=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const s=this.#d.getMode();if(s===Bt.STAMP||s===Bt.SIGNATURE){this.#d.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#d.getMode()===Bt.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:t}=qi.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#a=!0,this.#b?.isDrawer){this.startDrawingSession(e);return}const s=this.#d.getActive();this.#t=!s||s.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#d,!1,e);return}this.#d.setCurrentDrawingSession(this),this.#l=new AbortController;const t=this.#d.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#b.startDrawing(this,this.#d,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#l?(this.#d.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#b.endDrawing(e)):null}findNewParent(e,t,s){const i=this.#d.findParent(t,s);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#d.getActive()?.parent===this&&(this.#d.commitOrRemove(),this.#d.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const e of this.#i.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#i.clear(),this.#d.removeLayer(this)}#v(){for(const e of this.#i.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,Uu(this.div,e);for(const t of this.#d.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#d.commitOrRemove(),this.#v();const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,Uu(this.div,{rotation:s}),t!==s)for(const i of this.#i.values())i.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#d.viewParameters.realScale}}class Ki{#e=null;#t=new Map;#s=new Map;static#n=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const t of this.#t.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return Xt(this,"_svgFactory",new m0)}static#r(e,[t,s,i,a]){const{style:o}=e;o.top=`${100*s}%`,o.left=`${100*t}%`,o.width=`${100*i}%`,o.height=`${100*a}%`}#i(){const e=Ki._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#a(e,t){const s=Ki._svgFactory.createElement("clipPath");e.append(s);const i=`clip_${t}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const a=Ki._svgFactory.createElement("use");return s.append(a),a.setAttribute("href",`#${t}`),a.classList.add("clip"),i}#o(e,t){for(const[s,i]of Object.entries(t))i===null?e.removeAttribute(s):e.setAttribute(s,i)}draw(e,t=!1,s=!1){const i=Ki.#n++,a=this.#i(),o=Ki._svgFactory.createElement("defs");a.append(o);const c=Ki._svgFactory.createElement("path");o.append(c);const u=`path_p${this.pageIndex}_${i}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#s.set(i,c);const h=s?this.#a(o,u):null,f=Ki._svgFactory.createElement("use");return a.append(f),f.setAttribute("href",`#${u}`),this.updateProperties(a,e),this.#t.set(i,a),{id:i,clipPathId:`url(#${h})`}}drawOutline(e,t){const s=Ki.#n++,i=this.#i(),a=Ki._svgFactory.createElement("defs");i.append(a);const o=Ki._svgFactory.createElement("path");a.append(o);const c=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",c),o.setAttribute("vector-effect","non-scaling-stroke");let u;if(t){const g=Ki._svgFactory.createElement("mask");a.append(g),u=`mask_p${this.pageIndex}_${s}`,g.setAttribute("id",u),g.setAttribute("maskUnits","objectBoundingBox");const x=Ki._svgFactory.createElement("rect");g.append(x),x.setAttribute("width","1"),x.setAttribute("height","1"),x.setAttribute("fill","white");const w=Ki._svgFactory.createElement("use");g.append(w),w.setAttribute("href",`#${c}`),w.setAttribute("stroke","none"),w.setAttribute("fill","black"),w.setAttribute("fill-rule","nonzero"),w.classList.add("mask")}const h=Ki._svgFactory.createElement("use");i.append(h),h.setAttribute("href",`#${c}`),u&&h.setAttribute("mask",`url(#${u})`);const f=h.cloneNode();return i.append(f),h.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(i,e),this.#t.set(s,i),s}finalizeDraw(e,t){this.#s.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:s,bbox:i,rootClass:a,path:o}=t,c=typeof e=="number"?this.#t.get(e):e;if(c){if(s&&this.#o(c,s),i&&Ki.#r(c,i),a){const{classList:u}=c;for(const[h,f]of Object.entries(a))u.toggle(h,f)}if(o){const h=c.firstChild.firstChild;this.#o(h,o)}}}updateParent(e,t){if(t===this)return;const s=this.#t.get(e);s&&(t.#e.append(s),this.#t.delete(e),t.#t.set(e,s))}remove(e){this.#s.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#s.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:_2};globalThis.pdfjsLib={AbortException:bd,AnnotationEditorLayer:pc,AnnotationEditorParamsType:cn,AnnotationEditorType:Bt,AnnotationEditorUIManager:yd,AnnotationLayer:CN,AnnotationMode:xc,AnnotationType:ei,applyOpacity:F5,build:sP,ColorPicker:Qr,createValidAbsoluteUrl:oN,CSSConstants:L5,DOMSVGFactory:m0,DrawLayer:Ki,FeatureTest:qi,fetchData:ng,findContrastColor:z5,getDocument:yN,getFilenameFromUrl:M5,getPdfFilenameFromUrl:P5,getRGB:sg,getUuid:cN,getXfaPageViewport:O5,GlobalWorkerOptions:Fu,ImageKind:Vp,InvalidPDFException:yy,isDataScheme:Z0,isPdfFile:fv,isValidExplicitDest:U5,MathClamp:Na,noContextMenu:to,normalizeUnicode:R5,OPS:Tm,OutputScale:Cl,PasswordResponses:j5,PDFDataRangeTransport:wN,PDFDateString:vy,PDFWorker:_m,PermissionFlag:_5,PixelsPerInch:af,RenderingCancelledException:hv,renderRichText:hN,ResponseException:d0,setLayerDimensions:Uu,shadow:Xt,SignatureExtractor:Bh,stopEvent:Rs,SupportedImageMimeTypes:wy,TextLayer:h0,TouchManager:Q0,updateUrlHash:lN,Util:lt,VerbosityLevel:Y0,version:SN,XfaLayer:uN};const Aq=Object.freeze(Object.defineProperty({__proto__:null,AbortException:bd,AnnotationEditorLayer:pc,AnnotationEditorParamsType:cn,AnnotationEditorType:Bt,AnnotationEditorUIManager:yd,AnnotationLayer:CN,AnnotationMode:xc,AnnotationType:ei,CSSConstants:L5,ColorPicker:Qr,DOMSVGFactory:m0,DrawLayer:Ki,FeatureTest:qi,GlobalWorkerOptions:Fu,ImageKind:Vp,InvalidPDFException:yy,MathClamp:Na,OPS:Tm,OutputScale:Cl,PDFDataRangeTransport:wN,PDFDateString:vy,PDFWorker:_m,PasswordResponses:j5,PermissionFlag:_5,PixelsPerInch:af,RenderingCancelledException:hv,ResponseException:d0,SignatureExtractor:Bh,SupportedImageMimeTypes:wy,TextLayer:h0,TouchManager:Q0,Util:lt,VerbosityLevel:Y0,XfaLayer:uN,applyOpacity:F5,build:sP,createValidAbsoluteUrl:oN,fetchData:ng,findContrastColor:z5,getDocument:yN,getFilenameFromUrl:M5,getPdfFilenameFromUrl:P5,getRGB:sg,getUuid:cN,getXfaPageViewport:O5,isDataScheme:Z0,isPdfFile:fv,isValidExplicitDest:U5,noContextMenu:to,normalizeUnicode:R5,renderRichText:hN,setLayerDimensions:Uu,shadow:Xt,stopEvent:Rs,updateUrlHash:lN,version:SN},Symbol.toStringTag,{value:"Module"}));function hP(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=hP(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function pv(){for(var n,e,t=0,s="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=hP(n))&&(s&&(s+=" "),s+=e);return s}var Hj=Object.prototype.hasOwnProperty;function Uj(n,e,t){for(t of n.keys())if(xm(t,e))return t}function xm(n,e){var t,s,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((s=n.length)===e.length)for(;s--&&xm(n[s],e[s]););return s===-1}if(t===Set){if(n.size!==e.size)return!1;for(s of n)if(i=s,i&&typeof i=="object"&&(i=Uj(e,i),!i)||!e.has(i))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(s of n)if(i=s[0],i&&typeof i=="object"&&(i=Uj(e,i),!i)||!xm(s[1],e.get(i)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((s=n.byteLength)===e.byteLength)for(;s--&&n.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(n)){if((s=n.byteLength)===e.byteLength)for(;s--&&n[s]===e[s];);return s===-1}if(!t||typeof n=="object"){s=0;for(t in n)if(Hj.call(n,t)&&++s&&!Hj.call(e,t)||!(t in e)||!xm(n[t],e[t]))return!1;return Object.keys(e).length===s}}return n!==n&&e!==e}function ex(n){let e=!1;return{promise:new Promise((s,i)=>{n.then(a=>!e&&s(a)).catch(a=>!e&&i(a))}),cancel(){e=!0}}}const Cq=["onCopy","onCut","onPaste"],Eq=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],Tq=["onFocus","onBlur"],_q=["onInput","onInvalid","onReset","onSubmit"],jq=["onLoad","onError"],kq=["onKeyDown","onKeyPress","onKeyUp"],Rq=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],Dq=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],Mq=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],Pq=["onSelect"],Oq=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],Lq=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],Fq=["onScroll"],zq=["onWheel"],Iq=["onAnimationStart","onAnimationEnd","onAnimationIteration"],Bq=["onTransitionEnd"],Hq=["onToggle"],Uq=["onChange"],Vq=[...Cq,...Eq,...Tq,..._q,...jq,...kq,...Rq,...Dq,...Mq,...Pq,...Oq,...Lq,...Fq,...zq,...Iq,...Bq,...Uq,...Hq];function fP(n,e){const t={};for(const s of Vq){const i=n[s];i&&(e?t[s]=(a=>i(a,e(s))):t[s]=i)}return t}var Wq="Invariant failed";function $n(n,e){if(!n)throw new Error(Wq)}var Nw,Vj;function Gq(){if(Vj)return Nw;Vj=1;var n=function(){};return Nw=n,Nw}var Yq=Gq();const Ea=km(Yq),mP=R.createContext(null),Xq="noopener noreferrer nofollow";class Kq{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return $n(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){$n(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,s){e.href=t,e.rel=this.externalLinkRel||Xq,e.target=s?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{$n(this.pdfDocument),$n(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{$n(Array.isArray(t));const s=t[0];new Promise(i=>{$n(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(a=>{i(a)}).catch(()=>{$n(!1)}):typeof s=="number"?i(s):$n(!1)}).then(i=>{const a=i+1;$n(this.pdfViewer),$n(a>=1&&a<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:i,pageNumber:a})})})}goToPage(e){const t=e-1;$n(this.pdfViewer),$n(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function bm({children:n,type:e}){return r.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const Wj={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function Zq(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function jm(){return R.useReducer(Zq,{value:void 0,error:void 0})}const xv=typeof window<"u",gP=xv&&window.location.protocol==="file:";function Jq(n){return typeof n<"u"}function Mh(n){return Jq(n)&&n!==null}function Qq(n){return typeof n=="string"}function qq(n){return n instanceof ArrayBuffer}function $q(n){return $n(xv),n instanceof Blob}function R2(n){return Qq(n)&&/^data:/.test(n)}function Gj(n){$n(R2(n));const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function e$(){return xv&&window.devicePixelRatio||1}const pP="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function Yj(){Ea(!gP,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${pP}`)}function t$(){Ea(!gP,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${pP}`)}function of(n){n?.cancel&&n.cancel()}function D2(n,e){return Object.defineProperty(n,"width",{get(){return this.getViewport({scale:e}).width},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.getViewport({scale:e}).height},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.getViewport({scale:1}).width},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.getViewport({scale:1}).height},configurable:!0}),n}function xP(n){return n.name==="AbortException"||n.name==="RenderingCancelledException"}function n$(n){return new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return t(new Error("Error while reading a file."));e(s.result)},s.onerror=i=>{if(!i.target)return t(new Error("Error while reading a file."));const{error:a}=i.target;if(!a)return t(new Error("Error while reading a file."));switch(a.code){case a.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case a.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case a.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},s.readAsArrayBuffer(n)})}const{PDFDataRangeTransport:s$}=Aq,i$=(n,e)=>{switch(e){case Wj.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case Wj.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function Xj(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const a$=R.forwardRef(function({children:e,className:t,error:s="Failed to load PDF file.",externalLinkRel:i,externalLinkTarget:a,file:o,inputRef:c,imageResourcesPath:u,loading:h="Loading PDF",noData:f="No PDF file specified.",onItemClick:g,onLoadError:x,onLoadProgress:w,onLoadSuccess:A,onPassword:C=i$,onSourceError:E,onSourceSuccess:T,options:D,renderMode:M,rotate:L,scale:I,...W},V){const[Y,K]=jm(),{value:q,error:ne}=Y,[le,_e]=jm(),{value:xe,error:je}=le,U=R.useRef(new Kq),H=R.useRef([]),ee=R.useRef(void 0),he=R.useRef(void 0);o&&o!==ee.current&&Xj(o)&&(Ea(!xm(o,ee.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),ee.current=o),D&&D!==he.current&&(Ea(!xm(D,he.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),he.current=D);const ce=R.useRef({scrollPageIntoView:Ke=>{const{dest:at,pageNumber:ft,pageIndex:Gt=ft-1}=Ke;if(g){g({dest:at,pageIndex:Gt,pageNumber:ft});return}const He=H.current[Gt];if(He){He.scrollIntoView();return}Ea(!1,`An internal link leading to page ${ft} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});R.useImperativeHandle(V,()=>({linkService:U,pages:H,viewer:ce}),[]);function G(){T&&T()}function ue(){ne&&(Ea(!1,ne.toString()),E&&E(ne))}function Se(){K({type:"RESET"})}R.useEffect(Se,[o,K]);const fe=R.useCallback(async()=>{if(!o)return null;if(typeof o=="string")return R2(o)?{data:Gj(o)}:(Yj(),{url:o});if(o instanceof s$)return{range:o};if(qq(o))return{data:o};if(xv&&$q(o))return{data:await n$(o)};if($n(typeof o=="object"),$n(Xj(o)),"url"in o&&typeof o.url=="string"){if(R2(o.url)){const{url:Ke,...at}=o;return{data:Gj(Ke),...at}}Yj()}return o},[o]);R.useEffect(()=>{const Ke=ex(fe());return Ke.promise.then(at=>{K({type:"RESOLVE",value:at})}).catch(at=>{K({type:"REJECT",error:at})}),()=>{of(Ke)}},[fe,K]),R.useEffect(()=>{if(!(typeof q>"u")){if(q===!1){ue();return}G()}},[q]);function Ae(){xe&&(A&&A(xe),H.current=new Array(xe.numPages),U.current.setDocument(xe))}function Pe(){je&&(Ea(!1,je.toString()),x&&x(je))}R.useEffect(function(){_e({type:"RESET"})},[_e,q]),R.useEffect(function(){if(!q)return;const at=D?{...q,...D}:q,ft=yN(at);w&&(ft.onProgress=w),C&&(ft.onPassword=C);const Gt=ft;return Gt.promise.then(He=>{Gt.destroyed||_e({type:"RESOLVE",value:He})}).catch(He=>{Gt.destroyed||_e({type:"REJECT",error:He})}),()=>{Gt.destroy()}},[D,_e,q]),R.useEffect(()=>{if(!(typeof xe>"u")){if(xe===!1){Pe();return}Ae()}},[xe]),R.useEffect(function(){U.current.setViewer(ce.current),U.current.setExternalLinkRel(i),U.current.setExternalLinkTarget(a)},[i,a]);const Ve=R.useCallback((Ke,at)=>{H.current[Ke]=at},[]),Nt=R.useCallback(Ke=>{delete H.current[Ke]},[]),ht=R.useMemo(()=>({imageResourcesPath:u,linkService:U.current,onItemClick:g,pdf:xe,registerPage:Ve,renderMode:M,rotate:L,scale:I,unregisterPage:Nt}),[u,g,xe,Ve,M,L,I,Nt]),mt=R.useMemo(()=>fP(W,()=>xe),[W,xe]);function Qe(){function Ke(ft){return!!ft?.pdf}if(!Ke(ht))throw new Error("pdf is undefined");const at=typeof e=="function"?e(ht):e;return r.jsx(mP.Provider,{value:ht,children:at})}function Kt(){return o?xe==null?r.jsx(bm,{type:"loading",children:typeof h=="function"?h():h}):xe===!1?r.jsx(bm,{type:"error",children:typeof s=="function"?s():s}):Qe():r.jsx(bm,{type:"no-data",children:typeof f=="function"?f():f})}return r.jsx("div",{className:pv("react-pdf__Document",t),ref:c,...mt,children:Kt()})});function bP(){return R.useContext(mP)}function yP(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var s=t[0];return s||null}return function(a){for(var o=0,c=t;o<c.length;o++){var u=c[o];typeof u=="function"?u(a):u&&(u.current=a)}}}const vP=R.createContext(null);function bv(){return R.useContext(vP)}function r$(){const n=bP(),e=bv();$n(e);const t={...n,...e},{filterAnnotations:s,imageResourcesPath:i,linkService:a,onGetAnnotationsError:o,onGetAnnotationsSuccess:c,onRenderAnnotationLayerError:u,onRenderAnnotationLayerSuccess:h,page:f,pdf:g,renderForms:x,rotate:w,scale:A=1}=t;$n(g),$n(f),$n(a);const[C,E]=jm(),{value:T,error:D}=C,M=R.useRef(null);Ea(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function L(){T&&c&&c(T)}function I(){D&&(Ea(!1,D.toString()),o&&o(D))}R.useEffect(function(){E({type:"RESET"})},[E,f]),R.useEffect(function(){if(!f)return;const q=ex(f.getAnnotations()),ne=q;return q.promise.then(le=>{E({type:"RESOLVE",value:le})}).catch(le=>{E({type:"REJECT",error:le})}),()=>{of(ne)}},[E,f]),R.useEffect(()=>{if(T!==void 0){if(T===!1){I();return}L()}},[T]);function W(){h&&h()}function V(K){Ea(!1,`${K}`),u&&u(K)}const Y=R.useMemo(()=>f.getViewport({scale:A,rotation:w}),[f,w,A]);return R.useEffect(function(){if(!g||!f||!a||!T)return;const{current:q}=M;if(!q)return;const ne=Y.clone({dontFlip:!0}),le={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:g.annotationStorage,commentManager:null,div:q,l10n:null,linkService:a,page:f,structTreeLayer:null,viewport:ne},_e={annotations:s?s({annotations:T}):T,annotationStorage:g.annotationStorage,div:q,imageResourcesPath:i,linkService:a,page:f,renderForms:x,viewport:ne};q.innerHTML="";try{new CN(le).render(_e),W()}catch(xe){V(xe)}return()=>{}},[T,s,i,a,f,g,x,Y]),r.jsx("div",{className:pv("react-pdf__Page__annotations","annotationLayer"),ref:M})}const wP={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},o$=/^H(\d+)$/;function l$(n){return n in wP}function yv(n){return"children"in n}function SP(n){return yv(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function c$(n){const e={};if(yv(n)){const{role:t}=n,s=t.match(o$);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(l$(t)){const i=wP[t];i&&(e.role=i)}}return e}function NP(n){const e={};if(yv(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),SP(n)){const[t]=n.children;if(t){const s=NP(t);return{...e,...s}}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function d$(n){return n?{...c$(n),...NP(n)}:null}function AP({className:n,node:e}){const t=R.useMemo(()=>d$(e),[e]),s=R.useMemo(()=>!yv(e)||SP(e)?null:e.children.map((i,a)=>r.jsx(AP,{node:i},a)),[e]);return r.jsx("span",{className:n,...t,children:s})}function u$(){const n=bv();$n(n);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[s,i]=jm(),{value:a,error:o}=s,{customTextRenderer:c,page:u}=n;function h(){a&&t&&t(a)}function f(){o&&(Ea(!1,o.toString()),e&&e(o))}return R.useEffect(function(){i({type:"RESET"})},[i,u]),R.useEffect(function(){if(c||!u)return;const x=ex(u.getStructTree()),w=x;return x.promise.then(A=>{i({type:"RESOLVE",value:A})}).catch(A=>{i({type:"REJECT",error:A})}),()=>of(w)},[c,u,i]),R.useEffect(()=>{if(a!==void 0){if(a===!1){f();return}h()}},[a]),a?r.jsx(AP,{className:"react-pdf__Page__structTree structTree",node:a}):null}const Kj=xc;function h$(n){const e=bv();$n(e);const t={...e,...n},{_className:s,canvasBackground:i,devicePixelRatio:a=e$(),onRenderError:o,onRenderSuccess:c,page:u,renderForms:h,renderTextLayer:f,rotate:g,scale:x}=t,{canvasRef:w}=n;$n(u);const A=R.useRef(null);function C(){u&&c&&c(D2(u,x))}function E(L){xP(L)||(Ea(!1,L.toString()),o&&o(L))}const T=R.useMemo(()=>u.getViewport({scale:x*a,rotation:g}),[a,u,g,x]),D=R.useMemo(()=>u.getViewport({scale:x,rotation:g}),[u,g,x]);R.useEffect(function(){if(!u)return;u.cleanup();const{current:I}=A;if(!I)return;I.width=T.width,I.height=T.height,I.style.width=`${Math.floor(D.width)}px`,I.style.height=`${Math.floor(D.height)}px`,I.style.visibility="hidden";const W={annotationMode:h?Kj.ENABLE_FORMS:Kj.ENABLE,canvas:I,canvasContext:I.getContext("2d",{alpha:!1}),viewport:T};i&&(W.background=i);const V=u.render(W),Y=V;return V.promise.then(()=>{I.style.visibility="",C()}).catch(E),()=>of(Y)},[i,u,h,T,D]);const M=R.useCallback(()=>{const{current:L}=A;L&&(L.width=0,L.height=0)},[]);return R.useEffect(()=>M,[M]),r.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:yP(w,A),style:{display:"block",userSelect:"none"},children:f?r.jsx(u$,{}):null})}function f$(n){return"str"in n}function m$(){const n=bv();$n(n);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:s,onRenderTextLayerError:i,onRenderTextLayerSuccess:a,page:o,pageIndex:c,pageNumber:u,rotate:h,scale:f}=n;$n(o);const[g,x]=jm(),{value:w,error:A}=g,C=R.useRef(null);Ea(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function E(){w&&s&&s(w)}function T(){A&&(Ea(!1,A.toString()),t&&t(A))}R.useEffect(function(){x({type:"RESET"})},[o,x]),R.useEffect(function(){if(!o)return;const Y=ex(o.getTextContent()),K=Y;return Y.promise.then(q=>{x({type:"RESOLVE",value:q})}).catch(q=>{x({type:"REJECT",error:q})}),()=>of(K)},[o,x]),R.useEffect(()=>{if(w!==void 0){if(w===!1){T();return}E()}},[w]);const D=R.useCallback(()=>{a&&a()},[a]),M=R.useCallback(V=>{xP(V)||(Ea(!1,V.toString()),i&&i(V))},[i]);function L(){const V=C.current;V&&V.classList.add("selecting")}function I(){const V=C.current;V&&V.classList.remove("selecting")}const W=R.useMemo(()=>o.getViewport({scale:f,rotation:h}),[o,h,f]);return R.useLayoutEffect(function(){if(!o||!w)return;const{current:Y}=C;if(!Y)return;Y.innerHTML="";const K=o.streamTextContent({includeMarkedContent:!0}),q={container:Y,textContentSource:K,viewport:W},ne=new h0(q),le=ne;return ne.render().then(()=>{const _e=document.createElement("div");_e.className="endOfContent",Y.append(_e);const xe=Y.querySelectorAll('[role="presentation"]');if(e){let je=0;w.items.forEach((U,H)=>{if(!f$(U))return;const ee=xe[je];if(!ee)return;const he=e({pageIndex:c,pageNumber:u,itemIndex:H,...U});ee.innerHTML=he,je+=U.str&&U.hasEOL?2:1})}D()}).catch(M),()=>of(le)},[e,M,D,o,c,u,w,W]),r.jsx("div",{className:pv("react-pdf__Page__textContent","textLayer"),onMouseUp:I,onMouseDown:L,ref:C})}const Zj=1;function g$(n){const t={...bP(),...n},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:a,canvasRef:o,children:c,className:u,customRenderer:h,customTextRenderer:f,devicePixelRatio:g,error:x="Failed to load the page.",filterAnnotations:w,height:A,inputRef:C,loading:E="Loading page",noData:T="No page specified.",onGetAnnotationsError:D,onGetAnnotationsSuccess:M,onGetStructTreeError:L,onGetStructTreeSuccess:I,onGetTextError:W,onGetTextSuccess:V,onLoadError:Y,onLoadSuccess:K,onRenderAnnotationLayerError:q,onRenderAnnotationLayerSuccess:ne,onRenderError:le,onRenderSuccess:_e,onRenderTextLayerError:xe,onRenderTextLayerSuccess:je,pageIndex:U,pageNumber:H,pdf:ee,registerPage:he,renderAnnotationLayer:ce=!0,renderForms:G=!1,renderMode:ue="canvas",renderTextLayer:Se=!0,rotate:fe,scale:Ae=Zj,unregisterPage:Pe,width:Ve,...Nt}=t,[ht,mt]=jm(),{value:Qe,error:Kt}=ht,Ke=R.useRef(null);$n(ee);const at=Mh(H)?H-1:U??null,ft=H??(Mh(U)?U+1:null),Gt=fe??(Qe?Qe.rotate:null),He=R.useMemo(()=>{if(!Qe)return null;let an=1;const Lt=Ae??Zj;if(Ve||A){const ts=Qe.getViewport({scale:1,rotation:Gt});Ve?an=Ve/ts.width:A&&(an=A/ts.height)}return Lt*an},[A,Qe,Gt,Ae,Ve]);R.useEffect(function(){return()=>{Mh(at)&&i&&Pe&&Pe(at)}},[i,ee,at,Pe]);function Je(){if(K){if(!Qe||!He)return;K(D2(Qe,He))}if(i&&he){if(!Mh(at)||!Ke.current)return;he(at,Ke.current)}}function Ie(){Kt&&(Ea(!1,Kt.toString()),Y&&Y(Kt))}R.useEffect(function(){mt({type:"RESET"})},[mt,ee,at]),R.useEffect(function(){if(!ee||!ft)return;const Lt=ex(ee.getPage(ft)),ts=Lt;return Lt.promise.then(ns=>{mt({type:"RESOLVE",value:ns})}).catch(ns=>{mt({type:"REJECT",error:ns})}),()=>of(ts)},[mt,ee,ft]),R.useEffect(()=>{if(Qe!==void 0){if(Qe===!1){Ie();return}Je()}},[Qe,He]);const tt=R.useMemo(()=>Mh(at)&&ft&&Mh(Gt)&&Mh(He)?{_className:s,canvasBackground:a,customTextRenderer:f,devicePixelRatio:g,filterAnnotations:w,onGetAnnotationsError:D,onGetAnnotationsSuccess:M,onGetStructTreeError:L,onGetStructTreeSuccess:I,onGetTextError:W,onGetTextSuccess:V,onRenderAnnotationLayerError:q,onRenderAnnotationLayerSuccess:ne,onRenderError:le,onRenderSuccess:_e,onRenderTextLayerError:xe,onRenderTextLayerSuccess:je,page:Qe,pageIndex:at,pageNumber:ft,renderForms:G,renderTextLayer:Se,rotate:Gt,scale:He}:null,[s,a,f,g,w,D,M,L,I,W,V,q,ne,le,_e,xe,je,Qe,at,ft,G,Se,Gt,He]),De=R.useMemo(()=>fP(Nt,()=>Qe&&(He?D2(Qe,He):void 0)),[Nt,Qe,He]),Fe=`${at}@${He}/${Gt}`;function $e(){switch(ue){case"custom":return $n(h),r.jsx(h,{},`${Fe}_custom`);case"none":return null;default:return r.jsx(h$,{canvasRef:o},`${Fe}_canvas`)}}function nt(){return Se?r.jsx(m$,{},`${Fe}_text`):null}function qe(){return ce?r.jsx(r$,{},`${Fe}_annotations`):null}function St(){function an(ts){return!!ts?.page}if(!an(tt))throw new Error("page is undefined");const Lt=typeof c=="function"?c(tt):c;return r.jsxs(vP.Provider,{value:tt,children:[$e(),nt(),qe(),Lt]})}function un(){return ft?ee===null||Qe===void 0||Qe===null?r.jsx(bm,{type:"loading",children:typeof E=="function"?E():E}):ee===!1||Qe===!1?r.jsx(bm,{type:"error",children:typeof x=="function"?x():x}):St():r.jsx(bm,{type:"no-data",children:typeof T=="function"?T():T})}return r.jsx("div",{className:pv(s,u),"data-page-number":ft,ref:yP(C,Ke),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${He}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:a||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...De,children:un()})}t$();Fu.workerSrc="pdf.worker.mjs";const p$=({pageNumber:n,scale:e,children:t})=>{const{setNodeRef:s,isOver:i}=sN({id:`page-${n}`,data:{type:"pdf-page",pageNumber:n}});return r.jsxs("div",{ref:s,className:`relative mb-6 transition-colors shadow-md ${i?"ring-2 ring-indigo-500 ring-offset-2":""}`,style:{width:"fit-content",margin:"0 auto 1.5rem auto"},children:[r.jsx(g$,{pageNumber:n,scale:e,renderTextLayer:!1,renderAnnotationLayer:!1,className:"shadow-sm",loading:r.jsx("div",{className:"w-[600px] h-[800px] bg-white animate-pulse rounded-lg flex items-center justify-center",children:r.jsxs("span",{className:"text-slate-400 font-medium",children:["Loading Page ",n,"..."]})})}),t]})};Fu.workerSrc=`//unpkg.com/pdfjs-dist@${SN}/build/pdf.worker.min.mjs`;const Jj=({pdfUrl:n,signatures:e=[],onUpdateSignature:t,onRemoveSignature:s,onEditSignature:i,readOnly:a=!1})=>{const[o,c]=R.useState(null),[u,h]=R.useState(1),[f,g]=R.useState(0),x=({numPages:E})=>{c(E)},w=()=>h(E=>Math.min(E+.1,2)),A=()=>h(E=>Math.max(E-.1,.5)),C=e.reduce((E,T)=>{const D=T.pageNumber||1;return E[D]||(E[D]=[]),E[D].push(T),E},{});return r.jsxs("div",{className:"relative flex flex-col items-center bg-slate-100/50 min-h-[600px] rounded-xl border border-slate-200 overflow-hidden",children:[r.jsxs("div",{className:"sticky top-0 z-30 w-full bg-white/80 backdrop-blur-md border-b border-slate-200 p-2 flex items-center justify-between px-4",children:[r.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:o?`${o} Pages`:"Loading Document..."}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:A,className:"p-1.5 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:"Zoom Out",children:r.jsx(Um,{size:18})}),r.jsxs("span",{className:"text-xs font-mono font-medium text-slate-600 w-12 text-center",children:[Math.round(u*100),"%"]}),r.jsx("button",{onClick:w,className:"p-1.5 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:"Zoom In",children:r.jsx(Hm,{size:18})}),r.jsx("div",{className:"w-px h-4 bg-slate-300 mx-1"}),r.jsx("button",{onClick:()=>g(E=>E+90),className:"p-1.5 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:"Rotate",children:r.jsx(IU,{size:18})})]})]}),r.jsx("div",{className:"flex-1 w-full overflow-auto p-8 flex justify-center",children:r.jsx(a$,{file:n,onLoadSuccess:x,className:"flex flex-col items-center",loading:r.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[r.jsx("div",{className:"w-10 h-10 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin mb-4"}),r.jsx("p",{className:"text-slate-500 font-medium",children:"Loading PDF..."})]}),error:r.jsxs("div",{className:"text-center py-20",children:[r.jsx("p",{className:"text-red-500 font-medium",children:"Failed to load PDF."}),r.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Please ensure it is a valid PDF file."})]}),children:Array.from(new Array(o),(E,T)=>{const D=T+1,M=C[D]||[];return r.jsx(p$,{pageNumber:D,scale:u,children:M.map(L=>r.jsx(A5,{id:L.id,data:L.metadata,left:L.position.x,top:L.position.y,onEdit:()=>i(L),onDelete:()=>s(L.id),readOnly:a},L.id))},`page_${D}`)})})})]})};function jN(n,e,t){const s=n.slice();return s.splice(t<0?s.length+t:t,0,s.splice(e,1)[0]),s}function x$(n,e){return n.reduce((t,s,i)=>{const a=e.get(s);return a&&(t[i]=a),t},Array(n.length))}function Nb(n){return n!==null&&n>=0}function b$(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function y$(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const CP=n=>{let{rects:e,activeIndex:t,overIndex:s,index:i}=n;const a=jN(e,s,t),o=e[i],c=a[i];return!c||!o?null:{x:c.left-o.left,y:c.top-o.top,scaleX:c.width/o.width,scaleY:c.height/o.height}},Ab={scaleX:1,scaleY:1},EP=n=>{var e;let{activeIndex:t,activeNodeRect:s,index:i,rects:a,overIndex:o}=n;const c=(e=a[t])!=null?e:s;if(!c)return null;if(i===t){const h=a[o];return h?{x:0,y:t<o?h.top+h.height-(c.top+c.height):h.top-c.top,...Ab}:null}const u=v$(a,i,t);return i>t&&i<=o?{x:0,y:-c.height-u,...Ab}:i<t&&i>=o?{x:0,y:c.height+u,...Ab}:{x:0,y:0,...Ab}};function v$(n,e,t){const s=n[e],i=n[e-1],a=n[e+1];return s?t<e?i?s.top-(i.top+i.height):a?a.top-(s.top+s.height):0:a?a.top-(s.top+s.height):i?s.top-(i.top+i.height):0:0}const TP="Sortable",_P=gt.createContext({activeIndex:-1,containerId:TP,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:CP,disabled:{draggable:!1,droppable:!1}});function jP(n){let{children:e,id:t,items:s,strategy:i=CP,disabled:a=!1}=n;const{active:o,dragOverlay:c,droppableRects:u,over:h,measureDroppableContainers:f}=S5(),g=F0(TP,t),x=c.rect!==null,w=R.useMemo(()=>s.map(W=>typeof W=="object"&&"id"in W?W.id:W),[s]),A=o!=null,C=o?w.indexOf(o.id):-1,E=h?w.indexOf(h.id):-1,T=R.useRef(w),D=!b$(w,T.current),M=E!==-1&&C===-1||D,L=y$(a);Nl(()=>{D&&A&&f(w)},[D,w,A,f]),R.useEffect(()=>{T.current=w},[w]);const I=R.useMemo(()=>({activeIndex:C,containerId:g,disabled:L,disableTransforms:M,items:w,overIndex:E,useDragOverlay:x,sortedRects:x$(w,u),strategy:i}),[C,g,L.draggable,L.droppable,M,w,E,u,x,i]);return gt.createElement(_P.Provider,{value:I},e)}const w$=n=>{let{id:e,items:t,activeIndex:s,overIndex:i}=n;return jN(t,s,i).indexOf(e)},S$=n=>{let{containerId:e,isSorting:t,wasDragging:s,index:i,items:a,newIndex:o,previousItems:c,previousContainerId:u,transition:h}=n;return!h||!s||c!==a&&i===o?!1:t?!0:o!==i&&e===u},N$={duration:200,easing:"ease"},kP="transform",A$=Sc.Transition.toString({property:kP,duration:0,easing:"linear"}),C$={roleDescription:"sortable"};function E$(n){let{disabled:e,index:t,node:s,rect:i}=n;const[a,o]=R.useState(null),c=R.useRef(t);return Nl(()=>{if(!e&&t!==c.current&&s.current){const u=i.current;if(u){const h=Jm(s.current,{ignoreTransform:!0}),f={x:u.left-h.left,y:u.top-h.top,scaleX:u.width/h.width,scaleY:u.height/h.height};(f.x||f.y)&&o(f)}}t!==c.current&&(c.current=t)},[e,t,s,i]),R.useEffect(()=>{a&&o(null)},[a]),a}function RP(n){let{animateLayoutChanges:e=S$,attributes:t,disabled:s,data:i,getNewIndex:a=w$,id:o,strategy:c,resizeObserverConfig:u,transition:h=N$}=n;const{items:f,containerId:g,activeIndex:x,disabled:w,disableTransforms:A,sortedRects:C,overIndex:E,useDragOverlay:T,strategy:D}=R.useContext(_P),M=T$(s,w),L=f.indexOf(o),I=R.useMemo(()=>({sortable:{containerId:g,index:L,items:f},...i}),[g,i,L,f]),W=R.useMemo(()=>f.slice(f.indexOf(o)),[f,o]),{rect:V,node:Y,isOver:K,setNodeRef:q}=sN({id:o,data:I,disabled:M.droppable,resizeObserverConfig:{updateMeasurementsFor:W,...u}}),{active:ne,activatorEvent:le,activeNodeRect:_e,attributes:xe,setNodeRef:je,listeners:U,isDragging:H,over:ee,setActivatorNodeRef:he,transform:ce}=sv({id:o,data:I,attributes:{...C$,...t},disabled:M.draggable}),G=RX(q,je),ue=!!ne,Se=ue&&!A&&Nb(x)&&Nb(E),fe=!T&&H,Ae=fe&&Se?ce:null,Ve=Se?Ae??(c??D)({rects:C,activeNodeRect:_e,activeIndex:x,overIndex:E,index:L}):null,Nt=Nb(x)&&Nb(E)?a({id:o,items:f,activeIndex:x,overIndex:E}):L,ht=ne?.id,mt=R.useRef({activeId:ht,items:f,newIndex:Nt,containerId:g}),Qe=f!==mt.current.items,Kt=e({active:ne,containerId:g,isDragging:H,isSorting:ue,id:o,index:L,items:f,newIndex:mt.current.newIndex,previousItems:mt.current.items,previousContainerId:mt.current.containerId,transition:h,wasDragging:mt.current.activeId!=null}),Ke=E$({disabled:!Kt,index:L,node:Y,rect:V});return R.useEffect(()=>{ue&&mt.current.newIndex!==Nt&&(mt.current.newIndex=Nt),g!==mt.current.containerId&&(mt.current.containerId=g),f!==mt.current.items&&(mt.current.items=f)},[ue,Nt,g,f]),R.useEffect(()=>{if(ht===mt.current.activeId)return;if(ht!=null&&mt.current.activeId==null){mt.current.activeId=ht;return}const ft=setTimeout(()=>{mt.current.activeId=ht},50);return()=>clearTimeout(ft)},[ht]),{active:ne,activeIndex:x,attributes:xe,data:I,rect:V,index:L,newIndex:Nt,items:f,isOver:K,isSorting:ue,isDragging:H,listeners:U,node:Y,overIndex:E,over:ee,setNodeRef:G,setActivatorNodeRef:he,setDroppableNodeRef:q,setDraggableNodeRef:je,transform:Ke??Ve,transition:at()};function at(){if(Ke||Qe&&mt.current.newIndex===L)return A$;if(!(fe&&!$y(le)||!h)&&(ue||Kt))return Sc.Transition.toString({...h,property:kP})}}function T$(n,e){var t,s;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n?.draggable)!=null?t:e.draggable,droppable:(s=n?.droppable)!=null?s:e.droppable}}kn.Down,kn.Right,kn.Up,kn.Left;const _$=({signer:n,onRemove:e,onEdit:t,isEditing:s,onUpdate:i,readOnly:a})=>{const{attributes:o,listeners:c,setNodeRef:u,transform:h,transition:f,isDragging:g}=RP({id:n.id}),x={transform:Sc.Transform.toString(h),transition:f,opacity:g?.4:1};return r.jsx("div",{ref:u,style:x,className:`group p-4 bg-slate-50 hover:bg-white rounded-xl border border-slate-200 hover:border-indigo-200 hover:shadow-md transition-all ${g?"shadow-lg ring-2 ring-indigo-500/20":""} ${a?"opacity-70 cursor-default":""}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[!a&&r.jsx("div",{...o,...c,className:"cursor-move text-slate-400 hover:text-indigo-500 transition-colors p-1",children:r.jsx(By,{size:18})}),r.jsx("div",{className:"w-8 h-8 bg-indigo-100 text-indigo-600 rounded-lg flex items-center justify-center font-bold text-sm flex-shrink-0",children:n.order}),r.jsx("div",{className:"flex-1 min-w-0",children:s&&!a?r.jsxs("div",{className:"space-y-2",children:[r.jsx("input",{type:"text",defaultValue:n.name,onBlur:w=>i(n.id,{name:w.target.value}),className:"w-full px-2 py-1 text-sm border border-slate-200 rounded focus:border-indigo-500 outline-none",placeholder:"Name",autoFocus:!0,disabled:a}),r.jsx("input",{type:"email",defaultValue:n.email,onBlur:w=>i(n.id,{email:w.target.value}),className:"w-full px-2 py-1 text-sm border border-slate-200 rounded focus:border-indigo-500 outline-none",placeholder:"Email",disabled:a})]}):r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-slate-800 truncate",children:n.name||"Unnamed Signer"}),r.jsx("p",{className:"text-xs text-slate-500 truncate",children:n.email||"No email provided"})]})}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${n.role==="signer"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:n.role}),!a&&r.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx("button",{onClick:()=>t(s?null:n.id),className:`p-1.5 rounded transition-colors ${s?"bg-indigo-100 text-indigo-600":"hover:bg-blue-50 text-slate-400 hover:text-blue-600"}`,title:"Edit",children:r.jsx(KD,{size:14})}),r.jsx("button",{onClick:()=>e(n.id),className:"p-1.5 hover:bg-red-50 text-slate-400 hover:text-red-600 rounded transition-colors",title:"Remove",children:r.jsx(ko,{size:14})})]})]})})},j$=({signers:n,onUpdateSigners:e,readOnly:t=!1})=>{const[s,i]=gt.useState(null),a=Zm(Nc(Xu),Nc(eN)),o=h=>{const{active:f,over:g}=h;if(f.id!==g.id){const x=n.findIndex(T=>T.id===f.id),w=n.findIndex(T=>T.id===g.id),A=[...n],[C]=A.splice(x,1);A.splice(w,0,C);const E=A.map((T,D)=>({...T,order:D+1}));e(E)}},c=(h,f)=>{e(n.map(g=>g.id===h?{...g,...f}:g))},u=h=>{const f=n.filter(g=>g.id!==h).map((g,x)=>({...g,order:x+1}));e(f)};return r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Signers"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Drag to reorder signing sequence"})]}),r.jsxs("div",{className:"bg-indigo-50 text-indigo-600 px-3 py-1 rounded-full text-xs font-bold border border-indigo-100",children:[n.length," ",n.length===1?"Person":"People"]})]}),r.jsx("div",{className:"space-y-4",children:n.length===0?r.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-slate-200 rounded-xl bg-slate-50/50",children:[r.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center mx-auto mb-3 shadow-sm border border-slate-100",children:r.jsx(Mo,{size:20,className:"text-slate-400"})}),r.jsx("p",{className:"text-slate-600 font-medium text-sm",children:"No signers yet"}),r.jsx("p",{className:"text-xs text-slate-400 mt-1 max-w-[200px] mx-auto",children:"Drag a signature field onto the document to add a signer automatically."})]}):r.jsx(Qm,{sensors:a,collisionDetection:r5,onDragEnd:o,children:r.jsx(jP,{items:n.map(h=>h.id),strategy:EP,children:r.jsx("div",{className:"space-y-3",children:n.map(h=>r.jsx(_$,{signer:h,onRemove:u,onEdit:i,isEditing:s===h.id,onUpdate:c,readOnly:t},h.id))})})})}),n.length>0&&r.jsx("div",{className:"mt-6 p-4 bg-slate-50/50 rounded-xl border border-slate-200",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Bm,{size:16,className:"text-slate-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"text-xs text-slate-500 leading-relaxed",children:[r.jsx("span",{className:"font-semibold text-slate-700",children:"Sequential Signing:"})," Signers will receive the document in the order shown above (",1," to ",n.length,"). Drag items to change the sequence."]})]})})]})},k$=({type:n,icon:e,label:t})=>{const{attributes:s,listeners:i,setNodeRef:a,isDragging:o}=sv({id:`toolbar-${n}`,data:{type:"toolbar-item",fieldType:n}});return r.jsxs("div",{ref:a,...i,...s,className:`
                flex items-center gap-3 p-3 rounded-lg border border-slate-200 bg-white 
                cursor-grab active:cursor-grabbing hover:border-indigo-300 hover:shadow-sm transition-all
                ${o?"opacity-50 border-indigo-500 ring-2 ring-indigo-500/20":""}
            `,style:{touchAction:"none"},children:[r.jsx("div",{className:`p-2 rounded-md ${o?"bg-indigo-100 text-indigo-600":"bg-slate-100 text-slate-500"}`,children:r.jsx(e,{size:18})}),r.jsx("span",{className:"text-sm font-medium text-slate-700",children:t})]})},R$=()=>r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-4 px-1",children:"Signature Tools"}),r.jsx(k$,{type:"signature",icon:cf,label:"Signature Field"}),r.jsx("div",{className:"mt-4 p-3 bg-indigo-50 rounded-lg text-xs text-indigo-700 border border-indigo-100",children:r.jsx("p",{children:"Drag fields onto the document to request information."})})]}),D$=()=>{const n=Zm(Nc(Xu,{activationConstraint:{distance:8}})),[e,t]=R.useState(1),[s,i]=R.useState(null),[a,o]=R.useState(null),[c,u]=R.useState([]),[h,f]=R.useState([]),[g,x]=R.useState([]),[w,A]=R.useState(!1),[C,E]=R.useState(null),[T,D]=R.useState(null),[M,L]=R.useState(null),[I,W]=R.useState(!1),V=R.useRef(null),Y=[{id:1,title:"Upload & Place",icon:Sm,description:"Prepare document"},{id:2,title:"Review & Send",icon:ny,description:"Finalize and send"}],K=H=>{i(H);const ee=URL.createObjectURL(H);o(ee)},q=H=>{D(H.active.id),L(H.active.data.current)},ne=H=>{const{active:ee,over:he}=H;if(he&&he.id.startsWith("page-")){const ce=parseInt(he.id.replace("page-","")),G=ee.rect.current.translated,ue=he.rect;if(G&&ue){const Se=G.left-ue.left,fe=G.top-ue.top,Ae=Se/ue.width*100,Pe=fe/ue.height*100;if(ee.data.current.type==="toolbar-item"){const Ve={id:`sig-${Date.now()}`,type:ee.data.current.fieldType,position:{x:Ae,y:Pe},pageNumber:ce,metadata:{signeeName:"",signeeEmail:"",type:"all",required:!0,order:h.length+1}};f([...h,Ve]),E(Ve),A(!0)}else ee.data.current.type==="signature-field"&&f(h.map(Ve=>Ve.id===ee.id?{...Ve,pageNumber:ce,position:{x:Ae,y:Pe}}:Ve))}}D(null)},le=H=>{f(h.map(ce=>ce.id===C.id?{...ce,metadata:H}:ce));const{signeeName:ee,signeeEmail:he}=H;if(ee&&he&&!c.find(G=>G.email.toLowerCase()===he.trim().toLowerCase())){const G={id:`signer-${Date.now()}`,name:ee,email:he,role:"signer",order:c.length+1};u(ue=>[...ue,G])}},_e=H=>{f(h.filter(ee=>ee.id!==H))},xe=H=>{E(H),A(!0)},je=()=>{if(h.length===0){alert("Please add at least one signature field");return}const H=new Set(h.map(ce=>ce.metadata?.signeeEmail?.toLowerCase()?.trim()).filter(Boolean)),he=c.filter(ce=>ce.email&&H.has(ce.email.toLowerCase().trim())).map((ce,G)=>({...ce,order:G+1}));u(he),t(2)},U=()=>{const H=c.length>0?c:h.map(he=>he.metadata),ee=[...new Set(H.map(he=>he.email||he.signeeEmail))];ee.length>0&&alert(` sent to: 
${ee.filter(Boolean).join(`
`)}`),alert("Document Sent Successfully!")};return r.jsxs("div",{className:"max-w-7xl mx-auto h-[calc(100vh-80px)] flex flex-col",children:[r.jsx(cv,{title:"E-Signature Module",subtitle:"Manage your documents and signers.",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex items-center gap-1 bg-slate-100 p-1 rounded-lg",children:Y.map((H,ee)=>r.jsxs("div",{className:`
                                    flex items-center gap-2 px-3 py-1.5 rounded-md text-sm font-medium transition-all
                                    ${e===H.id?"bg-white text-indigo-600 shadow-sm":"text-slate-500"}
                                    ${e>H.id?"text-indigo-600":""}
                                `,children:[r.jsx(H.icon,{size:14}),r.jsx("span",{children:H.title})]},H.id))}),e===1&&s&&r.jsx("button",{onClick:()=>i(null),className:"text-sm text-red-600 hover:text-red-700 font-medium px-3 py-1.5 hover:bg-red-50 rounded-md transition-colors",children:"Replace File"})]})}),r.jsx("div",{className:"flex-1 flex overflow-hidden bg-slate-50 border border-slate-200 rounded-xl shadow-sm mb-6 relative",children:r.jsxs(Qm,{sensors:n,onDragStart:q,onDragEnd:ne,children:[e===1&&r.jsxs(r.Fragment,{children:[s&&r.jsxs("div",{className:"w-72 bg-white border-r border-slate-200 flex flex-col z-20",children:[r.jsx("div",{className:"p-4 border-b border-slate-100",children:r.jsx("h3",{className:"text-sm font-bold text-slate-800 uppercase tracking-wider",children:"Tools"})}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[r.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Drag fields to place them."}),r.jsx(R$,{}),r.jsx("div",{className:"mt-6 pt-6 border-t border-slate-100",children:r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-slate-600",children:"Fields Added"}),r.jsx("span",{className:"font-bold text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded text-xs",children:h.length})]})})]}),r.jsx("div",{className:"p-4 border-t border-slate-200 bg-slate-50",children:r.jsxs("button",{onClick:je,disabled:h.length===0,className:"w-full flex items-center justify-center gap-2 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg shadow-sm transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx("span",{children:"Review & Send"}),r.jsx(br,{size:16})]})})]}),r.jsx("div",{className:"flex-1 bg-slate-100/50 relative overflow-hidden flex flex-col",children:s?r.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-300 p-8 flex justify-center bg-slate-100",children:r.jsx("div",{className:"bg-white shadow-sm border border-slate-200 h-fit",children:r.jsx("div",{ref:V,className:"relative",children:r.jsx(Jj,{pdfUrl:a,signatures:h,onUpdateSignature:le,onRemoveSignature:_e,onEditSignature:xe})})})}):r.jsx("div",{className:"w-full h-full p-8 flex items-center justify-center",children:r.jsx("div",{className:"max-w-xl w-full",children:r.jsx(FJ,{onFileUpload:K})})})})]}),e===2&&r.jsxs("div",{className:"w-full h-full flex bg-slate-50",children:[r.jsxs("div",{className:"w-96 border-r border-slate-200 bg-white flex flex-col",children:[r.jsxs("div",{className:"p-5 border-b border-slate-100",children:[r.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"Review Signers"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Verify details before sending."})]}),r.jsx("div",{className:"flex-1 overflow-y-auto flex flex-col p-2",children:r.jsx(j$,{signers:c,onUpdateSigners:u,readOnly:!0})}),r.jsxs("div",{className:"p-5 border-t border-slate-200 bg-slate-50 space-y-3",children:[r.jsxs("button",{onClick:U,className:"w-full flex items-center justify-center gap-2 py-3 bg-emerald-600 hover:bg-emerald-700 text-white font-bold rounded-lg shadow-sm transition-all text-sm",children:[r.jsx(ny,{size:18}),r.jsx("span",{children:"Send Document"})]}),r.jsx("button",{onClick:()=>t(1),className:"w-full py-2 text-slate-500 font-medium hover:text-slate-700 text-sm",children:"Back to Edit"})]})]}),r.jsx("div",{className:"flex-1 bg-slate-100/50 relative overflow-hidden flex flex-col",children:r.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-300 p-8 flex justify-center bg-slate-100",children:r.jsx("div",{className:"bg-white shadow-sm border border-slate-200 h-fit",children:r.jsx(Jj,{pdfUrl:a,signatures:h,readOnly:!0,onUpdateSignature:()=>{},onRemoveSignature:()=>{},onEditSignature:()=>{}})})})})]}),r.jsx(iv,{dropAnimation:null,children:T?M?.type==="toolbar-item"?r.jsxs("div",{className:"w-48 px-4 py-3 bg-indigo-600 text-white rounded-lg shadow-xl flex items-center gap-2 opacity-90 cursor-grabbing",children:[r.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),r.jsx("span",{className:"font-medium text-sm",children:"Place Field"})]}):M?.type==="signature-field"?r.jsx("div",{style:{transform:"none"},children:r.jsx(N5,{data:M,isSelected:!0,isDragging:!0})}):null:null})]})}),r.jsx(lv,{isOpen:w,onClose:()=>{A(!1),E(null)},onSave:le,initialData:C?.metadata})]})},M$=()=>{const[n,e]=R.useState([]),[t,s]=R.useState(!0),[i,a]=R.useState(""),[o,c]=R.useState("all");R.useEffect(()=>{setTimeout(()=>{e([{id:"1",title:"NDA - TechSynchronic & Client A",status:"completed",signers:[{name:"John Doe",email:"john@example.com",signed:!0},{name:"Jane Smith",email:"jane@techsynchronic.com",signed:!0}],createdAt:"2024-03-15T10:00:00Z",updatedAt:"2024-03-16T14:30:00Z"},{id:"2",title:"Service Agreement - Q2 Project",status:"pending",signers:[{name:"Mike Ross",email:"mike@pearman.com",signed:!0},{name:"Harvey Specter",email:"harvey@pearman.com",signed:!1}],createdAt:"2024-03-20T09:15:00Z",updatedAt:"2024-03-20T09:15:00Z"},{id:"3",title:"Freelance Contract - Design Work",status:"draft",signers:[],createdAt:"2024-03-25T11:45:00Z",updatedAt:"2024-03-25T12:00:00Z"}]),s(!1)},800)},[]);const u=n.filter(f=>{const g=f.title.toLowerCase().includes(i.toLowerCase()),x=o==="all"||f.status===o;return g&&x}),h=f=>{switch(f){case"completed":return r.jsxs("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-medium bg-emerald-100 text-emerald-700 border border-emerald-200 flex items-center gap-1 w-fit",children:[r.jsx(br,{size:12})," Completed"]});case"pending":return r.jsxs("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-700 border border-amber-200 flex items-center gap-1 w-fit",children:[r.jsx(Xa,{size:12})," In Progress"]});case"draft":return r.jsxs("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-700 border border-slate-200 flex items-center gap-1 w-fit",children:[r.jsx(ls,{size:12})," Draft"]});default:return r.jsx("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-700 w-fit",children:f})}};return r.jsxs("div",{className:"p-8 max-w-7xl mx-auto space-y-8",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Signature Documents"}),r.jsx("p",{className:"text-slate-500 mt-1",children:"Manage and track all documents sent for signature"})]}),r.jsxs(Vt,{to:"/signatures",className:"flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-all shadow-sm shadow-indigo-200 hover:shadow-md active:transform active:scale-95",children:[r.jsx(df,{size:18}),"New Document"]})]}),r.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col md:flex-row gap-4 items-center justify-between",children:[r.jsxs("div",{className:"relative w-full md:w-96",children:[r.jsx(qp,{className:"absolute left-3 top-2.5 text-slate-400",size:18}),r.jsx("input",{type:"text",placeholder:"Search documents...",value:i,onChange:f=>a(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition-all"})]}),r.jsx("div",{className:"flex items-center gap-2 w-full md:w-auto overflow-x-auto pb-2 md:pb-0",children:["all","pending","completed","draft"].map(f=>r.jsx("button",{onClick:()=>c(f),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors capitalize whitespace-nowrap ${o===f?"bg-slate-800 text-white":"bg-slate-50 text-slate-600 hover:bg-slate-100"}`,children:f},f))})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:t?r.jsx("div",{className:"p-12 flex justify-center",children:r.jsx("div",{className:"w-8 h-8 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"})}):u.length>0?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left",children:[r.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Document"}),r.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Signers"}),r.jsx("th",{className:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Last Activity"}),r.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:u.map(f=>r.jsxs(ze.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-slate-50/50 transition-colors group",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-indigo-50 text-indigo-600 rounded-lg flex items-center justify-center",children:r.jsx(ls,{size:20})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-800",children:f.title}),r.jsxs("p",{className:"text-xs text-slate-500",children:["ID: #",f.id]})]})]})}),r.jsx("td",{className:"px-6 py-4",children:h(f.status)}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("div",{className:"flex -space-x-2 overflow-hidden",children:f.signers.length>0?f.signers.map((g,x)=>r.jsx("div",{className:`w-8 h-8 rounded-full border-2 border-white flex items-center justify-center text-xs font-medium text-white ${g.signed?"bg-emerald-500":"bg-slate-400"}`,title:`${g.name} (${g.signed?"Signed":"Pending"})`,children:g.name.charAt(0)},x)):r.jsx("span",{className:"text-sm text-slate-400 italic",children:"No signers"})})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[r.jsx(Gu,{size:14,className:"text-slate-400"}),new Date(f.updatedAt).toLocaleDateString()]})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx("button",{className:"p-2 hover:bg-slate-100 rounded-lg text-slate-500 hover:text-indigo-600 transition-colors",title:"View",children:r.jsx(jo,{size:16})}),r.jsx("button",{className:"p-2 hover:bg-slate-100 rounded-lg text-slate-500 hover:text-indigo-600 transition-colors",title:"Download",children:r.jsx(wl,{size:16})}),r.jsx("button",{className:"p-2 hover:bg-slate-100 rounded-lg text-slate-500 hover:text-red-600 transition-colors",title:"Delete",children:r.jsx(ko,{size:16})})]})})]},f.id))})]})}):r.jsxs("div",{className:"p-12 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(ls,{size:32,className:"text-slate-300"})}),r.jsx("h3",{className:"text-lg font-medium text-slate-900",children:"No documents found"}),r.jsx("p",{className:"text-slate-500 mt-1",children:"Try adjusting your search or filters"})]})})]})},la=[];for(let n=0;n<256;++n)la.push((n+256).toString(16).slice(1));function P$(n,e=0){return(la[n[e+0]]+la[n[e+1]]+la[n[e+2]]+la[n[e+3]]+"-"+la[n[e+4]]+la[n[e+5]]+"-"+la[n[e+6]]+la[n[e+7]]+"-"+la[n[e+8]]+la[n[e+9]]+"-"+la[n[e+10]]+la[n[e+11]]+la[n[e+12]]+la[n[e+13]]+la[n[e+14]]+la[n[e+15]]).toLowerCase()}let Aw;const O$=new Uint8Array(16);function L$(){if(!Aw){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Aw=crypto.getRandomValues.bind(crypto)}return Aw(O$)}const F$=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Qj={randomUUID:F$};function z$(n,e,t){n=n||{};const s=n.random??n.rng?.()??L$();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,P$(s)}function I$(n,e,t){return Qj.randomUUID&&!n?Qj.randomUUID():z$(n)}const Ji={ADD_BLOCK:"ADD_BLOCK",UPDATE_BLOCK:"UPDATE_BLOCK",REMOVE_BLOCK:"REMOVE_BLOCK",REORDER_BLOCKS:"REORDER_BLOCKS",SET_METADATA:"SET_METADATA",ADD_VARIABLE:"ADD_VARIABLE",UPDATE_VARIABLE:"UPDATE_VARIABLE",LOAD_DOCUMENT:"LOAD_DOCUMENT",SELECT_BLOCK:"SELECT_BLOCK"},M2={metadata:{title:"Untitled Document",version:"1.0",theme:"default"},variables:{},blocks:[],selectedBlockId:null,history:{past:[],future:[]}};function B$(n,e){switch(e.type){case Ji.LOAD_DOCUMENT:return{...M2,...e.payload,history:M2.history};case Ji.ADD_BLOCK:{const t={id:I$(),type:e.payload.type,data:e.payload.data||{}},s=[...n.blocks];return typeof e.payload.index=="number"?s.splice(e.payload.index,0,t):s.push(t),{...n,blocks:s,selectedBlockId:t.id}}case Ji.UPDATE_BLOCK:{const t=n.blocks.map(s=>s.id===e.payload.id?{...s,data:{...s.data,...e.payload.data}}:s);return{...n,blocks:t}}case Ji.REMOVE_BLOCK:return{...n,blocks:n.blocks.filter(t=>t.id!==e.payload.id),selectedBlockId:n.selectedBlockId===e.payload.id?null:n.selectedBlockId};case Ji.REORDER_BLOCKS:return{...n,blocks:e.payload.blocks};case Ji.SET_METADATA:return{...n,metadata:{...n.metadata,...e.payload}};case Ji.ADD_VARIABLE:return{...n,variables:{...n.variables,[e.payload.key]:e.payload.config}};case Ji.UPDATE_VARIABLE:return{...n,variables:{...n.variables,[e.payload.key]:{...n.variables[e.payload.key],...e.payload.config}}};case Ji.SELECT_BLOCK:return{...n,selectedBlockId:e.payload.id};default:return n}}const H$=(n=null)=>{const[e,t]=R.useReducer(B$,n||M2),s=R.useCallback(x=>t({type:Ji.LOAD_DOCUMENT,payload:x}),[]),i=R.useCallback((x,w={},A=null)=>t({type:Ji.ADD_BLOCK,payload:{type:x,data:w,index:A}}),[]),a=R.useCallback((x,w)=>t({type:Ji.UPDATE_BLOCK,payload:{id:x,data:w}}),[]),o=R.useCallback(x=>t({type:Ji.REMOVE_BLOCK,payload:{id:x}}),[]),c=R.useCallback(x=>t({type:Ji.REORDER_BLOCKS,payload:{blocks:x}}),[]),u=R.useCallback(x=>t({type:Ji.SET_METADATA,payload:x}),[]),h=R.useCallback((x,w)=>t({type:Ji.ADD_VARIABLE,payload:{key:x,config:w}}),[]),f=R.useCallback((x,w)=>t({type:Ji.UPDATE_VARIABLE,payload:{key:x,config:w}}),[]),g=R.useCallback(x=>t({type:Ji.SELECT_BLOCK,payload:{id:x}}),[]);return{documentState:e,actions:{loadDocument:s,addBlock:i,updateBlock:a,removeBlock:o,reorderBlocks:c,setMetadata:u,addVariable:h,updateVariable:f,selectBlock:g}}},U$=({data:n,onChange:e})=>{const t=n.text||"",s=i=>{e({text:i.target.innerText})};return r.jsx("div",{contentEditable:!0,suppressContentEditableWarning:!0,onBlur:s,className:"outline-none text-base text-slate-700 leading-relaxed min-h-[24px] empty:before:content-[attr(placeholder)] empty:before:text-slate-300 relative",placeholder:"Type something...",children:t})},V$=({data:n,onChange:e})=>{const t=n.level||1,s=n.text||"",i=n.align||"left",a=`h${Math.min(t,3)}`,o=c=>{e({text:c.target.innerText})};return r.jsx(a,{contentEditable:!0,suppressContentEditableWarning:!0,onBlur:o,className:`
                outline-none font-bold text-slate-900 leading-tight
                ${t===1?"text-3xl mb-4 mt-6":""}
                ${t===2?"text-2xl mb-3 mt-5":""}
                ${t===3?"text-xl mb-2 mt-4":""}
                text-${i}
            `,style:{minHeight:"1.2em"},children:s})},W$=({data:n,onChange:e})=>{const t=n.src;return t?r.jsx("div",{className:"relative group",children:r.jsx("img",{src:t,alt:"Document Asset",className:"max-w-full rounded-lg"})}):r.jsxs("div",{className:"w-full h-32 bg-slate-50 border-2 border-dashed border-slate-200 rounded-lg flex flex-col items-center justify-center text-slate-400 cursor-pointer hover:bg-slate-100 hover:border-slate-300 transition-colors",children:[r.jsx(VD,{size:24,className:"mb-2"}),r.jsx("span",{className:"text-sm",children:"Click to upload image"})]})},G$=({data:n,onChange:e})=>{const t=n.signee||"Client",s=n.required!==!1;return r.jsxs("div",{className:"my-4 p-4 border-2 border-dashed border-indigo-200 bg-indigo-50/50 rounded-lg flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-indigo-100 text-indigo-600 rounded-md",children:r.jsx(cf,{size:20})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-indigo-900",children:"Signature Required"}),r.jsxs("p",{className:"text-xs text-indigo-600",children:["Assignee: ",t]})]})]}),s&&r.jsx("span",{className:"text-xs font-bold text-red-500 bg-red-50 px-2 py-1 rounded",children:"REQUIRED"})]})},Y$=({data:n,onChange:e,businessData:t})=>{const s=n.align||"left",i=n.width||150,a=n.src||(t?.logo?`undefined/storage/${t.logo}`:null),o={left:"justify-start",center:"justify-center",right:"justify-end"}[s];return r.jsx("div",{className:`flex w-full ${o} mb-6 mt-4 group`,children:a?r.jsx("img",{src:a,alt:"Business Logo",style:{width:`${i}px`},className:"object-contain"}):r.jsx("div",{className:"w-40 h-16 bg-slate-100 border-2 border-dashed border-slate-300 rounded flex items-center justify-center text-slate-400",children:r.jsx("span",{className:"text-xs font-semibold",children:"Business Logo"})})})},X$=({data:n,onChange:e,businessData:t})=>{const s=n.align||"left",i={left:"text-left",center:"text-center",right:"text-right"}[s];return t?r.jsxs("div",{className:`w-full text-slate-600 text-sm leading-relaxed ${i} mb-4`,children:[r.jsx("p",{className:"font-bold text-slate-900",children:t.name}),t.address&&r.jsx("p",{children:t.address}),r.jsx("p",{children:[t.city,t.state,t.zip,t.country].filter(Boolean).join(", ")}),t.phone&&r.jsxs("p",{children:["Tel: ",t.phone]}),t.email&&r.jsxs("p",{children:["Email: ",t.email]}),t.tax_label&&t.tax_percentage&&r.jsxs("p",{className:"mt-1 text-xs text-slate-500 font-medium",children:[t.tax_label,": ",t.tax_percentage,"%"]})]}):r.jsxs("div",{className:"w-full p-2 border border-dashed border-amber-200 bg-amber-50 text-amber-600 text-xs rounded flex items-center gap-2",children:[r.jsx(wd,{size:14}),r.jsx("span",{children:"Business Info (Loading...)"})]})},K$=({block:n,actions:e,businessData:t,isSelected:s,onSelect:i})=>{const{attributes:a,listeners:o,setNodeRef:c,transform:u,transition:h,isDragging:f}=RP({id:n.id}),g={transform:Sc.Transform.toString(u),transition:h,opacity:f?.5:1},x=()=>{switch(n.type){case"HEADING":return r.jsx(V$,{data:n.data,onChange:w=>e.updateBlock(n.id,w)});case"TEXT":return r.jsx(U$,{data:n.data,onChange:w=>e.updateBlock(n.id,w)});case"IMAGE":return r.jsx(W$,{data:n.data,onChange:w=>e.updateBlock(n.id,w)});case"SIGNATURE":return r.jsx(G$,{data:n.data,onChange:w=>e.updateBlock(n.id,w)});case"LOGO":return r.jsx(Y$,{data:n.data,onChange:w=>e.updateBlock(n.id,w),businessData:t});case"BUSINESS_INFO":return r.jsx(X$,{data:n.data,onChange:w=>e.updateBlock(n.id,w),businessData:t});default:return r.jsxs("div",{className:"p-4 text-red-500",children:["Unknown Block Type: ",n.type]})}};return r.jsxs("div",{ref:c,style:g,className:"group relative flex items-start -ml-12 mb-2",children:[r.jsxs("div",{className:"w-10 h-full flex flex-col items-center pt-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx("button",{...a,...o,className:"p-1 text-slate-400 hover:text-slate-600 cursor-grab active:cursor-grabbing hover:bg-slate-100 rounded",children:r.jsx(By,{size:16})}),r.jsx("button",{onClick:()=>e.removeBlock(n.id),className:"p-1 mt-1 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded",children:r.jsx(ko,{size:16})})]}),r.jsx("div",{className:`flex-1 min-h-[40px] border rounded-md transition-colors cursor-pointer ${s?"border-2 border-indigo-500 ring-2 ring-indigo-50/50":"border-transparent group-hover:border-slate-100"}`,onClick:w=>{w.stopPropagation(),i(n.id)},children:x()})]})},Z$=({blocks:n,actions:e,readOnly:t,businessData:s,selectedBlockId:i,onSelectBlock:a})=>r.jsxs("div",{className:"w-full max-w-[850px] min-h-[1100px] bg-white shadow-sm border border-slate-200 lg:scale-[1] origin-top p-12 lg:p-16",id:"document-canvas",children:[n.length===0&&r.jsxs("div",{className:"text-center py-20 text-slate-400 border-2 border-dashed border-slate-200 rounded-lg",children:[r.jsx("p",{className:"mb-2 font-medium",children:"Empty Document"}),r.jsx("p",{className:"text-sm",children:"Drag blocks from the sidebar to start building."})]}),r.jsx(jP,{items:n.map(o=>o.id),strategy:EP,children:n.map(o=>r.jsx(K$,{block:o,actions:e,businessData:s,isSelected:i===o.id,onSelect:a},o.id))})]}),Ph=({type:n,icon:e,label:t})=>{const{attributes:s,listeners:i,setNodeRef:a,isDragging:o}=sv({id:`tool-${n}`,data:{type:"TOOL",toolType:n}});return r.jsxs("button",{ref:a,...i,...s,className:`w-full flex items-center gap-3 p-3 rounded-lg hover:bg-slate-50 border border-transparent hover:border-slate-200 transition-all cursor-grab active:cursor-grabbing text-left ${o?"opacity-50":""}`,children:[r.jsx("div",{className:"p-2 bg-indigo-50 text-indigo-600 rounded-md",children:r.jsx(e,{size:20})}),r.jsx("span",{className:"text-sm font-medium text-slate-700",children:t})]})},J$=()=>r.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[r.jsx("h3",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-4",children:"Content Blocks"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ph,{type:"HEADING",icon:ZH,label:"Heading"}),r.jsx(Ph,{type:"TEXT",icon:uf,label:"Text Paragraph"}),r.jsx(Ph,{type:"IMAGE",icon:VD,label:"Image"}),r.jsx(Ph,{type:"LOGO",icon:s9,label:"Smart Logo"})," ",r.jsx(Ph,{type:"BUSINESS_INFO",icon:wd,label:"Business Details"})," ",r.jsx(Ph,{type:"SIGNATURE",icon:cf,label:"Signature Field"})]}),r.jsx("div",{className:"h-px bg-slate-100 my-6"}),r.jsx("h3",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-4",children:"Layout"}),r.jsx("div",{className:"space-y-2",children:r.jsx("div",{className:"opacity-50 pointer-events-none",title:"Coming Soon",children:r.jsx(Ph,{type:"COLUMNS",icon:jH,label:"Columns (Soon)"})})})]}),Q$=({value:n,onChange:e})=>r.jsx("div",{className:"flex bg-slate-100 rounded-lg p-1 gap-1",children:["left","center","right"].map(t=>r.jsxs("button",{onClick:()=>e(t),className:`flex-1 p-1 rounded-md flex justify-center transition-all ${n===t?"bg-white shadow text-indigo-600":"text-slate-400 hover:text-slate-600"}`,children:[t==="left"&&r.jsx(tM,{size:16}),t==="center"&&r.jsx($D,{size:16}),t==="right"&&r.jsx(eM,{size:16})]},t))}),q$=({selectedBlock:n,updateBlock:e,removeBlock:t})=>{if(!n)return r.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-6 text-center text-slate-400",children:[r.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mb-4",children:r.jsx($$,{size:24})}),r.jsx("p",{className:"font-semibold text-slate-600 mb-1",children:"No Block Selected"}),r.jsx("p",{className:"text-xs",children:"Click on any element in the document canvas to customize its properties."})]});const{type:s,data:i,id:a}=n,o=(c,u)=>{e(a,{[c]:u})};return r.jsxs("div",{className:"h-full flex flex-col bg-white",children:[r.jsxs("div",{className:"p-4 border-b border-slate-200 flex items-center justify-between bg-slate-50",children:[r.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:s.replace("_"," ")}),r.jsx("button",{onClick:()=>t(a),className:"text-red-400 hover:text-red-600 p-1 hover:bg-red-50 rounded",children:r.jsx(ko,{size:16})})]}),r.jsxs("div",{className:"p-5 flex-1 overflow-y-auto form-control-group",children:[["HEADING","LOGO","BUSINESS_INFO","IMAGE"].includes(s)&&r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-2 block",children:"Alignment"}),r.jsx(Q$,{value:i.align||"left",onChange:c=>o("align",c)})]}),s==="HEADING"&&r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-2 block",children:"Heading Level"}),r.jsx("div",{className:"flex gap-2",children:[1,2,3].map(c=>r.jsxs("button",{onClick:()=>o("level",c),className:`flex-1 py-2 border rounded text-sm font-bold ${i.level===c?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-slate-200 text-slate-500 hover:border-slate-300"}`,children:["H",c]},c))})]}),s==="LOGO"&&r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-2 block",children:"Size (Width)"}),r.jsx("input",{type:"range",min:"50",max:"500",value:i.width||150,onChange:c=>o("width",parseInt(c.target.value)),className:"w-full accent-indigo-600"}),r.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mt-1",children:[r.jsx("span",{children:"Small"}),r.jsxs("span",{children:[i.width||150,"px"]}),r.jsx("span",{children:"Large"})]})]}),s==="SIGNATURE"&&r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"text-xs font-semibold text-slate-600 mb-2 block",children:"Signee"}),r.jsxs("select",{value:i.signee||"client",onChange:c=>o("signee",c.target.value),className:"w-full text-sm border-slate-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"client",children:"Client"}),r.jsx("option",{value:"me",children:"Me (Provider)"})]}),r.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:i.required!==!1,onChange:c=>o("required",c.target.checked),className:"rounded text-indigo-600 focus:ring-indigo-500"}),r.jsx("span",{className:"text-sm text-slate-700",children:"Required Field"})]})]})]})]})},$$=({size:n})=>r.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),r.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),eee=({variables:n,onAdd:e})=>{const[t,s]=R.useState(!1),[i,a]=R.useState(""),[o,c]=R.useState(""),u=()=>{if(!i)return;const h=i.replace(/[^a-zA-Z0-9_]/g,"");e(h,{type:"text",value:o,label:h}),a(""),c(""),s(!1)};return r.jsxs("div",{className:"h-1/3 min-h-[250px] border-t border-slate-200 flex flex-col bg-slate-50",children:[r.jsxs("div",{className:"p-4 border-b border-slate-200 flex items-center justify-between bg-white",children:[r.jsxs("div",{className:"flex items-center gap-2 text-slate-700",children:[r.jsx(hH,{size:16}),r.jsx("span",{className:"font-semibold text-sm",children:"Variables"})]}),r.jsx("button",{onClick:()=>s(!t),className:"p-1 hover:bg-slate-100 rounded text-indigo-600",children:r.jsx(df,{size:16})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[t&&r.jsxs("div",{className:"text-sm bg-white p-3 rounded-lg border border-indigo-100 shadow-sm",children:[r.jsx("input",{className:"w-full mb-2 p-1 border-b border-slate-200 text-xs focus:outline-none focus:border-indigo-500",placeholder:"Key (e.g. client_name)",value:i,onChange:h=>a(h.target.value),autoFocus:!0}),r.jsx("input",{className:"w-full mb-3 p-1 border-b border-slate-200 text-xs focus:outline-none focus:border-indigo-500",placeholder:"Default Value",value:o,onChange:h=>c(h.target.value)}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:u,className:"flex-1 py-1 bg-indigo-600 text-white text-xs rounded",children:"Add"}),r.jsx("button",{onClick:()=>s(!1),className:"flex-1 py-1 bg-slate-100 text-slate-600 text-xs rounded",children:"Cancel"})]})]}),Object.entries(n).length===0&&!t&&r.jsx("p",{className:"text-xs text-slate-400 italic text-center py-4",children:"No variables defined."}),Object.entries(n).map(([h,f])=>r.jsxs("div",{className:"bg-white p-2 rounded border border-slate-200 text-sm group",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"font-mono text-xs font-bold text-indigo-600 px-1 bg-indigo-50 rounded",children:`{{${h}}}`}),r.jsx("span",{className:"text-[10px] text-slate-400 capitalize",children:f.type})]}),r.jsx("p",{className:"text-slate-600 truncate text-xs pl-1",children:f.value})]},h))]})]})},tee=()=>{const{id:n}=vd(),e=yi(),{documentState:t,actions:s}=H$(),[i,a]=gt.useState("edit"),[o,c]=gt.useState(!1),[u,h]=gt.useState(null);R.useEffect(()=>{(async()=>{try{const w=await vr();h(w),t.variables&&Object.keys(t.variables).length===0&&(s.addVariable("client_name",{value:"",type:"text",label:"Client Name"}),s.addVariable("date",{value:new Date().toLocaleDateString(),type:"date",label:"Date"}))}catch(w){console.error("Failed to load business context",w)}})()},[]);const f=Zm(Nc(Xu,{activationConstraint:{distance:8}})),g=x=>{const{active:w,over:A}=x;if(A){if(w.data.current?.type==="TOOL"){s.addBlock(w.data.current.toolType);return}if(w.id!==A.id){const C=t.blocks.findIndex(D=>D.id===w.id),E=t.blocks.findIndex(D=>D.id===A.id),T=jN(t.blocks,C,E);s.reorderBlocks(T)}}};return r.jsx(Qm,{sensors:f,collisionDetection:r5,onDragEnd:g,children:r.jsxs("div",{className:"flex flex-col h-screen bg-slate-50 overflow-hidden",children:[r.jsxs("header",{className:"h-16 bg-white border-b border-slate-200 px-6 flex items-center justify-between z-30 flex-shrink-0",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>e("/documents"),className:"p-2 hover:bg-slate-100 rounded-full text-slate-500",children:r.jsx(vl,{size:20})}),r.jsx("input",{type:"text",value:t.metadata.title,onChange:x=>s.setMetadata({title:x.target.value}),className:"text-lg font-bold text-slate-800 border-none focus:ring-0 bg-transparent p-0 placeholder-slate-400",placeholder:"Untitled Document"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 text-slate-600 font-medium hover:bg-slate-100 rounded-lg",children:[r.jsx(jo,{size:18})," Preview"]}),r.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 shadow-sm",children:[r.jsx(Sl,{size:18})," Save"]})]})]}),r.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[r.jsxs("div",{className:"w-[300px] bg-white border-r border-slate-200 flex flex-col z-20",children:[r.jsx(J$,{}),r.jsx("div",{className:"h-px bg-slate-200 my-2"}),r.jsx(eee,{variables:t.variables,onAdd:s.addVariable})]}),r.jsx("div",{className:"flex-1 bg-slate-100 overflow-y-auto p-8 flex justify-center",children:r.jsx(Z$,{blocks:t.blocks,actions:s,readOnly:!1,businessData:u,selectedBlockId:t.selectedBlockId,onSelectBlock:s.selectBlock})}),r.jsx("div",{className:"w-[280px] bg-white border-l border-slate-200 z-20",children:r.jsx(q$,{selectedBlock:t.blocks.find(x=>x.id===t.selectedBlockId),updateBlock:s.updateBlock,removeBlock:s.removeBlock})})]})]})})},qf=({permission:n,redirectPath:e="/dashboard",children:t})=>{const{user:s,loading:i}=so(),{can:a,loading:o}=Gm(),c=yr();return i||n&&o?r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):s?s.email_verified_at?!s.business&&!s.parent_id&&c.pathname!=="/onboarding"?r.jsx(yp,{to:"/onboarding",state:{message:"Please complete onboarding to access your dashboard."},replace:!0}):n&&!a(n)?r.jsx(yp,{to:e,replace:!0}):t||r.jsx(b0,{}):r.jsx(yp,{to:"/verify-email-message",replace:!0}):r.jsx(yp,{to:"/login",state:{message:"You must be logged in to view this page."},replace:!0})},nee=()=>{const n={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6}}},e=[{icon:Bm,title:"Secure NDAs",description:"Generate rock-solid Non-Disclosure Agreements in seconds. Protect your intellectual property with legally sound templates."},{icon:ls,title:"Winning Proposals",description:"Create stunning business proposals that convert. Customize every detail to match your brand and impress clients."},{icon:DS,title:"Instant Invoicing",description:"Get paid faster with professional invoices. Automated calculations, tax handling, and sleek designs."},{icon:vc,title:"Team Collaboration",description:"Invite your team, assign roles, and collaborate on documents in real-time. Streamline your workflow."},{icon:XD,title:"Custom Branding",description:"Your docs, your brand. Upload logos, set colors, and ensure every document reflects your company identity."},{icon:_0,title:"Client Management",description:"Keep track of client details and associate documents with specific projects easily."}];return r.jsxs("div",{className:"bg-white",children:[r.jsx(Vm,{title:"Features",description:"Explore DocForge features: Secure NDAs, Winning Proposals, Instant Invoicing, and Team Collaboration."}),r.jsxs("section",{className:"relative pt-32 pb-20 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-slate-50 -skew-y-3 origin-top-left z-0 transform -translate-y-20"}),r.jsxs("div",{className:"max-w-7xl mx-auto px-6 relative z-10 text-center",children:[r.jsxs(ze.h1,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:n,className:"text-4xl md:text-6xl font-bold text-slate-900 mb-6 tracking-tight",children:["Tools designed for ",r.jsx("span",{className:"text-indigo-600",children:"running your agency."})]}),r.jsx(ze.p,{initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:n,className:"text-lg md:text-xl text-slate-600 max-w-2xl mx-auto mb-10 leading-relaxed",children:"DocForge isn't just a document editor. It's a complete operating system for your paperwork. From proposal to payment, we've got you covered."})]})]}),r.jsx("section",{className:"py-20 bg-white",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map((t,s)=>r.jsxs(ze.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:s*.1,duration:.5},className:"p-8 rounded-2xl border border-slate-100 bg-white hover:border-indigo-100 hover:shadow-xl transition-all group",children:[r.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-xl flex items-center justify-center text-indigo-600 mb-6 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:r.jsx(t.icon,{size:24})}),r.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-3",children:t.title}),r.jsx("p",{className:"text-slate-500 leading-relaxed",children:t.description})]},s))})})}),r.jsx("section",{className:"py-20 bg-slate-50",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-12 mb-24",children:[r.jsx("div",{className:"flex-1",children:r.jsx(ze.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"relative rounded-2xl overflow-hidden shadow-2xl border border-slate-200",children:r.jsx("div",{className:"aspect-video bg-slate-200 flex items-center justify-center text-slate-400",children:r.jsx("span",{className:"font-medium",children:"Editor Interface Preview"})})})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-6",children:"Unrivaled Editing Experience"}),r.jsx("p",{className:"text-slate-600 mb-8 text-lg",children:"Our purpose-built editors make customization intuitive. Forget complex formatting battlesjust fill, click, and generate."}),r.jsx("ul",{className:"space-y-4",children:["Real-time preview updates","New! Version History & Restoration","New! Share Tracking & Analytics","One-click PDF export"].map((t,s)=>r.jsxs("li",{className:"flex items-center gap-3 text-slate-700",children:[r.jsx(br,{className:"text-indigo-500",size:20}),t]},s))})]})]})})}),r.jsx("section",{className:"py-20 bg-slate-900 text-white text-center",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[r.jsx("h2",{className:"text-3xl md:text-5xl font-bold mb-8",children:"Ready to streamline your workflow?"}),r.jsx("p",{className:"text-slate-400 text-lg mb-10 max-w-2xl mx-auto",children:"Join thousands of freelancers and agencies who rely on DocForge for their critical documentation."}),r.jsx(Vt,{to:"/register",className:"inline-block px-8 py-4 bg-indigo-600 rounded-xl text-lg font-bold hover:bg-indigo-500 transition-colors shadow-lg hover:shadow-indigo-500/25",children:"Get Started for Free"})]})})]})},see=()=>{const[n,e]=R.useState(!0),t=[{name:"Starter",price:0,description:"Perfect for freelancers just getting started.",features:["Up to 3 Documents/mo","Basic NDA Templates","Standard PDF Export","1 User Seat"],cta:"Start Free",popular:!1},{name:"Professional",price:n?19:25,description:"For growing agencies and serious professionals.",features:["Unlimited Documents","All Template Types (NDA, Proposal, Invoice)","Custom Branding & Logos","Team Management (Up to 5 seats)","Priority Support"],cta:"Start Trial",popular:!0},{name:"Enterprise",price:"Custom",description:"Tailored solutions for large organizations.",features:["Everything in Professional","Unlimited Team Seats","SSO & Advanced Security","Custom Contract Development","Dedicated Account Manager"],cta:"Contact Sales",popular:!1}];return r.jsxs("div",{className:"bg-white",children:[r.jsx(Vm,{title:"Pricing",description:"Simple, transparent pricing for freelancers and agencies. Get started for free."}),r.jsxs("section",{className:"pt-32 pb-16 px-6 text-center",children:[r.jsx(ze.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-4xl md:text-5xl font-bold text-slate-900 mb-6",children:"Simple, transparent pricing"}),r.jsxs("div",{className:"flex items-center justify-center gap-4 mt-8",children:[r.jsx("span",{className:`text-sm font-medium ${n?"text-slate-500":"text-slate-900"}`,children:"Monthly"}),r.jsx("button",{onClick:()=>e(!n),className:"w-14 h-8 bg-slate-200 rounded-full p-1 transition-colors relative",children:r.jsx("div",{className:`w-6 h-6 bg-white rounded-full shadow-sm transition-transform ${n?"translate-x-6":"translate-x-0"}`})}),r.jsxs("span",{className:`text-sm font-medium ${n?"text-slate-900":"text-slate-500"}`,children:["Yearly ",r.jsx("span",{className:"text-emerald-500 text-xs font-bold ml-1",children:"(Save 20%)"})]})]})]}),r.jsx("section",{className:"pb-24 px-6 max-w-7xl mx-auto",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 items-start",children:t.map((s,i)=>r.jsxs(ze.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:i*.1},className:`relative p-8 rounded-2xl border ${s.popular?"border-indigo-600 shadow-2xl shadow-indigo-200":"border-slate-200 shadow-sm"} bg-white`,children:[s.popular&&r.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-indigo-600 text-white px-4 py-1 rounded-full text-sm font-bold tracking-wide",children:"MOST POPULAR"}),r.jsx("h3",{className:"text-xl font-bold text-slate-900",children:s.name}),r.jsx("p",{className:"text-slate-500 text-sm mt-2 h-10",children:s.description}),r.jsxs("div",{className:"my-8",children:[r.jsx("span",{className:"text-4xl font-bold text-slate-900",children:typeof s.price=="number"?`$${s.price}`:s.price}),typeof s.price=="number"&&r.jsx("span",{className:"text-slate-500",children:"/mo"})]}),r.jsx(Vt,{to:s.name==="Enterprise"?"/contact":"/register",className:`block w-full py-3 rounded-xl font-bold text-center transition-all ${s.popular?"bg-indigo-600 text-white hover:bg-indigo-700 hover:shadow-lg":"bg-slate-100 text-slate-900 hover:bg-slate-200"}`,children:s.cta}),r.jsx("ul",{className:"mt-8 space-y-4",children:s.features.map((a,o)=>r.jsxs("li",{className:"flex items-start gap-3 text-sm text-slate-600",children:[r.jsx(ii,{size:18,className:"text-emerald-500 flex-shrink-0 mt-0.5"}),a]},o))})]},i))})}),r.jsx("section",{className:"py-20 bg-slate-50 border-t border-slate-200",children:r.jsxs("div",{className:"max-w-3xl mx-auto px-6 text-center",children:[r.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-12",children:"Frequently Asked Questions"}),r.jsxs("div",{className:"space-y-8 text-left",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-slate-900 mb-2",children:"Can I cancel anytime?"}),r.jsx("p",{className:"text-slate-600",children:"Yes, you can cancel your subscription at any time. Your access will continue until the end of your billing period."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-slate-900 mb-2",children:"Is there a free trial?"}),r.jsx("p",{className:"text-slate-600",children:"We offer a 14-day free trial for the Professional plan. No credit card required to start."})]})]})]})})]})},iee=()=>r.jsxs("div",{className:"bg-white",children:[r.jsx(Vm,{title:"About Us",description:"Empowering businesses to forge ahead. Learn more about DocForge's mission and team."}),r.jsxs("section",{className:"pt-32 pb-20 px-6 max-w-4xl mx-auto text-center",children:[r.jsxs(ze.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-4xl md:text-6xl font-bold text-slate-900 mb-8",children:["Empowering businesses to ",r.jsx("span",{className:"text-indigo-600",children:"forge ahead."})]}),r.jsx("p",{className:"text-xl text-slate-600 leading-relaxed",children:"At DocForge, we believe that administrative friction shouldn't slow down innovation. Our mission is to provide intuitive, powerful tools that let you focus on what you do bestbuilding your business."})]}),r.jsx("section",{className:"py-12 bg-slate-900 text-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-6 grid grid-cols-1 md:grid-cols-3 gap-8 text-center",children:[r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"text-4xl font-bold text-indigo-400 mb-2",children:"10k+"}),r.jsx("div",{className:"text-slate-400",children:"Documents Generated"})]}),r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"text-4xl font-bold text-indigo-400 mb-2",children:"99.9%"}),r.jsx("div",{className:"text-slate-400",children:"Uptime Reliability"})]}),r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"text-4xl font-bold text-indigo-400 mb-2",children:"24/7"}),r.jsx("div",{className:"text-slate-400",children:"Global Support"})]})]})}),r.jsx("section",{className:"py-20 px-6 max-w-5xl mx-auto",children:r.jsxs("div",{className:"bg-slate-50 p-8 md:p-12 rounded-3xl",children:[r.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-6",children:"Our Story"}),r.jsx("p",{className:"text-slate-600 mb-6 leading-relaxed",children:"Founded in 2024, DocForge started with a simple observation: small businesses and freelancers were wasting hours on paperwork that should take minutes. Clunky legacy software and expensive legal fees were barriers to entry."}),r.jsx("p",{className:"text-slate-600 leading-relaxed",children:"We built DocForge to be the solution we wanted for ourselvesfast, beautiful, and secure. Today, we're proud to support a growing community of entrepreneurs and teams worldwide."})]})}),r.jsxs("section",{className:"py-20 px-6 max-w-7xl mx-auto",children:[r.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-12 text-center",children:"Our Core Values"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(vc,{size:32})}),r.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-3",children:"Customer First"}),r.jsx("p",{className:"text-slate-500",children:"We build for you. Your feedback drives our roadmap and our innovations."})]}),r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-indigo-50 text-indigo-600 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(_S,{size:32})}),r.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-3",children:"Global Mindset"}),r.jsx("p",{className:"text-slate-500",children:"Business knows no borders. Our tools are designed for international collaboration."})]}),r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-purple-50 text-purple-600 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(cH,{size:32})}),r.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-3",children:"Excellence"}),r.jsx("p",{className:"text-slate-500",children:`We don't settle for "good enough". We strive for perfection in every pixel.`})]})]})]})]}),aee=()=>r.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-32",children:[r.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-8",children:"Privacy Policy"}),r.jsxs("div",{className:"prose prose-slate max-w-none",children:[r.jsx("p",{className:"text-slate-600 mb-6",children:"Last updated: January 1, 2026"}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mt-8 mb-4",children:"1. Introduction"}),r.jsx("p",{className:"text-slate-600 mb-4",children:"Welcome to DocForge. We respect your privacy and are committed to protecting your personal data. This privacy policy will inform you as to how we look after your personal data when you visit our website and tell you about your privacy rights and how the law protects you."}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mt-8 mb-4",children:"2. Data We Collect"}),r.jsx("p",{className:"text-slate-600 mb-4",children:"We may collect, use, store and transfer different kinds of personal data about you which we have grouped together follows:"}),r.jsxs("ul",{className:"list-disc pl-6 text-slate-600 mb-4 space-y-2",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Identity Data:"})," includes first name, last name, username or similar identifier."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Contact Data:"})," includes email address and telephone numbers."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Technical Data:"})," includes internet protocol (IP) address, your login data, browser type and version."]})]}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mt-8 mb-4",children:"3. How We Use Your Data"}),r.jsx("p",{className:"text-slate-600 mb-4",children:"We will only use your personal data when the law allows us to. Most commonly, we will use your personal data in the following circumstances:"}),r.jsxs("ul",{className:"list-disc pl-6 text-slate-600 mb-4 space-y-2",children:[r.jsx("li",{children:"Where we need to perform the contract we are about to enter into or have entered into with you."}),r.jsx("li",{children:"Where it is necessary for our legitimate interests (or those of a third party) and your interests and fundamental rights do not override those interests."})]})]})]}),ree=()=>r.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-32",children:[r.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-8",children:"Terms of Service"}),r.jsxs("div",{className:"prose prose-slate max-w-none",children:[r.jsx("p",{className:"text-slate-600 mb-6",children:"Last updated: January 1, 2026"}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mt-8 mb-4",children:"1. Agreement to Terms"}),r.jsx("p",{className:"text-slate-600 mb-4",children:"By accessing or using our website and services, you agree to be bound by these Terms of Service and our Privacy Policy. If you do not agree to these terms, please do not use our services."}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mt-8 mb-4",children:"2. Use License"}),r.jsx("p",{className:"text-slate-600 mb-4",children:"Permission is granted to temporarily download one copy of the materials (information or software) on DocForge's website for personal, non-commercial transitory viewing only. This is the grant of a license, not a transfer of title."}),r.jsx("h2",{className:"text-2xl font-bold text-slate-900 mt-8 mb-4",children:"3. Disclaimer"}),r.jsx("p",{className:"text-slate-600 mb-4",children:"The materials on DocForge's website are provided on an 'as is' basis. DocForge makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights."})]})]}),oee=()=>{const[n,e]=R.useState(!1),[t,s]=R.useState(!1),[i,a]=R.useState({name:"",email:"",subject:"",message:""}),o=u=>{a({...i,[u.target.name]:u.target.value})},c=async u=>{u.preventDefault(),s(!0);try{await Dt.post("/public/contact",i),e(!0),ni.success("Message sent successfully!"),a({name:"",email:"",subject:"",message:""})}catch(h){console.error("Failed to submit contact form",h),ni.error("Failed to send message. Please try again.")}finally{s(!1)}};return r.jsx("div",{className:"bg-white pt-32 pb-24",children:r.jsxs("div",{className:"max-w-3xl mx-auto px-6 text-center",children:[r.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-slate-900 mb-6",children:"Get in touch"}),r.jsx("p",{className:"text-slate-600 text-lg mb-12",children:"Have questions about our plans or need technical support? We're here to help."}),n?r.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-2xl p-8 text-emerald-800",children:[r.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Message Sent!"}),r.jsx("p",{children:"Thanks for reaching out. We'll get back to you within 24 hours."}),r.jsx("button",{onClick:()=>e(!1),className:"mt-6 text-emerald-600 font-medium hover:underline",children:"Send another message"})]}):r.jsxs("form",{onSubmit:c,className:"bg-white border border-slate-200 rounded-2xl p-8 md:p-10 shadow-xl text-left",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Name"}),r.jsx("input",{type:"text",name:"name",value:i.name,onChange:o,className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all outline-none",required:!0,placeholder:"John Doe"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Email"}),r.jsx("input",{type:"email",name:"email",value:i.email,onChange:o,className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all outline-none",required:!0,placeholder:"john@example.com"})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Subject"}),r.jsx("input",{type:"text",name:"subject",value:i.subject,onChange:o,className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all outline-none",required:!0,placeholder:"How can we help?"})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Message"}),r.jsx("textarea",{rows:"5",name:"message",value:i.message,onChange:o,className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all outline-none",required:!0,placeholder:"Tell us more..."})]}),r.jsx("button",{type:"submit",disabled:t,className:"w-full py-4 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition-all shadow-lg hover:shadow-indigo-500/25 flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:t?r.jsx("span",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):r.jsxs(r.Fragment,{children:[r.jsx(ny,{size:20}),"Send Message"]})})]})]})})},lee=()=>r.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-32 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-indigo-50 text-indigo-600 rounded-full flex items-center justify-center mx-auto mb-8",children:r.jsx(_0,{size:40})}),r.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-6",children:"Join the Team"}),r.jsx("p",{className:"text-xl text-slate-600 mb-12",children:"We're always looking for talented individuals to help us build the future of document management."}),r.jsxs("div",{className:"p-12 border border-slate-200 rounded-2xl bg-slate-50",children:[r.jsx("p",{className:"text-slate-500 font-medium",children:"There are currently no open positions."}),r.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"Check back later or follow us on social media for updates."})]})]}),cee=()=>{const n=[{version:"v1.0.0",date:"January 19, 2026",title:"Global Launch",description:"DocForge is officially live! Create NDAs, Proposals, and Invoices with ease.",type:"Major"},{version:"v0.9.5",date:"December 15, 2025",title:"Beta Release",description:"Initial beta release to select partners.",type:"Beta"}];return r.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-32",children:[r.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-12",children:"Product Updates"}),r.jsx("div",{className:"space-y-12 border-l border-slate-200 ml-4 pl-8 relative",children:n.map((e,t)=>r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute -left-[41px] top-1.5 w-5 h-5 rounded-full bg-white border-4 border-indigo-600"}),r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("span",{className:"font-mono text-sm font-bold text-indigo-600 bg-indigo-50 px-2 py-1 rounded",children:e.version}),r.jsx("span",{className:"text-slate-400 text-sm",children:e.date})]}),r.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:e.title}),r.jsx("p",{className:"text-slate-600",children:e.description})]},t))})]})},dee=async(n={})=>(await Dt.get("/public/posts",{params:n})).data,uee=async n=>(await Dt.get(`/public/posts/${n}`)).data,hee=()=>{const[n,e]=R.useState([]),[t,s]=R.useState(!0),[i,a]=R.useState({}),[o,c]=R.useState(1);R.useEffect(()=>{u()},[o]);const u=async()=>{s(!0);try{const x=await dee({page:o});e(x.data),a({current_page:x.current_page,last_page:x.last_page,total:x.total})}catch(x){console.error("Failed to fetch blog posts",x)}finally{s(!1)}},h=n.length>0?n[0]:null,f=n.length>0?n.slice(1):[],g={"@context":"https://schema.org","@type":"Blog",name:"DocForge Blog",description:"Insights on document workflows, agency growth, and product updates.",url:"https://docforgedocs.com/blog",blogPost:n.map(x=>({"@type":"BlogPosting",headline:x.title,image:x.featured_image,datePublished:x.published_at,author:{"@type":"Person",name:x.author?.name||"DocForge Team"}}))};return r.jsxs("div",{className:"min-h-screen bg-slate-50",children:[r.jsx(Vm,{title:"Blog",description:"Latest updates, guides, and insights from the DocForge team.",url:"/blog",jsonLd:g}),r.jsx("div",{className:"bg-white pt-32 pb-20 border-b border-slate-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6 text-center",children:r.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[r.jsx("span",{className:"inline-block py-1 px-3 rounded-full bg-indigo-50 text-indigo-600 text-xs font-bold uppercase tracking-wider mb-4 border border-indigo-100",children:"The DocForge Log"}),r.jsxs("h1",{className:"text-4xl md:text-6xl font-extrabold text-slate-900 mb-6 tracking-tight",children:["Insights for ",r.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-indigo-500",children:"Modern Agencies"})]}),r.jsx("p",{className:"text-xl text-slate-500 max-w-2xl mx-auto leading-relaxed",children:"Discover strategies for efficient document workflows, business growth, and product updates straight from our team."})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-6 py-12",children:t?r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(x=>r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"bg-slate-200 h-64 rounded-2xl mb-4"}),r.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/2"})]},x))}):r.jsxs(r.Fragment,{children:[h&&o===1&&r.jsxs(ze.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"mb-16 group relative rounded-3xl overflow-hidden shadow-2xl bg-white grid lg:grid-cols-2",children:[r.jsx("div",{className:"absolute top-4 left-4 z-10",children:r.jsxs("span",{className:"bg-white/90 backdrop-blur text-indigo-600 px-3 py-1 rounded-full text-xs font-bold shadow-sm flex items-center gap-1",children:[r.jsx(qD,{size:12,className:"fill-indigo-600"})," Featured"]})}),r.jsx("div",{className:"relative h-64 lg:h-full overflow-hidden",children:h.featured_image?r.jsx("img",{src:h.featured_image,alt:h.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"}):r.jsx("div",{className:"w-full h-full bg-indigo-50 flex items-center justify-center",children:r.jsx("span",{className:"text-indigo-200 font-bold text-6xl",children:"DocForge"})})}),r.jsxs("div",{className:"p-8 lg:p-12 flex flex-col justify-center",children:[r.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500 mb-4",children:[r.jsx("span",{className:"text-indigo-600 font-bold",children:h.category?.name||"Update"}),r.jsx("span",{className:"w-1 h-1 bg-slate-300 rounded-full"}),r.jsx("span",{children:new Date(h.published_at).toLocaleDateString()})]}),r.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-slate-900 mb-4 group-hover:text-indigo-600 transition-colors",children:r.jsx(Vt,{to:`/blog/${h.slug}`,children:h.title})}),r.jsx("p",{className:"text-slate-600 text-lg mb-8 line-clamp-3",children:h.summary||"Read the full article to learn more regarding this topic..."}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold",children:h.author?.name?.[0]||"D"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-bold text-slate-900",children:h.author?.name||"DocForge Team"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Author"})]})]}),r.jsxs(Vt,{to:`/blog/${h.slug}`,className:"inline-flex items-center gap-2 bg-slate-900 text-white px-6 py-3 rounded-xl font-bold hover:bg-indigo-600 transition-colors",children:["Read Article ",r.jsx(Qp,{size:18})]})]})]})]}),r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16",children:(o===1?f:n).map((x,w)=>r.jsx(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:w*.1},children:r.jsxs(Vt,{to:`/blog/${x.slug}`,className:"group flex flex-col h-full bg-white border border-slate-100 rounded-2xl overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300",children:[r.jsxs("div",{className:"aspect-[16/10] overflow-hidden bg-slate-100 relative",children:[x.featured_image?r.jsx("img",{src:x.featured_image,alt:x.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center bg-indigo-50 text-indigo-300",children:r.jsx("span",{className:"text-4xl font-bold opacity-20",children:"DocForge"})}),x.category&&r.jsx("span",{className:"absolute top-4 left-4 bg-white/90 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-bold text-indigo-600 shadow-sm border border-indigo-50",children:x.category.name})]}),r.jsxs("div",{className:"p-6 flex flex-col flex-1",children:[r.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 mb-4",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Gu,{size:14}),new Date(x.published_at).toLocaleDateString()]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Xa,{size:14}),"5 min read"]})]}),r.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-3 group-hover:text-indigo-600 transition-colors line-clamp-2",children:x.title}),r.jsx("p",{className:"text-slate-600 text-sm leading-relaxed mb-6 flex-1 line-clamp-3 break-words",children:x.summary?.replace(/&nbsp;/g," ")||"Read the full article to learn more..."}),r.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-slate-50 mt-auto",children:[r.jsxs("span",{className:"text-slate-700 text-xs font-medium flex items-center gap-2",children:["By ",x.author?.name||"DocForge"]}),r.jsxs("span",{className:"text-indigo-600 font-bold text-sm flex items-center gap-1 group-hover:gap-2 transition-all",children:["Read ",r.jsx(Qp,{size:16})]})]})]})]})},x.id))}),r.jsxs("div",{className:"mb-20 bg-slate-900 rounded-3xl p-8 md:p-12 relative overflow-hidden text-center md:text-left grid md:grid-cols-2 gap-8 items-center",children:[r.jsxs("div",{className:"relative z-10",children:[r.jsx("h3",{className:"text-3xl font-bold text-white mb-4",children:"Stay ahead of the curve"}),r.jsx("p",{className:"text-slate-400 mb-8 text-lg",children:"Join 5,000+ agency owners receiving our weekly insights on workflow optimization and growth."}),r.jsxs("form",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsx("input",{type:"email",placeholder:"Enter your work email",className:"bg-white/10 border border-white/20 text-white placeholder:text-slate-500 px-4 py-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 flex-1"}),r.jsxs("button",{className:"bg-indigo-600 hover:bg-indigo-500 text-white px-6 py-3 rounded-xl font-bold transition-colors flex items-center justify-center gap-2",children:[r.jsx(ri,{size:18})," Subscribe"]})]})]}),r.jsx("div",{className:"relative z-10 hidden md:block",children:r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/20 to-purple-500/20 rounded-full blur-3xl transform translate-x-1/2 -translate-y-1/2"})})]}),i.last_page>1&&r.jsxs("div",{className:"flex justify-center gap-2",children:[r.jsx("button",{onClick:()=>c(x=>Math.max(1,x-1)),disabled:o===1,className:"px-6 py-3 rounded-xl bg-white border border-slate-200 text-slate-600 font-medium hover:bg-indigo-50 hover:text-indigo-600 hover:border-indigo-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Previous"}),r.jsx("span",{className:"px-6 py-3 bg-white border border-slate-200 rounded-xl text-slate-900 font-bold min-w-[3rem] text-center",children:i.current_page}),r.jsx("button",{onClick:()=>c(x=>Math.min(i.last_page,x+1)),disabled:o===i.last_page,className:"px-6 py-3 rounded-xl bg-white border border-slate-200 text-slate-600 font-medium hover:bg-indigo-50 hover:text-indigo-600 hover:border-indigo-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Next"})]})]})})]})},fee=()=>{const{slug:n}=vd(),[e,t]=R.useState(null),[s,i]=R.useState(!0),[a,o]=R.useState(null),{scrollYProgress:c}=z8(),u=B8(c,{stiffness:100,damping:30,restDelta:.001});R.useEffect(()=>{h(),window.scrollTo(0,0)},[n]);const h=async()=>{i(!0);try{const g=await uee(n);t(g)}catch(g){console.error("Failed to fetch blog post",g),o("Post not found")}finally{i(!1)}};if(s)return r.jsx("div",{className:"min-h-screen bg-white pt-32 pb-24 flex justify-center",children:r.jsx("div",{className:"w-8 h-8 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"})});if(a||!e)return r.jsxs("div",{className:"min-h-screen bg-white pt-32 pb-24 text-center",children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-4",children:"Post Not Found"}),r.jsx(Vt,{to:"/blog",className:"text-indigo-600 font-bold hover:underline",children:"Return to Blog"})]});const f={"@context":"https://schema.org","@type":"BlogPosting",headline:e.title,image:e.featured_image?[e.featured_image]:[],datePublished:e.published_at,dateModified:e.updated_at||e.published_at,author:{"@type":"Person",name:e.author?.name||"DocForge Team"}};return r.jsxs("article",{className:"min-h-screen bg-white",children:[r.jsx(Vm,{title:e.seo_title||e.title,description:e.seo_description||e.summary,url:`/blog/${e.slug}`,image:e.featured_image,type:"article",keywords:e.meta_keywords,jsonLd:f}),r.jsx(ze.div,{className:"fixed top-0 left-0 right-0 h-1 bg-indigo-600 origin-left z-50",style:{scaleX:u}}),r.jsx("div",{className:"bg-slate-50 pt-32 pb-12 border-b border-slate-200",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[r.jsxs(Vt,{to:"/blog",className:"inline-flex items-center gap-2 text-slate-500 font-bold text-sm hover:text-indigo-600 mb-8 transition-colors",children:[r.jsx(vl,{size:16})," Back to Blog"]}),r.jsxs("div",{className:"max-w-4xl",children:[e.category&&r.jsx("span",{className:"inline-block bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider mb-6",children:e.category.name}),r.jsx("h1",{className:"text-4xl md:text-6xl font-extrabold text-slate-900 mb-6 leading-tight",children:e.title}),r.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-slate-500",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-white border border-slate-200 flex items-center justify-center overflow-hidden",children:e.author?.avatar_url?r.jsx("img",{src:e.author.avatar_url,alt:e.author.name,className:"w-full h-full object-cover"}):r.jsx("span",{className:"font-bold text-xs text-slate-500",children:e.author?.name?.[0]||"D"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-slate-900 text-sm",children:e.author?.name||"DocForge Team"}),r.jsx("p",{className:"text-xs",children:"Author"})]})]}),r.jsx("span",{className:"w-px h-8 bg-slate-300 hidden sm:block"}),r.jsxs("div",{className:"flex items-center gap-4 text-sm font-medium",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Gu,{size:18,className:"text-slate-400"}),new Date(e.published_at).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]}),r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Xa,{size:18,className:"text-slate-400"}),"5 min read"]})]})]})]})]})}),r.jsx("div",{className:"max-w-7xl mx-auto px-6 py-12",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-12",children:[r.jsxs("div",{className:"lg:col-span-8",children:[e.featured_image&&r.jsx("div",{className:"rounded-2xl overflow-hidden mb-12 shadow-lg border border-slate-100",children:r.jsx("img",{src:e.featured_image,alt:e.title,className:"w-full h-auto"})}),r.jsx("div",{className:"prose prose-lg prose-indigo prose-headings:font-bold prose-headings:text-slate-900 prose-p:text-slate-600 prose-p:leading-8 prose-li:text-slate-600 max-w-none break-words",dangerouslySetInnerHTML:{__html:e.content.replace(/&nbsp;/g," ")}}),r.jsxs("div",{className:"mt-16 pt-8 border-t border-slate-200",children:[r.jsxs("h3",{className:"font-bold text-slate-900 mb-4 flex items-center gap-2",children:[r.jsx(ZD,{size:20})," Share this article"]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{className:"p-3 rounded-full bg-slate-100 text-slate-600 hover:bg-[#1877F2] hover:text-white transition-colors",children:r.jsx(LH,{size:20})}),r.jsx("button",{className:"p-3 rounded-full bg-slate-100 text-slate-600 hover:bg-[#1DA1F2] hover:text-white transition-colors",children:r.jsx(m9,{size:20})}),r.jsx("button",{className:"p-3 rounded-full bg-slate-100 text-slate-600 hover:bg-[#0A66C2] hover:text-white transition-colors",children:r.jsx(lU,{size:20})})]})]})]}),r.jsx("div",{className:"lg:col-span-4 space-y-8",children:r.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6 border border-slate-100 sticky top-32",children:[r.jsx("h3",{className:"font-bold text-slate-900 mb-4",children:"In this article"}),r.jsxs("ul",{className:"space-y-3 text-sm",children:[r.jsx("li",{children:r.jsxs("a",{href:"#",className:"flex items-center gap-2 text-indigo-600 font-medium",children:[r.jsx(gl,{size:14})," Introduction"]})}),r.jsx("li",{children:r.jsxs("a",{href:"#",className:"flex items-center gap-2 text-slate-600 hover:text-indigo-600 transition-colors",children:[r.jsx(gl,{size:14,className:"opacity-0"})," Key Takeaways"]})}),r.jsx("li",{children:r.jsxs("a",{href:"#",className:"flex items-center gap-2 text-slate-600 hover:text-indigo-600 transition-colors",children:[r.jsx(gl,{size:14,className:"opacity-0"})," Implementation Guide"]})}),r.jsx("li",{children:r.jsxs("a",{href:"#",className:"flex items-center gap-2 text-slate-600 hover:text-indigo-600 transition-colors",children:[r.jsx(gl,{size:14,className:"opacity-0"})," Conclusion"]})})]}),r.jsxs("div",{className:"mt-8 pt-8 border-t border-slate-200",children:[r.jsx("p",{className:"font-bold text-slate-900 mb-2",children:"Need help with documents?"}),r.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"DocForge streamlines your proposals and contracts."}),r.jsx(Vt,{to:"/register",className:"block text-center bg-indigo-600 text-white font-bold py-3 rounded-xl hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200",children:"Get Started Free"})]})]})})]})})]})},mee=()=>{const{token:n}=vd(),[e,t]=R.useState(null),[s,i]=R.useState(!0),[a,o]=R.useState(null);if(R.useEffect(()=>{n&&(async()=>{try{const g=await Dt.get(`/public/documents/${n}`);t(g.data.data)}catch(g){console.error("Failed to load public document",g),o("Document not found or access denied.")}finally{i(!1)}})()},[n]),s)return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:r.jsx(gs,{size:40,className:"text-indigo-600 animate-spin"})});if(a||!e)return r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-slate-50 p-4",children:r.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg max-w-md w-full text-center",children:[r.jsx(xr,{size:48,className:"text-red-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-2",children:"Unavailable"}),r.jsx("p",{className:"text-slate-500",children:a||"This document could not be found."})]})});let c=e.content;if(typeof c=="string")try{c=JSON.parse(c)}catch{}const u=e.type?.slug||e.document_type?.slug||e.type_slug||e.type;console.log("Detected Document Type:",u);const h=()=>{switch(u){case"nda":return r.jsx(by,{data:c.formData,content:c.docContent,zoom:1,readOnly:!0});case"invoice":return r.jsx(Ih,{data:c.formData,totals:c.totals||{},zoom:1,readOnly:!0});case"proposal":return r.jsx(zh,{data:c.formData,content:c.docContent,zoom:1,readOnly:!0});default:return r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(xr,{className:"mx-auto text-amber-500 mb-2",size:32}),r.jsx("h3",{className:"text-lg font-bold text-slate-700",children:"Unknown Document Type"}),r.jsxs("p",{className:"text-slate-500 mb-4",children:['The document type "',u,'" is not recognized by the viewer.']}),r.jsx("div",{className:"text-left bg-slate-100 p-4 rounded overflow-auto max-h-96 text-xs font-mono",children:JSON.stringify(c,null,2)})]})}};return r.jsxs("div",{className:"min-h-screen bg-slate-100 flex flex-col",children:[r.jsxs("header",{className:"bg-white h-16 border-b border-slate-200 px-6 flex items-center justify-between shadow-sm flex-shrink-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center text-white font-bold text-sm",children:"DF"}),r.jsx("span",{className:"font-bold text-slate-700",children:"DocForge"})]}),r.jsx("div",{className:"flex items-center gap-3",children:e.pdf_path||e.pdf_url?r.jsxs("a",{href:e.pdf_url||`/storage/${e.pdf_path}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-medium rounded-lg transition-colors",children:[r.jsx(wl,{size:16}),"Download PDF"]}):r.jsxs("button",{onClick:()=>window.print(),className:"flex items-center gap-2 px-4 py-2 bg-slate-200 hover:bg-slate-300 text-slate-700 text-sm font-medium rounded-lg transition-colors",children:[r.jsx(wl,{size:16}),"Print / Save"]})})]}),r.jsx("div",{className:"flex-1 overflow-auto p-4 md:p-8 flex justify-center",children:r.jsx("div",{className:"bg-white shadow-2xl overflow-hidden print:shadow-none max-w-4xl w-full",children:h()})})]})},gee=({children:n})=>{const{user:e,loading:t}=so();return t?r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):e?r.jsx(yp,{to:"/dashboard",replace:!0}):n||r.jsx(b0,{})},pee=()=>{const{pathname:n}=yr();return R.useEffect(()=>{window.scrollTo(0,0)},[n]),null};function xee(){return r.jsx(j6,{children:r.jsx(Nk,{children:r.jsxs(dL,{children:[r.jsx(pee,{}),r.jsx(kV,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#fff",color:"#334155",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)",border:"1px solid #e2e8f0",padding:"16px",borderRadius:"12px",fontFamily:"inherit",fontSize:"14px",fontWeight:500},success:{style:{borderLeft:"4px solid #10b981"},iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{style:{borderLeft:"4px solid #ef4444"},iconTheme:{primary:"#ef4444",secondary:"#fff"}}}}),r.jsxs(I3,{children:[r.jsxs(jt,{element:r.jsx(E9,{}),children:[r.jsx(jt,{path:"/",element:r.jsx(_9,{})}),r.jsx(jt,{path:"/features",element:r.jsx(nee,{})}),r.jsx(jt,{path:"/pricing",element:r.jsx(see,{})}),r.jsx(jt,{path:"/about",element:r.jsx(iee,{})}),r.jsx(jt,{path:"/privacy",element:r.jsx(aee,{})}),r.jsx(jt,{path:"/terms",element:r.jsx(ree,{})}),r.jsx(jt,{path:"/contact",element:r.jsx(oee,{})}),r.jsx(jt,{path:"/careers",element:r.jsx(lee,{})}),r.jsx(jt,{path:"/changelog",element:r.jsx(cee,{})}),r.jsx(jt,{path:"/blog",element:r.jsx(hee,{})}),r.jsx(jt,{path:"/blog/:slug",element:r.jsx(fee,{})}),r.jsx(jt,{path:"/accept-invite",element:r.jsx(H9,{})}),r.jsx(jt,{path:"/verify-email",element:r.jsx(RV,{})}),r.jsx(jt,{path:"/verify-email-message",element:r.jsx(U9,{})})]}),r.jsx(jt,{element:r.jsx(qf,{redirectPath:"/login"}),children:r.jsx(jt,{path:"/onboarding",element:r.jsx(O9,{})})}),r.jsx(jt,{path:"/view/:token",element:r.jsx(mee,{})}),r.jsxs(jt,{element:r.jsx(gee,{}),children:[r.jsx(jt,{path:"/login",element:r.jsx(k9,{})}),r.jsx(jt,{path:"/register",element:r.jsx(D9,{})}),r.jsx(jt,{path:"/forgot-password",element:r.jsx(DV,{})}),r.jsx(jt,{path:"/password-reset/:token",element:r.jsx(MV,{})}),r.jsx(jt,{path:"/auth/callback",element:r.jsx(PV,{})})]}),r.jsx(jt,{element:r.jsx(qf,{}),children:r.jsxs(jt,{element:r.jsx(kX,{}),children:[r.jsx(jt,{path:"/dashboard",element:r.jsx(AX,{})}),r.jsxs(jt,{element:r.jsx(qf,{permission:"document.view"}),children:[r.jsx(jt,{path:"/documents",element:r.jsx(EJ,{})}),r.jsx(jt,{path:"/documents/nda",element:r.jsx(sj,{})}),r.jsx(jt,{path:"/documents/nda/:id",element:r.jsx(sj,{})}),r.jsx(jt,{path:"/documents/proposal",element:r.jsx(ij,{})}),r.jsx(jt,{path:"/documents/proposal/:id",element:r.jsx(ij,{})}),r.jsx(jt,{path:"/documents/invoice",element:r.jsx(aj,{})}),r.jsx(jt,{path:"/documents/invoice/:id",element:r.jsx(aj,{})}),r.jsx(jt,{path:"/documents/offer-letter",element:r.jsx(lj,{})}),r.jsx(jt,{path:"/documents/offer-letter/:id",element:r.jsx(lj,{})}),r.jsx(jt,{path:"/documents/consulting-agreement",element:r.jsx(cj,{})}),r.jsx(jt,{path:"/documents/consulting-agreement/:id",element:r.jsx(cj,{})})]}),r.jsx(jt,{element:r.jsx(qf,{permission:"team.view"}),children:r.jsx(jt,{path:"/team",element:r.jsx(LJ,{})})}),r.jsxs(jt,{element:r.jsx(qf,{permission:"settings.signature"}),children:[r.jsx(jt,{path:"/signatures",element:r.jsx(D$,{})}),r.jsx(jt,{path:"/signatures/list",element:r.jsx(M$,{})})]}),r.jsx(jt,{path:"/document-engine/test",element:r.jsx(tee,{})}),r.jsx(jt,{element:r.jsx(qf,{permission:"settings.manage"}),children:r.jsx(jt,{path:"/settings",element:r.jsx(MJ,{})})})]})})]})]})})})}BO.createRoot(document.getElementById("root")).render(r.jsx(R.StrictMode,{children:r.jsx(xee,{})}));
